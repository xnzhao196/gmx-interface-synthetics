{"version":3,"sources":["img/logo_GMX.svg","img/ic_arbitrum_96.svg","img/ic_avalanche_96.svg","img/ic_language24.svg","img/long.svg","img/short.svg","img/swap.svg","img/ic_arbitrum_24.svg","img/ic_glp_avax.svg","img/ic_gm_arbitrum.svg","img/ic_gm_avax.svg","img/ic_gmx_avax.svg","img/ic_settings_16.svg","img/logo_GMX_small.svg","img/DROP_DOWN.svg","img/buy_gmx.svg","img/coinbaseWallet.png","img/gm_icon.svg","img/gmx-logo-with-name.svg","img/ic_avalanche_24.svg","img/ic_avalanche_testnet_24.svg","img/ic_bondprotocol_arbitrum.svg","img/ic_checked.svg","img/ic_coingecko_16.svg","img/ic_convert_down.svg","img/ic_copy_16.svg","img/ic_cost.svg","img/ic_discord.svg","img/ic_github.svg","img/ic_glp_40.svg","img/ic_glp_arbitrum.svg","img/ic_gmx_40.svg","img/ic_gmx_arbitrum.svg","img/ic_gmx_footer.svg","img/ic_gmxv1flat.svg","img/ic_liquidity.svg","img/ic_medium.svg","img/ic_metamask_16.svg","img/ic_new_link_16.svg","img/ic_sign_out_16.svg","img/ic_simpleswaps.svg","img/ic_stats.svg","img/ic_telegram.svg","img/ic_totaluser.svg","img/ic_traderjoe_avax.png","img/ic_trading.svg","img/ic_twitter.svg","img/ic_uni_arbitrum.svg","img/ic_wallet_24.svg","img/metamask.png","img/nansen_portfolio.svg","img/position-share-bg.png","img/search.svg","img/walletconnect-circle-blue.svg","img sync /^/.//.*$","img/Anyswap.png","img/Anyswap.svg","img/Artwork.svg","img/Artwork_gmx.svg","img/Banxa.png","img/Hop.png","img/Hop.svg","img/Hop_dark.png","img/Hop_dark.svg","img/Synapse.png","img/Synapse.svg","img/binance.png","img/bitkeep.svg","img/bscscan.png","img/btn_big_arbitrum.png","img/btn_big_avalanche.png","img/btn_big_bsc.png","img/btn_big_purchasegmx.png","img/btn_big_purchasegmx.svg","img/buy_gmx_bond.svg","img/buy_transfer_eth.svg","img/coingecko.png","img/cross.svg","img/flag_de.svg","img/flag_en.svg","img/flag_es.svg","img/flag_fr.svg","img/flag_ja.svg","img/flag_ko.svg","img/flag_ru.svg","img/flag_zh.svg","img/gateio.svg","img/glp_icon.svg","img/gmx-logo-final-white-small.png","img/gmx-logo-final-white.png","img/gmx-logo-final.png","img/gmx-logo-glow.png","img/gmx_logo.svg","img/graphite-01.png","img/ic-communityproject.svg","img/ic_1inch.svg","img/ic_across.svg","img/ic_arbitrum_16.svg","img/ic_arbitrum_hover_16.svg","img/ic_arrowleft16.svg","img/ic_arrowright16.svg","img/ic_avalanche_16.svg","img/ic_avalanche_testnet_16.svg","img/ic_avalanche_testnet_96.svg","img/ic_avax_24.svg","img/ic_avax_30.svg","img/ic_avax_40.svg","img/ic_banxa.svg","img/ic_binance.svg","img/ic_binance_logo.svg","img/ic_bsc.svg","img/ic_bsc_96.svg","img/ic_btc.b_24.svg","img/ic_btc.b_40.svg","img/ic_btc_24.svg","img/ic_btc_40.svg","img/ic_bungee.png","img/ic_busd_24.svg","img/ic_buy_glp.svg","img/ic_bybit.svg","img/ic_cash.png","img/ic_cash.svg","img/ic_coingecko_hover_16.svg","img/ic_dai_24.svg","img/ic_dai_40.svg","img/ic_dodo.svg","img/ic_eth_24.svg","img/ic_eth_40.svg","img/ic_firebird.png","img/ic_frax_24.svg","img/ic_frax_40.svg","img/ic_glp_24.svg","img/ic_glp_custom.svg","img/ic_gmx.svg","img/ic_gmx_24.svg","img/ic_gmx_30.svg","img/ic_gmx_64.svg","img/ic_gmx_big.svg","img/ic_gmx_custom.svg","img/ic_hop.svg","img/ic_huobi.svg","img/ic_info.svg","img/ic_kucoin.svg","img/ic_kyberswap.svg","img/ic_link_24.svg","img/ic_link_40.svg","img/ic_matcha.png","img/ic_menu_dots.svg","img/ic_metamask_hover_16.svg","img/ic_mim_24.svg","img/ic_mim_40.svg","img/ic_multichain.svg","img/ic_o3.png","img/ic_odos.png","img/ic_olympus.svg","img/ic_olympus_arbitrum.svg","img/ic_openocean.svg","img/ic_paraswap.svg","img/ic_selector_dropdowns.svg","img/ic_settings_24.svg","img/ic_sign in_16.svg","img/ic_slingshot.svg","img/ic_sol_24.svg","img/ic_sol_40.svg","img/ic_stats_big.svg","img/ic_synapse.svg","img/ic_tansak.svg","img/ic_tether_24.svg","img/ic_tokens.svg","img/ic_transfer_avax.svg","img/ic_uni_24.svg","img/ic_uni_40.svg","img/ic_unidex.png","img/ic_usdc.e_24.svg","img/ic_usdc.e_40.svg","img/ic_usdc_24.svg","img/ic_usdc_40.svg","img/ic_usdt_24.svg","img/ic_usdt_40.svg","img/ic_wavax_24.svg","img/ic_wavax_40.svg","img/ic_wbtc_24.svg","img/ic_wbtc_40.svg","img/ic_weth_24.svg","img/ic_weth_40.svg","img/ic_yield_yak.png","img/lg_arbitrum.svg","img/metamask-text.svg","img/page-not-found.svg","img/trading.jpg","img/wallet-connect-text.svg","img/wave-01.png","img/wave-02.png","../ /^/.//.*//messages/.po$/ groupOptions: {} namespace object","config/localStorage.ts","config/env.ts","config/chains.ts","config/contracts.ts","config/backend.ts","config/tokens.ts","lib/numbers.ts","domain/tokens/utils.ts","lib/helperToast.ts","components/ToastifyDebug/ToastifyDebug.tsx","lib/contracts/transactionErrors.ts","lib/contracts/utils.ts","lib/wallets/index.tsx","components/ExternalLink/ExternalLink.tsx","lib/contracts/callContract.tsx","lib/rpc/index.ts","lib/contracts/contractFetcher.ts","lib/contracts/notifications.tsx","domain/tokens/useInfoTokens.ts","domain/tokens/approveTokens.tsx","lib/chains/index.ts","lib/dates.ts","lib/legacy.ts","config/subgraph.ts","lib/subgraph/utils.ts","lib/subgraph/clients.ts","lib/sleep.ts","domain/prices.ts","domain/legacy.ts","components/Checkbox/Checkbox.tsx","components/Tooltip/Tooltip.tsx","components/Tab/Tab.js","components/Modal/Modal.js","components/Common/Portal.js","components/Tooltip/TooltipWithPortal.tsx","components/TokenSelector/TokenSelector.tsx","components/Exchange/ExchangeInfoRow.js","components/StatsTooltip/StatsTooltipRow.tsx","config/ui.ts","lib/localStorage/index.ts","components/Button/ButtonLink.tsx","components/Button/Button.tsx","components/Exchange/FeesTooltip.tsx","components/Exchange/ConfirmationBox.js","components/Exchange/OrdersToa.js","components/Referrals/referralsHelper.js","lib/url.ts","domain/referrals.ts","config/links.ts","components/Exchange/NoLiquidityErrorModal.tsx","components/Exchange/constants.ts","lib/usePrevious.ts","components/Exchange/UsefulLinks.tsx","components/Exchange/SwapBox.js","components/Exchange/ChartTokenSelector.js","components/TVChartContainer/constants.ts","config/tradingview.ts","domain/tradingview/utils.ts","domain/tradingview/useTVDatafeed.ts","components/TVChartContainer/SaveLoadAdapter.ts","components/Common/Loader.js","components/TVChartContainer/TVChartContainer.tsx","domain/tradingview/requests.ts","domain/tradingview/TVDataProvider.ts","components/Exchange/ExchangeTVChart.js","components/Exchange/PositionSeller.js","components/Exchange/PositionEditor.js","components/Common/SpinningLoader.js","lib/downloadImage.ts","components/Exchange/PositionShare.js","lib/useLoadImage.ts","components/Exchange/PositionDropdown.js","lib/wallets/useAccountType.ts","components/Exchange/NetValueTooltip.tsx","components/Exchange/PositionsList.js","components/Exchange/OrderEditor.js","components/Exchange/OrdersList.js","components/Exchange/TradeHistory.js","components/Exchange/ExchangeWalletTokens.js","components/Exchange/ExchangeBanner.js","components/Footer/constants.ts","components/Footer/Footer.tsx","pages/Exchange/Exchange.js","pages/Actions/Actions.js","pages/BeginAccountTransfer/BeginAccountTransfer.js","config/icons.ts","components/APRLabel/APRLabel.js","components/Header/HeaderLink.tsx","lib/hash.ts","config/dataStore.ts","lib/multicall/utils.ts","lib/multicall/useMulticall.ts","domain/synthetics/tokens/useTokenAllowanceData.ts","lib/fetcher.ts","config/oracleKeeper.ts","domain/synthetics/tokens/utils.ts","domain/synthetics/tokens/useTokensData.ts","domain/synthetics/tokens/useTokenBalances.ts","domain/synthetics/tokens/useTokenRecentPricesData.ts","lib/objects.ts","config/factors.ts","domain/synthetics/fees/utils/executionFee.ts","domain/synthetics/markets/createDepositTxn.ts","domain/synthetics/markets/useMarketsInfo.ts","domain/synthetics/fees/utils/priceImpact.ts","domain/synthetics/fees/utils/index.ts","domain/synthetics/fees/useGasPrice.ts","domain/synthetics/fees/useGasLimits.ts","domain/synthetics/markets/utils.ts","domain/synthetics/markets/useMarkets.ts","domain/synthetics/markets/useMarketTokensData.ts","domain/synthetics/markets/useMarketTokensAPR.ts","components/TokenCard/TokenCard.js","components/Common/SEO.js","pages/Buy/Buy.js","components/BuyInputSection/BuyInputSection.tsx","pages/Dashboard/AssetDropdown.tsx","components/Glp/SwapErrorModal.tsx","components/Glp/GlpSwap.js","pages/BuyGlp/BuyGlp.js","components/Common/Card.tsx","pages/BuyGMX/constants.ts","pages/BuyGMX/BuyGMX.tsx","pages/ClaimEsGmx/ClaimEsGmx.js","pages/CompleteAccountTransfer/CompleteAccountTransfer.js","domain/stats/useFeesSummary.js","domain/stats/useTotalVolume.ts","components/StatsTooltip/StatsTooltip.tsx","config/features.ts","components/Synthetics/MarketsList/MarketsList.tsx","pages/Dashboard/DashboardV2.js","domain/stats/useVolumeInfo.ts","pages/Dashboard/Dashboard.js","pages/Stats/Stats.tsx","pages/Ecosystem/Ecosystem.js","pages/Home/Home.js","pages/NftWallet/NftWallet.js","pages/OrdersOverview/OrdersOverview.js","pages/PositionsOverview/PositionsOverview.js","lib/useDebounce.ts","components/Referrals/JoinReferralCode.js","components/Referrals/EmptyMessage.js","components/Referrals/InfoCard.js","components/Referrals/AddAffiliateCode.js","components/Pagination/Pagination.tsx","components/Referrals/usePagination.ts","components/Referrals/AffiliatesStats.js","components/Referrals/TradersStats.js","pages/Referrals/Referrals.js","pages/Stake/StakeV1.js","components/Stake/GMXAprTooltip.tsx","components/Dropdown/Dropdown.tsx","components/Synthetics/GmSwap/GmFees/GmFees.tsx","domain/synthetics/trade/utils/deposit.ts","components/ApproveTokenButton/ApproveTokenButton.tsx","components/Synthetics/GmSwap/GmConfirmationBox/GmConfirmationBox.tsx","domain/synthetics/markets/createWithdrawalTxn.ts","components/RequestStatus/RequestStatus.tsx","domain/synthetics/orders/types.ts","domain/synthetics/positions/utils.ts","domain/synthetics/positions/usePositions.ts","domain/synthetics/positions/useOptimisticPositions.ts","domain/synthetics/positions/usePositionsConstants.ts","domain/synthetics/trade/utils/swapStats.ts","domain/synthetics/trade/utils/swapRouting.ts","domain/synthetics/trade/types.ts","domain/synthetics/trade/utils/swap.ts","domain/synthetics/trade/utils/prices.ts","domain/synthetics/trade/utils/decrease.ts","domain/synthetics/trade/utils/common.ts","domain/synthetics/fees/useVirtualInventory.ts","domain/synthetics/trade/useSwapRoute.ts","domain/synthetics/positions/usePositionsInfo.ts","domain/synthetics/orders/utils.ts","domain/synthetics/orders/simulateExecuteOrderTxn.tsx","domain/synthetics/orders/createDecreaseOrderTxn.ts","domain/synthetics/orders/createIncreaseOrderTxn.ts","domain/synthetics/orders/createSwapOrderTxn.ts","context/SyntheticsEvents/utils.ts","context/SyntheticsEvents/SyntheticsEventsProvider.tsx","context/SyntheticsEvents/useSyntheticsEvents.ts","components/Synthetics/GmSwap/GmOrderStatus/GmOrderStatus.tsx","lib/useSafeState.ts","components/Synthetics/GmSwap/GmSwapBox/GmSwapBox.tsx","domain/synthetics/trade/utils/withdrawal.ts","components/Synthetics/GmList/GmList.tsx","pages/Stake/StakeV2.js","pages/Stake/Stake.js","components/EventToast/EventToastContainer.js","config/events.ts","components/EventToast/AnnouncementIcon.js","components/EventToast/EventToast.js","components/EventToast/useEventToast.js","components/ModalViews/RedirectModal.js","pages/Jobs/Jobs.js","pages/PageNotFound/PageNotFound.js","pages/ReferralTerms/ReferralTerms.js","pages/TermsAndConditions/TermsAndConditions.js","components/AddressDropdown/AddressDropdown.tsx","components/Common/ConnectWalletButton.tsx","components/Modal/ModalWithPortal.js","lib/i18n.ts","components/NetworkDropdown/LanguageModalContent.js","components/NetworkDropdown/NetworkDropdown.tsx","components/NetworkDropdown/LanguagePopupHome.tsx","components/TradeDropdown/TradeDropdown.tsx","components/Header/AppHeaderUser.tsx","components/Header/AppHeaderLinks.tsx","components/Header/HomeHeaderLinks.tsx","components/Header/Header.tsx","components/CardRow/CardRow.tsx","components/Synthetics/MarketStats/MarketStats.tsx","domain/synthetics/claimHistory/types.ts","pages/MarketPoolsPage/MarketPoolsPage.tsx","components/Synthetics/AcceptablePriceImpactEditor/AcceptablePriceImpactEditor.tsx","domain/synthetics/common/useFixedAddresses.ts","components/Synthetics/ClaimHistoryRow/ClaimHistoryRow.tsx","components/Synthetics/ClaimHistory/ClaimHistory.tsx","domain/synthetics/claimHistory/useClaimHistory.ts","components/Synthetics/ClaimModal/ClaimModal.tsx","domain/synthetics/markets/claimCollateralTxn.ts","domain/synthetics/orders/cancelOrdersTxn.ts","components/Synthetics/OrderEditor/OrderEditor.tsx","domain/synthetics/orders/updateOrderTxn.ts","components/Synthetics/OrderItem/OrderItem.tsx","components/Synthetics/OrderList/OrderList.tsx","components/Synthetics/PositionItem/PositionItem.tsx","components/Synthetics/PositionList/PositionList.tsx","domain/synthetics/tokens/requests.ts","domain/synthetics/tradingview/SyntheticsTVDataProvider.ts","components/Synthetics/TVChart/TVChart.tsx","domain/synthetics/tokens/useLastCandles.ts","components/ValueTransition/ValueTransition.tsx","components/Synthetics/TradeFeesRow/TradeFeesRow.tsx","components/Synthetics/ConfirmationBox/ConfirmationBox.tsx","domain/synthetics/orders/createWrapOrUnwrapTxn.ts","components/LeverageSlider/LeverageSlider.tsx","domain/synthetics/trade/useAvailableMarketsOptions.ts","domain/synthetics/trade/utils/validation.ts","components/Synthetics/ClaimableCard/ClaimableCard.tsx","components/ShareBar/ShareBar.tsx","components/Synthetics/MarketCard/MarketCard.tsx","components/Synthetics/SwapCard/SwapCard.tsx","components/Synthetics/TradeBox/CollateralSelectorRow.tsx","components/Synthetics/TradeBox/MarketPoolSelectorRow.tsx","components/Synthetics/OrderStatus/OrderStatus.tsx","components/Synthetics/TradeBox/TradeBox.tsx","domain/synthetics/tradeHistory/types.ts","domain/synthetics/trade/utils/increase.ts","components/Synthetics/TradeHistoryRow/LiquidationTooltip.tsx","components/Synthetics/TradeHistoryRow/TradeHistoryRow.tsx","components/Synthetics/TradeHistory/TradeHistory.tsx","domain/synthetics/tradeHistory/useTradeHistory.ts","components/Synthetics/PositionSeller/PositionSeller.tsx","domain/synthetics/orders/useOrdersInfo.ts","domain/synthetics/orders/useOrders.ts","components/Synthetics/PositionEditor/PositionEditor.tsx","pages/SyntheticsPage/SyntheticsPage.tsx","domain/synthetics/trade/useTradeFlags.ts","domain/synthetics/trade/useAvailableTokenOptions.ts","pages/SyntheticsStats/SyntheticsStats.tsx","pages/SyntheticsFallbackPage/SyntheticsFallbackPage.tsx","App/App.js","lib/useRouteQuery.ts","lib/useScrollToTop.ts","reportWebVitals.js","index.tsx"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","webpackAsyncContext","Promise","then","ids","t","SELECTED_NETWORK_LOCAL_STORAGE_KEY","WALLET_CONNECT_LOCALSTORAGE_KEY","SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY","CURRENT_PROVIDER_LOCALSTORAGE_KEY","LANGUAGE_LOCALSTORAGE_KEY","SLIPPAGE_BPS_KEY","REFERRAL_CODE_KEY","TV_CHART_RELOAD_TIMESTAMP_KEY","SYNTHETICS_ACCEPTABLE_PRICE_IMPACT_BPS_KEY","SYNTHETICS_MARKET_DEPOSIT_TOKEN_KEY","getKeepLeverageKey","chainId","IS_TOUCH","window","isDevelopment","isProductionPreview","Boolean","localStorage","getItem","location","host","includes","isLocal","parseEther","ethers","utils","MAINNET","TESTNET","AVALANCHE","AVALANCHE_FUJI","ARBITRUM","ARBITRUM_TESTNET","DEFAULT_CHAIN_ID","CHAIN_ID","SUPPORTED_CHAIN_IDS","push","IS_NETWORK_DISABLED","CHAIN_NAMES_MAP","GAS_PRICE_ADJUSTMENT_MAP","MAX_GAS_PRICE_MAP","HIGH_EXECUTION_FEES_MAP","constants","nativeTokenSymbol","defaultCollateralSymbol","defaultFlagOrdersEnabled","positionReaderPropsLength","v2","SWAP_ORDER_EXECUTION_GAS_FEE","INCREASE_ORDER_EXECUTION_GAS_FEE","DECREASE_ORDER_EXECUTION_GAS_FEE","wrappedTokenSymbol","ALCHEMY_WHITELISTED_DOMAINS","RPC_PROVIDERS","FALLBACK_PROVIDERS","getAlchemyHttpUrl","NETWORK_METADATA","toString","chainName","nativeCurrency","name","symbol","decimals","rpcUrls","blockExplorerUrls","getExplorerUrl","getConstant","key","getChainName","getRpcUrl","sample","getHighExecutionFee","AddressZero","XGMT_EXCLUDED_ACCOUNTS","CONTRACTS","Treasury","BUSD","GMT","Vault","Router","Reader","AmmFactory","AmmFactoryV2","OrderBook","OrderBookReader","GmxMigrator","USDG","NATIVE_TOKEN","XGMT","GMT_USDG_PAIR","XGMT_USDG_PAIR","GMT_USDG_FARM","XGMT_USDG_FARM","USDG_YIELD_TRACKER","XGMT_YIELD_TRACKER","GMT_USDG_FARM_TRACKER_XGMT","GMT_USDG_FARM_TRACKER_NATIVE","XGMT_USDG_FARM_TRACKER_XGMT","XGMT_USDG_FARM_TRACKER_NATIVE","AUTO","AUTO_USDG_PAIR","AUTO_USDG_FARM","AUTO_USDG_FARM_TRACKER_XGMT","AUTO_USDG_FARM_TRACKER_NATIVE","GMT_GMX_IOU","XGMT_GMX_IOU","GMT_USDG_GMX_IOU","XGMT_USDG_GMX_IOU","VaultReader","GlpManager","RewardRouter","RewardReader","GLP","GMX","ES_GMX","BN_GMX","ES_GMX_IOU","StakedGmxTracker","BonusGmxTracker","FeeGmxTracker","StakedGlpTracker","FeeGlpTracker","StakedGmxDistributor","StakedGlpDistributor","GmxVester","GlpVester","PositionRouter","PositionManager","ReferralStorage","ReferralReader","AdlUtils","DecreaseOrderUtils","DataStore","DecreasePositionUtils","DepositHandler","DepositStore","EventEmitter","ExchangeRouter","FeeReceiver","GasUtils","IncreaseOrderUtils","IncreasePositionUtils","LiquidationUtils","MarketFactory","MarketStore","MarketUtils","Multicall3","Oracle","OracleStore","OrderHandler","OrderStore","OrderUtils","PositionStore","SyntheticsReader","SyntheticsReferralStorage","RoleStore","SyntheticsRouter","SwapHandler","SwapOrderUtils","WithdrawalHandler","WithdrawalStore","Multicall","GlpRewardRouter","OrderExecutor","UniswapGmxEthPool","DepositVault","WithdrawalVault","OrderVault","TraderJoeGmxAvaxPool","getContract","GMX_STATS_API_URL","BACKEND_URLS","default","getServerBaseUrl","document","hostname","fromLocalStorage","getServerUrl","path","NATIVE_TOKEN_ADDRESS","TOKENS","address","coingeckoUrl","imageUrl","isNative","isWrapped","baseSymbol","isUsdg","isStable","isShortable","isTempHidden","ADDITIONAL_TOKENS","AVAILABLE_CHART_TOKENS","SYNTHETIC_TOKENS","isSynthetic","PLATFORM_TOKENS","GM","EXPLORER_LINKS","coingecko","arbitrum","reserves","ETH","BTC","LINK","UNI","USDC","USDT","DAI","MIM","FRAX","avalanche","AVAX","WBTC","GLP_POOL_COLORS","TOKENS_MAP","TOKENS_BY_SYMBOL_MAP","WRAPPED_TOKENS_MAP","NATIVE_TOKENS_MAP","CHAIN_IDS","j","length","tokens","concat","i","token","wrappedAddress","getWrappedToken","getNativeToken","getTokens","getTokensMap","isValidToken","getToken","getTokenBySymbol","convertTokenAddress","convertTo","wrappedToken","getWhitelistedTokens","filter","getAvailableTradeTokens","p","includeSynthetic","getNormalizedTokenSymbol","tokenSymbol","substr","isChartAvailabeForToken","bigNumberify","n","BigNumber","from","console","error","expandDecimals","mul","pow","limitDecimals","amount","maxDecimals","amountStr","undefined","split","dotIndex","indexOf","formatAmount","tokenDecimals","displayDecimals","useCommas","defaultValue","formatUnits","minDecimals","padEnd","padDecimals","numberWithCommas","formatKeyAmount","formatAmountFree","parseFloat","parseInt","trimZeroDecimals","formatUsd","usd","opts","fallbackToZero","sign","lt","abs","USD_DECIMALS","formatDeltaUsd","deltaUsd","percentage","eq","gt","percentageStr","formatPercentage","signed","formatTokenAmount","showAllSignificant","symbolStr","formattedAmount","formatTokenAmountWithUsd","tokenAmount","usdAmount","tokenStr","usdStr","parseValue","value","pValue","isNaN","parseUnits","x","parts","replace","join","applyFactor","factor","div","PRECISION","getBasisPoints","numerator","denominator","BASIS_POINTS_DIVISOR","getIsEquivalentTokens","token1","token2","getUsd","tokenAddress","max","infoTokens","orderOption","triggerPriceUsd","USDG_ADDRESS","info","getTokenInfo","price","MARKET","maxPrice","minPrice","getTriggerPrice","getTokenAmountFromUsd","overridePrice","isBigNumber","lte","replaceNative","nativeTokenAddress","getLowestFeeTokenForBuyGlp","toAmount","glpPrice","usdgSupply","totalTokenWeights","fromTokenAddress","swapUsdMin","getVisibleTokens","usdgAmount","tokensData","fromToken","fees","getFeeBasisPoints","MINT_BURN_FEE_BASIS_POINTS","TAX_BASIS_POINTS","amountLeftToDeposit","maxUsdgAmount","sub","USDG_DECIMALS","tokensWithLiquidity","asset","hasOwnProperty","sort","a","b","Number","getMostAbundantStableToken","availableAmount","whitelistedTokens","stableToken","find","adjustedAvailableAmount","adjustForDecimals","shouldRaiseGasError","balance","gte","DUST_BNB","replaceNativeTokenAddress","updatedPath","getSpread","add","helperToast","content","toast","dismiss","success","ToastifyDebug","props","useState","open","setOpen","className","onClick","old","children","NOT_ENOUGH_FUNDS","USER_DENIED","SLIPPAGE","RPC_ERROR","NETWORK_CHANGED","TX_ERROR_PATTERNS","msg","extractError","ex","message","data","entries","type","patterns","pattern","matchCode","matchMessage","setGasPrice","txnOpts","provider","maxGasPrice","premium","getGasPrice","gasPrice","getFeeData","feeData","maxPriorityFeePerGas","maxFeePerGas","getGasLimit","contract","method","params","estimateGas","gasLimit","injectedConnector","InjectedConnector","supportedChainIds","activateInjectedProvider","providerName","ethereum","providers","isCoinbaseWallet","isMetaMask","setSelectedProvider","getInjectedConnector","getWalletConnectConnector","WalletConnectConnector","rpc","qrcode","clearWalletConnectData","removeItem","clearWalletLinkData","startsWith","addNetwork","metadata","request","catch","switchNetwork","active","setItem","String","reload","chainIdHex","getInjectedHandler","activate","deactivate","fn","UnsupportedChainIdError","showUnsupportedNetworkToast","errString","options","image","ExternalLink","href","classNames","cx","target","rel","callContract","Array","isArray","res","txUrl","hash","sentMsg","setPendingTxns","hideSuccessMsg","successMsg","pendingTxn","pendingTxns","autoCloseToast","errorData","failMsg","originalError","autoClose","arbWsProvider","WebSocketProvider","avaxWsProvider","JsonRpcProvider","pollingInterval","fujiWsProvider","getProvider","library","getSigner","StaticJsonRpcProvider","getFallbackProvider","getFallbackRpcUrl","getWsProvider","contractFetcher","contractInfo","additionalArgs","args","arg0","arg1","isAddress","contractCall","getContractCall","shouldCallFallback","handleFallback","reject","fallbackProvider","result","contractName","setTimeout","Contract","abi","notifications","pushSuccessNotification","transactionHash","pushErrorNotification","useInfoTokens","tokenBalances","fundingRateInfo","vaultPropsLength","vaultReaderAddress","vaultAddress","positionRouterAddress","whitelistedTokenAddresses","vaultTokenInfo","useSWR","fetcher","indexPricesUrl","fetch","json","refreshInterval","refreshWhenHidden","getInfoTokens","indexPrices","JSON","parse","stringify","poolAmount","reservedAmount","redemptionAmount","weight","bufferAmount","globalShortSize","maxGlobalShortSize","maxGlobalLongSize","spread","guaranteedUsd","maxPrimaryPrice","minPrimaryPrice","contractMinPrice","contractMaxPrice","maxAvailableShort","hasMaxAvailableShort","DEFAULT_MAX_USDG_AMOUNT","availableUsd","maxAvailableLong","hasMaxAvailableLong","remainingLongSize","maxLongCapacity","managedUsd","managedAmount","setTokenUsingIndexPrices","fundingRate","cumulativeFundingRate","indexPrice","indexPriceBn","spreadBps","MAX_PRICE_DEVIATION_BASIS_POINTS","halfSpreadBps","toNumber","approveTokens","setIsApproving","spender","onApproveSubmitted","includeMessage","Token","approve","MaxUint256","finally","useChainId","useWeb3React","chainIdFromLocalStorage","formatDateTime","time","formatDateFn","formatDate","getTimeRemaining","now","Date","diff","hours","minutes","PLACEHOLDER_ACCOUNT","Wallet","createRandom","MAX_LEVERAGE","MAX_ALLOWED_LEVERAGE","SECONDS_PER_YEAR","DUST_USD","GLP_DECIMALS","MARGIN_FEE_BASIS_POINTS","LIQUIDATION_FEE","THRESHOLD_REDEMPTION_VALUE","FUNDING_RATE_PRECISION","SWAP","INCREASE","DECREASE","LONG","SHORT","LIMIT","STOP","LEVERAGE_ORDER_OPTIONS","SWAP_ORDER_OPTIONS","SWAP_OPTIONS","DEFAULT_HIGHER_SLIPPAGE_AMOUNT","REFERRAL_CODE_QUERY_PARAM","deserialize","_type","isHomeSite","process","REACT_APP_IS_HOME_SITE","getLiquidationPriceFromDelta","liquidationAmount","size","collateral","averagePrice","isLong","priceDelta","getMarginFee","sizeDelta","afterFeeUsd","isTriggerRatioInverted","fromTokenInfo","toTokenInfo","getExchangeRate","tokenAInfo","tokenBInfo","inverted","shouldInvertTriggerRatio","tokenA","tokenB","getExchangeRateDisplay","rate","rateValue","omitSymbols","adjustForDecimalsFactory","number","divDecimals","mulDecimals","tokenUsdgAmount","usdgDelta","feeBasisPoints","taxBasisPoints","increment","initialAmount","nextAmount","targetAmount","getTargetUsdgAmount","initialDiff","nextDiff","rebateBps","averageDiff","taxBps","getBuyGlpFromAmount","fromAmount","getSellGlpToAmount","getNextFromAmount","toTokenAddress","toTokenPriceUsd","ratio","forSwap","fromTokenMinPrice","toTokenMaxPrice","toToken","fromAmountBasedOnRatio","adjustDecimals","isZero","swapFeeBasisPoints","feeBasisPoints0","feeBasisPoints1","getNextToAmount","toAmountBasedOnRatio","getSwapFeeBasisPoints","redemptionValue","expectedAmount","calculatePositionDelta","lastIncreasedTime","delta","pendingDelta","minProfitExpired","hasProfit","deltaPercentage","pendingDeltaPercentage","getDeltaStr","deltaStr","deltaPercentageStr","getLeverage","increaseSize","collateralDelta","increaseCollateral","entryFundingRate","includeDelta","nextSize","remainingCollateral","fundingFee","getLeverageStr","leverage","getFundingFee","getLiquidationPrice","marginFee","adjustedDelta","positionFee","liquidationPriceForFees","liquidationPriceForMaxLeverage","getPositionKey","account","collateralTokenAddress","indexTokenAddress","getPositionContractKey","collateralToken","indexToken","solidityKeccak256","shortenAddress","left","Math","floor","substring","_parseOrdersData","ordersData","indexes","extractor","uintPropsLength","addressPropsLength","uintProps","addressProps","count","orders","sliced","slice","order","index","parseDecreaseOrdersData","decreaseOrdersData","triggerPrice","triggerAboveThreshold","parseIncreaseOrdersData","increaseOrdersData","purchaseToken","purchaseTokenAmount","parseSwapOrdersData","swapOrdersData","shouldUnwrap","amountIn","minOut","triggerRatio","every","getOrderKey","useAccountOrders","flagOrdersEnabled","overrideAccount","connectedAccount","shouldRequest","orderBookAddress","orderBookReaderAddress","dedupingInterval","orderBookContract","orderBookReaderContract","fetchIndexesFromServer","ordersIndexesUrl","ret","toLowerCase","val","swap","increase","decrease","fetchLastIndex","_hex","fetchLastIndexes","all","getRange","to","_indexes","getIndexes","knownIndexes","lastIndex","getOrders","parseFunc","serverIndexes","lastIndexes","swapOrders","increaseOrders","decreaseOrders","mutate","CHART_PERIODS","getTotalVolumeSum","volumes","volume","getBalanceAndSupplyData","balances","balanceData","supplyData","getDepositBalanceData","depositBalances","getVestingData","vestingInfo","pairAmount","vestedAmount","escrowedBalance","claimedAmounts","claimable","maxVestableAmount","averageStakedAmount","getStakingData","stakingInfo","tokensPerInterval","averageStakedAmounts","cumulativeRewards","totalSupply","getProcessedData","depositBalanceData","stakingData","vestingData","aum","nativeTokenPrice","stakedGmxSupply","gmxPrice","gmxSupply","gmxBalance","gmx","gmxBalanceUsd","gmxSupplyUsd","stakedGmxSupplyUsd","gmxInStakedGmx","gmxInStakedGmxUsd","esGmxBalance","esGmx","esGmxBalanceUsd","stakedGmxTrackerSupply","stakedGmxTracker","stakedGmxTrackerSupplyUsd","stakedEsGmxSupply","stakedEsGmxSupplyUsd","esGmxInStakedGmx","esGmxInStakedGmxUsd","bnGmxInFeeGmx","bonusGmxInFeeGmx","feeGmxSupply","feeGmxTracker","feeGmxSupplyUsd","stakedGmxTrackerRewards","stakedGmxTrackerRewardsUsd","bonusGmxTrackerRewards","bonusGmxTracker","feeGmxTrackerRewards","feeGmxTrackerRewardsUsd","boostBasisPoints","stakedGmxTrackerAnnualRewardsUsd","gmxAprForEsGmx","feeGmxTrackerAnnualRewardsUsd","gmxAprForNativeToken","gmxBoostAprForNativeToken","gmxAprTotal","gmxAprTotalWithBoost","gmxAprForNativeTokenWithBoost","totalGmxRewardsUsd","glpSupply","glp","glpSupplyUsd","glpBalance","glpInStakedGlp","glpBalanceUsd","stakedGlpTrackerRewards","stakedGlpTracker","stakedGlpTrackerRewardsUsd","feeGlpTrackerRewards","feeGlpTracker","feeGlpTrackerRewardsUsd","stakedGlpTrackerAnnualRewardsUsd","glpAprForEsGmx","feeGlpTrackerAnnualRewardsUsd","glpAprForNativeToken","glpAprTotal","totalGlpRewardsUsd","totalEsGmxRewards","totalEsGmxRewardsUsd","gmxVesterRewards","gmxVester","glpVesterRewards","glpVester","totalVesterRewards","totalVesterRewardsUsd","totalNativeTokenRewards","totalNativeTokenRewardsUsd","totalRewardsUsd","getPageTitle","isHashZero","HashZero","isAddressZero","getHomeUrl","getAppBaseUrl","importImage","tokenImage","require","getTwitterIntentURL","text","url","hashtag","finalURL","encodeURIComponent","getPositionForOrder","positionsMap","position","getOrderError","positionForOrder","shouldShowRedirectModal","timestamp","expiryTime","getTime","isValidTimestamp","SUBGRAPH_URLS","stats","referrals","nissohVault","syntheticsStats","chainLink","createClient","subgraph","localStorageKey","getSubgraphUrlKey","warn","getSubgraphUrl","ApolloClient","uri","cache","InMemoryCache","chainlinkClient","arbitrumGraphClient","arbitrumReferralsGraphClient","nissohGraphClient","avalancheGraphClient","avalancheReferralsGraphClient","avalancheFujiSyntheticsStatsClient","getSyntheticsGraphClient","getGmxGraphClient","sleep","ms","FEED_ID_MAP","BTC_USD","ETH_USD","BNB_USD","LINK_USD","UNI_USD","SUSHI_USD","AVAX_USD","AAVE_USD","YFI_USD","SPELL_USD","timezoneOffset","getTimezoneOffset","formatBarInfo","bar","close","c","high","h","low","l","fillGaps","prices","periodSeconds","newPrices","prevTime","getLimitChartPricesFromStats","period","limit","response","ok","status","log","getChartPricesFromStats","timeDiff","done","lastEx","statusText","OBSOLETE_THRESHOLD","updatedAt","toISOString","getChainlinkChartPricesFromGraph","marketName","feedId","requests","query","gql","chunks","uniqTs","Set","forEach","chunk","rounds","item","has","unixTimestamp","periodTime","candles","first","prevTsGroup","prevPrice","ts","tsGroup","min","getCandlesFromPrices","err","useChartPrices","currentAveragePrice","swrKey","focusThrottleInterval","updatePrices","currentAveragePriceString","retPrices","useMemo","getStablePriceData","_prices","currentCandleTime","last","averagePriceValue","newCandle","appendCurrentAveragePrice","countBack","priceData","useAllOrdersStats","setRes","useEffect","graphClient","orderStat","useUserStat","userStat","useLiquidationsData","setData","_data","liquidatedPositions","markPrice","useAllPositions","aggregatedTradeOpens","dataItem","initialPosition","getPosition","positionData","fee","collateralDiffPercent","danger","useAllOrders","charAt","toUpperCase","orderFromChain","path0","path1","path2","createdTimestamp","usePositionsForOrders","reduce","memo","invariant","condition","errorMsg","useTrades","forSingleAccount","afterId","urlItem","URL","searchParams","append","trades","updateTrades","item0","item1","data0","data1","time0","time1","block0","blockNumber","block1","useMinExecutionFee","multiplier","minExecutionFee","finalExecutionFee","estimatedExecutionFee","finalExecutionFeeUSD","isFeeHigh","minExecutionFeeUSD","minExecutionFeeErrorMessage","useStakedGmxSupply","gmxAddressArb","stakedGmxTrackerAddressArb","arbData","arbMutate","gmxAddressAvax","stakedGmxTrackerAddressAvax","avaxData","avaxMutate","useHasOutdatedUi","hasOutdatedUi","useGmxPrice","libraries","poolAddress","UniPool","uniPoolSlot0","updateUniPoolSlot0","ethAddress","ethPrice","updateEthPrice","UniToken","gmxAddress","poolTokenPrice","Pool","sqrtPriceX96","tick","priceOf","toSignificant","poolTokenPriceAmount","useCallback","useGmxPriceFromArbitrum","gmxPriceFromArbitrum","mutateFromArbitrum","UniswapV2","updateReserves","gmxReserve","_reserve0","avaxReserve","_reserve1","avaxAddress","avaxPrice","updateAvaxPrice","useGmxPriceFromAvalanche","gmxPriceFromAvalanche","mutateFromAvalanche","useTotalGmxSupply","gmxSupplyUrlArbitrum","updateGmxSupply","total","useTotalGmxStaked","stakedGmxTrackerAddressArbitrum","totalStakedGmx","useRef","stakedGmxSupplyArbitrum","updateStakedGmxSupplyArbitrum","stakedGmxSupplyAvax","updateStakedGmxSupplyAvax","current","avax","useTotalGmxInLiquidity","poolAddressArbitrum","poolAddressAvax","totalGMX","gmxInLiquidityOnArbitrum","mutateGMXInLiquidityOnArbitrum","gmxInLiquidityOnAvax","mutateGMXInLiquidityOnAvax","approvePlugin","pluginAddress","routerAddress","createSwapOrder","executionFee","shouldWrap","createIncreaseOrder","fromETH","createDecreaseOrder","cancelSwapOrder","cancelDecreaseOrder","cancelIncreaseOrder","handleCancelOrder","func","cancelMultipleOrders","ordersWithTypes","d","allIndexes","groupBy","v","updateDecreaseOrder","updateIncreaseOrder","updateSwapOrder","_executeOrder","feeReceiver","positionManagerAddress","executeSwapOrder","executeIncreaseOrder","executeDecreaseOrder","Checkbox","isChecked","setIsChecked","disabled","asRow","selected","fullRow","Tooltip","visible","setVisible","intervalCloseRef","intervalOpenRef","trigger","onMouseEnter","clearInterval","onMouseClick","onMouseLeave","disableHandleStyle","handleClassName","isHandlerDisabled","handle","renderContent","Tab","option","setOption","onChange","optionLabels","icons","opt","label","src","alt","Modal","isVisible","setIsVisible","zIndex","onAfterOpen","modalRef","keyCode","addEventListener","removeEventListener","motion","style","initial","animate","exit","variants","hidden","opacity","transition","duration","overflow","fontSize","headerContent","ref","Portal","root","body","el","createElement","appendChild","removeChild","createPortal","TooltipWithPortal","coords","setCoords","tooltipWidth","setTooltipWidth","handlerRef","updateTooltipCoords","rect","getBoundingClientRect","height","width","top","y","scrollY","fitHandleWidth","closeOnDoubleClick","TokenSelector","isSmallerScreen","useMedia","isModalVisible","setIsModalVisible","searchKeyword","setSearchKeyword","tokenInfo","mintingCap","showMintingCap","selectedTokenLabel","showBalances","showTokenImgInDropdown","showSymbolImage","showNewCaret","getTokenState","visibleTokens","onSelectToken","filteredTokens","_handleKeyDown","placeholder","onSearchKeywordChange","onKeyDown","autoFocus","backgroundImage","searchIcon","tokenIndex","mintAmount","balanceUsd","tokenPopupImage","tokenState","dropDownIcon","ExchangeInfoRow","isTop","isWarning","StatsTooltipRow","showDollar","TRIGGER_PREFIX_ABOVE","TRIGGER_PREFIX_BELOW","useLocalStorageByChainId","useLocalStorage","internalValue","setInternalValue","setValue","useLocalStorageSerializeKey","ButtonLink","newTab","rest","anchorProps","Button","variant","imgInfo","getFeeLabel","labels","borrow","deposit","execution","i18n","_","getExecutionFeeStr","executionFeeUsd","formattedExecutionFee","formattedExecutionFeeUsd","getFeesStr","FeesTooltip","totalFees","swapFee","executionFees","depositFee","isOpening","executionFeeUSD","feeUSD","feesRows","formattedFees","rows","addFeeRow","funding","row","getFeesRows","HIGH_SPREAD_THRESHOLD","renderAllowedSlippage","allowedSlippage","ConfirmationBox","fromTokenUsd","toTokenUsd","isSwap","isMarketOrder","isShort","isHigherSlippageAllowed","setIsHigherSlippageAllowed","onConfirmationClick","setIsConfirming","hasExistingPosition","existingPosition","existingLiquidationPrice","displayLiquidationPrice","shortCollateralToken","isPendingConfirmation","feesUsd","isSubmitting","fromUsdMin","toUsdMax","nextAveragePrice","feeBps","entryMarkPrice","swapFees","savedSlippageAmount","isProfitWarningAccepted","setIsProfitWarningAccepted","isTriggerWarningAccepted","setIsTriggerWarningAccepted","isLimitOrdersVisible","setIsLimitOrdersVisible","onCancelOrderClick","collateralAfterFees","title","existingOrder","sameToken","existingOrders","existingTriggerOrders","decreaseOrdersThatWillBeExecuted","getError","hasPendingProfit","spreadInfo","isHigh","getSwapSpreadInfo","showSwapSpread","renderSwapSpreadWarning","collateralSpreadInfo","totalSpread","collateralTokenInfo","renderCollateralSpreadWarning","showCollateralSpread","renderFeeWarning","MIN_PROFIT_TIME","renderExistingOrderWarning","sizeInToken","longOrShortText","triggerPricePrefix","renderExistingTriggerErrors","existingTriggerOrderLength","renderExistingTriggerWarning","renderMain","currentExecutionFee","currentExecutionFeeUsd","renderAvailableLiquidity","availableLiquidity","isLiquidityRisk","riskThresholdBps","poolWithoutBuffer","adjustedMaxGlobalShortSize","sizeTokens","renderMarginSection","renderSwapSection","action","getPrimaryText","OrdersToa","isPluginApproving","approveOrderBook","REFERRAL_CODE_REGEX","REGEX_VERIFY_BYTES32","isRecentReferralCodeNotExpired","referralCodeInfo","getReferralCodeTakenStatus","referralCode","referralCodeBytes32","encodeReferralCode","getReferralCodeOwner","ownerArbitrum","ownerAvax","takenOnArb","takenOnAvax","referralCodeTakenInfo","both","getTierIdDisplay","tierId","tierRebateInfo","tierDiscountInfo","deserializeSampleStats","input","parsedData","obj1","getSampleReferrarStat","obj2","acc","cv","currentValue","hex","ownerOnOtherNetwork","discountUsd","totalRebateUsd","tradedReferralsCount","registeredReferralsCount","ownerOnOtherChain","codeString","owner","isTaken","isTakenByCurrentUser","getUSDValue","getReferralCodeTradeUrl","origin","protocol","port","portString","getRootUrl","ACTIVE_CHAINS","getGraphClient","decodeReferralCode","hexCode","parseBytes32String","fromCharCode","trim","final","formatBytes32String","getCodeOwnersData","network","codes","variables","codeOwners","referralCodes","useReferralsData","loading","setLoading","arbitrumCodes","avalancheCodes","codeOwnersOnAvax","codeOwnersOnArbitrum","main","useUserCodesOnAllChain","startOfDayTimestamp","typeIds","referralTotalStatsId","rebateDistributions","discountDistributions","prepareStatsItem","distributions","receiver","getAddress","typeId","referrerTotalStats","referrerTierInfo","referrerLastDayStats","cumulativeStats","getCumulativeStats","referralTotalStats","referralStorageAddress","referralCodeHex","setTraderReferralCodeByUser","codeOwner","useUserReferralCode","localStorageCode","onChainCode","localStorageCodeOwner","test","attachedOnChain","userReferralCode","userReferralCodeString","validateReferralCodeExists","referralCodeOwner","oneInchTokensMap","get1InchSwapUrl","rootUrl","chainTokensMap","ErrorCode","ErrorDisplayType","NoLiquidityErrorModal","outputCurrency","modalError","setModalError","nativeToken","inputCurrency","swapTokenSymbol","oneInchSwapUrl","usePrevious","UsefulLinks","leaderBoardLink","getLeaderboardLink","SWAP_ICONS","longImg","shortImg","swapImg","leverageSliderHandle","dragging","restProps","prefixCls","overlay","toFixed","placement","Handle","SwapBox","pendingPositions","setPendingPositions","setFromTokenAddress","setToTokenAddress","swapOption","setSwapOption","tokenSelection","setTokenSelection","isConfirming","setIsPendingConfirmation","savedIsPnlInLeverage","orderBookApproved","positionRouterApproved","isWaitingForPluginApproval","approvePositionRouter","setIsWaitingForPluginApproval","isWaitingForPositionRouterApproval","setIsWaitingForPositionRouterApproval","isPositionRouterApproving","savedShouldDisableValidationForTesting","fromValue","setFromValue","toValue","setToValue","anchorOnFromAmount","setAnchorOnFromAmount","isApproving","isWaitingForApproval","setIsWaitingForApproval","setIsSubmitting","shortCollateralAddress","setShortCollateralAddress","leverageOption","setLeverageOption","isLeverageSliderEnabled","setIsLeverageSliderEnabled","hasLeverageOption","ordersToaOpen","setOrdersToaOpen","setOrderOption","positionKey","orderOptions","orderOptionLabels","triggerPriceValue","setTriggerPriceValue","fromTokens","stableTokens","indexTokens","shortableTokens","toTokens","needOrderBookApproval","prevNeedOrderBookApproval","needPositionRouterApproval","prevNeedPositionRouterApproval","tokenAllowanceAddress","tokenAllowance","Api","fromBalance","toBalance","isPotentialWrap","isWrapOrUnwrap","needApproval","prevFromTokenAddress","prevNeedApproval","prevToTokenAddress","triggerRatioValue","setTriggerRatioValue","triggerRatioInverted","maxToTokenOut","maxToTokenOutUSD","maxFromTokenInUSD","maxFromTokenIn","maxSwapAmountUsd","exitMarkPrice","nextToAmount","nextToValue","nextFromAmount","nextFromValue","updateSwapAmounts","leverageMultiplier","fromUsdMinAfterFee","toNumerator","toDenominator","baseFromAmountUsd","updateLeverageAmounts","nextDelta","nextHasProfit","nextPrice","divisor","getNextAveragePrice","liquidationPrice","getToLabel","currentRate","usdgFromAmount","InsufficientLiquiditySwap","getSwapError","SWAP_OPTION_LABEL","requiredAmount","swapAmount","InsufficientLiquidityLeverage","TokenPoolExceeded","sizeUsd","stableTokenAmount","InsufficientCollateralIn","TokenPoolExceededShorts","InsufficientProfitLiquidity","getLeverageError","isPrimaryEnabled","isStopOrder","errorType","isSupportedChain","indexTokenInfo","nextToAmountUsd","wrap","WETH","unwrap","multiPath","increasePosition","tokenAddress0","refPrice","priceBasisPoints","priceLimit","boundedFromAmount","contractAddress","pendingChanges","onClickPrimary","errorCode","connectWallet","showFromAndToSection","showTriggerPriceSection","showTriggerRatioSection","feeTokenPrice","borrowFeeText","hasZeroBorrowFee","setFromValueToMaximumAvailable","maxAvailableAmount","ERROR_TOOLTIP_MSG","SWAP_LABELS","Fragment","shouldShowMaxButton","updatedTokenSelection","getTokenLabel","evt","positive","negative","step","marks","errorMessage","primaryTextMessage","renderPrimaryButton","ChartTokenSelector","selectedToken","onSelect","as","Items","Item","marginLeft","RED","GREEN","chartStyleOverrides","chartOverrides","disabledFeaturesOnMobile","defaultChartProps","theme","locale","library_path","clientId","userId","fullscreen","autosize","header_widget_dom_node","overrides","enabled_features","disabled_features","custom_css_url","loading_screen","backgroundColor","foregroundColor","favorites","intervals","custom_formatters","timeFormatter","format","date","addMinutes","formatTVTime","dateFormatter","formatTVDate","availableNetworksForChart","SUPPORTED_RESOLUTIONS","formatTimeInBarToMs","getCurrentCandleTime","configurationData","supported_resolutions","supports_marks","supports_timescale_marks","supports_time","reset_cache_timeout","SaveLoadAdapter","charts","setTvCharts","this","splice","chartData","removeChart","random","valueOf","Loader","TVChartContainer","savedShouldShowPositionLines","chartLines","dataProvider","setPeriod","chartContainerRef","tvWidgetRef","chartReady","setChartReady","chartDataLoading","setChartDataLoading","tvCharts","intervalRef","resetCacheRef","activeTicker","tvDataProvider","shouldRefetchBars","resetCache","datafeed","onReady","callback","resolveSymbol","symbolName","onSymbolResolvedCallback","symbolInfo","description","ticker","session","minmov","pricescale","timezone","has_intraday","has_daily","currency_code","visible_plots_set","data_status","getBars","resolution","periodParams","onHistoryCallback","onErrorCallback","bars","noData","subscribeBars","onRealtimeCallback","_subscribeUID","onResetCacheNeededCallback","setInterval","getLiveBar","unsubscribeBars","useTVDatafeed","isMobile","symbolRef","drawLineOnChart","activeChart","dataReady","createPositionLine","disableUndo","setText","setPrice","setQuantity","setLineStyle","setLineLength","setBodyFont","setBodyTextColor","setLineColor","setBodyBackgroundColor","setBodyBorderColor","handleVisibilityChange","visibilityState","tvReloadTimestamp","resetData","lines","line","remove","setSymbol","object","widgetOptions","debug","container","client_id","user_id","interval","save_load_adapter","TradingView","widget","onChartReady","applyOverrides","onIntervalChanged","subscribe","visibility","getTokenChartPrice","getCurrentPriceOfToken","fillBarGaps","currentBarTimestamp","getCurrentBarTimestamp","lastBar","newBar","getStableCoinPrice","fromCandle","toCandle","candleTime","candle","initialHistoryBarsInfo","TVDataProvider","startTime","lastTicker","lastPeriod","barsInfo","filledBars","lastCandleTime","toWithOffset","fromWithOffset","getTokenHistoryBars","currentTime","getTokenLastBars","getLastBar","currentPrice","getChartToken","ExchangeTVChart","positions","currentSeries","chartToken","setChartToken","tmp","deltaPrice","currentOrders","orderTypeText","currentPositions","liquidation","updatePriceData","createPriceLine","color","removePriceLine","timeThreshold","average","ORDER_SIZE_DUST_USD","applySpread","shouldSwap","receiveToken","isCollateralWrapped","isSameToken","isUnwrap","PositionSeller","isContractAccount","keepLeverage","setKeepLeverage","prevIsVisible","savedRecieveTokenAddress","setSavedRecieveTokenAddress","swapToToken","setSwapToToken","ORDER_OPTIONS","ORDER_OPTION_LABELS","maxAmount","maxAmountFormatted","maxAmountFormattedFree","convertedAmount","convertedAmountFormatted","nextLeverage","nextLiquidationPrice","isClosing","nextCollateral","isNotEnoughReceiveTokenLiquidity","isCollateralPoolCapacityExceeded","isSwapAllowed","receiveUsd","receiveAmount","residualSize","deductions","swapToTokenInfo","collateralInfo","receiveTokenInfo","profitPrice","InsufficientReceiveToken","ReceiveCollateralTokenOnly","receiveSpreadInfo","showReceiveSpread","renderReceiveSpreadWarning","minProfitExpiration","minProfitTimeExpired","withdrawETH","sizeDeltaUsd","prefix","closePrice","getProfitPrice","warning","tokenOptionInfo","convertedTokenAmount","maxInUsd","maxIn","maxOut","maxOutUsd","fromInfo","toInfo","getSwapLimits","DEPOSIT","WITHDRAW","EDIT_OPTIONS","MIN_ORDER_USD","PositionEditor","nextLeverageExcludingPnl","depositFeeUSD","isSwapping","setIsSwapping","isDeposit","isWithdrawal","collateralAfterFee","InvalidLiqPrice","resetForm","depositCollateral","collateralSnapshot","expectingCollateralChange","withdrawCollateral","withdrawAmount","EDIT_OPTIONS_LABELS","SpinningLoader","downloadImage","dataURI","filename","blob","navigator","msSaveBlob","blobURL","createObjectURL","tempLink","display","setAttribute","download","click","revokeObjectURL","ROOT_SHARE_URL","UPLOAD_URL","UPLOAD_SHARE","config","quality","canvasWidth","canvasHeight","getShareURL","imageInfo","PositionShareCard","positionRef","userAffiliateCode","uploadedImageInfo","uploadedImageError","sharePositionBgImg","deltaAfterFeesPercentageStr","homeURL","gmxLogo","PositionShare","setIsPositionShareModalOpen","isPositionShareModalOpen","positionToShare","affiliateCodes","setAffiliateCodes","parsedAffiliateCodes","useAffiliateCodes","setUploadedImageInfo","setUploadedImageError","useCopyToClipboard","copyToClipboard","sourceLoaded","setSourceLoaded","img","Image","onload","useLoadImage","shareBgImg","tweetLink","element","toJpeg","PositionDropdown","AccountType","handleEditCollateral","handleShare","handleMarketSelect","fontWeight","NetValueTooltip","netValue","deltaBeforeFeesStr","closingFee","deltaAfterFeesStr","getOrdersForPosition","hasMatchingIndexToken","hasMatchingCollateralToken","PositionsList","positionsDataIsLoading","setListSection","showPnlAfterFees","setMarket","hideActions","positionToEditKey","setPositionToEditKey","positionToSellKey","setPositionToSellKey","setPositionToShare","isPositionEditorVisible","setIsPositionEditorVisible","isPositionSellerVisible","setIsPositionSellerVisible","setCollateralTokenAddress","accountType","contractType","setContractType","getCode","EOA","CONTRACT","useAccountType","editPosition","sellPosition","onPositionClick","borrowFeeUSD","positionOrders","hasPositionProfit","positionDelta","borrowFeeRate","leverageStr","hasLowCollateral","muted","orderText","colSpan","hasOrderError","hasPendingChanges","OrderEditor","setEditingOrder","initialRatio","indexTokenMarkPrice","getOrderTitle","indexTokenSymbol","longShortText","sizeDeltaText","OrdersList","cancelOrderIdList","setCancelOrderIdList","editingOrder","onCancelClick","onEditClick","renderHead","isAllOrdersSelected","allOrderIds","renderEmptyRow","renderActions","renderLargeList","markExchangeRate","orderId","prevState","orderTitle","collateralUSD","renderSmallList","getPositionDisplay","getOrderActionTitle","actionDisplay","renderLiquidationTooltip","liquidationData","minCollateral","borrowFee","loss","getLiquidationData","liquidationsDataMap","TradeHistory","shouldShowPaginationButtons","pageIds","setPageIds","pageIndex","setPageIndex","liquidationsData","getMsg","trade","tradeData","defaultMsg","tokenIn","tokenOut","amountOut","acceptablePrice","flags","isOrderExecution","isLiquidation","longShortDisplay","executionPriceDisplay","executionPrice","sizeDeltaDisplay","priceDisplay","fromAmountDisplay","toAmountDisplay","amountInDisplay","minOutDisplay","tradesWithMessages","txhash","lastTrade","ExchangeWalletTokens","ExchangeBanner","hideBanner","xmlns","viewBox","transform","fill","FOOTER_LINKS","home","link","external","app","getFooterLinks","isHome","SOCIAL_LINKS","icon","twitterIcon","mediumIcon","githubIcon","telegramIcon","discordIcon","Footer","showRedirectModal","redirectPopupTimestamp","logoImg","platform","isAppLink","baseUrl","activeClassName","getTokenAddress","applyPendingChanges","getPositions","positionQuery","updatedPositions","propsLength","collateralTokens","contractKey","hasRealisedProfit","realisedPnl","updatedPosition","hasProfitAfterFees","pendingDeltaAfterFees","deltaPercentageAfterFees","getPositionQuery","Exchange","forwardRef","setSavedIsPnlInLeverage","savedShowPnlAfterFees","setSavedShouldShowPositionLines","showBanner","setShowBanner","bannerHidden","setBannerHidden","setUpdatedPositions","currentAccount","readerAddress","usdgAddress","defaultTokenSelection","selectedSwapOption","newTokenSelection","tokenAddresses","positionDataError","VaultV2","useImperativeHandle","onUpdatePosition","reserveAmount","onClosePosition","onIncreasePosition","indexTokenItem","onDecreasePosition","onCancelIncreasePosition","blockGap","timeGap","onCancelDecreasePosition","setIsPluginApproving","setIsPositionRouterApproving","isCancelMultipleOrderProcessing","setIsCancelMultipleOrderProcessing","onMultipleCancelClick","tx","wait","POSITIONS","ORDERS","TRADES","LIST_SECTIONS","listSection","LIST_SECTIONS_LABELS","renderCancelOrderButton","getListSection","section","hiddenLimit","Actions","useParams","checkSummedAccount","pnlUrl","updateOrders","ValidationRow","isValid","BeginAccountTransfer","setReceiver","isTransferring","setIsTransferring","isTransferSubmittedModalVisible","setIsTransferSubmittedModalVisible","parsedReceiver","gmxVesterAddress","glpVesterAddress","rewardRouterAddress","gmxVesterBalance","glpVesterBalance","stakedGmxTrackerAddress","cumulativeGmxRewards","RewardTracker","stakedGlpTrackerAddress","cumulativeGlpRewards","transferredCumulativeGmxRewards","Vester","transferredCumulativeGlpRewards","pendingReceiver","gmxAllowance","gmxStaked","hasVestedGmx","hasVestedGlp","hasStakedGmx","hasStakedGlp","hasPendingReceiver","completeTransferLink","pendingTransferLink","ICONS","gmxArbitrum","glpArbitrum","gm","gmArbitrum","gmxAvax","glpAvax","gmAvax","avalancheTestnet","gmxIcon","gmxOutline","gmxOutlineIcon","glpIcon","gmIcon","getIcon","APRLabel","rewardReaderAddress","esGmxAddress","bnGmxAddress","glpAddress","bonusGmxTrackerAddress","feeGmxTrackerAddress","feeGlpTrackerAddress","glpManagerAddress","vesterAddresses","walletTokens","depositTokens","rewardTrackersForDepositBalances","rewardTrackersForStakingInfo","walletBalances","ReaderV2","aums","gmxSupplyUrl","processedData","HeaderLink","isHomeLink","exact","isOnHomePage","pathname","hashData","dataTypes","dataValues","bytes","defaultAbiCoder","encode","keccak256","arrayify","hashString","string","POSITION_IMPACT_FACTOR_KEY","MAX_POSITION_IMPACT_FACTOR_KEY","POSITION_IMPACT_EXPONENT_FACTOR_KEY","POSITION_FEE_FACTOR_KEY","SWAP_IMPACT_FACTOR_KEY","SWAP_IMPACT_EXPONENT_FACTOR_KEY","SWAP_FEE_FACTOR_KEY","BORROWING_FEE_RECEIVER_FACTOR_KEY","OPEN_INTEREST_KEY","OPEN_INTEREST_IN_TOKENS_KEY","POOL_AMOUNT_KEY","RESERVE_FACTOR_KEY","NONCE_KEY","CUMULATIVE_BORROWING_FACTOR_KEY","TOTAL_BORROWING_KEY","MAX_PNL_FACTOR_KEY","MAX_PNL_FACTOR_FOR_WITHDRAWALS_KEY","MAX_PNL_FACTOR_FOR_DEPOSITS_KEY","MAX_PNL_FACTOR_FOR_TRADERS_KEY","MAX_POSITION_IMPACT_FACTOR_FOR_LIQUIDATIONS_KEY","POSITION_IMPACT_POOL_AMOUNT_KEY","SWAP_IMPACT_POOL_AMOUNT_KEY","MIN_COLLATERAL_USD_KEY","MIN_COLLATERAL_FACTOR_KEY","DEPOSIT_GAS_LIMIT_KEY","WITHDRAWAL_GAS_LIMIT_KEY","INCREASE_ORDER_GAS_LIMIT_KEY","DECREASE_ORDER_GAS_LIMIT_KEY","SWAP_ORDER_GAS_LIMIT_KEY","SINGLE_SWAP_GAS_LIMIT_KEY","ESTIMATED_GAS_FEE_BASE_AMOUNT","ESTIMATED_GAS_FEE_MULTIPLIER_FACTOR","ACCOUNT_POSITION_LIST_KEY","ACCOUNT_ORDER_LIST_KEY","CLAIMABLE_FUNDING_AMOUNT","VIRTUAL_TOKEN_ID_KEY","VIRTUAL_MARKET_ID_KEY","VIRTUAL_INVENTORY_FOR_POSITIONS_KEY","VIRTUAL_INVENTORY_FOR_SWAPS_KEY","POOL_AMOUNT_ADJUSTMENT_KEY","positionImpactFactorKey","market","isPositive","positionImpactExponentFactorKey","maxPositionImpactFactorKey","positionFeeFactorKey","swapImpactFactorKey","swapImpactExponentFactorKey","swapFeeFactorKey","openInterestKey","openInterestInTokensKey","poolAmountKey","reserveFactorKey","cumulativeBorrowingFactorKey","totalBorrowingKey","maxPnlFactorKey","pnlFactorType","positionImpactPoolAmountKey","maxPositionImpactFactorForLiquidationsKey","swapImpactPoolAmountKey","orderKey","dataStoreAddress","nonce","depositGasLimitKey","singleToken","withdrawalGasLimitKey","accountOrderListKey","accountPositionListKey","minCollateralFactorKey","hashedPositionKey","claimableFundingAmountKey","virtualTokenIdKey","virtualInventoryForSwapsKey","virtualMarketId","poolAmountAdjustmentKey","executeMulticall","ready","rpcUrl","multicall","getMulticallLib","formattedReq","formatMulticallRequest","requestPromise","race","call","formatMulticallResult","results","ethersProvider","tryAggregate","requestConfig","contracts","contractField","contractConfig","calls","reference","callField","callConfig","methodName","methodParameters","contractReference","callsResults","callsReturnContext","callsObj","returnValues","formatReturnValue","useMulticall","swrFullKey","swrOpts","parseResponse","isLoading","useTokensAllowanceData","spenderAddress","isNativeToken","allowance","tokensAllowanceData","arrayURLFetcher","urlArr","jsonFetcher","ORACLE_KEEPER_URLS","getOracleKeeperUrl","qs","queryString","getOracleKeeperBaseUrl","getTokenData","getNeedTokenApprove","tokenAllowanceData","amountToSpend","convertToTokenAmount","convertToUsd","getTokensRatioByPrice","fromPrice","toPrice","largestToken","smallestToken","largestPrice","smallestPrice","getTokensRatioByAmounts","fromTokenAmount","toTokenAmount","adjustedFromAmount","adjustedToAmount","largestAmount","smallestAmount","formatTokensRatio","largest","smallest","getAmountByRatio","shouldInvertRatio","adjustedDecimalsRatio","getMidPrice","parseOraclePrice","oracleDecimals","convertToContractPrice","convertToContractTokenPrices","parseContractPrice","adaptToV1InfoTokens","tokenData","adaptToV1TokenInfo","useAvailableTokensData","tokenConfigs","balancesData","useTokenBalances","pricesData","priceItems","priceItem","tokenConfig","useTokenRecentPrices","tokenKeys","useTokensData","setByKey","obj","updateByKey","getByKey","getExecutionFee","gasLimts","estimatedGasLimit","baseGasLimit","estimatedFeeBaseGasLimit","multiplierFactor","estimatedFeeMultiplierFactor","feeTokenAmount","feeUsd","feeToken","estimateExecuteIncreaseOrderGasLimit","gasLimits","swapsCount","swapPath","increaseOrder","singleSwap","callbackGasLimit","estimateExecuteDecreaseOrderGasLimit","decreaseOrder","estimateExecuteSwapOrderGasLimit","swapOrder","depositVaultAddress","isNativeLongDeposit","initialLongTokenAddress","longTokenAmount","isNativeShortDeposit","initialShortTokenAddress","shortTokenAmount","wntDeposit","wntAmount","sendLongTokenCall","interface","encodeFunctionData","sendShortTokenCall","callbackContract","marketTokenAddress","initialLongToken","initialShortToken","longTokenSwapPath","shortTokenSwapPath","minMarketTokens","shouldUnwrapNativeToken","useMarketsInfo","useMarkets","marketsData","marketsAddresses","marketsInfoData","marketAddress","marketPrices","getContractMarketPrices","marketProps","marketToken","longToken","longTokenAddress","shortToken","shortTokenAddress","assign","marketInfo","marketTokenPriceMax","indexTokenPrice","longTokenPrice","shortTokenPrice","marketTokenPriceMin","longPoolAmount","shortPoolAmount","longPoolAmountAdjustment","shortPoolAmountAdjustment","reserveFactorLong","reserveFactorShort","totalBorrowingLong","totalBorrowingShort","cummulativeBorrowingFactorLong","cummulativeBorrowingFactorShort","borrowingFeeReceiverFactor","positionImpactPoolAmount","swapImpactPoolAmountLong","swapImpactPoolAmountShort","maxPnlFactorForTradersLong","maxPnlFactorForTradersShort","maxPnlFactorForDepositsLong","maxPnlFactorForDepositsShort","maxPnlFactorForWithdrawalsLong","maxPnlFactorForWithdrawalsShort","claimableFundingAmountLong","claimableFundingAmountShort","positionFeeFactor","positionImpactFactorPositive","positionImpactFactorNegative","maxPositionImpactFactorPositive","maxPositionImpactFactorNegative","maxPositionImpactFactorForLiquidations","minCollateralFactor","positionImpactExponentFactor","swapFeeFactor","swapImpactFactorPositive","swapImpactFactorNegative","swapImpactExponentFactor","longInterestUsingLongToken","longInterestUsingShortToken","shortInterestUsingLongToken","shortInterestUsingShortToken","longInterestInTokensUsingLongToken","longInterestInTokensUsingShortToken","shortInterestInTokensUsingLongToken","shortInterestInTokensUsingShortToken","readerValues","dataStoreValues","longInterestUsd","shortInterestUsd","longInterestInTokens","shortInterestInTokens","borrowingFactorPerSecondForLongs","borrowingFactorPerSecondForShorts","longsPayShorts","fundingPerSecond","fundingAmountPerSize_LongCollateral_LongPosition","fundingAmountPerSize_LongCollateral_ShortPosition","fundingAmountPerSize_ShortCollateral_LongPosition","fundingAmountPerSize_ShortCollateral_ShortPosition","poolValueInfoMin","poolValueInfoMax","poolValueMin","pnlLongMin","pnlShortMin","netPnlMin","poolValueMax","pnlLongMax","pnlShortMax","netPnlMax","totalBorrowingFees","applySwapImpactWithCap","priceImpactDeltaUsd","tokenPoolType","getTokenPoolType","impactDeltaAmount","isLongCollateral","maxImpactAmount","getCappedPositionImpactUsd","maxPriceImpactUsdBasedOnImpactPool","cappedImpactUsd","maxPriceImpactUsdBasedOnMaxPriceImpactFactor","getPriceImpactForPosition","virtualInventoryForPositions","getNextOpenInterestParams","currentLongUsd","currentShortUsd","usdDelta","priceImpactUsd","getPriceImpactUsd","nextLongUsd","nextShortUsd","factorPositive","factorNegative","exponentFactor","virtualInventory","virtualInventoryParams","getNextOpenInterestForVirtualInventory","priceImpactUsdForVirtualInventory","getNextPoolAmountsParams","longDeltaUsd","shortDeltaUsd","longPrice","shortPrice","longPoolUsd","shortPoolUsd","longPoolUsdAdjustment","shortPoolUsdAdjustment","nextLongPoolUsd","nextShortPoolUsd","impactUsd","currentDiff","hasPositiveImpact","currentImpact","applyImpactFactor","nextImpact","deltaDiff","calculateImpactForSameSideRebalance","positiveImpact","negativeImpactUsd","deltaDiffUsd","calculateImpactForCrossoverRebalance","exponent","_diff","_exponent","BigInt","round","getPositionFee","getFundingFeeFactor","periodInSeconds","getFundingApr","fundingFactor","fundingUsd","getFundingFeeRateUsd","sizeInUsd","getBorrowingFeeFactor","getIsHighPriceImpact","priceImpact","bps","getFeeItem","feeDeltaUsd","basis","getTotalFeeItem","feeItems","totalFeeItem","feeItem","useGasPrice","useGasLimits","dataStore","depositSingleToken","depositMultiToken","withdrawalSingleToken","withdrawalMultiToken","getMarketIndexName","isSpotOnly","getMarketPoolName","getOppositeCollateral","poolType","isMarketCollateral","isMarketIndexToken","getPoolUsd","priceType","getReservedUsd","getMaxReservedUsd","poolUsd","reserveFactor","getAvailableUsdLiquidityForPosition","maxReservedUsd","reservedUsd","getAvailableUsdLiquidityForCollateral","getClaimableFundingAmount","getTotalClaimableFundingUsd","markets","amountLong","amountShort","usdLong","usdShort","reader","marketValues","isSameCollaterals","getMarketFullName","useMarketTokensData","isDataLoaded","marketTokensData","TokenAbi","marketTokensMap","useMarketTokensAPR","client","marketAddresses","getMarketQuery","toLocaleLowerCase","queryBody","marketTokensAPRData","feesUsdForPeriod","rawCollectedFee","feeUsdForPool","apr","avgApr","values","avgMarketsAPR","marketsTokensAPRData","TokenCard","fujiAvgMarketsAPR","changeNetwork","BuyLink","SEO","customMeta","meta","Helmet","property","BuyGMXGLP","buyGMXIcon","BuyInputSection","topLeftLabel","topLeftValue","topRightLabel","topRightValue","onClickTopRightLabel","inputValue","onInputValueChange","onClickMax","onFocus","onBlur","showMaxButton","staticInput","clickable","avalancheIcon","arbitrumIcon","AssetDropdown","assetSymbol","assetInfo","unavailableTokenSymbols","nansenPortfolioIcon","coingeckoIcon","addTokenToMetamask","metamaskIcon","SwapErrorModal","swapToken","glpAmount","lowestFeeToken","setLowestFeeToken","lowestFeeTokenInfo","oneInchUrl","getTooltipContent","GlpSwap","isBuying","setIsBuying","history","useHistory","swapLabel","tabLabel","swapValue","setSwapValue","glpValue","setGlpValue","swapTokenAddress","setSwapTokenAddress","anchorOnSwapAmount","setAnchorOnSwapAmount","setFeeBasisPoints","glpRewardRouterAddress","tokensForBalanceAndSupplyQuery","balancesAndSupplies","lastPurchaseTime","redemptionTime","inCooldownWindow","reserveAmountUsd","maxSellAmount","isSwapTokenCapReached","swapTokenInfo","swapTokenBalance","glpUsdMax","feeGlpTrackerApr","stakedGlpTrackerApr","onSwapValueChange","onGlpValueChange","onSelectSwapToken","totalApr","getBuyGlpToAmount","nextValue","getSellGlpFromAmount","switchSwapOption","fillMaxAmount","nextUsdgAmount","payLabel","receiveLabel","payBalance","receiveBalance","selectToken","feePercentageText","arrowIcon","minGlp","buyGlp","sellGlp","modal","tooltipIconPosition","tokenFeeBps","availableAmountUsd","isCapReached","swapUrl","renderFees","BuyGlp","Card","tooltipText","ARBITRUM_GMX","AVALANCHE_GMX","EXTERNAL_LINKS","networkWebsite","buyGmx","uniswap","traderjoe","FIAT_GATEWAYS","links","GMX_FROM_ANY_NETWORKS","BUY_NATIVE_TOKENS","TRANSFER_EXCHANGES","CENTRALISED_EXCHANGES","DECENTRALISED_AGGRIGATORS","BuyGMX","isArbitrum","externalLinks","onNetworkSelect","DecentralisedExchanges","CentralisedExchanges","exchange","uniswapArbitrumIcon","traderjoeIcon","bondProtocolIcon","VEST_WITH_GMX_ARB","VEST_WITH_GLP_ARB","VEST_WITH_GMX_AVAX","VEST_WITH_GLP_AVAX","getVestingDataV2","combinedAverageStakedAmount","cumulativeReward","transferredCumulativeReward","bonusReward","transferredAverageStakedAmount","getVestingValues","minRatio","vestingDataItem","currentRatio","nextMaxVestableEsGmx","nextTransferredCumulativeReward","totalCumulativeReward","nextCombinedAverageStakedAmount","nextTransferredAverageStakedAmount","nextRatio","initialStakingAmount","nextStakingAmount","ClaimEsGmx","selectedOption","setSelectedOption","isClaiming","setIsClaiming","esGmxIouAddress","esGmxIouBalance","arbRewardReaderAddress","avaxRewardReaderAddress","arbVesterAdddresses","avaxVesterAdddresses","arbVestingInfo","avaxVestingInfo","arbVestingData","avaxVestingData","stakingToken","avaIcon","claim","CompleteAccountTransfer","sender","isCorrectAccount","ACTIVE_CHAIN_IDS","StatsTooltip","avaxValue","arbitrumValue","decimalsForConversion","getIsSyntheticsSupported","formatFundingRate","isNegative","MarketsList","indexTokensStats","indexMap","totalPoolValue","minFundingRate","MaxInt256","maxFundingRate","totalUtilization","totalReservedUsd","marketsStats","indexTokenStats","poolValueUsd","longReservedUsd","shortReservedUsd","utilization","DashboardV2","totalVolume","chain","sum","useTotalVolume","currentIcons","getIcons","positionStats","totalGmxSupply","currentVolumeInfo","useVolumeInfo","positionStatsInfo","totalLongPositionSizes","totalShortPositionSizes","getPositionStats","getWhitelistedTokenAddresses","gmxMarketCap","glpMarketCap","tvl","tokenList","tokensForSupplyQuery","totalSupplies","infoTokensArbitrum","infoTokensAvax","currentFeesUsd","getCurrentFeesUsd","currentFees","feesSummary","feesSummaryByChain","useFeesSummary","eth","shouldIncludeCurrrentFees","lastUpdatedAt","totalGmxInLiquidity","avaxStakedGmx","arbitrumStakedGmx","totalFloorPriceFundUsd","ethFloorPriceFund","glpFloorPriceFund","usdcFloorPriceFund","ethFloorPriceFundUsd","glpFloorPriceFundUsd","adjustedUsdgSupply","getWeightText","currentWeightBps","targetWeightBps","weightText","stakedPercent","liquidityPercent","notStakedPercent","gmxDistributionData","totalStatsStartDate","stableGlp","totalGlp","glpPool","fullname","stablePercentage","gmxActiveIndex","setGMXActiveIndex","onGMXDistributionChartLeave","glpActiveIndex","setGLPActiveIndex","onGLPPoolChartLeave","CustomTooltip","payload","PieChart","Pie","cy","innerRadius","outerRadius","dataKey","startAngle","endAngle","paddingAngle","onMouseOut","entry","Cell","hexToRgba","cursor","stroke","strokeWidth","textAnchor","dominantBaseline","Dashboard","shareBar","share","progress","formatAmountHuman","Stats","capsSettingsByToken","cur","renderOiCell","caps","oi","maxGlobalSize","openInterestIncrement","openInterestIncrementLong","openInterestIncrementShort","globalSizeLastIncreasedAt","globalSizeLastIncreasedAtLong","globalSizeLastIncreasedAtShort","maxOpenInterest","maxOpenInterestLong","maxOpenInterestShort","formatDistance","addSuffix","maxPoolUsd","targetUsdg","maxPoolClassName","weightDiffBps","weightClassName","NETWORK_ICONS","NETWORK_ICON_ALTS","Ecosystem","gmxPages","linkLabel","about","chainIds","communityProjects","creatorLabel","creatorLink","dashboardProjects","integrations","linkLabe","announcementLabel","announcementLink","telegramGroups","Home","arbitrumPositionStatsUrl","arbitrumPositionStats","arbitrumTotalVolumeUrl","arbitrumTotalVolume","avalanchePositionStatsUrl","avalanchePositionStats","avalancheTotalVolumeUrl","avalancheTotalVolume","arbitrumTotalVolumeSum","avalancheTotalVolumeSum","totalVolumeSum","openInterest","arbitrumUserStats","avalancheUserStats","totalUsers","uniqueCount","LaunchExchangeButton","tradingIcon","statsIcon","totaluserIcon","liquidityIcon","costIcon","simpleSwapIcon","avaxIcon","NftWallet","nftAddress","setNftAddress","nftId","setNftId","getTransferError","ERC721","transferNft","transferError","OrdersOverview","openTotal","executedTotal","cancelledTotal","ORDER_TYPE_LABELS","Increase","Decrease","Swap","positionsForOrders","openDecrease","openIncrease","openSwap","executedDecrease","executedIncrease","executedSwap","cancelledDecrease","cancelledIncrease","cancelledSwap","executeOrder","preventDefault","shouldExecute","nearExecute","diffPercent","shoudUnwrap","invalidToken","invert","near","PositionsOverview","diffToLiq","feesPerHour","liqTime","useDebounce","delay","debouncedValue","setDebouncedValue","handler","clearTimeout","ReferralCodeForm","callAfterSuccess","setReferralCode","inputRef","isValidating","setIsValidating","referralCodeExists","setReferralCodeExists","debouncedReferralCode","event","isEdit","cancelled","codeExists","checkReferralCode","focus","onSubmit","JoinReferralCode","EmptyMessage","InfoCard","toolTipPosition","AffiliateCodeForm","handleCreateReferralCode","recentlyAddedCodes","setRecentlyAddedCodes","isProcessing","setIsProcessing","setError","referralCodeCheckStatus","setReferralCodeCheckStatus","checkCodeTakenStatus","takenStatus","buttonError","takenInfo","trimmedValue","getCodeError","AddAffiliateCode","Pagination","page","pageCount","onPageChange","middleButtons","getPageNumbers","pageNumber","paginate","pages","ceil","start","end","usePagination","items","currentPage","setCurrentPage","totalPages","setTotalPages","getCurrentData","AffiliatesStats","referralsData","isAddReferralCodeModalOpen","setIsAddReferralCodeModalOpen","addNewModalRef","currentRebatePage","getCurrentRebateData","setCurrentRebatePage","rebatePageCount","currentRebateData","allReferralCodes","currentAffiliatesPage","getCurrentAffiliatesData","setCurrentAffiliatesPage","affiliatesPageCount","currentAffiliatesData","referrerRebates","scope","stat","referrerRebate","rebate","explorerURL","TradersStats","traderTier","isEditModalOpen","setIsEditModalOpen","editModalRef","currentDiscountDistributions","TRADERS","AFFILIATES","TAB_OPTIONS","Referrals","walletAccount","queryAccount","activeTab","setActiveTab","deserializer","mutateCodeOwner","useCodeOwner","referrerTier","mutateReferrerTier","useReferrerTier","networkIcon","registerReferralCode","TAB_OPTION_LABELS","isReferralCodeAvailable","renderAffiliatesTab","HOURS_PER_YEAR","StakeModal","stakingTokenSymbol","stakingTokenAddress","farmAddress","isStaking","setIsStaking","updateTokenAllowance","on","removeAllListeners","YieldFarm","stake","UnstakeModal","isUnstaking","setIsUnstaking","unstake","StakeV1","isStakeModalVisible","setIsStakeModalVisible","stakeModalTitle","setStakeModalTitle","stakeModalMaxAmount","setStakeModalMaxAmount","stakeValue","setStakeValue","setStakingTokenAddress","stakingFarmAddress","setStakingFarmAddress","isUnstakeModalVisible","setIsUnstakeModalVisible","unstakeModalTitle","setUnstakeModalTitle","unstakeModalMaxAmount","setUnstakeModalMaxAmount","unstakeValue","setUnstakeValue","unstakingFarmAddress","setUnstakingFarmAddress","ammFactoryAddressV2","gmtAddress","xgmtAddress","autoAddress","busdAddress","gmtUsdgPairAddress","xgmtUsdgPairAddress","autoUsdgPairAddress","gmtUsdgFarmAddress","xgmtUsdgFarmAddress","autoUsdgFarmAddress","usdgYieldTracker","xgmtYieldTracker","gmtUsdgFarmTrackerXgmt","gmtUsdgFarmTrackerNative","xgmtUsdgFarmTrackerXgmt","xgmtUsdgFarmTrackerNative","autoUsdgFarmTrackerXgmt","autoUsdgFarmTrackerNative","yieldTrackers","pairTokens","yieldTokens","xgmtSupply","updateXgmtSupply","updateBalances","updateStakingInfo","totalStakedInfo","updateTotalStakedInfo","pairInfo","updatePairInfo","pairData","balance0","balance1","getPairData","totalStakedData","getTotalStakedData","gmtUsdg","xgmtUsdg","autoUsdg","xgmtPrice","gmtUsdgPrice","xgmtUsdgPrice","bnbPrice","bnbBusd","autoUsdgPrice","usdgAnnualRewardsUsd","usdg","xgmtAnnualRewardsUsd","xgmt","gmtUsdgAnnualRewardsXmgtUsd","gmtUsdgFarmXgmt","gmtUsdgAnnualRewardsNativeUsd","gmtUsdgFarmNative","gmtUsdgTotalAnnualRewardsUsd","xgmtUsdgAnnualRewardsXmgtUsd","xgmtUsdgFarmXgmt","xgmtUsdgAnnualRewardsNativeUsd","xgmtUsdgFarmNative","xgmtUsdgTotalAnnualRewardsUsd","autoUsdgAnnualRewardsXgmtUsd","autoUsdgFarmXgmt","autoUsdgAnnualRewardsNativeUsd","autoUsdgFarmNative","autoUsdgTotalAnnualRewardsUsd","usdgBalance","usdgTotalStaked","usdgTotalStakedUsd","usdgSupplyUsd","usdgApr","usdgRewards","xgmtBalance","xgmtBalanceUsd","xgmtTotalStaked","xgmtTotalStakedUsd","xgmtSupplyUsd","xgmtApr","xgmtRewards","gmtUsdgFarmBalance","gmtUsdgFarm","gmtUsdgBalance","gmtUsdgBalanceUsd","gmtUsdgSupply","gmtUsdgSupplyUsd","gmtUsdgStaked","gmtUsdgStakedUsd","gmtUsdgFarmSupplyUsd","gmtUsdgApr","gmtUsdgXgmtRewards","gmtUsdgNativeRewards","gmtUsdgTotalRewards","gmtUsdgTotalStaked","gmtUsdgTotalStakedUsd","xgmtUsdgBalance","xgmtUsdgFarmBalance","xgmtUsdgFarm","xgmtUsdgBalanceUsd","xgmtUsdgSupply","xgmtUsdgSupplyUsd","xgmtUsdgStaked","xgmtUsdgStakedUsd","xgmtUsdgFarmSupplyUsd","xgmtUsdgApr","xgmtUsdgXgmtRewards","xgmtUsdgNativeRewards","xgmtUsdgTotalRewards","xgmtUsdgTotalStaked","xgmtUsdgTotalStakedUsd","autoUsdgBalance","autoUsdgFarmBalance","autoUsdgFarm","autoUsdgBalanceUsd","autoUsdgStaked","autoUsdgStakedUsd","autoUsdgFarmSupplyUsd","autoUsdgApr","autoUsdgXgmtRewards","autoUsdgNativeRewards","autoUsdgTotalRewards","autoUsdgTotalStaked","autoUsdgTotalStakedUsd","totalStakedUsd","buyXgmtUrl","buyGmtUrl","addGmtUsdgLpUrl","addXgmtUsdgLpUrl","buyAutoUrl","addAutoUsdgLpUrl","rewards","YieldToken","renderEscrowedGMXApr","GMXAprTooltip","Dropdown","GmFees","totalFeesUsd","swapPriceImpact","getNextDepositAmountsByCollaterals","virtualInventoryForSwaps","longTokenUsd","shortTokenUsd","nextPoolAmountParams","totalPriceImpactDeltaUsd","virtualInventoryLong","virtualInventoryShort","virtualInventoryPriceImpactDeltaUsd","marketTokenAmount","marketTokenUsd","swapFeeUsd","swapPriceImpactDeltaUsd","amounts","getMarketTokenAmountByCollateralDeposit","tokenInAmount","cappedPriceImpactDeltaUsd","swapFeeAmount","amountInAfterFees","usdInAfterFees","negativeImpactAmount","ApproveTokenButton","isApproveSubmitted","setIsApproveSubmitted","isApproved","GmConfirmationBox","onSubmitted","onClose","isHighPriceImpact","isHighPriceImpactAccepted","setIsHighPriceImpactAccepted","payTokenAddresses","addresses","tokensToApprove","longSymbol","shortSymbol","longTokenText","shortTokenText","marketTokenText","operationText","isAllowanceLoaded","submitButtonState","symbols","symbolsText","createDepositTxn","onCreateDeposit","withdrawalVaultAddress","isNativeWithdrawal","minLongTokenAmount","minShortTokenAmount","createWithdrawalTxn","onCreateWithdrawal","allowContentTouchMove","RequestStatus","txnLink","txnHash","isWaiting","OrderType","DecreasePositionSwapType","collateralAddress","parsePositionKey","getPositionPendingFeesUsd","pendingFundingFeesUsd","pendingBorrowingFeesUsd","getPositionPnlUsd","sizeInTokens","positionValueUsd","getPositionValueUsd","totalPnl","poolPnl","cappedPnl","maximize","maxPnl","getCappedPoolPnl","WEI_PRECISION","collateralUsd","pnl","closingFeeUsd","maxPriceImpactFactor","minCollateralUsd","totalPendingFeesUsd","maxNegativePriceImpactUsd","remainingCollateralUsd","liqPriceForFees","liquidationAmountUsd","minCollateralUsdForMaxLeverage","liqPriceForMaxLeverage","formatLeverage","useOptimisticPositions","positionsKeys","queryParams","marketPricesByPositionsKeys","marketPricesArray","positionInfo","positionProps","positionFees","numbers","collateralAmount","borrowingFactor","longTokenFundingAmountPerSize","shortTokenFundingAmountPerSize","increasedAtBlock","decreasedAtBlock","borrowingFeeUsd","fundingFeeAmount","claimableLongTokenAmount","claimableShortTokenAmount","latestLongTokenFundingAmountPerSize","latestShortTokenFundingAmountPerSize","contractPositionKey","hasPendingLongTokenFundingFee","hasPendingShortTokenFundingFee","positionsData","usePositions","useSyntheticsEvents","positionDecreaseEvents","positionIncreaseEvents","pendingPositionsUpdates","optimisticPositionsData","uniq","increaseEvents","lastIncreaseEvent","decreaseEvents","lastDecreaseEvent","pendingUpdate","isIncrease","collateralDeltaAmount","sizeDeltaInTokens","updatedAtBlock","getPendingPosition","applyEventChanges","nextPosition","usePositionsConstants","getSwapPathOutputAddresses","initialCollateralAddress","wrappedNativeTokenAddress","outTokenAddress","outMarketAddress","firstMarketAddress","outMarket","outTokenType","outToken","getMaxSwapPathLiquidity","minMarketLiquidity","tokenInAddress","liquidity","getSwapStats","cappedImpactDeltaUsd","tokenOutAddress","usdIn","shouldApplyPriceImpact","isWrap","priceIn","priceOut","usdOut","fromDeltaAmount","toDeltaAmount","fromTokenPoolType","shortDeltaAmount","getPriceImpactForSwap","isOutLiquidity","getMarketsGraph","graph","abjacencyList","edges","longShortEdge","shortLongEdge","TradeType","TradeMode","TriggerThresholdType","createSwapEstimator","swapStats","getSwapAmountsByFromValue","isLimit","findSwapPath","minOutputAmount","defaultAmounts","swapPathStats","totalSwapFeeUsd","priceImpactAmount","totalSwapPriceImpactDeltaUsd","getSwapAmountsByToValue","baseUsdIn","getMarkPrice","getTriggerThresholdType","orderType","LimitIncrease","Below","Above","LimitDecrease","StopLossDecrease","getAcceptablePrice","acceptablePriceImpactBps","shouldFlipPriceImpact","priceImpactForPriceAdjustment","applySlippage","slippageBasisPoints","getDecreasePositionAmounts","closeSizeUsd","isTrigger","savedAcceptablePriceImpactBps","exitPrice","decreaseSwapType","getDecreaseSwapType","triggerOrderType","getTriggerDecreaseOrderType","positionFeeUsd","positionPriceImpactDeltaUsd","collateralDeltaUsd","receiveTokenAmount","exitPnl","exitPnlPercentage","pnlDelta","initialCollateralUsd","collateralDeltaInfo","collateralPrice","getCollateralDeltaForDecreaseOrder","getPnlDeltaForDecreaseOrder","getNextPositionValuesForDecreaseTrade","showPnlInLeverage","nextSizeUsd","nextCollateralUsd","nextPnl","nextPnlPercentage","nextLiqPrice","SwapPnlTokenToCollateralToken","NoSwap","getTradeFees","swapSteps","fundingFeeDeltaUsd","swapBasis","positionBasis","swapPriceImpactFee","positionPriceImpactFee","positionPriceImpact","ZERO_VIRTUAL_ID","useVirtualInventory","virtualIds","virtualMarketsIds","virtualTokensIds","virtualTokenId","useSwapRoutes","wrappedFromAddress","wrappedToAddress","estimator","allPaths","maxDepth","paths","dfs","edge","visited","findAllPaths","maxLiquidity","maxLiquidityPath","bestSwapPathEdges","bestPath","bestUsdOut","pathUsdOut","prevUsdOut","getBestSwapPath","swapStep","lastStep","targetMarketAddress","totalFeesDeltaUsd","getSwapPathStats","maxSwapLiquidity","maxLiquiditySwapPath","usePositionsInfo","positionsInfoData","pnlToken","collateralMarkPrice","entryPrice","getEntryPrice","remainingCollateralAmount","pnlPercentage","pendingFeesUsd","getPositionNetValue","pnlAfterFees","pnlAfterFeesPercentage","isVisibleOrder","isLimitOrderType","isTriggerDecreaseOrderType","LimitSwap","isLimitSwapOrderType","isOrderForPosition","isMatch","isSwapOrderType","targetCollateralToken","initialCollateralTokenAddress","isDecreaseOrderType","MarketDecrease","isIncreaseOrderType","MarketIncrease","MarketSwap","getOrderTypeLabel","simulateExecuteOrderTxn","exchangeRouter","getBlockNumber","getUint","blockTag","nextNonce","nextKey","getSimulationPrices","primaryPriceOverrides","secondaryPriceOverrides","primaryTokens","primaryPrices","secondaryTokens","secondaryPrices","simulationPayload","createOrderMulticallPayload","txn","callStatic","customErrors","CustomErrors","parsedError","parseError","primaryPricesMap","secondaryPricesMap","convertedAddress","primaryOverridedPrice","secondaryOverridedPrice","mapValues","createDecreaseOrderTxn","orderVaultAddress","isNativeReceive","receiveTokenAddress","initialCollateralToken","initialCollateralDeltaAmount","minOutputUsd","decreasePositionSwapType","encodedPayload","longText","orderLabel","createIncreaseOrderTxn","isNativePayment","wntCollateralAmount","initialCollateralAmount","wntSwapAmount","sendWnt","sendTokens","createOrder","fromText","toText","parseEventLogData","eventData","typeKey","listKey","SyntheticsEventsContext","createContext","SyntheticsEventsProvider","orderStatuses","setOrderStatuses","depositStatuses","setDepositStatuses","withdrawalStatuses","setWithdrawalStatuses","setPendingPositionsUpdates","setPositionIncreaseEvents","setPositionDecreaseEvents","eventLogHandlers","PositionIncrease","txnParams","addressItems","boolItems","bytes32Items","uintItems","intItems","PositionDecrease","pnlUsd","OrderCreated","arrayItems","contractTriggerPrice","contractAcceptablePrice","isFrozen","createdTxnHash","OrderExecuted","executedTxnHash","OrderCancelled","cancelledTxnHash","DepositCreated","depositData","initialLongTokenAmount","initialShortTokenAmount","DepositExecuted","DepositCancelled","WithdrawalCreated","WithdrawalExecuted","WithdrawalCancelled","wsProvider","handleEventLog","handleEventLog1","handleEventLog2","off","eventName","eventNameHash","topic1","msgSender","topic2","contextState","increasePositionEvents","decreasePositionEvents","touchOrderStatus","isTouched","touchDepositStatus","touchWithdrawalStatus","setPendingPositionUpdate","update","currentBlock","Provider","useContext","GmOrderStatus","setOrderKey","ordersEvents","orderStatus","firstToken","secondToken","tokensText","pendingOrder","depositStatus","withdrawalStatus","renderCreationStatus","renderExecutionStatus","useSafeState","inititalValue","shouldUpdateFn","state","_setState","setState","Operation","Mode","GmSwapBox","operation","mode","setMode","setOperation","selectedMarketAddress","depositMarketTokensData","withdrawalMarketTokensData","focusedInput","setFocusedInput","stage","setStage","operationLabels","Deposit","Withdrawal","modeLabels","Single","Pair","isSingle","isPair","availableModes","getAvailableModes","marketsOptions","firstTokenAddress","setFirstTokenAddress","firstTokenInputValue","setFirstTokenInputValue","firstTokenAmount","firstTokenUsd","secondTokenAddress","setSecondTokenAddress","secondTokenInputValue","setSecondTokenInputValue","secondTokenAmount","secondTokenUsd","longTokenInputState","getInputStateByCollateralType","shortTokenInputState","tokenOptions","some","unshift","marketTokenInputValue","setMarketTokenInputValue","prevMarketTokenAmount","setSwapFeeUsd","setSwapPriceImpactDeltaUsd","longCollateralLiquidityUsd","shortCollateralLiquidityUsd","basisUsd","gasPerSwap","gasForSwaps","estimateExecuteDepositGasLimit","withdrawal","estimateExecuteWithdrawalGasLimit","totalCollateralUsd","onConnectWallet","onFocusedCollateralInputChange","previousLongTokenAmount","previousShortTokenAmount","includeLongToken","includeShortToken","previousLongTokenUsd","previousShortTokenUsd","previousSumUsd","baseAmounts","getNextDepositAmountsByMarketToken","totalPoolsUsd","longSwapFeeUsd","shortSwapFeeUsd","getNextWithdrawalAmountsByMarketToken","getNextWithdrawalAmountsByCollaterals","onSelectMarket","reverse","prev","GmList","marketTokens","market1","market2","indexToken1","indexToken2","localeCompare","totalSupplyUsd","stakeMethodName","burnAmount","unstakingTokenSymbol","unstakeMethodName","multiplierPointsAmount","rewardReductionBasisPoints","VesterDepositModal","stakeTokenLabel","maxReserveAmount","vesterAddress","isDepositing","setIsDepositing","nextReserveAmount","nextDepositAmount","additionalReserveAmount","VesterWithdrawModal","isWithdrawing","setIsWithdrawing","CompoundModal","isCompounding","setIsCompounding","shouldClaimGmx","setShouldClaimGmx","shouldStakeGmx","setShouldStakeGmx","shouldClaimEsGmx","setShouldClaimEsGmx","shouldStakeEsGmx","setShouldStakeEsGmx","shouldStakeMultiplierPoints","setShouldStakeMultiplierPoints","shouldClaimWeth","setShouldClaimWeth","shouldConvertWeth","setShouldConvertWeth","ClaimModal","StakeV2","esGmxSupplyUsd","setStakingTokenSymbol","setStakeMethodName","unstakeModalReservedAmount","setUnstakeModalReservedAmount","setUnstakingTokenSymbol","setUnstakeMethodName","isVesterDepositModalVisible","setIsVesterDepositModalVisible","vesterDepositTitle","setVesterDepositTitle","vesterDepositStakeTokenLabel","setVesterDepositStakeTokenLabel","vesterDepositMaxAmount","setVesterDepositMaxAmount","vesterDepositBalance","setVesterDepositBalance","vesterDepositEscrowedBalance","setVesterDepositEscrowedBalance","vesterDepositVestedAmount","setVesterDepositVestedAmount","vesterDepositAverageStakedAmount","setVesterDepositAverageStakedAmount","vesterDepositMaxVestableAmount","setVesterDepositMaxVestableAmount","vesterDepositValue","setVesterDepositValue","vesterDepositReserveAmount","setVesterDepositReserveAmount","vesterDepositMaxReserveAmount","setVesterDepositMaxReserveAmount","vesterDepositAddress","setVesterDepositAddress","isVesterWithdrawModalVisible","setIsVesterWithdrawModalVisible","vesterWithdrawTitle","setVesterWithdrawTitle","vesterWithdrawAddress","setVesterWithdrawAddress","isCompoundModalVisible","setIsCompoundModalVisible","isClaimModalVisible","setIsClaimModalVisible","stakedGmxDistributorAddress","stakedGlpDistributorAddress","excludedEsGmxAccounts","esGmxSupply","avaxGmxStaked","arbitrumGmxStaked","totalGmxStaked","totalRewardTokens","totalRewardTokensAndGlp","hasMultiplierPoints","maxUnstakeableGmx","gmxVesterPairAmount","availableTokens","stakedTokens","earnMsg","renderMultiplierPointsLabel","renderMultiplierPointsValue","gmxAmountStr","esGmxAmountStr","mpAmountStr","glpStr","s","showUnstakeGmxModal","showUnstakeEsGmxModal","remainingVestableAmount","showGmxVesterDepositModal","gmxVesterVestedAmount","showGlpVesterDepositModal","glpVesterVestedAmount","Stake","EventToastContainer","useWindowScroll","breakpoint","createBreakpoint","XL","L","S","useBreakpoint","reverseOrder","gutter","containerClassName","containerStyle","right","toastOptions","Infinity","homeEventsData","appEventsData","isActive","validTill","bodyText","buttons","Icon","strokeLinecap","strokeLinejoin","EventToast","button","useEventToast","setVisited","isFuture","custom","RedirectPopupModal","redirectModalVisible","setRedirectModalVisible","appRedirectUrl","setRedirectPopupTimestamp","setShouldHideRedirectModal","shouldHideRedirectModal","NoJob","Jobs","PageNotFound","homeUrl","tradePageUrl","ReferralTerms","TermsAndConditions","AddressDropdown","accountUrl","disconnectAccountAndCloseSettings","M","ensName","setENSName","lookupAddress","resolveENS","useENS","setProvider","initializeProvider","useJsonRpcProvider","ethereumProvider","copy","externalLink","disconnect","ConnectWalletButton","imgSrc","ModalWithPortal","locales","en","es","zh","ko","ru","ja","fr","de","pseudo","defaultLocale","isTestLanguage","dynamicActivate","messages","load","loadLocaleData","plurals","LanguageModalContent","currentLanguage","checkedIcon","LANGUAGE_MODAL_KEY","NETWORK_MODAL_KEY","NetworkDropdown","activeModal","setActiveModal","small","NavIcons","selectorLabel","DesktopDropdown","modalName","getModalProps","NetworkModalContent","networkOptions","openSettings","getModalContent","NetworkMenuItems","settingsIcon","language24Icon","handleNetworkSelect","LanguagePopupHome","isLanguageModalOpen","setIsLanguageModalOpen","TradeDropdown","buttonLabel","NETWORK_OPTIONS","AppHeaderUser","setWalletModalVisible","showConnectionOptions","connectWalletImg","getAccountUrl","AppHeaderLinks","clickCloseIcon","HOME_MENUS","HomeHeaderLinks","AnimatePresence","fadeVariants","slideVariants","Header","isDrawerVisible","setIsDrawerVisible","isNativeSelectorModalVisible","setIsNativeSelectorModalVisible","logoSmallImg","CardRow","MarketStats","marketPrice","marketBalance","marketBalanceUsd","marketTotalSupply","marketTotalSupplyUsd","longPoolAmountUsd","shortPoolAmountUsd","ClaimType","MarketPoolsPage","search","useLocation","URLSearchParams","selectedMarketKey","setSelectedMarketKey","get","m","AcceptbablePriceImpactEditor","parsedSavedValue","setInputValue","parsed","saveAcceptablePriceImpactBps","useFixedAddreseses","ClaimHistoryRow","claimAction","marketsCount","claimItems","eventTitle","ClaimFunding","ClaimPriceImpact","tokensMsg","amountByToken","ClaimHistory","pageSize","fixedAddresses","skip","claimCollateralActions","claimActions","rawAction","claimItemsMap","transaction","useClaimCollateralHistory","isEmpty","totalClaimableFundingUsd","fundingLongAmount","fundingShortAmount","fundingLongUsd","fundingShortUsd","totalFundingUsd","claimableAmountsItems","fundingMarketAddresses","fundingTokenAddresses","fundingFees","claimCollateralTxn","cancelOrdersTxn","orderKeys","ordersText","isInited","setIsInited","sizeInputValue","setSizeInputValue","triggerPirceInputValue","setTriggerPriceInputValue","fromTokenPrice","toTokenPrice","triggerRatioInputValue","setTriggerRatioInputValue","markRatio","isRatioInverted","estimatedGas","positionOrder","updateOrderTxn","getSubmitButtonState","OrderItem","getCollateralText","usdText","tokenAmountText","getSwapRatioText","tokensRatio","swapRatioText","markSwapRatioText","renderTitle","isLarge","renderTriggerPrice","toAmountText","triggerThresholdType","renderMarkPrice","onSelectOrder","isSelected","onEditOrder","onCancelOrder","isCanceling","OrderList","canellingOrdersKeys","setCanellingOrdersKeys","editingOrderKey","setEditingOrderKey","selectedOrdersKeys","setSelectedOrdersKeys","allSelectedOrders","k","PositionItem","displayedPnl","displayedPnlPercentage","renderNetValue","renderCollateral","onEditCollateralClick","renderPositionOrders","onOrdersClick","onSelectPositionClick","onClosePositionClick","renderLarge","renderSmall","PositionList","isDataLoading","fetchOracleRecentPrice","fetchLastOracleCandles","parseOracleCandle","fetchOracleCandles","after","asc","rawCandle","SyntheticsTVDataProvider","candlesTimeout","TVChart","ordersInfo","positionsInfo","chartTokenAddress","onSelectChartTokenAddress","disableSelectToken","selectedTokenOption","useLastCandles","candlesDelta","getCandlesDelta","orderLines","positionLines","ValueTransition","TradeFeesRow","feeRows","positionPriceImpactRow","swapPriceImpactRow","swapFeeRows","positionFeeRow","feesType","borrowFeeRow","fundingFeeRow","borrowFeeRateRow","borrowFeeRateStr","fundingFeeRateRow","fundingFeeRateStr","executionFeeRow","totalFeeUsd","totalTradeFees","feeRow","tradeFlags","swapAmounts","increaseAmounts","decreaseAmounts","nextPositionValues","swapLiquidityUsd","longLiquidityUsd","shortLiquidityUsd","shouldDisableValidation","isMarket","referralCodeData","payAmount","needPayTokenApproval","existingLimitOrders","swapSpreadInfo","fromSpread","toSpread","showSpread","confirmationError","submitText","onSubmitWrapOrUnwrap","createWrapOrUnwrapTxn","onSubmitSwap","createSwapOrderTxn","renderOrderItem","renderExistingLimitOrdersWarning","sizeText","availableLiquidityUsd","availableLiquidityAmount","borrowingRate","fundigRate","nextEntryPrice","collateralUsdAfterFees","renderIncreaseOrderSection","renderTriggerDecreaseSection","targetCollateralAddress","collateralAmountAfterFees","onSubmitIncreaseOrder","leverageMarks","LeverageSlider","LeverageSliderHandle","useAvailableMarketsOptions","disable","hasExistingOrder","increaseSizeUsd","availableMarkets","liquidMarkets","isNoSufficientLiquidityInAnyMarket","maxLiquidityMarket","marketsInfo","bestMarket","bestLiquidity","isCandidate","getMostLiquidMarketForPosition","availablePosition","pos","marketWithPosition","collateralWithPosition","availableOrder","marketWithOrder","collateralWithOrder","bestImpactDeltaUsd","getMinPriceImpactMarket","minPriceImpactMarket","minPriceImpactBps","getCommonError","isConnected","getDecreaseError","ClaimableCard","onClaimClick","ShareBar","MarketCard","totalInterestUsd","SwapCard","maxLiquidityUsd","maxLiquidityAmount","ratioStr","CollateralSelectorRow","selectedCollateralAddress","availableCollaterals","onSelectCollateralAddress","MarketPoolSelectorRow","selectedMarket","isOutPositionLiquidity","currentPriceImpactBps","onSelectMarketAddress","isSelectedMarket","dropdownOptions","OrderStatus","toSwapToken","toSwapTokenAddress","matchedPendingOrderStatus","TradeActionType","tradeTypeIcons","Long","Short","avaialbleModes","Market","Limit","Trigger","TradeBox","tradeMode","tradeType","avaialbleTokenOptions","acceptablePriceImpactBpsForLimitOrders","onSelectFromTokenAddress","onSelectToTokenAddress","onSelectTradeMode","onSelectTradeType","setIsEditingAcceptablePriceImpact","isPosition","swapTokens","tradeTypeLabels","tradeModeLabels","fromTokenInputValue","setFromTokenInputValue","fromUsd","isNotMatchAvailableBalance","toTokenInputValue","setToTokenInputValue","closeSizeInputValue","setCloseSizeInputValue","triggerPriceInputValue","getLeverageKey","getLeverageEnabledKey","isLeverageEnabled","setIsLeverageEnabled","swapRoute","acceptablePriceAfterSlippage","initialCollateralPrice","acceptablePriceInfo","getIncreasePositionAmountsByCollateral","getIncreasePositionAmountsBySizeDelta","getNextPositionValuesForIncreaseTrade","swapOutLiquidity","longLiquidity","shortLiquidity","commonError","tradeError","toUsd","swapLiquidity","collateralLiquidity","_minCollateralUsd","getIncreaseError","submitButtonText","prevIsISwap","onSwitchTokens","needUpdateMarket","optimalMarket","onConfirmationClose","onConfirmed","renderIncreaseOrderInfo","renderTriggerOrderInfo","LiquidationTooltip","tradeAction","maxLeverage","collateralTokenPriceMin","borrowingFeeAmount","positionFeeAmount","priceImpactDiffUsd","fundingFeeUsd","maxLeverageText","getOrderActionText","actionText","OrderUpdated","OrderFrozen","getPositionOrderMessage","increaseText","positionText","pricePrefix","collateralText","Liquidation","isLiquidationOrderType","TradeHistoryRow","executionAmountOut","ratioText","getSwapOrderMessage","tradeActions","swapPathOutputAddresses","collateralTokenPriceMax","reason","useTradeHistory","isHistoryLoading","availableTokensOptions","closeUsdInputValue","setCloseUsdInputValue","maxCloseSize","setReceiveTokenAddress","decreaseError","disableBodyScrollLock","useOrdersInfo","setOrdersData","startIndex","setStartIndex","endIndex","setEndIndex","orderStore","useOrders","ordersInfoData","fromTokenText","toTokenText","getSwapOrderTitle","orderInfo","tokenText","increaseOrDecreaseText","getPositionOrderTitle","Withdraw","maxWithdrawAmount","collateralInputValue","setCollateralInputValue","editCollateralError","getEditCollateralError","ListSection","SyntheticsPage","isPositionsLoading","isOrdersLoading","getSyntheticsListSectionKey","Positions","getSyntheticsTradeTypeKey","setTradeType","getSyntheticsTradeModeKey","setTradeMode","useTradeFlags","tokensMap","collaterals","useAvailableTokenOptions","getSyntheticsFromTokenAddressKey","fromTokenData","getSyntheticsToTokenAddressKey","toTokenData","getIsUnwrap","getSyntheticsMarketAddressKey","setMarketAddress","getSyntheticsCollateralAddressKey","setCollateralAddress","collateralTokenData","closingPositionKey","setClosingPositionKey","closingPosition","editingPositionKey","setEditingPositionKey","editingPosition","selectedPositionKey","selectedPosition","selectedOrdersKeysArr","isCancelOrdersProcessig","setIsCancelOrdersProcessig","positionsCount","ordersCount","isAcceptablePriceImpactEditing","setIsAcceptablePriceImpactEditing","getAcceptablePriceImpactBpsKey","onEditAcceptablePriceImpact","getAllowedSlippageKey","onPositionSellerClose","onPositionEditorClose","onSelectPosition","Orders","Trades","Claims","formatFactor","factorDecimals","SyntheticsStats","midLongPrice","midShortPrice","swapImpactUsdLong","swapImpactUsdShort","positionImpactUsd","virtualInventoryPositions","virtualInventorySwapsLong","virtualInventorySwapsShort","reservedUsdLong","maxReservedUsdLong","reservedUsdShort","maxReservedUsdShort","borrowingRateLong","borrowingRateShort","fundingAprLong","fundingAprShort","marginBottom","SyntheticsFallbackPage","isLoaded","setIsLoaded","getLibrary","Web3Provider","autoRefreshOnNetworkChange","Zoom","cssTransition","enter","appendPosition","collapse","collapseDuration","SyntheticsEventsProviderWrapper","FullApp","exchangeRef","connector","activatingConnector","setActivatingConnector","triedEager","tried","setTried","shouldTryWalletConnect","rawData","connected","SyntaxError","currentProviderName","isAuthorized","useEagerConnect","suppress","injected","handleConnect","handleChainChanged","handleAccountsChanged","accounts","handleNetworkChanged","networkId","removeListener","useInactiveListener","useHandleUnsupportedNetwork","React","useRouteQuery","encodedReferralCode","delete","disconnectAccount","connectInjectedWallet","userOnMobileDevice","userAgent","attemptActivateWallet","walletModalVisible","selectedToPage","setSelectedToPage","isSettingsVisible","setIsSettingsVisible","setSavedSlippageAmount","slippageAmount","setSlippageAmount","isPnlInLeverage","setIsPnlInLeverage","shouldDisableValidationForTesting","setShouldDisableValidationForTesting","setShowPnlAfterFees","setSavedShowPnlAfterFees","setSavedShouldDisableValidationForTesting","decodedRefCode","checkPendingTxns","updatedPendingTxns","getTransactionReceipt","receipt","wsVaultAbi","VaultV2b","wsVault","wsPositionRouter","callExchangeRef","slippage","hideProgressBar","newestOnTop","closeOnClick","draggable","pauseOnHover","metamaskImg","hasCoinBaseWalletExtension","coinbaseImg","walletConnect","UserRejectedRequestErrorWalletConnect","getWalletConnectHandler","walletConnectImg","basisPoints","App","unlisten","listen","scrollTo","useScrollToTop","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"q4kiCAAA,OAAe,cAA0B,oC,ip8GCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,yC,6xqDCAzC,OAAe,cAA0B,gC,+BCAzC,OAAe,cAA0B,iC,+BCAzC,OAAe,cAA0B,gC,kjhBCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,0C,6ECAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,8C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,mD,+BCAzC,OAAe,cAA0B,oD,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,8sJ,+BCAf,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,4C,+BCAzC,OAAe,cAA0B,6C,+BCAzC,OAAe,cAA0B,kC,+BCAzC,OAAe,cAA0B,qD,8g7cCAzC,IAAIA,EAAM,CACT,gBAAiB,IACjB,gBAAiB,IACjB,gBAAiB,IACjB,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B,gD,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,mD,+BCAzC,OAAe,cAA0B,mD,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,kC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,sW,+BCAf,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,00D,+BCAf,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,iD,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,86C,+BCAf,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,kC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,kC,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,knF,+BCAf,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,gD,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,80C,+BCAf,OAAe,8wB,+BCAf,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,+C,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cA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","file":"static/js/main.dbb701fd.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo_GMX.b956aa96.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_96.4c6d42bf.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_96.b6255c50.svg\";","export default __webpack_public_path__ + \"static/media/ic_language24.ce951c62.svg\";","export default __webpack_public_path__ + \"static/media/long.0bc4a064.svg\";","export default __webpack_public_path__ + \"static/media/short.1f94a0c2.svg\";","export default __webpack_public_path__ + \"static/media/swap.40fb8e49.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_24.21ec7bfe.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_avax.e34f1e49.svg\";","export default __webpack_public_path__ + \"static/media/ic_gm_arbitrum.7b019780.svg\";","export default __webpack_public_path__ + \"static/media/ic_gm_avax.74073ad2.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_avax.c79d2528.svg\";","export default __webpack_public_path__ + \"static/media/ic_settings_16.9d97766b.svg\";","export default __webpack_public_path__ + \"static/media/logo_GMX_small.f593fa5c.svg\";","export default __webpack_public_path__ + \"static/media/DROP_DOWN.ef525fad.svg\";","export default __webpack_public_path__ + \"static/media/buy_gmx.618eb538.svg\";","export default __webpack_public_path__ + \"static/media/coinbaseWallet.ae86a337.png\";","export default __webpack_public_path__ + \"static/media/gm_icon.5c25657d.svg\";","export default __webpack_public_path__ + \"static/media/gmx-logo-with-name.6211e9eb.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_24.be4891c9.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_testnet_24.b911b6d2.svg\";","export default __webpack_public_path__ + \"static/media/ic_bondprotocol_arbitrum.7aaf0874.svg\";","export default __webpack_public_path__ + \"static/media/ic_checked.ef61d0e2.svg\";","export default __webpack_public_path__ + \"static/media/ic_coingecko_16.ef20d202.svg\";","export default __webpack_public_path__ + \"static/media/ic_convert_down.74b7eb02.svg\";","export default __webpack_public_path__ + \"static/media/ic_copy_16.fafdf331.svg\";","export default __webpack_public_path__ + \"static/media/ic_cost.b4a729d3.svg\";","export default __webpack_public_path__ + \"static/media/ic_discord.be4d716c.svg\";","export default __webpack_public_path__ + \"static/media/ic_github.dbd4de8a.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_40.087335c1.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_arbitrum.d04b88c9.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_40.72a1053e.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_arbitrum.d7115a71.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_footer.e7821eb2.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmxv1flat.b2372df2.svg\";","export default __webpack_public_path__ + \"static/media/ic_liquidity.505b3f30.svg\";","export default __webpack_public_path__ + \"static/media/ic_medium.f6051b2e.svg\";","export default __webpack_public_path__ + \"static/media/ic_metamask_16.aa3dce32.svg\";","export default __webpack_public_path__ + \"static/media/ic_new_link_16.5b7cb7bf.svg\";","export default __webpack_public_path__ + \"static/media/ic_sign_out_16.7516903b.svg\";","export default __webpack_public_path__ + \"static/media/ic_simpleswaps.2005009f.svg\";","export default __webpack_public_path__ + \"static/media/ic_stats.f0a18011.svg\";","export default __webpack_public_path__ + \"static/media/ic_telegram.af1a4a66.svg\";","export default __webpack_public_path__ + \"static/media/ic_totaluser.ae09b310.svg\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/ic_trading.2c53815a.svg\";","export default __webpack_public_path__ + \"static/media/ic_twitter.9f35b403.svg\";","export default __webpack_public_path__ + \"static/media/ic_uni_arbitrum.1d07524a.svg\";","export default __webpack_public_path__ + \"static/media/ic_wallet_24.a19a6758.svg\";","export default __webpack_public_path__ + \"static/media/metamask.4b5d438a.png\";","export default __webpack_public_path__ + \"static/media/nansen_portfolio.886b0a77.svg\";","export default __webpack_public_path__ + \"static/media/position-share-bg.900fbfaa.png\";","export default __webpack_public_path__ + \"static/media/search.6bd14789.svg\";","export default __webpack_public_path__ + \"static/media/walletconnect-circle-blue.31c29967.svg\";","var map = {\n\t\"./Anyswap.png\": 573,\n\t\"./Anyswap.svg\": 574,\n\t\"./Artwork.svg\": 575,\n\t\"./Artwork_gmx.svg\": 576,\n\t\"./Banxa.png\": 577,\n\t\"./DROP_DOWN.svg\": 351,\n\t\"./Hop.png\": 578,\n\t\"./Hop.svg\": 579,\n\t\"./Hop_dark.png\": 580,\n\t\"./Hop_dark.svg\": 581,\n\t\"./Synapse.png\": 582,\n\t\"./Synapse.svg\": 583,\n\t\"./binance.png\": 584,\n\t\"./bitkeep.svg\": 585,\n\t\"./bscscan.png\": 586,\n\t\"./btn_big_arbitrum.png\": 587,\n\t\"./btn_big_avalanche.png\": 588,\n\t\"./btn_big_bsc.png\": 589,\n\t\"./btn_big_purchasegmx.png\": 590,\n\t\"./btn_big_purchasegmx.svg\": 591,\n\t\"./buy_gmx.svg\": 352,\n\t\"./buy_gmx_bond.svg\": 592,\n\t\"./buy_transfer_eth.svg\": 593,\n\t\"./coinbaseWallet.png\": 353,\n\t\"./coingecko.png\": 594,\n\t\"./cross.svg\": 595,\n\t\"./flag_de.svg\": 596,\n\t\"./flag_en.svg\": 597,\n\t\"./flag_es.svg\": 598,\n\t\"./flag_fr.svg\": 599,\n\t\"./flag_ja.svg\": 600,\n\t\"./flag_ko.svg\": 601,\n\t\"./flag_ru.svg\": 602,\n\t\"./flag_zh.svg\": 603,\n\t\"./gateio.svg\": 604,\n\t\"./glp_icon.svg\": 605,\n\t\"./gm_icon.svg\": 354,\n\t\"./gmx-logo-final-white-small.png\": 606,\n\t\"./gmx-logo-final-white.png\": 607,\n\t\"./gmx-logo-final.png\": 608,\n\t\"./gmx-logo-glow.png\": 609,\n\t\"./gmx-logo-with-name.svg\": 355,\n\t\"./gmx_logo.svg\": 610,\n\t\"./graphite-01.png\": 611,\n\t\"./ic-communityproject.svg\": 612,\n\t\"./ic_1inch.svg\": 613,\n\t\"./ic_across.svg\": 614,\n\t\"./ic_arbitrum_16.svg\": 615,\n\t\"./ic_arbitrum_24.svg\": 298,\n\t\"./ic_arbitrum_96.svg\": 215,\n\t\"./ic_arbitrum_hover_16.svg\": 616,\n\t\"./ic_arrowleft16.svg\": 617,\n\t\"./ic_arrowright16.svg\": 618,\n\t\"./ic_avalanche_16.svg\": 619,\n\t\"./ic_avalanche_24.svg\": 356,\n\t\"./ic_avalanche_96.svg\": 216,\n\t\"./ic_avalanche_testnet_16.svg\": 620,\n\t\"./ic_avalanche_testnet_24.svg\": 357,\n\t\"./ic_avalanche_testnet_96.svg\": 621,\n\t\"./ic_avax_24.svg\": 622,\n\t\"./ic_avax_30.svg\": 623,\n\t\"./ic_avax_40.svg\": 624,\n\t\"./ic_banxa.svg\": 625,\n\t\"./ic_binance.svg\": 626,\n\t\"./ic_binance_logo.svg\": 627,\n\t\"./ic_bondprotocol_arbitrum.svg\": 358,\n\t\"./ic_bsc.svg\": 628,\n\t\"./ic_bsc_96.svg\": 629,\n\t\"./ic_btc.b_24.svg\": 630,\n\t\"./ic_btc.b_40.svg\": 631,\n\t\"./ic_btc_24.svg\": 632,\n\t\"./ic_btc_40.svg\": 633,\n\t\"./ic_bungee.png\": 634,\n\t\"./ic_busd_24.svg\": 635,\n\t\"./ic_buy_glp.svg\": 636,\n\t\"./ic_bybit.svg\": 637,\n\t\"./ic_cash.png\": 638,\n\t\"./ic_cash.svg\": 639,\n\t\"./ic_checked.svg\": 359,\n\t\"./ic_coingecko_16.svg\": 360,\n\t\"./ic_coingecko_hover_16.svg\": 640,\n\t\"./ic_convert_down.svg\": 361,\n\t\"./ic_copy_16.svg\": 362,\n\t\"./ic_cost.svg\": 363,\n\t\"./ic_dai_24.svg\": 641,\n\t\"./ic_dai_40.svg\": 642,\n\t\"./ic_discord.svg\": 364,\n\t\"./ic_dodo.svg\": 643,\n\t\"./ic_eth_24.svg\": 644,\n\t\"./ic_eth_40.svg\": 645,\n\t\"./ic_firebird.png\": 646,\n\t\"./ic_frax_24.svg\": 647,\n\t\"./ic_frax_40.svg\": 648,\n\t\"./ic_github.svg\": 365,\n\t\"./ic_glp_24.svg\": 649,\n\t\"./ic_glp_40.svg\": 366,\n\t\"./ic_glp_arbitrum.svg\": 367,\n\t\"./ic_glp_avax.svg\": 299,\n\t\"./ic_glp_custom.svg\": 650,\n\t\"./ic_gm_arbitrum.svg\": 300,\n\t\"./ic_gm_avax.svg\": 301,\n\t\"./ic_gmx.svg\": 651,\n\t\"./ic_gmx_24.svg\": 652,\n\t\"./ic_gmx_30.svg\": 653,\n\t\"./ic_gmx_40.svg\": 368,\n\t\"./ic_gmx_64.svg\": 654,\n\t\"./ic_gmx_arbitrum.svg\": 369,\n\t\"./ic_gmx_avax.svg\": 302,\n\t\"./ic_gmx_big.svg\": 655,\n\t\"./ic_gmx_custom.svg\": 656,\n\t\"./ic_gmx_footer.svg\": 370,\n\t\"./ic_gmxv1flat.svg\": 371,\n\t\"./ic_hop.svg\": 657,\n\t\"./ic_huobi.svg\": 658,\n\t\"./ic_info.svg\": 659,\n\t\"./ic_kucoin.svg\": 660,\n\t\"./ic_kyberswap.svg\": 661,\n\t\"./ic_language24.svg\": 217,\n\t\"./ic_link_24.svg\": 662,\n\t\"./ic_link_40.svg\": 663,\n\t\"./ic_liquidity.svg\": 372,\n\t\"./ic_matcha.png\": 664,\n\t\"./ic_medium.svg\": 373,\n\t\"./ic_menu_dots.svg\": 665,\n\t\"./ic_metamask_16.svg\": 374,\n\t\"./ic_metamask_hover_16.svg\": 666,\n\t\"./ic_mim_24.svg\": 667,\n\t\"./ic_mim_40.svg\": 668,\n\t\"./ic_multichain.svg\": 669,\n\t\"./ic_new_link_16.svg\": 375,\n\t\"./ic_o3.png\": 670,\n\t\"./ic_odos.png\": 671,\n\t\"./ic_olympus.svg\": 672,\n\t\"./ic_olympus_arbitrum.svg\": 673,\n\t\"./ic_openocean.svg\": 674,\n\t\"./ic_paraswap.svg\": 675,\n\t\"./ic_selector_dropdowns.svg\": 676,\n\t\"./ic_settings_16.svg\": 303,\n\t\"./ic_settings_24.svg\": 677,\n\t\"./ic_sign in_16.svg\": 678,\n\t\"./ic_sign_out_16.svg\": 376,\n\t\"./ic_simpleswaps.svg\": 377,\n\t\"./ic_slingshot.svg\": 679,\n\t\"./ic_sol_24.svg\": 680,\n\t\"./ic_sol_40.svg\": 681,\n\t\"./ic_stats.svg\": 378,\n\t\"./ic_stats_big.svg\": 682,\n\t\"./ic_synapse.svg\": 683,\n\t\"./ic_tansak.svg\": 684,\n\t\"./ic_telegram.svg\": 379,\n\t\"./ic_tether_24.svg\": 685,\n\t\"./ic_tokens.svg\": 686,\n\t\"./ic_totaluser.svg\": 380,\n\t\"./ic_traderjoe_avax.png\": 381,\n\t\"./ic_trading.svg\": 382,\n\t\"./ic_transfer_avax.svg\": 687,\n\t\"./ic_twitter.svg\": 383,\n\t\"./ic_uni_24.svg\": 688,\n\t\"./ic_uni_40.svg\": 689,\n\t\"./ic_uni_arbitrum.svg\": 384,\n\t\"./ic_unidex.png\": 690,\n\t\"./ic_usdc.e_24.svg\": 691,\n\t\"./ic_usdc.e_40.svg\": 692,\n\t\"./ic_usdc_24.svg\": 693,\n\t\"./ic_usdc_40.svg\": 694,\n\t\"./ic_usdt_24.svg\": 695,\n\t\"./ic_usdt_40.svg\": 696,\n\t\"./ic_wallet_24.svg\": 385,\n\t\"./ic_wavax_24.svg\": 697,\n\t\"./ic_wavax_40.svg\": 698,\n\t\"./ic_wbtc_24.svg\": 699,\n\t\"./ic_wbtc_40.svg\": 700,\n\t\"./ic_weth_24.svg\": 701,\n\t\"./ic_weth_40.svg\": 702,\n\t\"./ic_yield_yak.png\": 703,\n\t\"./lg_arbitrum.svg\": 704,\n\t\"./logo_GMX.svg\": 176,\n\t\"./logo_GMX_small.svg\": 304,\n\t\"./long.svg\": 248,\n\t\"./metamask-text.svg\": 705,\n\t\"./metamask.png\": 386,\n\t\"./nansen_portfolio.svg\": 387,\n\t\"./page-not-found.svg\": 706,\n\t\"./position-share-bg.png\": 388,\n\t\"./search.svg\": 389,\n\t\"./short.svg\": 249,\n\t\"./swap.svg\": 250,\n\t\"./trading.jpg\": 707,\n\t\"./wallet-connect-text.svg\": 708,\n\t\"./walletconnect-circle-blue.svg\": 390,\n\t\"./wave-01.png\": 709,\n\t\"./wave-02.png\": 710\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 572;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAMAAACuYtZZAAAAZlBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+Vn2moAAAAInRSTlMABhQdEgsKKUeEstIZdbP/wlfRwTjgpJRm8fDhhaNlk3ZW+c569wAAAsRJREFUeAHs0AEBwEAMAjFaCv4lbz7+IiHSrJ+3I40vfVzOo72it3JaxHLxI4IIIogggggiiCDia9cMdx5FwSj8aw84Ug4qCoL96t7/Te68YL7GjrPpn0nsxCepLXrA8IQ3NoY/IULp5keLJ0YbHKM1/gfd3PQni7Ak6b6bXU9y8DigIz1+hx9JsvefKwITyfBsVCIOgrPkjlGp7WDiPJqPFWF6kvHpISgox6R+DXKyI35DpK6LJn6oCPEwW/rNw6bEZC4Hc+0iu/Irmttw7wDdKKB8bSKwaDRPF6bpANUM96/aTT2GR3dOEeLBY9p7ABY6vDJkGJakG1N24krVdp+h5qRRaceyNPptgfg0O8dBuiVKt/spRbTiAa8esP4qQjFIxABwnMq85GO2K3Hm+PBVogcCqWp8zAaIMrKTHAL1CUVE8sgDJk7YU+fXlYgrOiJVneBaxjBrS44d4LkC41SOFtClergALkPI7oQiJoYjD5HUeGFMzU/qGi9T0ZKZ+1IZFRMzY5mpZ2ctvLTMfWQaiogAwY4nFOG4HHuY8ILnhtqJCFSlMryvKnIv57DOWGlWKph+Dstii4h6r8BTiggvHnQ88iCBTv8kct2JUAylMtyIgsvirOstFKNrJdV9l4atkTOWRmRSOw9YORx5QHIo5HEnAjaVylhrf5WsZKy0WivSYkmtRQQ9RFM4oQiTmW76q3/WReChh/h8sPqdiI51Yi1/3L4eafZ1DFOOClBz/69+sIiQe93SbE4oAj5TmOOzWHj0pLc0KChOOxHI9EXpMpN0ul5pZWi2pZFl+LkHnJOMUyf9Z7m0bIP6blNY8D59xoZROETV88Wf/5T3Eb6dVm3wPp4r3sS5v/bFjL83KRtcIlRL6/EuYfkbRFzvLC8Rl4hLxCXiEnGJuET8A+HaTFa3F17bC68Np9uG02sL8rYF+T+idSlyqmiqtwAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/Anyswap.491d1f32.svg\";","export default __webpack_public_path__ + \"static/media/Artwork.a2d41b8c.svg\";","export default __webpack_public_path__ + \"static/media/Artwork_gmx.cc61d732.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAAoCAMAAABO8gGqAAABcVBMVEUAAAAoKDwnKTsnKTsnKTuGh5HJyc6urrWFhpA1Nkehoqrx8vO7vMF4eoVCRFRrbHhQUWARbooBqMcRcojKys////+vr7ZdX2zW19ry8vMUZIIBo8cBqMYBrMUUbYCTlJ0iN00BnsgAoscArMUDqbwiO0zl5ee8vcLX2NsNd50Bp8YBrcYAscQPgpHk5OYeRF8AmcgAo8cUaYEBssUAtsMdTl0Gh7gBmckPdpMPe5IBtsQIn6mgoalcXmtqa3gWVnoBlcoAmckDmMAlMUQiOUwDqr0Bu8MYYm4lL0QDicIBlMoAu8MDtrolM0MSYI0Bj8oFi7clMkQFpbMAv8EUd34iNU0Bi8sBkMsbTGgZXm8AwMIAxMEiPUwKb6gBi8wLeqcKl6EAv8IBxcEMl5YbRWkBhs0gPVYgRFUBwMIAycAdUlwGeLwBhswRY4wPh48Fuq8UVoQBgs0Azr8YaWwKbKkBzsAKqZ4ZS3IDfcQCxLcbXmRL8BeXAAAABHRSTlMAM7D2JaXEwgAAAp1JREFUeAHszjEBADAQArF7wL/myigDURA4OaWsg3OK+VCqCaeaSbkFF/xswQUfa2XRJa8OxNFNYF6gvUkz7u7u7u7u7m6f/1UqZArW/9wNhZ26kd+JZWvy/uMsjOPGQg8c247rOmHblrwm4a8UQ+K2HUswIp3JGhL0BOEmGRGHBzm6FYA29IXwUBCe5eMgUlAVQKUpLCouKTUvKFyaBO4KwCdBSSoqyMrgWV7wcUGK/VFeUZmpqq4xJej4SLIWSlpSIbGjgm6KBJE6eGgxVo/TSzRUFDU2NbeYEvRpUT39OCE7h9sKpJVHBblU8x0hh0a0tVd0dFZ1dfcYFrRCgp6sy6QRCeb0liNBligQwoXndSxEb19FPxtoHhwyJDg8goy6lAofNxyH7mUk6Ftqy5Eg1pJ6zoix8YnJKTY90z07ZzokQvepVa5xyg0mRs6hQ4KIpdJDzC8s9hXCtXRwaXnFtGDeX9MCHryNkaD6Oh4VrBcYFGJ1bXxdXjc2Z7e2jQjWlyk8lAC4q1v6+IgEVSjCgjmBJJlmZ3dvcR+rg6XDo2MzIaG6LGhaS/3zSTAIBaaJFrhePkuxgJPTtbOgPL+4vDIqWKYap1CGUhoPCbIUPBBaEM+SWu4Livv1ze7eLVPc3R89PBoQ1MvDW9UMetifpF1OgtKJBFPBCWIJPdHs6fn0hWleLx/eDAi6tgK6iYQ2COOQIBBHQT0iNb85HbD3j2fYg30VcBY3D8IefPj8MprieNAsikeC2sbTAXboRJG5+v54Pl0bn5BncVf37MXlw8/vPwrWkUdBXQrXrVZEKZDa8DDFyLAO92r0RCmA6/8rr0iFhKCWNjAEgWmwsmq0RY0XjDpw1IGjDhx14KAfwBz0Q8CDfhB90E9DAACtALoxSNWoNwAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAYAAACZvCZrAAAFLElEQVR4Ae3aBWwcRxTG8QjKQqsUEtOJpTJzw+U2zMmGmZlJVIYwYznMya0ZjslU58Jo2Nu43L7Os2ej7eiMMt+30s8ws+a7f2Zn044PIrpbeFDonPAA4EHhbnsceDBJeEC4P2EBwAOyBZ0rIiFrkWSdAAAgm/BgO1kKdeUAAFhJdJaBUCYBABAIAKhzIAAAEAgAQCAAAIEAAAQCABAIAEAg8tcEHIExrqhPc/ui26Pt78wBAAIRmRXs4h3pIe9wH3lGBLa30V80AAJx6aszT0dXHFt+bslxZ+H841Q49xTlzzpDeTOcFJmWHM2dlr4/PD1zBq8a7qwgluU7vMP95B4cINfAMLlGFfbm8QbmELoIVa1Q2qvzANCAgbjyyekuRYuPUNHCY1Q4/wQVzLHioFNkajKFJ6dRaEI6BcdlkX9MDvlHe5zBCcGR/LHuoSE9R8Qhu18eZfYuKIuuvdnQT9QVVHl0qWK+izoP0IAQiPOrTmpFC49TwTyOw2nKm3mW8qaLOExJqYhDcEKGiEO2CEMO+TQ3eYd7yTMsQK7BQZ9reO7MrL4ch0JKf7+I0j88vx+BgDYGlxiFi07PLFygr8ifp888tyKzS8ESV5eCha4ukRkuLTzR9YV/tMvvG+khD8dhqIjDoBDl9I9QVp98yvyI43CO0t45Tym9LlJG72saAgEJBpuUvOfg00IrcgaGjOz+uZRZEYdfKO09jsMFSu51iZJ7XKWzXa6VucbecrSAQIwU9gtOYXu8c+TYcuV8thz7GoBA1ENgftSR1a/gQMaHHIcopb4t4tDzEundOQ7X6czrt4SSA80YiPaCT46fF3T5mo/98T6/7Xxd4iMqPI0HGyR8IMx9W3sbO74pMw/+UOt/+dP7np+Z+vZFEYfLIg7X6OyblXE49UoJnXzJoAYOhE9wxuGLEwinHFPvqsyU4yvifH6/YP/ZOQyG/Fx4wAECEdvxDZk719bpCZH24TVN78ZxuEGnXyumUy+X0skXY3TipdsNvYLwC3ocfiUQDiUCqgNCWQ0rFHUOqwjAJYa5Y+15EQiK7V6/oi4fl/xOsXb6NV41lJKza7l2ppvZO7yC2jfTJUbvGs6fqczLz48N0LgAgeDLitjezSPN3eu/4FUEu/3Tzjo9KU6/VrrjxAsmnXih/EAz3+acWcP5vesRCA0POEjcQFgrB46DZefasl/376n10ppXDMeeLT9/9KnfKX3gH45mDEQXZf9B9YWcdyifv31NMQFIvEDk6O1tYVCVmfs2abVeRfT4q8vhx/887xxIzRkIdl6Iqk96+X6ZoKufv4o9C6dg4HYnJPQKIrZjrd+KgrqS4PfN3es+55DU5XM2cyB6225TjpRzM2QcDOFp9fPbboF+JDnl2Ew82CChA8GXEhyD6vAt0NiejTN4v6IVBMIa99P/D12Jg/r5z9vONay9BwDc5ty7cYUSBUNZSdjfdpp7NnzOG5vGd9u6sPLvxNt7NizncQ5JC/pFta8yLvE3KR3S/QAIhE1sp7zUkMx9WzTewJTv14m1wdmiKYEAQCBquNSwrxSMnet28DhvVJoyHvb5qt43dnxt8KVIGwoEAALBYns3zLQ/4dX/L1Exv3PdAXVlwe/zOM+3ojgwzbqrAYBA1IK5a50uVwa2SwUAQCDkSqFyRbDWj180AAIBAAgEACAQANDwEAgAQCAAAIEAAATiAdsgAMADViAeFJKsCQAA2YQHORB3cynkAFYSAFg5JMkm3N2ODxmJB3kQABLeg1Yc/gOptOvB5Z4VkgAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/Hop.4b77c9e3.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAAoCAMAAABO8gGqAAACalBMVEUAAAAoKDwnKTsnKTsnKTtdPWjSaM2RTpd9SIXQZM/PYtJbOmttS2mZX4m7bqLce7vbeb7ad7/ZdcK2ZKqUVZJoQm8yLURxQ3zNX9TCWc0xLEWPXIHef7fdfrrce7zZdsDZdMLXccTWcMfUbMjUa8rSaMyRT5c8ME7NXtTMXNfKWdmgS7SlZJHdfbrberzbeL/Yc8PWb8fUbMnTasvSZ8zRZc/PY9HOYdOOSpuOSZ3KWNrJVtzHU95tOoRQUWA1NkcyLkOBUXyBUX1qRm1TPF1TO15TOl5+SoKTUpa9X7vRZdDPYtHOYNTMXdXLW9jJV9rIVd3GUt/GUOK6Stk7LVGTlJ1CRFRdX2xcXmvKys+8vcJHNFeQS5vMXNbLWtnJV9vGUuDFT+LDTOTCSueaP73////x8vOGh5FQNWOrTr7IVN7GUeDFT+PDS+XCSejARuq/RO1fMn6ab3DMjYaKQqPETuPDS+bBSOjAReq/Q+29QO+NN7l4eoXW19p3eYTk5OaurrWgoanJyc67vMGFhpCabm/zpZmNZ2qIPqbBSOm/Reu+Q+68P++7PfJnMIyhoqry8vPl5edrbHivr7bX2NtBOEfypJhNQEyGOqq+Qu6pPNlVL3VMLWpaSFJyV17AhoHZlY00MUEwK0apO9q7PPRnMI1NQE3MjYdDLF64OPalNOFzV15vL5ubMNhAOEflnJJ/X2NDMVdtP3wvLELLjYaxSs7JV92XTaPmnZPmnZK/hYGMZmlmT1hZR1J/X2SZbm+mQsyORqLnnZPYlIyAX2TmnJI0K0tZM3TalY3NjYfAhYGzfnundnZnUFiYWxnSAAAABHRSTlMAM7D2JaXEwgAAA5dJREFUeAHszgMBBFEUAMCns421jf7ptsbXJBgAJBZFMSEAsiiMEUiURsCiNAZRnAu6oNrB1XqjdnC72x9UCx5P58v1dn88X2+Rz/77+6sV9PwgvEZxkmZ5UVZV3bSdWsF+GKdoThYZGhmbmJqZW1haWdvYUsUiO3vqONDB0cnZxdXN3cPTy9vH188/IDAoOARqRagdiAoLDcdtnH0EGNhhykRGUTuTRMfExsUHJCQmJadABEJTIyFUGm7j0lPBIAqLAyOpn4szMrOyc3Lz8gsKUR2YiltLKFSOhg4sKkawpUpKy8orKquqAbSVBY7kMBBFBf9c9ikqllsMlZxghc09sBzcYWZeZmY81JaTnnQ0jC9UJunFeFiw3mBuNCXQ1GJutfUBwXoHQlAHvE63K8W2QfJVrqjX7XY8QA9JQBpFlV4zbyZ1zMmCwyOjGHDz1u07d+/dPyQYMkcRcxuoMcexyOoDghwAigmJHxPZFJYtUex7MFEqQUsji0IKowag/IgoZQJSDsly/UTBB2Nj4xgwMTk1PbPfOy0SuszwmNNcVcFyCBjmoF+HHBpIfaV9C/fk2AyAdpU1XAMDZ4REAhvpYg7UczfyTxKcnZsfW1hEydLyymo5v/ZBwKwBMBOsPHD9U6kTKUBnjW6mRSAp52D5lsXOVAhqDorAFdViFPLHC66NOdYrhhubW6VgZoSU2YXItcK+IJWC2EczK5ehDwpSg4W+oLy9UjDzu0LjJMHtsbERMVyojPLOLnBwDrpHiKo9eFAwjKLQZZgDgsRkNCqCKAVja3JwvODeWMHDR6hyUDBhNvnMSwpB7XOIx0+eVgRlPgVSrDg4IFgEVcGspSXILGqt07eZUbEbcc+z7cXjBZGx3+74nEEE/Y5EkYfnL16CuH+SKE6Bmq9g/QTwkoFgKpnwqoLKrb4uWxjuaUCfKIh5sXs15nj95u279+8/vP04WxVE4AS1ZcFqJ+iIDfDpxmfUOSdGLdOAjmv9mmEpKJns+xx7A0Go1NowsxLE3OiyOlFw78vY2Ndv34t+LJ5XKDCq8lFJovoLxSQGwo+fGKC98u0ZaVHNUHkGPI3yLcQ1CIpIndyD+CZS24ujv8ZKfuMELBMuSSHKdNaz+M/I2F8Aa6Pzrh/X/20vXrMgNahJrcg7q+DiK+mzM5OkBpdEpxlnqfd/xLdmzu4sGjLdzlEHjjpw1IGDfgBz0A8BD/pB9EE/DQEAJqnikobhSecAAAAASUVORK5CYII=\"","export default __webpack_public_path__ + \"static/media/Hop_dark.423942af.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAMAAACuYtZZAAABmFBMVEUAAAD///////////////////////+PcOZ/UON5R+KNT+iFQeWSYOi4hfWIP+aRP+iIP+WUP+ibPeqSPOiiauz///////////////95VON4U+O3N/C1LO9+WOL///////9yS+F4SeO/JvK+IvF4SOP///////////////9+WOWHVeXRQPbKHvTRO/b///////////+pOOyxKu6+KfG7JvCxKu+wRPH///////////////////////////////////+qL+21J+/CIvLTS/PCIPK2J++sMuz///////////+eT+2iOOu3QfG8MPDNQPbUH/beGff1Zv/gGPjVIfXNNvS+MvOiNuv///////96SOKHQeaZQ+noMvrvDfv3A/3vC/vmRPmHP+V6R+J7SOKIQuaXQefvDfz3Bf2ZQeehNuuzPu27MPDUHfbeG/fTIfWiNuurMuy2J/DBIPGtQO2wKu68KPGwKe7NKvXKHvR3SOJ4SOJ3UuK/SfG0Ku+7QfF7V+OUPuidPeqIQOaRPueQP+eQT+iFQOV6R+MNOs0rAAAAhnRSTlMABhQdEgsKKXb/V/84Gf+z/7OF4SkpZYRWdnVmwVeT////wv//lIU4s1dXOMI44MLSdv+U0v9H4dFHV6PBGbJ10v/gKf//o/DxZkekR3Y4lIUZk4VHZrN2pPHwdjiz/8Ip8fDS4Xaz4XazV3WUhYWkpP//V/+z/2bB//+FOMJHZrKF/8KzVzMrutwAAANDSURBVHgB7NDFAQRBCERRfHxa8091PYK9Ur8Fzo+IRdMnTMRqHslzUyaxQGFC6oHClfQ90f8QgAAEIACxAOLTuq2AeLcfOyDO67dcZ2qI8y6/rdQzM8TV+m/rYz65LYvt9nkgju7mDWSXp2Q5JdsfxkqscmunzMzMzPjqf4+isrv3iQq6yZzfQlf4W5gZZhkrYRHlFRoqqyo1VVckZGuQmlm6ImrrNNQ31GtqrP0ZtZDbYGeQl6yIpmYNLa1tmpqbfkYdV3WeU9JnxF9//6Pp3//+T45mfdUJDsJkRDkTmMlEPjClqhj59g4iYcqOIK8QmBnkDSiW24MalnoRnV3dPQp6evv6k6MW5mWRBFrUOdmY8ui6GMYF6ccUhQyAox+5HvoSwMYsEaiy50ZYSLeIgcGh4ZHRMYDxicmp6aGZgaSodBHbDUmYdYAGOQsCURBxGn4OgEUZIk+SrTmAjEcrhypBJADkHLIUi5hfWFT90vLK6pqixfWNpLCYi1AtiwINzUL2tjZcF8C2iTIOiWCEcxgXHEk5pqyRzGguxSI2t7aLInZ2d5YU7W1tQnKz52jJS5p4x6NpL7yJANNH9H0E4BFQy6GI/8J8hw1quwTUQjfdW2P/4HDq6Bhg/Phk6vDgNGlrSCFVP0urYQ6ZmmOB4k2EhXOcW1kSoU9VqjHuIgaStourWiblh+XZ+YU+LC/Oz5LXAs7q8c2qDxayLyL0JiERqI0x0EtjDgooFNss5SIur641Xd9cJkcjX1LH1ZA8h3bGFxE8BhYqEVxfKhBliHwXZBQULfIUi6hu1nB7d6upufpnNIehWWa2ozruCoizX0W4oSGMMFIisEYYvjpQYxI1WKBAYIiO0JNpfmLf/3hiP9QmZIWLiBGXxDJC9lWEpKrFkdFFmkXM5qjCI4ooj/F3OCfT/I54fNTw9Pyi6fXxl0vjnRwvwRT9K54R7H3EjL2T/WdDoRve0AhlNTbwEmGOJZ42opr8UB6YaWqGslqaCA7MqFuLuxuw4QmIkTJUJ2ruoYEns3vqD/XB29a2VjA9OpzfPjqcPzrBgxWMBsRoQIwGxGhAjAYEK4geXUwGXV44urwQuuB0dMEpdAny6BJkAMRHfxzYlb9eAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/Synapse.4974674c.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAMAAACuYtZZAAAAn1BMVEUAAAD////////////////////////1vjzzuzPzui/yvDTyujD////////////////2xE3/////////////////1nrzuzH////////////////zvTb1wELzvDL0wEbyvDb////////////////////////0uzDzuzHzuy/////////////////////////////0vDLyujD////////1wD3k7xDPAAAANXRSTlMABhQdEgsKZqT/o/EpRzgZOIX/wcIZ0nbx4JSEScJFiVeEk6NlsvbR8vDS4dFmpLPB8FZ1ZcrSjpcAAAKDSURBVHgB7NABAcBQFAFAD/SPvPX4LsIBRz2PB5ycPi7Wge7UhNJpBHV+i1jEIr527aipUR8IAPjTP4KSpGxigaoK0P49AFDv7vt/ttvNmpnrVfrgE7TZmcBOlIf8Jlkk5hsQNwHCRRTfBgjnEKNEgCAHkrhyCHJgieuGYAeWuGYIdri7uTsjkUgKRamW6kIh2GEjNmckUnBh0ECCvUyI+y07CJbY3n8NkUkps7wQQtndRUKQBDuQxIwDQki67UBdao14eESJpw1ebpFg84SX55dZiJJulWtJbWopKGRtqoTqSJXIxlSaOxtTl8LF/mDqZOkQD/H/jzwtXuNXngzPP+KXOYhDroWAFNuh7WwONNQGOttTJqEBa6HVrrPHzgYzPbifj0uGIIeYJdAhZgl0iE8lUhiMMUWOHAxBF91bGv6EfbaljLQUpK6kYOdIwzf0jJ5ArgRiy3VyHqKz1vZQe4iee+nFqt2YE4RwVdSiTmEFxbRjF4z8bS1LY8sO55fG6BCoTR5ClAeAwoBEiPETQvPoKTIYDEVbrKFYvlOxjKhYvp8vlqKzBMGNIUqwaZp2DkIyhJ8GfipxLByC68PH5+vzg+vEPIQ9gbAdZdkRhOBFIpRCp9KnS4egOkkS5MAVcx5CwXQCMVA2HENMrXuftpPQueEH01X8iU0S7BBHMzOiqaqqafPkGIJaJX8aOIZI8vaX3Bf02yOYvdy3vV48hJf47R3mvzXyt0T8CyF2AGAzGP+GEMpSr1sOZY/ppFf2GR6Jb4T6cpRS+NBqdRszUdiq8w5h89Y7hO18cggQ4R88sxEgAkSACBABIkD855JwmCwcL+Tjhf7AaThwGo4g8xHkP7gaLtKObnJaAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/bitkeep.8f402cf3.svg\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/btn_big_arbitrum.ff6ad480.png\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAf8AAAB/CAMAAADW6DvgAAABF1BMVEUbIDIeITUbHDAXGCwhGi2HLjhhJjNhJzNOIzJPIzI8HzBYJjNrKDRqKDRYJTM7Hy+QMDhGITGsNTwqHC51KjWaMTqPMDkzHi8eIDYbHDBFITB0KjYeITaiMzt+LDceITajMzt9LDdCIDCZMTo4HzA+IDBLKDmBMT15LzuuOD+TND05JjhRIzJyKjVwKjU2Hi+RMDgyHi8oIzdSIzJUKTp7LDYjGy5PJDKeMjuELThAIDBjJjSbMjqKLzg5HzBUJDJ5LDYlGy5hJzSSMDkfGSxqKDUpHC5EITEnGy5VJDMcGS02HS9DIDFAIDFFITFDIDAsHC4eITYcHzMaGy8TFiMeITUAAAASFiIcHzJlLDowJDduLjpCJjgHX8VeAAAAWXRSTlM4+O////////////////////////////+18P//+f/////////////////////////////////////////////////////////////////////6vvJR+SRTwHfs7R4AAA1sSURBVHgB7d2Hmuo6lgVgute2jKRNkLYoTcPgQ01NzjnnnKdzvO//HAOc2+jjkGRjwFT5vzmHtSwkWTaDwTe+iZOowJYqkY2GWhP2KIMvkLGsRuMJnf9Hm6lDiwq/UeBGRDOPBfUwGgh+bfZCuEY08ZvfGPzCt3Ca1vhMOCLL3DrCl5zBUWLUyRZYBVpMI54i/yRa5iHdOn+wnzmYqcGVvjX4xcx/OWszwldacIQxOCM6xVwOJ0gAWr6Uy4rQKpvyv6WoeDRHJoUrKEW4zuATTiOFrawhIFobT/4hJOdbELFFL36N0C6aeu9XEXdgFJcTXCYa1xB2N8zfCoCsISAq5doouXFKcTmfvPgNg5aRVZZwJ+SUGkecZwyuY4LcLH/GPlERR8hY6TYHOXKV31J4dqKVGgpOU4RrqZJuk390+JJTdBB+sNT6JCfl//zEspoTjmNcT8IQtChepeX8FQ4RGyQ0rlhuMMkhv7ESvBfR8miCI1SLE1tvkO+XLuZPFse4INiiYQjmJpPcuJxN1/E7vCtGqcMpYWhzZfvSav5acJRUJUDD10ITcIv8zcwCxuD9Icf7U8KocA2aTCbjclS8+c+Q7Zd/JeVfOzR+e5kpQdJq/noa8Y6R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\"","export default __webpack_public_path__ + \"static/media/btn_big_bsc.5e5ec82b.png\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/btn_big_purchasegmx.86c08dee.svg\";","export default __webpack_public_path__ + \"static/media/buy_gmx_bond.67f59201.svg\";","export default __webpack_public_path__ + \"static/media/buy_transfer_eth.fd9264bc.svg\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/cross.4f70d802.svg\";","export default __webpack_public_path__ + \"static/media/flag_de.67ea3e1e.svg\";","export default __webpack_public_path__ + \"static/media/flag_en.ad3aa4f8.svg\";","export default __webpack_public_path__ + \"static/media/flag_es.284fc0d7.svg\";","export default __webpack_public_path__ + \"static/media/flag_fr.d7acb86a.svg\";","export default __webpack_public_path__ + \"static/media/flag_ja.fdbc8bce.svg\";","export default __webpack_public_path__ + \"static/media/flag_ko.e814d54a.svg\";","export default __webpack_public_path__ + \"static/media/flag_ru.c789ea20.svg\";","export default __webpack_public_path__ + \"static/media/flag_zh.814b7a34.svg\";","export default __webpack_public_path__ + \"static/media/gateio.14235216.svg\";","export default __webpack_public_path__ + \"static/media/glp_icon.ef02d046.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABPCAQAAAC3gKgqAAADyUlEQVR4Ae3BfWhVdQDH4e/Z3Uvb2lZukS5sOEI3UHS95xbBqg2iQmcvpCRZZClYkBoWaAvpD0ncHxVCFjE0iyE6eyFqK6K3RRTaiy1ptaXljDnL29h2t7v7iZGeTuuen9vd7r3nynke+Xw+n8/n800EWToXUMKrVCnVkcELwPsUKbWxlH5GbcZS6mI23/OPk9QqVZHNTv7VxiVKTawkhFMDAaUeKujkv4LUKdWQTzP/9zWlSi2sI0w0O8hU6qCSbqIbYLlSBYW04O4w5UoFWNQTwWQ3OfI+aujFbIhV8jqKaePsuqiQlxGggfHZT768iyX8xfiMsF5eRSnfMn7dVMmLyOJlJqaFafIe7mOQiYnwFJa8hXl0MHG91MhLyKWJ2LRRLO/gEYaJ1TYC8gau5iixC7JIXsAFvI1ZK3sxOcAsJR9PEMGki/mUcBCTF8lUcnEDv2MyxCpJoo4g7vpZqmTiIj7EbDc5kkSABkzaKVOykMYzmP1AuU6jmM8x2UW2koNb+AOTAe6VA7WcxN0QDysZmMkXmO0gUw5YbMakkwVKNNJ5DrODzNIYFPEBJs3kKbG4iz5MgixWFFzPcdyFeUyJxGV8h9lWAoqKxxnB3TEWKlE4j0bMPmOGbAQIyEYBb2DSQqESg/sZxKSXm+XAA6yWA1fQhbsIm5QIzOMnzOqxZKOCI3RzrRxYzRDuTnCj4o3z2YNZC4Wykc9+Rr3LNNnI4TVMPmGG4otHCWNyjIVyYB1hRkXYKAfKOYzJs6QpfriGXzEJs1YOVNLNGT1Uy4HlDODuFLcrXriQdzDbR55sFNKK00dcLBtZvITJV5QoPthIBJOfmS8bFk8z1hbSZKOUbzDZTqamHtX0YBLiQTlQQy9j/cmtcuAO+nDXzzJNNabzMWaNZMtGMW1E8yUzZSOdBkzaKdNUIo0tmB1itmwE2Iab58mQjWLaMNlJtqYOt3EKkyB3yoHFBHHTx91yoJZe3IV4SONi6awo0V5dLpNf1KiQLI1C6bpHZXJ3SIusDp2GpXo9qXS56VKddUCTRwbbmWqvkCUbRbRiso88TR7L6GeqDbJCDlRxHHdh1mqymEM78dDBXDmwgRHc/cZ1mgyy2UW8NJErGwW8icl7FCp2rCREvAyzRg5cyRHcRdikWLGATuLpKFfJgTUM4+4ENykW5NNMvL1FgWzk0oTJp0zXxLGeMPE2wgY5MJcfMdlKQBNDJT0kQi/VcmAFIdz1s0Qu0hVdjpoV0fhZik1Al2JZ6IzXVag5iii6dOXKq7Dk8/l8Pp/Pd676GwYUP6Kwt1/bAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/gmx-logo-final-white.b7833ed6.png\";","export default __webpack_public_path__ + \"static/media/gmx-logo-final.0b59e423.png\";","export default __webpack_public_path__ + \"static/media/gmx-logo-glow.83c5aea5.png\";","export default __webpack_public_path__ + \"static/media/gmx_logo.9b999610.svg\";","export default __webpack_public_path__ + \"static/media/graphite-01.6f3526cd.png\";","export default __webpack_public_path__ + \"static/media/ic-communityproject.d195d704.svg\";","export default __webpack_public_path__ + \"static/media/ic_1inch.4273e7f6.svg\";","export default __webpack_public_path__ + \"static/media/ic_across.647e2187.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_16.f4c1a9fe.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_hover_16.d779b479.svg\";","export default __webpack_public_path__ + \"static/media/ic_arrowleft16.9d2319ed.svg\";","export default __webpack_public_path__ + \"static/media/ic_arrowright16.25e0dd13.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_16.90aca01d.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_testnet_16.32340c73.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_testnet_96.0ec8b0e8.svg\";","export default __webpack_public_path__ + \"static/media/ic_avax_24.43583fc4.svg\";","export default __webpack_public_path__ + \"static/media/ic_avax_30.403cd87e.svg\";","export default __webpack_public_path__ + \"static/media/ic_avax_40.ba220dde.svg\";","export default __webpack_public_path__ + \"static/media/ic_banxa.06412144.svg\";","export default __webpack_public_path__ + \"static/media/ic_binance.60a43ade.svg\";","export default __webpack_public_path__ + \"static/media/ic_binance_logo.46794a16.svg\";","export default __webpack_public_path__ + \"static/media/ic_bsc.8de996f1.svg\";","export default __webpack_public_path__ + \"static/media/ic_bsc_96.79853d5a.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc.b_24.a8f56d16.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc.b_40.1560513c.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc_24.f992927a.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc_40.1560513c.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAIAAABL1vtsAAAAuElEQVR4AWMYcWAUMMIAGxsbCdr+///PwcEBYTc0NPz69es/GFy9etXS0hK7HmsOhTdy9a/k6oAMTCOAXAcHByB7PxgAGcJ64j47YoEIyIAa8VauHoJeyNagGwEGELa2tjZQCsjw3hoNMcJnZyzUiHdyDTAjaiFGAFVjGgE0F2rEFoQRCI8A9QP9AmQgOxjofqAeNCMgHvHeFoPwCCawsbEBhhwkCL9//45uBPEAGIvAuByhaXkUAABgd3QJTKl1YwAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/ic_busd_24.2432ce58.svg\";","export default __webpack_public_path__ + \"static/media/ic_buy_glp.b4c18be7.svg\";","export default __webpack_public_path__ + \"static/media/ic_bybit.2cc19c99.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAsCAYAAAAq/ZsdAAAFI0lEQVR4Ac1ZA5AsSRCd2FkMvm2cbdu2bdu2bdt3obN9X6tGrW3vxv6x509e5dwtukZdXYt5EW9ZNf1eZFZmVbVJL8yyfJpZlT2UYIw4VzrVlC3IJXINChNhriLXZJOh56gon4Ahbw5RHs8SO+JRwrmmbEMuIfuYiRzgNYNzcK4pG5Gryk9j+vCkGs7JGgOiqYdjj7MEzj/OErrfCHHuBBiS9slR5XpMpXTEMZtf037hcdYgiPAEe3gHU7bghBkw43hrsNWoGZw77iLNqnqWWVW+yVElNR1xDG2mZ51gCRxg1BDOHT8nkrQFFfgLpVvP+rmorRUe6ekJPtrTU3P6Lt7PDRh6Ydy85CjSlVRkxKxIusr2TrXVMBq3NnVtOGq2b5An1TBdxyfFiPwRFbmep/cc1FCvMfRgTzfY/yqLzP6iehJTTVEW5SqyRA3FU0zUEP7dUkRiW13W0X3EIu/Tx9kCDyTjsZbABWNvRi1ckUuUOr0phpxdTuDGzg742+MG4vdrDLWEQvG/v9DfB4c01ofiG9WysiWmCUF5+cxcVaniMYNrxhGNgl6scnpg578anbsfMHgKjcj+oznmfcesyKuoyCC/GT784vDBwnfqk66hY63Bv+g6WiFuRpVf5dyrwT8eD/DCR/3fWBeDZauaYaMHW1IVBwfl9SLV7HTeUylGJxnQ5Cq3B9a4fEA8G6CSeu4Pac2cQP7jrNXVsOPpPelK+Ff8JbyoaBoVOMBbzW6iRYAFVjhrURmsLGxFwRre0xiDy6q1fzuAeKGgSIVDNvKkK+Uq19rKJdKLQzsAHmI5ZmEpIbBVcReK1c0tV3fB8kebMvUnB5rS1W+ouBgl8PKk5iZg8fWAH0Vy07a6DPbbySFsCrc193JFh+k9qVDkBHixnUmxNNx6VTesvL8ZRYuZov2mnREqnHYsmv0A3/ZriwHLw0kILOuI3o2rioUi6WFtqLKJ8Pv1LtCLCk9qYzP/qYZdj+7Xu4H9KjHdiHIP00S5iUVgb+KCL3rjJVkXvNHkppaXtsCOp/bqPmIcawudwDRS5S9RMxutaxsWdHZFDN7tikGxEzKiLwQJhrYhPbDpg208Z6YWxpD0i4ihXMojSChB2JC5x1ti8OfgUFNNxEvt2jl7Egcs+LSexxBoduc0Ql4RQxsVtukuy9hUGWAkNWMOI0GYsqacwxATJbMitxk1YysqgwOJl6fX4BZIA/ydHTPr92o4YoEPhXKvJUy5P40amlZUmZBij7XEv6dMQW80s6Gt3u3kv1CxhT4wIUQu4Dcr7dCIbfYPVTAszYnEIsAAK6PGzFEkPNSLeOkYMvS3ETP2deWwB3GwZriPEGw0dyODsPDdeqNXXiv+v2OTndxbnj9rYC/iRBHxMs2PxAqHnLu6DnY5vk/sDo8K/I23uVpKCRxJwsNCvhvgiUxyM5uXdMKitxoMmUHiBYspDlWdkavIMs8WaObq6gRBuAnFNYELvYVJQexD+HeMJptmx5Eobc6tMPeLWjhyrk/IEHNiVd5BU3qiNefvGq6ewy7+Y6kJPNhtWdIFtnVlsNFDicdwYUOIPEJ2zFXjrx8bKMO5RC5KGqFfqwzdyyE3+bQN8ktVmPldNWxyeyvsv71T2AxS6D4PK0q6D79+d22N/vyRqIBYjionAvohf6d7wIuXReJGkGcuGF8zqMWYCzZKlqBTTIg4UcNQdISBR2GBF1rCxGejhjF/S4cVhj9aYlHBZ/Lf1/Gn4QFxc+PIdK9a/gVaRiAcqhHzNAAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/ic_cash.21569a1d.svg\";","export default __webpack_public_path__ + \"static/media/ic_coingecko_hover_16.ef20d202.svg\";","export default __webpack_public_path__ + \"static/media/ic_dai_24.bafa9da6.svg\";","export default __webpack_public_path__ + \"static/media/ic_dai_40.6f901476.svg\";","export default __webpack_public_path__ + \"static/media/ic_dodo.56802cbe.svg\";","export default __webpack_public_path__ + \"static/media/ic_eth_24.6b1d8a1d.svg\";","export default __webpack_public_path__ + \"static/media/ic_eth_40.5e255508.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAqCAYAAADBNhlmAAAD8ElEQVR4AWJwL/AZ1HhkOfDvdtP/g9aBPydo/f+91XTGoHTgzz6g4xYb/h90Ufw6Xyn9Y5UaoDt7anckCQM4vrzd73CM2DbHtm3btm3but/9IHO3DtZRd+fZd6rrTE1SqU5najzn4vekUen+VwwQ9ndD+Zn90wr8e3ELZBc2g7BHg5WffEKB2fnNIBN2aV4pP/pEAjNzW0BW2q6llB86GgYKaNx7DczMRnFIaauWUb6vHpiZ0wLSRcv7C8zMbAWitFnHKN9zYnWvP6sVhEPG9xOYmd4KRGmDjrURBd51IiqBM1rxOLjvgncamJnaBkRpnR5LTWpP4uUa5dsuhA3ITmmLZqahwPU6tN/5jgMno7DVeiCXpTV6QCfEJ5GXa5VvujDqGGh8aa0eK99yYe8kMD2xHWTFlQYK2oZPAPDFl8VVeuAloQnI3irwh8AX36QnoLjlBkXVY6l9KxqTrrsx8bpbfOPA9Nh2+HNqNxSXGF9CB19aUTuebGcsUyZddWNvHjgG3XqLjHWh/czB/19mguJiY0Nk0tIVD/ZmgSNR4AKjqvSo9udK1y0uNMLrkC55elyuH6kcN6qzvTDXBJR5rNTIDtXZF+eboBHpohfhDRza1VaYbQJVc3qkhncg6qF4LDGXJZ33Ylx3cWGmGRpJDe1UDaOPZzpSmGUCxuyXged4A6eZgTKdlhpM4vgUZphBiXTGpx4Im774ijrQFAvUkxrYxR9HTZwlna4ESme8u5jAVD/6pNIJ3/PCJAvUSvXnjWMVJlsAoSYtnfRXAtEyE/h7327mxPnJNsiPt0J+QgUaV+INyk+0gKx6vVBrqhUqN45SYJINFI8GID/W+go1hlN+nBVPFi+jy1qFBQ4gN5R4LKAQGEc7DgeBCjyMAkdbsX+HmxXi+BXlyY7BqMkLR4PT5BtAJh5VCox2w7+DzSAe7IkUDga/l5fzI23Y7zG1W49ffpQNKKMJK7qhFAJ/i2hG/R7uhvwwmyLugOE2qAYzLd8yY0bYoJawww/ioeA6JhBHBjWQG2Jn/BbSAFfcUDvUQ41TuCHEA0FqDB3oR4ED7bRBdq44eXxusDoytnqbuC8EwpYAiPtDKoE+zYpcfwfU4Asc4ACaHaEnTcZWbxP3hrCGb3W/ebSQ6+sgeOKwXD8HNEImTW4AcVcYxN1Yw0Asl3AClnTyB/ZxAC8ciLz2h4VfHdoNuZgT/os6f+IOjDuBkahP3BHBuD9R/2LX/UqWeaGJgZIcEeshbkS33PYIZDclv1MLfOf+C7ugkfxwLwhbo/DRfkT/L4BCgsqELVEQNpO4jxSII31uqCVsisEn9TfEfx4UhggbYtAr/yd5AbrkAiTtrDhJAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/ic_frax_24.7349c478.svg\";","export default __webpack_public_path__ + \"static/media/ic_frax_40.1e127166.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_24.eff381d9.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_custom.11dd75db.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx.bf8fb0b1.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_24.2b59d7e0.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_30.375de394.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_64.f4caeaad.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_big.a0a74216.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_custom.fd35b66a.svg\";","export default __webpack_public_path__ + \"static/media/ic_hop.0f4a98a0.svg\";","export default __webpack_public_path__ + \"static/media/ic_huobi.22fdcff5.svg\";","export default __webpack_public_path__ + \"static/media/ic_info.f334ee0a.svg\";","export default __webpack_public_path__ + \"static/media/ic_kucoin.d4526877.svg\";","export default __webpack_public_path__ + \"static/media/ic_kyberswap.6fe90e35.svg\";","export default __webpack_public_path__ + \"static/media/ic_link_24.0d641e52.svg\";","export default __webpack_public_path__ + \"static/media/ic_link_40.4bb3a048.svg\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/ic_menu_dots.ba19dad8.svg\";","export default __webpack_public_path__ + \"static/media/ic_metamask_hover_16.aa3dce32.svg\";","export default __webpack_public_path__ + \"static/media/ic_mim_24.b6a1708c.svg\";","export default __webpack_public_path__ + \"static/media/ic_mim_40.42c8b575.svg\";","export default __webpack_public_path__ + \"static/media/ic_multichain.e577f4fa.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAPCAYAAAAPr1RWAAAABHNCSVQICAgIfAhkiAAAA5ZJREFUOE+NVGtsU2UYfr9zWfv10K4XVrvaG0zpBgw7NsnMWJxENEJinCSQIMEgMQYJl2QzEf5pjJIYLySijniJkYRgwrhkGLYwFZgikmyVHxuzK6WwdesYO6drt572XD7PqQ7r4obfn+e8ed/zPM/7fhcEc9a1sa8+zyupZyVVDOipSXGI2I2PRs2s+0ita/vHc+sXitFsMjx+bEti+vevRVnALIWBpUzAIgwGehGk5THg80lw4MrRMnPwidW2TfH/I1Ig14lvpn46LpEsYsAAmLGrVoMvziJTCoA4ZCJ542JME0mBucSd9Vofr2qwbXygQIH8+9gbM+l8Auvf5dxjEQcVeHqFe/PtWXdDQmetkOc7rvA9LgUo8HPV4WbPqzV6/suRc91JMdbEQY4qYxh5KfYdq3c279Bz6Gri6Be30hd36sFDpupok/fNR/6r5Rt3u9zh7GA0NhM3qoiGNbamxlGVq7uW6vvIQalgRSrYaAIWIFBhDh5Ytfj5Q6g7/tbohPiHi6UxqXQ8t2T5AvPsTJ759Bfht10KoaDaEjrNYNf+fmGoH5Mcsww7f0jn4us5kGgHY8o0el43o/bITlUmOWQ1BIRn/O/YFtqobr7b35W8fEvRnFfgiugu39Z/ddkx/G1UksaWltIUrPO1IHRi8CWiE7q5mnCjp7Uwx4XWvsH3iO7cbSwXDga2F8xcGftuy4wstChEDeVUkbUz+F7Dw68tRmeje6SsPMnYjUuE9Q9w3j7+49rzk72X9ZnXcMsu7vZsaNLJT8Xe5flszMrocy9xQsCy5oPqsuZW1DXS1s9nLlXpRUHbxsaQc2vPfM6PJs6f6pmKvEAAwTrrikM7XE8d0Gs77xzpG8mEQzRRgQFFI68ZaPDsW47axy/slaYvHYZ8FCwGd9ZfWl8136Z+OHyury8TC9lZs3y44mW22ERv4qT/ttg7kBFHsIk2kBeDbVThnH8yfOYGVu8FzbmrgCmDXM6F3q9zvXJwbgcn+Z/9iempb2wl5s+2OdeemJvviL3Np7I3rUbKAJsq21CBXP8pzEcGJvITmCYK6LP7B2UtJlpchKDltfZZDSmtni2q12PvopV3nvS1+u6/LbpAcjp5uj8TCTHFAn8TMfOiUmREBQtbKtc5Ntd67fXX75PPtnhWOxEpOd0iKdlARpkKUNomsUi79BrSmsNiZLXbSGkd0JowC7RYWmL7lUOO/avdfz1sfwIZaJcfXDdbRwAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAB9klEQVR4AWJwL/AhG////3/df8JAmBI7SHcUZcAAUIwZgzQUAwGUUlXrUl1dBcXFqYuLWN2cxdlFxF3Qzd3NTVf3peA+uwqddXaxgiCotvg/KITjcv8l/8o/KOXy73Ivl0tC4gsIwDL9jmlcAraRCkVhOSDskNhk+HQAIAtctw5F/yOSxUq4KqCKGVhXXK5rLRJjxKG8eNdfbLDSaLOqdhJrcGLZB23tWNyYc9d7PwSQqi1yEp1PROxDYxBfKZAIkI6ykN2U+qNbjYyJRiMzR8FSygMBKh18izZXOKGfyYWqA9rA286AlfFL5R44uJ4kKXoKzMEUtpkFoW8JfYABjam6AVP6EfPX9OKv9a9nAvKFQ32l7gpYyLvx/akRQDqAQG8WsJAfpf28UUDLJsWn+JsTek8ClrIqMtL/018FAD0dunWzV8hdqXS8s0htiY4dQBbHgVkbZHtUBzCUJZBBuqAeQTKGGuAKOG9nAeCb8W2oxFirArbq4jaAWxbBZkhG6UUs0E8swD6tPXg5n5d2EfCxVSKaA4fk8pybZcuwZToDWMVuJ2wn14nYaAYeDz/Ev3xpkG3u74PkVQzIJQYE5+w+j4vq9yL7fRBkajHx6e0qpVRyp/U0ozQ+c+rY6326p9ge8cw6AXpdO6cOqOxtD5HfXt3+fwGJIMpFxYFtyAAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/ic_olympus.0b15337e.svg\";","export default __webpack_public_path__ + \"static/media/ic_olympus_arbitrum.2d52c3f7.svg\";","export default __webpack_public_path__ + \"static/media/ic_openocean.4434394c.svg\";","export default __webpack_public_path__ + \"static/media/ic_paraswap.13898880.svg\";","export default __webpack_public_path__ + \"static/media/ic_selector_dropdowns.aaf0b8f0.svg\";","export default __webpack_public_path__ + \"static/media/ic_settings_24.6f286878.svg\";","export default __webpack_public_path__ + \"static/media/ic_sign in_16.b6f5b1d9.svg\";","export default __webpack_public_path__ + \"static/media/ic_slingshot.4b95aa77.svg\";","export default __webpack_public_path__ + \"static/media/ic_sol_24.f0bc1b9d.svg\";","export default __webpack_public_path__ + \"static/media/ic_sol_40.ec22fb74.svg\";","export default __webpack_public_path__ + \"static/media/ic_stats_big.4a4ebfb7.svg\";","export default __webpack_public_path__ + \"static/media/ic_synapse.8b3e94cb.svg\";","export default __webpack_public_path__ + \"static/media/ic_tansak.b35982f3.svg\";","export default __webpack_public_path__ + \"static/media/ic_tether_24.a7c88dcd.svg\";","export default __webpack_public_path__ + \"static/media/ic_tokens.42432da7.svg\";","export default __webpack_public_path__ + \"static/media/ic_transfer_avax.6d7a1ef1.svg\";","export default __webpack_public_path__ + \"static/media/ic_uni_24.47e903f7.svg\";","export default __webpack_public_path__ + \"static/media/ic_uni_40.efe1f12f.svg\";","export default __webpack_public_path__ + \"static/media/ic_unidex.251545a0.png\";","export default __webpack_public_path__ + \"static/media/ic_usdc.e_24.0952740b.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc.e_40.27f415ba.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc_24.0952740b.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc_40.27f415ba.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdt_24.5ab8778d.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdt_40.e357d24a.svg\";","export default __webpack_public_path__ + \"static/media/ic_wavax_24.43583fc4.svg\";","export default __webpack_public_path__ + \"static/media/ic_wavax_40.ba36eda4.svg\";","export default __webpack_public_path__ + \"static/media/ic_wbtc_24.5dda0ca3.svg\";","export default __webpack_public_path__ + \"static/media/ic_wbtc_40.8330ef8d.svg\";","export default __webpack_public_path__ + \"static/media/ic_weth_24.bc395894.svg\";","export default __webpack_public_path__ + \"static/media/ic_weth_40.334ca16a.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAACPklEQVR4Ae2ZxZ7UQBDGC3e94C+B3XB3d5/qnsVdL+iVKw4vACccLjj0BHd3d3fLdmR9tyc92plfHb6JJ/VPdZdMoNfc/jklAiIgAiIgAiIgAiIgAvIEJyMdjTP49ORWiQMJ9sI4oFPYG+wVlRMEwn/GAcX4QohhnjYQWNObgsVt8zzEDoNgJxIAYv0hxmw4PKmmWXOI26qpoHJtxAGS2mIMjHy5nk34WR9IYA/3YktKTkIjgATe8l/yS32gy9Ma+RdL4d2sw1jRboX2CH4gsShXCCQl8CoAVMoODI4tYctp3j3RPPTYvUEJ4TK4OqJ6RkDO5LWHU/iztA2JJ9az0WZlgErCvZe6K9dPyOWRIrGjsH1ElTje31LiGlfsMgj2Wq7/qfCZgu9IGMh/8F4FlEJ8ccXRakXVxO7J/qakOAXBHmk/XLC3ilwyMIH7/Q+SEzVCJtuma4Tv4bXF6rDGcHhEXbnvgR4MfoQVwVJHAokNb2u81YPFJzEIvC+3fwS93g0IVqRb2vshZ8KDwKFSF8DiAQxj62WAaRD3PMv1xhN5/iLYFa2dtQYPbKgEAreqDcbbymh5cHwd4zpWEOyIEqoCrxjbgrtDUT8UjzEWyJ/4u3VCsfF/kmh5SeBQ44F8Lx2ID+NnfcOBNLwU7RkaIN9LF+JVEWEDmqKYO29CCBRRFKD4nIAIKMWC2Lj6CqA1hgNpdLsC/4f2c4pbhZf1UJtQfx+CfbNqwOHpdV1dnV6XPnjlMhABERABERAB5QNLHTYJZAT3mgAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/lg_arbitrum.bdf133fe.svg\";","export default __webpack_public_path__ + \"static/media/metamask-text.2f9c2df2.svg\";","export default __webpack_public_path__ + \"static/media/page-not-found.bb90d073.svg\";","export default __webpack_public_path__ + \"static/media/trading.7ea1604c.jpg\";","export default __webpack_public_path__ + \"static/media/wallet-connect-text.78166b41.svg\";","export default __webpack_public_path__ + \"static/media/wave-01.3c9bce1e.png\";","export default __webpack_public_path__ + \"static/media/wave-02.4a56e8c7.png\";","var map = {\n\t\"./de/messages.po\": [\n\t\t947,\n\t\t4\n\t],\n\t\"./en/messages.po\": [\n\t\t948,\n\t\t5\n\t],\n\t\"./es/messages.po\": [\n\t\t949,\n\t\t6\n\t],\n\t\"./fr/messages.po\": [\n\t\t950,\n\t\t7\n\t],\n\t\"./ja/messages.po\": [\n\t\t951,\n\t\t8\n\t],\n\t\"./ko/messages.po\": [\n\t\t952,\n\t\t9\n\t],\n\t\"./pseudo/messages.po\": [\n\t\t953,\n\t\t10\n\t],\n\t\"./ru/messages.po\": [\n\t\t954,\n\t\t11\n\t],\n\t\"./zh/messages.po\": [\n\t\t955,\n\t\t12\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 923;\nmodule.exports = webpackAsyncContext;","export const SELECTED_NETWORK_LOCAL_STORAGE_KEY = \"SELECTED_NETWORK\";\nexport const WALLET_CONNECT_LOCALSTORAGE_KEY = \"walletconnect\";\nexport const WALLET_LINK_LOCALSTORAGE_PREFIX = \"-walletlink\";\nexport const SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY = \"eagerconnect\";\nexport const CURRENT_PROVIDER_LOCALSTORAGE_KEY = \"currentprovider\";\nexport const LANGUAGE_LOCALSTORAGE_KEY = \"LANGUAGE_KEY\";\nexport const SLIPPAGE_BPS_KEY = \"Exchange-swap-slippage-basis-points-v3\";\nexport const CLOSE_POSITION_RECEIVE_TOKEN_KEY = \"Close-position-receive-token\";\nexport const IS_PNL_IN_LEVERAGE_KEY = \"Exchange-swap-is-pnl-in-leverage\";\nexport const SHOW_PNL_AFTER_FEES_KEY = \"Exchange-swap-show-pnl-after-fees\";\nexport const DISABLE_ORDER_VALIDATION_KEY = \"disable-order-validation\";\nexport const SHOULD_SHOW_POSITION_LINES_KEY = \"Exchange-swap-should-show-position-lines\";\nexport const REFERRAL_CODE_KEY = \"GMX-referralCode\";\nexport const REFERRALS_SELECTED_TAB_KEY = \"Referrals-selected-tab\";\nexport const TV_SAVE_LOAD_CHARTS_KEY = \"tv-save-load-charts\";\nexport const TV_CHART_RELOAD_TIMESTAMP_KEY = \"tv-chart-reload-timestamp\";\nexport const REDIRECT_POPUP_TIMESTAMP_KEY = \"redirect-popup-timestamp\";\nexport const LEVERAGE_OPTION_KEY = \"leverage-option\";\nexport const LEVERAGE_ENABLED_KEY = \"leverage-enabled\";\nexport const KEEP_LEVERAGE_FOR_DECREASE_KEY = \"Exchange-keep-leverage\";\n\nexport const SYNTHETICS_ACCEPTABLE_PRICE_IMPACT_BPS_KEY = \"synthetics-acceptable-price-impact-bps\";\nexport const SYNTHETICS_MARKET_DEPOSIT_MARKET_KEY = \"synthetics-market-deposit-market\";\nexport const SYNTHETICS_MARKET_DEPOSIT_TOKEN_KEY = \"synthetics-market-deposit-token\";\nexport const SYNTHETICS_COLLATERAL_DEPOSIT_TOKEN_KEY = \"synthetics-collateral-deposit-token\";\nexport const SYNTHETICS_LIST_SECTION_KEY = \"synthetics-list-section\";\nexport const SYNTHETICS_TRADE_TYPE_KEY = \"synthetics-trade-type\";\nexport const SYNTHETICS_TRADE_MODE_KEY = \"synthetics-trade-mode\";\nexport const SYNTHETICS_TRADE_MARKET_KEY = \"synthetics-trade-market\";\nexport const SYNTHETICS_TRADE_FROM_TOKEN_KEY = \"synthetics-trade-from-token\";\nexport const SYNTHETICS_TRADE_TO_TOKEN_KEY = \"synthetics-swap-to-token\";\nexport const SYNTHETICS_TRADE_COLLATERAL_KEY = \"synthetics-swap-collateral-token\";\nexport const PRODUCTION_PREVIEW_KEY = \"production-preview\";\n\nexport const getSubgraphUrlKey = (chainId: number, subgraph: string) => `subgraphUrl:${chainId}:${subgraph}`;\n\nexport function getSyntheticsListSectionKey(chainId: number) {\n  return [chainId, SYNTHETICS_LIST_SECTION_KEY];\n}\n\nexport function getSyntheticsTradeTypeKey(chainId: number) {\n  return [chainId, SYNTHETICS_TRADE_TYPE_KEY];\n}\n\nexport function getSyntheticsTradeModeKey(chainId: number) {\n  return [chainId, SYNTHETICS_TRADE_MODE_KEY];\n}\n\nexport function getSyntheticsFromTokenAddressKey(chainId: number, isSwap: boolean) {\n  return [chainId, SYNTHETICS_TRADE_FROM_TOKEN_KEY, isSwap];\n}\n\nexport function getSyntheticsToTokenAddressKey(chainId: number, isSwap: boolean) {\n  return [chainId, SYNTHETICS_TRADE_TO_TOKEN_KEY, isSwap];\n}\n\nexport function getSyntheticsMarketAddressKey(\n  chainId: number,\n  tradeType: string | undefined,\n  toTokenAddress: string | undefined\n) {\n  return [chainId, tradeType, toTokenAddress];\n}\n\nexport function getSyntheticsCollateralAddressKey(\n  chainId: number,\n  tradeType: string | undefined,\n  marketAddress: string | undefined\n) {\n  return [chainId, SYNTHETICS_TRADE_COLLATERAL_KEY, tradeType, marketAddress];\n}\n\nexport function getLeverageKey(chainId: number) {\n  return [chainId, LEVERAGE_OPTION_KEY];\n}\n\nexport function getKeepLeverageKey(chainId: number) {\n  return [chainId, KEEP_LEVERAGE_FOR_DECREASE_KEY];\n}\n\nexport function getLeverageEnabledKey(chainId: number) {\n  return [chainId, LEVERAGE_ENABLED_KEY];\n}\n\nexport function getAcceptablePriceImpactBpsKey(chainId: number) {\n  return [chainId, SYNTHETICS_ACCEPTABLE_PRICE_IMPACT_BPS_KEY];\n}\n\nexport function getAllowedSlippageKey(chainId: number) {\n  return [chainId, SLIPPAGE_BPS_KEY];\n}\n","import { PRODUCTION_PREVIEW_KEY } from \"./localStorage\";\n\nexport const UI_VERSION = \"1.4\";\n\nexport const IS_TOUCH = \"ontouchstart\" in window;\n\nexport function isDevelopment() {\n  const isProductionPreview = Boolean(localStorage.getItem(PRODUCTION_PREVIEW_KEY));\n\n  return (\n    !window.location.host?.includes(\"gmx.io\") && !window.location.host?.includes(\"ipfs.io\") && !isProductionPreview\n  );\n}\n\nexport function isLocal() {\n  return window.location.host?.includes(\"localhost\");\n}\n","import { ethers } from \"ethers\";\nimport { sample } from \"lodash\";\nimport { NetworkMetadata } from \"lib/wallets\";\nimport { isDevelopment } from \"./env\";\n\nconst { parseEther } = ethers.utils;\n\nexport const MAINNET = 56;\nexport const TESTNET = 97;\nexport const ETH_MAINNET = 1;\nexport const AVALANCHE = 43114;\nexport const AVALANCHE_FUJI = 43113;\nexport const ARBITRUM = 42161;\nexport const ARBITRUM_TESTNET = 421611;\n\n// TODO take it from web3\nexport const DEFAULT_CHAIN_ID = ARBITRUM;\nexport const CHAIN_ID = DEFAULT_CHAIN_ID;\n\nexport const SUPPORTED_CHAIN_IDS = [ARBITRUM, AVALANCHE];\n\nif (isDevelopment()) {\n  SUPPORTED_CHAIN_IDS.push(ARBITRUM_TESTNET, AVALANCHE_FUJI);\n}\n\nexport const IS_NETWORK_DISABLED = {\n  [ARBITRUM]: false,\n  [AVALANCHE]: false,\n};\n\nexport const CHAIN_NAMES_MAP = {\n  [MAINNET]: \"BSC\",\n  [TESTNET]: \"BSC Testnet\",\n  [ARBITRUM_TESTNET]: \"ArbRinkeby\",\n  [ARBITRUM]: \"Arbitrum\",\n  [AVALANCHE]: \"Avalanche\",\n  [AVALANCHE_FUJI]: \"Avalanche Fuji\",\n};\n\nexport const GAS_PRICE_ADJUSTMENT_MAP = {\n  [ARBITRUM]: \"0\",\n  [AVALANCHE]: \"3000000000\", // 3 gwei\n};\n\nexport const MAX_GAS_PRICE_MAP = {\n  [AVALANCHE]: \"200000000000\", // 200 gwei\n};\n\nexport const HIGH_EXECUTION_FEES_MAP = {\n  [ARBITRUM]: 3, // 3 USD\n  [AVALANCHE]: 3, // 3 USD\n  [AVALANCHE_FUJI]: 3, // 3 USD\n};\n\nexport const EXECUTION_FEE_MULTIPLIER_MAP = {\n  // if gas prices on Arbitrum are high, the main transaction costs would come from the L2 gas usage\n  // for executing positions this is around 65,000 gas\n  // if gas prices on Ethereum are high, than the gas usage might be higher, this calculation doesn't deal with that\n  // case yet\n  [ARBITRUM]: 65000,\n  // multiplier for Avalanche is just the average gas usage\n  [AVALANCHE]: 700000,\n  [AVALANCHE_FUJI]: 700000,\n};\n\nconst constants = {\n  [MAINNET]: {\n    nativeTokenSymbol: \"BNB\",\n    defaultCollateralSymbol: \"BUSD\",\n    defaultFlagOrdersEnabled: false,\n    positionReaderPropsLength: 8,\n    v2: false,\n  },\n\n  [TESTNET]: {\n    nativeTokenSymbol: \"BNB\",\n    defaultCollateralSymbol: \"BUSD\",\n    defaultFlagOrdersEnabled: true,\n    positionReaderPropsLength: 8,\n    v2: false,\n  },\n\n  [ARBITRUM_TESTNET]: {\n    nativeTokenSymbol: \"ETH\",\n    defaultCollateralSymbol: \"USDC\",\n    defaultFlagOrdersEnabled: false,\n    positionReaderPropsLength: 9,\n    v2: true,\n\n    SWAP_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.0003\"),\n    INCREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.0003\"),\n    // contract requires that execution fee be strictly greater than instead of gte\n    DECREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.000300001\"),\n  },\n\n  [ARBITRUM]: {\n    nativeTokenSymbol: \"ETH\",\n    wrappedTokenSymbol: \"WETH\",\n    defaultCollateralSymbol: \"USDC\",\n    defaultFlagOrdersEnabled: false,\n    positionReaderPropsLength: 9,\n    v2: true,\n\n    SWAP_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.0003\"),\n    INCREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.0003\"),\n    // contract requires that execution fee be strictly greater than instead of gte\n    DECREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.000300001\"),\n  },\n\n  [AVALANCHE]: {\n    nativeTokenSymbol: \"AVAX\",\n    wrappedTokenSymbol: \"WAVAX\",\n    defaultCollateralSymbol: \"USDC\",\n    defaultFlagOrdersEnabled: true,\n    positionReaderPropsLength: 9,\n    v2: true,\n\n    SWAP_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.01\"),\n    INCREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.01\"),\n    // contract requires that execution fee be strictly greater than instead of gte\n    DECREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.0100001\"),\n  },\n\n  [AVALANCHE_FUJI]: {\n    nativeTokenSymbol: \"AVAX\",\n    wrappedTokenSymbol: \"WAVAX\",\n    defaultCollateralSymbol: \"USDC\",\n    defaultFlagOrdersEnabled: true,\n    positionReaderPropsLength: 9,\n    v2: true,\n\n    SWAP_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.01\"),\n    INCREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.01\"),\n    // contract requires that execution fee be strictly greater than instead of gte\n    DECREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.0100001\"),\n  },\n};\n\nconst ALCHEMY_WHITELISTED_DOMAINS = [\"gmx.io\", \"app.gmx.io\"];\n\nexport const RPC_PROVIDERS = {\n  [ETH_MAINNET]: [\"https://rpc.ankr.com/eth\"],\n  [MAINNET]: [\n    \"https://bsc-dataseed.binance.org\",\n    \"https://bsc-dataseed1.defibit.io\",\n    \"https://bsc-dataseed1.ninicoin.io\",\n    \"https://bsc-dataseed2.defibit.io\",\n    \"https://bsc-dataseed3.defibit.io\",\n    \"https://bsc-dataseed4.defibit.io\",\n    \"https://bsc-dataseed2.ninicoin.io\",\n    \"https://bsc-dataseed3.ninicoin.io\",\n    \"https://bsc-dataseed4.ninicoin.io\",\n    \"https://bsc-dataseed1.binance.org\",\n    \"https://bsc-dataseed2.binance.org\",\n    \"https://bsc-dataseed3.binance.org\",\n    \"https://bsc-dataseed4.binance.org\",\n  ],\n  [TESTNET]: [\"https://data-seed-prebsc-1-s1.binance.org:8545/\"],\n  [ARBITRUM]: [getDefaultArbitrumRpcUrl()],\n  [ARBITRUM_TESTNET]: [\"https://rinkeby.arbitrum.io/rpc\"],\n  [AVALANCHE]: [\"https://api.avax.network/ext/bc/C/rpc\"],\n  [AVALANCHE_FUJI]: [\"https://api.avax-test.network/ext/bc/C/rpc\"],\n};\n\nexport const FALLBACK_PROVIDERS = {\n  [ARBITRUM]: [getAlchemyHttpUrl()],\n  [AVALANCHE]: [\"https://avax-mainnet.gateway.pokt.network/v1/lb/626f37766c499d003aada23b\"],\n};\n\nexport const NETWORK_METADATA: { [chainId: number]: NetworkMetadata } = {\n  [MAINNET]: {\n    chainId: \"0x\" + MAINNET.toString(16),\n    chainName: \"BSC\",\n    nativeCurrency: {\n      name: \"BNB\",\n      symbol: \"BNB\",\n      decimals: 18,\n    },\n    rpcUrls: RPC_PROVIDERS[MAINNET],\n    blockExplorerUrls: [\"https://bscscan.com\"],\n  },\n  [TESTNET]: {\n    chainId: \"0x\" + TESTNET.toString(16),\n    chainName: \"BSC Testnet\",\n    nativeCurrency: {\n      name: \"BNB\",\n      symbol: \"BNB\",\n      decimals: 18,\n    },\n    rpcUrls: RPC_PROVIDERS[TESTNET],\n    blockExplorerUrls: [\"https://testnet.bscscan.com/\"],\n  },\n  [ARBITRUM_TESTNET]: {\n    chainId: \"0x\" + ARBITRUM_TESTNET.toString(16),\n    chainName: \"Arbitrum Testnet\",\n    nativeCurrency: {\n      name: \"ETH\",\n      symbol: \"ETH\",\n      decimals: 18,\n    },\n    rpcUrls: RPC_PROVIDERS[ARBITRUM_TESTNET],\n    blockExplorerUrls: [\"https://rinkeby-explorer.arbitrum.io/\"],\n  },\n  [ARBITRUM]: {\n    chainId: \"0x\" + ARBITRUM.toString(16),\n    chainName: \"Arbitrum\",\n    nativeCurrency: {\n      name: \"ETH\",\n      symbol: \"ETH\",\n      decimals: 18,\n    },\n    rpcUrls: RPC_PROVIDERS[ARBITRUM],\n    blockExplorerUrls: [getExplorerUrl(ARBITRUM)],\n  },\n  [AVALANCHE]: {\n    chainId: \"0x\" + AVALANCHE.toString(16),\n    chainName: \"Avalanche\",\n    nativeCurrency: {\n      name: \"AVAX\",\n      symbol: \"AVAX\",\n      decimals: 18,\n    },\n    rpcUrls: RPC_PROVIDERS[AVALANCHE],\n    blockExplorerUrls: [getExplorerUrl(AVALANCHE)],\n  },\n  [AVALANCHE_FUJI]: {\n    chainId: \"0x\" + AVALANCHE_FUJI.toString(16),\n    chainName: \"Avalanche Fuji Testnet\",\n    nativeCurrency: {\n      name: \"AVAX\",\n      symbol: \"AVAX\",\n      decimals: 18,\n    },\n    rpcUrls: RPC_PROVIDERS[AVALANCHE_FUJI],\n    blockExplorerUrls: [getExplorerUrl(AVALANCHE_FUJI)],\n  },\n};\n\nexport const getConstant = (chainId: number, key: string) => {\n  if (!constants[chainId]) {\n    throw new Error(`Unsupported chainId ${chainId}`);\n  }\n\n  if (!(key in constants[chainId])) {\n    throw new Error(`Key ${key} does not exist for chainId ${chainId}`);\n  }\n\n  return constants[chainId][key];\n};\n\nexport function getChainName(chainId: number) {\n  return CHAIN_NAMES_MAP[chainId];\n}\n\nexport function getDefaultArbitrumRpcUrl() {\n  return \"https://arb1.arbitrum.io/rpc\";\n}\n\nexport function getRpcUrl(chainId: number): string | undefined {\n  return sample(RPC_PROVIDERS[chainId]);\n}\n\nexport function getFallbackRpcUrl(chainId: number): string | undefined {\n  return sample(FALLBACK_PROVIDERS[chainId]);\n}\n\nexport function getAlchemyHttpUrl() {\n  if (ALCHEMY_WHITELISTED_DOMAINS.includes(window.location.host)) {\n    return \"https://arb-mainnet.g.alchemy.com/v2/ha7CFsr1bx5ZItuR6VZBbhKozcKDY4LZ\";\n  }\n  return \"https://arb-mainnet.g.alchemy.com/v2/EmVYwUw0N2tXOuG0SZfe5Z04rzBsCbr2\";\n}\n\nexport function getAlchemyWsUrl() {\n  if (ALCHEMY_WHITELISTED_DOMAINS.includes(window.location.host)) {\n    return \"wss://arb-mainnet.g.alchemy.com/v2/ha7CFsr1bx5ZItuR6VZBbhKozcKDY4LZ\";\n  }\n  return \"wss://arb-mainnet.g.alchemy.com/v2/EmVYwUw0N2tXOuG0SZfe5Z04rzBsCbr2\";\n}\n\nexport function getExplorerUrl(chainId) {\n  if (chainId === 3) {\n    return \"https://ropsten.etherscan.io/\";\n  } else if (chainId === 42) {\n    return \"https://kovan.etherscan.io/\";\n  } else if (chainId === MAINNET) {\n    return \"https://bscscan.com/\";\n  } else if (chainId === TESTNET) {\n    return \"https://testnet.bscscan.com/\";\n  } else if (chainId === ARBITRUM_TESTNET) {\n    return \"https://testnet.arbiscan.io/\";\n  } else if (chainId === ARBITRUM) {\n    return \"https://arbiscan.io/\";\n  } else if (chainId === AVALANCHE) {\n    return \"https://snowtrace.io/\";\n  } else if (chainId === AVALANCHE_FUJI) {\n    return \"https://testnet.snowtrace.io/\";\n  }\n  return \"https://etherscan.io/\";\n}\n\nexport function getHighExecutionFee(chainId) {\n  return HIGH_EXECUTION_FEES_MAP[chainId] || 3;\n}\n\nexport function getExecutionFeeMultiplier(chainId) {\n  return EXECUTION_FEE_MULTIPLIER_MAP[chainId] || 1;\n}\n\nexport function isSupportedChain(chainId) {\n  return SUPPORTED_CHAIN_IDS.includes(chainId);\n}\n","import { ethers } from \"ethers\";\nimport { ARBITRUM, ARBITRUM_TESTNET, AVALANCHE, AVALANCHE_FUJI, MAINNET, TESTNET } from \"./chains\";\n\nconst { AddressZero } = ethers.constants;\n\nexport const XGMT_EXCLUDED_ACCOUNTS = [\n  \"0x330eef6b9b1ea6edd620c825c9919dc8b611d5d5\",\n  \"0xd9b1c23411adbb984b1c4be515fafc47a12898b2\",\n  \"0xa633158288520807f91ccc98aa58e0ea43acb400\",\n  \"0xffd0a93b4362052a336a7b22494f1b77018dd34b\",\n];\n\nconst CONTRACTS = {\n  [MAINNET]: {\n    // bsc mainnet\n    Treasury: \"0xa44E7252a0C137748F523F112644042E5987FfC7\",\n    BUSD: \"0xe9e7cea3dedca5984780bafc599bd69add087d56\",\n    GMT: \"0x99e92123eB77Bc8f999316f622e5222498438784\",\n    Vault: \"0xc73A8DcAc88498FD4b4B1b2AaA37b0a2614Ff67B\",\n    Router: \"0xD46B23D042E976F8666F554E928e0Dc7478a8E1f\",\n    Reader: \"0x087A618fD25c92B61254DBe37b09E5E8065FeaE7\",\n    AmmFactory: \"0xBCfCcbde45cE874adCB698cC183deBcF17952812\",\n    AmmFactoryV2: \"0xcA143Ce32Fe78f1f7019d7d551a6402fC5350c73\",\n    OrderBook: \"0x1111111111111111111111111111111111111111\",\n    OrderBookReader: \"0x1111111111111111111111111111111111111111\",\n    GmxMigrator: \"0xDEF2af818514c1Ca1A9bBe2a4D45E28f260063f9\",\n    USDG: \"0x85E76cbf4893c1fbcB34dCF1239A91CE2A4CF5a7\",\n    NATIVE_TOKEN: \"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c\",\n    XGMT: \"0xe304ff0983922787Fd84BC9170CD21bF78B16B10\",\n    GMT_USDG_PAIR: \"0xa41e57459f09a126F358E118b693789d088eA8A0\",\n    XGMT_USDG_PAIR: \"0x0b622208fc0691C2486A3AE6B7C875b4A174b317\",\n    GMT_USDG_FARM: \"0x3E8B08876c791dC880ADC8f965A02e53Bb9C0422\",\n    XGMT_USDG_FARM: \"0x68D7ee2A16AB7c0Ee1D670BECd144166d2Ae0759\",\n    USDG_YIELD_TRACKER: \"0x0EF0Cf825B8e9F89A43FfD392664131cFB4cfA89\",\n    XGMT_YIELD_TRACKER: \"0x82A012A9b3003b18B6bCd6052cbbef7Fa4892e80\",\n    GMT_USDG_FARM_TRACKER_XGMT: \"0x08FAb024BEfcb6068847726b2eccEAd18b6c23Cd\",\n    GMT_USDG_FARM_TRACKER_NATIVE: \"0xd8E26637B34B2487Cad1f91808878a391134C5c2\",\n    XGMT_USDG_FARM_TRACKER_XGMT: \"0x026A02F7F26C1AFccb9Cba7C4df3Dc810F4e92e8\",\n    XGMT_USDG_FARM_TRACKER_NATIVE: \"0x22458CEbD14a9679b2880147d08CA1ce5aa40E84\",\n    AUTO: \"0xa184088a740c695E156F91f5cC086a06bb78b827\",\n    AUTO_USDG_PAIR: \"0x0523FD5C53ea5419B4DAF656BC1b157dDFE3ce50\",\n    AUTO_USDG_FARM: \"0xE6958298328D02051769282628a3b4178D0F3A47\",\n    AUTO_USDG_FARM_TRACKER_XGMT: \"0x093b8be41c1A30704De84a9521632f9a139c08bd\",\n    AUTO_USDG_FARM_TRACKER_NATIVE: \"0x23ed48E5dce3acC7704d0ce275B7b9a0e346b63A\",\n    GMT_GMX_IOU: \"0x47052469970C2484729875CC9E2dd2683fcE71fb\",\n    XGMT_GMX_IOU: \"0xeB3733DFe3b68C9d26898De2493A3Bb59FDb4A7B\",\n    GMT_USDG_GMX_IOU: \"0x481312655F81b5e249780A6a49735335BF6Ca7f4\",\n    XGMT_USDG_GMX_IOU: \"0x8095F1A92526C304623483018aA28cC6E62EB1e1\",\n  },\n  [TESTNET]: {\n    // bsc testnet\n    Vault: \"0x1B183979a5cd95FAF392c8002dbF0D5A1C687D9a\",\n    Router: \"0x10800f683aa564534497a5b67F45bE3556a955AB\",\n    Reader: \"0x98D4742F1B6a821bae672Cd8721283b91996E454\",\n    AmmFactory: \"0x6725f303b657a9451d8ba641348b6761a6cc7a17\",\n    AmmFactoryV2: \"0x1111111111111111111111111111111111111111\",\n    OrderBook: \"0x9afD7B4f0b58d65F6b2978D3581383a06b2ac4e9\",\n    OrderBookReader: \"0x0713562970D1A802Fa3FeB1D15F9809943982Ea9\",\n    GmxMigrator: \"0xDEF2af818514c1Ca1A9bBe2a4D45E28f260063f9\",\n    USDG: \"0x2D549bdBf810523fe9cd660cC35fE05f0FcAa028\",\n    GMT: \"0xedba0360a44f885ed390fad01aa34d00d2532817\",\n    NATIVE_TOKEN: \"0x612777Eea37a44F7a95E3B101C39e1E2695fa6C2\",\n    XGMT: \"0x28cba798eca1a3128ffd1b734afb93870f22e613\",\n    GMT_USDG_PAIR: \"0xe0b0a315746f51932de033ab27223d85114c6b85\",\n    XGMT_USDG_PAIR: \"0x0108de1eea192ce8448080c3d90a1560cf643fa0\",\n    GMT_USDG_FARM: \"0xbe3cB06CE03cA692b77902040479572Ba8D01b0B\",\n    XGMT_USDG_FARM: \"0x138E92195D4B99CE3618092D3F9FA830d9A69B4b\",\n    USDG_YIELD_TRACKER: \"0x62B49Bc3bF252a5DB26D88ccc7E61119e3179B4f\",\n    XGMT_YIELD_TRACKER: \"0x5F235A582e0993eE9466FeEb8F7B4682993a57d0\",\n    GMT_USDG_FARM_TRACKER_XGMT: \"0x4f8EE3aE1152422cbCaFACd4e3041ba2D859913C\",\n    GMT_USDG_FARM_TRACKER_NATIVE: \"0xd691B26E544Fe370f39A776964c991363aF72e56\",\n    XGMT_USDG_FARM_TRACKER_XGMT: \"0xfd5617CFB082Ba9bcD62d654603972AE312bC695\",\n    XGMT_USDG_FARM_TRACKER_NATIVE: \"0x0354387DD85b7D8aaD1611B3D167A384d6AE0c28\",\n    GMT_GMX_IOU: \"0x47052469970C2484729875CC9E2dd2683fcE71fb\",\n    XGMT_GMX_IOU: \"0xeB3733DFe3b68C9d26898De2493A3Bb59FDb4A7B\",\n    GMT_USDG_GMX_IOU: \"0x481312655F81b5e249780A6a49735335BF6Ca7f4\",\n    XGMT_USDG_GMX_IOU: \"0x8095F1A92526C304623483018aA28cC6E62EB1e1\",\n  },\n  [ARBITRUM_TESTNET]: {\n    // arbitrum testnet\n    Vault: \"0xBc9BC47A7aB63db1E0030dC7B60DDcDe29CF4Ffb\",\n    Router: \"0xe0d4662cdfa2d71477A7DF367d5541421FAC2547\",\n    VaultReader: \"0xFc371E380262536c819D12B9569106bf032cC41c\",\n    Reader: \"0x2E093c70E3A7E4919611d2555dFd8D697d2fC0a1\",\n    GlpManager: \"0xD875d99E09118d2Be80579b9d23E83469077b498\",\n    RewardRouter: \"0x0000000000000000000000000000000000000000\",\n    RewardReader: \"0x0000000000000000000000000000000000000000\",\n    NATIVE_TOKEN: \"0xB47e6A5f8b33b3F17603C83a0535A9dcD7E32681\",\n    GLP: \"0xb4f81Fa74e06b5f762A104e47276BA9b2929cb27\",\n    GMX: \"0x0000000000000000000000000000000000000000\",\n    ES_GMX: \"0x0000000000000000000000000000000000000000\",\n    BN_GMX: \"0x0000000000000000000000000000000000000000\",\n    USDG: \"0xBCDCaF67193Bf5C57be08623278fCB69f4cA9e68\",\n    ES_GMX_IOU: \"0x0000000000000000000000000000000000000000\",\n    StakedGmxTracker: \"0x0000000000000000000000000000000000000000\",\n    BonusGmxTracker: \"0x0000000000000000000000000000000000000000\",\n    FeeGmxTracker: \"0x0000000000000000000000000000000000000000\",\n    StakedGlpTracker: \"0x0000000000000000000000000000000000000000\",\n    FeeGlpTracker: \"0x0000000000000000000000000000000000000000\",\n\n    StakedGmxDistributor: \"0x0000000000000000000000000000000000000000\",\n    StakedGlpDistributor: \"0x0000000000000000000000000000000000000000\",\n\n    GmxVester: \"0x0000000000000000000000000000000000000000\",\n    GlpVester: \"0x0000000000000000000000000000000000000000\",\n\n    OrderBook: \"0xebD147E5136879520dDaDf1cA8FBa48050EFf016\",\n    OrderBookReader: \"0xC492c8d82DC576Ad870707bb40EDb63E2026111E\",\n\n    PositionRouter: \"0xB4bB78cd12B097603e2b55D2556c09C17a5815F8\",\n    PositionManager: \"0x168aDa266c2f10C1F37973B213d6178551030e44\",\n\n    // UniswapGmxEthPool: \"0x80A9ae39310abf666A87C743d6ebBD0E8C42158E\",\n    ReferralStorage: \"0x0000000000000000000000000000000000000000\",\n    ReferralReader: \"0x0000000000000000000000000000000000000000\",\n\n    // Synthetics\n    AdlUtils: AddressZero,\n    DecreaseOrderUtils: AddressZero,\n    DataStore: AddressZero,\n    DecreasePositionUtils: AddressZero,\n    DepositHandler: AddressZero,\n    DepositStore: AddressZero,\n    EventEmitter: AddressZero,\n    ExchangeRouter: AddressZero,\n    FeeReceiver: AddressZero,\n    GasUtils: AddressZero,\n    IncreaseOrderUtils: AddressZero,\n    IncreasePositionUtils: AddressZero,\n    LiquidationUtils: AddressZero,\n    MarketFactory: AddressZero,\n    MarketStore: AddressZero,\n    MarketUtils: AddressZero,\n    Multicall3: AddressZero,\n    Oracle: AddressZero,\n    OracleStore: AddressZero,\n    OrderHandler: AddressZero,\n    OrderStore: AddressZero,\n    OrderUtils: AddressZero,\n    PositionStore: AddressZero,\n    SyntheticsReader: AddressZero,\n    SyntheticsReferralStorage: AddressZero,\n    RoleStore: AddressZero,\n    SyntheticsRouter: AddressZero,\n    SwapHandler: AddressZero,\n    SwapOrderUtils: AddressZero,\n    WithdrawalHandler: AddressZero,\n    WithdrawalStore: AddressZero,\n\n    Multicall: \"0xcA11bde05977b3631167028862bE2a173976CA11\",\n  },\n  [ARBITRUM]: {\n    // arbitrum mainnet\n    Vault: \"0x489ee077994B6658eAfA855C308275EAd8097C4A\",\n    Router: \"0xaBBc5F99639c9B6bCb58544ddf04EFA6802F4064\",\n    VaultReader: \"0xfebB9f4CAC4cD523598fE1C5771181440143F24A\",\n    Reader: \"0x2b43c90D1B727cEe1Df34925bcd5Ace52Ec37694\",\n    GlpManager: \"0x3963FfC9dff443c2A94f21b129D429891E32ec18\",\n    RewardRouter: \"0xA906F338CB21815cBc4Bc87ace9e68c87eF8d8F1\",\n    GlpRewardRouter: \"0xB95DB5B167D75e6d04227CfFFA61069348d271F5\",\n    RewardReader: \"0x8BFb8e82Ee4569aee78D03235ff465Bd436D40E0\",\n    NATIVE_TOKEN: \"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1\",\n    GLP: \"0x4277f8F2c384827B5273592FF7CeBd9f2C1ac258\",\n    GMX: \"0xfc5A1A6EB076a2C7aD06eD22C90d7E710E35ad0a\",\n    ES_GMX: \"0xf42Ae1D54fd613C9bb14810b0588FaAa09a426cA\",\n    BN_GMX: \"0x35247165119B69A40edD5304969560D0ef486921\",\n    USDG: \"0x45096e7aA921f27590f8F19e457794EB09678141\",\n    ES_GMX_IOU: \"0x6260101218eC4cCfFF1b778936C6f2400f95A954\",\n    StakedGmxTracker: \"0x908C4D94D34924765f1eDc22A1DD098397c59dD4\",\n    BonusGmxTracker: \"0x4d268a7d4C16ceB5a606c173Bd974984343fea13\",\n    FeeGmxTracker: \"0xd2D1162512F927a7e282Ef43a362659E4F2a728F\",\n    StakedGlpTracker: \"0x1aDDD80E6039594eE970E5872D247bf0414C8903\",\n    FeeGlpTracker: \"0x4e971a87900b931fF39d1Aad67697F49835400b6\",\n\n    StakedGmxDistributor: \"0x23208B91A98c7C1CD9FE63085BFf68311494F193\",\n    StakedGlpDistributor: \"0x60519b48ec4183a61ca2B8e37869E675FD203b34\",\n\n    GmxVester: \"0x199070DDfd1CFb69173aa2F7e20906F26B363004\",\n    GlpVester: \"0xA75287d2f8b217273E7FCD7E86eF07D33972042E\",\n\n    OrderBook: \"0x09f77E8A13De9a35a7231028187e9fD5DB8a2ACB\",\n    OrderExecutor: \"0x7257ac5D0a0aaC04AA7bA2AC0A6Eb742E332c3fB\",\n    OrderBookReader: \"0xa27C20A7CF0e1C68C0460706bB674f98F362Bc21\",\n\n    PositionRouter: \"0xb87a436B93fFE9D75c5cFA7bAcFff96430b09868\",\n    PositionManager: \"0x75E42e6f01baf1D6022bEa862A28774a9f8a4A0C\",\n\n    UniswapGmxEthPool: \"0x80A9ae39310abf666A87C743d6ebBD0E8C42158E\",\n    ReferralStorage: \"0xe6fab3f0c7199b0d34d7fbe83394fc0e0d06e99d\",\n    ReferralReader: \"0x8Aa382760BCdCe8644C33e6C2D52f6304A76F5c8\",\n\n    // Synthetics\n    DataStore: AddressZero,\n    EventEmitter: AddressZero,\n    ExchangeRouter: AddressZero,\n    DepositVault: AddressZero,\n    WithdrawalVault: AddressZero,\n    OrderVault: AddressZero,\n    SyntheticsReader: AddressZero,\n    SyntheticsReferralStorage: AddressZero,\n    SyntheticsRouter: AddressZero,\n\n    Multicall: \"0xcA11bde05977b3631167028862bE2a173976CA11\",\n  },\n  [AVALANCHE]: {\n    // avalanche\n    Vault: \"0x9ab2De34A33fB459b538c43f251eB825645e8595\",\n    Router: \"0x5F719c2F1095F7B9fc68a68e35B51194f4b6abe8\",\n    VaultReader: \"0x66eC8fc33A26feAEAe156afA3Cb46923651F6f0D\",\n    Reader: \"0x2eFEE1950ededC65De687b40Fd30a7B5f4544aBd\",\n    GlpManager: \"0xD152c7F25db7F4B95b7658323c5F33d176818EE4\",\n    RewardRouter: \"0x82147C5A7E850eA4E28155DF107F2590fD4ba327\",\n    GlpRewardRouter: \"0xB70B91CE0771d3f4c81D87660f71Da31d48eB3B3\",\n    RewardReader: \"0x04Fc11Bd28763872d143637a7c768bD96E44c1b6\",\n    NATIVE_TOKEN: \"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7\",\n    GLP: \"0x01234181085565ed162a948b6a5e88758CD7c7b8\",\n    GMX: \"0x62edc0692BD897D2295872a9FFCac5425011c661\",\n    ES_GMX: \"0xFf1489227BbAAC61a9209A08929E4c2a526DdD17\",\n    BN_GMX: \"0x8087a341D32D445d9aC8aCc9c14F5781E04A26d2\",\n    USDG: \"0xc0253c3cC6aa5Ab407b5795a04c28fB063273894\",\n    ES_GMX_IOU: \"0x6260101218eC4cCfFF1b778936C6f2400f95A954\", // placeholder address\n\n    StakedGmxTracker: \"0x2bD10f8E93B3669b6d42E74eEedC65dd1B0a1342\",\n    BonusGmxTracker: \"0x908C4D94D34924765f1eDc22A1DD098397c59dD4\",\n    FeeGmxTracker: \"0x4d268a7d4C16ceB5a606c173Bd974984343fea13\",\n    StakedGlpTracker: \"0x9e295B5B976a184B14aD8cd72413aD846C299660\",\n    FeeGlpTracker: \"0xd2D1162512F927a7e282Ef43a362659E4F2a728F\",\n\n    StakedGmxDistributor: \"0xfc5A1A6EB076a2C7aD06eD22C90d7E710E35ad0a\",\n    StakedGlpDistributor: \"0xDd593Cf40734199afc9207eBe9ffF23dA4Bf7720\",\n\n    GmxVester: \"0x472361d3cA5F49c8E633FB50385BfaD1e018b445\",\n    GlpVester: \"0x62331A7Bd1dfB3A7642B7db50B5509E57CA3154A\",\n\n    OrderBook: \"0x4296e307f108B2f583FF2F7B7270ee7831574Ae5\",\n    OrderExecutor: \"0x4296e307f108B2f583FF2F7B7270ee7831574Ae5\",\n    OrderBookReader: \"0xccFE3E576f8145403d3ce8f3c2f6519Dae40683B\",\n\n    PositionRouter: \"0xffF6D276Bc37c61A23f06410Dce4A400f66420f8\",\n    PositionManager: \"0xA21B83E579f4315951bA658654c371520BDcB866\",\n\n    TraderJoeGmxAvaxPool: \"0x0c91a070f862666bbcce281346be45766d874d98\",\n    ReferralStorage: \"0x827ed045002ecdabeb6e2b0d1604cf5fc3d322f8\",\n    ReferralReader: \"0x505Ce16D3017be7D76a7C2631C0590E71A975083\",\n\n    // Synthetics\n    DataStore: AddressZero,\n    EventEmitter: AddressZero,\n    ExchangeRouter: AddressZero,\n    DepositVault: AddressZero,\n    WithdrawalVault: AddressZero,\n    OrderVault: AddressZero,\n    SyntheticsReader: AddressZero,\n    SyntheticsReferralStorage: AddressZero,\n    SyntheticsRouter: AddressZero,\n\n    Multicall: \"0xcA11bde05977b3631167028862bE2a173976CA11\",\n  },\n\n  [AVALANCHE_FUJI]: {\n    Vault: AddressZero,\n    Router: AddressZero,\n    VaultReader: AddressZero,\n    Reader: AddressZero,\n    GlpManager: AddressZero,\n    RewardRouter: AddressZero,\n    RewardReader: AddressZero,\n    NATIVE_TOKEN: \"0x1D308089a2D1Ced3f1Ce36B1FcaF815b07217be3\",\n    GLP: AddressZero,\n    GMX: AddressZero,\n    ES_GMX: AddressZero,\n    BN_GMX: AddressZero,\n    USDG: AddressZero,\n    ES_GMX_IOU: AddressZero,\n\n    StakedGmxTracker: AddressZero,\n    BonusGmxTracker: AddressZero,\n    FeeGmxTracker: AddressZero,\n    StakedGlpTracker: AddressZero,\n    FeeGlpTracker: AddressZero,\n\n    StakedGmxDistributor: AddressZero,\n    StakedGlpDistributor: AddressZero,\n\n    GmxVester: AddressZero,\n    GlpVester: AddressZero,\n\n    OrderBook: AddressZero,\n    OrderExecutor: AddressZero,\n    OrderBookReader: AddressZero,\n\n    PositionRouter: AddressZero,\n    PositionManager: AddressZero,\n\n    TraderJoeGmxAvaxPool: AddressZero,\n    ReferralStorage: \"0x2138a6a72f8C5AEe7BA0B0905aA0e6c1467aC8b7\",\n    ReferralReader: AddressZero,\n\n    // Synthetics\n    DataStore: \"0xEeeC03190f1b54826f857de6EE8Dc9EbEfdD89B8\",\n    EventEmitter: \"0x771eb23Bd1Fd5c5485B6B984f2FBfc570bd001C7\",\n    ExchangeRouter: \"0xE1cdF389111Fa4077c092ddC0661fB02AB773342\",\n    DepositVault: \"0xB57e98c41248C2FBC142E84e127dB39e57b7e33D\",\n    WithdrawalVault: \"0x2bb36c35C70AB7A689e5C8514261430C316CdfD3\",\n    OrderVault: \"0x22263cfCA335C8563834A9CF989c83Ea6326BFFA\",\n    SyntheticsReader: \"0x055e1C3CADe35CC544e68927D8CA9659005369c8\",\n    SyntheticsReferralStorage: \"0x30Ca98257E87c4C3F97fA9d5c337661b84C131B1\",\n    SyntheticsRouter: \"0x4D1782e5eb3a49152Ed99d9A4e26eF1a55c2bF6f\",\n\n    Multicall: \"0xcA11bde05977b3631167028862bE2a173976CA11\",\n  },\n};\n\nexport function getContract(chainId: number, name: string): string {\n  if (!CONTRACTS[chainId]) {\n    throw new Error(`Unknown chainId ${chainId}`);\n  }\n\n  if (!CONTRACTS[chainId][name]) {\n    throw new Error(`Unknown contract \"${name}\" for chainId ${chainId}`);\n  }\n\n  return CONTRACTS[chainId][name];\n}\n","import { ARBITRUM, ARBITRUM_TESTNET, AVALANCHE, MAINNET } from \"./chains\";\n\nexport const GMX_STATS_API_URL = \"https://stats.gmx.io/api\";\n\nconst BACKEND_URLS = {\n  default: \"https://gmx-server-mainnet.uw.r.appspot.com\",\n\n  [MAINNET]: \"https://gambit-server-staging.uc.r.appspot.com\",\n  [ARBITRUM_TESTNET]: \"https://gambit-server-devnet.uc.r.appspot.com\",\n  [ARBITRUM]: \"https://gmx-server-mainnet.uw.r.appspot.com\",\n  [AVALANCHE]: \"https://gmx-avax-server.uc.r.appspot.com\",\n};\n\nexport function getServerBaseUrl(chainId: number) {\n  if (!chainId) {\n    throw new Error(\"chainId is not provided\");\n  }\n\n  if (document.location.hostname.includes(\"deploy-preview\")) {\n    const fromLocalStorage = localStorage.getItem(\"SERVER_BASE_URL\");\n    if (fromLocalStorage) {\n      return fromLocalStorage;\n    }\n  }\n\n  return BACKEND_URLS[chainId] || BACKEND_URLS.default;\n}\n\nexport function getServerUrl(chainId: number, path: string) {\n  return `${getServerBaseUrl(chainId)}${path}`;\n}\n","import { ethers } from \"ethers\";\nimport { getContract } from \"./contracts\";\nimport { ARBITRUM, ARBITRUM_TESTNET, AVALANCHE, AVALANCHE_FUJI, MAINNET, TESTNET } from \"./chains\";\nimport { Token } from \"domain/tokens\";\n\nexport const NATIVE_TOKEN_ADDRESS = ethers.constants.AddressZero;\n\nexport const TOKENS: { [chainId: number]: Token[] } = {\n  [MAINNET]: [\n    {\n      name: \"Bitcoin (BTCB)\",\n      symbol: \"BTC\",\n      decimals: 18,\n      address: \"0x7130d2A12B9BCbFAe4f2634d864A1Ee1Ce3Ead9c\",\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-bitcoin\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/14108/small/Binance-bitcoin.png\",\n    },\n    {\n      name: \"Ethereum\",\n      symbol: \"ETH\",\n      decimals: 18,\n      address: \"0x2170Ed0880ac9A755fd29B2688956BD959F933F8\",\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/ethereum\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png\",\n    },\n    {\n      name: \"Binance Coin\",\n      symbol: \"BNB\",\n      decimals: 18,\n      address: ethers.constants.AddressZero,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-coin\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/825/small/binance-coin-logo.png\",\n      isNative: true,\n    },\n    {\n      name: \"Wrapped Binance Coin\",\n      symbol: \"WBNB\",\n      decimals: 18,\n      address: getContract(MAINNET, \"NATIVE_TOKEN\"),\n      isWrapped: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-coin\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/825/small/binance-coin-logo.png\",\n      baseSymbol: \"BNB\",\n    },\n    {\n      name: \"USD Gambit\",\n      symbol: \"USDG\",\n      decimals: 18,\n      address: getContract(MAINNET, \"USDG\"),\n      isUsdg: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/usd-gambit\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/15886/small/usdg-02.png\",\n    },\n    {\n      name: \"Binance USD\",\n      symbol: \"BUSD\",\n      decimals: 18,\n      address: \"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56\",\n      isStable: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-usd\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/9576/small/BUSD.png\",\n    },\n    {\n      name: \"USD Coin\",\n      symbol: \"USDC\",\n      decimals: 18,\n      address: \"0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d\",\n      isStable: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/usd-coin\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/small/USD_Coin_icon.png\",\n    },\n    {\n      name: \"Tether\",\n      symbol: \"USDT\",\n      decimals: 18,\n      address: \"0x55d398326f99059fF775485246999027B3197955\",\n      isStable: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/tether\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/325/small/Tether-logo.png\",\n    },\n  ],\n  [TESTNET]: [\n    {\n      name: \"Bitcoin (BTCB)\",\n      symbol: \"BTC\",\n      decimals: 8,\n      address: \"0xb19C12715134bee7c4b1Ca593ee9E430dABe7b56\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/26115/thumb/btcb.png?1655921693\",\n    },\n    {\n      name: \"Ethereum\",\n      symbol: \"ETH\",\n      decimals: 18,\n      address: \"0x1958f7C067226c7C8Ac310Dc994D0cebAbfb2B02\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png?1595348880\",\n    },\n    {\n      name: \"Binance Coin\",\n      symbol: \"BNB\",\n      decimals: 18,\n      address: ethers.constants.AddressZero,\n      isNative: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/825/small/binance-coin-logo.png\",\n    },\n    {\n      name: \"Wrapped Binance Coin\",\n      symbol: \"WBNB\",\n      decimals: 18,\n      address: \"0x612777Eea37a44F7a95E3B101C39e1E2695fa6C2\",\n      isWrapped: true,\n      baseSymbol: \"BNB\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/825/small/binance-coin-logo.png\",\n    },\n    {\n      name: \"USD Gambit\",\n      symbol: \"USDG\",\n      decimals: 18,\n      address: getContract(TESTNET, \"USDG\"),\n      isUsdg: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/15886/small/usdg-02.png\",\n    },\n    {\n      name: \"Binance USD\",\n      symbol: \"BUSD\",\n      decimals: 18,\n      address: \"0x3F223C4E5ac67099CB695834b20cCd5E5D5AA9Ef\",\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/9576/small/BUSD.png\",\n    },\n  ],\n  [ARBITRUM_TESTNET]: [\n    {\n      name: \"Bitcoin\",\n      symbol: \"BTC\",\n      decimals: 8,\n      address: \"0x27960f9A322BE96A1535E6c19B3958e80E6a2670\",\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/7598/thumb/wrapped_bitcoin_wbtc.png?1548822744\",\n    },\n    {\n      name: \"Ethereum\",\n      symbol: \"ETH\",\n      decimals: 18,\n      address: ethers.constants.AddressZero,\n      isNative: true,\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png?1595348880\",\n    },\n    // https://github.com/OffchainLabs/arbitrum/blob/950c2f91b2e951cd3764394e0a73eac3797aecf3/packages/arb-ts/src/lib/networks.ts#L65\n    {\n      name: \"Wrapped Ethereum\",\n      symbol: \"WETH\",\n      decimals: 18,\n      address: \"0xB47e6A5f8b33b3F17603C83a0535A9dcD7E32681\",\n      isWrapped: true,\n      baseSymbol: \"ETH\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/2518/thumb/weth.png?1628852295\",\n    },\n    {\n      name: \"USD Coin\",\n      symbol: \"USDC\",\n      decimals: 6,\n      address: \"0xf0DCd4737A20ED33481A49De94C599944a3Ca737\",\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/thumb/USD_Coin_icon.png?1547042389\",\n    },\n    {\n      name: \"Tether\",\n      symbol: \"USDT\",\n      decimals: 6,\n      address: \"0x818ED84bA1927945b631016e0d402Db50cE8865f\",\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/325/small/Tether-logo.png\",\n    },\n  ],\n  [ARBITRUM]: [\n    {\n      name: \"Ethereum\",\n      symbol: \"ETH\",\n      decimals: 18,\n      address: ethers.constants.AddressZero,\n      isNative: true,\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png?1595348880\",\n    },\n    {\n      name: \"Wrapped Ethereum\",\n      symbol: \"WETH\",\n      decimals: 18,\n      address: \"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1\",\n      isWrapped: true,\n      baseSymbol: \"ETH\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/2518/thumb/weth.png?1628852295\",\n    },\n    {\n      name: \"Bitcoin (WBTC)\",\n      symbol: \"BTC\",\n      decimals: 8,\n      address: \"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f\",\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/7598/thumb/wrapped_bitcoin_wbtc.png?1548822744\",\n    },\n    {\n      name: \"Chainlink\",\n      symbol: \"LINK\",\n      decimals: 18,\n      address: \"0xf97f4df75117a78c1A5a0DBb814Af92458539FB4\",\n      isStable: false,\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/877/thumb/chainlink-new-logo.png?1547034700\",\n    },\n    {\n      name: \"Uniswap\",\n      symbol: \"UNI\",\n      decimals: 18,\n      address: \"0xFa7F8980b0f1E64A2062791cc3b0871572f1F7f0\",\n      isStable: false,\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/12504/thumb/uniswap-uni.png?1600306604\",\n    },\n    {\n      name: \"USD Coin\",\n      symbol: \"USDC\",\n      decimals: 6,\n      address: \"0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8\",\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/thumb/USD_Coin_icon.png?1547042389\",\n    },\n    {\n      name: \"Tether\",\n      symbol: \"USDT\",\n      decimals: 6,\n      address: \"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9\",\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/325/thumb/Tether-logo.png?1598003707\",\n    },\n    {\n      name: \"Dai\",\n      symbol: \"DAI\",\n      decimals: 18,\n      address: \"0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1\",\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/9956/thumb/4943.png?1636636734\",\n    },\n    {\n      name: \"Frax\",\n      symbol: \"FRAX\",\n      decimals: 18,\n      address: \"0x17FC002b466eEc40DaE837Fc4bE5c67993ddBd6F\",\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/13422/small/frax_logo.png?1608476506\",\n    },\n    {\n      name: \"Magic Internet Money\",\n      symbol: \"MIM\",\n      decimals: 18,\n      address: \"0xFEa7a6a0B346362BF88A9e4A88416B77a57D6c2A\",\n      isStable: true,\n      isTempHidden: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/16786/small/mimlogopng.png\",\n    },\n  ],\n  [AVALANCHE]: [\n    {\n      name: \"Avalanche\",\n      symbol: \"AVAX\",\n      decimals: 18,\n      address: ethers.constants.AddressZero,\n      isNative: true,\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/12559/small/coin-round-red.png?1604021818\",\n    },\n    {\n      name: \"Wrapped AVAX\",\n      symbol: \"WAVAX\",\n      decimals: 18,\n      address: \"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7\",\n      isWrapped: true,\n      baseSymbol: \"AVAX\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/12559/small/coin-round-red.png?1604021818\",\n    },\n    {\n      name: \"Ethereum (WETH.e)\",\n      symbol: \"ETH\",\n      address: \"0x49D5c2BdFfac6CE2BFdB6640F4F80f226bc10bAB\",\n      decimals: 18,\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png?1595348880\",\n    },\n    {\n      name: \"Bitcoin (BTC.b)\",\n      symbol: \"BTC\",\n      address: \"0x152b9d0FdC40C096757F570A51E494bd4b943E50\",\n      decimals: 8,\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/26115/thumb/btcb.png?1655921693\",\n    },\n    {\n      name: \"Bitcoin (WBTC.e)\",\n      symbol: \"WBTC\",\n      address: \"0x50b7545627a5162F82A992c33b87aDc75187B218\",\n      decimals: 8,\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/7598/thumb/wrapped_bitcoin_wbtc.png?1548822744\",\n    },\n    {\n      name: \"USD Coin\",\n      symbol: \"USDC\",\n      address: \"0xB97EF9Ef8734C71904D8002F8b6Bc66Dd9c48a6E\",\n      decimals: 6,\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/thumb/USD_Coin_icon.png?1547042389\",\n    },\n    {\n      name: \"USD Coin (USDC.e)\",\n      symbol: \"USDC.e\",\n      address: \"0xA7D7079b0FEaD91F3e65f86E8915Cb59c1a4C664\",\n      decimals: 6,\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/thumb/USD_Coin_icon.png?1547042389\",\n    },\n    {\n      name: \"Magic Internet Money\",\n      symbol: \"MIM\",\n      address: \"0x130966628846BFd36ff31a822705796e8cb8C18D\",\n      decimals: 18,\n      isStable: true,\n      isTempHidden: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/16786/small/mimlogopng.png\",\n    },\n  ],\n  [AVALANCHE_FUJI]: [\n    {\n      name: \"Avalanche\",\n      symbol: \"AVAX\",\n      decimals: 18,\n      address: ethers.constants.AddressZero,\n      isNative: true,\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/12559/small/coin-round-red.png?1604021818\",\n    },\n    {\n      name: \"Wrapped AVAX\",\n      symbol: \"WAVAX\",\n      decimals: 18,\n      address: \"0x1D308089a2D1Ced3f1Ce36B1FcaF815b07217be3\",\n      isWrapped: true,\n      baseSymbol: \"AVAX\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/12559/small/coin-round-red.png?1604021818\",\n    },\n    {\n      name: \"Ethereum (WETH.e)\",\n      symbol: \"ETH\",\n      address: \"0x82F0b3695Ed2324e55bbD9A9554cB4192EC3a514\",\n      decimals: 18,\n      isShortable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png?1595348880\",\n    },\n    {\n      name: \"USD Coin\",\n      symbol: \"USDC\",\n      address: \"0x3eBDeaA0DB3FfDe96E7a0DBBAFEC961FC50F725F\",\n      decimals: 6,\n      isStable: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/thumb/USD_Coin_icon.png?1547042389\",\n    },\n    {\n      name: \"Tether\",\n      symbol: \"USDT\",\n      decimals: 18,\n      address: \"0x6931eC3E364245E6d093aFA1F2e96cCe3F17538b\",\n      isStable: true,\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/tether\",\n      imageUrl: \"https://assets.coingecko.com/coins/images/325/small/Tether-logo.png\",\n    },\n  ],\n};\n\nexport const ADDITIONAL_TOKENS: { [chainId: number]: Token[] } = {\n  [ARBITRUM]: [\n    {\n      name: \"GMX\",\n      symbol: \"GMX\",\n      address: getContract(ARBITRUM, \"GMX\"),\n      decimals: 18,\n      imageUrl: \"https://assets.coingecko.com/coins/images/18323/small/arbit.png?1631532468\",\n    },\n    {\n      name: \"Escrowed GMX\",\n      symbol: \"esGMX\",\n      address: getContract(ARBITRUM, \"ES_GMX\"),\n      decimals: 18,\n    },\n    {\n      name: \"GMX LP\",\n      symbol: \"GLP\",\n      address: getContract(ARBITRUM, \"GLP\"),\n      decimals: 18,\n      imageUrl: \"https://github.com/gmx-io/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\n    },\n    {\n      name: \"GMX Market tokens\",\n      symbol: \"GM\",\n      address: \"<market-token-address>\",\n      decimals: 18,\n      imageUrl: \"https://github.com/gmx-io/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\n    },\n  ],\n  [AVALANCHE]: [\n    {\n      name: \"GMX\",\n      symbol: \"GMX\",\n      address: getContract(AVALANCHE, \"GMX\"),\n      decimals: 18,\n      imageUrl: \"https://assets.coingecko.com/coins/images/18323/small/arbit.png?1631532468\",\n    },\n    {\n      name: \"Escrowed GMX\",\n      symbol: \"esGMX\",\n      address: getContract(AVALANCHE, \"ES_GMX\"),\n      decimals: 18,\n    },\n    {\n      name: \"GMX LP\",\n      symbol: \"GLP\",\n      address: getContract(ARBITRUM, \"GLP\"),\n      decimals: 18,\n      imageUrl: \"https://github.com/gmx-io/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\n    },\n    {\n      name: \"GMX Market tokens\",\n      symbol: \"GM\",\n      address: \"<market-token-address>\",\n      decimals: 18,\n      imageUrl: \"https://github.com/gmx-io/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\n    },\n  ],\n  [AVALANCHE_FUJI]: [\n    {\n      name: \"GMX\",\n      symbol: \"GMX\",\n      address: getContract(AVALANCHE, \"GMX\"),\n      decimals: 18,\n      imageUrl: \"https://assets.coingecko.com/coins/images/18323/small/arbit.png?1631532468\",\n    },\n    {\n      name: \"Escrowed GMX\",\n      symbol: \"esGMX\",\n      address: getContract(AVALANCHE, \"ES_GMX\"),\n      decimals: 18,\n    },\n    {\n      name: \"GMX LP\",\n      symbol: \"GLP\",\n      address: getContract(ARBITRUM, \"GLP\"),\n      decimals: 18,\n      imageUrl: \"https://github.com/gmx-io/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\n    },\n    {\n      name: \"GMX Market tokens\",\n      symbol: \"GM\",\n      address: \"<market-token-address>\",\n      decimals: 18,\n      imageUrl: \"https://github.com/gmx-io/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\n    },\n  ],\n};\n\nconst AVAILABLE_CHART_TOKENS = {\n  [ARBITRUM]: [\"ETH\", \"BTC\", \"LINK\", \"UNI\"],\n  [AVALANCHE]: [\"AVAX\", \"ETH\", \"BTC\"],\n  [AVALANCHE_FUJI]: [\"AVAX\", \"ETH\", \"BTC\", \"SOL\"],\n};\n\nexport const SYNTHETIC_TOKENS = {\n  [AVALANCHE]: [],\n  [ARBITRUM]: [],\n  [AVALANCHE_FUJI]: [\n    {\n      name: \"Solana\",\n      symbol: \"SOL\",\n      decimals: 18,\n      address: \"0x36E6dc3CF44FDb8C62c5a11B457A28041f4C6eEF\",\n      isShortable: true,\n      isSynthetic: true,\n      imageUrl: \"https://assets.coingecko.com/coins/images/4128/small/solana.png?1640133422\",\n    },\n  ],\n};\n\nexport const PLATFORM_TOKENS: { [chainId: number]: { [symbol: string]: Token } } = {\n  [ARBITRUM]: {\n    // arbitrum\n    GMX: {\n      name: \"GMX\",\n      symbol: \"GMX\",\n      decimals: 18,\n      address: getContract(ARBITRUM, \"GMX\"),\n      imageUrl: \"https://assets.coingecko.com/coins/images/18323/small/arbit.png?1631532468\",\n    },\n    GLP: {\n      name: \"GMX LP\",\n      symbol: \"GLP\",\n      decimals: 18,\n      address: getContract(ARBITRUM, \"StakedGlpTracker\"), // address of fsGLP token because user only holds fsGLP\n      imageUrl: \"https://github.com/gmx-io/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\n    },\n    GM: {\n      name: \"GMX Market tokens\",\n      symbol: \"GM\",\n      address: \"<market-token-address>\",\n      decimals: 18,\n      imageUrl: \"https://github.com/gmx-io/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\n    },\n  },\n  [AVALANCHE]: {\n    // avalanche\n    GMX: {\n      name: \"GMX\",\n      symbol: \"GMX\",\n      decimals: 18,\n      address: getContract(AVALANCHE, \"GMX\"),\n      imageUrl: \"https://assets.coingecko.com/coins/images/18323/small/arbit.png?1631532468\",\n    },\n    GLP: {\n      name: \"GMX LP\",\n      symbol: \"GLP\",\n      decimals: 18,\n      address: getContract(AVALANCHE, \"StakedGlpTracker\"), // address of fsGLP token because user only holds fsGLP\n      imageUrl: \"https://github.com/gmx-io/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\n    },\n    GM: {\n      name: \"GMX Market tokens\",\n      symbol: \"GM\",\n      address: \"<market-token-address>\",\n      decimals: 18,\n      imageUrl: \"https://github.com/gmx-io/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\n    },\n  },\n};\n\nexport const EXPLORER_LINKS = {\n  [ARBITRUM_TESTNET]: {\n    GMX: {\n      coingecko: \"https://www.coingecko.com/en/coins/gmx\",\n      arbitrum: \"https://arbiscan.io/address/0xfc5a1a6eb076a2c7ad06ed22c90d7e710e35ad0a\",\n    },\n    GLP: {\n      arbitrum: \"https://testnet.arbiscan.io/token/0xb4f81Fa74e06b5f762A104e47276BA9b2929cb27\",\n    },\n  },\n  [ARBITRUM]: {\n    GMX: {\n      coingecko: \"https://www.coingecko.com/en/coins/gmx\",\n      arbitrum: \"https://arbiscan.io/address/0xfc5a1a6eb076a2c7ad06ed22c90d7e710e35ad0a\",\n    },\n    GLP: {\n      arbitrum: \"https://arbiscan.io/token/0x1aDDD80E6039594eE970E5872D247bf0414C8903\",\n      reserves: \"https://portfolio.nansen.ai/dashboard/gmx?chain=ARBITRUM\",\n    },\n    GM: {\n      coingecko: \"https://www.coingecko.com/en/coins/gmx\",\n      arbitrum: \"https://arbiscan.io/address/0xfc5a1a6eb076a2c7ad06ed22c90d7e710e35ad0a\",\n    },\n    ETH: {\n      coingecko: \"https://www.coingecko.com/en/coins/ethereum\",\n    },\n    BTC: {\n      coingecko: \"https://www.coingecko.com/en/coins/wrapped-bitcoin\",\n      arbitrum: \"https://arbiscan.io/address/0x2f2a2543b76a4166549f7aab2e75bef0aefc5b0f\",\n    },\n    LINK: {\n      coingecko: \"https://www.coingecko.com/en/coins/chainlink\",\n      arbitrum: \"https://arbiscan.io/address/0xf97f4df75117a78c1a5a0dbb814af92458539fb4\",\n    },\n    UNI: {\n      coingecko: \"https://www.coingecko.com/en/coins/uniswap\",\n      arbitrum: \"https://arbiscan.io/address/0xfa7f8980b0f1e64a2062791cc3b0871572f1f7f0\",\n    },\n    USDC: {\n      coingecko: \"https://www.coingecko.com/en/coins/usd-coin\",\n      arbitrum: \"https://arbiscan.io/address/0xff970a61a04b1ca14834a43f5de4533ebddb5cc8\",\n    },\n    USDT: {\n      coingecko: \"https://www.coingecko.com/en/coins/tether\",\n      arbitrum: \"https://arbiscan.io/address/0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9\",\n    },\n    DAI: {\n      coingecko: \"https://www.coingecko.com/en/coins/dai\",\n      arbitrum: \"https://arbiscan.io/address/0xda10009cbd5d07dd0cecc66161fc93d7c9000da1\",\n    },\n    MIM: {\n      coingecko: \"https://www.coingecko.com/en/coins/magic-internet-money\",\n      arbitrum: \"https://arbiscan.io/address/0xfea7a6a0b346362bf88a9e4a88416b77a57d6c2a\",\n    },\n    FRAX: {\n      coingecko: \"https://www.coingecko.com/en/coins/frax\",\n      arbitrum: \"https://arbiscan.io/address/0x17fc002b466eec40dae837fc4be5c67993ddbd6f\",\n    },\n  },\n  [AVALANCHE]: {\n    GMX: {\n      coingecko: \"https://www.coingecko.com/en/coins/gmx\",\n      avalanche: \"https://snowtrace.io/address/0x62edc0692bd897d2295872a9ffcac5425011c661\",\n    },\n    GLP: {\n      avalanche: \"https://snowtrace.io/address/0x9e295B5B976a184B14aD8cd72413aD846C299660\",\n      reserves: \"https://portfolio.nansen.ai/dashboard/gmx?chain=AVAX\",\n    },\n    GM: {\n      coingecko: \"https://www.coingecko.com/en/coins/gmx\",\n      arbitrum: \"https://arbiscan.io/address/0xfc5a1a6eb076a2c7ad06ed22c90d7e710e35ad0a\",\n    },\n    AVAX: {\n      coingecko: \"https://www.coingecko.com/en/coins/avalanche\",\n    },\n    ETH: {\n      coingecko: \"https://www.coingecko.com/en/coins/weth\",\n      avalanche: \"https://snowtrace.io/address/0x49d5c2bdffac6ce2bfdb6640f4f80f226bc10bab\",\n    },\n    WBTC: {\n      coingecko: \"https://www.coingecko.com/en/coins/wrapped-bitcoin\",\n      avalanche: \"https://snowtrace.io/address/0x50b7545627a5162f82a992c33b87adc75187b218\",\n    },\n    BTC: {\n      coingecko: \"https://www.coingecko.com/en/coins/bitcoin-avalanche-bridged-btc-b\",\n      avalanche: \"https://snowtrace.io/address/0x152b9d0FdC40C096757F570A51E494bd4b943E50\",\n    },\n    MIM: {\n      coingecko: \"https://www.coingecko.com/en/coins/magic-internet-money\",\n      avalanche: \"https://snowtrace.io/address/0x130966628846bfd36ff31a822705796e8cb8c18d\",\n    },\n    USDC: {\n      coingecko: \"https://www.coingecko.com/en/coins/usd-coin\",\n      avalanche: \"https://snowtrace.io/address/0xb97ef9ef8734c71904d8002f8b6bc66dd9c48a6e\",\n    },\n    \"USDC.e\": {\n      coingecko: \"https://www.coingecko.com/en/coins/usd-coin-avalanche-bridged-usdc-e\",\n      avalanche: \"https://snowtrace.io/address/0xa7d7079b0fead91f3e65f86e8915cb59c1a4c664\",\n    },\n  },\n  [AVALANCHE_FUJI]: {\n    AVAX: {\n      coingecko: \"https://www.coingecko.com/en/coins/avalanche\",\n    },\n    ETH: {\n      coingecko: \"https://www.coingecko.com/en/coins/weth\",\n      avalanche: \"https://testnet.snowtrace.io/address/0x82F0b3695Ed2324e55bbD9A9554cB4192EC3a514\",\n    },\n    USDC: {\n      coingecko: \"https://www.coingecko.com/en/coins/usd-coin\",\n      avalanche: \"https://testnet.snowtrace.io/address/0x3eBDeaA0DB3FfDe96E7a0DBBAFEC961FC50F725F\",\n    },\n  },\n};\n\nexport const GLP_POOL_COLORS = {\n  ETH: \"#6062a6\",\n  BTC: \"#F7931A\",\n  WBTC: \"#F7931A\",\n  USDC: \"#2775CA\",\n  \"USDC.e\": \"#2A5ADA\",\n  USDT: \"#67B18A\",\n  MIM: \"#9695F8\",\n  FRAX: \"#000\",\n  DAI: \"#FAC044\",\n  UNI: \"#E9167C\",\n  AVAX: \"#E84142\",\n  LINK: \"#3256D6\",\n};\n\nexport const TOKENS_MAP: { [chainId: number]: { [address: string]: Token } } = {};\nexport const TOKENS_BY_SYMBOL_MAP: { [chainId: number]: { [symbol: string]: Token } } = {};\nexport const WRAPPED_TOKENS_MAP: { [chainId: number]: Token } = {};\nexport const NATIVE_TOKENS_MAP: { [chainId: number]: Token } = {};\n\nconst CHAIN_IDS = [MAINNET, TESTNET, ARBITRUM, ARBITRUM_TESTNET, AVALANCHE, AVALANCHE_FUJI];\n\nfor (let j = 0; j < CHAIN_IDS.length; j++) {\n  const chainId = CHAIN_IDS[j];\n\n  TOKENS_MAP[chainId] = {};\n  TOKENS_BY_SYMBOL_MAP[chainId] = {};\n\n  let tokens = TOKENS[chainId];\n\n  if (ADDITIONAL_TOKENS[chainId]) {\n    tokens = tokens.concat(ADDITIONAL_TOKENS[chainId]);\n  }\n\n  if (SYNTHETIC_TOKENS[chainId]) {\n    tokens = tokens.concat(SYNTHETIC_TOKENS[chainId]);\n  }\n\n  for (let i = 0; i < tokens.length; i++) {\n    const token = tokens[i];\n    TOKENS_MAP[chainId][token.address] = token;\n    TOKENS_BY_SYMBOL_MAP[chainId][token.symbol] = token;\n  }\n}\n\nfor (const chainId of CHAIN_IDS) {\n  for (const token of TOKENS[chainId]) {\n    if (token.isWrapped) {\n      WRAPPED_TOKENS_MAP[chainId] = token;\n    } else if (token.isNative) {\n      NATIVE_TOKENS_MAP[chainId] = token;\n    }\n  }\n}\n\nfor (const chainId of CHAIN_IDS) {\n  NATIVE_TOKENS_MAP[chainId].wrappedAddress = WRAPPED_TOKENS_MAP[chainId].address;\n}\n\nexport function getWrappedToken(chainId: number) {\n  return WRAPPED_TOKENS_MAP[chainId];\n}\n\nexport function getNativeToken(chainId: number) {\n  return NATIVE_TOKENS_MAP[chainId];\n}\n\nexport function getTokens(chainId: number) {\n  return TOKENS[chainId];\n}\n\nexport function getTokensMap(chainId: number) {\n  return TOKENS_MAP[chainId];\n}\n\nexport function isValidToken(chainId: number, address: string) {\n  if (!TOKENS_MAP[chainId]) {\n    throw new Error(`Incorrect chainId ${chainId}`);\n  }\n  return address in TOKENS_MAP[chainId];\n}\n\nexport function getToken(chainId: number, address: string) {\n  if (!TOKENS_MAP[chainId]) {\n    throw new Error(`Incorrect chainId ${chainId}`);\n  }\n  if (!TOKENS_MAP[chainId][address]) {\n    throw new Error(`Incorrect address \"${address}\" for chainId ${chainId}`);\n  }\n\n  return TOKENS_MAP[chainId][address];\n}\n\nexport function getTokenBySymbol(chainId: number, symbol: string) {\n  const token = TOKENS_BY_SYMBOL_MAP[chainId][symbol];\n  if (!token) {\n    throw new Error(`Incorrect symbol \"${symbol}\" for chainId ${chainId}`);\n  }\n  return token;\n}\n\nexport function convertTokenAddress(chainId: number, address: string, convertTo?: \"wrapped\" | \"native\") {\n  const wrappedToken = getWrappedToken(chainId);\n\n  if (convertTo === \"wrapped\" && address === NATIVE_TOKEN_ADDRESS) {\n    return wrappedToken.address;\n  }\n\n  if (convertTo === \"native\" && address === wrappedToken.address) {\n    return NATIVE_TOKEN_ADDRESS;\n  }\n\n  return address;\n}\n\nexport function getWhitelistedTokens(chainId: number) {\n  return TOKENS[chainId].filter((token) => token.symbol !== \"USDG\");\n}\n\nexport function getAvailableTradeTokens(chainId: number, p: { includeSynthetic?: boolean } = {}) {\n  const tokens = getWhitelistedTokens(chainId).filter((token) => !token.isTempHidden);\n\n  if (p.includeSynthetic && SYNTHETIC_TOKENS[chainId]) {\n    return tokens.concat(SYNTHETIC_TOKENS[chainId]);\n  }\n\n  return tokens;\n}\n\nexport function getVisibleTokens(chainId: number) {\n  return getWhitelistedTokens(chainId).filter((token) => !token.isWrapped && !token.isTempHidden);\n}\n\nexport function getNormalizedTokenSymbol(tokenSymbol) {\n  if ([\"WBTC\", \"WETH\", \"WAVAX\"].includes(tokenSymbol)) {\n    return tokenSymbol.substr(1);\n  } else if (tokenSymbol === \"BTC.b\") {\n    return \"BTC\";\n  }\n  return tokenSymbol;\n}\n\nexport function isChartAvailabeForToken(chainId: number, tokenSymbol: string) {\n  const token = getTokenBySymbol(chainId, tokenSymbol);\n  if (!token) return false;\n  return (token.isStable || AVAILABLE_CHART_TOKENS[chainId]?.includes(getNormalizedTokenSymbol(tokenSymbol))) ?? false;\n}\n","import { BigNumber, BigNumberish, ethers } from \"ethers\";\nimport { BASIS_POINTS_DIVISOR, PRECISION, USD_DECIMALS } from \"./legacy\";\n\nexport function bigNumberify(n?: BigNumberish) {\n  try {\n    return BigNumber.from(n);\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.error(\"bigNumberify error\", e);\n    return undefined;\n  }\n}\n\nexport function expandDecimals(n: BigNumberish, decimals: number): BigNumber {\n  // @ts-ignore\n  return bigNumberify(n).mul(bigNumberify(10).pow(decimals));\n}\n\nexport const trimZeroDecimals = (amount: string) => {\n  if (parseFloat(amount) === parseInt(amount)) {\n    return parseInt(amount).toString();\n  }\n  return amount;\n};\n\nexport const limitDecimals = (amount: BigNumberish, maxDecimals?: number) => {\n  let amountStr = amount.toString();\n  if (maxDecimals === undefined) {\n    return amountStr;\n  }\n  if (maxDecimals === 0) {\n    return amountStr.split(\".\")[0];\n  }\n  const dotIndex = amountStr.indexOf(\".\");\n  if (dotIndex !== -1) {\n    let decimals = amountStr.length - dotIndex - 1;\n    if (decimals > maxDecimals) {\n      amountStr = amountStr.substr(0, amountStr.length - (decimals - maxDecimals));\n    }\n  }\n  return amountStr;\n};\n\nexport const padDecimals = (amount: BigNumberish, minDecimals: number) => {\n  let amountStr = amount.toString();\n  const dotIndex = amountStr.indexOf(\".\");\n  if (dotIndex !== -1) {\n    const decimals = amountStr.length - dotIndex - 1;\n    if (decimals < minDecimals) {\n      amountStr = amountStr.padEnd(amountStr.length + (minDecimals - decimals), \"0\");\n    }\n  } else {\n    amountStr = amountStr + \".0000\";\n  }\n  return amountStr;\n};\n\nexport const formatAmount = (\n  amount: BigNumberish | undefined,\n  tokenDecimals: number,\n  displayDecimals?: number,\n  useCommas?: boolean,\n  defaultValue?: string\n) => {\n  if (!defaultValue) {\n    defaultValue = \"...\";\n  }\n  if (amount === undefined || amount.toString().length === 0) {\n    return defaultValue;\n  }\n  if (displayDecimals === undefined) {\n    displayDecimals = 4;\n  }\n  let amountStr = ethers.utils.formatUnits(amount, tokenDecimals);\n  amountStr = limitDecimals(amountStr, displayDecimals);\n  if (displayDecimals !== 0) {\n    amountStr = padDecimals(amountStr, displayDecimals);\n  }\n  if (useCommas) {\n    return numberWithCommas(amountStr);\n  }\n  return amountStr;\n};\n\nexport const formatKeyAmount = (\n  map: any,\n  key: string,\n  tokenDecimals: number,\n  displayDecimals: number,\n  useCommas?: boolean\n) => {\n  if (!map || !map[key]) {\n    return \"...\";\n  }\n\n  return formatAmount(map[key], tokenDecimals, displayDecimals, useCommas);\n};\n\nexport const formatArrayAmount = (\n  arr: any[],\n  index: number,\n  tokenDecimals: number,\n  displayDecimals?: number,\n  useCommas?: boolean\n) => {\n  if (!arr || !arr[index]) {\n    return \"...\";\n  }\n\n  return formatAmount(arr[index], tokenDecimals, displayDecimals, useCommas);\n};\n\nexport const formatAmountFree = (amount: BigNumberish, tokenDecimals: number, displayDecimals?: number) => {\n  if (!amount) {\n    return \"...\";\n  }\n  let amountStr = ethers.utils.formatUnits(amount, tokenDecimals);\n  amountStr = limitDecimals(amountStr, displayDecimals);\n  return trimZeroDecimals(amountStr);\n};\n\nexport function formatUsd(usd?: BigNumber, opts: { fallbackToZero?: boolean; displayDecimals?: number } = {}) {\n  const { fallbackToZero = false, displayDecimals = 2 } = opts;\n\n  if (!usd) {\n    if (fallbackToZero) {\n      usd = BigNumber.from(0);\n    } else {\n      return undefined;\n    }\n  }\n\n  const sign = usd.lt(0) ? \"-\" : \"\";\n\n  return `${sign}$${formatAmount(usd.abs(), USD_DECIMALS, displayDecimals, true)}`;\n}\n\nexport function formatDeltaUsd(deltaUsd?: BigNumber, percentage?: BigNumber, opts: { fallbackToZero?: boolean } = {}) {\n  if (!deltaUsd) {\n    if (opts.fallbackToZero) {\n      return `${formatUsd(BigNumber.from(0))} (${formatAmount(BigNumber.from(0), 2, 2)}%)`;\n    }\n\n    return undefined;\n  }\n\n  let sign = \"\";\n  if (!deltaUsd.eq(0)) {\n    sign = deltaUsd?.gt(0) ? \"+\" : \"-\";\n  }\n\n  const percentageStr = percentage ? ` (${sign}${formatPercentage(percentage.abs())})` : \"\";\n\n  return `${sign}${formatUsd(deltaUsd.abs())}${percentageStr}`;\n}\n\nexport function formatPercentage(percentage?: BigNumber, opts: { fallbackToZero?: boolean; signed?: boolean } = {}) {\n  const { fallbackToZero = false, signed = false } = opts;\n\n  if (!percentage) {\n    if (fallbackToZero) {\n      return `${formatAmount(BigNumber.from(0), 2, 2)}%`;\n    }\n\n    return undefined;\n  }\n\n  let sign = \"\";\n\n  if (signed && !percentage.eq(0)) {\n    sign = percentage?.gt(0) ? \"+\" : \"-\";\n  }\n\n  return `${sign}${formatAmount(percentage.abs(), 2, 2)}%`;\n}\n\nexport function formatTokenAmount(\n  amount?: BigNumber,\n  tokenDecimals?: number,\n  symbol?: string,\n  opts: {\n    showAllSignificant?: boolean;\n    displayDecimals?: number;\n    fallbackToZero?: boolean;\n    useCommas?: boolean;\n  } = {}\n) {\n  const { displayDecimals = 4, showAllSignificant = false, fallbackToZero = false, useCommas = false } = opts;\n\n  const symbolStr = symbol ? `${symbol}` : \"\";\n\n  if (!amount || !tokenDecimals) {\n    if (fallbackToZero) {\n      amount = BigNumber.from(0);\n      tokenDecimals = displayDecimals;\n    } else {\n      return undefined;\n    }\n  }\n\n  const formattedAmount = showAllSignificant\n    ? formatAmountFree(amount, tokenDecimals, tokenDecimals)\n    : formatAmount(amount, tokenDecimals, displayDecimals, useCommas);\n\n  return `${formattedAmount}${symbolStr}`;\n}\n\nexport function formatTokenAmountWithUsd(\n  tokenAmount?: BigNumber,\n  usdAmount?: BigNumber,\n  tokenSymbol?: string,\n  tokenDecimals?: number,\n  opts: {\n    fallbackToZero?: boolean;\n    displayDecimals?: number;\n  } = {}\n) {\n  if (!tokenAmount || !usdAmount || !tokenSymbol || !tokenDecimals) {\n    if (!opts.fallbackToZero) {\n      return undefined;\n    }\n  }\n\n  const tokenStr = formatTokenAmount(tokenAmount, tokenDecimals, tokenSymbol, opts);\n\n  const usdStr = formatUsd(usdAmount, {\n    fallbackToZero: opts.fallbackToZero,\n  });\n\n  return `${tokenStr} (${usdStr})`;\n}\n\nexport const parseValue = (value: string, tokenDecimals: number) => {\n  const pValue = parseFloat(value);\n\n  if (isNaN(pValue)) {\n    return undefined;\n  }\n\n  value = limitDecimals(value, tokenDecimals);\n  const amount = ethers.utils.parseUnits(value, tokenDecimals);\n  return bigNumberify(amount);\n};\n\nexport function numberWithCommas(x: BigNumberish) {\n  if (!x) {\n    return \"...\";\n  }\n\n  var parts = x.toString().split(\".\");\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  return parts.join(\".\");\n}\n\nexport function roundUpDivision(a: BigNumber, b: BigNumber) {\n  if (a.lt(0)) {\n    return a.sub(b).add(1).div(b);\n  }\n\n  return a.add(b).sub(1).div(b);\n}\n\nexport function applyFactor(value: BigNumber, factor: BigNumber) {\n  return value.mul(factor).div(PRECISION);\n}\n\nexport function getBasisPoints(numerator: BigNumber, denominator: BigNumber) {\n  return numerator.mul(BASIS_POINTS_DIVISOR).div(denominator);\n}\n","import { getExplorerUrl } from \"config/chains\";\nimport { getVisibleTokens, getWhitelistedTokens } from \"config/tokens\";\nimport { BigNumber, ethers } from \"ethers\";\nimport {\n  DUST_BNB,\n  MARKET,\n  MINT_BURN_FEE_BASIS_POINTS,\n  PRECISION,\n  TAX_BASIS_POINTS,\n  USDG_ADDRESS,\n  USDG_DECIMALS,\n  USD_DECIMALS,\n  adjustForDecimals,\n  getFeeBasisPoints,\n} from \"lib/legacy\";\nimport { bigNumberify, expandDecimals } from \"lib/numbers\";\nimport { InfoTokens, Token, TokenInfo } from \"./types\";\nconst { AddressZero } = ethers.constants;\n\nexport function getTokenUrl(chainId: number, address: string) {\n  if (!address) {\n    return getExplorerUrl(chainId);\n  }\n  return getExplorerUrl(chainId) + \"token/\" + address;\n}\n\nexport function getIsEquivalentTokens(token1: Token, token2: Token) {\n  if (token1.address === token2.address) {\n    return true;\n  }\n\n  if (token1.wrappedAddress === token2.address || token2.wrappedAddress === token1.address) {\n    return true;\n  }\n}\n\nexport function getIsWrap(token1: Token, token2: Token) {\n  return token1.isNative && token2.isWrapped;\n}\n\nexport function getIsUnwrap(token1: Token, token2: Token) {\n  return token1.isWrapped && token2.isNative;\n}\n\nexport function getUsd(\n  amount: BigNumber | undefined,\n  tokenAddress: string,\n  max: boolean,\n  infoTokens: InfoTokens,\n  orderOption?: string,\n  triggerPriceUsd?: BigNumber\n) {\n  if (!amount) {\n    return;\n  }\n  if (tokenAddress === USDG_ADDRESS) {\n    return amount.mul(PRECISION).div(expandDecimals(1, 18));\n  }\n  const info = getTokenInfo(infoTokens, tokenAddress);\n  const price = getTriggerPrice(tokenAddress, max, info, orderOption, triggerPriceUsd);\n  if (!price) {\n    return;\n  }\n\n  return amount.mul(price).div(expandDecimals(1, info.decimals));\n}\n\nexport function getTokenAmountFromUsd(\n  infoTokens: InfoTokens,\n  tokenAddress: string,\n  usdAmount?: BigNumber,\n  opts: {\n    max?: boolean;\n    overridePrice?: BigNumber;\n  } = {}\n) {\n  if (!usdAmount) {\n    return;\n  }\n\n  if (tokenAddress === USDG_ADDRESS) {\n    return usdAmount.mul(expandDecimals(1, 18)).div(PRECISION);\n  }\n\n  const info: TokenInfo | undefined = getTokenInfo(infoTokens, tokenAddress);\n\n  if (!info) {\n    return;\n  }\n\n  const price = opts.overridePrice || (opts.max ? info.maxPrice : info.minPrice);\n\n  if (!BigNumber.isBigNumber(price) || price.lte(0)) {\n    return;\n  }\n\n  return usdAmount.mul(expandDecimals(1, info.decimals)).div(price);\n}\n\nexport function getTriggerPrice(\n  tokenAddress: string,\n  max: boolean,\n  info: TokenInfo,\n  orderOption?: string,\n  triggerPriceUsd?: BigNumber\n) {\n  // Limit/stop orders are executed with price specified by user\n  if (orderOption && orderOption !== MARKET && triggerPriceUsd) {\n    return triggerPriceUsd;\n  }\n\n  // Market orders are executed with current market price\n  if (!info) {\n    return;\n  }\n  if (max && !info.maxPrice) {\n    return;\n  }\n  if (!max && !info.minPrice) {\n    return;\n  }\n  return max ? info.maxPrice : info.minPrice;\n}\n\nexport function getTokenInfo(\n  infoTokens: InfoTokens,\n  tokenAddress: string,\n  replaceNative?: boolean,\n  nativeTokenAddress?: string\n) {\n  if (replaceNative && tokenAddress === nativeTokenAddress) {\n    return infoTokens[AddressZero];\n  }\n\n  return infoTokens[tokenAddress];\n}\n\nexport function getLowestFeeTokenForBuyGlp(\n  chainId: number,\n  toAmount: BigNumber,\n  glpPrice: BigNumber,\n  usdgSupply: BigNumber,\n  totalTokenWeights: BigNumber,\n  infoTokens: InfoTokens,\n  fromTokenAddress: string,\n  swapUsdMin: BigNumber\n): { token: Token; fees: number; amountLeftToDeposit: BigNumber } | undefined {\n  if (!chainId || !toAmount || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights || !swapUsdMin) {\n    return;\n  }\n\n  const tokens = getVisibleTokens(chainId);\n\n  const usdgAmount = toAmount.mul(glpPrice).div(PRECISION);\n\n  const tokensData = tokens.map((token) => {\n    const fromToken = getTokenInfo(infoTokens, token.address);\n\n    const fees = getFeeBasisPoints(\n      fromToken,\n      fromToken.usdgAmount,\n      usdgAmount,\n      MINT_BURN_FEE_BASIS_POINTS,\n      TAX_BASIS_POINTS,\n      true,\n      usdgSupply,\n      totalTokenWeights\n    );\n\n    let amountLeftToDeposit = bigNumberify(0)!;\n\n    if (\n      fromToken.maxUsdgAmount &&\n      fromToken.maxUsdgAmount.gt(0) &&\n      fromToken.usdgAmount &&\n      fromToken.usdgAmount.gt(0)\n    ) {\n      amountLeftToDeposit = fromToken.maxUsdgAmount\n        .sub(fromToken.usdgAmount)\n        .mul(expandDecimals(1, USD_DECIMALS))\n        .div(expandDecimals(1, USDG_DECIMALS));\n    }\n    return { token, fees, amountLeftToDeposit };\n  });\n\n  const tokensWithLiquidity = tokensData\n    .filter(\n      (asset) =>\n        asset.token.address !== fromTokenAddress &&\n        asset.hasOwnProperty(\"fees\") &&\n        swapUsdMin.lt(asset.amountLeftToDeposit)\n    )\n    .sort((a, b) => a.fees - b.fees);\n\n  return tokensWithLiquidity.length > 0\n    ? tokensWithLiquidity[0]\n    : tokensData.sort((a, b) => Number(b.amountLeftToDeposit.sub(a.amountLeftToDeposit)))[0];\n}\n\nexport function getMostAbundantStableToken(chainId: number, infoTokens: InfoTokens) {\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  let availableAmount;\n  let stableToken = whitelistedTokens.find((t) => t.isStable);\n\n  for (let i = 0; i < whitelistedTokens.length; i++) {\n    const info = getTokenInfo(infoTokens, whitelistedTokens[i].address);\n    if (!info.isStable || !info.availableAmount) {\n      continue;\n    }\n\n    const adjustedAvailableAmount = adjustForDecimals(info.availableAmount, info.decimals, USD_DECIMALS);\n    if (!availableAmount || adjustedAvailableAmount.gt(availableAmount)) {\n      availableAmount = adjustedAvailableAmount;\n      stableToken = info;\n    }\n  }\n\n  return stableToken as TokenInfo;\n}\n\nexport function shouldRaiseGasError(token: TokenInfo, amount?: BigNumber) {\n  if (!amount) {\n    return false;\n  }\n  if (token.address !== AddressZero) {\n    return false;\n  }\n  if (!token.balance) {\n    return false;\n  }\n  if (amount.gte(token.balance)) {\n    return true;\n  }\n  if (token.balance.sub(amount).lt(DUST_BNB)) {\n    return true;\n  }\n  return false;\n}\n\nexport const replaceNativeTokenAddress = (path: string[], nativeTokenAddress: string) => {\n  if (!path) {\n    return;\n  }\n\n  let updatedPath: string[] = [];\n\n  for (let i = 0; i < path.length; i++) {\n    let address = path[i];\n    if (address === AddressZero) {\n      address = nativeTokenAddress;\n    }\n    updatedPath.push(address);\n  }\n\n  return updatedPath;\n};\n\nexport function getSpread(p: { minPrice: BigNumber; maxPrice: BigNumber }): BigNumber {\n  const diff = p.maxPrice.sub(p.minPrice);\n  return diff.mul(PRECISION).div(p.maxPrice.add(p.minPrice).div(2));\n}\n","import { toast, ToastContent, ToastOptions } from \"react-toastify\";\n\nexport const helperToast = {\n  success: (content: ToastContent, opts?: ToastOptions) => {\n    toast.dismiss();\n    toast.success(content, opts);\n  },\n  error: (content: ToastContent, opts?: ToastOptions) => {\n    toast.dismiss();\n    toast.error(content, opts);\n  },\n};\n","import { useState } from \"react\";\n\nexport function ToastifyDebug(props) {\n  const [open, setOpen] = useState(false);\n  return (\n    <div className=\"Toastify-debug\">\n      <span className=\"Toastify-debug-button\" onClick={() => setOpen((old) => !old)}>\n        {open ? \"Hide error\" : \"Show error\"}\n      </span>\n      {open && <div className=\"Toastify-debug-content\">{props.children}</div>}\n    </div>\n  );\n}\n","export const NOT_ENOUGH_FUNDS = \"NOT_ENOUGH_FUNDS\";\nexport const USER_DENIED = \"USER_DENIED\";\nexport const SLIPPAGE = \"SLIPPAGE\";\nexport const RPC_ERROR = \"RPC_ERROR\";\nexport const NETWORK_CHANGED = \"NETWORK_CHANGED\";\n\ntype ErrorPattern = { msg?: string; code?: number };\n\nconst TX_ERROR_PATTERNS: { [key: string]: ErrorPattern[] } = {\n  [NOT_ENOUGH_FUNDS]: [\n    { msg: \"not enough funds for gas\" },\n    { msg: \"failed to execute call with revert code InsufficientGasFunds\" },\n  ],\n  [USER_DENIED]: [{ msg: \"User denied transaction signature\" }],\n  [SLIPPAGE]: [{ msg: \"Router: mark price lower than limit\" }, { msg: \"Router: mark price higher than limit\" }],\n  [NETWORK_CHANGED]: [{ msg: \"underlying network changed\" }],\n  [RPC_ERROR]: [\n    // @see https://eips.ethereum.org/EIPS/eip-1474#error-codes\n    { code: -32005 },\n    { msg: \"Non-200 status code\" },\n    { msg: \"Request limit exceeded\" },\n    { msg: \"Internal JSON-RPC error\" },\n    { msg: \"Response has no error or result\" },\n    { msg: \"we can't execute this request\" },\n    { msg: \"couldn't connect to the network\" },\n  ],\n};\n\ntype TxError = {\n  message?: string;\n  code?: number;\n  data?: any;\n};\n\nexport function extractError(ex: TxError) {\n  if (!ex) {\n    return [];\n  }\n\n  const message = ex.data?.message || ex.message;\n  const code = ex.code;\n\n  if (!message && !code) {\n    return [];\n  }\n\n  for (const [type, patterns] of Object.entries(TX_ERROR_PATTERNS)) {\n    for (const pattern of patterns) {\n      const matchCode = pattern.code && code === pattern.code;\n      const matchMessage = pattern.msg && message && message.includes(pattern.msg);\n\n      if (matchCode || matchMessage) {\n        return [message, type, ex.data];\n      }\n    }\n  }\n\n  return [message, null, ex.data];\n}\n","import { Provider } from \"@ethersproject/providers\";\nimport { BigNumber, Contract } from \"ethers\";\nimport { GAS_PRICE_ADJUSTMENT_MAP, MAX_GAS_PRICE_MAP } from \"config/chains\";\nimport { bigNumberify } from \"../numbers\";\n\nexport async function setGasPrice(txnOpts: any, provider: Provider, chainId: number) {\n  let maxGasPrice = MAX_GAS_PRICE_MAP[chainId];\n  const premium = GAS_PRICE_ADJUSTMENT_MAP[chainId] || bigNumberify(0);\n\n  const gasPrice = await provider.getGasPrice();\n\n  if (maxGasPrice) {\n    if (gasPrice.gt(maxGasPrice)) {\n      maxGasPrice = gasPrice;\n    }\n\n    const feeData = await provider.getFeeData();\n\n    // the wallet provider might not return maxPriorityFeePerGas in feeData\n    // in which case we should fallback to the usual getGasPrice flow handled below\n    if (feeData && feeData.maxPriorityFeePerGas) {\n      txnOpts.maxFeePerGas = maxGasPrice;\n      txnOpts.maxPriorityFeePerGas = feeData.maxPriorityFeePerGas.add(premium);\n      return;\n    }\n  }\n\n  txnOpts.gasPrice = gasPrice.add(premium);\n  return;\n}\n\nexport async function getGasLimit(contract: Contract, method, params: any[] = [], value?: BigNumber | number) {\n  const defaultValue = bigNumberify(0);\n\n  if (!value) {\n    value = defaultValue;\n  }\n\n  let gasLimit = await contract.estimateGas[method](...params, { value });\n\n  if (gasLimit.lt(22000)) {\n    gasLimit = bigNumberify(22000)!;\n  }\n\n  return gasLimit.mul(11000).div(10000); // add a 10% buffer\n}\n","import { useEffect, useState } from \"react\";\nimport { InjectedConnector } from \"@web3-react/injected-connector\";\nimport {\n  ARBITRUM,\n  ARBITRUM_TESTNET,\n  AVALANCHE,\n  AVALANCHE_FUJI,\n  DEFAULT_CHAIN_ID,\n  getChainName,\n  getRpcUrl,\n  MAINNET,\n  NETWORK_METADATA,\n  SUPPORTED_CHAIN_IDS,\n} from \"config/chains\";\nimport { UnsupportedChainIdError, useWeb3React } from \"@web3-react/core\";\nimport {\n  CURRENT_PROVIDER_LOCALSTORAGE_KEY,\n  SELECTED_NETWORK_LOCAL_STORAGE_KEY,\n  SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY,\n  WALLET_CONNECT_LOCALSTORAGE_KEY,\n  WALLET_LINK_LOCALSTORAGE_PREFIX,\n} from \"config/localStorage\";\nimport {\n  UserRejectedRequestError as UserRejectedRequestErrorWalletConnect,\n  WalletConnectConnector,\n} from \"@web3-react/walletconnect-connector\";\nimport { helperToast } from \"../helperToast\";\nimport { t, Trans } from \"@lingui/macro\";\n\nimport { Web3ReactManagerFunctions } from \"@web3-react/core/dist/types\";\n\nexport type NetworkMetadata = {\n  chainId: string;\n  chainName: string;\n  nativeCurrency: {\n    name: string;\n    symbol: string;\n    decimals: number;\n  };\n  rpcUrls: string[];\n  blockExplorerUrls: string[];\n};\n\nconst injectedConnector = new InjectedConnector({\n  supportedChainIds: SUPPORTED_CHAIN_IDS,\n});\n\nexport function hasMetaMaskWalletExtension() {\n  return window.ethereum;\n}\n\nexport function hasCoinBaseWalletExtension() {\n  const { ethereum } = window;\n\n  if (!ethereum?.providers && !ethereum?.isCoinbaseWallet) {\n    return false;\n  }\n\n  return window.ethereum.isCoinbaseWallet || ethereum.providers.find(({ isCoinbaseWallet }) => isCoinbaseWallet);\n}\n\nexport function activateInjectedProvider(providerName: string) {\n  const { ethereum } = window;\n\n  if (!ethereum?.providers && !ethereum?.isCoinbaseWallet && !ethereum?.isMetaMask) {\n    return undefined;\n  }\n\n  let provider;\n  if (ethereum?.providers) {\n    switch (providerName) {\n      case \"CoinBase\":\n        provider = ethereum.providers.find(({ isCoinbaseWallet }) => isCoinbaseWallet);\n        break;\n      case \"MetaMask\":\n      default:\n        provider = ethereum.providers.find(({ isMetaMask }) => isMetaMask);\n        break;\n    }\n  }\n\n  if (provider) {\n    ethereum?.setSelectedProvider?.(provider);\n  }\n}\n\nexport function getInjectedConnector() {\n  return injectedConnector;\n}\n\nexport const getWalletConnectConnector = () => {\n  const chainId = Number(localStorage.getItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY)) || DEFAULT_CHAIN_ID;\n\n  return new WalletConnectConnector({\n    rpc: {\n      [AVALANCHE]: getRpcUrl(AVALANCHE)!,\n      [ARBITRUM]: getRpcUrl(ARBITRUM)!,\n      [ARBITRUM_TESTNET]: getRpcUrl(ARBITRUM_TESTNET)!,\n      [AVALANCHE_FUJI]: getRpcUrl(AVALANCHE_FUJI)!,\n    },\n    qrcode: true,\n    chainId,\n  });\n};\n\nexport function clearWalletConnectData() {\n  localStorage.removeItem(WALLET_CONNECT_LOCALSTORAGE_KEY);\n}\n\nexport function clearWalletLinkData() {\n  Object.entries(localStorage)\n    .map((x) => x[0])\n    .filter((x) => x.startsWith(WALLET_LINK_LOCALSTORAGE_PREFIX))\n    .map((x) => localStorage.removeItem(x));\n}\n\nexport function useEagerConnect(setActivatingConnector: (connector: any) => void) {\n  const { activate, active } = useWeb3React();\n  const [tried, setTried] = useState(false);\n\n  useEffect(() => {\n    (async function () {\n      if (Boolean(localStorage.getItem(SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY)) !== true) {\n        // only works with WalletConnect\n        clearWalletConnectData();\n        // force clear localStorage connection for MM/CB Wallet (Brave legacy)\n        clearWalletLinkData();\n        return;\n      }\n\n      let shouldTryWalletConnect = false;\n      try {\n        // naive validation to not trigger Wallet Connect if data is corrupted\n        const rawData = localStorage.getItem(WALLET_CONNECT_LOCALSTORAGE_KEY);\n        if (rawData) {\n          const data = JSON.parse(rawData);\n          if (data && data.connected) {\n            shouldTryWalletConnect = true;\n          }\n        }\n      } catch (ex) {\n        if (ex instanceof SyntaxError) {\n          // rawData is not a valid json\n          clearWalletConnectData();\n        }\n      }\n\n      if (shouldTryWalletConnect) {\n        try {\n          const connector = getWalletConnectConnector();\n          setActivatingConnector(connector);\n          await activate(connector, undefined, true);\n          // in case Wallet Connect is activated no need to check injected wallet\n          return;\n        } catch (ex) {\n          // assume data in localstorage is corrupted and delete it to not retry on next page load\n          clearWalletConnectData();\n        }\n      }\n\n      try {\n        const connector = getInjectedConnector();\n        const currentProviderName = localStorage.getItem(CURRENT_PROVIDER_LOCALSTORAGE_KEY) ?? false;\n        if (currentProviderName !== false) {\n          activateInjectedProvider(currentProviderName);\n        }\n        const authorized = await connector.isAuthorized();\n        if (authorized) {\n          setActivatingConnector(connector);\n          await activate(connector, undefined, true);\n        }\n      } catch (ex) {}\n\n      setTried(true);\n    })();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // intentionally only running on mount (make sure it's only mounted once :))\n\n  // if the connection worked, wait until we get confirmation of that to flip the flag\n  useEffect(() => {\n    if (!tried && active) {\n      setTried(true);\n    }\n  }, [tried, active]);\n\n  return tried;\n}\n\nexport function useInactiveListener(suppress = false) {\n  const injected = getInjectedConnector();\n  const { active, error, activate } = useWeb3React();\n\n  useEffect(() => {\n    const { ethereum } = window;\n    if (ethereum && ethereum.on && !active && !error && !suppress) {\n      const handleConnect = () => {\n        activate(injected);\n      };\n      const handleChainChanged = (chainId) => {\n        activate(injected);\n      };\n      const handleAccountsChanged = (accounts) => {\n        if (accounts.length > 0) {\n          activate(injected);\n        }\n      };\n      const handleNetworkChanged = (networkId) => {\n        activate(injected);\n      };\n\n      ethereum.on(\"connect\", handleConnect);\n      ethereum.on(\"chainChanged\", handleChainChanged);\n      ethereum.on(\"accountsChanged\", handleAccountsChanged);\n      ethereum.on(\"networkChanged\", handleNetworkChanged);\n\n      return () => {\n        if (ethereum.removeListener) {\n          ethereum.removeListener(\"connect\", handleConnect);\n          ethereum.removeListener(\"chainChanged\", handleChainChanged);\n          ethereum.removeListener(\"accountsChanged\", handleAccountsChanged);\n          ethereum.removeListener(\"networkChanged\", handleNetworkChanged);\n        }\n      };\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [active, error, suppress, activate]);\n}\n\nexport const addBscNetwork = async () => {\n  return addNetwork(NETWORK_METADATA[MAINNET]);\n};\n\nexport const addNetwork = async (metadata: NetworkMetadata) => {\n  await window.ethereum.request({ method: \"wallet_addEthereumChain\", params: [metadata] }).catch();\n};\n\nexport const switchNetwork = async (chainId: number, active?: boolean) => {\n  if (!active) {\n    // chainId in localStorage allows to switch network even if wallet is not connected\n    // or there is no wallet at all\n    localStorage.setItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY, String(chainId));\n    document.location.reload();\n    return;\n  }\n\n  try {\n    const chainIdHex = \"0x\" + chainId.toString(16);\n    await window.ethereum.request({\n      method: \"wallet_switchEthereumChain\",\n      params: [{ chainId: chainIdHex }],\n    });\n    helperToast.success(t`Connected to ${getChainName(chainId)}`);\n    return getChainName(chainId);\n  } catch (ex) {\n    // https://docs.metamask.io/guide/rpc-api.html#other-rpc-methods\n    // This error code indicates that the chain has not been added to MetaMask.\n    // 4001 error means user has denied the request\n    // If the error code is not 4001, then we need to add the network\n    if (ex.code !== 4001) {\n      return await addNetwork(NETWORK_METADATA[chainId]);\n    }\n\n    // eslint-disable-next-line no-console\n    console.error(\"error\", ex);\n  }\n};\n\nexport const getWalletConnectHandler = (\n  activate: Web3ReactManagerFunctions[\"activate\"],\n  deactivate: Web3ReactManagerFunctions[\"deactivate\"],\n  setActivatingConnector: (connector?: WalletConnectConnector) => void\n) => {\n  const fn = async () => {\n    const walletConnect = getWalletConnectConnector();\n    setActivatingConnector(walletConnect);\n    activate(walletConnect, (ex) => {\n      if (ex instanceof UnsupportedChainIdError) {\n        helperToast.error(t`Unsupported chain. Switch to Arbitrum network on your wallet and try again`);\n        // eslint-disable-next-line no-console\n        console.warn(ex);\n      } else if (!(ex instanceof UserRejectedRequestErrorWalletConnect)) {\n        helperToast.error(ex.message);\n        // eslint-disable-next-line no-console\n        console.warn(ex);\n      }\n      clearWalletConnectData();\n      deactivate();\n    });\n  };\n  return fn;\n};\n\nexport const getInjectedHandler = (\n  activate: Web3ReactManagerFunctions[\"activate\"],\n  deactivate: Web3ReactManagerFunctions[\"deactivate\"]\n) => {\n  const fn = async () => {\n    activate(getInjectedConnector(), (e) => {\n      if (e instanceof UnsupportedChainIdError) {\n        showUnsupportedNetworkToast();\n\n        deactivate();\n\n        return;\n      }\n\n      const errString = e.message ?? e.toString();\n      helperToast.error(errString);\n    });\n  };\n  return fn;\n};\n\nexport async function addTokenToMetamask(token: {\n  address: string;\n  symbol: string;\n  decimals: number;\n  imageUrl?: string;\n}) {\n  try {\n    const wasAdded = await window.ethereum.request({\n      method: \"wallet_watchAsset\",\n      params: {\n        type: \"ERC20\",\n        options: {\n          address: token.address,\n          symbol: token.symbol,\n          decimals: token.decimals,\n          image: token.imageUrl,\n        },\n      },\n    });\n    if (wasAdded) {\n      // https://github.com/MetaMask/metamask-extension/issues/11377\n      // We can show a toast message when the token is added to metamask but because of the bug we can't. Once the bug is fixed we can show a toast message.\n    }\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.error(error);\n  }\n}\n\nexport function showUnsupportedNetworkToast() {\n  const chainId = Number(localStorage.getItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY)) || DEFAULT_CHAIN_ID;\n\n  helperToast.error(\n    <div>\n      <Trans>\n        <div>Your wallet is not connected to {getChainName(chainId)}.</div>\n        <br />\n        <div className=\"clickable underline\" onClick={() => switchNetwork(chainId, true)}>\n          Switch to {getChainName(chainId)}\n        </div>\n      </Trans>\n    </div>\n  );\n}\n\nexport function useHandleUnsupportedNetwork() {\n  const { error, deactivate } = useWeb3React();\n\n  useEffect(() => {\n    if (error instanceof UnsupportedChainIdError) {\n      showUnsupportedNetworkToast();\n\n      deactivate();\n    }\n  }, [error, deactivate]);\n}\n","import React from \"react\";\nimport cx from \"classnames\";\nimport \"./ExternalLink.scss\";\n\ntype Props = {\n  href: string;\n  children: React.ReactNode;\n  className?: string;\n};\n\nfunction ExternalLink({ href, children, className }: Props) {\n  const classNames = cx(\"link-underline\", className);\n  return (\n    <a href={href} className={classNames} target=\"_blank\" rel=\"noopener noreferrer\">\n      {children}\n    </a>\n  );\n}\n\nexport default ExternalLink;\n","import { BigNumber, Contract } from \"ethers\";\nimport { helperToast } from \"../helperToast\";\nimport { ToastifyDebug } from \"components/ToastifyDebug/ToastifyDebug\";\nimport { extractError, NETWORK_CHANGED, NOT_ENOUGH_FUNDS, RPC_ERROR, SLIPPAGE, USER_DENIED } from \"./transactionErrors\";\nimport { getGasLimit, setGasPrice } from \"./utils\";\nimport { getChainName, getExplorerUrl } from \"config/chains\";\nimport { switchNetwork } from \"lib/wallets\";\nimport { t, Trans } from \"@lingui/macro\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nexport async function callContract(\n  chainId: number,\n  contract: Contract,\n  method: string,\n  params: any,\n  opts: {\n    value?: BigNumber | number;\n    gasLimit?: BigNumber | number;\n    sentMsg?: string;\n    successMsg?: string;\n    hideSuccessMsg?: boolean;\n    failMsg?: string;\n    setPendingTxns?: (txns: any) => void;\n  }\n) {\n  try {\n    if (!Array.isArray(params) && typeof params === \"object\" && opts === undefined) {\n      opts = params;\n      params = [];\n    }\n\n    if (!opts) {\n      opts = {};\n    }\n\n    const txnOpts: any = {};\n\n    if (opts.value) {\n      txnOpts.value = opts.value;\n    }\n\n    txnOpts.gasLimit = opts.gasLimit ? opts.gasLimit : await getGasLimit(contract, method, params, opts.value);\n\n    await setGasPrice(txnOpts, contract.provider, chainId);\n\n    const res = await contract[method](...params, txnOpts);\n    const txUrl = getExplorerUrl(chainId) + \"tx/\" + res.hash;\n    const sentMsg = opts.sentMsg || t`Transaction sent.`;\n\n    helperToast.success(\n      <div>\n        {sentMsg}{\" \"}\n        <ExternalLink href={txUrl}>\n          <Trans>View status.</Trans>\n        </ExternalLink>\n        <br />\n      </div>\n    );\n\n    if (opts.setPendingTxns) {\n      const message = opts.hideSuccessMsg ? undefined : opts.successMsg || t`Transaction completed!`;\n      const pendingTxn = {\n        hash: res.hash,\n        message,\n      };\n      opts.setPendingTxns((pendingTxns) => [...pendingTxns, pendingTxn]);\n    }\n\n    return res;\n  } catch (e) {\n    let failMsg;\n\n    let autoCloseToast: number | boolean = 5000;\n\n    const [message, type, errorData] = extractError(e);\n    switch (type) {\n      case NOT_ENOUGH_FUNDS:\n        failMsg = (\n          <Trans>\n            There is not enough ETH in your account on Arbitrum to send this transaction.\n            <br />\n            <br />\n            <ExternalLink href=\"https://arbitrum.io/bridge-tutorial/\">Bridge ETH to Arbitrum</ExternalLink>\n          </Trans>\n        );\n        break;\n      case NETWORK_CHANGED:\n        failMsg = (\n          <Trans>\n            <div>Your wallet is not connected to {getChainName(chainId)}.</div>\n            <br />\n            <div className=\"clickable underline\" onClick={() => switchNetwork(chainId, true)}>\n              Switch to {getChainName(chainId)}\n            </div>\n          </Trans>\n        );\n        break;\n      case USER_DENIED:\n        failMsg = t`Transaction was cancelled.`;\n        break;\n      case SLIPPAGE:\n        failMsg = t`The mark price has changed, consider increasing your Allowed Slippage by clicking on the \"...\" icon next to your address.`;\n        break;\n      case RPC_ERROR:\n        autoCloseToast = false;\n\n        const originalError = errorData?.error?.message || errorData?.message || message;\n\n        failMsg = (\n          <div>\n            <Trans>\n              Transaction failed due to RPC error.\n              <br />\n              <br />\n              Please try changing the RPC url in your wallet settings.{\" \"}\n              <ExternalLink href=\"https://gmxio.gitbook.io/gmx/trading#backup-rpc-urls\">More info</ExternalLink>\n            </Trans>\n            <br />\n            {originalError && <ToastifyDebug>{originalError}</ToastifyDebug>}\n          </div>\n        );\n        break;\n      default:\n        autoCloseToast = false;\n\n        failMsg = (\n          <div>\n            {opts.failMsg || t`Transaction failed`}\n            <br />\n            {message && <ToastifyDebug>{message}</ToastifyDebug>}\n          </div>\n        );\n    }\n\n    helperToast.error(failMsg, { autoClose: autoCloseToast });\n    throw e;\n  }\n}\n","import { useEffect, useState } from \"react\";\nimport {\n  ARBITRUM,\n  AVALANCHE,\n  AVALANCHE_FUJI,\n  FALLBACK_PROVIDERS,\n  getAlchemyWsUrl,\n  getFallbackRpcUrl,\n  getRpcUrl,\n} from \"config/chains\";\nimport { ethers } from \"ethers\";\nimport { JsonRpcProvider, Web3Provider } from \"@ethersproject/providers\";\n\nconst arbWsProvider = new ethers.providers.WebSocketProvider(getAlchemyWsUrl());\n\nconst avaxWsProvider = new ethers.providers.JsonRpcProvider(\"https://api.avax.network/ext/bc/C/rpc\");\navaxWsProvider.pollingInterval = 2000;\n\nconst fujiWsProvider = new ethers.providers.JsonRpcProvider(getRpcUrl(AVALANCHE_FUJI));\nfujiWsProvider.pollingInterval = 2000;\n\nexport function getProvider(library: Web3Provider | undefined, chainId: number) {\n  let provider;\n\n  if (library) {\n    return library.getSigner();\n  }\n\n  provider = getRpcUrl(chainId);\n\n  return new ethers.providers.StaticJsonRpcProvider(\n    provider,\n    // @ts-ignore incorrect Network param types\n    { chainId }\n  );\n}\n\nexport function getFallbackProvider(chainId: number) {\n  if (!FALLBACK_PROVIDERS[chainId]) {\n    return;\n  }\n\n  const provider = getFallbackRpcUrl(chainId);\n\n  return new ethers.providers.StaticJsonRpcProvider(\n    provider,\n    // @ts-ignore incorrect Network param types\n    { chainId }\n  );\n}\n\nexport function useJsonRpcProvider(chainId: number) {\n  const [provider, setProvider] = useState<JsonRpcProvider>();\n\n  useEffect(() => {\n    async function initializeProvider() {\n      const rpcUrl = getRpcUrl(chainId);\n\n      if (!rpcUrl) return;\n\n      const provider = new ethers.providers.JsonRpcProvider(rpcUrl);\n\n      await provider.ready;\n\n      setProvider(provider);\n    }\n\n    initializeProvider();\n  }, [chainId]);\n\n  return { provider };\n}\n\nexport function getWsProvider(active, chainId) {\n  if (!active) {\n    return;\n  }\n  if (chainId === ARBITRUM) {\n    return arbWsProvider;\n  }\n\n  if (chainId === AVALANCHE) {\n    return avaxWsProvider;\n  }\n\n  if (chainId === AVALANCHE_FUJI) {\n    return fujiWsProvider;\n  }\n}\n","import { ethers } from \"ethers\";\nimport { Web3Provider } from \"@ethersproject/providers\";\nimport { getFallbackProvider, getProvider } from \"../rpc\";\n\nexport const contractFetcher =\n  <T>(library: Web3Provider | undefined, contractInfo: any, additionalArgs?: any[]) =>\n  (...args: any): Promise<T> => {\n    // eslint-disable-next-line\n    const [id, chainId, arg0, arg1, ...params] = args;\n    const provider = getProvider(library, chainId);\n\n    const method = ethers.utils.isAddress(arg0) ? arg1 : arg0;\n\n    const contractCall = getContractCall({\n      provider,\n      contractInfo,\n      arg0,\n      arg1,\n      method,\n      params,\n      additionalArgs,\n    });\n\n    let shouldCallFallback = true;\n\n    const handleFallback = async (resolve, reject, error) => {\n      if (!shouldCallFallback) {\n        return;\n      }\n      // prevent fallback from being called twice\n      shouldCallFallback = false;\n\n      const fallbackProvider = getFallbackProvider(chainId);\n      if (!fallbackProvider) {\n        reject(error);\n        return;\n      }\n\n      // eslint-disable-next-line no-console\n      console.info(\"using fallbackProvider for\", method);\n      const fallbackContractCall = getContractCall({\n        provider: fallbackProvider,\n        contractInfo,\n        arg0,\n        arg1,\n        method,\n        params,\n        additionalArgs,\n      });\n\n      fallbackContractCall\n        .then((result) => resolve(result))\n        .catch((e) => {\n          // eslint-disable-next-line no-console\n          console.error(\"fallback fetcher error\", id, contractInfo.contractName, method, e);\n          reject(e);\n        });\n    };\n\n    return new Promise(async (resolve, reject) => {\n      contractCall\n        .then((result) => {\n          shouldCallFallback = false;\n          resolve(result);\n        })\n        .catch((e) => {\n          // eslint-disable-next-line no-console\n          console.error(\"fetcher error\", id, contractInfo.contractName, method, e);\n          handleFallback(resolve, reject, e);\n        });\n\n      setTimeout(() => {\n        handleFallback(resolve, reject, \"contractCall timeout\");\n      }, 2000);\n    });\n  };\n\nfunction getContractCall({ provider, contractInfo, arg0, arg1, method, params, additionalArgs }) {\n  if (ethers.utils.isAddress(arg0)) {\n    const address = arg0;\n    const contract = new ethers.Contract(address, contractInfo.abi, provider);\n\n    if (additionalArgs) {\n      return contract[method](...params.concat(additionalArgs));\n    }\n    return contract[method](...params);\n  }\n\n  if (!provider) {\n    return;\n  }\n\n  return provider[method](arg1, ...params);\n}\n","import { Trans } from \"@lingui/macro\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport { getExplorerUrl } from \"config/chains\";\nimport { ethers } from \"ethers\";\nimport { helperToast } from \"lib/helperToast\";\n\nconst notifications: { [id: string]: boolean } = {};\n\nexport function pushSuccessNotification(chainId: number, message: string, e: { transactionHash: string }) {\n  const { transactionHash } = e;\n\n  const id = ethers.utils.id(message + transactionHash);\n  if (notifications[id]) {\n    return;\n  }\n\n  notifications[id] = true;\n\n  const txUrl = getExplorerUrl(chainId) + \"tx/\" + transactionHash;\n  helperToast.success(\n    <div>\n      {message}{\" \"}\n      <ExternalLink href={txUrl}>\n        <Trans>View</Trans>\n      </ExternalLink>\n    </div>\n  );\n}\n\nexport function pushErrorNotification(chainId: number, message: string, e: { transactionHash: string }) {\n  const { transactionHash } = e;\n  const id = ethers.utils.id(message + transactionHash);\n  if (notifications[id]) {\n    return;\n  }\n\n  notifications[id] = true;\n\n  const txUrl = getExplorerUrl(chainId) + \"tx/\" + transactionHash;\n  helperToast.error(\n    <div>\n      {message}{\" \"}\n      <ExternalLink href={txUrl}>\n        <Trans>View</Trans>\n      </ExternalLink>\n    </div>\n  );\n}\n","import { getContract } from \"config/contracts\";\nimport useSWR from \"swr\";\nimport { contractFetcher } from \"lib/contracts\";\nimport VaultReader from \"abis/VaultReader.json\";\nimport {\n  BASIS_POINTS_DIVISOR,\n  DEFAULT_MAX_USDG_AMOUNT,\n  MAX_PRICE_DEVIATION_BASIS_POINTS,\n  USD_DECIMALS,\n  USDG_ADDRESS,\n} from \"lib/legacy\";\nimport { getServerUrl } from \"config/backend\";\nimport { InfoTokens, Token, TokenInfo } from \"./types\";\nimport { BigNumber } from \"ethers\";\nimport { bigNumberify, expandDecimals } from \"lib/numbers\";\nimport { getTokens, getWhitelistedTokens } from \"config/tokens\";\nimport { Web3Provider } from \"@ethersproject/providers\";\nimport { getSpread } from \"./utils\";\n\nexport function useInfoTokens(\n  library: Web3Provider | undefined,\n  chainId: number,\n  active: boolean,\n  tokenBalances?: BigNumber[],\n  fundingRateInfo?: BigNumber[],\n  vaultPropsLength?: number\n) {\n  const tokens = getTokens(chainId);\n  const vaultReaderAddress = getContract(chainId, \"VaultReader\");\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const whitelistedTokenAddresses = whitelistedTokens.map((token) => token.address);\n\n  const { data: vaultTokenInfo } = useSWR<BigNumber[], any>(\n    [`useInfoTokens:${active}`, chainId, vaultReaderAddress, \"getVaultTokenInfoV4\"],\n    {\n      fetcher: contractFetcher(library, VaultReader, [\n        vaultAddress,\n        positionRouterAddress,\n        nativeTokenAddress,\n        expandDecimals(1, 18),\n        whitelistedTokenAddresses,\n      ]),\n    }\n  );\n\n  const indexPricesUrl = getServerUrl(chainId, \"/prices\");\n\n  const { data: indexPrices } = useSWR([indexPricesUrl], {\n    // @ts-ignore spread args incorrect type\n    fetcher: (...args) => fetch(...args).then((res) => res.json()),\n    refreshInterval: 500,\n    refreshWhenHidden: true,\n  });\n\n  return {\n    infoTokens: getInfoTokens(\n      tokens,\n      tokenBalances,\n      whitelistedTokens,\n      vaultTokenInfo,\n      fundingRateInfo,\n      vaultPropsLength,\n      indexPrices,\n      nativeTokenAddress\n    ),\n  };\n}\n\nfunction getInfoTokens(\n  tokens: Token[],\n  tokenBalances: BigNumber[] | undefined,\n  whitelistedTokens: Token[],\n  vaultTokenInfo: BigNumber[] | undefined,\n  fundingRateInfo: BigNumber[] | undefined,\n  vaultPropsLength: number | undefined,\n  indexPrices: { [address: string]: BigNumber },\n  nativeTokenAddress: string\n): InfoTokens {\n  if (!vaultPropsLength) {\n    vaultPropsLength = 15;\n  }\n  const fundingRatePropsLength = 2;\n  const infoTokens: InfoTokens = {};\n\n  for (let i = 0; i < tokens.length; i++) {\n    const token = JSON.parse(JSON.stringify(tokens[i])) as TokenInfo;\n\n    if (tokenBalances) {\n      token.balance = tokenBalances[i];\n    }\n\n    if (token.address === USDG_ADDRESS) {\n      token.minPrice = expandDecimals(1, USD_DECIMALS);\n      token.maxPrice = expandDecimals(1, USD_DECIMALS);\n    }\n\n    infoTokens[token.address] = token;\n  }\n\n  for (let i = 0; i < whitelistedTokens.length; i++) {\n    const token = JSON.parse(JSON.stringify(whitelistedTokens[i])) as TokenInfo;\n\n    if (vaultTokenInfo) {\n      token.poolAmount = vaultTokenInfo[i * vaultPropsLength];\n      token.reservedAmount = vaultTokenInfo[i * vaultPropsLength + 1];\n      token.availableAmount = token.poolAmount.sub(token.reservedAmount);\n      token.usdgAmount = vaultTokenInfo[i * vaultPropsLength + 2];\n      token.redemptionAmount = vaultTokenInfo[i * vaultPropsLength + 3];\n      token.weight = vaultTokenInfo[i * vaultPropsLength + 4];\n      token.bufferAmount = vaultTokenInfo[i * vaultPropsLength + 5];\n      token.maxUsdgAmount = vaultTokenInfo[i * vaultPropsLength + 6];\n      token.globalShortSize = vaultTokenInfo[i * vaultPropsLength + 7];\n      token.maxGlobalShortSize = vaultTokenInfo[i * vaultPropsLength + 8];\n      token.maxGlobalLongSize = vaultTokenInfo[i * vaultPropsLength + 9];\n      token.minPrice = vaultTokenInfo[i * vaultPropsLength + 10];\n      token.maxPrice = vaultTokenInfo[i * vaultPropsLength + 11];\n      token.spread = getSpread({\n        minPrice: token.minPrice,\n        maxPrice: token.maxPrice,\n      });\n      token.guaranteedUsd = vaultTokenInfo[i * vaultPropsLength + 12];\n      token.maxPrimaryPrice = vaultTokenInfo[i * vaultPropsLength + 13];\n      token.minPrimaryPrice = vaultTokenInfo[i * vaultPropsLength + 14];\n\n      // save minPrice and maxPrice as setTokenUsingIndexPrices may override it\n      token.contractMinPrice = token.minPrice;\n      token.contractMaxPrice = token.maxPrice;\n\n      token.maxAvailableShort = bigNumberify(0)!;\n\n      token.hasMaxAvailableShort = false;\n      if (token.maxGlobalShortSize.gt(0)) {\n        token.hasMaxAvailableShort = true;\n        if (token.maxGlobalShortSize.gt(token.globalShortSize)) {\n          token.maxAvailableShort = token.maxGlobalShortSize.sub(token.globalShortSize);\n        }\n      }\n\n      if (token.maxUsdgAmount.eq(0)) {\n        token.maxUsdgAmount = DEFAULT_MAX_USDG_AMOUNT;\n      }\n\n      token.availableUsd = token.isStable\n        ? token.poolAmount.mul(token.minPrice).div(expandDecimals(1, token.decimals))\n        : token.availableAmount.mul(token.minPrice).div(expandDecimals(1, token.decimals));\n\n      token.maxAvailableLong = bigNumberify(0)!;\n      token.hasMaxAvailableLong = false;\n      if (token.maxGlobalLongSize.gt(0)) {\n        token.hasMaxAvailableLong = true;\n\n        if (token.maxGlobalLongSize.gt(token.guaranteedUsd)) {\n          const remainingLongSize = token.maxGlobalLongSize.sub(token.guaranteedUsd);\n          token.maxAvailableLong = remainingLongSize.lt(token.availableUsd) ? remainingLongSize : token.availableUsd;\n        }\n      } else {\n        token.maxAvailableLong = token.availableUsd;\n      }\n\n      token.maxLongCapacity =\n        token.maxGlobalLongSize.gt(0) && token.maxGlobalLongSize.lt(token.availableUsd.add(token.guaranteedUsd))\n          ? token.maxGlobalLongSize\n          : token.availableUsd.add(token.guaranteedUsd);\n\n      token.managedUsd = token.availableUsd.add(token.guaranteedUsd);\n      token.managedAmount = token.managedUsd.mul(expandDecimals(1, token.decimals)).div(token.minPrice);\n\n      setTokenUsingIndexPrices(token, indexPrices, nativeTokenAddress);\n    }\n\n    if (fundingRateInfo) {\n      token.fundingRate = fundingRateInfo[i * fundingRatePropsLength];\n      token.cumulativeFundingRate = fundingRateInfo[i * fundingRatePropsLength + 1];\n    }\n\n    if (infoTokens[token.address]) {\n      token.balance = infoTokens[token.address].balance;\n    }\n\n    infoTokens[token.address] = token;\n  }\n\n  return infoTokens;\n}\n\nfunction setTokenUsingIndexPrices(\n  token: TokenInfo,\n  indexPrices: { [address: string]: BigNumber },\n  nativeTokenAddress: string\n) {\n  if (!indexPrices) {\n    return;\n  }\n\n  const tokenAddress = token.isNative ? nativeTokenAddress : token.address;\n\n  const indexPrice = indexPrices[tokenAddress];\n\n  if (!indexPrice) {\n    return;\n  }\n\n  const indexPriceBn = bigNumberify(indexPrice)!;\n\n  if (indexPriceBn.eq(0)) {\n    return;\n  }\n\n  const spread = token.maxPrice!.sub(token.minPrice!);\n  const spreadBps = spread.mul(BASIS_POINTS_DIVISOR).div(token.maxPrice!.add(token.minPrice!).div(2));\n\n  if (spreadBps.gt(MAX_PRICE_DEVIATION_BASIS_POINTS - 50)) {\n    // only set one of the values as there will be a spread between the index price and the Chainlink price\n    if (indexPriceBn.gt(token.minPrimaryPrice!)) {\n      token.maxPrice = indexPriceBn;\n    } else {\n      token.minPrice = indexPriceBn;\n    }\n    return;\n  }\n\n  const halfSpreadBps = spreadBps.div(2).toNumber();\n  token.maxPrice = indexPriceBn.mul(BASIS_POINTS_DIVISOR + halfSpreadBps).div(BASIS_POINTS_DIVISOR);\n  token.minPrice = indexPriceBn.mul(BASIS_POINTS_DIVISOR - halfSpreadBps).div(BASIS_POINTS_DIVISOR);\n}\n","import { ethers } from \"ethers\";\nimport Token from \"abis/Token.json\";\nimport { getExplorerUrl } from \"config/chains\";\nimport { helperToast } from \"lib/helperToast\";\nimport { InfoTokens, TokenInfo } from \"./types\";\nimport { Web3Provider } from \"@ethersproject/providers\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport { t, Trans } from \"@lingui/macro\";\n\ntype Params = {\n  setIsApproving: (val: boolean) => void;\n  library: Web3Provider;\n  tokenAddress: string;\n  spender: string;\n  chainId: number;\n  onApproveSubmitted: () => void;\n  getTokenInfo?: (infoTokens: InfoTokens, tokenAddress: string) => TokenInfo;\n  infoTokens: InfoTokens;\n  pendingTxns: any[];\n  setPendingTxns: (txns: any[]) => void;\n  includeMessage?: boolean;\n};\n\nexport function approveTokens({\n  setIsApproving,\n  library,\n  tokenAddress,\n  spender,\n  chainId,\n  onApproveSubmitted,\n  getTokenInfo,\n  infoTokens,\n  pendingTxns,\n  setPendingTxns,\n  includeMessage,\n}: Params) {\n  setIsApproving(true);\n  const contract = new ethers.Contract(tokenAddress, Token.abi, library.getSigner());\n  contract\n    .approve(spender, ethers.constants.MaxUint256)\n    .then(async (res) => {\n      const txUrl = getExplorerUrl(chainId) + \"tx/\" + res.hash;\n      helperToast.success(\n        <div>\n          <Trans>\n            Approval submitted! <ExternalLink href={txUrl}>View status.</ExternalLink>\n          </Trans>\n          <br />\n        </div>\n      );\n      if (onApproveSubmitted) {\n        onApproveSubmitted();\n      }\n      if (getTokenInfo && infoTokens && pendingTxns && setPendingTxns) {\n        const token = getTokenInfo(infoTokens, tokenAddress);\n        const pendingTxn = {\n          hash: res.hash,\n          message: includeMessage ? t`${token.symbol} Approved!` : false,\n        };\n        setPendingTxns([...pendingTxns, pendingTxn]);\n      }\n    })\n    .catch((e) => {\n      // eslint-disable-next-line no-console\n      console.error(e);\n      let failMsg;\n      if (\n        [\"not enough funds for gas\", \"failed to execute call with revert code InsufficientGasFunds\"].includes(\n          e.data?.message\n        )\n      ) {\n        failMsg = (\n          <div>\n            <Trans>\n              There is not enough ETH in your account on Arbitrum to send this transaction.\n              <br />\n              <br />\n              <ExternalLink href=\"https://arbitrum.io/bridge-tutorial/\">Bridge ETH to Arbitrum</ExternalLink>\n            </Trans>\n          </div>\n        );\n      } else if (e.message?.includes(\"User denied transaction signature\")) {\n        failMsg = t`Approval was cancelled`;\n      } else {\n        failMsg = t`Approval failed`;\n      }\n      helperToast.error(failMsg);\n    })\n    .finally(() => {\n      setIsApproving(false);\n    });\n}\n","import { useWeb3React } from \"@web3-react/core\";\nimport { SELECTED_NETWORK_LOCAL_STORAGE_KEY } from \"config/localStorage\";\nimport { DEFAULT_CHAIN_ID, SUPPORTED_CHAIN_IDS } from \"config/chains\";\n\nexport function useChainId() {\n  let { chainId } = useWeb3React();\n\n  if (!chainId) {\n    const chainIdFromLocalStorage = localStorage.getItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY);\n    if (chainIdFromLocalStorage) {\n      chainId = parseInt(chainIdFromLocalStorage);\n      if (!chainId) {\n        // localstorage value is invalid\n        localStorage.removeItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY);\n      }\n    }\n  }\n\n  if (!chainId || !SUPPORTED_CHAIN_IDS.includes(chainId)) {\n    chainId = DEFAULT_CHAIN_ID;\n  }\n\n  return { chainId };\n}\n","import { addMinutes, format as formatDateFn } from \"date-fns\";\n\nexport function formatDateTime(time: number) {\n  return formatDateFn(time * 1000, \"dd MMM yyyy, h:mm a\");\n}\n\nexport function formatDate(time: number) {\n  return formatDateFn(time * 1000, \"dd MMM yyyy\");\n}\n\nexport function formatTVDate(date: Date) {\n  // https://github.com/date-fns/date-fns/issues/1401#issuecomment-578580199\n  return formatDateFn(addMinutes(date, date.getTimezoneOffset()), \"dd MMM yyyy\");\n}\n\nexport function formatTVTime(date: Date) {\n  return formatDateFn(addMinutes(date, date.getTimezoneOffset()), \"h:mm a\");\n}\n\nexport function getTimeRemaining(time: number) {\n  const now = parseInt(String(Date.now() / 1000));\n  if (time < now) {\n    return \"0h 0m\";\n  }\n  const diff = time - now;\n  const hours = parseInt(String(diff / (60 * 60)));\n  const minutes = parseInt(String((diff - hours * 60 * 60) / 60));\n  return `${hours}h ${minutes}m`;\n}\n\nexport function isValidTimestamp(timestamp: any) {\n  return new Date(timestamp).getTime() > 0;\n}\n","import { useEffect, useState } from \"react\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { BigNumber, ethers } from \"ethers\";\nimport { getContract } from \"config/contracts\";\nimport useSWR from \"swr\";\n\nimport OrderBookReader from \"abis/OrderBookReader.json\";\nimport OrderBook from \"abis/OrderBook.json\";\n\nimport { CHAIN_ID, ETH_MAINNET, getExplorerUrl, getRpcUrl } from \"config/chains\";\nimport { getServerBaseUrl } from \"config/backend\";\nimport { getMostAbundantStableToken } from \"domain/tokens\";\nimport { getTokenInfo } from \"domain/tokens/utils\";\nimport { getProvider } from \"./rpc\";\nimport { bigNumberify, expandDecimals, formatAmount } from \"./numbers\";\nimport { isValidToken } from \"config/tokens\";\nimport { useChainId } from \"./chains\";\nimport { isValidTimestamp } from \"./dates\";\nimport { t } from \"@lingui/macro\";\nimport { isLocal } from \"config/env\";\n\nconst { AddressZero } = ethers.constants;\n\n// use a random placeholder account instead of the zero address as the zero address might have tokens\nexport const PLACEHOLDER_ACCOUNT = ethers.Wallet.createRandom().address;\n\nexport const MIN_PROFIT_TIME = 0;\n\nexport const USDG_ADDRESS = getContract(CHAIN_ID, \"USDG\");\n\nexport const BASIS_POINTS_DIVISOR = 10000;\nexport const MAX_LEVERAGE = 100 * BASIS_POINTS_DIVISOR;\nexport const MAX_ALLOWED_LEVERAGE = 50 * BASIS_POINTS_DIVISOR;\n\nexport const MAX_PRICE_DEVIATION_BASIS_POINTS = 750;\nexport const DEFAULT_GAS_LIMIT = 1 * 1000 * 1000;\nexport const SECONDS_PER_YEAR = 31536000;\nexport const USDG_DECIMALS = 18;\nexport const USD_DECIMALS = 30;\nexport const DEPOSIT_FEE = 30;\nexport const DUST_BNB = \"2000000000000000\";\nexport const DUST_USD = expandDecimals(1, USD_DECIMALS);\nexport const PRECISION = expandDecimals(1, 30);\nexport const GLP_DECIMALS = 18;\nexport const GMX_DECIMALS = 18;\nexport const DEFAULT_MAX_USDG_AMOUNT = expandDecimals(200 * 1000 * 1000, 18);\n\nexport const TAX_BASIS_POINTS = 60;\nexport const STABLE_TAX_BASIS_POINTS = 5;\nexport const MINT_BURN_FEE_BASIS_POINTS = 25;\nexport const SWAP_FEE_BASIS_POINTS = 25;\nexport const STABLE_SWAP_FEE_BASIS_POINTS = 1;\nexport const MARGIN_FEE_BASIS_POINTS = 10;\n\nexport const LIQUIDATION_FEE = expandDecimals(5, USD_DECIMALS);\n\nexport const TRADES_PAGE_SIZE = 100;\n\nexport const GLP_COOLDOWN_DURATION = 0;\nexport const THRESHOLD_REDEMPTION_VALUE = expandDecimals(993, 27); // 0.993\nexport const FUNDING_RATE_PRECISION = 1000000;\n\nexport const SWAP = \"Swap\";\nexport const INCREASE = \"Increase\";\nexport const DECREASE = \"Decrease\";\nexport const LONG = \"Long\";\nexport const SHORT = \"Short\";\n\nexport const MARKET = \"Market\";\nexport const LIMIT = \"Limit\";\nexport const STOP = \"Stop\";\nexport const LEVERAGE_ORDER_OPTIONS = [MARKET, LIMIT, STOP];\nexport const SWAP_ORDER_OPTIONS = [MARKET, LIMIT];\nexport const SWAP_OPTIONS = [LONG, SHORT, SWAP];\nexport const DEFAULT_SLIPPAGE_AMOUNT = 30;\nexport const DEFAULT_HIGHER_SLIPPAGE_AMOUNT = 100;\n\nexport const REFERRAL_CODE_QUERY_PARAM = \"ref\";\nexport const MAX_REFERRAL_CODE_LENGTH = 20;\n\nexport const MIN_PROFIT_BIPS = 0;\n\nexport function deserialize(data) {\n  for (const [key, value] of Object.entries(data) as any) {\n    if (value._type === \"BigNumber\") {\n      data[key] = bigNumberify(value.value);\n    }\n  }\n  return data;\n}\n\nexport function isHomeSite() {\n  return process.env.REACT_APP_IS_HOME_SITE === \"true\";\n}\n\nexport function getLiquidationPriceFromDelta({ liquidationAmount, size, collateral, averagePrice, isLong }) {\n  if (!size || size.eq(0)) {\n    return;\n  }\n\n  if (liquidationAmount.gt(collateral)) {\n    const liquidationDelta = liquidationAmount.sub(collateral);\n    const priceDelta = liquidationDelta.mul(averagePrice).div(size);\n\n    return isLong ? averagePrice.add(priceDelta) : averagePrice.sub(priceDelta);\n  }\n\n  const liquidationDelta = collateral.sub(liquidationAmount);\n  const priceDelta = liquidationDelta.mul(averagePrice).div(size);\n\n  return isLong ? averagePrice.sub(priceDelta) : averagePrice.add(priceDelta);\n}\n\nexport function getMarginFee(sizeDelta) {\n  if (!sizeDelta) {\n    return bigNumberify(0);\n  }\n  const afterFeeUsd = sizeDelta.mul(BASIS_POINTS_DIVISOR - MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\n  return sizeDelta.sub(afterFeeUsd);\n}\n\nexport function isTriggerRatioInverted(fromTokenInfo, toTokenInfo) {\n  if (!toTokenInfo || !fromTokenInfo) return false;\n  if (toTokenInfo.isStable || toTokenInfo.isUsdg) return true;\n  if (toTokenInfo.maxPrice) return toTokenInfo.maxPrice.lt(fromTokenInfo.maxPrice);\n  return false;\n}\n\nexport function getExchangeRate(tokenAInfo, tokenBInfo, inverted) {\n  if (!tokenAInfo || !tokenAInfo.minPrice || !tokenBInfo || !tokenBInfo.maxPrice) {\n    return;\n  }\n  if (inverted) {\n    return tokenAInfo.minPrice.mul(PRECISION).div(tokenBInfo.maxPrice);\n  }\n  return tokenBInfo.maxPrice.mul(PRECISION).div(tokenAInfo.minPrice);\n}\n\nexport function shouldInvertTriggerRatio(tokenA, tokenB) {\n  if (tokenB.isStable || tokenB.isUsdg) return true;\n  if (tokenB.maxPrice && tokenA.maxPrice && tokenB.maxPrice.lt(tokenA.maxPrice)) return true;\n  return false;\n}\n\nexport function getExchangeRateDisplay(rate, tokenA, tokenB, opts: { omitSymbols?: boolean } = {}) {\n  if (!rate || !tokenA || !tokenB) return \"...\";\n  if (shouldInvertTriggerRatio(tokenA, tokenB)) {\n    [tokenA, tokenB] = [tokenB, tokenA];\n    rate = PRECISION.mul(PRECISION).div(rate);\n  }\n  const rateValue = formatAmount(rate, USD_DECIMALS, tokenA.isStable || tokenA.isUsdg ? 2 : 4, true);\n  if (opts.omitSymbols) {\n    return rateValue;\n  }\n  return `${rateValue} ${tokenA.symbol}/${tokenB.symbol}`;\n}\n\nconst adjustForDecimalsFactory = (n) => (number) => {\n  if (n === 0) {\n    return number;\n  }\n  if (n > 0) {\n    return number.mul(expandDecimals(1, n));\n  }\n  return number.div(expandDecimals(1, -n));\n};\n\nexport function adjustForDecimals(amount, divDecimals, mulDecimals) {\n  return amount.mul(expandDecimals(1, mulDecimals)).div(expandDecimals(1, divDecimals));\n}\n\nexport function getTargetUsdgAmount(token, usdgSupply, totalTokenWeights) {\n  if (!token || !token.weight || !usdgSupply) {\n    return;\n  }\n\n  if (usdgSupply.eq(0)) {\n    return bigNumberify(0);\n  }\n\n  return token.weight.mul(usdgSupply).div(totalTokenWeights);\n}\n\nexport function getFeeBasisPoints(\n  token,\n  tokenUsdgAmount,\n  usdgDelta,\n  feeBasisPoints,\n  taxBasisPoints,\n  increment,\n  usdgSupply,\n  totalTokenWeights\n) {\n  if (!token || !tokenUsdgAmount || !usdgSupply || !totalTokenWeights) {\n    return 0;\n  }\n\n  feeBasisPoints = bigNumberify(feeBasisPoints);\n  taxBasisPoints = bigNumberify(taxBasisPoints);\n\n  const initialAmount = tokenUsdgAmount;\n  let nextAmount = initialAmount.add(usdgDelta);\n  if (!increment) {\n    nextAmount = usdgDelta.gt(initialAmount) ? bigNumberify(0) : initialAmount.sub(usdgDelta);\n  }\n\n  const targetAmount = getTargetUsdgAmount(token, usdgSupply, totalTokenWeights);\n  if (!targetAmount || targetAmount.eq(0)) {\n    return feeBasisPoints.toNumber();\n  }\n\n  const initialDiff = initialAmount.gt(targetAmount)\n    ? initialAmount.sub(targetAmount)\n    : targetAmount.sub(initialAmount);\n  const nextDiff = nextAmount.gt(targetAmount) ? nextAmount.sub(targetAmount) : targetAmount.sub(nextAmount);\n\n  if (nextDiff.lt(initialDiff)) {\n    const rebateBps = taxBasisPoints.mul(initialDiff).div(targetAmount);\n    return rebateBps.gt(feeBasisPoints) ? 0 : feeBasisPoints.sub(rebateBps).toNumber();\n  }\n\n  let averageDiff = initialDiff.add(nextDiff).div(2);\n  if (averageDiff.gt(targetAmount)) {\n    averageDiff = targetAmount;\n  }\n  const taxBps = taxBasisPoints.mul(averageDiff).div(targetAmount);\n  return feeBasisPoints.add(taxBps).toNumber();\n}\n\nexport function getBuyGlpToAmount(fromAmount, swapTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\n  const defaultValue = { amount: bigNumberify(0), feeBasisPoints: 0 };\n  if (!fromAmount || !swapTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\n    return defaultValue;\n  }\n\n  const swapToken = getTokenInfo(infoTokens, swapTokenAddress);\n  if (!swapToken || !swapToken.minPrice) {\n    return defaultValue;\n  }\n\n  let glpAmount = fromAmount.mul(swapToken.minPrice).div(glpPrice);\n  glpAmount = adjustForDecimals(glpAmount, swapToken.decimals, USDG_DECIMALS);\n\n  let usdgAmount = fromAmount.mul(swapToken.minPrice).div(PRECISION);\n  usdgAmount = adjustForDecimals(usdgAmount, swapToken.decimals, USDG_DECIMALS);\n  const feeBasisPoints = getFeeBasisPoints(\n    swapToken,\n    swapToken.usdgAmount,\n    usdgAmount,\n    MINT_BURN_FEE_BASIS_POINTS,\n    TAX_BASIS_POINTS,\n    true,\n    usdgSupply,\n    totalTokenWeights\n  );\n\n  glpAmount = glpAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n\n  return { amount: glpAmount, feeBasisPoints };\n}\n\nexport function getSellGlpFromAmount(toAmount, swapTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\n  const defaultValue = { amount: bigNumberify(0), feeBasisPoints: 0 };\n  if (!toAmount || !swapTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\n    return defaultValue;\n  }\n\n  const swapToken = getTokenInfo(infoTokens, swapTokenAddress);\n  if (!swapToken || !swapToken.maxPrice) {\n    return defaultValue;\n  }\n\n  let glpAmount = toAmount.mul(swapToken.maxPrice).div(glpPrice);\n  glpAmount = adjustForDecimals(glpAmount, swapToken.decimals, USDG_DECIMALS);\n\n  let usdgAmount = toAmount.mul(swapToken.maxPrice).div(PRECISION);\n  usdgAmount = adjustForDecimals(usdgAmount, swapToken.decimals, USDG_DECIMALS);\n\n  // in the Vault contract, the USDG supply is reduced before the fee basis points\n  // is calculated\n  usdgSupply = usdgSupply.sub(usdgAmount);\n\n  // in the Vault contract, the token.usdgAmount is reduced before the fee basis points\n  // is calculated\n  const feeBasisPoints = getFeeBasisPoints(\n    swapToken,\n    swapToken?.usdgAmount?.sub(usdgAmount),\n    usdgAmount,\n    MINT_BURN_FEE_BASIS_POINTS,\n    TAX_BASIS_POINTS,\n    false,\n    usdgSupply,\n    totalTokenWeights\n  );\n\n  glpAmount = glpAmount.mul(BASIS_POINTS_DIVISOR).div(BASIS_POINTS_DIVISOR - feeBasisPoints);\n\n  return { amount: glpAmount, feeBasisPoints };\n}\n\nexport function getBuyGlpFromAmount(toAmount, fromTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\n  const defaultValue = { amount: bigNumberify(0) };\n  if (!toAmount || !fromTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\n    return defaultValue;\n  }\n\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n  if (!fromToken || !fromToken.minPrice) {\n    return defaultValue;\n  }\n\n  let fromAmount = toAmount.mul(glpPrice).div(fromToken.minPrice);\n  fromAmount = adjustForDecimals(fromAmount, GLP_DECIMALS, fromToken.decimals);\n\n  const usdgAmount = toAmount.mul(glpPrice).div(PRECISION);\n  const feeBasisPoints = getFeeBasisPoints(\n    fromToken,\n    fromToken.usdgAmount,\n    usdgAmount,\n    MINT_BURN_FEE_BASIS_POINTS,\n    TAX_BASIS_POINTS,\n    true,\n    usdgSupply,\n    totalTokenWeights\n  );\n\n  fromAmount = fromAmount.mul(BASIS_POINTS_DIVISOR).div(BASIS_POINTS_DIVISOR - feeBasisPoints);\n\n  return { amount: fromAmount, feeBasisPoints };\n}\n\nexport function getSellGlpToAmount(toAmount, fromTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\n  const defaultValue = { amount: bigNumberify(0) };\n  if (!toAmount || !fromTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\n    return defaultValue;\n  }\n\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n  if (!fromToken || !fromToken.maxPrice) {\n    return defaultValue;\n  }\n\n  let fromAmount = toAmount.mul(glpPrice).div(fromToken.maxPrice);\n  fromAmount = adjustForDecimals(fromAmount, GLP_DECIMALS, fromToken.decimals);\n\n  const usdgAmount = toAmount.mul(glpPrice).div(PRECISION);\n\n  // in the Vault contract, the USDG supply is reduced before the fee basis points\n  // is calculated\n  usdgSupply = usdgSupply.sub(usdgAmount);\n\n  // in the Vault contract, the token.usdgAmount is reduced before the fee basis points\n  // is calculated\n  const feeBasisPoints = getFeeBasisPoints(\n    fromToken,\n    fromToken?.usdgAmount?.sub(usdgAmount),\n    usdgAmount,\n    MINT_BURN_FEE_BASIS_POINTS,\n    TAX_BASIS_POINTS,\n    false,\n    usdgSupply,\n    totalTokenWeights\n  );\n\n  fromAmount = fromAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n\n  return { amount: fromAmount, feeBasisPoints };\n}\n\nexport function getNextFromAmount(\n  chainId,\n  toAmount,\n  fromTokenAddress,\n  toTokenAddress,\n  infoTokens,\n  toTokenPriceUsd,\n  ratio,\n  usdgSupply,\n  totalTokenWeights,\n  forSwap\n) {\n  const defaultValue = { amount: bigNumberify(0) };\n\n  if (!toAmount || !fromTokenAddress || !toTokenAddress || !infoTokens) {\n    return defaultValue;\n  }\n\n  if (fromTokenAddress === toTokenAddress) {\n    return { amount: toAmount };\n  }\n\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n  const toToken = getTokenInfo(infoTokens, toTokenAddress);\n\n  if (fromToken.isNative && toToken.isWrapped) {\n    return { amount: toAmount };\n  }\n\n  if (fromToken.isWrapped && toToken.isNative) {\n    return { amount: toAmount };\n  }\n\n  // the realtime price should be used if it is for a transaction to open / close a position\n  // or if the transaction involves doing a swap and opening / closing a position\n  // otherwise use the contract price instead of realtime price for swaps\n\n  let fromTokenMinPrice;\n  if (fromToken) {\n    fromTokenMinPrice = forSwap ? fromToken.contractMinPrice : fromToken.minPrice;\n  }\n\n  let toTokenMaxPrice;\n  if (toToken) {\n    toTokenMaxPrice = forSwap ? toToken.contractMaxPrice : toToken.maxPrice;\n  }\n\n  if (!fromToken || !fromTokenMinPrice || !toToken || !toTokenMaxPrice) {\n    return defaultValue;\n  }\n\n  const adjustDecimals = adjustForDecimalsFactory(fromToken.decimals - toToken.decimals);\n\n  let fromAmountBasedOnRatio;\n  if (ratio && !ratio.isZero()) {\n    fromAmountBasedOnRatio = toAmount.mul(ratio).div(PRECISION);\n  }\n\n  const fromAmount =\n    ratio && !ratio.isZero() ? fromAmountBasedOnRatio : toAmount.mul(toTokenMaxPrice).div(fromTokenMinPrice);\n\n  let usdgAmount = fromAmount.mul(fromTokenMinPrice).div(PRECISION);\n  usdgAmount = adjustForDecimals(usdgAmount, toToken.decimals, USDG_DECIMALS);\n  const swapFeeBasisPoints =\n    fromToken.isStable && toToken.isStable ? STABLE_SWAP_FEE_BASIS_POINTS : SWAP_FEE_BASIS_POINTS;\n  const taxBasisPoints = fromToken.isStable && toToken.isStable ? STABLE_TAX_BASIS_POINTS : TAX_BASIS_POINTS;\n  const feeBasisPoints0 = getFeeBasisPoints(\n    fromToken,\n    fromToken.usdgAmount,\n    usdgAmount,\n    swapFeeBasisPoints,\n    taxBasisPoints,\n    true,\n    usdgSupply,\n    totalTokenWeights\n  );\n  const feeBasisPoints1 = getFeeBasisPoints(\n    toToken,\n    toToken.usdgAmount,\n    usdgAmount,\n    swapFeeBasisPoints,\n    taxBasisPoints,\n    false,\n    usdgSupply,\n    totalTokenWeights\n  );\n  const feeBasisPoints = feeBasisPoints0 > feeBasisPoints1 ? feeBasisPoints0 : feeBasisPoints1;\n\n  return {\n    amount: adjustDecimals(fromAmount.mul(BASIS_POINTS_DIVISOR).div(BASIS_POINTS_DIVISOR - feeBasisPoints)),\n    feeBasisPoints,\n  };\n}\n\nexport function getNextToAmount(\n  chainId,\n  fromAmount,\n  fromTokenAddress,\n  toTokenAddress,\n  infoTokens,\n  toTokenPriceUsd,\n  ratio,\n  usdgSupply,\n  totalTokenWeights,\n  forSwap\n) {\n  const defaultValue = { amount: bigNumberify(0) };\n  if (!fromAmount || !fromTokenAddress || !toTokenAddress || !infoTokens) {\n    return defaultValue;\n  }\n\n  if (fromTokenAddress === toTokenAddress) {\n    return { amount: fromAmount };\n  }\n\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n  const toToken = getTokenInfo(infoTokens, toTokenAddress);\n\n  if (fromToken.isNative && toToken.isWrapped) {\n    return { amount: fromAmount };\n  }\n\n  if (fromToken.isWrapped && toToken.isNative) {\n    return { amount: fromAmount };\n  }\n\n  // the realtime price should be used if it is for a transaction to open / close a position\n  // or if the transaction involves doing a swap and opening / closing a position\n  // otherwise use the contract price instead of realtime price for swaps\n\n  let fromTokenMinPrice;\n  if (fromToken) {\n    fromTokenMinPrice = forSwap ? fromToken.contractMinPrice : fromToken.minPrice;\n  }\n\n  let toTokenMaxPrice;\n  if (toToken) {\n    toTokenMaxPrice = forSwap ? toToken.contractMaxPrice : toToken.maxPrice;\n  }\n\n  if (!fromTokenMinPrice || !toTokenMaxPrice) {\n    return defaultValue;\n  }\n\n  const adjustDecimals = adjustForDecimalsFactory(toToken.decimals - fromToken.decimals);\n\n  let toAmountBasedOnRatio = bigNumberify(0)!;\n  if (ratio && !ratio.isZero()) {\n    toAmountBasedOnRatio = fromAmount.mul(PRECISION).div(ratio);\n  }\n\n  if (toTokenAddress === USDG_ADDRESS) {\n    const feeBasisPoints = getSwapFeeBasisPoints(fromToken.isStable);\n\n    if (ratio && !ratio.isZero()) {\n      const toAmount = toAmountBasedOnRatio;\n      return {\n        amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\n        feeBasisPoints,\n      };\n    }\n\n    const toAmount = fromAmount.mul(fromTokenMinPrice).div(PRECISION);\n    return {\n      amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\n      feeBasisPoints,\n    };\n  }\n\n  if (fromTokenAddress === USDG_ADDRESS) {\n    const redemptionValue = toToken.redemptionAmount\n      ?.mul(toTokenPriceUsd || toTokenMaxPrice)\n      .div(expandDecimals(1, toToken.decimals));\n\n    if (redemptionValue && redemptionValue.gt(THRESHOLD_REDEMPTION_VALUE)) {\n      const feeBasisPoints = getSwapFeeBasisPoints(toToken.isStable);\n\n      const toAmount =\n        ratio && !ratio.isZero()\n          ? toAmountBasedOnRatio\n          : fromAmount.mul(toToken.redemptionAmount).div(expandDecimals(1, toToken.decimals));\n\n      return {\n        amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\n        feeBasisPoints,\n      };\n    }\n\n    const expectedAmount = fromAmount;\n\n    const stableToken = getMostAbundantStableToken(chainId, infoTokens);\n    if (!stableToken?.availableAmount || stableToken.availableAmount.lt(expectedAmount)) {\n      const toAmount =\n        ratio && !ratio.isZero()\n          ? toAmountBasedOnRatio\n          : fromAmount.mul(toToken.redemptionAmount).div(expandDecimals(1, toToken.decimals));\n      const feeBasisPoints = getSwapFeeBasisPoints(toToken.isStable);\n      return {\n        amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\n        feeBasisPoints,\n      };\n    }\n\n    const feeBasisPoints0 = getSwapFeeBasisPoints(true);\n    const feeBasisPoints1 = getSwapFeeBasisPoints(false);\n\n    if (ratio && !ratio.isZero()) {\n      const toAmount = toAmountBasedOnRatio\n        .mul(BASIS_POINTS_DIVISOR - feeBasisPoints0 - feeBasisPoints1)\n        .div(BASIS_POINTS_DIVISOR);\n      return {\n        amount: adjustDecimals(toAmount),\n        path: [USDG_ADDRESS, stableToken.address, toToken.address],\n        feeBasisPoints: feeBasisPoints0 + feeBasisPoints1,\n      };\n    }\n\n    // get toAmount for USDG => stableToken\n    let toAmount = fromAmount.mul(PRECISION).div(stableToken.maxPrice);\n    // apply USDG => stableToken fees\n    toAmount = toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints0).div(BASIS_POINTS_DIVISOR);\n\n    // get toAmount for stableToken => toToken\n    toAmount = toAmount.mul(stableToken.minPrice).div(toTokenPriceUsd || toTokenMaxPrice);\n    // apply stableToken => toToken fees\n    toAmount = toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints1).div(BASIS_POINTS_DIVISOR);\n\n    return {\n      amount: adjustDecimals(toAmount),\n      path: [USDG_ADDRESS, stableToken.address, toToken.address],\n      feeBasisPoints: feeBasisPoints0 + feeBasisPoints1,\n    };\n  }\n\n  const toAmount =\n    ratio && !ratio.isZero()\n      ? toAmountBasedOnRatio\n      : fromAmount.mul(fromTokenMinPrice).div(toTokenPriceUsd || toTokenMaxPrice);\n\n  let usdgAmount = fromAmount.mul(fromTokenMinPrice).div(PRECISION);\n  usdgAmount = adjustForDecimals(usdgAmount, fromToken.decimals, USDG_DECIMALS);\n  const swapFeeBasisPoints =\n    fromToken.isStable && toToken.isStable ? STABLE_SWAP_FEE_BASIS_POINTS : SWAP_FEE_BASIS_POINTS;\n  const taxBasisPoints = fromToken.isStable && toToken.isStable ? STABLE_TAX_BASIS_POINTS : TAX_BASIS_POINTS;\n  const feeBasisPoints0 = getFeeBasisPoints(\n    fromToken,\n    fromToken.usdgAmount,\n    usdgAmount,\n    swapFeeBasisPoints,\n    taxBasisPoints,\n    true,\n    usdgSupply,\n    totalTokenWeights\n  );\n  const feeBasisPoints1 = getFeeBasisPoints(\n    toToken,\n    toToken.usdgAmount,\n    usdgAmount,\n    swapFeeBasisPoints,\n    taxBasisPoints,\n    false,\n    usdgSupply,\n    totalTokenWeights\n  );\n  const feeBasisPoints = feeBasisPoints0 > feeBasisPoints1 ? feeBasisPoints0 : feeBasisPoints1;\n\n  return {\n    amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\n    feeBasisPoints,\n  };\n}\n\nexport function getProfitPrice(closePrice, position) {\n  let profitPrice;\n  if (position && position.averagePrice && closePrice) {\n    profitPrice = position.isLong\n      ? position.averagePrice.mul(BASIS_POINTS_DIVISOR + MIN_PROFIT_BIPS).div(BASIS_POINTS_DIVISOR)\n      : position.averagePrice.mul(BASIS_POINTS_DIVISOR - MIN_PROFIT_BIPS).div(BASIS_POINTS_DIVISOR);\n  }\n  return profitPrice;\n}\n\nexport function calculatePositionDelta(\n  price,\n  { size, collateral, isLong, averagePrice, lastIncreasedTime },\n  sizeDelta\n) {\n  if (!sizeDelta) {\n    sizeDelta = size;\n  }\n  const priceDelta = averagePrice.gt(price) ? averagePrice.sub(price) : price.sub(averagePrice);\n  let delta = sizeDelta.mul(priceDelta).div(averagePrice);\n  const pendingDelta = delta;\n\n  const minProfitExpired = lastIncreasedTime + MIN_PROFIT_TIME < Date.now() / 1000;\n  const hasProfit = isLong ? price.gt(averagePrice) : price.lt(averagePrice);\n  if (!minProfitExpired && hasProfit && delta.mul(BASIS_POINTS_DIVISOR).lte(size.mul(MIN_PROFIT_BIPS))) {\n    delta = bigNumberify(0);\n  }\n\n  const deltaPercentage = delta.mul(BASIS_POINTS_DIVISOR).div(collateral);\n  const pendingDeltaPercentage = pendingDelta.mul(BASIS_POINTS_DIVISOR).div(collateral);\n\n  return {\n    delta,\n    pendingDelta,\n    pendingDeltaPercentage,\n    hasProfit,\n    deltaPercentage,\n  };\n}\n\nexport function getDeltaStr({ delta, deltaPercentage, hasProfit }) {\n  let deltaStr;\n  let deltaPercentageStr;\n\n  if (delta.gt(0)) {\n    deltaStr = hasProfit ? \"+\" : \"-\";\n    deltaPercentageStr = hasProfit ? \"+\" : \"-\";\n  } else {\n    deltaStr = \"\";\n    deltaPercentageStr = \"\";\n  }\n  deltaStr += `$${formatAmount(delta, USD_DECIMALS, 2, true)}`;\n  deltaPercentageStr += `${formatAmount(deltaPercentage, 2, 2)}%`;\n\n  return { deltaStr, deltaPercentageStr };\n}\n\nexport function getLeverage({\n  size,\n  sizeDelta,\n  increaseSize,\n  collateral,\n  collateralDelta,\n  increaseCollateral,\n  entryFundingRate,\n  cumulativeFundingRate,\n  hasProfit,\n  delta,\n  includeDelta,\n}) {\n  if (!size && !sizeDelta) {\n    return;\n  }\n  if (!collateral && !collateralDelta) {\n    return;\n  }\n\n  let nextSize = size ? size : bigNumberify(0);\n  if (sizeDelta) {\n    if (increaseSize) {\n      nextSize = size.add(sizeDelta);\n    } else {\n      if (sizeDelta.gte(size)) {\n        return;\n      }\n      nextSize = size.sub(sizeDelta);\n    }\n  }\n\n  let remainingCollateral = collateral ? collateral : bigNumberify(0);\n  if (collateralDelta) {\n    if (increaseCollateral) {\n      remainingCollateral = collateral.add(collateralDelta);\n    } else {\n      if (collateralDelta.gte(collateral)) {\n        return;\n      }\n      remainingCollateral = collateral.sub(collateralDelta);\n    }\n  }\n\n  if (delta && includeDelta) {\n    if (hasProfit) {\n      remainingCollateral = remainingCollateral.add(delta);\n    } else {\n      if (delta.gt(remainingCollateral)) {\n        return;\n      }\n\n      remainingCollateral = remainingCollateral.sub(delta);\n    }\n  }\n\n  if (remainingCollateral.eq(0)) {\n    return;\n  }\n\n  remainingCollateral = sizeDelta\n    ? remainingCollateral.mul(BASIS_POINTS_DIVISOR - MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR)\n    : remainingCollateral;\n  if (entryFundingRate && cumulativeFundingRate) {\n    const fundingFee = size.mul(cumulativeFundingRate.sub(entryFundingRate)).div(FUNDING_RATE_PRECISION);\n    remainingCollateral = remainingCollateral.sub(fundingFee);\n  }\n\n  return nextSize.mul(BASIS_POINTS_DIVISOR).div(remainingCollateral);\n}\n\nexport function getLeverageStr(leverage) {\n  if (leverage && ethers.BigNumber.isBigNumber(leverage)) {\n    if (leverage.lt(0)) {\n      return \"> 100x\";\n    }\n    return `${formatAmount(leverage, 4, 2, true)}x`;\n  }\n}\n\nexport function getFundingFee(data: {\n  size: BigNumber;\n  entryFundingRate?: BigNumber;\n  cumulativeFundingRate?: BigNumber;\n}) {\n  let { entryFundingRate, cumulativeFundingRate, size } = data;\n\n  if (entryFundingRate && cumulativeFundingRate) {\n    return size.mul(cumulativeFundingRate.sub(entryFundingRate)).div(FUNDING_RATE_PRECISION);\n  }\n\n  return;\n}\n\nexport function getLiquidationPrice(data) {\n  let {\n    isLong,\n    size,\n    collateral,\n    averagePrice,\n    entryFundingRate,\n    cumulativeFundingRate,\n    sizeDelta,\n    collateralDelta,\n    increaseCollateral,\n    increaseSize,\n    delta,\n    hasProfit,\n    includeDelta,\n  } = data;\n  if (!size || !collateral || !averagePrice) {\n    return;\n  }\n\n  let nextSize = size ? size : bigNumberify(0);\n  let remainingCollateral = collateral;\n\n  if (sizeDelta) {\n    if (increaseSize) {\n      nextSize = size.add(sizeDelta);\n    } else {\n      if (sizeDelta.gte(size)) {\n        return;\n      }\n      nextSize = size.sub(sizeDelta);\n    }\n\n    const marginFee = getMarginFee(sizeDelta);\n    remainingCollateral = remainingCollateral.sub(marginFee);\n\n    if (includeDelta && !hasProfit) {\n      const adjustedDelta = sizeDelta.mul(delta).div(size);\n      remainingCollateral = remainingCollateral.sub(adjustedDelta);\n    }\n  }\n\n  if (collateralDelta) {\n    if (increaseCollateral) {\n      remainingCollateral = remainingCollateral.add(collateralDelta);\n    } else {\n      if (collateralDelta.gte(remainingCollateral)) {\n        return;\n      }\n      remainingCollateral = remainingCollateral.sub(collateralDelta);\n    }\n  }\n\n  let positionFee = getMarginFee(size).add(LIQUIDATION_FEE);\n\n  if (entryFundingRate && cumulativeFundingRate) {\n    const fundingFee = size.mul(cumulativeFundingRate.sub(entryFundingRate)).div(FUNDING_RATE_PRECISION);\n    positionFee = positionFee.add(fundingFee);\n  }\n\n  const liquidationPriceForFees = getLiquidationPriceFromDelta({\n    liquidationAmount: positionFee,\n    size: nextSize,\n    collateral: remainingCollateral,\n    averagePrice,\n    isLong,\n  });\n\n  const liquidationPriceForMaxLeverage = getLiquidationPriceFromDelta({\n    liquidationAmount: nextSize.mul(BASIS_POINTS_DIVISOR).div(MAX_LEVERAGE),\n    size: nextSize,\n    collateral: remainingCollateral,\n    averagePrice,\n    isLong,\n  });\n\n  if (!liquidationPriceForFees) {\n    return liquidationPriceForMaxLeverage;\n  }\n\n  if (!liquidationPriceForMaxLeverage) {\n    return liquidationPriceForFees;\n  }\n\n  if (isLong) {\n    // return the higher price\n    return liquidationPriceForFees.gt(liquidationPriceForMaxLeverage)\n      ? liquidationPriceForFees\n      : liquidationPriceForMaxLeverage;\n  }\n\n  // return the lower price\n  return liquidationPriceForFees.lt(liquidationPriceForMaxLeverage)\n    ? liquidationPriceForFees\n    : liquidationPriceForMaxLeverage;\n}\n\nexport function getPositionKey(\n  account: string,\n  collateralTokenAddress: string,\n  indexTokenAddress: string,\n  isLong: boolean,\n  nativeTokenAddress?: string\n) {\n  const tokenAddress0 = collateralTokenAddress === AddressZero ? nativeTokenAddress : collateralTokenAddress;\n  const tokenAddress1 = indexTokenAddress === AddressZero ? nativeTokenAddress : indexTokenAddress;\n  return account + \":\" + tokenAddress0 + \":\" + tokenAddress1 + \":\" + isLong;\n}\n\nexport function getPositionContractKey(account, collateralToken, indexToken, isLong) {\n  return ethers.utils.solidityKeccak256(\n    [\"address\", \"address\", \"address\", \"bool\"],\n    [account, collateralToken, indexToken, isLong]\n  );\n}\n\nexport function getSwapFeeBasisPoints(isStable) {\n  return isStable ? STABLE_SWAP_FEE_BASIS_POINTS : SWAP_FEE_BASIS_POINTS;\n}\n\nexport function shortenAddress(address, length) {\n  if (!length) {\n    return \"\";\n  }\n  if (!address) {\n    return address;\n  }\n  if (address.length < 10) {\n    return address;\n  }\n  let left = Math.floor((length - 3) / 2) + 1;\n  return address.substring(0, left) + \"...\" + address.substring(address.length - (length - (left + 3)), address.length);\n}\n\nexport function useENS(address) {\n  const [ensName, setENSName] = useState<string | undefined>();\n\n  useEffect(() => {\n    async function resolveENS() {\n      if (address) {\n        const provider = new ethers.providers.JsonRpcProvider(getRpcUrl(ETH_MAINNET));\n        const name = await provider.lookupAddress(address.toLowerCase());\n        if (name) setENSName(name);\n      }\n    }\n    resolveENS();\n  }, [address]);\n\n  return { ensName };\n}\n\nfunction _parseOrdersData(ordersData, account, indexes, extractor, uintPropsLength, addressPropsLength) {\n  if (!ordersData || ordersData.length === 0) {\n    return [];\n  }\n  const [uintProps, addressProps] = ordersData;\n  const count = uintProps.length / uintPropsLength;\n\n  const orders: any[] = [];\n  for (let i = 0; i < count; i++) {\n    const sliced = addressProps\n      .slice(addressPropsLength * i, addressPropsLength * (i + 1))\n      .concat(uintProps.slice(uintPropsLength * i, uintPropsLength * (i + 1)));\n\n    if (sliced[0] === AddressZero && sliced[1] === AddressZero) {\n      continue;\n    }\n\n    const order = extractor(sliced);\n    order.index = indexes[i];\n    order.account = account;\n    orders.push(order);\n  }\n\n  return orders;\n}\n\nfunction parseDecreaseOrdersData(chainId, decreaseOrdersData, account, indexes) {\n  const extractor = (sliced) => {\n    const isLong = sliced[4].toString() === \"1\";\n    return {\n      collateralToken: sliced[0],\n      indexToken: sliced[1],\n      collateralDelta: sliced[2],\n      sizeDelta: sliced[3],\n      isLong,\n      triggerPrice: sliced[5],\n      triggerAboveThreshold: sliced[6].toString() === \"1\",\n      type: DECREASE,\n    };\n  };\n  return _parseOrdersData(decreaseOrdersData, account, indexes, extractor, 5, 2).filter((order) => {\n    return isValidToken(chainId, order.collateralToken) && isValidToken(chainId, order.indexToken);\n  });\n}\n\nfunction parseIncreaseOrdersData(chainId, increaseOrdersData, account, indexes) {\n  const extractor = (sliced) => {\n    const isLong = sliced[5].toString() === \"1\";\n    return {\n      purchaseToken: sliced[0],\n      collateralToken: sliced[1],\n      indexToken: sliced[2],\n      purchaseTokenAmount: sliced[3],\n      sizeDelta: sliced[4],\n      isLong,\n      triggerPrice: sliced[6],\n      triggerAboveThreshold: sliced[7].toString() === \"1\",\n      type: INCREASE,\n    };\n  };\n  return _parseOrdersData(increaseOrdersData, account, indexes, extractor, 5, 3).filter((order) => {\n    return (\n      isValidToken(chainId, order.purchaseToken) &&\n      isValidToken(chainId, order.collateralToken) &&\n      isValidToken(chainId, order.indexToken)\n    );\n  });\n}\n\nfunction parseSwapOrdersData(chainId, swapOrdersData, account, indexes) {\n  if (!swapOrdersData || !swapOrdersData.length) {\n    return [];\n  }\n\n  const extractor = (sliced) => {\n    const triggerAboveThreshold = sliced[6].toString() === \"1\";\n    const shouldUnwrap = sliced[7].toString() === \"1\";\n\n    return {\n      path: [sliced[0], sliced[1], sliced[2]].filter((address) => address !== AddressZero),\n      amountIn: sliced[3],\n      minOut: sliced[4],\n      triggerRatio: sliced[5],\n      triggerAboveThreshold,\n      type: SWAP,\n      shouldUnwrap,\n    };\n  };\n  return _parseOrdersData(swapOrdersData, account, indexes, extractor, 5, 3).filter((order) => {\n    return order.path.every((token) => isValidToken(chainId, token));\n  });\n}\n\nexport function getOrderKey(order) {\n  return `${order.type}-${order.account}-${order.index}`;\n}\n\nexport function useAccountOrders(flagOrdersEnabled, overrideAccount) {\n  const { library, account: connectedAccount } = useWeb3React();\n  const active = true; // this is used in Actions.js so set active to always be true\n  const account = overrideAccount || connectedAccount;\n\n  const { chainId } = useChainId();\n  const shouldRequest = active && account && flagOrdersEnabled;\n\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const orderBookReaderAddress = getContract(chainId, \"OrderBookReader\");\n  const key: any = shouldRequest ? [active, chainId, orderBookAddress, account] : false;\n  const {\n    data: orders = [],\n    mutate: updateOrders,\n    error: ordersError,\n  } = useSWR(key, {\n    dedupingInterval: 5000,\n    fetcher: async (active, chainId, orderBookAddress, account) => {\n      const provider = getProvider(library, chainId);\n      const orderBookContract = new ethers.Contract(orderBookAddress, OrderBook.abi, provider);\n      const orderBookReaderContract = new ethers.Contract(orderBookReaderAddress, OrderBookReader.abi, provider);\n\n      const fetchIndexesFromServer = () => {\n        const ordersIndexesUrl = `${getServerBaseUrl(chainId)}/orders_indices?account=${account}`;\n        return fetch(ordersIndexesUrl)\n          .then(async (res) => {\n            const json = await res.json();\n            const ret = {};\n            for (const key of Object.keys(json)) {\n              ret[key.toLowerCase()] = json[key].map((val) => parseInt(val.value)).sort((a, b) => a - b);\n            }\n\n            return ret;\n          })\n          .catch(() => ({ swap: [], increase: [], decrease: [] }));\n      };\n\n      const fetchLastIndex = async (type) => {\n        const method = type.toLowerCase() + \"OrdersIndex\";\n        return await orderBookContract[method](account).then((res) => bigNumberify(res._hex)!.toNumber());\n      };\n\n      const fetchLastIndexes = async () => {\n        const [swap, increase, decrease] = await Promise.all([\n          fetchLastIndex(\"swap\"),\n          fetchLastIndex(\"increase\"),\n          fetchLastIndex(\"decrease\"),\n        ]);\n\n        return { swap, increase, decrease };\n      };\n\n      const getRange = (to: number, from?: number) => {\n        const LIMIT = 10;\n        const _indexes: number[] = [];\n        from = from || Math.max(to - LIMIT, 0);\n        for (let i = to - 1; i >= from; i--) {\n          _indexes.push(i);\n        }\n        return _indexes;\n      };\n\n      const getIndexes = (knownIndexes, lastIndex) => {\n        if (knownIndexes.length === 0) {\n          return getRange(lastIndex);\n        }\n        return [\n          ...knownIndexes,\n          ...getRange(lastIndex, knownIndexes[knownIndexes.length - 1] + 1).sort((a, b) => b - a),\n        ];\n      };\n\n      const getOrders = async (method, knownIndexes, lastIndex, parseFunc) => {\n        const indexes = getIndexes(knownIndexes, lastIndex);\n        const ordersData = await orderBookReaderContract[method](orderBookAddress, account, indexes);\n        const orders = parseFunc(chainId, ordersData, account, indexes);\n\n        return orders;\n      };\n\n      try {\n        const [serverIndexes, lastIndexes]: any = await Promise.all([fetchIndexesFromServer(), fetchLastIndexes()]);\n        const [swapOrders = [], increaseOrders = [], decreaseOrders = []] = await Promise.all([\n          getOrders(\"getSwapOrders\", serverIndexes.swap, lastIndexes.swap, parseSwapOrdersData),\n          getOrders(\"getIncreaseOrders\", serverIndexes.increase, lastIndexes.increase, parseIncreaseOrdersData),\n          getOrders(\"getDecreaseOrders\", serverIndexes.decrease, lastIndexes.decrease, parseDecreaseOrdersData),\n        ]);\n        return [...swapOrders, ...increaseOrders, ...decreaseOrders];\n      } catch (ex) {\n        // eslint-disable-next-line no-console\n        console.error(ex);\n      }\n    },\n  });\n\n  return [orders, updateOrders, ordersError];\n}\n\nexport function getAccountUrl(chainId, account) {\n  if (!account) {\n    return getExplorerUrl(chainId);\n  }\n  return getExplorerUrl(chainId) + \"address/\" + account;\n}\n\nexport function isMobileDevice(navigator) {\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n}\n\nexport const CHART_PERIODS = {\n  \"5m\": 60 * 5,\n  \"15m\": 60 * 15,\n  \"1h\": 60 * 60,\n  \"4h\": 60 * 60 * 4,\n  \"1d\": 60 * 60 * 24,\n};\n\nexport function getTotalVolumeSum(volumes) {\n  if (!volumes || volumes.length === 0) {\n    return;\n  }\n\n  let volume = bigNumberify(0)!;\n\n  for (let i = 0; i < volumes.length; i++) {\n    volume = volume.add(volumes[i].data.volume);\n  }\n\n  return volume;\n}\n\nexport function getBalanceAndSupplyData(balances) {\n  if (!balances || balances.length === 0) {\n    return {};\n  }\n\n  const keys = [\"gmx\", \"esGmx\", \"glp\", \"stakedGmxTracker\"];\n  const balanceData = {};\n  const supplyData = {};\n  const propsLength = 2;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    balanceData[key] = balances[i * propsLength];\n    supplyData[key] = balances[i * propsLength + 1];\n  }\n\n  return { balanceData, supplyData };\n}\n\nexport function getDepositBalanceData(depositBalances) {\n  if (!depositBalances || depositBalances.length === 0) {\n    return;\n  }\n\n  const keys = [\n    \"gmxInStakedGmx\",\n    \"esGmxInStakedGmx\",\n    \"stakedGmxInBonusGmx\",\n    \"bonusGmxInFeeGmx\",\n    \"bnGmxInFeeGmx\",\n    \"glpInStakedGlp\",\n  ];\n  const data = {};\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    data[key] = depositBalances[i];\n  }\n\n  return data;\n}\n\nexport function getVestingData(vestingInfo) {\n  if (!vestingInfo || vestingInfo.length === 0) {\n    return;\n  }\n\n  const keys = [\"gmxVester\", \"glpVester\"];\n  const data = {};\n  const propsLength = 7;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    data[key] = {\n      pairAmount: vestingInfo[i * propsLength],\n      vestedAmount: vestingInfo[i * propsLength + 1],\n      escrowedBalance: vestingInfo[i * propsLength + 2],\n      claimedAmounts: vestingInfo[i * propsLength + 3],\n      claimable: vestingInfo[i * propsLength + 4],\n      maxVestableAmount: vestingInfo[i * propsLength + 5],\n      averageStakedAmount: vestingInfo[i * propsLength + 6],\n    };\n\n    data[key + \"PairAmount\"] = data[key].pairAmount;\n    data[key + \"VestedAmount\"] = data[key].vestedAmount;\n    data[key + \"EscrowedBalance\"] = data[key].escrowedBalance;\n    data[key + \"ClaimSum\"] = data[key].claimedAmounts.add(data[key].claimable);\n    data[key + \"Claimable\"] = data[key].claimable;\n    data[key + \"MaxVestableAmount\"] = data[key].maxVestableAmount;\n    data[key + \"AverageStakedAmount\"] = data[key].averageStakedAmount;\n  }\n\n  return data;\n}\n\nexport function getStakingData(stakingInfo) {\n  if (!stakingInfo || stakingInfo.length === 0) {\n    return;\n  }\n\n  const keys = [\"stakedGmxTracker\", \"bonusGmxTracker\", \"feeGmxTracker\", \"stakedGlpTracker\", \"feeGlpTracker\"];\n  const data = {};\n  const propsLength = 5;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    data[key] = {\n      claimable: stakingInfo[i * propsLength],\n      tokensPerInterval: stakingInfo[i * propsLength + 1],\n      averageStakedAmounts: stakingInfo[i * propsLength + 2],\n      cumulativeRewards: stakingInfo[i * propsLength + 3],\n      totalSupply: stakingInfo[i * propsLength + 4],\n    };\n  }\n\n  return data;\n}\n\nexport function getProcessedData(\n  balanceData,\n  supplyData,\n  depositBalanceData,\n  stakingData,\n  vestingData,\n  aum,\n  nativeTokenPrice,\n  stakedGmxSupply,\n  gmxPrice,\n  gmxSupply\n) {\n  if (\n    !balanceData ||\n    !supplyData ||\n    !depositBalanceData ||\n    !stakingData ||\n    !vestingData ||\n    !aum ||\n    !nativeTokenPrice ||\n    !stakedGmxSupply ||\n    !gmxPrice ||\n    !gmxSupply\n  ) {\n    return {};\n  }\n\n  const data: any = {};\n\n  data.gmxBalance = balanceData.gmx;\n  data.gmxBalanceUsd = balanceData.gmx.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.gmxSupply = bigNumberify(gmxSupply);\n\n  data.gmxSupplyUsd = data.gmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\n  data.stakedGmxSupply = stakedGmxSupply;\n  data.stakedGmxSupplyUsd = stakedGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\n  data.gmxInStakedGmx = depositBalanceData.gmxInStakedGmx;\n  data.gmxInStakedGmxUsd = depositBalanceData.gmxInStakedGmx.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.esGmxBalance = balanceData.esGmx;\n  data.esGmxBalanceUsd = balanceData.esGmx.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.stakedGmxTrackerSupply = supplyData.stakedGmxTracker;\n  data.stakedGmxTrackerSupplyUsd = supplyData.stakedGmxTracker.mul(gmxPrice).div(expandDecimals(1, 18));\n  data.stakedEsGmxSupply = data.stakedGmxTrackerSupply.sub(data.stakedGmxSupply);\n  data.stakedEsGmxSupplyUsd = data.stakedEsGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.esGmxInStakedGmx = depositBalanceData.esGmxInStakedGmx;\n  data.esGmxInStakedGmxUsd = depositBalanceData.esGmxInStakedGmx.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.bnGmxInFeeGmx = depositBalanceData.bnGmxInFeeGmx;\n  data.bonusGmxInFeeGmx = depositBalanceData.bonusGmxInFeeGmx;\n  data.feeGmxSupply = stakingData.feeGmxTracker.totalSupply;\n  data.feeGmxSupplyUsd = data.feeGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.stakedGmxTrackerRewards = stakingData.stakedGmxTracker.claimable;\n  data.stakedGmxTrackerRewardsUsd = stakingData.stakedGmxTracker.claimable.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.bonusGmxTrackerRewards = stakingData.bonusGmxTracker.claimable;\n\n  data.feeGmxTrackerRewards = stakingData.feeGmxTracker.claimable;\n  data.feeGmxTrackerRewardsUsd = stakingData.feeGmxTracker.claimable.mul(nativeTokenPrice).div(expandDecimals(1, 18));\n\n  data.boostBasisPoints = bigNumberify(0);\n  if (data && data.bnGmxInFeeGmx && data.bonusGmxInFeeGmx && data.bonusGmxInFeeGmx.gt(0)) {\n    data.boostBasisPoints = data.bnGmxInFeeGmx.mul(BASIS_POINTS_DIVISOR).div(data.bonusGmxInFeeGmx);\n  }\n\n  data.stakedGmxTrackerAnnualRewardsUsd = stakingData.stakedGmxTracker.tokensPerInterval\n    .mul(SECONDS_PER_YEAR)\n    .mul(gmxPrice)\n    .div(expandDecimals(1, 18));\n  data.gmxAprForEsGmx =\n    data.stakedGmxTrackerSupplyUsd && data.stakedGmxTrackerSupplyUsd.gt(0)\n      ? data.stakedGmxTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.stakedGmxTrackerSupplyUsd)\n      : bigNumberify(0);\n  data.feeGmxTrackerAnnualRewardsUsd = stakingData.feeGmxTracker.tokensPerInterval\n    .mul(SECONDS_PER_YEAR)\n    .mul(nativeTokenPrice)\n    .div(expandDecimals(1, 18));\n  data.gmxAprForNativeToken =\n    data.feeGmxSupplyUsd && data.feeGmxSupplyUsd.gt(0)\n      ? data.feeGmxTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.feeGmxSupplyUsd)\n      : bigNumberify(0);\n  data.gmxBoostAprForNativeToken = data.gmxAprForNativeToken.mul(data.boostBasisPoints).div(BASIS_POINTS_DIVISOR);\n  data.gmxAprTotal = data.gmxAprForNativeToken.add(data.gmxAprForEsGmx);\n  data.gmxAprTotalWithBoost = data.gmxAprForNativeToken.add(data.gmxBoostAprForNativeToken).add(data.gmxAprForEsGmx);\n  data.gmxAprForNativeTokenWithBoost = data.gmxAprForNativeToken.add(data.gmxBoostAprForNativeToken);\n\n  data.totalGmxRewardsUsd = data.stakedGmxTrackerRewardsUsd.add(data.feeGmxTrackerRewardsUsd);\n\n  data.glpSupply = supplyData.glp;\n  data.glpPrice =\n    data.glpSupply && data.glpSupply.gt(0)\n      ? aum.mul(expandDecimals(1, GLP_DECIMALS)).div(data.glpSupply)\n      : bigNumberify(0);\n\n  data.glpSupplyUsd = supplyData.glp.mul(data.glpPrice).div(expandDecimals(1, 18));\n\n  data.glpBalance = depositBalanceData.glpInStakedGlp;\n  data.glpBalanceUsd = depositBalanceData.glpInStakedGlp.mul(data.glpPrice).div(expandDecimals(1, GLP_DECIMALS));\n\n  data.stakedGlpTrackerRewards = stakingData.stakedGlpTracker.claimable;\n  data.stakedGlpTrackerRewardsUsd = stakingData.stakedGlpTracker.claimable.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.feeGlpTrackerRewards = stakingData.feeGlpTracker.claimable;\n  data.feeGlpTrackerRewardsUsd = stakingData.feeGlpTracker.claimable.mul(nativeTokenPrice).div(expandDecimals(1, 18));\n\n  data.stakedGlpTrackerAnnualRewardsUsd = stakingData.stakedGlpTracker.tokensPerInterval\n    .mul(SECONDS_PER_YEAR)\n    .mul(gmxPrice)\n    .div(expandDecimals(1, 18));\n  data.glpAprForEsGmx =\n    data.glpSupplyUsd && data.glpSupplyUsd.gt(0)\n      ? data.stakedGlpTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.glpSupplyUsd)\n      : bigNumberify(0);\n  data.feeGlpTrackerAnnualRewardsUsd = stakingData.feeGlpTracker.tokensPerInterval\n    .mul(SECONDS_PER_YEAR)\n    .mul(nativeTokenPrice)\n    .div(expandDecimals(1, 18));\n  data.glpAprForNativeToken =\n    data.glpSupplyUsd && data.glpSupplyUsd.gt(0)\n      ? data.feeGlpTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.glpSupplyUsd)\n      : bigNumberify(0);\n  data.glpAprTotal = data.glpAprForNativeToken.add(data.glpAprForEsGmx);\n\n  data.totalGlpRewardsUsd = data.stakedGlpTrackerRewardsUsd.add(data.feeGlpTrackerRewardsUsd);\n\n  data.totalEsGmxRewards = data.stakedGmxTrackerRewards.add(data.stakedGlpTrackerRewards);\n  data.totalEsGmxRewardsUsd = data.stakedGmxTrackerRewardsUsd.add(data.stakedGlpTrackerRewardsUsd);\n\n  data.gmxVesterRewards = vestingData.gmxVester.claimable;\n  data.glpVesterRewards = vestingData.glpVester.claimable;\n  data.totalVesterRewards = data.gmxVesterRewards.add(data.glpVesterRewards);\n  data.totalVesterRewardsUsd = data.totalVesterRewards.mul(gmxPrice).div(expandDecimals(1, 18));\n\n  data.totalNativeTokenRewards = data.feeGmxTrackerRewards.add(data.feeGlpTrackerRewards);\n  data.totalNativeTokenRewardsUsd = data.feeGmxTrackerRewardsUsd.add(data.feeGlpTrackerRewardsUsd);\n\n  data.totalRewardsUsd = data.totalEsGmxRewardsUsd.add(data.totalNativeTokenRewardsUsd).add(data.totalVesterRewardsUsd);\n\n  return data;\n}\n\nexport function getPageTitle(data) {\n  return `${data} | Decentralized Perpetual Exchange | GMX`;\n}\n\nexport function isHashZero(value) {\n  return value === ethers.constants.HashZero;\n}\nexport function isAddressZero(value) {\n  return value === ethers.constants.AddressZero;\n}\n\nexport function getHomeUrl() {\n  if (isLocal()) {\n    return \"http://localhost:3010\";\n  }\n\n  return \"https://gmx.io\";\n}\n\nexport function getAppBaseUrl() {\n  if (isLocal()) {\n    return \"http://localhost:3011/#\";\n  }\n\n  return \"https://app.gmx.io/#\";\n}\n\nexport function getRootShareApiUrl() {\n  if (isLocal()) {\n    return \"https://gmxs.vercel.app\";\n  }\n\n  return \"https://share.gmx.io\";\n}\n\nexport function getTradePageUrl() {\n  if (isLocal()) {\n    return \"http://localhost:3011/#/trade\";\n  }\n\n  return \"https://app.gmx.io/#/trade\";\n}\n\nexport function importImage(name) {\n  let tokenImage: { default: string } | null = null;\n\n  try {\n    tokenImage = require(\"img/\" + name);\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.error(error);\n  }\n\n  return tokenImage?.default;\n}\n\nexport function getTwitterIntentURL(text, url = \"\", hashtag = \"\") {\n  let finalURL = \"https://twitter.com/intent/tweet?text=\";\n  if (text.length > 0) {\n    finalURL += Array.isArray(text) ? text.map((t) => encodeURIComponent(t)).join(\"%0a%0a\") : encodeURIComponent(text);\n    if (hashtag.length > 0) {\n      finalURL += \"&hashtags=\" + encodeURIComponent(hashtag.replace(/#/g, \"\"));\n    }\n    if (url.length > 0) {\n      finalURL += \"&url=\" + encodeURIComponent(url);\n    }\n  }\n  return finalURL;\n}\n\nexport function getPositionForOrder(account, order, positionsMap) {\n  const key = getPositionKey(account, order.collateralToken, order.indexToken, order.isLong);\n\n  const position = positionsMap[key];\n\n  return position && position.size && position.size.gt(0) ? position : null;\n}\n\nexport function getOrderError(account, order, positionsMap, position) {\n  if (order.type !== DECREASE) {\n    return;\n  }\n\n  const positionForOrder = position ? position : getPositionForOrder(account, order, positionsMap);\n\n  if (!positionForOrder) {\n    return t`No open position, order cannot be executed unless a position is opened`;\n  }\n  if (positionForOrder.size.lt(order.sizeDelta)) {\n    return t`Order size is bigger than position, will only be executable if position increases`;\n  }\n\n  if (positionForOrder.size.gt(order.sizeDelta)) {\n    if (positionForOrder.size.sub(order.sizeDelta).lt(positionForOrder.collateral.sub(order.collateralDelta))) {\n      return t`Order cannot be executed as it would reduce the position's leverage below 1`;\n    }\n    if (positionForOrder.size.sub(order.sizeDelta).lt(expandDecimals(5, USD_DECIMALS))) {\n      return t`Order cannot be executed as the remaining position would be smaller than $5.00`;\n    }\n  }\n}\n\nexport function shouldShowRedirectModal(timestamp) {\n  const thirtyDays = 1000 * 60 * 60 * 24 * 30;\n  const expiryTime = timestamp + thirtyDays;\n  return !isValidTimestamp(timestamp) || Date.now() > expiryTime;\n}\n","import { ARBITRUM, AVALANCHE, AVALANCHE_FUJI, ETH_MAINNET } from \"./chains\";\nimport { isDevelopment } from \"./env\";\nimport { getSubgraphUrlKey } from \"./localStorage\";\n\nconst SUBGRAPH_URLS = {\n  [ARBITRUM]: {\n    // stats: \"https://api.thegraph.com/subgraphs/name/gdev8317/gmx-arbitrum-stats\n    stats: \"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-stats\",\n    referrals: \"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-arbitrum-referrals\",\n    nissohVault: \"https://api.thegraph.com/subgraphs/name/nissoh/gmx-vault\",\n  },\n\n  [AVALANCHE]: {\n    // stats: \"https://api.thegraph.com/subgraphs/name/gdev8317/gmx-avalanche-staging\", // testing\n    stats: \"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-avalanche-stats\",\n    referrals: \"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-avalanche-referrals\",\n  },\n\n  [AVALANCHE_FUJI]: {\n    stats: \"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-avalanche-stats\",\n    referrals: \"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-avalanche-referrals\",\n    syntheticsStats:\n      \"https://subgraph.satsuma-prod.com/3b2ced13c8d9/gmx/synthetics-fuji-stats/version/upd-contracts/api\",\n  },\n\n  common: {\n    [ETH_MAINNET]: {\n      chainLink: \"https://api.thegraph.com/subgraphs/name/deividask/chainlink\",\n    },\n  },\n};\n\nexport function getSubgraphUrl(chainId: number, subgraph: string) {\n  if (isDevelopment()) {\n    const localStorageKey = getSubgraphUrlKey(chainId, subgraph);\n    const url = localStorage.getItem(localStorageKey);\n    if (url) {\n      // eslint-disable-next-line no-console\n      console.warn(\"%s subgraph on chain %s url is overriden: %s\", subgraph, chainId, url);\n      return url;\n    }\n  }\n\n  return SUBGRAPH_URLS[chainId]?.[subgraph];\n}\n","import { ApolloClient, InMemoryCache } from \"@apollo/client\";\nimport { getSubgraphUrl } from \"config/subgraph\";\n\nexport function createClient(chainId: number, subgraph: string) {\n  const url = getSubgraphUrl(chainId, subgraph);\n  return new ApolloClient({\n    uri: url,\n    cache: new InMemoryCache(),\n  });\n}\n","import { createClient } from \"./utils\";\nimport { ARBITRUM, ARBITRUM_TESTNET, AVALANCHE, AVALANCHE_FUJI, ETH_MAINNET } from \"config/chains\";\n\nexport const chainlinkClient = createClient(ETH_MAINNET, \"chainLink\");\n\nexport const arbitrumGraphClient = createClient(ARBITRUM, \"stats\");\nexport const arbitrumReferralsGraphClient = createClient(ARBITRUM, \"referrals\");\nexport const nissohGraphClient = createClient(ARBITRUM, \"nissohVault\");\n\nexport const avalancheGraphClient = createClient(AVALANCHE, \"stats\");\nexport const avalancheReferralsGraphClient = createClient(AVALANCHE, \"referrals\");\n\nexport const avalancheFujiSyntheticsStatsClient = createClient(AVALANCHE_FUJI, \"syntheticsStats\");\n\nexport function getSyntheticsGraphClient(chainId: number) {\n  if (chainId === AVALANCHE_FUJI) {\n    return avalancheFujiSyntheticsStatsClient;\n  }\n\n  return null;\n}\n\nexport function getGmxGraphClient(chainId: number) {\n  if (chainId === ARBITRUM) {\n    return arbitrumGraphClient;\n  } else if (chainId === AVALANCHE) {\n    return avalancheGraphClient;\n  } else if (chainId === ARBITRUM_TESTNET) {\n    return null;\n  }\n\n  throw new Error(`Unsupported chain ${chainId}`);\n}\n","export function sleep(ms: number) {\n  return new Promise<void>((resolve) => {\n    setTimeout(() => resolve(), ms);\n  });\n}\n","import { useMemo } from \"react\";\nimport { gql } from \"@apollo/client\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\n\nimport { USD_DECIMALS, CHART_PERIODS } from \"lib/legacy\";\nimport { GMX_STATS_API_URL } from \"config/backend\";\nimport { chainlinkClient } from \"lib/subgraph/clients\";\nimport { sleep } from \"lib/sleep\";\nimport { formatAmount } from \"lib/numbers\";\nimport { getNativeToken, getNormalizedTokenSymbol, isChartAvailabeForToken } from \"config/tokens\";\n\nconst BigNumber = ethers.BigNumber;\n\n// Ethereum network, Chainlink Aggregator contracts\nconst FEED_ID_MAP = {\n  BTC_USD: \"0xae74faa92cb67a95ebcab07358bc222e33a34da7\",\n  ETH_USD: \"0x37bc7498f4ff12c19678ee8fe19d713b87f6a9e6\",\n  BNB_USD: \"0xc45ebd0f901ba6b2b8c7e70b717778f055ef5e6d\",\n  LINK_USD: \"0xdfd03bfc3465107ce570a0397b247f546a42d0fa\",\n  UNI_USD: \"0x68577f915131087199fe48913d8b416b3984fd38\",\n  SUSHI_USD: \"0x7213536a36094cd8a768a5e45203ec286cba2d74\",\n  AVAX_USD: \"0x0fc3657899693648bba4dbd2d8b33b82e875105d\",\n  AAVE_USD: \"0xe3f0dede4b499c07e12475087ab1a084b5f93bc0\",\n  YFI_USD: \"0x8a4d74003870064d41d4f84940550911fbfccf04\",\n  SPELL_USD: \"0x8640b23468815902e011948f3ab173e1e83f9879\",\n};\nexport const timezoneOffset = -new Date().getTimezoneOffset() * 60;\n\nfunction formatBarInfo(bar) {\n  const { t, o: open, c: close, h: high, l: low } = bar;\n  return {\n    time: t + timezoneOffset,\n    open,\n    close,\n    high,\n    low,\n  };\n}\n\nexport function fillGaps(prices, periodSeconds) {\n  if (prices.length < 2) {\n    return prices;\n  }\n\n  const newPrices = [prices[0]];\n  let prevTime = prices[0].time;\n  for (let i = 1; i < prices.length; i++) {\n    const { time, open } = prices[i];\n    if (prevTime) {\n      let j = (time - prevTime) / periodSeconds - 1;\n      while (j > 0) {\n        newPrices.push({\n          time: time - j * periodSeconds,\n          open,\n          close: open,\n          high: open * 1.0003,\n          low: open * 0.9996,\n        });\n        j--;\n      }\n    }\n\n    prevTime = time;\n    newPrices.push(prices[i]);\n  }\n\n  return newPrices;\n}\n\nexport async function getLimitChartPricesFromStats(chainId, symbol, period, limit = 1) {\n  symbol = getNormalizedTokenSymbol(symbol);\n\n  if (!isChartAvailabeForToken(chainId, symbol)) {\n    symbol = getNativeToken(chainId).symbol;\n  }\n\n  const url = `${GMX_STATS_API_URL}/candles/${symbol}?preferableChainId=${chainId}&period=${period}&limit=${limit}`;\n\n  try {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    const prices = await response.json().then(({ prices }) => prices);\n    return prices.map(formatBarInfo);\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.log(`Error fetching data: ${error}`);\n  }\n}\n\nexport async function getChartPricesFromStats(chainId, symbol, period) {\n  symbol = getNormalizedTokenSymbol(symbol);\n\n  const timeDiff = CHART_PERIODS[period] * 3000;\n  const from = Math.floor(Date.now() / 1000 - timeDiff);\n  const url = `${GMX_STATS_API_URL}/candles/${symbol}?preferableChainId=${chainId}&period=${period}&from=${from}&preferableSource=fast`;\n\n  const TIMEOUT = 5000;\n  const res: Response = await new Promise(async (resolve, reject) => {\n    let done = false;\n    setTimeout(() => {\n      done = true;\n      reject(new Error(`request timeout ${url}`));\n    }, TIMEOUT);\n\n    let lastEx;\n    for (let i = 0; i < 3; i++) {\n      if (done) return;\n      try {\n        const res = await fetch(url);\n        resolve(res);\n        return;\n      } catch (ex) {\n        await sleep(300);\n        lastEx = ex;\n      }\n    }\n    reject(lastEx);\n  });\n  if (!res.ok) {\n    throw new Error(`request failed ${res.status} ${res.statusText}`);\n  }\n  const json = await res.json();\n  let prices = json?.prices;\n  if (!prices || prices.length < 1) {\n    throw new Error(`not enough prices data: ${prices?.length}`);\n  }\n\n  const OBSOLETE_THRESHOLD = Date.now() / 1000 - 60 * 30; // 30 min ago\n  const updatedAt = json?.updatedAt || 0;\n  if (updatedAt < OBSOLETE_THRESHOLD) {\n    throw new Error(\n      \"chart data is obsolete, last price record at \" +\n        new Date(updatedAt * 1000).toISOString() +\n        \" now: \" +\n        new Date().toISOString()\n    );\n  }\n\n  prices = prices.map(formatBarInfo);\n\n  return prices;\n}\n\nfunction getCandlesFromPrices(prices, period) {\n  const periodTime = CHART_PERIODS[period];\n\n  if (prices.length < 2) {\n    return [];\n  }\n\n  const candles: any[] = [];\n  const first = prices[0];\n  let prevTsGroup = Math.floor(first[0] / periodTime) * periodTime;\n  let prevPrice = first[1];\n  let o = prevPrice;\n  let h = prevPrice;\n  let l = prevPrice;\n  let c = prevPrice;\n  for (let i = 1; i < prices.length; i++) {\n    const [ts, price] = prices[i];\n    const tsGroup = Math.floor(ts / periodTime) * periodTime;\n    if (prevTsGroup !== tsGroup) {\n      candles.push({ t: prevTsGroup + timezoneOffset, o, h, l, c });\n      o = c;\n      h = Math.max(o, c);\n      l = Math.min(o, c);\n    }\n    c = price;\n    h = Math.max(h, price);\n    l = Math.min(l, price);\n    prevTsGroup = tsGroup;\n  }\n\n  return candles.map(({ t: time, o: open, c: close, h: high, l: low }) => ({\n    time,\n    open,\n    close,\n    high,\n    low,\n  }));\n}\n\nexport function getChainlinkChartPricesFromGraph(tokenSymbol, period) {\n  tokenSymbol = getNormalizedTokenSymbol(tokenSymbol);\n  const marketName = tokenSymbol + \"_USD\";\n  const feedId = FEED_ID_MAP[marketName];\n  if (!feedId) {\n    throw new Error(`undefined marketName ${marketName}`);\n  }\n\n  const PER_CHUNK = 1000;\n  const CHUNKS_TOTAL = 6;\n  const requests: any[] = [];\n  for (let i = 0; i < CHUNKS_TOTAL; i++) {\n    const query = gql(`{\n      rounds(\n        first: ${PER_CHUNK},\n        skip: ${i * PER_CHUNK},\n        orderBy: unixTimestamp,\n        orderDirection: desc,\n        where: {feed: \"${feedId}\"}\n      ) {\n        unixTimestamp,\n        value\n      }\n    }`);\n    requests.push(chainlinkClient.query({ query }));\n  }\n\n  return Promise.all(requests)\n    .then((chunks) => {\n      let prices: any[] = [];\n      const uniqTs = new Set();\n      chunks.forEach((chunk) => {\n        chunk.data.rounds.forEach((item) => {\n          if (uniqTs.has(item.unixTimestamp)) {\n            return;\n          }\n\n          uniqTs.add(item.unixTimestamp);\n          prices.push([item.unixTimestamp, Number(item.value) / 1e8]);\n        });\n      });\n\n      prices.sort(([timeA], [timeB]) => timeA - timeB);\n      prices = getCandlesFromPrices(prices, period);\n      return prices;\n    })\n    .catch((err) => {\n      // eslint-disable-next-line no-console\n      console.error(err);\n    });\n}\n\nexport function useChartPrices(chainId, symbol, isStable, period, currentAveragePrice) {\n  const swrKey = !isStable && symbol ? [\"getChartCandles\", chainId, symbol, period] : null;\n  let { data: prices, mutate: updatePrices } = useSWR(swrKey, {\n    fetcher: async (...args) => {\n      try {\n        return await getChartPricesFromStats(chainId, symbol, period);\n      } catch (ex) {\n        // eslint-disable-next-line no-console\n        console.warn(ex);\n        // eslint-disable-next-line no-console\n        console.warn(\"Switching to graph chainlink data\");\n        try {\n          return await getChainlinkChartPricesFromGraph(symbol, period);\n        } catch (ex2) {\n          // eslint-disable-next-line no-console\n          console.warn(\"getChainlinkChartPricesFromGraph failed\");\n          // eslint-disable-next-line no-console\n          console.warn(ex2);\n          return [];\n        }\n      }\n    },\n    dedupingInterval: 60000,\n    focusThrottleInterval: 60000 * 10,\n  });\n\n  const currentAveragePriceString = currentAveragePrice && currentAveragePrice.toString();\n  const retPrices = useMemo(() => {\n    if (isStable) {\n      return getStablePriceData(period);\n    }\n\n    if (!prices) {\n      return [];\n    }\n\n    let _prices = [...prices];\n    if (currentAveragePriceString && prices.length) {\n      _prices = appendCurrentAveragePrice(_prices, BigNumber.from(currentAveragePriceString), period);\n    }\n\n    return fillGaps(_prices, CHART_PERIODS[period]);\n  }, [prices, isStable, currentAveragePriceString, period]);\n\n  return [retPrices, updatePrices];\n}\n\nfunction appendCurrentAveragePrice(prices, currentAveragePrice, period) {\n  const periodSeconds = CHART_PERIODS[period];\n  const currentCandleTime = Math.floor(Date.now() / 1000 / periodSeconds) * periodSeconds + timezoneOffset;\n  const last = prices[prices.length - 1];\n  const averagePriceValue = parseFloat(formatAmount(currentAveragePrice, USD_DECIMALS, 2));\n  if (currentCandleTime === last.time) {\n    last.close = averagePriceValue;\n    last.high = Math.max(last.open, last.high, averagePriceValue);\n    last.low = Math.min(last.open, last.low, averagePriceValue);\n    return prices;\n  } else {\n    const newCandle = {\n      time: currentCandleTime,\n      open: last.close,\n      close: averagePriceValue,\n      high: averagePriceValue,\n      low: averagePriceValue,\n    };\n    return [...prices, newCandle];\n  }\n}\n\nexport function getStablePriceData(period, countBack = 100) {\n  const periodSeconds = CHART_PERIODS[period];\n  const now = Math.floor(Date.now() / 1000 / periodSeconds) * periodSeconds;\n  let priceData: any = [];\n  for (let i = countBack; i > 0; i--) {\n    priceData.push({\n      time: now - i * periodSeconds,\n      open: 1,\n      close: 1,\n      high: 1,\n      low: 1,\n    });\n  }\n  return priceData;\n}\n","import { BigNumber, ethers } from \"ethers\";\nimport { gql } from \"@apollo/client\";\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { Token as UniToken } from \"@uniswap/sdk-core\";\nimport { Pool } from \"@uniswap/v3-sdk\";\nimport useSWR from \"swr\";\n\nimport OrderBook from \"abis/OrderBook.json\";\nimport PositionManager from \"abis/PositionManager.json\";\nimport Vault from \"abis/Vault.json\";\nimport Router from \"abis/Router.json\";\nimport UniPool from \"abis/UniPool.json\";\nimport UniswapV2 from \"abis/UniswapV2.json\";\nimport Token from \"abis/Token.json\";\nimport PositionRouter from \"abis/PositionRouter.json\";\n\nimport { getContract } from \"config/contracts\";\nimport { ARBITRUM, ARBITRUM_TESTNET, AVALANCHE, getConstant, getHighExecutionFee } from \"config/chains\";\nimport { DECREASE, getOrderKey, INCREASE, SWAP, USD_DECIMALS } from \"lib/legacy\";\n\nimport { groupBy } from \"lodash\";\nimport { UI_VERSION } from \"config/env\";\nimport { getServerBaseUrl, getServerUrl } from \"config/backend\";\nimport { getGmxGraphClient, nissohGraphClient } from \"lib/subgraph/clients\";\nimport { callContract, contractFetcher } from \"lib/contracts\";\nimport { replaceNativeTokenAddress } from \"./tokens\";\nimport { getUsd } from \"./tokens/utils\";\nimport { getProvider } from \"lib/rpc\";\nimport { bigNumberify, expandDecimals, parseValue } from \"lib/numbers\";\nimport { getTokenBySymbol } from \"config/tokens\";\nimport { t } from \"@lingui/macro\";\n\nexport * from \"./prices\";\n\nconst { AddressZero } = ethers.constants;\n\nexport function useAllOrdersStats(chainId) {\n  const query = gql(`{\n    orderStat(id: \"total\") {\n      openSwap\n      openIncrease\n      openDecrease\n      executedSwap\n      executedIncrease\n      executedDecrease\n      cancelledSwap\n      cancelledIncrease\n      cancelledDecrease\n    }\n  }`);\n\n  const [res, setRes] = useState<any>();\n\n  useEffect(() => {\n    const graphClient = getGmxGraphClient(chainId);\n    if (graphClient) {\n      // eslint-disable-next-line no-console\n      graphClient.query({ query }).then(setRes).catch(console.warn);\n    }\n  }, [setRes, query, chainId]);\n\n  return res ? res.data.orderStat : null;\n}\n\nexport function useUserStat(chainId) {\n  const query = gql(`{\n    userStat(id: \"total\") {\n      id\n      uniqueCount\n    }\n  }`);\n\n  const [res, setRes] = useState<any>();\n\n  useEffect(() => {\n    // eslint-disable-next-line no-console\n    getGmxGraphClient(chainId)?.query({ query }).then(setRes).catch(console.warn);\n  }, [setRes, query, chainId]);\n\n  return res ? res.data.userStat : null;\n}\n\nexport function useLiquidationsData(chainId, account) {\n  const [data, setData] = useState(null);\n  useEffect(() => {\n    if (account) {\n      const query = gql(`{\n         liquidatedPositions(\n           where: {account: \"${account.toLowerCase()}\"}\n           first: 100\n           orderBy: timestamp\n           orderDirection: desc\n         ) {\n           key\n           timestamp\n           borrowFee\n           loss\n           collateral\n           size\n           markPrice\n           type\n         }\n      }`);\n      const graphClient = getGmxGraphClient(chainId);\n      if (!graphClient) {\n        return;\n      }\n\n      graphClient\n        .query({ query })\n        .then((res) => {\n          const _data = res.data.liquidatedPositions.map((item) => {\n            return {\n              ...item,\n              size: bigNumberify(item.size),\n              collateral: bigNumberify(item.collateral),\n              markPrice: bigNumberify(item.markPrice),\n            };\n          });\n          setData(_data);\n        })\n        // eslint-disable-next-line no-console\n        .catch(console.warn);\n    }\n  }, [setData, chainId, account]);\n\n  return data;\n}\n\nexport function useAllPositions(chainId, library) {\n  const count = 1000;\n  const query = gql(`{\n    aggregatedTradeOpens(\n      first: ${count}\n    ) {\n      account\n      initialPosition{\n        indexToken\n        collateralToken\n        isLong\n        sizeDelta\n      }\n      increaseList {\n        sizeDelta\n      }\n      decreaseList {\n        sizeDelta\n      }\n    }\n  }`);\n\n  const [res, setRes] = useState<any>();\n\n  useEffect(() => {\n    // eslint-disable-next-line no-console\n    nissohGraphClient.query({ query }).then(setRes).catch(console.warn);\n  }, [setRes, query]);\n\n  const key = res ? `allPositions${count}__` : null;\n\n  const { data: positions = [] } = useSWR(key, async () => {\n    const provider = getProvider(library, chainId);\n    const vaultAddress = getContract(chainId, \"Vault\");\n    const contract = new ethers.Contract(vaultAddress, Vault.abi, provider);\n    const ret = await Promise.all(\n      res.data.aggregatedTradeOpens.map(async (dataItem) => {\n        try {\n          const { indexToken, collateralToken, isLong } = dataItem.initialPosition;\n          const positionData = await contract.getPosition(dataItem.account, collateralToken, indexToken, isLong);\n          const position: any = {\n            size: bigNumberify(positionData[0]),\n            collateral: bigNumberify(positionData[1]),\n            entryFundingRate: bigNumberify(positionData[3]),\n            account: dataItem.account,\n          };\n          position.fundingFee = await contract.getFundingFee(collateralToken, position.size, position.entryFundingRate);\n          position.marginFee = position.size.div(1000);\n          position.fee = position.fundingFee.add(position.marginFee);\n\n          const THRESHOLD = 5000;\n          const collateralDiffPercent = position.fee.mul(10000).div(position.collateral);\n          position.danger = collateralDiffPercent.gt(THRESHOLD);\n\n          return position;\n        } catch (ex) {\n          // eslint-disable-next-line no-console\n          console.error(ex);\n        }\n      })\n    );\n\n    return ret.filter(Boolean);\n  });\n\n  return positions;\n}\n\nexport function useAllOrders(chainId, library) {\n  const query = gql(`{\n    orders(\n      first: 1000,\n      orderBy: createdTimestamp,\n      orderDirection: desc,\n      where: {status: \"open\"}\n    ) {\n      type\n      account\n      index\n      status\n      createdTimestamp\n    }\n  }`);\n\n  const [res, setRes] = useState<any>();\n\n  useEffect(() => {\n    getGmxGraphClient(chainId)?.query({ query }).then(setRes);\n  }, [setRes, query, chainId]);\n\n  const key = res ? res.data.orders.map((order) => `${order.type}-${order.account}-${order.index}`) : null;\n  const { data: orders = [] } = useSWR(key, () => {\n    const provider = getProvider(library, chainId);\n    const orderBookAddress = getContract(chainId, \"OrderBook\");\n    const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, provider);\n    return Promise.all(\n      res.data.orders.map(async (order) => {\n        try {\n          const type = order.type.charAt(0).toUpperCase() + order.type.substring(1);\n          const method = `get${type}Order`;\n          const orderFromChain = await contract[method](order.account, order.index);\n          const ret: any = {};\n          for (const [key, val] of Object.entries(orderFromChain)) {\n            ret[key] = val;\n          }\n          if (order.type === \"swap\") {\n            ret.path = [ret.path0, ret.path1, ret.path2].filter((address) => address !== AddressZero);\n          }\n          ret.type = type;\n          ret.index = order.index;\n          ret.account = order.account;\n          ret.createdTimestamp = order.createdTimestamp;\n          return ret;\n        } catch (ex) {\n          // eslint-disable-next-line no-console\n          console.error(ex);\n        }\n      })\n    );\n  });\n\n  return orders.filter(Boolean);\n}\n\nexport function usePositionsForOrders(chainId, library, orders) {\n  const key = orders ? orders.map((order) => getOrderKey(order) + \"____\") : null;\n  const { data: positions = {} } = useSWR(key, async () => {\n    const provider = getProvider(library, chainId);\n    const vaultAddress = getContract(chainId, \"Vault\");\n    const contract = new ethers.Contract(vaultAddress, Vault.abi, provider);\n    const data = await Promise.all(\n      orders.map(async (order) => {\n        try {\n          const position = await contract.getPosition(\n            order.account,\n            order.collateralToken,\n            order.indexToken,\n            order.isLong\n          );\n          if (position[0].eq(0)) {\n            return [null, order];\n          }\n          return [position, order];\n        } catch (ex) {\n          // eslint-disable-next-line no-console\n          console.error(ex);\n        }\n      })\n    );\n    return data.reduce((memo, [position, order]) => {\n      memo[getOrderKey(order)] = position;\n      return memo;\n    }, {});\n  });\n\n  return positions;\n}\n\nfunction invariant(condition, errorMsg) {\n  if (!condition) {\n    throw new Error(errorMsg);\n  }\n}\n\nexport function useTrades(chainId, account, forSingleAccount, afterId) {\n  let url =\n    account && account.length > 0\n      ? `${getServerBaseUrl(chainId)}/actions?account=${account}`\n      : !forSingleAccount && `${getServerBaseUrl(chainId)}/actions`;\n\n  if (afterId && afterId.length > 0) {\n    const urlItem = new URL(url as string);\n    urlItem.searchParams.append(\"after\", afterId);\n    url = urlItem.toString();\n  }\n\n  const { data: trades, mutate: updateTrades } = useSWR(url ? url : null, {\n    dedupingInterval: 10000,\n    // @ts-ignore\n    fetcher: (...args) => fetch(...args).then((res) => res.json()),\n  });\n\n  if (trades) {\n    trades.sort((item0, item1) => {\n      const data0 = item0.data;\n      const data1 = item1.data;\n      const time0 = parseInt(data0.timestamp);\n      const time1 = parseInt(data1.timestamp);\n      if (time1 > time0) {\n        return 1;\n      }\n      if (time1 < time0) {\n        return -1;\n      }\n\n      const block0 = parseInt(data0.blockNumber);\n      const block1 = parseInt(data1.blockNumber);\n\n      if (isNaN(block0) && isNaN(block1)) {\n        return 0;\n      }\n\n      if (isNaN(block0)) {\n        return 1;\n      }\n\n      if (isNaN(block1)) {\n        return -1;\n      }\n\n      if (block1 > block0) {\n        return 1;\n      }\n\n      if (block1 < block0) {\n        return -1;\n      }\n\n      return 0;\n    });\n  }\n\n  return { trades, updateTrades };\n}\n\nexport function useMinExecutionFee(library, active, chainId, infoTokens) {\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n\n  const { data: minExecutionFee } = useSWR<BigNumber>([active, chainId, positionRouterAddress, \"minExecutionFee\"], {\n    fetcher: contractFetcher(library, PositionRouter),\n  });\n\n  const { data: gasPrice } = useSWR<BigNumber | undefined>([\"gasPrice\", chainId], {\n    fetcher: () => {\n      return new Promise(async (resolve, reject) => {\n        const provider = getProvider(library, chainId);\n        if (!provider) {\n          resolve(undefined);\n          return;\n        }\n\n        try {\n          const gasPrice = await provider.getGasPrice();\n          resolve(gasPrice);\n        } catch (e) {\n          // eslint-disable-next-line no-console\n          console.error(e);\n        }\n      });\n    },\n  });\n\n  let multiplier;\n\n  // if gas prices on Arbitrum are high, the main transaction costs would come from the L2 gas usage\n  // for executing positions this is around 65,000 gas\n  // if gas prices on Ethereum are high, than the gas usage might be higher, this calculation doesn't deal with that\n  // case yet\n  if (chainId === ARBITRUM || chainId === ARBITRUM_TESTNET) {\n    multiplier = 65000;\n  }\n\n  // multiplier for Avalanche is just the average gas usage\n  if (chainId === AVALANCHE) {\n    multiplier = 700000;\n  }\n\n  let finalExecutionFee = minExecutionFee;\n\n  if (gasPrice && minExecutionFee) {\n    const estimatedExecutionFee = gasPrice.mul(multiplier);\n    if (estimatedExecutionFee.gt(minExecutionFee)) {\n      finalExecutionFee = estimatedExecutionFee;\n    }\n  }\n\n  const finalExecutionFeeUSD = getUsd(finalExecutionFee, nativeTokenAddress, false, infoTokens);\n  const isFeeHigh = finalExecutionFeeUSD?.gt(expandDecimals(getHighExecutionFee(chainId), USD_DECIMALS));\n  const errorMessage =\n    isFeeHigh &&\n    `The network cost to send transactions is high at the moment, please check the \"Execution Fee\" value before proceeding.`;\n\n  return {\n    minExecutionFee: finalExecutionFee,\n    minExecutionFeeUSD: finalExecutionFeeUSD,\n    minExecutionFeeErrorMessage: errorMessage,\n  };\n}\n\nexport function useStakedGmxSupply(library, active) {\n  const gmxAddressArb = getContract(ARBITRUM, \"GMX\");\n  const stakedGmxTrackerAddressArb = getContract(ARBITRUM, \"StakedGmxTracker\");\n\n  const { data: arbData, mutate: arbMutate } = useSWR<any>(\n    [`StakeV2:stakedGmxSupply:${active}`, ARBITRUM, gmxAddressArb, \"balanceOf\", stakedGmxTrackerAddressArb],\n    {\n      fetcher: contractFetcher(library, Token),\n    }\n  );\n\n  const gmxAddressAvax = getContract(AVALANCHE, \"GMX\");\n  const stakedGmxTrackerAddressAvax = getContract(AVALANCHE, \"StakedGmxTracker\");\n\n  const { data: avaxData, mutate: avaxMutate } = useSWR(\n    [`StakeV2:stakedGmxSupply:${active}`, AVALANCHE, gmxAddressAvax, \"balanceOf\", stakedGmxTrackerAddressAvax],\n    {\n      fetcher: contractFetcher(undefined, Token),\n    }\n  );\n\n  let data;\n  if (arbData && avaxData) {\n    data = arbData.add(avaxData);\n  }\n\n  const mutate = () => {\n    arbMutate();\n    avaxMutate();\n  };\n\n  return { data, mutate };\n}\n\nexport function useHasOutdatedUi() {\n  const url = getServerUrl(ARBITRUM, \"/ui_version\");\n  const { data, mutate } = useSWR([url], {\n    // @ts-ignore\n    fetcher: (...args) => fetch(...args).then((res) => res.text()),\n  });\n\n  let hasOutdatedUi = false;\n\n  if (data && parseFloat(data) > parseFloat(UI_VERSION)) {\n    hasOutdatedUi = true;\n  }\n\n  return { data: hasOutdatedUi, mutate };\n}\n\nexport function useGmxPrice(chainId, libraries, active) {\n  const arbitrumLibrary = libraries && libraries.arbitrum ? libraries.arbitrum : undefined;\n  const { data: gmxPriceFromArbitrum, mutate: mutateFromArbitrum } = useGmxPriceFromArbitrum(arbitrumLibrary, active);\n  const { data: gmxPriceFromAvalanche, mutate: mutateFromAvalanche } = useGmxPriceFromAvalanche();\n\n  const gmxPrice = chainId === ARBITRUM ? gmxPriceFromArbitrum : gmxPriceFromAvalanche;\n  const mutate = useCallback(() => {\n    mutateFromAvalanche();\n    mutateFromArbitrum();\n  }, [mutateFromAvalanche, mutateFromArbitrum]);\n\n  return {\n    gmxPrice,\n    gmxPriceFromArbitrum,\n    gmxPriceFromAvalanche,\n    mutate,\n  };\n}\n\n// use only the supply endpoint on arbitrum, it includes the supply on avalanche\nexport function useTotalGmxSupply() {\n  const gmxSupplyUrlArbitrum = getServerUrl(ARBITRUM, \"/gmx_supply\");\n\n  const { data: gmxSupply, mutate: updateGmxSupply } = useSWR([gmxSupplyUrlArbitrum], {\n    // @ts-ignore\n    fetcher: (...args) => fetch(...args).then((res) => res.text()),\n  });\n\n  return {\n    total: gmxSupply ? bigNumberify(gmxSupply) : undefined,\n    mutate: updateGmxSupply,\n  };\n}\n\nexport function useTotalGmxStaked() {\n  const stakedGmxTrackerAddressArbitrum = getContract(ARBITRUM, \"StakedGmxTracker\");\n  const stakedGmxTrackerAddressAvax = getContract(AVALANCHE, \"StakedGmxTracker\");\n  let totalStakedGmx = useRef(bigNumberify(0));\n  const { data: stakedGmxSupplyArbitrum, mutate: updateStakedGmxSupplyArbitrum } = useSWR<BigNumber>(\n    [\n      `StakeV2:stakedGmxSupply:${ARBITRUM}`,\n      ARBITRUM,\n      getContract(ARBITRUM, \"GMX\"),\n      \"balanceOf\",\n      stakedGmxTrackerAddressArbitrum,\n    ],\n    {\n      fetcher: contractFetcher(undefined, Token),\n    }\n  );\n  const { data: stakedGmxSupplyAvax, mutate: updateStakedGmxSupplyAvax } = useSWR<BigNumber>(\n    [\n      `StakeV2:stakedGmxSupply:${AVALANCHE}`,\n      AVALANCHE,\n      getContract(AVALANCHE, \"GMX\"),\n      \"balanceOf\",\n      stakedGmxTrackerAddressAvax,\n    ],\n    {\n      fetcher: contractFetcher(undefined, Token),\n    }\n  );\n\n  const mutate = useCallback(() => {\n    updateStakedGmxSupplyArbitrum();\n    updateStakedGmxSupplyAvax();\n  }, [updateStakedGmxSupplyArbitrum, updateStakedGmxSupplyAvax]);\n\n  if (stakedGmxSupplyArbitrum && stakedGmxSupplyAvax) {\n    let total = bigNumberify(stakedGmxSupplyArbitrum)!.add(stakedGmxSupplyAvax);\n    totalStakedGmx.current = total;\n  }\n\n  return {\n    avax: stakedGmxSupplyAvax,\n    arbitrum: stakedGmxSupplyArbitrum,\n    total: totalStakedGmx.current,\n    mutate,\n  };\n}\n\nexport function useTotalGmxInLiquidity() {\n  let poolAddressArbitrum = getContract(ARBITRUM, \"UniswapGmxEthPool\");\n  let poolAddressAvax = getContract(AVALANCHE, \"TraderJoeGmxAvaxPool\");\n  let totalGMX = useRef(bigNumberify(0));\n\n  const { data: gmxInLiquidityOnArbitrum, mutate: mutateGMXInLiquidityOnArbitrum } = useSWR<any>(\n    [`StakeV2:gmxInLiquidity:${ARBITRUM}`, ARBITRUM, getContract(ARBITRUM, \"GMX\"), \"balanceOf\", poolAddressArbitrum],\n    {\n      fetcher: contractFetcher(undefined, Token),\n    }\n  );\n  const { data: gmxInLiquidityOnAvax, mutate: mutateGMXInLiquidityOnAvax } = useSWR<any>(\n    [`StakeV2:gmxInLiquidity:${AVALANCHE}`, AVALANCHE, getContract(AVALANCHE, \"GMX\"), \"balanceOf\", poolAddressAvax],\n    {\n      fetcher: contractFetcher(undefined, Token),\n    }\n  );\n  const mutate = useCallback(() => {\n    mutateGMXInLiquidityOnArbitrum();\n    mutateGMXInLiquidityOnAvax();\n  }, [mutateGMXInLiquidityOnArbitrum, mutateGMXInLiquidityOnAvax]);\n\n  if (gmxInLiquidityOnAvax && gmxInLiquidityOnArbitrum) {\n    let total = bigNumberify(gmxInLiquidityOnArbitrum)!.add(gmxInLiquidityOnAvax);\n    totalGMX.current = total;\n  }\n  return {\n    avax: gmxInLiquidityOnAvax,\n    arbitrum: gmxInLiquidityOnArbitrum,\n    total: totalGMX.current,\n    mutate,\n  };\n}\n\nfunction useGmxPriceFromAvalanche() {\n  const poolAddress = getContract(AVALANCHE, \"TraderJoeGmxAvaxPool\");\n\n  const { data, mutate: updateReserves } = useSWR([\"TraderJoeGmxAvaxReserves\", AVALANCHE, poolAddress, \"getReserves\"], {\n    fetcher: contractFetcher(undefined, UniswapV2),\n  });\n  const { _reserve0: gmxReserve, _reserve1: avaxReserve }: any = data || {};\n\n  const vaultAddress = getContract(AVALANCHE, \"Vault\");\n  const avaxAddress = getTokenBySymbol(AVALANCHE, \"WAVAX\").address;\n  const { data: avaxPrice, mutate: updateAvaxPrice } = useSWR(\n    [`StakeV2:avaxPrice`, AVALANCHE, vaultAddress, \"getMinPrice\", avaxAddress],\n    {\n      fetcher: contractFetcher(undefined, Vault),\n    }\n  );\n\n  const PRECISION = bigNumberify(10)!.pow(18);\n  let gmxPrice;\n  if (avaxReserve && gmxReserve && avaxPrice) {\n    gmxPrice = avaxReserve.mul(PRECISION).div(gmxReserve).mul(avaxPrice).div(PRECISION);\n  }\n\n  const mutate = useCallback(() => {\n    updateReserves(undefined, true);\n    updateAvaxPrice(undefined, true);\n  }, [updateReserves, updateAvaxPrice]);\n\n  return { data: gmxPrice, mutate };\n}\n\nfunction useGmxPriceFromArbitrum(library, active) {\n  const poolAddress = getContract(ARBITRUM, \"UniswapGmxEthPool\");\n  const { data: uniPoolSlot0, mutate: updateUniPoolSlot0 } = useSWR<any>(\n    [`StakeV2:uniPoolSlot0:${active}`, ARBITRUM, poolAddress, \"slot0\"],\n    {\n      fetcher: contractFetcher(library, UniPool),\n    }\n  );\n\n  const vaultAddress = getContract(ARBITRUM, \"Vault\");\n  const ethAddress = getTokenBySymbol(ARBITRUM, \"WETH\").address;\n  const { data: ethPrice, mutate: updateEthPrice } = useSWR<BigNumber>(\n    [`StakeV2:ethPrice:${active}`, ARBITRUM, vaultAddress, \"getMinPrice\", ethAddress],\n    {\n      fetcher: contractFetcher(library, Vault),\n    }\n  );\n\n  const gmxPrice = useMemo(() => {\n    if (uniPoolSlot0 && ethPrice) {\n      const tokenA = new UniToken(ARBITRUM, ethAddress, 18, \"SYMBOL\", \"NAME\");\n\n      const gmxAddress = getContract(ARBITRUM, \"GMX\");\n      const tokenB = new UniToken(ARBITRUM, gmxAddress, 18, \"SYMBOL\", \"NAME\");\n\n      const pool = new Pool(\n        tokenA, // tokenA\n        tokenB, // tokenB\n        10000, // fee\n        uniPoolSlot0.sqrtPriceX96, // sqrtRatioX96\n        1, // liquidity\n        uniPoolSlot0.tick, // tickCurrent\n        []\n      );\n\n      const poolTokenPrice = pool.priceOf(tokenB).toSignificant(6);\n      const poolTokenPriceAmount = parseValue(poolTokenPrice, 18);\n      return poolTokenPriceAmount?.mul(ethPrice).div(expandDecimals(1, 18));\n    }\n  }, [ethPrice, uniPoolSlot0, ethAddress]);\n\n  const mutate = useCallback(() => {\n    updateUniPoolSlot0(undefined, true);\n    updateEthPrice(undefined, true);\n  }, [updateEthPrice, updateUniPoolSlot0]);\n\n  return { data: gmxPrice, mutate };\n}\n\nexport async function approvePlugin(chainId, pluginAddress, { library, setPendingTxns, sentMsg, failMsg }) {\n  const routerAddress = getContract(chainId, \"Router\");\n  const contract = new ethers.Contract(routerAddress, Router.abi, library.getSigner());\n  return callContract(chainId, contract, \"approvePlugin\", [pluginAddress], {\n    sentMsg,\n    failMsg,\n    setPendingTxns,\n  });\n}\n\nexport async function createSwapOrder(\n  chainId,\n  library,\n  path,\n  amountIn,\n  minOut,\n  triggerRatio,\n  nativeTokenAddress,\n  opts: any = {}\n) {\n  const executionFee = getConstant(chainId, \"SWAP_ORDER_EXECUTION_GAS_FEE\");\n  const triggerAboveThreshold = false;\n  let shouldWrap = false;\n  let shouldUnwrap = false;\n  opts.value = executionFee;\n\n  if (path[0] === AddressZero) {\n    shouldWrap = true;\n    opts.value = opts.value.add(amountIn);\n  }\n  if (path[path.length - 1] === AddressZero) {\n    shouldUnwrap = true;\n  }\n  path = replaceNativeTokenAddress(path, nativeTokenAddress);\n\n  const params = [path, amountIn, minOut, triggerRatio, triggerAboveThreshold, executionFee, shouldWrap, shouldUnwrap];\n\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, \"createSwapOrder\", params, opts);\n}\n\nexport async function createIncreaseOrder(\n  chainId,\n  library,\n  nativeTokenAddress,\n  path,\n  amountIn,\n  indexTokenAddress,\n  minOut,\n  sizeDelta,\n  collateralTokenAddress,\n  isLong,\n  triggerPrice,\n  opts: any = {}\n) {\n  invariant(!isLong || indexTokenAddress === collateralTokenAddress, \"invalid token addresses\");\n  invariant(indexTokenAddress !== AddressZero, \"indexToken is 0\");\n  invariant(collateralTokenAddress !== AddressZero, \"collateralToken is 0\");\n\n  const fromETH = path[0] === AddressZero;\n\n  path = replaceNativeTokenAddress(path, nativeTokenAddress);\n  const shouldWrap = fromETH;\n  const triggerAboveThreshold = !isLong;\n  const executionFee = getConstant(chainId, \"INCREASE_ORDER_EXECUTION_GAS_FEE\");\n\n  const params = [\n    path,\n    amountIn,\n    indexTokenAddress,\n    minOut,\n    sizeDelta,\n    collateralTokenAddress,\n    isLong,\n    triggerPrice,\n    triggerAboveThreshold,\n    executionFee,\n    shouldWrap,\n  ];\n\n  if (!opts.value) {\n    opts.value = fromETH ? amountIn.add(executionFee) : executionFee;\n  }\n\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, \"createIncreaseOrder\", params, opts);\n}\n\nexport async function createDecreaseOrder(\n  chainId,\n  library,\n  indexTokenAddress,\n  sizeDelta,\n  collateralTokenAddress,\n  collateralDelta,\n  isLong,\n  triggerPrice,\n  triggerAboveThreshold,\n  opts: any = {}\n) {\n  invariant(!isLong || indexTokenAddress === collateralTokenAddress, \"invalid token addresses\");\n  invariant(indexTokenAddress !== AddressZero, \"indexToken is 0\");\n  invariant(collateralTokenAddress !== AddressZero, \"collateralToken is 0\");\n\n  const executionFee = getConstant(chainId, \"DECREASE_ORDER_EXECUTION_GAS_FEE\");\n\n  const params = [\n    indexTokenAddress,\n    sizeDelta,\n    collateralTokenAddress,\n    collateralDelta,\n    isLong,\n    triggerPrice,\n    triggerAboveThreshold,\n  ];\n  opts.value = executionFee;\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, \"createDecreaseOrder\", params, opts);\n}\n\nexport async function cancelSwapOrder(chainId, library, index, opts) {\n  const params = [index];\n  const method = \"cancelSwapOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function cancelDecreaseOrder(chainId, library, index, opts) {\n  const params = [index];\n  const method = \"cancelDecreaseOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function cancelIncreaseOrder(chainId, library, index, opts) {\n  const params = [index];\n  const method = \"cancelIncreaseOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport function handleCancelOrder(chainId, library, order, opts) {\n  let func;\n  if (order.type === SWAP) {\n    func = cancelSwapOrder;\n  } else if (order.type === INCREASE) {\n    func = cancelIncreaseOrder;\n  } else if (order.type === DECREASE) {\n    func = cancelDecreaseOrder;\n  }\n\n  return func(chainId, library, order.index, {\n    successMsg: t`Order cancelled.`,\n    failMsg: t`Cancel failed.`,\n    sentMsg: t`Cancel submitted.`,\n    pendingTxns: opts.pendingTxns,\n    setPendingTxns: opts.setPendingTxns,\n  });\n}\n\nexport async function cancelMultipleOrders(chainId, library, allIndexes = [], opts) {\n  const ordersWithTypes = groupBy(allIndexes, (v) => v.split(\"-\")[0]);\n  function getIndexes(key) {\n    if (!ordersWithTypes[key]) return;\n    return ordersWithTypes[key].map((d) => d.split(\"-\")[1]);\n  }\n  // params order => swap, increase, decrease\n  const params = [\"Swap\", \"Increase\", \"Decrease\"].map((key) => getIndexes(key) || []);\n  const method = \"cancelMultiple\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function updateDecreaseOrder(\n  chainId,\n  library,\n  index,\n  collateralDelta,\n  sizeDelta,\n  triggerPrice,\n  triggerAboveThreshold,\n  opts\n) {\n  const params = [index, collateralDelta, sizeDelta, triggerPrice, triggerAboveThreshold];\n  const method = \"updateDecreaseOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function updateIncreaseOrder(\n  chainId,\n  library,\n  index,\n  sizeDelta,\n  triggerPrice,\n  triggerAboveThreshold,\n  opts\n) {\n  const params = [index, sizeDelta, triggerPrice, triggerAboveThreshold];\n  const method = \"updateIncreaseOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function updateSwapOrder(chainId, library, index, minOut, triggerRatio, triggerAboveThreshold, opts) {\n  const params = [index, minOut, triggerRatio, triggerAboveThreshold];\n  const method = \"updateSwapOrder\";\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\n\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport async function _executeOrder(chainId, library, method, account, index, feeReceiver, opts) {\n  const params = [account, index, feeReceiver];\n  const positionManagerAddress = getContract(chainId, \"PositionManager\");\n  const contract = new ethers.Contract(positionManagerAddress, PositionManager.abi, library.getSigner());\n  return callContract(chainId, contract, method, params, opts);\n}\n\nexport function executeSwapOrder(chainId, library, account, index, feeReceiver, opts) {\n  return _executeOrder(chainId, library, \"executeSwapOrder\", account, index, feeReceiver, opts);\n}\n\nexport function executeIncreaseOrder(chainId, library, account, index, feeReceiver, opts) {\n  return _executeOrder(chainId, library, \"executeIncreaseOrder\", account, index, feeReceiver, opts);\n}\n\nexport function executeDecreaseOrder(chainId, library, account, index, feeReceiver, opts) {\n  return _executeOrder(chainId, library, \"executeDecreaseOrder\", account, index, feeReceiver, opts);\n}\n","import React, { ReactNode } from \"react\";\n\nimport cx from \"classnames\";\n\nimport \"./Checkbox.css\";\nimport { ImCheckboxUnchecked, ImCheckboxChecked } from \"react-icons/im\";\n\ntype Props = {\n  isChecked?: boolean;\n  setIsChecked?: (checked: boolean) => void;\n  disabled?: boolean;\n  className?: string;\n  children?: ReactNode;\n  asRow?: boolean;\n};\n\nexport default function Checkbox(props: Props) {\n  const { isChecked, setIsChecked, disabled, className, asRow } = props;\n\n  return (\n    <div\n      className={cx(\"Checkbox\", { disabled, selected: isChecked, fullRow: asRow }, className)}\n      onClick={() => setIsChecked?.(!isChecked)}\n    >\n      <span className=\"Checkbox-icon-wrapper\">\n        {isChecked && <ImCheckboxChecked className=\"App-icon Checkbox-icon active\" />}\n        {!isChecked && <ImCheckboxUnchecked className=\"App-icon Checkbox-icon inactive\" />}\n      </span>\n      <span className=\"Checkbox-label\">{props.children}</span>\n    </div>\n  );\n}\n","import cx from \"classnames\";\nimport { useCallback, useState, useRef } from \"react\";\nimport { IS_TOUCH } from \"config/env\";\n\nconst OPEN_DELAY = 0;\nconst CLOSE_DELAY = 100;\n\ntype Props = {\n  handle: React.ReactNode;\n  renderContent: () => React.ReactNode;\n  position?: string;\n  trigger?: string;\n  className?: string;\n  disableHandleStyle?: boolean;\n  handleClassName?: string;\n  isHandlerDisabled?: boolean;\n};\n\nexport default function Tooltip(props: Props) {\n  const [visible, setVisible] = useState(false);\n  const intervalCloseRef = useRef<ReturnType<typeof setTimeout> | null>();\n  const intervalOpenRef = useRef<ReturnType<typeof setTimeout> | null>();\n\n  const position = props.position ?? \"left-bottom\";\n  const trigger = props.trigger ?? \"hover\";\n\n  const onMouseEnter = useCallback(() => {\n    if (trigger !== \"hover\" || IS_TOUCH) return;\n    if (intervalCloseRef.current) {\n      clearInterval(intervalCloseRef.current);\n      intervalCloseRef.current = null;\n    }\n    if (!intervalOpenRef.current) {\n      intervalOpenRef.current = setTimeout(() => {\n        setVisible(true);\n        intervalOpenRef.current = null;\n      }, OPEN_DELAY);\n    }\n  }, [setVisible, intervalCloseRef, intervalOpenRef, trigger]);\n\n  const onMouseClick = useCallback(() => {\n    if (trigger !== \"click\" && !IS_TOUCH) return;\n    if (intervalCloseRef.current) {\n      clearInterval(intervalCloseRef.current);\n      intervalCloseRef.current = null;\n    }\n    if (intervalOpenRef.current) {\n      clearInterval(intervalOpenRef.current);\n      intervalOpenRef.current = null;\n    }\n\n    setVisible(true);\n  }, [setVisible, intervalCloseRef, trigger]);\n\n  const onMouseLeave = useCallback(() => {\n    intervalCloseRef.current = setTimeout(() => {\n      setVisible(false);\n      intervalCloseRef.current = null;\n    }, CLOSE_DELAY);\n    if (intervalOpenRef.current) {\n      clearInterval(intervalOpenRef.current);\n      intervalOpenRef.current = null;\n    }\n  }, [setVisible, intervalCloseRef]);\n\n  const className = cx(\"Tooltip\", props.className);\n\n  return (\n    <span className={className} onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave} onClick={onMouseClick}>\n      <span\n        className={cx({ \"Tooltip-handle\": !props.disableHandleStyle }, [props.handleClassName], { active: visible })}\n      >\n        {/* For onMouseLeave to work on disabled button https://github.com/react-component/tooltip/issues/18#issuecomment-411476678 */}\n        {props.isHandlerDisabled ? <div className=\"Tooltip-disabled-wrapper\">{props.handle}</div> : <>{props.handle}</>}\n      </span>\n      {visible && <div className={cx([\"Tooltip-popup\", position])}>{props.renderContent()}</div>}\n    </span>\n  );\n}\n","import React from \"react\";\n\nimport cx from \"classnames\";\n\nimport \"./Tab.css\";\n\nexport default function Tab(props) {\n  const { options, option, setOption, onChange, type = \"block\", className, optionLabels, icons } = props;\n  const onClick = (opt) => {\n    if (setOption) {\n      setOption(opt);\n    }\n    if (onChange) {\n      onChange(opt);\n    }\n  };\n\n  return (\n    <div className={cx(\"Tab\", type, className)}>\n      {options.map((opt) => {\n        const label = optionLabels && optionLabels[opt] ? optionLabels[opt] : opt;\n        return (\n          <div className={cx(\"Tab-option\", \"muted\", { active: opt === option })} onClick={() => onClick(opt)} key={opt}>\n            {icons && icons[opt] && <img className=\"Tab-option-icon\" src={icons[opt]} alt={option} />}\n            {label}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import \"./Modal.css\";\nimport React, { useRef, useEffect } from \"react\";\nimport cx from \"classnames\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { RemoveScroll } from \"react-remove-scroll\";\nimport { MdClose } from \"react-icons/md\";\n\nexport default function Modal(props) {\n  const { isVisible, setIsVisible, className, zIndex, onAfterOpen } = props;\n\n  const modalRef = useRef(null);\n\n  useEffect(() => {\n    function close(e) {\n      if (e.keyCode === 27 && setIsVisible) {\n        setIsVisible(false);\n      }\n    }\n    window.addEventListener(\"keydown\", close);\n    return () => window.removeEventListener(\"keydown\", close);\n  }, [setIsVisible]);\n\n  useEffect(() => {\n    if (typeof onAfterOpen === \"function\") onAfterOpen();\n  }, [onAfterOpen]);\n\n  const fadeVariants = {\n    hidden: { opacity: 0 },\n    visible: { opacity: 1 },\n  };\n\n  return (\n    <AnimatePresence>\n      {isVisible && (\n        <motion.div\n          className={cx(\"Modal\", className)}\n          style={{ zIndex }}\n          initial=\"hidden\"\n          animate=\"visible\"\n          exit=\"hidden\"\n          variants={fadeVariants}\n          transition={{ duration: 0.2 }}\n        >\n          <div\n            className=\"Modal-backdrop\"\n            style={{\n              overflow: isVisible ? \"hidden\" : \"visible\",\n              position: \"fixed\",\n            }}\n            onClick={() => setIsVisible(false)}\n          ></div>\n          <div className=\"Modal-content\">\n            <div className=\"Modal-header-wrapper\">\n              <div className=\"Modal-title-bar\">\n                <div className=\"Modal-title\">{props.label}</div>\n                <div className=\"Modal-close-button\" onClick={() => setIsVisible(false)}>\n                  <MdClose fontSize={20} className=\"Modal-close-icon\" />\n                </div>\n              </div>\n              {props.headerContent && props.headerContent()}\n            </div>\n            <div className=\"divider\" />\n            <RemoveScroll>\n              <div className={cx(\"Modal-body\")} ref={modalRef}>\n                {props.children}\n              </div>\n            </RemoveScroll>\n          </div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n","import { useEffect, useMemo } from \"react\";\nimport { createPortal } from \"react-dom\";\n\nexport default function Portal({ children }) {\n  const root = document.body;\n\n  const el = useMemo(() => document.createElement(\"div\"), []);\n\n  useEffect(() => {\n    root.appendChild(el);\n    return () => root.removeChild(el);\n  }, [root, el]);\n\n  return createPortal(children, el);\n}\n","import React, { useCallback, useRef, useState } from \"react\";\nimport cx from \"classnames\";\n\nimport \"./Tooltip.css\";\nimport { IS_TOUCH } from \"config/env\";\nimport Portal from \"../Common/Portal\";\n\nconst OPEN_DELAY = 0;\nconst CLOSE_DELAY = 100;\n\ntype Props = {\n  handle: React.ReactNode;\n  renderContent: () => React.ReactNode;\n  position?: string;\n  trigger?: string;\n  className?: string;\n  portalClassName?: string;\n  disableHandleStyle?: boolean;\n  handleClassName?: string;\n  isHandlerDisabled?: boolean;\n  fitHandleWidth?: boolean;\n  closeOnDoubleClick?: boolean;\n};\n\ntype Coords = {\n  height?: number;\n  width?: number;\n  left?: number;\n  top?: number;\n};\n\nexport default function TooltipWithPortal(props: Props) {\n  const [visible, setVisible] = useState(false);\n  const [coords, setCoords] = useState<Coords>({});\n  const [tooltipWidth, setTooltipWidth] = useState<string>();\n  const intervalCloseRef = useRef<ReturnType<typeof setTimeout> | null>();\n  const intervalOpenRef = useRef<ReturnType<typeof setTimeout> | null>();\n\n  const position = props.position ?? \"left-bottom\";\n  const trigger = props.trigger ?? \"hover\";\n  const handlerRef = useRef<null | HTMLInputElement>(null);\n\n  const updateTooltipCoords = useCallback(() => {\n    const rect = handlerRef?.current?.getBoundingClientRect();\n\n    if (rect) {\n      setCoords({\n        height: rect.height,\n        width: rect.width,\n        left: rect.x,\n        top: rect.y + window.scrollY,\n      });\n      if (props.fitHandleWidth) {\n        setTooltipWidth(`${rect.width}px`);\n      }\n    }\n  }, [handlerRef, props.fitHandleWidth]);\n\n  const onMouseEnter = useCallback(() => {\n    if (trigger !== \"hover\" || IS_TOUCH) return;\n\n    if (intervalCloseRef.current) {\n      clearInterval(intervalCloseRef.current);\n      intervalCloseRef.current = null;\n    }\n    if (!intervalOpenRef.current) {\n      intervalOpenRef.current = setTimeout(() => {\n        setVisible(true);\n        intervalOpenRef.current = null;\n      }, OPEN_DELAY);\n    }\n    updateTooltipCoords();\n  }, [setVisible, intervalCloseRef, intervalOpenRef, trigger, updateTooltipCoords]);\n\n  const onMouseClick = useCallback(() => {\n    if (trigger !== \"click\" && !IS_TOUCH) return;\n    if (intervalCloseRef.current) {\n      clearInterval(intervalCloseRef.current);\n      intervalCloseRef.current = null;\n    }\n    if (intervalOpenRef.current) {\n      clearInterval(intervalOpenRef.current);\n      intervalOpenRef.current = null;\n    }\n    updateTooltipCoords();\n\n    if (props.closeOnDoubleClick) {\n      setVisible((old) => !old);\n    } else {\n      setVisible(true);\n    }\n  }, [setVisible, intervalCloseRef, trigger, updateTooltipCoords, props.closeOnDoubleClick]);\n\n  const onMouseLeave = useCallback(() => {\n    intervalCloseRef.current = setTimeout(() => {\n      setVisible(false);\n      intervalCloseRef.current = null;\n    }, CLOSE_DELAY);\n    if (intervalOpenRef.current) {\n      clearInterval(intervalOpenRef.current);\n      intervalOpenRef.current = null;\n    }\n    updateTooltipCoords();\n  }, [setVisible, intervalCloseRef, updateTooltipCoords]);\n\n  const className = cx(\"Tooltip\", props.className);\n\n  return (\n    <span className={className} onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave} onClick={onMouseClick}>\n      <span\n        className={cx({ \"Tooltip-handle\": !props.disableHandleStyle }, [props.handleClassName], { active: visible })}\n        ref={handlerRef}\n      >\n        {/* For onMouseLeave to work on disabled button https://github.com/react-component/tooltip/issues/18#issuecomment-411476678 */}\n        {props.isHandlerDisabled ? <div className=\"Tooltip-disabled-wrapper\">{props.handle}</div> : <>{props.handle}</>}\n      </span>\n      {visible && coords.left && (\n        <Portal>\n          <div style={{ ...coords, position: \"absolute\" }}>\n            <div className={cx([\"Tooltip-popup\", position])} style={{ width: tooltipWidth }}>\n              {props.renderContent()}\n            </div>\n          </div>\n        </Portal>\n      )}\n    </span>\n  );\n}\n","import React, { useState, useEffect, ReactNode } from \"react\";\nimport cx from \"classnames\";\n\nimport { BiChevronDown } from \"react-icons/bi\";\n\nimport Modal from \"../Modal/Modal\";\n\nimport dropDownIcon from \"img/DROP_DOWN.svg\";\nimport searchIcon from \"img/search.svg\";\nimport \"./TokenSelector.css\";\nimport TooltipWithPortal from \"../Tooltip/TooltipWithPortal\";\nimport { bigNumberify, expandDecimals, formatAmount } from \"lib/numbers\";\nimport { getToken } from \"config/tokens\";\nimport { importImage } from \"lib/legacy\";\nimport { t } from \"@lingui/macro\";\nimport { useMedia } from \"react-use\";\nimport { InfoTokens, Token, TokenInfo } from \"domain/tokens\";\nimport { BigNumber } from \"ethers\";\n\ntype TokenState = {\n  disabled?: boolean;\n  message?: string;\n};\n\ntype Props = {\n  chainId: number;\n  label?: string;\n  className?: string;\n  tokenAddress: string;\n  tokens: Token[];\n  infoTokens?: InfoTokens;\n  showMintingCap?: boolean;\n  mintingCap?: BigNumber;\n  disabled?: boolean;\n  selectedTokenLabel?: ReactNode | string;\n  showBalances?: boolean;\n  showTokenImgInDropdown?: boolean;\n  showSymbolImage?: boolean;\n  showNewCaret?: boolean;\n  getTokenState?: (info: TokenInfo) => TokenState | undefined;\n  disableBodyScrollLock?: boolean;\n  onSelectToken: (token: Token) => void;\n};\n\nexport default function TokenSelector(props: Props) {\n  const isSmallerScreen = useMedia(\"(max-width: 700px)\");\n  const [isModalVisible, setIsModalVisible] = useState(false);\n  const [searchKeyword, setSearchKeyword] = useState(\"\");\n  const tokenInfo = getToken(props.chainId, props.tokenAddress);\n\n  const {\n    tokens,\n    mintingCap,\n    infoTokens,\n    showMintingCap,\n    disabled,\n    selectedTokenLabel,\n    showBalances = true,\n    showTokenImgInDropdown = false,\n    showSymbolImage = false,\n    showNewCaret = false,\n    getTokenState = () => ({ disabled: false, message: null }),\n  } = props;\n\n  const visibleTokens = tokens.filter((t) => !t.isTempHidden);\n\n  const onSelectToken = (token) => {\n    setIsModalVisible(false);\n    props.onSelectToken(token);\n  };\n\n  useEffect(() => {\n    if (isModalVisible) {\n      setSearchKeyword(\"\");\n    }\n  }, [isModalVisible]);\n\n  if (!tokenInfo) {\n    return null;\n  }\n\n  const tokenImage = showSymbolImage ? importImage(`ic_${tokenInfo.symbol.toLowerCase()}_24.svg`) : undefined;\n\n  const onSearchKeywordChange = (e) => {\n    setSearchKeyword(e.target.value);\n  };\n\n  const filteredTokens = visibleTokens.filter((item) => {\n    return (\n      item.name.toLowerCase().indexOf(searchKeyword.toLowerCase()) > -1 ||\n      item.symbol.toLowerCase().indexOf(searchKeyword.toLowerCase()) > -1\n    );\n  });\n\n  const _handleKeyDown = (e) => {\n    if (e.key === \"Enter\" && filteredTokens.length > 0) {\n      onSelectToken(filteredTokens[0]);\n    }\n  };\n\n  return (\n    <div className={cx(\"TokenSelector\", { disabled }, props.className)}>\n      <Modal\n        isVisible={isModalVisible}\n        setIsVisible={setIsModalVisible}\n        label={props.label}\n        headerContent={() => (\n          <div className=\"TokenSelector-token-row TokenSelector-token-input-row\">\n            <input\n              type=\"text\"\n              placeholder={t`Search Token`}\n              value={searchKeyword}\n              onChange={(e) => onSearchKeywordChange(e)}\n              onKeyDown={_handleKeyDown}\n              autoFocus={!isSmallerScreen}\n              className=\"Tokenselector-search-input\"\n              style={{\n                backgroundImage: `url(${searchIcon})`,\n              }}\n            />\n          </div>\n        )}\n      >\n        <div className=\"TokenSelector-tokens\">\n          {filteredTokens.map((token, tokenIndex) => {\n            const tokenPopupImage = importImage(`ic_${token.symbol.toLowerCase()}_40.svg`);\n            let info = infoTokens?.[token.address] || ({} as TokenInfo);\n\n            let mintAmount;\n            let balance = info.balance;\n            if (showMintingCap && mintingCap && info.usdgAmount) {\n              mintAmount = mintingCap.sub(info.usdgAmount);\n            }\n            if (mintAmount && mintAmount.lt(0)) {\n              mintAmount = bigNumberify(0);\n            }\n            let balanceUsd;\n            if (balance && info.maxPrice) {\n              balanceUsd = balance.mul(info.maxPrice).div(expandDecimals(1, token.decimals));\n            }\n\n            const tokenState = getTokenState(info) || {};\n\n            return (\n              <div\n                key={token.address}\n                className={cx(\"TokenSelector-token-row\", { disabled: tokenState.disabled })}\n                onClick={() => !tokenState.disabled && onSelectToken(token)}\n              >\n                {tokenState.disabled && tokenState.message && (\n                  <TooltipWithPortal\n                    className=\"TokenSelector-tooltip\"\n                    handle={<div className=\"TokenSelector-tooltip-backing\" />}\n                    position={tokenIndex < filteredTokens.length / 2 ? \"center-bottom\" : \"center-top\"}\n                    disableHandleStyle\n                    closeOnDoubleClick\n                    fitHandleWidth\n                    renderContent={() => tokenState.message}\n                  />\n                )}\n                <div className=\"Token-info\">\n                  {showTokenImgInDropdown && <img src={tokenPopupImage} alt={token.name} className=\"token-logo\" />}\n                  <div className=\"Token-symbol\">\n                    <div className=\"Token-text\">{token.symbol}</div>\n                    <span className=\"text-accent\">{token.name}</span>\n                  </div>\n                </div>\n                <div className=\"Token-balance\">\n                  {showBalances && balance && (\n                    <div className=\"Token-text\">\n                      {balance.gt(0) && formatAmount(balance, token.decimals, 4, true)}\n                      {balance.eq(0) && \"-\"}\n                    </div>\n                  )}\n                  <span className=\"text-accent\">\n                    {mintAmount && <div>Mintable: {formatAmount(mintAmount, token.decimals, 2, true)} USDG</div>}\n                    {showMintingCap && !mintAmount && <div>-</div>}\n                    {!showMintingCap && showBalances && balanceUsd && balanceUsd.gt(0) && (\n                      <div>${formatAmount(balanceUsd, 30, 2, true)}</div>\n                    )}\n                  </span>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </Modal>\n      {selectedTokenLabel ? (\n        <div className=\"TokenSelector-box\" onClick={() => setIsModalVisible(true)}>\n          {selectedTokenLabel}\n          {!showNewCaret && <BiChevronDown className=\"TokenSelector-caret\" />}\n        </div>\n      ) : (\n        <div className=\"TokenSelector-box\" onClick={() => setIsModalVisible(true)}>\n          {tokenInfo.symbol}\n          {showSymbolImage && <img src={tokenImage} alt={tokenInfo.symbol} className=\"TokenSelector-box-symbol\" />}\n          {showNewCaret && <img src={dropDownIcon} alt=\"Dropdown Icon\" className=\"TokenSelector-box-caret\" />}\n          {!showNewCaret && <BiChevronDown className=\"TokenSelector-caret\" />}\n        </div>\n      )}\n    </div>\n  );\n}\n","import cx from \"classnames\";\n\nexport default function ExchangeInfoRow(props) {\n  const { label, children, value, isTop, isWarning, className } = props;\n\n  return (\n    <div className={cx(\"Exchange-info-row\", className, { \"top-line\": isTop })}>\n      <div className=\"Exchange-info-label\">{label}</div>\n      <div className={`align-right ${isWarning ? \"Exchange-info-value-warning\" : \"\"}`}>{children || value}</div>\n    </div>\n  );\n}\n","import { ReactNode } from \"react\";\nimport cx from \"classnames\";\nimport \"./StatsTooltip.css\";\n\ntype Props = {\n  className?: string;\n  label: string | ReactNode;\n  value: number | string | string[] | number[] | ReactNode;\n  showDollar?: boolean;\n};\n\nexport default function StatsTooltipRow({ label, value, className, showDollar = true }: Props) {\n  function renderValue() {\n    if (Array.isArray(value)) {\n      return (\n        <ul className=\"Tooltip-row-values\">\n          {value.map((v, i) => (\n            <li key={i}>{v}</li>\n          ))}\n        </ul>\n      );\n    }\n    return (\n      <span className=\"Tooltip-row-value\">\n        {showDollar && \"$\"}\n        {value}\n      </span>\n    );\n  }\n\n  function renderLabel() {\n    if (typeof label === \"string\") {\n      return `${label}:`;\n    }\n\n    return label;\n  }\n\n  return (\n    <div className={cx(\"Tooltip-row\", className)}>\n      <span className=\"label\">{renderLabel()}</span>\n      {renderValue()}\n    </div>\n  );\n}\n","export const TRIGGER_PREFIX_ABOVE = \">\";\nexport const TRIGGER_PREFIX_BELOW = \"<\";\n","import { useCallback } from \"react\";\nimport { useLocalStorage } from \"react-use\";\n\nexport function useLocalStorageByChainId<T>(\n  chainId: number,\n  key: string,\n  defaultValue: T\n): [T | undefined, (value: T) => void] {\n  const [internalValue, setInternalValue] = useLocalStorage(key, {});\n\n  const setValue = useCallback(\n    (value) => {\n      setInternalValue((internalValue) => {\n        if (typeof value === \"function\") {\n          value = value(internalValue?.[chainId] || defaultValue);\n        }\n\n        const newInternalValue = {\n          ...internalValue,\n          [chainId]: value,\n        };\n        return newInternalValue;\n      });\n    },\n    [chainId, setInternalValue, defaultValue]\n  );\n\n  let value;\n\n  if (internalValue && chainId in internalValue) {\n    value = internalValue[chainId];\n  } else {\n    value = defaultValue;\n  }\n\n  return [value, setValue];\n}\n\nexport type LocalStorageKey = string | number | boolean | null | undefined;\n\nexport function useLocalStorageSerializeKey<T>(\n  key: LocalStorageKey | LocalStorageKey[],\n  value: T,\n  opts?: {\n    raw: boolean;\n    serializer: (val: T) => string;\n    deserializer: (value: string) => T;\n  }\n) {\n  key = JSON.stringify(key);\n\n  return useLocalStorage<T>(key, value, opts);\n}\n","import React, { ReactNode } from \"react\";\nimport { Link } from \"react-router-dom\";\n\ntype ButtonProps = {\n  children: ReactNode;\n  className: string;\n  to: string;\n  onClick?: () => void;\n  newTab?: boolean;\n};\n\nexport default function ButtonLink({ className, to, children, onClick, newTab = false, ...rest }: ButtonProps) {\n  if (to.startsWith(\"http\") || to.startsWith(\"https\")) {\n    const anchorProps = {\n      href: to,\n      className,\n      onClick,\n      ...rest,\n      ...(newTab\n        ? {\n            target: \"_blank\",\n            rel: \"noopener\",\n          }\n        : {}),\n    };\n    return <a {...anchorProps}>{children}</a>;\n  }\n  return (\n    <Link className={className} to={to}>\n      {children}\n    </Link>\n  );\n}\n","import { ReactNode, HTMLProps } from \"react\";\nimport cx from \"classnames\";\nimport ButtonLink from \"./ButtonLink\";\nimport \"./Button.scss\";\n\ntype ButtonVariant = \"primary\" | \"primary-action\" | \"semi-clear\" | \"clear\";\n\ntype ButtonProps = HTMLProps<HTMLButtonElement> & {\n  children: ReactNode;\n  variant: ButtonVariant;\n  className?: string;\n  disabled?: boolean;\n  onClick?: () => void;\n  to?: string;\n  type?: \"button\" | \"submit\" | \"reset\";\n  imgInfo?: {\n    src: string;\n    alt?: string;\n  };\n  newTab?: boolean;\n};\n\nexport default function Button({\n  variant,\n  disabled,\n  onClick,\n  children,\n  to,\n  className,\n  imgInfo,\n  type,\n  newTab,\n  ...rest\n}: ButtonProps) {\n  const classNames = cx(\"button\", variant, className);\n\n  function handleClick() {\n    if (disabled || !onClick) {\n      return;\n    }\n\n    if (onClick) {\n      onClick();\n    }\n  }\n\n  if (to) {\n    return (\n      <ButtonLink className={classNames} to={to} onClick={onClick} newTab={newTab} {...rest}>\n        {imgInfo && <img className=\"btn-image\" src={imgInfo.src} alt={imgInfo.alt || \"\"} />}\n        {children}\n      </ButtonLink>\n    );\n  }\n\n  if (onClick) {\n    return (\n      <button className={classNames} onClick={handleClick} disabled={disabled} {...rest}>\n        {imgInfo && <img className=\"btn-image\" src={imgInfo.src} alt={imgInfo.alt || \"\"} />}\n        {children}\n      </button>\n    );\n  }\n\n  return (\n    <button type={type} className={classNames} disabled={disabled} {...rest}>\n      {imgInfo && <img className=\"btn-image\" src={imgInfo.src} alt={imgInfo.alt || \"\"} />}\n      {children}\n    </button>\n  );\n}\n","import { i18n } from \"@lingui/core\";\nimport { t, Trans } from \"@lingui/macro\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport StatsTooltipRow from \"components/StatsTooltip/StatsTooltipRow\";\nimport Tooltip from \"components/Tooltip/Tooltip\";\nimport { getConstant } from \"config/chains\";\nimport { BigNumber, BigNumberish } from \"ethers\";\nimport { useChainId } from \"lib/chains\";\nimport { USD_DECIMALS } from \"lib/legacy\";\nimport { formatAmount, formatAmountFree } from \"lib/numbers\";\n\ntype Fee = { label: string; value: string };\ntype ExecutionFee = { fee?: BigNumberish; feeUSD?: BigNumberish };\ntype FeeType = \"open\" | \"close\" | \"swap\" | \"borrow\" | \"deposit\" | \"execution\";\n\nfunction getFeeLabel(type: FeeType) {\n  const labels = {\n    close: t`Close Fee`,\n    open: t`Open Fee`,\n    swap: t`Swap Fee`,\n    borrow: t`Borrow Fee`,\n    deposit: t`Deposit Fee`,\n    execution: t`Execution Fee`,\n  };\n\n  return i18n._(labels[type]);\n}\n\nfunction getExecutionFeeStr(chainId, executionFee, executionFeeUsd) {\n  const nativeTokenSymbol = getConstant(chainId, \"nativeTokenSymbol\");\n\n  if (!nativeTokenSymbol || !executionFee || !executionFeeUsd) {\n    return \"\";\n  }\n\n  const formattedExecutionFee = formatAmountFree(executionFee, 18, 4);\n  const formattedExecutionFeeUsd = formatAmount(executionFeeUsd, USD_DECIMALS, 2);\n  return `${formattedExecutionFee} ${nativeTokenSymbol} ($${formattedExecutionFeeUsd})`;\n}\n\nfunction getFeesStr(fees: BigNumber | undefined): string {\n  if (!fees || !BigNumber.from(fees).gt(0)) {\n    return \"\";\n  }\n  return `$${formatAmount(fees, USD_DECIMALS, 2, true)}`;\n}\n\nfunction getFeesRows(isOpening: boolean, formattedFees: Record<string, string>) {\n  const rows: Fee[] = [];\n\n  function addFeeRow(label: FeeType, value: string) {\n    rows.push({ label: getFeeLabel(label), value });\n  }\n\n  if (isOpening) {\n    addFeeRow(\"swap\", formattedFees?.swap);\n    addFeeRow(\"open\", formattedFees?.position);\n    addFeeRow(\"borrow\", formattedFees?.funding);\n  } else {\n    addFeeRow(\"borrow\", formattedFees?.funding);\n    addFeeRow(\"close\", formattedFees?.position);\n    addFeeRow(\"swap\", formattedFees?.swap);\n  }\n\n  addFeeRow(\"deposit\", formattedFees?.deposit);\n  addFeeRow(\"execution\", formattedFees?.execution);\n\n  return rows.filter((row) => row.value);\n}\n\ntype Props = {\n  totalFees: BigNumber;\n  executionFees: ExecutionFee;\n  positionFee?: BigNumber;\n  depositFee?: BigNumber;\n  swapFee?: BigNumber;\n  fundingFee?: string;\n  isOpening?: boolean;\n};\n\nfunction FeesTooltip({\n  totalFees,\n  fundingFee,\n  positionFee,\n  swapFee,\n  executionFees,\n  depositFee,\n  isOpening = true,\n}: Props) {\n  const { chainId } = useChainId();\n  const executionFee = executionFees?.fee;\n  const executionFeeUSD = executionFees?.feeUSD;\n\n  const formattedFees = {\n    swap: getFeesStr(swapFee),\n    position: getFeesStr(positionFee),\n    deposit: getFeesStr(depositFee),\n    execution: getExecutionFeeStr(chainId, executionFee, executionFeeUSD),\n    funding: fundingFee || \"\",\n  };\n\n  let feesRows = getFeesRows(isOpening, formattedFees);\n\n  return (\n    <Tooltip\n      position=\"right-top\"\n      className=\"PositionSeller-fees-tooltip\"\n      handle={<div>{totalFees?.gt(0) ? `$${formatAmount(totalFees, USD_DECIMALS, 2, true)}` : \"-\"}</div>}\n      renderContent={() => (\n        <div>\n          {feesRows.map(({ label, value }) => (\n            <StatsTooltipRow key={label} label={label} showDollar={false} value={value} />\n          ))}\n          <br />\n          <div className=\"PositionSeller-fee-item\">\n            <Trans>\n              <ExternalLink href=\"https://gmxio.gitbook.io/gmx/trading#fees\">More Info</ExternalLink> about fees.\n            </Trans>\n          </div>\n        </div>\n      )}\n    />\n  );\n}\n\nexport default FeesTooltip;\n","import React, { useCallback, useState, useMemo } from \"react\";\nimport \"./ConfirmationBox.css\";\nimport {\n  USD_DECIMALS,\n  PRECISION,\n  BASIS_POINTS_DIVISOR,\n  LIMIT,\n  MIN_PROFIT_TIME,\n  INCREASE,\n  getExchangeRate,\n  getExchangeRateDisplay,\n  DEFAULT_SLIPPAGE_AMOUNT,\n  DEFAULT_HIGHER_SLIPPAGE_AMOUNT,\n  calculatePositionDelta,\n  DECREASE,\n} from \"lib/legacy\";\nimport { getConstant } from \"config/chains\";\nimport { getContract } from \"config/contracts\";\n\nimport { BsArrowRight } from \"react-icons/bs\";\nimport Modal from \"../Modal/Modal\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport Checkbox from \"../Checkbox/Checkbox\";\nimport ExchangeInfoRow from \"./ExchangeInfoRow\";\nimport { cancelDecreaseOrder, handleCancelOrder } from \"domain/legacy\";\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\nimport { TRIGGER_PREFIX_ABOVE, TRIGGER_PREFIX_BELOW } from \"config/ui\";\nimport { useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport { SLIPPAGE_BPS_KEY } from \"config/localStorage\";\nimport { expandDecimals, formatAmount } from \"lib/numbers\";\nimport { getToken, getWrappedToken } from \"config/tokens\";\nimport { Plural, t, Trans } from \"@lingui/macro\";\nimport Button from \"components/Button/Button\";\nimport FeesTooltip from \"./FeesTooltip\";\nimport { getTokenInfo, getUsd } from \"domain/tokens\";\n\nconst HIGH_SPREAD_THRESHOLD = expandDecimals(1, USD_DECIMALS).div(100); // 1%;\n\nfunction getSwapSpreadInfo(fromTokenInfo, toTokenInfo, isLong, nativeTokenAddress) {\n  if (fromTokenInfo?.spread && toTokenInfo?.spread) {\n    let value = fromTokenInfo.spread.add(toTokenInfo.spread);\n\n    const fromTokenAddress = fromTokenInfo.isNative ? nativeTokenAddress : fromTokenInfo.address;\n    const toTokenAddress = toTokenInfo.isNative ? nativeTokenAddress : toTokenInfo.address;\n\n    if (isLong && fromTokenAddress === toTokenAddress) {\n      value = fromTokenInfo.spread;\n    }\n\n    return {\n      value,\n      isHigh: value.gt(HIGH_SPREAD_THRESHOLD),\n    };\n  }\n}\n\nfunction renderAllowedSlippage(allowedSlippage) {\n  return (\n    <ExchangeInfoRow label={t`Allowed Slippage`}>\n      <Tooltip\n        handle={`${formatAmount(allowedSlippage, 2, 2)}%`}\n        position=\"right-bottom\"\n        renderContent={() => {\n          return (\n            <Trans>\n              You can change this in the settings menu on the top right of the page.\n              <br />\n              <br />\n              Note that a low allowed slippage, e.g. less than 0.5%, may result in failed orders if prices are volatile.\n            </Trans>\n          );\n        }}\n      />\n    </ExchangeInfoRow>\n  );\n}\n\nexport default function ConfirmationBox(props) {\n  const {\n    fromToken,\n    fromTokenInfo,\n    toToken,\n    toTokenInfo,\n    isSwap,\n    isLong,\n    isMarketOrder,\n    orderOption,\n    isShort,\n    toAmount,\n    fromAmount,\n    isHigherSlippageAllowed,\n    setIsHigherSlippageAllowed,\n    onConfirmationClick,\n    setIsConfirming,\n    hasExistingPosition,\n    leverage,\n    existingPosition,\n    existingLiquidationPrice,\n    displayLiquidationPrice,\n    shortCollateralToken,\n    isPendingConfirmation,\n    triggerPriceUsd,\n    triggerRatio,\n    feesUsd,\n    isSubmitting,\n    fromUsdMin,\n    toUsdMax,\n    nextAveragePrice,\n    collateralTokenAddress,\n    feeBps,\n    chainId,\n    orders,\n    library,\n    setPendingTxns,\n    pendingTxns,\n    minExecutionFee,\n    minExecutionFeeUSD,\n    minExecutionFeeErrorMessage,\n    entryMarkPrice,\n    positionFee,\n    swapFees,\n    infoTokens,\n  } = props;\n\n  const [savedSlippageAmount] = useLocalStorageSerializeKey([chainId, SLIPPAGE_BPS_KEY], DEFAULT_SLIPPAGE_AMOUNT);\n  const [isProfitWarningAccepted, setIsProfitWarningAccepted] = useState(false);\n  const [isTriggerWarningAccepted, setIsTriggerWarningAccepted] = useState(false);\n  const [isLimitOrdersVisible, setIsLimitOrdersVisible] = useState(false);\n\n  const onCancelOrderClick = useCallback(\n    (order) => {\n      handleCancelOrder(chainId, library, order, { pendingTxns, setPendingTxns });\n    },\n    [library, pendingTxns, setPendingTxns, chainId]\n  );\n\n  let minOut;\n  let fromTokenUsd;\n  let toTokenUsd;\n\n  let collateralAfterFees = fromUsdMin;\n  if (feesUsd) {\n    collateralAfterFees = fromUsdMin.sub(feesUsd);\n  }\n\n  if (isSwap) {\n    minOut = toAmount.mul(BASIS_POINTS_DIVISOR - savedSlippageAmount).div(BASIS_POINTS_DIVISOR);\n\n    fromTokenUsd = fromTokenInfo ? formatAmount(fromTokenInfo.minPrice, USD_DECIMALS, 2, true) : 0;\n    toTokenUsd = toTokenInfo ? formatAmount(toTokenInfo.maxPrice, USD_DECIMALS, 2, true) : 0;\n  }\n\n  const getTitle = () => {\n    if (!isMarketOrder) {\n      return t`Confirm Limit Order`;\n    }\n    if (isSwap) {\n      return t`Confirm Swap`;\n    }\n    return isLong ? t`Confirm Long` : t`Confirm Short`;\n  };\n\n  const title = getTitle();\n\n  const existingOrder = useMemo(() => {\n    const wrappedToken = getWrappedToken(chainId);\n    for (const order of orders) {\n      if (order.type !== INCREASE) continue;\n      const sameToken =\n        order.indexToken === wrappedToken.address ? toToken.isNative : order.indexToken === toToken.address;\n      if (order.isLong === isLong && sameToken) {\n        return order;\n      }\n    }\n  }, [orders, chainId, isLong, toToken.address, toToken.isNative]);\n\n  const existingOrders = useMemo(() => {\n    const wrappedToken = getWrappedToken(chainId);\n    return orders.filter((order) => {\n      if (order.type !== INCREASE) return false;\n      const sameToken =\n        order.indexToken === wrappedToken.address ? toToken.isNative : order.indexToken === toToken.address;\n      return order.isLong === isLong && sameToken;\n    });\n  }, [orders, chainId, isLong, toToken.address, toToken.isNative]);\n\n  const existingTriggerOrders = useMemo(() => {\n    const wrappedToken = getWrappedToken(chainId);\n    return orders.filter((order) => {\n      if (order.type !== DECREASE) return false;\n      const sameToken =\n        order.indexToken === wrappedToken.address ? toToken.isNative : order.indexToken === toToken.address;\n      return order.isLong === isLong && sameToken;\n    });\n  }, [orders, chainId, isLong, toToken.address, toToken.isNative]);\n\n  const decreaseOrdersThatWillBeExecuted = useMemo(() => {\n    if (isSwap) return [];\n    return existingTriggerOrders.filter((order) => {\n      if (order.triggerAboveThreshold) {\n        return existingPosition?.markPrice.gte(order.triggerPrice);\n      } else {\n        return existingPosition?.markPrice.lte(order.triggerPrice);\n      }\n    });\n  }, [existingPosition, existingTriggerOrders, isSwap]);\n\n  const getError = () => {\n    if (!isSwap && hasExistingPosition && !isMarketOrder) {\n      const { delta, hasProfit } = calculatePositionDelta(triggerPriceUsd, existingPosition);\n      if (hasProfit && delta.eq(0)) {\n        return t`Invalid price, see warning`;\n      }\n    }\n    if (isMarketOrder && hasPendingProfit && !isProfitWarningAccepted) {\n      return t`Forfeit profit not checked`;\n    }\n    return false;\n  };\n\n  const getPrimaryText = () => {\n    if (decreaseOrdersThatWillBeExecuted.length > 0 && !isTriggerWarningAccepted) {\n      return t`Accept confirmation of trigger orders`;\n    }\n\n    if (!isPendingConfirmation) {\n      const error = getError();\n      if (error) {\n        return error;\n      }\n\n      if (isSwap) {\n        return title;\n      }\n      const action = isMarketOrder ? (isLong ? t`Long` : t`Short`) : t`Create Order`;\n\n      if (\n        isMarketOrder &&\n        MIN_PROFIT_TIME > 0 &&\n        hasExistingPosition &&\n        existingPosition.delta.eq(0) &&\n        existingPosition.pendingDelta.gt(0)\n      ) {\n        return isLong ? t`Forfeit profit and ${action}` : t`Forfeit profit and Short`;\n      }\n\n      return isMarketOrder && MIN_PROFIT_TIME > 0 ? t`Accept minimum and ${action}` : action;\n    }\n\n    if (!isMarketOrder) {\n      return t`Creating Order...`;\n    }\n    if (isSwap) {\n      return t`Swapping...`;\n    }\n    if (isLong) {\n      return t`Longing...`;\n    }\n    return t`Shorting...`;\n  };\n\n  const isPrimaryEnabled = () => {\n    if (getError()) {\n      return false;\n    }\n    if (decreaseOrdersThatWillBeExecuted.length > 0 && !isTriggerWarningAccepted) {\n      return false;\n    }\n    return !isPendingConfirmation && !isSubmitting;\n  };\n\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n  const spreadInfo = getSwapSpreadInfo(fromTokenInfo, toTokenInfo, isLong, nativeTokenAddress);\n\n  // it's meaningless for limit/stop orders to show spread based on current prices\n  const showSwapSpread = isSwap && isMarketOrder && !!spreadInfo;\n\n  let allowedSlippage = savedSlippageAmount;\n  if (isHigherSlippageAllowed) {\n    allowedSlippage = DEFAULT_HIGHER_SLIPPAGE_AMOUNT;\n  }\n\n  const renderSwapSpreadWarning = useCallback(() => {\n    if (!isMarketOrder) {\n      return null;\n    }\n\n    if (spreadInfo && spreadInfo.isHigh) {\n      return (\n        <div className=\"Confirmation-box-warning\">\n          <Trans>The spread is {`>`} 1%, please ensure the trade details are acceptable before confirming</Trans>\n        </div>\n      );\n    }\n  }, [isMarketOrder, spreadInfo]);\n\n  const collateralSpreadInfo = useMemo(() => {\n    if (!toTokenInfo?.spread || !collateralTokenAddress) {\n      return null;\n    }\n\n    let totalSpread = toTokenInfo.spread;\n    if (toTokenInfo.address === collateralTokenAddress) {\n      return {\n        value: totalSpread,\n        isHigh: toTokenInfo.spread.gt(HIGH_SPREAD_THRESHOLD),\n      };\n    }\n\n    const collateralTokenInfo = getTokenInfo(infoTokens, collateralTokenAddress);\n    if (collateralTokenInfo?.spread) {\n      totalSpread = totalSpread.add(collateralTokenInfo.spread);\n    }\n\n    return {\n      value: totalSpread,\n      isHigh: totalSpread.gt(HIGH_SPREAD_THRESHOLD),\n    };\n  }, [toTokenInfo, collateralTokenAddress, infoTokens]);\n\n  const renderCollateralSpreadWarning = useCallback(() => {\n    if (collateralSpreadInfo && collateralSpreadInfo.isHigh) {\n      return (\n        <div className=\"Confirmation-box-warning\">\n          <Trans>\n            Transacting with a depegged stable coin is subject to spreads reflecting the worse of current market price\n            or $1.00, with transactions involving multiple stablecoins may have multiple spreads.\n          </Trans>\n        </div>\n      );\n    }\n  }, [collateralSpreadInfo]);\n\n  const showCollateralSpread = !isSwap && isMarketOrder && !!collateralSpreadInfo;\n\n  const renderFeeWarning = useCallback(() => {\n    if (orderOption === LIMIT || !feeBps || feeBps <= 60) {\n      return null;\n    }\n\n    if (isSwap) {\n      return (\n        <div className=\"Confirmation-box-warning\">\n          <Trans>\n            Fees are high to swap from {fromToken.symbol} to {toToken.symbol}.\n          </Trans>\n        </div>\n      );\n    }\n\n    if (!collateralTokenAddress) {\n      return null;\n    }\n\n    const collateralToken = getToken(chainId, collateralTokenAddress);\n    return (\n      <div className=\"Confirmation-box-warning\">\n        <Trans>\n          Fees are high to swap from {fromToken.symbol} to {collateralToken.symbol}. <br />\n          {collateralToken.symbol} is needed for collateral.\n        </Trans>\n      </div>\n    );\n  }, [feeBps, isSwap, collateralTokenAddress, chainId, fromToken.symbol, toToken.symbol, orderOption]);\n\n  const hasPendingProfit =\n    MIN_PROFIT_TIME > 0 && existingPosition && existingPosition.delta.eq(0) && existingPosition.pendingDelta.gt(0);\n\n  const renderExistingOrderWarning = useCallback(() => {\n    if (isSwap || !existingOrder) {\n      return;\n    }\n    const indexToken = getToken(chainId, existingOrder.indexToken);\n    const sizeInToken = formatAmount(\n      existingOrder.sizeDelta.mul(PRECISION).div(existingOrder.triggerPrice),\n      USD_DECIMALS,\n      4,\n      true\n    );\n    const longOrShortText = existingOrder.isLong ? t`Long` : t`Short`;\n    if (existingOrders?.length > 1) {\n      return (\n        <div>\n          <div className=\"Confirmation-box-info\">\n            <span>\n              <Trans>\n                You have multiple existing Increase {longOrShortText} {indexToken.symbol} limit orders{\" \"}\n              </Trans>\n            </span>\n            <span onClick={() => setIsLimitOrdersVisible((p) => !p)} className=\"view-orders\">\n              ({isLimitOrdersVisible ? t`hide` : t`view`})\n            </span>\n          </div>\n          {isLimitOrdersVisible && (\n            <ul className=\"order-list\">\n              {existingOrders.map((order) => {\n                const { account, index, type, triggerAboveThreshold, triggerPrice } = order;\n                const id = `${account}-${index}`;\n                const triggerPricePrefix = triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\n                const indexToken = getToken(chainId, order.indexToken);\n\n                return (\n                  <li key={id} className=\"font-sm\">\n                    <p>\n                      {type === INCREASE ? t`Increase` : t`Decrease`} {indexToken.symbol} {isLong ? t`Long` : t`Short`}{\" \"}\n                      &nbsp;{triggerPricePrefix} ${formatAmount(triggerPrice, USD_DECIMALS, 2, true)}\n                    </p>\n                    <button onClick={() => onCancelOrderClick(order)}>\n                      <Trans>Cancel</Trans>\n                    </button>\n                  </li>\n                );\n              })}\n            </ul>\n          )}\n        </div>\n      );\n    }\n    return (\n      <div className=\"Confirmation-box-info\">\n        <Trans>\n          You have an active Limit Order to Increase {longOrShortText} {sizeInToken} {indexToken.symbol} ($\n          {formatAmount(existingOrder.sizeDelta, USD_DECIMALS, 2, true)}) at price $\n          {formatAmount(existingOrder.triggerPrice, USD_DECIMALS, 2, true)}\n        </Trans>\n      </div>\n    );\n  }, [existingOrder, isSwap, chainId, existingOrders, isLong, isLimitOrdersVisible, onCancelOrderClick]);\n\n  const renderExistingTriggerErrors = useCallback(() => {\n    if (isSwap || decreaseOrdersThatWillBeExecuted?.length < 1) {\n      return;\n    }\n    const existingTriggerOrderLength = decreaseOrdersThatWillBeExecuted.length;\n    return (\n      <>\n        <div className=\"Confirmation-box-warning\">\n          <Plural\n            value={existingTriggerOrderLength}\n            one=\"You have an active trigger order that might execute immediately after you open this position. Please cancel the order or accept the confirmation to continue.\"\n            other=\"You have # active trigger orders that might execute immediately after you open this position. Please cancel the orders or accept the confirmation to continue.\"\n          />\n        </div>\n        <ul className=\"order-list\">\n          {decreaseOrdersThatWillBeExecuted.map((order) => {\n            const { account, index, type, triggerAboveThreshold, triggerPrice } = order;\n            const id = `${account}-${index}`;\n            const triggerPricePrefix = triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\n            const indexToken = getToken(chainId, order.indexToken);\n            return (\n              <li key={id} className=\"font-sm\">\n                <p>\n                  {type === INCREASE ? t`Increase` : t`Decrease`} {indexToken.symbol} {isLong ? t`Long` : t`Short`}\n                  &nbsp;{triggerPricePrefix} ${formatAmount(triggerPrice, USD_DECIMALS, 2, true)}\n                </p>\n                <button\n                  onClick={() =>\n                    cancelDecreaseOrder(chainId, library, index, {\n                      successMsg: t`Order cancelled`,\n                      failMsg: t`Cancel failed`,\n                      sentMsg: t`Cancel submitted`,\n                      pendingTxns,\n                      setPendingTxns,\n                    })\n                  }\n                >\n                  <Trans>Cancel</Trans>\n                </button>\n              </li>\n            );\n          })}\n        </ul>\n      </>\n    );\n  }, [decreaseOrdersThatWillBeExecuted, isSwap, chainId, library, pendingTxns, setPendingTxns, isLong]);\n\n  const renderExistingTriggerWarning = useCallback(() => {\n    if (\n      isSwap ||\n      existingTriggerOrders.length < 1 ||\n      decreaseOrdersThatWillBeExecuted.length > 0 ||\n      renderExistingOrderWarning()\n    ) {\n      return;\n    }\n    const existingTriggerOrderLength = existingTriggerOrders.length;\n    return (\n      <div className=\"Confirmation-box-info\">\n        <Plural\n          value={existingTriggerOrderLength}\n          one=\"You have an active trigger order that could impact this position.\"\n          other=\"You have # active trigger orders that could impact this position.\"\n        />\n      </div>\n    );\n  }, [existingTriggerOrders, isSwap, decreaseOrdersThatWillBeExecuted, renderExistingOrderWarning]);\n\n  // TODO handle unaprproved order plugin (very unlikely case)\n  const renderMain = useCallback(() => {\n    if (isSwap) {\n      return (\n        <div className=\"Confirmation-box-main\">\n          <div>\n            <Trans>Pay</Trans>&nbsp;{formatAmount(fromAmount, fromToken.decimals, 4, true)} {fromToken.symbol} ($\n            {formatAmount(fromUsdMin, USD_DECIMALS, 2, true)})\n          </div>\n          <div className=\"Confirmation-box-main-icon\"></div>\n          <div>\n            <Trans>Receive</Trans>&nbsp;{formatAmount(toAmount, toToken.decimals, 4, true)} {toToken.symbol} ($\n            {formatAmount(toUsdMax, USD_DECIMALS, 2, true)})\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"Confirmation-box-main\">\n        <span>\n          <Trans>Pay</Trans>&nbsp;{formatAmount(fromAmount, fromToken.decimals, 4, true)} {fromToken.symbol} ($\n          {formatAmount(fromUsdMin, USD_DECIMALS, 2, true)})\n        </span>\n        <div className=\"Confirmation-box-main-icon\"></div>\n        <div>\n          {isLong ? t`Long` : t`Short`}&nbsp;\n          {formatAmount(toAmount, toToken.decimals, 4, true)} {toToken.symbol} ($\n          {formatAmount(toUsdMax, USD_DECIMALS, 2, true)})\n        </div>\n      </div>\n    );\n  }, [isSwap, fromAmount, fromToken, toToken, fromUsdMin, toUsdMax, isLong, toAmount]);\n\n  const SWAP_ORDER_EXECUTION_GAS_FEE = getConstant(chainId, \"SWAP_ORDER_EXECUTION_GAS_FEE\");\n  const INCREASE_ORDER_EXECUTION_GAS_FEE = getConstant(chainId, \"INCREASE_ORDER_EXECUTION_GAS_FEE\");\n  const executionFee = isSwap ? SWAP_ORDER_EXECUTION_GAS_FEE : INCREASE_ORDER_EXECUTION_GAS_FEE;\n  const executionFeeUsd = getUsd(executionFee, nativeTokenAddress, false, infoTokens);\n  const currentExecutionFee = isMarketOrder ? minExecutionFee : executionFee;\n  const currentExecutionFeeUsd = isMarketOrder ? minExecutionFeeUSD : executionFeeUsd;\n\n  const renderAvailableLiquidity = useCallback(() => {\n    let availableLiquidity;\n    const riskThresholdBps = 5000;\n    let isLiquidityRisk;\n    const token = isSwap || isLong ? toTokenInfo : shortCollateralToken;\n\n    if (!token || !token.poolAmount || !token.availableAmount) {\n      return null;\n    }\n\n    if (isSwap) {\n      const poolWithoutBuffer = token.poolAmount.sub(token.bufferAmount);\n      availableLiquidity = token.availableAmount.gt(poolWithoutBuffer) ? poolWithoutBuffer : token.availableAmount;\n      isLiquidityRisk = availableLiquidity.mul(riskThresholdBps).div(BASIS_POINTS_DIVISOR).lt(toAmount);\n    } else {\n      if (isShort) {\n        availableLiquidity = token.availableAmount;\n\n        let adjustedMaxGlobalShortSize;\n\n        if (toTokenInfo.maxAvailableShort && toTokenInfo.maxAvailableShort.gt(0)) {\n          adjustedMaxGlobalShortSize = toTokenInfo.maxAvailableShort\n            .mul(expandDecimals(1, token.decimals))\n            .div(expandDecimals(1, USD_DECIMALS));\n        }\n\n        if (adjustedMaxGlobalShortSize && adjustedMaxGlobalShortSize.lt(token.availableAmount)) {\n          availableLiquidity = adjustedMaxGlobalShortSize;\n        }\n\n        const sizeTokens = toUsdMax.mul(expandDecimals(1, token.decimals)).div(token.minPrice);\n        isLiquidityRisk = availableLiquidity.mul(riskThresholdBps).div(BASIS_POINTS_DIVISOR).lt(sizeTokens);\n      } else {\n        availableLiquidity = token.availableAmount;\n        isLiquidityRisk = availableLiquidity.mul(riskThresholdBps).div(BASIS_POINTS_DIVISOR).lt(toAmount);\n      }\n    }\n\n    if (!availableLiquidity) {\n      return null;\n    }\n\n    return (\n      <ExchangeInfoRow label={t`Available Liquidity`}>\n        <Tooltip\n          position=\"right-bottom\"\n          handleClassName={isLiquidityRisk ? \"negative\" : null}\n          handle={\n            <>\n              {formatAmount(availableLiquidity, token.decimals, token.isStable ? 0 : 2, true)} {token.symbol}\n            </>\n          }\n          renderContent={() =>\n            isLiquidityRisk\n              ? t`There may not be sufficient liquidity to execute your order when the price conditions are met`\n              : t`The order will only execute if the price conditions are met and there is sufficient liquidity`\n          }\n        />\n      </ExchangeInfoRow>\n    );\n  }, [toTokenInfo, shortCollateralToken, isShort, isLong, isSwap, toAmount, toUsdMax]);\n\n  const renderMarginSection = useCallback(() => {\n    const collateralToken = getToken(chainId, collateralTokenAddress);\n    function getFundingFee() {\n      return (\n        <>\n          {isLong && toTokenInfo && formatAmount(toTokenInfo.fundingRate, 4, 4)}\n          {isShort && shortCollateralToken && formatAmount(shortCollateralToken.fundingRate, 4, 4)}\n          {((isLong && toTokenInfo && toTokenInfo.fundingRate) ||\n            (isShort && shortCollateralToken && shortCollateralToken.fundingRate)) &&\n            \"% / 1h\"}\n        </>\n      );\n    }\n    return (\n      <>\n        <div>\n          {renderMain()}\n          {renderCollateralSpreadWarning()}\n          {renderFeeWarning()}\n          {renderExistingOrderWarning()}\n          {renderExistingTriggerErrors()}\n          {renderExistingTriggerWarning()}\n          {minExecutionFeeErrorMessage && <div className=\"Confirmation-box-warning\">{minExecutionFeeErrorMessage}</div>}\n          {hasPendingProfit && isMarketOrder && (\n            <div className=\"PositionEditor-accept-profit-warning\">\n              <Checkbox isChecked={isProfitWarningAccepted} setIsChecked={setIsProfitWarningAccepted}>\n                <span className=\"muted\">\n                  <Trans>Forfeit profit</Trans>\n                </span>\n              </Checkbox>\n            </div>\n          )}\n          {orderOption === LIMIT && renderAvailableLiquidity()}\n          <ExchangeInfoRow label={t`Leverage`}>\n            {hasExistingPosition && toAmount && toAmount.gt(0) && (\n              <div className=\"inline-block muted\">\n                {formatAmount(existingPosition.leverage, 4, 2)}x\n                <BsArrowRight className=\"transition-arrow\" />\n              </div>\n            )}\n            {toAmount && leverage && leverage.gt(0) && `${formatAmount(leverage, 4, 2)}x`}\n            {!toAmount && leverage && leverage.gt(0) && `-`}\n            {leverage && leverage.eq(0) && `-`}\n          </ExchangeInfoRow>\n          {isMarketOrder && (\n            <div className=\"PositionEditor-allow-higher-slippage\">\n              <Checkbox isChecked={isHigherSlippageAllowed} setIsChecked={setIsHigherSlippageAllowed}>\n                <span className=\"muted font-sm\">\n                  <Trans>Allow up to 1% slippage</Trans>\n                </span>\n              </Checkbox>\n            </div>\n          )}\n          {renderAllowedSlippage(allowedSlippage)}\n          {showCollateralSpread && (\n            <ExchangeInfoRow label={t`Collateral Spread`} isWarning={collateralSpreadInfo.isHigh} isTop>\n              {formatAmount(collateralSpreadInfo.value.mul(100), USD_DECIMALS, 2, true)}%\n            </ExchangeInfoRow>\n          )}\n          {isMarketOrder && (\n            <ExchangeInfoRow label={t`Entry Price`}>\n              {hasExistingPosition && toAmount && toAmount.gt(0) && (\n                <div className=\"inline-block muted\">\n                  ${formatAmount(existingPosition.averagePrice, USD_DECIMALS, 2, true)}\n                  <BsArrowRight className=\"transition-arrow\" />\n                </div>\n              )}\n              {nextAveragePrice && `$${formatAmount(nextAveragePrice, USD_DECIMALS, 2, true)}`}\n              {!nextAveragePrice && `-`}\n            </ExchangeInfoRow>\n          )}\n          {!isMarketOrder && (\n            <ExchangeInfoRow label={t`Mark Price`} isTop={true}>\n              ${formatAmount(entryMarkPrice, USD_DECIMALS, 2, true)}\n            </ExchangeInfoRow>\n          )}\n          {!isMarketOrder && (\n            <ExchangeInfoRow label={t`Limit Price`}>\n              ${formatAmount(triggerPriceUsd, USD_DECIMALS, 2, true)}\n            </ExchangeInfoRow>\n          )}\n          <ExchangeInfoRow label={t`Liq. Price`}>\n            {hasExistingPosition && toAmount && toAmount.gt(0) && (\n              <div className=\"inline-block muted\">\n                ${formatAmount(existingLiquidationPrice, USD_DECIMALS, 2, true)}\n                <BsArrowRight className=\"transition-arrow\" />\n              </div>\n            )}\n            {toAmount && displayLiquidationPrice && `$${formatAmount(displayLiquidationPrice, USD_DECIMALS, 2, true)}`}\n            {!toAmount && displayLiquidationPrice && `-`}\n            {!displayLiquidationPrice && `-`}\n          </ExchangeInfoRow>\n          <ExchangeInfoRow label={t`Collateral (${collateralToken.symbol})`} isTop>\n            <Tooltip\n              handle={`$${formatAmount(collateralAfterFees, USD_DECIMALS, 2, true)}`}\n              position=\"right-top\"\n              renderContent={() => {\n                return (\n                  <>\n                    <Trans>Your position's collateral after deducting fees.</Trans>\n                    <br />\n                    <br />\n                    <StatsTooltipRow label={t`Pay Amount`} value={formatAmount(fromUsdMin, USD_DECIMALS, 2, true)} />\n                    <StatsTooltipRow label={t`Fees`} value={formatAmount(feesUsd, USD_DECIMALS, 2, true)} />\n                    <div className=\"Tooltip-divider\" />\n                    <StatsTooltipRow\n                      label={t`Collateral`}\n                      value={formatAmount(collateralAfterFees, USD_DECIMALS, 2, true)}\n                    />\n                  </>\n                );\n              }}\n            />\n          </ExchangeInfoRow>\n          <ExchangeInfoRow label={t`Fees`}>\n            <FeesTooltip\n              totalFees={currentExecutionFeeUsd.add(feesUsd)}\n              fundingFee={getFundingFee()}\n              executionFees={{\n                fee: currentExecutionFee,\n                feeUSD: currentExecutionFeeUsd,\n              }}\n              positionFee={positionFee}\n              swapFee={swapFees}\n            />\n          </ExchangeInfoRow>\n\n          {decreaseOrdersThatWillBeExecuted.length > 0 && (\n            <div className=\"PositionEditor-allow-higher-slippage\">\n              <Checkbox isChecked={isTriggerWarningAccepted} setIsChecked={setIsTriggerWarningAccepted}>\n                <span className=\"muted font-sm\">\n                  <Trans>I am aware of the trigger orders</Trans>\n                </span>\n              </Checkbox>\n            </div>\n          )}\n        </div>\n      </>\n    );\n  }, [\n    renderMain,\n    isShort,\n    isLong,\n    toTokenInfo,\n    nextAveragePrice,\n    toAmount,\n    hasExistingPosition,\n    existingPosition,\n    isMarketOrder,\n    triggerPriceUsd,\n    displayLiquidationPrice,\n    existingLiquidationPrice,\n    feesUsd,\n    leverage,\n    shortCollateralToken,\n    chainId,\n    renderFeeWarning,\n    hasPendingProfit,\n    isProfitWarningAccepted,\n    renderAvailableLiquidity,\n    orderOption,\n    fromUsdMin,\n    collateralAfterFees,\n    renderExistingOrderWarning,\n    renderExistingTriggerWarning,\n    renderExistingTriggerErrors,\n    isHigherSlippageAllowed,\n    setIsHigherSlippageAllowed,\n    isTriggerWarningAccepted,\n    decreaseOrdersThatWillBeExecuted,\n    minExecutionFeeErrorMessage,\n    collateralTokenAddress,\n    entryMarkPrice,\n    allowedSlippage,\n    positionFee,\n    swapFees,\n    currentExecutionFee,\n    currentExecutionFeeUsd,\n    renderCollateralSpreadWarning,\n    collateralSpreadInfo,\n    showCollateralSpread,\n  ]);\n\n  const renderSwapSection = useCallback(() => {\n    return (\n      <div>\n        {renderMain()}\n        {renderFeeWarning()}\n        {renderSwapSpreadWarning()}\n        {showSwapSpread && (\n          <ExchangeInfoRow label={t`Spread`} isWarning={spreadInfo.isHigh}>\n            {formatAmount(spreadInfo.value.mul(100), USD_DECIMALS, 2, true)}%\n          </ExchangeInfoRow>\n        )}\n        {orderOption === LIMIT && renderAvailableLiquidity()}\n        {renderAllowedSlippage(allowedSlippage)}\n        <ExchangeInfoRow label={t`Mark Price`} isTop>\n          {getExchangeRateDisplay(getExchangeRate(fromTokenInfo, toTokenInfo), fromTokenInfo, toTokenInfo)}\n        </ExchangeInfoRow>\n        {!isMarketOrder && (\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">\n              <Trans>Limit Price</Trans>\n            </div>\n            <div className=\"align-right\">{getExchangeRateDisplay(triggerRatio, fromTokenInfo, toTokenInfo)}</div>\n          </div>\n        )}\n\n        {fromTokenUsd && (\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">\n              <Trans>{fromTokenInfo.symbol} Price</Trans>\n            </div>\n            <div className=\"align-right\">{fromTokenUsd} USD</div>\n          </div>\n        )}\n        {toTokenUsd && (\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">\n              <Trans>{toTokenInfo.symbol} Price</Trans>\n            </div>\n            <div className=\"align-right\">{toTokenUsd} USD</div>\n          </div>\n        )}\n        <ExchangeInfoRow label={t`Fees`} isTop>\n          <FeesTooltip\n            totalFees={currentExecutionFeeUsd.add(feesUsd)}\n            executionFees={{\n              fee: currentExecutionFee,\n              feeUSD: currentExecutionFeeUsd,\n            }}\n            swapFee={feesUsd}\n          />\n        </ExchangeInfoRow>\n\n        <ExchangeInfoRow label={t`Min. Receive`} isTop>\n          {formatAmount(minOut, toTokenInfo.decimals, 4, true)} {toTokenInfo.symbol}\n        </ExchangeInfoRow>\n      </div>\n    );\n  }, [\n    renderMain,\n    renderSwapSpreadWarning,\n    fromTokenInfo,\n    toTokenInfo,\n    orderOption,\n    showSwapSpread,\n    spreadInfo,\n    feesUsd,\n    fromTokenUsd,\n    toTokenUsd,\n    triggerRatio,\n    isMarketOrder,\n    minOut,\n    renderFeeWarning,\n    renderAvailableLiquidity,\n    allowedSlippage,\n    currentExecutionFee,\n    currentExecutionFeeUsd,\n  ]);\n\n  return (\n    <div className=\"Confirmation-box\">\n      <Modal isVisible={true} setIsVisible={() => setIsConfirming(false)} label={title}>\n        {isSwap && renderSwapSection()}\n        {!isSwap && renderMarginSection()}\n        <div className=\"Confirmation-box-row\">\n          <Button\n            variant=\"primary-action\"\n            onClick={onConfirmationClick}\n            className=\"w-100 mt-sm\"\n            disabled={!isPrimaryEnabled()}\n          >\n            {getPrimaryText()}\n          </Button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Trans, t } from \"@lingui/macro\";\nimport Modal from \"../Modal/Modal\";\nimport Checkbox from \"../Checkbox/Checkbox\";\n\nimport \"./OrdersToa.css\";\nimport Button from \"components/Button/Button\";\n\nexport default function OrdersToa(props) {\n  const { setIsVisible, isPluginApproving, approveOrderBook } = props;\n\n  const [isChecked, setIsChecked] = useState(false);\n\n  const onConfirmationClick = () => {\n    approveOrderBook().then(() => {\n      setIsVisible(false);\n    });\n  };\n\n  const getPrimaryText = () => {\n    if (isPluginApproving) {\n      return t`Enabling Orders...`;\n    }\n    if (!isChecked) {\n      return t`Accept terms to enable orders`;\n    }\n    return t`Enable Orders`;\n  };\n\n  const isPrimaryEnabled = () => {\n    if (isPluginApproving) {\n      return false;\n    }\n    return isChecked;\n  };\n\n  return (\n    <Modal\n      setIsVisible={setIsVisible}\n      isVisible={true}\n      label={t`Enable Orders`}\n      className=\"Orders-toa Modal-scrollable\"\n      zIndex=\"1002\"\n    >\n      <Trans>\n        Note that orders are not guaranteed to be executed.\n        <br />\n        <br />\n        This can occur in a few situations including but not exclusive to:\n      </Trans>\n      <br />\n      <ul>\n        <Trans>\n          <li>Insufficient liquidity to execute the order</li>\n          <li>The mark price which is an aggregate of exchange prices did not reach the specified price</li>\n          <li>The specified price was reached but not long enough for it to be executed</li>\n          <li>No keeper picked up the order for execution</li>\n        </Trans>\n      </ul>\n      <div>\n        <Trans>\n          Additionally, trigger orders are market orders and are not guaranteed to settle at the trigger price.\n        </Trans>\n      </div>\n      <br />\n      <div className=\"Orders-toa-accept-rules\">\n        <Checkbox isChecked={isChecked} setIsChecked={setIsChecked}>\n          <span className=\"muted\">\n            <Trans>\n              Accept that orders are not guaranteed to execute and trigger orders may not settle at the trigger price\n            </Trans>\n          </span>\n        </Checkbox>\n      </div>\n      <Button\n        variant=\"primary-action\"\n        disabled={!isPrimaryEnabled()}\n        className=\"w-100 mt-md\"\n        onClick={onConfirmationClick}\n      >\n        {getPrimaryText()}\n      </Button>\n    </Modal>\n  );\n}\n","import {\n  isAddressZero,\n  USD_DECIMALS,\n  MAX_REFERRAL_CODE_LENGTH,\n  getTwitterIntentURL,\n  REFERRAL_CODE_QUERY_PARAM,\n} from \"lib/legacy\";\nimport { encodeReferralCode, getReferralCodeOwner } from \"domain/referrals\";\nimport { ARBITRUM, AVALANCHE } from \"config/chains\";\nimport { bigNumberify, formatAmount } from \"lib/numbers\";\nimport { t } from \"@lingui/macro\";\nimport { getRootUrl } from \"lib/url\";\n\nexport const REFERRAL_CODE_REGEX = /^\\w+$/; // only number, string and underscore is allowed\nexport const REGEX_VERIFY_BYTES32 = /^0x[0-9a-f]{64}$/;\n\nexport function isRecentReferralCodeNotExpired(referralCodeInfo) {\n  const REFERRAL_DATA_MAX_TIME = 60000 * 5; // 5 minutes\n  if (referralCodeInfo.time) {\n    return referralCodeInfo.time + REFERRAL_DATA_MAX_TIME > Date.now();\n  }\n}\n\nexport async function getReferralCodeTakenStatus(account, referralCode, chainId) {\n  const referralCodeBytes32 = encodeReferralCode(referralCode);\n  const [ownerArbitrum, ownerAvax] = await Promise.all([\n    getReferralCodeOwner(ARBITRUM, referralCodeBytes32),\n    getReferralCodeOwner(AVALANCHE, referralCodeBytes32),\n  ]);\n\n  const takenOnArb =\n    !isAddressZero(ownerArbitrum) && (ownerArbitrum !== account || (ownerArbitrum === account && chainId === ARBITRUM));\n  const takenOnAvax =\n    !isAddressZero(ownerAvax) && (ownerAvax !== account || (ownerAvax === account && chainId === AVALANCHE));\n\n  const referralCodeTakenInfo = {\n    [ARBITRUM]: takenOnArb,\n    [AVALANCHE]: takenOnAvax,\n    both: takenOnArb && takenOnAvax,\n    ownerArbitrum,\n    ownerAvax,\n  };\n\n  if (referralCodeTakenInfo.both) {\n    return { status: \"all\", info: referralCodeTakenInfo };\n  }\n  if (referralCodeTakenInfo[chainId]) {\n    return { status: \"current\", info: referralCodeTakenInfo };\n  }\n  if (chainId === AVALANCHE ? referralCodeTakenInfo[ARBITRUM] : referralCodeTakenInfo[AVALANCHE]) {\n    return { status: \"other\", info: referralCodeTakenInfo };\n  }\n  return { status: \"none\", info: referralCodeTakenInfo };\n}\n\nexport function getTierIdDisplay(tierId) {\n  return Number(tierId) + 1;\n}\n\nexport const tierRebateInfo = {\n  0: 5,\n  1: 10,\n  2: 15,\n};\n\nexport const tierDiscountInfo = {\n  0: 5,\n  1: 10,\n  2: 10,\n};\n\nfunction areObjectsWithSameKeys(obj1, obj2) {\n  return Object.keys(obj1).every((key) => key in obj2);\n}\n\nexport function deserializeSampleStats(input) {\n  const parsedData = JSON.parse(input);\n  if (!Array.isArray(parsedData)) return [];\n  return parsedData\n    .map((data) => {\n      if (!areObjectsWithSameKeys(getSampleReferrarStat(), data)) return null;\n      return Object.keys(data).reduce((acc, cv) => {\n        const currentValue = data[cv];\n        if (currentValue?.type === \"BigNumber\") {\n          acc[cv] = bigNumberify(currentValue.hex || 0);\n        } else {\n          acc[cv] = currentValue;\n        }\n        return acc;\n      }, {});\n    })\n    .filter(Boolean);\n}\n\nexport const getSampleReferrarStat = (code = \"\", ownerOnOtherNetwork = \"\", account = \"\") => {\n  return {\n    discountUsd: bigNumberify(0),\n    referralCode: code,\n    totalRebateUsd: bigNumberify(0),\n    tradedReferralsCount: 0,\n    registeredReferralsCount: 0,\n    trades: 0,\n    volume: bigNumberify(0),\n    time: Date.now(),\n    ownerOnOtherChain: {\n      code: encodeReferralCode(code),\n      codeString: code,\n      owner: undefined,\n      isTaken: !isAddressZero(ownerOnOtherNetwork),\n      isTakenByCurrentUser:\n        !isAddressZero(ownerOnOtherNetwork) && ownerOnOtherNetwork.toLowerCase() === account.toLowerCase(),\n    },\n  };\n};\n\nexport function getUSDValue(value, decimals = 2) {\n  return `$${formatAmount(value, USD_DECIMALS, decimals, true, \"0.00\")}`;\n}\n\nexport function getCodeError(value) {\n  const trimmedValue = value.trim();\n  if (!trimmedValue) return \"\";\n\n  if (trimmedValue.length > MAX_REFERRAL_CODE_LENGTH) {\n    return t`The referral code can't be more than ${MAX_REFERRAL_CODE_LENGTH} characters.`;\n  }\n\n  if (!REFERRAL_CODE_REGEX.test(trimmedValue)) {\n    return t`Only letters, numbers and underscores are allowed.`;\n  }\n  return \"\";\n}\n\nexport function getReferralCodeTradeUrl(referralCode) {\n  return `${getRootUrl()}/#/trade/?${REFERRAL_CODE_QUERY_PARAM}=${referralCode}`;\n}\n\nexport function getTwitterShareUrl(referralCode) {\n  const message = [\"Trying out trading on @GMX_IO, up to 50x leverage on $BTC, $ETH \", \"For fee discounts use:\"];\n  const shareURL = getReferralCodeTradeUrl(referralCode);\n\n  return getTwitterIntentURL(message, shareURL);\n}\n","export function getRootUrl() {\n  const { origin, protocol, hostname, port } = window.location;\n  let url = origin;\n  if (!origin) {\n    const portString = port && `:${port}`;\n    url = `${protocol}//${hostname}${portString}`;\n  }\n  return url;\n}\n","import { ethers } from \"ethers\";\nimport { gql } from \"@apollo/client\";\nimport { useState, useEffect, useMemo } from \"react\";\nimport useSWR from \"swr\";\n\nimport ReferralStorage from \"abis/ReferralStorage.json\";\nimport { MAX_REFERRAL_CODE_LENGTH, isAddressZero, isHashZero } from \"lib/legacy\";\nimport { getContract } from \"config/contracts\";\nimport { REGEX_VERIFY_BYTES32 } from \"components/Referrals/referralsHelper\";\nimport { ARBITRUM, AVALANCHE } from \"config/chains\";\nimport { arbitrumReferralsGraphClient, avalancheReferralsGraphClient } from \"lib/subgraph/clients\";\nimport { callContract, contractFetcher } from \"lib/contracts\";\nimport { helperToast } from \"lib/helperToast\";\nimport { REFERRAL_CODE_KEY } from \"config/localStorage\";\nimport { getProvider } from \"lib/rpc\";\nimport { bigNumberify } from \"lib/numbers\";\n\nconst ACTIVE_CHAINS = [ARBITRUM, AVALANCHE];\nconst DISTRIBUTION_TYPE_REBATES = \"1\";\nconst DISTRIBUTION_TYPE_DISCOUNT = \"2\";\n\nfunction getGraphClient(chainId) {\n  if (chainId === ARBITRUM) {\n    return arbitrumReferralsGraphClient;\n  } else if (chainId === AVALANCHE) {\n    return avalancheReferralsGraphClient;\n  }\n  throw new Error(`Unsupported chain ${chainId}`);\n}\n\nexport function decodeReferralCode(hexCode) {\n  try {\n    return ethers.utils.parseBytes32String(hexCode);\n  } catch (ex) {\n    let code = \"\";\n    hexCode = hexCode.substring(2);\n    for (let i = 0; i < 32; i++) {\n      code += String.fromCharCode(parseInt(hexCode.substring(i * 2, i * 2 + 2), 16));\n    }\n    return code.trim();\n  }\n}\n\nexport function encodeReferralCode(code) {\n  let final = code.replace(/[^\\w_]/g, \"\"); // replace everything other than numbers, string  and underscor to ''\n  if (final.length > MAX_REFERRAL_CODE_LENGTH) {\n    return ethers.constants.HashZero;\n  }\n  return ethers.utils.formatBytes32String(final);\n}\n\nasync function getCodeOwnersData(network, account, codes = []) {\n  if (codes.length === 0 || !account || !network) {\n    return undefined;\n  }\n  const query = gql`\n    query allCodes($codes: [String!]!) {\n      referralCodes(where: { code_in: $codes }) {\n        owner\n        id\n      }\n    }\n  `;\n  return getGraphClient(network)\n    .query({ query, variables: { codes } })\n    .then(({ data }) => {\n      const { referralCodes } = data;\n      const codeOwners = referralCodes.reduce((acc, cv) => {\n        acc[cv.id] = cv.owner;\n        return acc;\n      }, {});\n      return codes.map((code) => {\n        const owner = codeOwners[code];\n        return {\n          code,\n          codeString: decodeReferralCode(code),\n          owner,\n          isTaken: Boolean(owner),\n          isTakenByCurrentUser: owner && owner.toLowerCase() === account.toLowerCase(),\n        };\n      });\n    });\n}\n\nexport function useUserCodesOnAllChain(account) {\n  const [data, setData] = useState<any>(null);\n  const query = gql`\n    query referralCodesOnAllChain($account: String!) {\n      referralCodes(first: 1000, where: { owner: $account }) {\n        code\n      }\n    }\n  `;\n  useEffect(() => {\n    async function main() {\n      const [arbitrumCodes, avalancheCodes] = await Promise.all(\n        ACTIVE_CHAINS.map((chainId) => {\n          return getGraphClient(chainId)\n            .query({ query, variables: { account: (account || \"\").toLowerCase() } })\n            .then(({ data }) => {\n              return data.referralCodes.map((c) => c.code);\n            });\n        })\n      );\n      const [codeOwnersOnAvax = [], codeOwnersOnArbitrum = []] = await Promise.all([\n        getCodeOwnersData(AVALANCHE, account, arbitrumCodes),\n        getCodeOwnersData(ARBITRUM, account, avalancheCodes),\n      ]);\n\n      setData({\n        [ARBITRUM]: codeOwnersOnAvax.reduce((acc, cv) => {\n          acc[cv.code] = cv;\n          return acc;\n        }, {} as any),\n        [AVALANCHE]: codeOwnersOnArbitrum.reduce((acc, cv) => {\n          acc[cv.code] = cv;\n          return acc;\n        }, {} as any),\n      });\n    }\n\n    main();\n  }, [account, query]);\n  return data;\n}\n\nexport function useReferralsData(chainId, account) {\n  const [data, setData] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n  const ownerOnOtherChain = useUserCodesOnAllChain(account);\n  useEffect(() => {\n    if (!chainId || !account) {\n      setLoading(false);\n      return;\n    }\n    const startOfDayTimestamp = Math.floor(Math.floor(Date.now() / 1000) / 86400) * 86400;\n\n    const query = gql`\n      query referralData($typeIds: [String!]!, $account: String!, $timestamp: Int!, $referralTotalStatsId: String!) {\n        distributions(\n          first: 1000\n          orderBy: timestamp\n          orderDirection: desc\n          where: { receiver: $account, typeId_in: $typeIds }\n        ) {\n          receiver\n          amount\n          typeId\n          token\n          transactionHash\n          timestamp\n        }\n        referrerTotalStats: referrerStats(\n          first: 1000\n          orderBy: volume\n          orderDirection: desc\n          where: { period: total, referrer: $account }\n        ) {\n          referralCode\n          volume\n          trades\n          tradedReferralsCount\n          registeredReferralsCount\n          totalRebateUsd\n          discountUsd\n        }\n        referrerLastDayStats: referrerStats(\n          first: 1000\n          where: { period: daily, referrer: $account, timestamp: $timestamp }\n        ) {\n          referralCode\n          volume\n          trades\n          tradedReferralsCount\n          registeredReferralsCount\n          totalRebateUsd\n          discountUsd\n        }\n        referralCodes(first: 1000, where: { owner: $account }) {\n          code\n        }\n        referralTotalStats: referralStat(id: $referralTotalStatsId) {\n          volume\n          discountUsd\n        }\n        referrerTierInfo: referrer(id: $account) {\n          tierId\n          id\n          discountShare\n        }\n      }\n    `;\n    setLoading(true);\n\n    getGraphClient(chainId)\n      .query({\n        query,\n        variables: {\n          typeIds: [DISTRIBUTION_TYPE_REBATES, DISTRIBUTION_TYPE_DISCOUNT],\n          account: (account || \"\").toLowerCase(),\n          timestamp: startOfDayTimestamp,\n          referralTotalStatsId: account && `total:0:${account.toLowerCase()}`,\n        },\n      })\n      .then((res) => {\n        const rebateDistributions: any[] = [];\n        const discountDistributions: any[] = [];\n        res.data.distributions.forEach((d) => {\n          const item = {\n            timestamp: parseInt(d.timestamp),\n            transactionHash: d.transactionHash,\n            receiver: ethers.utils.getAddress(d.receiver),\n            amount: bigNumberify(d.amount),\n            typeId: d.typeId,\n            token: ethers.utils.getAddress(d.token),\n          };\n          if (d.typeId === DISTRIBUTION_TYPE_REBATES) {\n            rebateDistributions.push(item);\n          } else {\n            discountDistributions.push(item);\n          }\n        });\n\n        function prepareStatsItem(e) {\n          return {\n            volume: bigNumberify(e.volume),\n            trades: parseInt(e.trades),\n            tradedReferralsCount: parseInt(e.tradedReferralsCount),\n            registeredReferralsCount: parseInt(e.registeredReferralsCount),\n            totalRebateUsd: bigNumberify(e.totalRebateUsd),\n            discountUsd: bigNumberify(e.discountUsd),\n            referralCode: decodeReferralCode(e.referralCode),\n            ownerOnOtherChain: ownerOnOtherChain?.[chainId][e.referralCode],\n          };\n        }\n\n        function getCumulativeStats(data: any[] = []) {\n          return data.reduce(\n            (acc, cv) => {\n              acc.totalRebateUsd = acc.totalRebateUsd.add(cv.totalRebateUsd);\n              acc.volume = acc.volume.add(cv.volume);\n              acc.discountUsd = acc.discountUsd.add(cv.discountUsd);\n              acc.trades = acc.trades + cv.trades;\n              acc.tradedReferralsCount = acc.tradedReferralsCount + cv.tradedReferralsCount;\n              acc.registeredReferralsCount = acc.registeredReferralsCount + cv.registeredReferralsCount;\n              return acc;\n            },\n            {\n              totalRebateUsd: bigNumberify(0),\n              volume: bigNumberify(0),\n              discountUsd: bigNumberify(0),\n              trades: 0,\n              tradedReferralsCount: 0,\n              registeredReferralsCount: 0,\n            } as any\n          );\n        }\n\n        let referrerTotalStats = res.data.referrerTotalStats.map(prepareStatsItem);\n        setData({\n          rebateDistributions,\n          discountDistributions,\n          referrerTotalStats,\n          referrerTierInfo: res.data.referrerTierInfo,\n          referrerLastDayStats: res.data.referrerLastDayStats.map(prepareStatsItem),\n          cumulativeStats: getCumulativeStats(referrerTotalStats),\n          codes: res.data.referralCodes.map((e) => decodeReferralCode(e.code)),\n          referralTotalStats: res.data.referralTotalStats\n            ? {\n                volume: bigNumberify(res.data.referralTotalStats.volume),\n                discountUsd: bigNumberify(res.data.referralTotalStats.discountUsd),\n              }\n            : {\n                volume: bigNumberify(0),\n                discountUsd: bigNumberify(0),\n              },\n        });\n      })\n      // eslint-disable-next-line no-console\n      .catch(console.warn)\n      .finally(() => {\n        setLoading(false);\n      });\n  }, [setData, chainId, account, ownerOnOtherChain]);\n\n  return {\n    data: data || null,\n    loading,\n  };\n}\n\nexport async function registerReferralCode(chainId, referralCode, library, opts) {\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\n  const referralCodeHex = encodeReferralCode(referralCode);\n  const contract = new ethers.Contract(referralStorageAddress, ReferralStorage.abi, library.getSigner());\n  return callContract(chainId, contract, \"registerCode\", [referralCodeHex], opts);\n}\n\nexport async function setTraderReferralCodeByUser(chainId, referralCode, library, opts) {\n  const referralCodeHex = encodeReferralCode(referralCode);\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\n  const contract = new ethers.Contract(referralStorageAddress, ReferralStorage.abi, library.getSigner());\n  const codeOwner = await contract.codeOwners(referralCodeHex);\n  if (isAddressZero(codeOwner)) {\n    const errorMsg = \"Referral code does not exist\";\n    helperToast.error(errorMsg);\n    return Promise.reject(errorMsg);\n  }\n  return callContract(chainId, contract, \"setTraderReferralCodeByUser\", [referralCodeHex], opts);\n}\n\nexport async function getReferralCodeOwner(chainId, referralCode) {\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\n  const provider = getProvider(undefined, chainId);\n  const contract = new ethers.Contract(referralStorageAddress, ReferralStorage.abi, provider);\n  const codeOwner = await contract.codeOwners(referralCode);\n  return codeOwner;\n}\n\nexport function useUserReferralCode(library, chainId, account) {\n  const localStorageCode = window.localStorage.getItem(REFERRAL_CODE_KEY);\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\n  const { data: onChainCode } = useSWR(\n    account && [\"ReferralStorage\", chainId, referralStorageAddress, \"traderReferralCodes\", account],\n    { fetcher: contractFetcher(library, ReferralStorage) }\n  );\n\n  const { data: localStorageCodeOwner } = useSWR(\n    localStorageCode && REGEX_VERIFY_BYTES32.test(localStorageCode)\n      ? [\"ReferralStorage\", chainId, referralStorageAddress, \"codeOwners\", localStorageCode]\n      : null,\n    { fetcher: contractFetcher(library, ReferralStorage) }\n  );\n\n  const [attachedOnChain, userReferralCode, userReferralCodeString] = useMemo(() => {\n    if (onChainCode && !isHashZero(onChainCode)) {\n      return [true, onChainCode, decodeReferralCode(onChainCode)];\n    } else if (localStorageCodeOwner && !isAddressZero(localStorageCodeOwner)) {\n      return [false, localStorageCode, decodeReferralCode(localStorageCode)];\n    }\n    return [false];\n  }, [localStorageCode, localStorageCodeOwner, onChainCode]);\n\n  return {\n    userReferralCode,\n    userReferralCodeString,\n    attachedOnChain,\n  };\n}\n\nexport function useReferrerTier(library, chainId, account) {\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\n  const { data: referrerTier, mutate: mutateReferrerTier } = useSWR(\n    account && [`ReferralStorage:referrerTiers`, chainId, referralStorageAddress, \"referrerTiers\", account],\n    {\n      fetcher: contractFetcher(library, ReferralStorage),\n    }\n  );\n  return {\n    referrerTier,\n    mutateReferrerTier,\n  };\n}\n\nexport function useCodeOwner(library, chainId, account, code) {\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\n  const { data: codeOwner, mutate: mutateCodeOwner } = useSWR(\n    account && code && [`ReferralStorage:codeOwners`, chainId, referralStorageAddress, \"codeOwners\", code],\n    {\n      fetcher: contractFetcher(library, ReferralStorage),\n    }\n  );\n  return {\n    codeOwner,\n    mutateCodeOwner,\n  };\n}\n\nexport async function validateReferralCodeExists(referralCode, chainId) {\n  const referralCodeBytes32 = encodeReferralCode(referralCode);\n  const referralCodeOwner = await getReferralCodeOwner(chainId, referralCodeBytes32);\n  return !isAddressZero(referralCodeOwner);\n}\n\nexport function useAffiliateCodes(chainId, account) {\n  const [affiliateCodes, setAffiliateCodes] = useState({ code: null, success: false });\n  const query = gql`\n    query userReferralCodes($account: String!) {\n      referrerTotalStats: referrerStats(\n        first: 1000\n        orderBy: volume\n        orderDirection: desc\n        where: { period: total, referrer: $account }\n      ) {\n        referralCode\n      }\n    }\n  `;\n  useEffect(() => {\n    if (!chainId) return;\n    getGraphClient(chainId)\n      .query({ query, variables: { account: account?.toLowerCase() } })\n      .then((res) => {\n        const parsedAffiliateCodes = res?.data?.referrerTotalStats.map((c) => decodeReferralCode(c?.referralCode));\n        setAffiliateCodes({ code: parsedAffiliateCodes[0], success: true });\n      });\n    return () => {\n      setAffiliateCodes({ code: null, success: false });\n    };\n  }, [chainId, query, account]);\n  return affiliateCodes;\n}\n","import { ARBITRUM, AVALANCHE } from \"config/chains\";\nimport { TOKENS_BY_SYMBOL_MAP } from \"./tokens\";\n\nconst oneInchTokensMap = {\n  [ARBITRUM]: {\n    BTC: \"WBTC\",\n  },\n  [AVALANCHE]: {\n    BTC: \"BTC.b\",\n    ETH: \"WETH.e\",\n    WBTC: \"WBTC.e\",\n  },\n};\n\nexport function get1InchSwapUrl(chainId: number, from?: string, to?: string) {\n  const rootUrl = `https://app.1inch.io/#/${chainId}/simple/swap`;\n  const chainTokensMap = TOKENS_BY_SYMBOL_MAP[chainId];\n  const isInvalidInput = !from || !to || !chainTokensMap[from] || !chainTokensMap[to];\n  if (isInvalidInput) {\n    return rootUrl;\n  }\n  const fromToken = oneInchTokensMap[chainId]?.[from] || from;\n  const toToken = oneInchTokensMap[chainId]?.[to] || to;\n  return `${rootUrl}/${fromToken}/${toToken}`;\n}\n\nexport function getLeaderboardLink(chainId) {\n  if (chainId === ARBITRUM) {\n    return \"https://www.gmx.house/arbitrum/leaderboard\";\n  }\n  if (chainId === AVALANCHE) {\n    return \"https://www.gmx.house/avalanche/leaderboard\";\n  }\n  return \"https://www.gmx.house\";\n}\n","import { ethers } from \"ethers\";\nimport Modal from \"../Modal/Modal\";\nimport { get1InchSwapUrl } from \"config/links\";\nimport { Token, TokenInfo } from \"domain/tokens\";\nimport { getNativeToken } from \"config/tokens\";\nimport { t, Trans } from \"@lingui/macro\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nconst { AddressZero } = ethers.constants;\n\ntype Props = {\n  chainId: number;\n  modalError: string;\n  isShort: boolean;\n  isLong: boolean;\n  fromToken: Token;\n  toToken: Token;\n  shortCollateralToken: TokenInfo;\n  setModalError: () => void;\n};\n\nexport default function NoLiquidityErrorModal({\n  chainId,\n  fromToken,\n  toToken,\n  shortCollateralToken,\n  isLong,\n  isShort,\n  modalError,\n  setModalError,\n}: Props) {\n  const nativeToken = getNativeToken(chainId);\n  const inputCurrency = fromToken.address === AddressZero ? nativeToken.symbol : fromToken.address;\n  let outputCurrency;\n  if (isLong) {\n    outputCurrency = toToken.address === AddressZero ? nativeToken.symbol : toToken.address;\n  } else {\n    outputCurrency = shortCollateralToken.address;\n  }\n  const swapTokenSymbol = isLong ? toToken.symbol : shortCollateralToken.symbol;\n  const oneInchSwapUrl = get1InchSwapUrl(chainId, inputCurrency, outputCurrency);\n  const label =\n    modalError === \"BUFFER\" ? t`${shortCollateralToken.symbol} Required` : t`${fromToken.symbol} Pool Capacity Reached`;\n\n  return (\n    <Modal isVisible={Boolean(modalError)} setIsVisible={setModalError} label={label} className=\"Error-modal font-base\">\n      <div>\n        <Trans>\n          You need to select {swapTokenSymbol} as the \"Pay\" token to use it for collateral to initiate this trade.\n        </Trans>\n      </div>\n      <br />\n      <div>\n        <Trans>\n          As there is not enough liquidity in GLP to swap {fromToken.symbol} to {swapTokenSymbol}, you can use the\n          option below to do so:\n        </Trans>\n      </div>\n      <br />\n\n      <ExternalLink href={oneInchSwapUrl}>\n        <Trans>Buy {swapTokenSymbol} on 1inch</Trans>\n      </ExternalLink>\n\n      {isShort && (\n        <div>\n          <br />\n          <Trans>Alternatively, you can select a different \"Collateral In\" token.</Trans>\n          <br />\n        </div>\n      )}\n    </Modal>\n  );\n}\n","export enum ErrorCode {\n  InsufficientLiquiditySwap = \"INSUFFICIENT_LIQUIDITY_SWAP\",\n  InsufficientLiquidityLeverage = \"INSUFFICIENT_LIQUIDITY_LEVERAGE\",\n  InsufficientCollateralIn = \"INSUFFICIENT_COLLATERAL_IN\",\n  InsufficientProfitLiquidity = \"INSUFFICIENT_PROFIT_LIQUIDITY\",\n  InsufficientReceiveToken = \"INSUFFICIENT_RECEIVE_TOKEN\",\n  ReceiveCollateralTokenOnly = \"RECEIVE_COLLATERAL_TOKEN_ONLY\",\n  TokenPoolExceeded = \"TOKEN_POOL_EXCEEDED\",\n  TokenPoolExceededShorts = \"TOKEN_POOL_EXCEEDED_SHORTS\",\n  Buffer = \"BUFFER\",\n  MaxUSDG = \"MAX_USDG\",\n  InvalidLiqPrice = \"INVALID_LIQ_PRICE\",\n}\n\nexport enum ErrorDisplayType {\n  Modal = \"MODAL\",\n  Tooltip = \"TOOLTIP\",\n}\n","import { useEffect, useRef } from \"react\";\n\nexport function usePrevious(value: any) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n","import { Trans } from \"@lingui/macro\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport { getLeaderboardLink } from \"config/links\";\nimport cx from \"classnames\";\nimport { useChainId } from \"lib/chains\";\n\nexport default function UsefulLinks({ className }) {\n  const { chainId } = useChainId();\n  const leaderBoardLink = getLeaderboardLink(chainId);\n  const classNames = cx(\"Exchange-swap-market-box App-box App-box-border\", className);\n  return (\n    <div className={classNames}>\n      <div className=\"Exchange-swap-market-box-title\">\n        <Trans>Useful Links</Trans>\n      </div>\n      <div className=\"App-card-divider\"></div>\n      <div className=\"Exchange-info-row\">\n        <div className=\"Exchange-info-label-button\">\n          <ExternalLink href=\"https://gmxio.gitbook.io/gmx/trading\">\n            <Trans>Trading guide</Trans>\n          </ExternalLink>\n        </div>\n      </div>\n      <div className=\"Exchange-info-row\">\n        <div className=\"Exchange-info-label-button\">\n          <ExternalLink href={leaderBoardLink}>\n            <Trans>Leaderboard</Trans>\n          </ExternalLink>\n        </div>\n      </div>\n      <div className=\"Exchange-info-row\">\n        <div className=\"Exchange-info-label-button\">\n          <ExternalLink href=\"https://gmxio.gitbook.io/gmx/trading#backup-rpc-urls\">\n            <Trans>Speed up page loading</Trans>\n          </ExternalLink>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect, useMemo, useState } from \"react\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport { t, Trans } from \"@lingui/macro\";\nimport Slider, { SliderTooltip } from \"rc-slider\";\nimport \"rc-slider/assets/index.css\";\nimport \"./SwapBox.css\";\n\nimport cx from \"classnames\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\n\nimport { IoMdSwap } from \"react-icons/io\";\nimport { BsArrowRight } from \"react-icons/bs\";\n\nimport {\n  adjustForDecimals,\n  BASIS_POINTS_DIVISOR,\n  calculatePositionDelta,\n  DEFAULT_HIGHER_SLIPPAGE_AMOUNT,\n  DUST_BNB,\n  getExchangeRate,\n  getExchangeRateDisplay,\n  getLeverage,\n  getLiquidationPrice,\n  getNextFromAmount,\n  getNextToAmount,\n  getPositionKey,\n  isTriggerRatioInverted,\n  LEVERAGE_ORDER_OPTIONS,\n  LIMIT,\n  LONG,\n  MARGIN_FEE_BASIS_POINTS,\n  MARKET,\n  PRECISION,\n  SHORT,\n  STOP,\n  SWAP,\n  SWAP_OPTIONS,\n  SWAP_ORDER_OPTIONS,\n  USD_DECIMALS,\n  USDG_ADDRESS,\n  USDG_DECIMALS,\n  MAX_ALLOWED_LEVERAGE,\n} from \"lib/legacy\";\nimport { ARBITRUM, getChainName, getConstant, IS_NETWORK_DISABLED, isSupportedChain } from \"config/chains\";\nimport * as Api from \"domain/legacy\";\nimport { getContract } from \"config/contracts\";\n\nimport Checkbox from \"../Checkbox/Checkbox\";\nimport Tab from \"../Tab/Tab\";\nimport TokenSelector from \"components/TokenSelector/TokenSelector\";\nimport ExchangeInfoRow from \"./ExchangeInfoRow\";\nimport ConfirmationBox from \"./ConfirmationBox\";\nimport OrdersToa from \"./OrdersToa\";\n\nimport PositionRouter from \"abis/PositionRouter.json\";\nimport Router from \"abis/Router.json\";\nimport Token from \"abis/Token.json\";\nimport WETH from \"abis/WETH.json\";\n\nimport longImg from \"img/long.svg\";\nimport shortImg from \"img/short.svg\";\nimport swapImg from \"img/swap.svg\";\n\nimport { useUserReferralCode } from \"domain/referrals\";\nimport NoLiquidityErrorModal from \"./NoLiquidityErrorModal\";\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\nimport { callContract, contractFetcher } from \"lib/contracts\";\nimport {\n  approveTokens,\n  getMostAbundantStableToken,\n  replaceNativeTokenAddress,\n  shouldRaiseGasError,\n} from \"domain/tokens\";\nimport { useLocalStorageByChainId, useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport { helperToast } from \"lib/helperToast\";\nimport { getTokenInfo, getUsd } from \"domain/tokens/utils\";\nimport { usePrevious } from \"lib/usePrevious\";\nimport { bigNumberify, expandDecimals, formatAmount, formatAmountFree, parseValue } from \"lib/numbers\";\nimport { getToken, getTokenBySymbol, getTokens, getWhitelistedTokens } from \"config/tokens\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport { ErrorCode, ErrorDisplayType } from \"./constants\";\nimport Button from \"components/Button/Button\";\nimport UsefulLinks from \"./UsefulLinks\";\nimport { get1InchSwapUrl } from \"config/links\";\n\nconst SWAP_ICONS = {\n  [LONG]: longImg,\n  [SHORT]: shortImg,\n  [SWAP]: swapImg,\n};\n\nconst { AddressZero } = ethers.constants;\n\nconst leverageSliderHandle = (props) => {\n  const { value, dragging, index, ...restProps } = props;\n  return (\n    <SliderTooltip\n      prefixCls=\"rc-slider-tooltip\"\n      overlay={`${parseFloat(value).toFixed(2)}x`}\n      visible={dragging}\n      placement=\"top\"\n      key={index}\n    >\n      <Slider.Handle value={value} {...restProps} />\n    </SliderTooltip>\n  );\n};\n\nfunction getNextAveragePrice({ size, sizeDelta, hasProfit, delta, nextPrice, isLong }) {\n  if (!size || !sizeDelta || !delta || !nextPrice) {\n    return;\n  }\n  const nextSize = size.add(sizeDelta);\n  let divisor;\n  if (isLong) {\n    divisor = hasProfit ? nextSize.add(delta) : nextSize.sub(delta);\n  } else {\n    divisor = hasProfit ? nextSize.sub(delta) : nextSize.add(delta);\n  }\n  if (!divisor || divisor.eq(0)) {\n    return;\n  }\n  const nextAveragePrice = nextPrice.mul(nextSize).div(divisor);\n  return nextAveragePrice;\n}\n\nexport default function SwapBox(props) {\n  const {\n    pendingPositions,\n    setPendingPositions,\n    infoTokens,\n    active,\n    library,\n    account,\n    fromTokenAddress,\n    setFromTokenAddress,\n    toTokenAddress,\n    setToTokenAddress,\n    swapOption,\n    setSwapOption,\n    positionsMap,\n    pendingTxns,\n    setPendingTxns,\n    tokenSelection,\n    setTokenSelection,\n    setIsConfirming,\n    isConfirming,\n    isPendingConfirmation,\n    setIsPendingConfirmation,\n    flagOrdersEnabled,\n    chainId,\n    nativeTokenAddress,\n    savedSlippageAmount,\n    totalTokenWeights,\n    usdgSupply,\n    orders,\n    savedIsPnlInLeverage,\n    orderBookApproved,\n    positionRouterApproved,\n    isWaitingForPluginApproval,\n    approveOrderBook,\n    approvePositionRouter,\n    setIsWaitingForPluginApproval,\n    isWaitingForPositionRouterApproval,\n    setIsWaitingForPositionRouterApproval,\n    isPluginApproving,\n    isPositionRouterApproving,\n    savedShouldDisableValidationForTesting,\n    minExecutionFee,\n    minExecutionFeeUSD,\n    minExecutionFeeErrorMessage,\n  } = props;\n\n  const [fromValue, setFromValue] = useState(\"\");\n  const [toValue, setToValue] = useState(\"\");\n  const [anchorOnFromAmount, setAnchorOnFromAmount] = useState(true);\n  const [isApproving, setIsApproving] = useState(false);\n  const [isWaitingForApproval, setIsWaitingForApproval] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [modalError, setModalError] = useState(false);\n  const [isHigherSlippageAllowed, setIsHigherSlippageAllowed] = useState(false);\n  const { attachedOnChain, userReferralCode } = useUserReferralCode(library, chainId, account);\n\n  let allowedSlippage = savedSlippageAmount;\n  if (isHigherSlippageAllowed) {\n    allowedSlippage = DEFAULT_HIGHER_SLIPPAGE_AMOUNT;\n  }\n\n  const defaultCollateralSymbol = getConstant(chainId, \"defaultCollateralSymbol\");\n  // TODO hack with useLocalStorageSerializeKey\n  const [shortCollateralAddress, setShortCollateralAddress] = useLocalStorageByChainId(\n    chainId,\n    \"Short-Collateral-Address\",\n    getTokenBySymbol(chainId, defaultCollateralSymbol).address\n  );\n  const isLong = swapOption === LONG;\n  const isShort = swapOption === SHORT;\n  const isSwap = swapOption === SWAP;\n\n  function getTokenLabel() {\n    switch (true) {\n      case isLong:\n        return t`Long`;\n      case isShort:\n        return t`Short`;\n      case isSwap:\n        return t`Receive`;\n      default:\n        return \"\";\n    }\n  }\n  const [leverageOption, setLeverageOption] = useLocalStorageSerializeKey(\n    [chainId, \"Exchange-swap-leverage-option\"],\n    \"2\"\n  );\n  const [isLeverageSliderEnabled, setIsLeverageSliderEnabled] = useLocalStorageSerializeKey(\n    [chainId, \"Exchange-swap-leverage-slider-enabled\"],\n    true\n  );\n\n  const hasLeverageOption = isLeverageSliderEnabled && !isNaN(parseFloat(leverageOption));\n\n  const [ordersToaOpen, setOrdersToaOpen] = useState(false);\n\n  let [orderOption, setOrderOption] = useLocalStorageSerializeKey([chainId, \"Order-option\"], MARKET);\n  if (!flagOrdersEnabled) {\n    orderOption = MARKET;\n  }\n\n  const onOrderOptionChange = (option) => {\n    setOrderOption(option);\n  };\n\n  const isMarketOrder = orderOption === MARKET;\n  const orderOptions = isSwap ? SWAP_ORDER_OPTIONS : LEVERAGE_ORDER_OPTIONS;\n  const orderOptionLabels = { [STOP]: t`Trigger`, [MARKET]: t`Market`, [LIMIT]: t`Limit` };\n\n  const [triggerPriceValue, setTriggerPriceValue] = useState(\"\");\n  const triggerPriceUsd = isMarketOrder ? 0 : parseValue(triggerPriceValue, USD_DECIMALS);\n\n  const onTriggerPriceChange = (evt) => {\n    setTriggerPriceValue(evt.target.value || \"\");\n  };\n\n  const onTriggerRatioChange = (evt) => {\n    setTriggerRatioValue(evt.target.value || \"\");\n  };\n\n  let positionKey;\n  if (isLong) {\n    positionKey = getPositionKey(account, toTokenAddress, toTokenAddress, true, nativeTokenAddress);\n  }\n  if (isShort) {\n    positionKey = getPositionKey(account, shortCollateralAddress, toTokenAddress, false, nativeTokenAddress);\n  }\n\n  const existingPosition = positionKey ? positionsMap[positionKey] : undefined;\n  const hasExistingPosition = existingPosition && existingPosition.size && existingPosition.size.gt(0);\n\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const tokens = getTokens(chainId);\n  const fromTokens = tokens;\n  const stableTokens = tokens.filter((token) => token.isStable);\n  const indexTokens = whitelistedTokens.filter((token) => !token.isStable && !token.isWrapped);\n  const shortableTokens = indexTokens.filter((token) => token.isShortable);\n\n  let toTokens = tokens;\n  if (isLong) {\n    toTokens = indexTokens;\n  }\n  if (isShort) {\n    toTokens = shortableTokens;\n  }\n\n  const needOrderBookApproval = !isMarketOrder && !orderBookApproved;\n  const prevNeedOrderBookApproval = usePrevious(needOrderBookApproval);\n\n  const needPositionRouterApproval = (isLong || isShort) && isMarketOrder && !positionRouterApproved;\n  const prevNeedPositionRouterApproval = usePrevious(needPositionRouterApproval);\n\n  useEffect(() => {\n    if (!needOrderBookApproval && prevNeedOrderBookApproval && isWaitingForPluginApproval) {\n      setIsWaitingForPluginApproval(false);\n      helperToast.success(<div>Orders enabled!</div>);\n    }\n  }, [needOrderBookApproval, prevNeedOrderBookApproval, setIsWaitingForPluginApproval, isWaitingForPluginApproval]);\n\n  useEffect(() => {\n    if (!needPositionRouterApproval && prevNeedPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      setIsWaitingForPositionRouterApproval(false);\n      helperToast.success(<div>Leverage enabled!</div>);\n    }\n  }, [\n    needPositionRouterApproval,\n    prevNeedPositionRouterApproval,\n    setIsWaitingForPositionRouterApproval,\n    isWaitingForPositionRouterApproval,\n  ]);\n\n  useEffect(() => {\n    if (!needOrderBookApproval && prevNeedOrderBookApproval && isWaitingForPluginApproval) {\n      setIsWaitingForPluginApproval(false);\n      helperToast.success(<div>Orders enabled!</div>);\n    }\n  }, [needOrderBookApproval, prevNeedOrderBookApproval, setIsWaitingForPluginApproval, isWaitingForPluginApproval]);\n\n  const routerAddress = getContract(chainId, \"Router\");\n  const tokenAllowanceAddress = fromTokenAddress === AddressZero ? nativeTokenAddress : fromTokenAddress;\n  const { data: tokenAllowance } = useSWR(\n    active && [active, chainId, tokenAllowanceAddress, \"allowance\", account, routerAddress],\n    {\n      fetcher: contractFetcher(library, Token),\n    }\n  );\n\n  const { data: hasOutdatedUi } = Api.useHasOutdatedUi();\n\n  const fromToken = getToken(chainId, fromTokenAddress);\n  const toToken = getToken(chainId, toTokenAddress);\n  const shortCollateralToken = getTokenInfo(infoTokens, shortCollateralAddress);\n\n  const fromTokenInfo = getTokenInfo(infoTokens, fromTokenAddress);\n  const toTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\n\n  const renderAvailableLongLiquidity = () => {\n    if (!isLong) {\n      return null;\n    }\n\n    return (\n      <div className=\"Exchange-info-row\">\n        <div className=\"Exchange-info-label\">\n          <Trans>Available Liquidity</Trans>\n        </div>\n        <div className=\"align-right\">\n          <Tooltip\n            handle={`$${formatAmount(toTokenInfo.maxAvailableLong, USD_DECIMALS, 2, true)}`}\n            position=\"right-bottom\"\n            renderContent={() => {\n              return (\n                <>\n                  <StatsTooltipRow\n                    label={t`Max ${toTokenInfo.symbol} long capacity`}\n                    value={formatAmount(toTokenInfo.maxLongCapacity, USD_DECIMALS, 0, true)}\n                  />\n                  <StatsTooltipRow\n                    label={t`Current ${toTokenInfo.symbol} long`}\n                    value={formatAmount(toTokenInfo.guaranteedUsd, USD_DECIMALS, 0, true)}\n                  />\n                </>\n              );\n            }}\n          ></Tooltip>\n        </div>\n      </div>\n    );\n  };\n\n  const fromBalance = fromTokenInfo ? fromTokenInfo.balance : bigNumberify(0);\n  const toBalance = toTokenInfo ? toTokenInfo.balance : bigNumberify(0);\n\n  const fromAmount = parseValue(fromValue, fromToken && fromToken.decimals);\n  const toAmount = parseValue(toValue, toToken && toToken.decimals);\n\n  const isPotentialWrap = (fromToken.isNative && toToken.isWrapped) || (fromToken.isWrapped && toToken.isNative);\n  const isWrapOrUnwrap = isSwap && isPotentialWrap;\n  const needApproval =\n    fromTokenAddress !== AddressZero &&\n    tokenAllowance &&\n    fromAmount &&\n    fromAmount.gt(tokenAllowance) &&\n    !isWrapOrUnwrap;\n  const prevFromTokenAddress = usePrevious(fromTokenAddress);\n  const prevNeedApproval = usePrevious(needApproval);\n  const prevToTokenAddress = usePrevious(toTokenAddress);\n\n  const fromUsdMin = getUsd(fromAmount, fromTokenAddress, false, infoTokens);\n  const toUsdMax = getUsd(toAmount, toTokenAddress, true, infoTokens, orderOption, triggerPriceUsd);\n\n  const indexTokenAddress = toTokenAddress === AddressZero ? nativeTokenAddress : toTokenAddress;\n  const collateralTokenAddress = isLong ? indexTokenAddress : shortCollateralAddress;\n  const collateralToken = getToken(chainId, collateralTokenAddress);\n\n  const [triggerRatioValue, setTriggerRatioValue] = useState(\"\");\n\n  const triggerRatioInverted = useMemo(() => {\n    return isTriggerRatioInverted(fromTokenInfo, toTokenInfo);\n  }, [toTokenInfo, fromTokenInfo]);\n\n  const maxToTokenOut = useMemo(() => {\n    const value = toTokenInfo.availableAmount?.gt(toTokenInfo.poolAmount?.sub(toTokenInfo.bufferAmount))\n      ? toTokenInfo.poolAmount?.sub(toTokenInfo.bufferAmount)\n      : toTokenInfo.availableAmount;\n\n    if (!value) {\n      return bigNumberify(0);\n    }\n\n    return value.gt(0) ? value : bigNumberify(0);\n  }, [toTokenInfo]);\n\n  const maxToTokenOutUSD = useMemo(() => {\n    return getUsd(maxToTokenOut, toTokenAddress, false, infoTokens);\n  }, [maxToTokenOut, toTokenAddress, infoTokens]);\n\n  const maxFromTokenInUSD = useMemo(() => {\n    const value = fromTokenInfo.maxUsdgAmount\n      ?.sub(fromTokenInfo.usdgAmount)\n      .mul(expandDecimals(1, USD_DECIMALS))\n      .div(expandDecimals(1, USDG_DECIMALS));\n\n    if (!value) {\n      return bigNumberify(0);\n    }\n\n    return value.gt(0) ? value : bigNumberify(0);\n  }, [fromTokenInfo]);\n\n  const maxFromTokenIn = useMemo(() => {\n    if (!fromTokenInfo.maxPrice) {\n      return bigNumberify(0);\n    }\n    return maxFromTokenInUSD?.mul(expandDecimals(1, fromTokenInfo.decimals)).div(fromTokenInfo.maxPrice).toString();\n  }, [maxFromTokenInUSD, fromTokenInfo]);\n\n  let maxSwapAmountUsd = bigNumberify(0);\n\n  if (maxToTokenOutUSD && maxFromTokenInUSD) {\n    maxSwapAmountUsd = maxToTokenOutUSD.lt(maxFromTokenInUSD) ? maxToTokenOutUSD : maxFromTokenInUSD;\n  }\n\n  const triggerRatio = useMemo(() => {\n    if (!triggerRatioValue) {\n      return bigNumberify(0);\n    }\n    let ratio = parseValue(triggerRatioValue, USD_DECIMALS);\n    if (ratio.eq(0)) {\n      return bigNumberify(0);\n    }\n    if (triggerRatioInverted) {\n      ratio = PRECISION.mul(PRECISION).div(ratio);\n    }\n    return ratio;\n  }, [triggerRatioValue, triggerRatioInverted]);\n\n  useEffect(() => {\n    if (\n      fromToken &&\n      fromTokenAddress === prevFromTokenAddress &&\n      !needApproval &&\n      prevNeedApproval &&\n      isWaitingForApproval\n    ) {\n      setIsWaitingForApproval(false);\n      helperToast.success(<div>{fromToken.symbol} approved!</div>);\n    }\n  }, [\n    fromTokenAddress,\n    prevFromTokenAddress,\n    needApproval,\n    prevNeedApproval,\n    setIsWaitingForApproval,\n    fromToken.symbol,\n    isWaitingForApproval,\n    fromToken,\n  ]);\n\n  useEffect(() => {\n    if (!toTokens.find((token) => token.address === toTokenAddress)) {\n      setToTokenAddress(swapOption, toTokens[0].address);\n    }\n  }, [swapOption, toTokens, toTokenAddress, setToTokenAddress]);\n\n  useEffect(() => {\n    if (swapOption !== SHORT) {\n      return;\n    }\n    if (toTokenAddress === prevToTokenAddress) {\n      return;\n    }\n    for (let i = 0; i < stableTokens.length; i++) {\n      const stableToken = stableTokens[i];\n      const key = getPositionKey(account, stableToken.address, toTokenAddress, false, nativeTokenAddress);\n      const position = positionsMap[key];\n      if (position && position.size && position.size.gt(0)) {\n        setShortCollateralAddress(position.collateralToken.address);\n        return;\n      }\n    }\n  }, [\n    account,\n    toTokenAddress,\n    prevToTokenAddress,\n    swapOption,\n    positionsMap,\n    stableTokens,\n    nativeTokenAddress,\n    shortCollateralAddress,\n    setShortCollateralAddress,\n  ]);\n\n  useEffect(() => {\n    const updateSwapAmounts = () => {\n      if (anchorOnFromAmount) {\n        if (!fromAmount) {\n          setToValue(\"\");\n          return;\n        }\n        if (toToken) {\n          const { amount: nextToAmount } = getNextToAmount(\n            chainId,\n            fromAmount,\n            fromTokenAddress,\n            toTokenAddress,\n            infoTokens,\n            undefined,\n            !isMarketOrder && triggerRatio,\n            usdgSupply,\n            totalTokenWeights,\n            isSwap\n          );\n\n          const nextToValue = formatAmountFree(nextToAmount, toToken.decimals, toToken.decimals);\n          setToValue(nextToValue);\n        }\n        return;\n      }\n\n      if (!toAmount) {\n        setFromValue(\"\");\n        return;\n      }\n      if (fromToken) {\n        const { amount: nextFromAmount } = getNextFromAmount(\n          chainId,\n          toAmount,\n          fromTokenAddress,\n          toTokenAddress,\n          infoTokens,\n          undefined,\n          !isMarketOrder && triggerRatio,\n          usdgSupply,\n          totalTokenWeights,\n          isSwap\n        );\n        const nextFromValue = formatAmountFree(nextFromAmount, fromToken.decimals, fromToken.decimals);\n        setFromValue(nextFromValue);\n      }\n    };\n\n    const updateLeverageAmounts = () => {\n      if (!hasLeverageOption) {\n        return;\n      }\n      if (anchorOnFromAmount) {\n        if (!fromAmount) {\n          setToValue(\"\");\n          return;\n        }\n\n        const toTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\n        if (toTokenInfo && toTokenInfo.maxPrice && fromUsdMin && fromUsdMin.gt(0)) {\n          const leverageMultiplier = parseInt(leverageOption * BASIS_POINTS_DIVISOR);\n          const toTokenPriceUsd =\n            !isMarketOrder && triggerPriceUsd && triggerPriceUsd.gt(0) ? triggerPriceUsd : toTokenInfo.maxPrice;\n\n          const { feeBasisPoints } = getNextToAmount(\n            chainId,\n            fromAmount,\n            fromTokenAddress,\n            collateralTokenAddress,\n            infoTokens,\n            undefined,\n            undefined,\n            usdgSupply,\n            totalTokenWeights,\n            isSwap\n          );\n\n          let fromUsdMinAfterFee = fromUsdMin;\n          if (feeBasisPoints) {\n            fromUsdMinAfterFee = fromUsdMin.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n          }\n\n          const toNumerator = fromUsdMinAfterFee.mul(leverageMultiplier).mul(BASIS_POINTS_DIVISOR);\n          const toDenominator = bigNumberify(MARGIN_FEE_BASIS_POINTS)\n            .mul(leverageMultiplier)\n            .add(bigNumberify(BASIS_POINTS_DIVISOR).mul(BASIS_POINTS_DIVISOR));\n\n          const nextToUsd = toNumerator.div(toDenominator);\n\n          const nextToAmount = nextToUsd.mul(expandDecimals(1, toToken.decimals)).div(toTokenPriceUsd);\n\n          const nextToValue = formatAmountFree(nextToAmount, toToken.decimals, toToken.decimals);\n\n          setToValue(nextToValue);\n        }\n        return;\n      }\n\n      if (!toAmount) {\n        setFromValue(\"\");\n        return;\n      }\n\n      const fromTokenInfo = getTokenInfo(infoTokens, fromTokenAddress);\n      if (fromTokenInfo && fromTokenInfo.minPrice && toUsdMax && toUsdMax.gt(0)) {\n        const leverageMultiplier = parseInt(leverageOption * BASIS_POINTS_DIVISOR);\n\n        const baseFromAmountUsd = toUsdMax.mul(BASIS_POINTS_DIVISOR).div(leverageMultiplier);\n\n        let fees = toUsdMax.mul(MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\n\n        const { feeBasisPoints } = getNextToAmount(\n          chainId,\n          fromAmount,\n          fromTokenAddress,\n          collateralTokenAddress,\n          infoTokens,\n          undefined,\n          undefined,\n          usdgSupply,\n          totalTokenWeights,\n          isSwap\n        );\n\n        if (feeBasisPoints) {\n          const swapFees = baseFromAmountUsd.mul(feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n          fees = fees.add(swapFees);\n        }\n\n        const nextFromUsd = baseFromAmountUsd.add(fees);\n\n        const nextFromAmount = nextFromUsd.mul(expandDecimals(1, fromToken.decimals)).div(fromTokenInfo.minPrice);\n\n        const nextFromValue = formatAmountFree(nextFromAmount, fromToken.decimals, fromToken.decimals);\n\n        setFromValue(nextFromValue);\n      }\n    };\n\n    if (isSwap) {\n      updateSwapAmounts();\n    }\n\n    if (isLong || isShort) {\n      updateLeverageAmounts();\n    }\n  }, [\n    anchorOnFromAmount,\n    fromAmount,\n    toAmount,\n    fromToken,\n    toToken,\n    fromTokenAddress,\n    toTokenAddress,\n    infoTokens,\n    isSwap,\n    isLong,\n    isShort,\n    leverageOption,\n    fromUsdMin,\n    toUsdMax,\n    isMarketOrder,\n    triggerPriceUsd,\n    triggerRatio,\n    hasLeverageOption,\n    usdgSupply,\n    totalTokenWeights,\n    chainId,\n    collateralTokenAddress,\n    indexTokenAddress,\n  ]);\n\n  let entryMarkPrice;\n  let exitMarkPrice;\n  if (toTokenInfo) {\n    entryMarkPrice = swapOption === LONG ? toTokenInfo.maxPrice : toTokenInfo.minPrice;\n    exitMarkPrice = swapOption === LONG ? toTokenInfo.minPrice : toTokenInfo.maxPrice;\n  }\n\n  let leverage = bigNumberify(0);\n  if (fromUsdMin && toUsdMax && fromUsdMin.gt(0)) {\n    const fees = toUsdMax.mul(MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\n    if (fromUsdMin.sub(fees).gt(0)) {\n      leverage = toUsdMax.mul(BASIS_POINTS_DIVISOR).div(fromUsdMin.sub(fees));\n    }\n  }\n\n  let nextAveragePrice = isMarketOrder ? entryMarkPrice : triggerPriceUsd;\n  if (hasExistingPosition) {\n    let nextDelta, nextHasProfit;\n\n    if (isMarketOrder) {\n      nextDelta = existingPosition.delta;\n      nextHasProfit = existingPosition.hasProfit;\n    } else {\n      const data = calculatePositionDelta(triggerPriceUsd || bigNumberify(0), existingPosition);\n      nextDelta = data.delta;\n      nextHasProfit = data.hasProfit;\n    }\n\n    nextAveragePrice = getNextAveragePrice({\n      size: existingPosition.size,\n      sizeDelta: toUsdMax,\n      hasProfit: nextHasProfit,\n      delta: nextDelta,\n      nextPrice: isMarketOrder ? entryMarkPrice : triggerPriceUsd,\n      isLong,\n    });\n  }\n\n  const liquidationPrice = getLiquidationPrice({\n    isLong,\n    size: hasExistingPosition ? existingPosition.size : bigNumberify(0),\n    collateral: hasExistingPosition ? existingPosition.collateral : bigNumberify(0),\n    averagePrice: nextAveragePrice,\n    entryFundingRate: hasExistingPosition ? existingPosition.entryFundingRate : bigNumberify(0),\n    cumulativeFundingRate: hasExistingPosition ? existingPosition.cumulativeFundingRate : bigNumberify(0),\n    sizeDelta: toUsdMax,\n    collateralDelta: fromUsdMin,\n    increaseCollateral: true,\n    increaseSize: true,\n  });\n\n  const existingLiquidationPrice = existingPosition ? getLiquidationPrice(existingPosition) : undefined;\n  let displayLiquidationPrice = liquidationPrice ? liquidationPrice : existingLiquidationPrice;\n\n  if (hasExistingPosition) {\n    const collateralDelta = fromUsdMin ? fromUsdMin : bigNumberify(0);\n    const sizeDelta = toUsdMax ? toUsdMax : bigNumberify(0);\n    leverage = getLeverage({\n      size: existingPosition.size,\n      sizeDelta,\n      collateral: existingPosition.collateral,\n      collateralDelta,\n      increaseCollateral: true,\n      entryFundingRate: existingPosition.entryFundingRate,\n      cumulativeFundingRate: existingPosition.cumulativeFundingRate,\n      increaseSize: true,\n      hasProfit: existingPosition.hasProfit,\n      delta: existingPosition.delta,\n      includeDelta: savedIsPnlInLeverage,\n    });\n  } else if (hasLeverageOption) {\n    leverage = bigNumberify(parseInt(leverageOption * BASIS_POINTS_DIVISOR));\n  }\n\n  const getSwapError = () => {\n    if (IS_NETWORK_DISABLED[chainId]) {\n      return [t`Swaps disabled, pending ${getChainName(chainId)} upgrade`];\n    }\n\n    if (fromTokenAddress === toTokenAddress) {\n      return [t`Select different tokens`];\n    }\n\n    if (!isMarketOrder) {\n      if ((toToken.isStable || toToken.isUsdg) && (fromToken.isStable || fromToken.isUsdg)) {\n        return [t`Select different tokens`];\n      }\n\n      if (fromToken.isNative && toToken.isWrapped) {\n        return [t`Select different tokens`];\n      }\n\n      if (toToken.isNative && fromToken.isWrapped) {\n        return [t`Select different tokens`];\n      }\n    }\n\n    if (!fromAmount || fromAmount.eq(0)) {\n      return [t`Enter an amount`];\n    }\n    if (!toAmount || toAmount.eq(0)) {\n      return [t`Enter an amount`];\n    }\n\n    const fromTokenInfo = getTokenInfo(infoTokens, fromTokenAddress);\n    if (!fromTokenInfo || !fromTokenInfo.minPrice) {\n      return [t`Incorrect network`];\n    }\n    if (\n      !savedShouldDisableValidationForTesting &&\n      fromTokenInfo &&\n      fromTokenInfo.balance &&\n      fromAmount &&\n      fromAmount.gt(fromTokenInfo.balance)\n    ) {\n      return [t`Insufficient ${fromTokenInfo.symbol} balance`];\n    }\n\n    const toTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\n\n    if (!isMarketOrder) {\n      if (!triggerRatioValue || triggerRatio.eq(0)) {\n        return [t`Enter a price`];\n      }\n\n      const currentRate = getExchangeRate(fromTokenInfo, toTokenInfo);\n      if (currentRate && currentRate.lt(triggerRatio)) {\n        return triggerRatioInverted ? [t`Price below Mark Price`] : [t`Price above Mark Price`];\n      }\n    }\n\n    if (\n      !isWrapOrUnwrap &&\n      toToken &&\n      toTokenAddress !== USDG_ADDRESS &&\n      toTokenInfo &&\n      toTokenInfo.availableAmount &&\n      toAmount.gt(toTokenInfo.availableAmount)\n    ) {\n      return [t`Insufficient Liquidity`];\n    }\n    if (\n      !isWrapOrUnwrap &&\n      toAmount &&\n      toTokenInfo.bufferAmount &&\n      toTokenInfo.poolAmount &&\n      toTokenInfo.bufferAmount.gt(toTokenInfo.poolAmount.sub(toAmount))\n    ) {\n      return [t`Insufficient Liquidity`];\n    }\n\n    if (\n      fromUsdMin &&\n      fromTokenInfo.maxUsdgAmount &&\n      fromTokenInfo.maxUsdgAmount.gt(0) &&\n      fromTokenInfo.usdgAmount &&\n      fromTokenInfo.maxPrice\n    ) {\n      const usdgFromAmount = adjustForDecimals(fromUsdMin, USD_DECIMALS, USDG_DECIMALS);\n      const nextUsdgAmount = fromTokenInfo.usdgAmount.add(usdgFromAmount);\n\n      if (nextUsdgAmount.gt(fromTokenInfo.maxUsdgAmount)) {\n        return [t`Insufficient liquidity`, ErrorDisplayType.Tooltip, ErrorCode.InsufficientLiquiditySwap];\n      }\n    }\n\n    return [false];\n  };\n\n  const getLeverageError = () => {\n    if (IS_NETWORK_DISABLED[chainId]) {\n      return [t`Leverage disabled, pending ${getChainName(chainId)} upgrade`];\n    }\n    if (hasOutdatedUi) {\n      return [t`Page outdated, please refresh`];\n    }\n\n    if (!toAmount || toAmount.eq(0)) {\n      return [t`Enter an amount`];\n    }\n\n    let toTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\n    if (toTokenInfo && toTokenInfo.isStable) {\n      const SWAP_OPTION_LABEL = {\n        [LONG]: \"Longing\",\n        [SHORT]: \"Shorting\",\n      };\n      return [t`${SWAP_OPTION_LABEL[swapOption]} ${toTokenInfo.symbol} not supported`];\n    }\n\n    const fromTokenInfo = getTokenInfo(infoTokens, fromTokenAddress);\n    if (\n      !savedShouldDisableValidationForTesting &&\n      fromTokenInfo &&\n      fromTokenInfo.balance &&\n      fromAmount &&\n      fromAmount.gt(fromTokenInfo.balance)\n    ) {\n      return [t`Insufficient ${fromTokenInfo.symbol} balance`];\n    }\n\n    if (leverage && leverage.eq(0)) {\n      return [t`Enter an amount`];\n    }\n    if (!isMarketOrder && (!triggerPriceValue || triggerPriceUsd.eq(0))) {\n      return [t`Enter a price`];\n    }\n\n    if (!hasExistingPosition && fromUsdMin && fromUsdMin.lt(expandDecimals(10, USD_DECIMALS))) {\n      return [t`Min order: 10 USD`];\n    }\n\n    if (leverage && leverage.lt(1.1 * BASIS_POINTS_DIVISOR)) {\n      return [t`Min leverage: 1.1x`];\n    }\n\n    if (leverage && leverage.gt(MAX_ALLOWED_LEVERAGE)) {\n      return [t`Max leverage: ${(MAX_ALLOWED_LEVERAGE / BASIS_POINTS_DIVISOR).toFixed(1)}x`];\n    }\n\n    if (!isMarketOrder && entryMarkPrice && triggerPriceUsd && !savedShouldDisableValidationForTesting) {\n      if (isLong && entryMarkPrice.lt(triggerPriceUsd)) {\n        return [t`Price above Mark Price`];\n      }\n      if (!isLong && entryMarkPrice.gt(triggerPriceUsd)) {\n        return [t`Price below Mark Price`];\n      }\n    }\n\n    if (isLong) {\n      let requiredAmount = toAmount;\n      if (fromTokenAddress !== toTokenAddress) {\n        const { amount: swapAmount } = getNextToAmount(\n          chainId,\n          fromAmount,\n          fromTokenAddress,\n          toTokenAddress,\n          infoTokens,\n          undefined,\n          undefined,\n          usdgSupply,\n          totalTokenWeights,\n          isSwap\n        );\n        requiredAmount = requiredAmount.add(swapAmount);\n\n        if (toToken && toTokenAddress !== USDG_ADDRESS) {\n          if (!toTokenInfo.availableAmount) {\n            return [t`Liquidity data not loaded`];\n          }\n          if (toTokenInfo.availableAmount && requiredAmount.gt(toTokenInfo.availableAmount)) {\n            return [t`Insufficient Liquidity`, ErrorDisplayType.Tooltip, ErrorCode.InsufficientLiquidityLeverage];\n          }\n        }\n\n        if (\n          toTokenInfo.poolAmount &&\n          toTokenInfo.bufferAmount &&\n          toTokenInfo.bufferAmount.gt(toTokenInfo.poolAmount.sub(swapAmount))\n        ) {\n          return [t`Insufficient Liquidity`, ErrorDisplayType.Tooltip, ErrorCode.InsufficientLiquidityLeverage];\n        }\n\n        if (\n          fromUsdMin &&\n          fromTokenInfo.maxUsdgAmount &&\n          fromTokenInfo.maxUsdgAmount.gt(0) &&\n          fromTokenInfo.minPrice &&\n          fromTokenInfo.usdgAmount\n        ) {\n          const usdgFromAmount = adjustForDecimals(fromUsdMin, USD_DECIMALS, USDG_DECIMALS);\n          const nextUsdgAmount = fromTokenInfo.usdgAmount.add(usdgFromAmount);\n          if (nextUsdgAmount.gt(fromTokenInfo.maxUsdgAmount)) {\n            return [t`Insufficient Liquidity`, ErrorDisplayType.Tooltip, ErrorCode.TokenPoolExceeded];\n          }\n        }\n      }\n\n      if (toTokenInfo && toTokenInfo.maxPrice) {\n        const sizeUsd = toAmount.mul(toTokenInfo.maxPrice).div(expandDecimals(1, toTokenInfo.decimals));\n        if (\n          toTokenInfo.maxGlobalLongSize &&\n          toTokenInfo.maxGlobalLongSize.gt(0) &&\n          toTokenInfo.maxAvailableLong &&\n          sizeUsd.gt(toTokenInfo.maxAvailableLong)\n        ) {\n          return [t`Max ${toTokenInfo.symbol} long exceeded`];\n        }\n      }\n    }\n\n    if (isShort) {\n      let stableTokenAmount = bigNumberify(0);\n      if (fromTokenAddress !== shortCollateralAddress && fromAmount && fromAmount.gt(0)) {\n        const { amount: nextToAmount } = getNextToAmount(\n          chainId,\n          fromAmount,\n          fromTokenAddress,\n          shortCollateralAddress,\n          infoTokens,\n          undefined,\n          undefined,\n          usdgSupply,\n          totalTokenWeights,\n          isSwap\n        );\n        stableTokenAmount = nextToAmount;\n        if (stableTokenAmount.gt(shortCollateralToken.availableAmount)) {\n          return [t`Insufficient Liquidity`, ErrorDisplayType.Tooltip, ErrorCode.InsufficientCollateralIn];\n        }\n\n        if (\n          shortCollateralToken.bufferAmount &&\n          shortCollateralToken.poolAmount &&\n          shortCollateralToken.bufferAmount.gt(shortCollateralToken.poolAmount.sub(stableTokenAmount))\n        ) {\n          // suggest swapping to collateralToken\n          return [t`Insufficient Liquidity`, ErrorDisplayType.Tooltip, ErrorCode.InsufficientCollateralIn];\n        }\n\n        if (\n          fromTokenInfo.maxUsdgAmount &&\n          fromTokenInfo.maxUsdgAmount.gt(0) &&\n          fromTokenInfo.minPrice &&\n          fromTokenInfo.usdgAmount\n        ) {\n          const usdgFromAmount = adjustForDecimals(fromUsdMin, USD_DECIMALS, USDG_DECIMALS);\n          const nextUsdgAmount = fromTokenInfo.usdgAmount.add(usdgFromAmount);\n          if (nextUsdgAmount.gt(fromTokenInfo.maxUsdgAmount)) {\n            return [t`Insufficient Liquidity`, ErrorDisplayType.Tooltip, ErrorCode.TokenPoolExceededShorts];\n          }\n        }\n      }\n      if (\n        !shortCollateralToken ||\n        !fromTokenInfo ||\n        !toTokenInfo ||\n        !toTokenInfo.maxPrice ||\n        !shortCollateralToken.availableAmount\n      ) {\n        return [t`Fetching token info...`];\n      }\n\n      const sizeUsd = toAmount.mul(toTokenInfo.maxPrice).div(expandDecimals(1, toTokenInfo.decimals));\n      const sizeTokens = sizeUsd\n        .mul(expandDecimals(1, shortCollateralToken.decimals))\n        .div(shortCollateralToken.minPrice);\n\n      if (!toTokenInfo.maxAvailableShort) {\n        return [t`Liquidity data not loaded`];\n      }\n\n      if (\n        toTokenInfo.maxGlobalShortSize &&\n        toTokenInfo.maxGlobalShortSize.gt(0) &&\n        toTokenInfo.maxAvailableShort &&\n        sizeUsd.gt(toTokenInfo.maxAvailableShort)\n      ) {\n        return [t`Max ${toTokenInfo.symbol} short exceeded`];\n      }\n\n      stableTokenAmount = stableTokenAmount.add(sizeTokens);\n      if (stableTokenAmount.gt(shortCollateralToken.availableAmount)) {\n        return [t`Insufficient Liquidity`, ErrorDisplayType.Tooltip, ErrorCode.InsufficientProfitLiquidity];\n      }\n    }\n\n    return [false];\n  };\n\n  const getToLabel = () => {\n    if (isSwap) {\n      return t`Receive`;\n    }\n    if (isLong) {\n      return t`Long`;\n    }\n    return t`Short`;\n  };\n\n  const getError = () => {\n    if (isSwap) {\n      return getSwapError();\n    }\n    return getLeverageError();\n  };\n\n  const renderOrdersToa = () => {\n    if (!ordersToaOpen) {\n      return null;\n    }\n\n    return (\n      <OrdersToa\n        setIsVisible={setOrdersToaOpen}\n        approveOrderBook={approveOrderBook}\n        isPluginApproving={isPluginApproving}\n      />\n    );\n  };\n\n  const isPrimaryEnabled = () => {\n    if (IS_NETWORK_DISABLED[chainId]) {\n      return false;\n    }\n    if (isStopOrder) {\n      return true;\n    }\n    if (!active) {\n      return true;\n    }\n    const [error, errorType] = getError();\n    if (error && errorType !== ErrorDisplayType.Modal) {\n      return false;\n    }\n    if (needOrderBookApproval && isWaitingForPluginApproval) {\n      return false;\n    }\n    if ((needApproval && isWaitingForApproval) || isApproving) {\n      return false;\n    }\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      return false;\n    }\n    if (isPositionRouterApproving) {\n      return false;\n    }\n    if (isApproving) {\n      return false;\n    }\n    if (isSubmitting) {\n      return false;\n    }\n\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    if (isStopOrder) {\n      return t`Open a position`;\n    }\n    if (!active) {\n      return t`Connect Wallet`;\n    }\n    if (!isSupportedChain(chainId)) {\n      return t`Incorrect Network`;\n    }\n    const [error, errorType] = getError();\n    if (error && errorType !== ErrorDisplayType.Modal) {\n      return error;\n    }\n\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      return t`Enabling Leverage...`;\n    }\n    if (isPositionRouterApproving) {\n      return t`Enabling Leverage...`;\n    }\n    if (needPositionRouterApproval) {\n      return t`Enable Leverage`;\n    }\n\n    if (needApproval && isWaitingForApproval) {\n      return t`Waiting for Approval`;\n    }\n    if (isApproving) {\n      return t`Approving ${fromToken.symbol}...`;\n    }\n    if (needApproval) {\n      return t`Approve ${fromToken.symbol}`;\n    }\n\n    if (needOrderBookApproval && isWaitingForPluginApproval) {\n      return t`Enabling Orders...`;\n    }\n    if (isPluginApproving) {\n      return t`Enabling Orders...`;\n    }\n    if (needOrderBookApproval) {\n      return t`Enable Orders`;\n    }\n\n    if (!isMarketOrder) return t`Create ${orderOption.charAt(0) + orderOption.substring(1).toLowerCase()} Order`;\n\n    if (isSwap) {\n      if (toUsdMax && toUsdMax.lt(fromUsdMin.mul(95).div(100))) {\n        return t`High Slippage, Swap Anyway`;\n      }\n      return t`Swap`;\n    }\n\n    if (isLong) {\n      const indexTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\n      if (indexTokenInfo && indexTokenInfo.minPrice) {\n        const { amount: nextToAmount } = getNextToAmount(\n          chainId,\n          fromAmount,\n          fromTokenAddress,\n          indexTokenAddress,\n          infoTokens,\n          undefined,\n          undefined,\n          usdgSupply,\n          totalTokenWeights,\n          isSwap\n        );\n        const nextToAmountUsd = nextToAmount\n          .mul(indexTokenInfo.minPrice)\n          .div(expandDecimals(1, indexTokenInfo.decimals));\n        if (fromTokenAddress === USDG_ADDRESS && nextToAmountUsd.lt(fromUsdMin.mul(98).div(100))) {\n          return t`High USDG Slippage, Long Anyway`;\n        }\n      }\n      return t`Long ${toToken.symbol}`;\n    }\n\n    return t`Short ${toToken.symbol}`;\n  };\n\n  const onSelectFromToken = (token) => {\n    setFromTokenAddress(swapOption, token.address);\n    setIsWaitingForApproval(false);\n\n    if (isShort && token.isStable) {\n      setShortCollateralAddress(token.address);\n    }\n  };\n\n  const onSelectShortCollateralAddress = (token) => {\n    setShortCollateralAddress(token.address);\n  };\n\n  const onSelectToToken = (token) => {\n    setToTokenAddress(swapOption, token.address);\n  };\n\n  const onFromValueChange = (e) => {\n    setAnchorOnFromAmount(true);\n    setFromValue(e.target.value);\n  };\n\n  const onToValueChange = (e) => {\n    setAnchorOnFromAmount(false);\n    setToValue(e.target.value);\n  };\n\n  const switchTokens = () => {\n    if (fromAmount && toAmount) {\n      if (anchorOnFromAmount) {\n        setToValue(formatAmountFree(fromAmount, fromToken.decimals, 8));\n      } else {\n        setFromValue(formatAmountFree(toAmount, toToken.decimals, 8));\n      }\n      setAnchorOnFromAmount(!anchorOnFromAmount);\n    }\n    setIsWaitingForApproval(false);\n\n    const updatedTokenSelection = JSON.parse(JSON.stringify(tokenSelection));\n    updatedTokenSelection[swapOption] = {\n      from: toTokenAddress,\n      to: fromTokenAddress,\n    };\n    setTokenSelection(updatedTokenSelection);\n  };\n\n  const wrap = async () => {\n    setIsSubmitting(true);\n\n    const contract = new ethers.Contract(nativeTokenAddress, WETH.abi, library.getSigner());\n    callContract(chainId, contract, \"deposit\", {\n      value: fromAmount,\n      sentMsg: t`Swap submitted.`,\n      successMsg: t`Swapped ${formatAmount(fromAmount, fromToken.decimals, 4, true)} ${\n        fromToken.symbol\n      } for ${formatAmount(toAmount, toToken.decimals, 4, true)} ${toToken.symbol}!`,\n      failMsg: t`Swap failed.`,\n      setPendingTxns,\n    })\n      .then(async (res) => {})\n      .finally(() => {\n        setIsSubmitting(false);\n      });\n  };\n\n  const unwrap = async () => {\n    setIsSubmitting(true);\n\n    const contract = new ethers.Contract(nativeTokenAddress, WETH.abi, library.getSigner());\n    callContract(chainId, contract, \"withdraw\", [fromAmount], {\n      sentMsg: t`Swap submitted!`,\n      failMsg: t`Swap failed.`,\n      successMsg: t`Swapped ${formatAmount(fromAmount, fromToken.decimals, 4, true)} ${\n        fromToken.symbol\n      } for ${formatAmount(toAmount, toToken.decimals, 4, true)} ${toToken.symbol}!`,\n      setPendingTxns,\n    })\n      .then(async (res) => {})\n      .finally(() => {\n        setIsSubmitting(false);\n      });\n  };\n\n  const swap = async () => {\n    if (fromToken.isNative && toToken.isWrapped) {\n      wrap();\n      return;\n    }\n\n    if (fromTokenAddress.isWrapped && toToken.isNative) {\n      unwrap();\n      return;\n    }\n\n    setIsSubmitting(true);\n    let path = [fromTokenAddress, toTokenAddress];\n    if (anchorOnFromAmount) {\n      const { path: multiPath } = getNextToAmount(\n        chainId,\n        fromAmount,\n        fromTokenAddress,\n        toTokenAddress,\n        infoTokens,\n        undefined,\n        undefined,\n        usdgSupply,\n        totalTokenWeights,\n        isSwap\n      );\n      if (multiPath) {\n        path = multiPath;\n      }\n    } else {\n      const { path: multiPath } = getNextFromAmount(\n        chainId,\n        toAmount,\n        fromTokenAddress,\n        toTokenAddress,\n        infoTokens,\n        undefined,\n        undefined,\n        usdgSupply,\n        totalTokenWeights,\n        isSwap\n      );\n      if (multiPath) {\n        path = multiPath;\n      }\n    }\n\n    let method;\n    let contract;\n    let value;\n    let params;\n    let minOut;\n    if (shouldRaiseGasError(getTokenInfo(infoTokens, fromTokenAddress), fromAmount)) {\n      setIsSubmitting(false);\n      setIsPendingConfirmation(true);\n      helperToast.error(\n        t`Leave at least ${formatAmount(DUST_BNB, 18, 3)} ${getConstant(chainId, \"nativeTokenSymbol\")} for gas`\n      );\n      return;\n    }\n\n    if (!isMarketOrder) {\n      minOut = toAmount;\n      Api.createSwapOrder(chainId, library, path, fromAmount, minOut, triggerRatio, nativeTokenAddress, {\n        sentMsg: t`Swap Order submitted!`,\n        successMsg: t`Swap Order created!`,\n        failMsg: t`Swap Order creation failed.`,\n        pendingTxns,\n        setPendingTxns,\n      })\n        .then(() => {\n          setIsConfirming(false);\n        })\n        .finally(() => {\n          setIsSubmitting(false);\n          setIsPendingConfirmation(false);\n        });\n      return;\n    }\n\n    path = replaceNativeTokenAddress(path, nativeTokenAddress);\n    method = \"swap\";\n    value = bigNumberify(0);\n    if (toTokenAddress === AddressZero) {\n      method = \"swapTokensToETH\";\n    }\n\n    minOut = toAmount.mul(BASIS_POINTS_DIVISOR - allowedSlippage).div(BASIS_POINTS_DIVISOR);\n    params = [path, fromAmount, minOut, account];\n    if (fromTokenAddress === AddressZero) {\n      method = \"swapETHToTokens\";\n      value = fromAmount;\n      params = [path, minOut, account];\n    }\n    contract = new ethers.Contract(routerAddress, Router.abi, library.getSigner());\n\n    callContract(chainId, contract, method, params, {\n      value,\n      sentMsg: t`Swap ${!isMarketOrder ? \" order \" : \"\"} submitted!`,\n      successMsg: t`Swapped ${formatAmount(fromAmount, fromToken.decimals, 4, true)} ${\n        fromToken.symbol\n      } for ${formatAmount(toAmount, toToken.decimals, 4, true)} ${toToken.symbol}!`,\n      failMsg: t`Swap failed.`,\n      setPendingTxns,\n    })\n      .then(async () => {\n        setIsConfirming(false);\n      })\n      .finally(() => {\n        setIsSubmitting(false);\n        setIsPendingConfirmation(false);\n      });\n  };\n\n  const createIncreaseOrder = () => {\n    let path = [fromTokenAddress];\n\n    if (path[0] === USDG_ADDRESS) {\n      if (isLong) {\n        const stableToken = getMostAbundantStableToken(chainId, infoTokens);\n        path.push(stableToken.address);\n      } else {\n        path.push(shortCollateralAddress);\n      }\n    }\n\n    const minOut = 0;\n    const indexToken = getToken(chainId, indexTokenAddress);\n    const successMsg = t`\n      Created limit order for ${indexToken.symbol} ${isLong ? \"Long\" : \"Short\"}: ${formatAmount(\n      toUsdMax,\n      USD_DECIMALS,\n      2\n    )} USD!\n    `;\n    return Api.createIncreaseOrder(\n      chainId,\n      library,\n      nativeTokenAddress,\n      path,\n      fromAmount,\n      indexTokenAddress,\n      minOut,\n      toUsdMax,\n      collateralTokenAddress,\n      isLong,\n      triggerPriceUsd,\n      {\n        pendingTxns,\n        setPendingTxns,\n        sentMsg: t`Limit order submitted!`,\n        successMsg,\n        failMsg: t`Limit order creation failed.`,\n      }\n    )\n      .then(() => {\n        setIsConfirming(false);\n      })\n      .finally(() => {\n        setIsSubmitting(false);\n        setIsPendingConfirmation(false);\n      });\n  };\n\n  let referralCode = ethers.constants.HashZero;\n  if (!attachedOnChain && userReferralCode) {\n    referralCode = userReferralCode;\n  }\n\n  const increasePosition = async () => {\n    setIsSubmitting(true);\n    const tokenAddress0 = fromTokenAddress === AddressZero ? nativeTokenAddress : fromTokenAddress;\n    const indexTokenAddress = toTokenAddress === AddressZero ? nativeTokenAddress : toTokenAddress;\n    let path = [indexTokenAddress]; // assume long\n    if (toTokenAddress !== fromTokenAddress) {\n      path = [tokenAddress0, indexTokenAddress];\n    }\n\n    if (fromTokenAddress === AddressZero && toTokenAddress === nativeTokenAddress) {\n      path = [nativeTokenAddress];\n    }\n\n    if (fromTokenAddress === nativeTokenAddress && toTokenAddress === AddressZero) {\n      path = [nativeTokenAddress];\n    }\n\n    if (isShort) {\n      path = [shortCollateralAddress];\n      if (tokenAddress0 !== shortCollateralAddress) {\n        path = [tokenAddress0, shortCollateralAddress];\n      }\n    }\n\n    const refPrice = isLong ? toTokenInfo.maxPrice : toTokenInfo.minPrice;\n    const priceBasisPoints = isLong ? BASIS_POINTS_DIVISOR + allowedSlippage : BASIS_POINTS_DIVISOR - allowedSlippage;\n    const priceLimit = refPrice.mul(priceBasisPoints).div(BASIS_POINTS_DIVISOR);\n\n    const boundedFromAmount = fromAmount ? fromAmount : bigNumberify(0);\n\n    if (fromAmount && fromAmount.gt(0) && fromTokenAddress === USDG_ADDRESS && isLong) {\n      const { amount: nextToAmount, path: multiPath } = getNextToAmount(\n        chainId,\n        fromAmount,\n        fromTokenAddress,\n        indexTokenAddress,\n        infoTokens,\n        undefined,\n        undefined,\n        usdgSupply,\n        totalTokenWeights,\n        isSwap\n      );\n      if (nextToAmount.eq(0)) {\n        helperToast.error(t`Insufficient Liquidity`);\n        return;\n      }\n      if (multiPath) {\n        path = replaceNativeTokenAddress(multiPath);\n      }\n    }\n\n    let params = [\n      path, // _path\n      indexTokenAddress, // _indexToken\n      boundedFromAmount, // _amountIn\n      0, // _minOut\n      toUsdMax, // _sizeDelta\n      isLong, // _isLong\n      priceLimit, // _acceptablePrice\n      minExecutionFee, // _executionFee\n      referralCode, // _referralCode\n      AddressZero, // _callbackTarget\n    ];\n\n    let method = \"createIncreasePosition\";\n    let value = minExecutionFee;\n    if (fromTokenAddress === AddressZero) {\n      method = \"createIncreasePositionETH\";\n      value = boundedFromAmount.add(minExecutionFee);\n      params = [\n        path, // _path\n        indexTokenAddress, // _indexToken\n        0, // _minOut\n        toUsdMax, // _sizeDelta\n        isLong, // _isLong\n        priceLimit, // _acceptablePrice\n        minExecutionFee, // _executionFee\n        referralCode, // _referralCode\n        AddressZero, // _callbackTarget\n      ];\n    }\n\n    if (shouldRaiseGasError(getTokenInfo(infoTokens, fromTokenAddress), fromAmount)) {\n      setIsSubmitting(false);\n      setIsPendingConfirmation(false);\n      helperToast.error(\n        t`Leave at least ${formatAmount(DUST_BNB, 18, 3)} ${getConstant(chainId, \"nativeTokenSymbol\")} for gas`\n      );\n      return;\n    }\n\n    const contractAddress = getContract(chainId, \"PositionRouter\");\n    const contract = new ethers.Contract(contractAddress, PositionRouter.abi, library.getSigner());\n    const indexToken = getTokenInfo(infoTokens, indexTokenAddress);\n    const tokenSymbol = indexToken.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexToken.symbol;\n    const longOrShortText = isLong ? t`Long` : t`Short`;\n    const successMsg = t`Requested increase of ${tokenSymbol} ${longOrShortText} by ${formatAmount(\n      toUsdMax,\n      USD_DECIMALS,\n      2\n    )} USD.`;\n\n    callContract(chainId, contract, method, params, {\n      value,\n      setPendingTxns,\n      sentMsg: `${longOrShortText} submitted.`,\n      failMsg: `${longOrShortText} failed.`,\n      successMsg,\n      // for Arbitrum, sometimes the successMsg shows after the position has already been executed\n      // hide the success message for Arbitrum as a workaround\n      hideSuccessMsg: chainId === ARBITRUM,\n    })\n      .then(async () => {\n        setIsConfirming(false);\n\n        const key = getPositionKey(account, path[path.length - 1], indexTokenAddress, isLong);\n        let nextSize = toUsdMax;\n        if (hasExistingPosition) {\n          nextSize = existingPosition.size.add(toUsdMax);\n        }\n\n        pendingPositions[key] = {\n          updatedAt: Date.now(),\n          pendingChanges: {\n            size: nextSize,\n          },\n        };\n\n        setPendingPositions({ ...pendingPositions });\n      })\n      .finally(() => {\n        setIsSubmitting(false);\n        setIsPendingConfirmation(false);\n      });\n  };\n\n  const onSwapOptionChange = (opt) => {\n    setSwapOption(opt);\n    if (orderOption === STOP) {\n      setOrderOption(MARKET);\n    }\n    setAnchorOnFromAmount(true);\n    setFromValue(\"\");\n    setToValue(\"\");\n    setTriggerPriceValue(\"\");\n    setTriggerRatioValue(\"\");\n\n    if (opt === SHORT && infoTokens) {\n      const fromToken = getToken(chainId, tokenSelection[opt].from);\n      if (fromToken && fromToken.isStable) {\n        setShortCollateralAddress(fromToken.address);\n      } else {\n        const stableToken = getMostAbundantStableToken(chainId, infoTokens);\n        setShortCollateralAddress(stableToken.address);\n      }\n    }\n  };\n\n  const onConfirmationClick = () => {\n    if (!active) {\n      props.connectWallet();\n      return;\n    }\n\n    if (needOrderBookApproval) {\n      approveOrderBook();\n      return;\n    }\n\n    setIsPendingConfirmation(true);\n\n    if (isSwap) {\n      swap();\n      return;\n    }\n\n    if (orderOption === LIMIT) {\n      createIncreaseOrder();\n      return;\n    }\n\n    increasePosition();\n  };\n\n  function approveFromToken() {\n    approveTokens({\n      setIsApproving,\n      library,\n      tokenAddress: fromToken.address,\n      spender: routerAddress,\n      chainId: chainId,\n      onApproveSubmitted: () => {\n        setIsWaitingForApproval(true);\n      },\n      infoTokens,\n      getTokenInfo,\n      pendingTxns,\n      setPendingTxns,\n    });\n  }\n\n  const onClickPrimary = () => {\n    if (isStopOrder) {\n      setOrderOption(MARKET);\n      return;\n    }\n\n    if (!active) {\n      props.connectWallet();\n      return;\n    }\n\n    if (needPositionRouterApproval) {\n      approvePositionRouter({\n        sentMsg: t`Enable leverage sent.`,\n        failMsg: t`Enable leverage failed.`,\n      });\n      return;\n    }\n\n    if (needApproval) {\n      approveFromToken();\n      return;\n    }\n\n    if (needOrderBookApproval) {\n      setOrdersToaOpen(true);\n      return;\n    }\n\n    const [, errorType, errorCode] = getError();\n\n    if (errorType === ErrorDisplayType.Modal) {\n      setModalError(errorCode);\n      return;\n    }\n\n    if (isSwap) {\n      if (fromTokenAddress === AddressZero && toTokenAddress === nativeTokenAddress) {\n        wrap();\n        return;\n      }\n\n      if (fromTokenAddress === nativeTokenAddress && toTokenAddress === AddressZero) {\n        unwrap();\n        return;\n      }\n    }\n\n    setIsConfirming(true);\n    setIsHigherSlippageAllowed(false);\n  };\n\n  const isStopOrder = orderOption === STOP;\n  const showFromAndToSection = !isStopOrder;\n  const showTriggerPriceSection = !isSwap && !isMarketOrder && !isStopOrder;\n  const showTriggerRatioSection = isSwap && !isMarketOrder && !isStopOrder;\n\n  let fees;\n  let feesUsd;\n  let feeBps;\n  let swapFees;\n  let positionFee;\n  if (isSwap) {\n    if (fromAmount) {\n      const { feeBasisPoints } = getNextToAmount(\n        chainId,\n        fromAmount,\n        fromTokenAddress,\n        toTokenAddress,\n        infoTokens,\n        undefined,\n        undefined,\n        usdgSupply,\n        totalTokenWeights,\n        isSwap\n      );\n      if (feeBasisPoints !== undefined) {\n        fees = fromAmount.mul(feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n        const feeTokenPrice =\n          fromTokenInfo.address === USDG_ADDRESS ? expandDecimals(1, USD_DECIMALS) : fromTokenInfo.maxPrice;\n        feesUsd = fees.mul(feeTokenPrice).div(expandDecimals(1, fromTokenInfo.decimals));\n      }\n      feeBps = feeBasisPoints;\n    }\n  } else if (toUsdMax) {\n    positionFee = toUsdMax.mul(MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\n    feesUsd = positionFee;\n\n    const { feeBasisPoints } = getNextToAmount(\n      chainId,\n      fromAmount,\n      fromTokenAddress,\n      collateralTokenAddress,\n      infoTokens,\n      undefined,\n      undefined,\n      usdgSupply,\n      totalTokenWeights,\n      isSwap\n    );\n    if (feeBasisPoints) {\n      swapFees = fromUsdMin.mul(feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n      feesUsd = feesUsd.add(swapFees);\n    }\n    feeBps = feeBasisPoints;\n  }\n\n  const leverageMarks = {\n    2: \"2x\",\n    5: \"5x\",\n    10: \"10x\",\n    15: \"15x\",\n    20: \"20x\",\n    25: \"25x\",\n    30: \"30x\",\n    35: \"35x\",\n    40: \"40x\",\n    45: \"45x\",\n    50: \"50x\",\n  };\n\n  if (!fromToken || !toToken) {\n    return null;\n  }\n\n  let hasZeroBorrowFee = false;\n  let borrowFeeText;\n  if (isLong && toTokenInfo && toTokenInfo.fundingRate) {\n    borrowFeeText = formatAmount(toTokenInfo.fundingRate, 4, 4) + \"% / 1h\";\n    if (toTokenInfo.fundingRate.eq(0)) {\n      // hasZeroBorrowFee = true\n    }\n  }\n  if (isShort && shortCollateralToken && shortCollateralToken.fundingRate) {\n    borrowFeeText = formatAmount(shortCollateralToken.fundingRate, 4, 4) + \"% / 1h\";\n    if (shortCollateralToken.fundingRate.eq(0)) {\n      // hasZeroBorrowFee = true\n    }\n  }\n\n  function setFromValueToMaximumAvailable() {\n    if (!fromToken || !fromBalance) {\n      return;\n    }\n\n    const maxAvailableAmount = fromToken.isNative ? fromBalance.sub(bigNumberify(DUST_BNB).mul(2)) : fromBalance;\n    setFromValue(formatAmountFree(maxAvailableAmount, fromToken.decimals, fromToken.decimals));\n    setAnchorOnFromAmount(true);\n  }\n\n  function shouldShowMaxButton() {\n    if (!fromToken || !fromBalance) {\n      return false;\n    }\n    const maxAvailableAmount = fromToken.isNative ? fromBalance.sub(bigNumberify(DUST_BNB).mul(2)) : fromBalance;\n    return fromValue !== formatAmountFree(maxAvailableAmount, fromToken.decimals, fromToken.decimals);\n  }\n\n  const ERROR_TOOLTIP_MSG = {\n    [ErrorCode.InsufficientLiquiditySwap]: t`Swap amount exceeds available liquidity.`,\n    [ErrorCode.InsufficientLiquidityLeverage]: (\n      <Trans>\n        <p>{toToken.symbol} is required for collateral.</p>\n        <p>\n          Swap amount from {fromToken.symbol} to {toToken.symbol} exceeds {toToken.symbol} available liquidity. Reduce\n          the \"Pay\" size, or use {toToken.symbol} as the \"Pay\" token to use it for collateral.\n        </p>\n        <ExternalLink href={get1InchSwapUrl(chainId, fromToken.symbol, toToken.symbol)}>\n          You can buy {toToken.symbol} on 1inch.\n        </ExternalLink>\n      </Trans>\n    ),\n    [ErrorCode.TokenPoolExceeded]: (\n      <Trans>\n        <p>{toToken.symbol} is required for collateral.</p>\n        <p>\n          Swap amount from {fromToken.symbol} to {toToken.symbol} exceeds {fromToken.symbol} acceptable amount. Reduce\n          the \"Pay\" size, or use {toToken.symbol} as the \"Pay\" token to use it for collateral.\n        </p>\n        <ExternalLink href={get1InchSwapUrl(chainId, fromToken.symbol, toToken.symbol)}>\n          You can buy {toToken.symbol} on 1inch.\n        </ExternalLink>\n      </Trans>\n    ),\n    [ErrorCode.TokenPoolExceededShorts]: (\n      <Trans>\n        <p>{shortCollateralToken.symbol} is required for collateral.</p>\n        <p>\n          Swap amount from {fromToken.symbol} to {shortCollateralToken.symbol} exceeds {fromToken.symbol} acceptable\n          amount. Reduce the \"Pay\" size, or use {shortCollateralToken.symbol} as the \"Pay\" token to use it for\n          collateral.\n        </p>\n        <ExternalLink href={get1InchSwapUrl(chainId, fromToken.symbol, shortCollateralToken.symbol)}>\n          You can buy {shortCollateralToken.symbol} on 1inch.\n        </ExternalLink>\n      </Trans>\n    ),\n    [ErrorCode.InsufficientCollateralIn]: (\n      <Trans>\n        <p>{shortCollateralToken.symbol} is required for collateral.</p>\n        <p>\n          Swap amount from {fromToken.symbol} to {shortCollateralToken.symbol} exceeds {shortCollateralToken.symbol}{\" \"}\n          available liquidity. Reduce the \"Pay\" size, or change the \"Collateral In\" token.\n        </p>\n      </Trans>\n    ),\n    [ErrorCode.InsufficientProfitLiquidity]: (\n      <Trans>\n        <p>{shortCollateralToken.symbol} is required for collateral.</p>\n        <p>\n          Short amount for {toToken.symbol} with {shortCollateralToken.symbol} exceeds potential profits liquidity.\n          Reduce the \"Short Position\" size, or change the \"Collateral In\" token.\n        </p>\n      </Trans>\n    ),\n  };\n\n  const SWAP_LABELS = {\n    [LONG]: t`Long`,\n    [SHORT]: t`Short`,\n    [SWAP]: t`Swap`,\n  };\n\n  function renderPrimaryButton() {\n    const [errorMessage, errorType, errorCode] = getError();\n    const primaryTextMessage = getPrimaryText();\n    if (errorType === ErrorDisplayType.Tooltip && errorMessage === primaryTextMessage && ERROR_TOOLTIP_MSG[errorCode]) {\n      return (\n        <Tooltip\n          isHandlerDisabled\n          handle={\n            <Button variant=\"primary-action\" className=\"w-100\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n              {primaryTextMessage}\n            </Button>\n          }\n          position=\"center-bottom\"\n          className=\"Tooltip-flex\"\n          renderContent={() => ERROR_TOOLTIP_MSG[errorCode]}\n        />\n      );\n    }\n    return (\n      <Button variant=\"primary-action\" className=\"w-100\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n        {primaryTextMessage}\n      </Button>\n    );\n  }\n\n  return (\n    <div className=\"Exchange-swap-box\">\n      {/* <div className=\"Exchange-swap-wallet-box App-box\">\n        {active && <div className=\"Exchange-swap-account\" >\n        </div>}\n      </div> */}\n      <div className=\"Exchange-swap-box-inner App-box-highlight\">\n        <div>\n          <Tab\n            icons={SWAP_ICONS}\n            options={SWAP_OPTIONS}\n            optionLabels={SWAP_LABELS}\n            option={swapOption}\n            onChange={onSwapOptionChange}\n            className=\"Exchange-swap-option-tabs\"\n          />\n          {flagOrdersEnabled && (\n            <Tab\n              options={orderOptions}\n              optionLabels={orderOptionLabels}\n              className=\"Exchange-swap-order-type-tabs\"\n              type=\"inline\"\n              option={orderOption}\n              onChange={onOrderOptionChange}\n            />\n          )}\n        </div>\n        {showFromAndToSection && (\n          <React.Fragment>\n            <div className=\"Exchange-swap-section\">\n              <div className=\"Exchange-swap-section-top\">\n                <div className=\"muted\">\n                  {fromUsdMin && (\n                    <div className=\"Exchange-swap-usd\">\n                      <Trans>Pay: {formatAmount(fromUsdMin, USD_DECIMALS, 2, true)} USD</Trans>\n                    </div>\n                  )}\n                  {!fromUsdMin && t`Pay`}\n                </div>\n                {fromBalance && (\n                  <div className=\"muted align-right clickable\" onClick={setFromValueToMaximumAvailable}>\n                    <Trans>Balance: {formatAmount(fromBalance, fromToken.decimals, 4, true)}</Trans>\n                  </div>\n                )}\n              </div>\n              <div className=\"Exchange-swap-section-bottom\">\n                <div className=\"Exchange-swap-input-container\">\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    placeholder=\"0.0\"\n                    className=\"Exchange-swap-input\"\n                    value={fromValue}\n                    onChange={onFromValueChange}\n                  />\n                  {shouldShowMaxButton() && (\n                    <div className=\"Exchange-swap-max\" onClick={setFromValueToMaximumAvailable}>\n                      <Trans>MAX</Trans>\n                    </div>\n                  )}\n                </div>\n                <div>\n                  <TokenSelector\n                    label={t`Pay`}\n                    chainId={chainId}\n                    tokenAddress={fromTokenAddress}\n                    onSelectToken={onSelectFromToken}\n                    tokens={fromTokens}\n                    infoTokens={infoTokens}\n                    showMintingCap={false}\n                    showTokenImgInDropdown={true}\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"Exchange-swap-ball-container\">\n              <div className=\"Exchange-swap-ball\" onClick={switchTokens}>\n                <IoMdSwap className=\"Exchange-swap-ball-icon\" />\n              </div>\n            </div>\n            <div className=\"Exchange-swap-section\">\n              <div className=\"Exchange-swap-section-top\">\n                <div className=\"muted\">\n                  {toUsdMax && (\n                    <div className=\"Exchange-swap-usd\">\n                      {getToLabel()}: {formatAmount(toUsdMax, USD_DECIMALS, 2, true)} USD\n                    </div>\n                  )}\n                  {!toUsdMax && getToLabel()}\n                </div>\n                {toBalance && isSwap && (\n                  <div className=\"muted align-right\">\n                    <Trans>Balance</Trans>: {formatAmount(toBalance, toToken.decimals, 4, true)}\n                  </div>\n                )}\n                {(isLong || isShort) && hasLeverageOption && (\n                  <div className=\"muted align-right\">\n                    <Trans>Leverage</Trans>: {parseFloat(leverageOption).toFixed(2)}x\n                  </div>\n                )}\n              </div>\n              <div className=\"Exchange-swap-section-bottom\">\n                <div>\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    placeholder=\"0.0\"\n                    className=\"Exchange-swap-input\"\n                    value={toValue}\n                    onChange={onToValueChange}\n                  />\n                </div>\n                <div>\n                  <TokenSelector\n                    label={getTokenLabel()}\n                    chainId={chainId}\n                    tokenAddress={toTokenAddress}\n                    onSelectToken={onSelectToToken}\n                    tokens={toTokens}\n                    infoTokens={infoTokens}\n                    showTokenImgInDropdown={true}\n                  />\n                </div>\n              </div>\n            </div>\n          </React.Fragment>\n        )}\n        {showTriggerRatioSection && (\n          <div className=\"Exchange-swap-section\">\n            <div className=\"Exchange-swap-section-top\">\n              <div className=\"muted\">\n                <Trans>Price</Trans>\n              </div>\n              {fromTokenInfo && toTokenInfo && (\n                <div\n                  className=\"muted align-right clickable\"\n                  onClick={() => {\n                    setTriggerRatioValue(\n                      formatAmountFree(\n                        getExchangeRate(fromTokenInfo, toTokenInfo, triggerRatioInverted),\n                        USD_DECIMALS,\n                        10\n                      )\n                    );\n                  }}\n                >\n                  {formatAmount(getExchangeRate(fromTokenInfo, toTokenInfo, triggerRatioInverted), USD_DECIMALS, 4)}\n                </div>\n              )}\n            </div>\n            <div className=\"Exchange-swap-section-bottom\">\n              <div className=\"Exchange-swap-input-container\">\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  placeholder=\"0.0\"\n                  className=\"Exchange-swap-input small\"\n                  value={triggerRatioValue}\n                  onChange={onTriggerRatioChange}\n                />\n              </div>\n              {(() => {\n                if (!toTokenInfo) return;\n                if (!fromTokenInfo) return;\n                const [tokenA, tokenB] = triggerRatioInverted\n                  ? [toTokenInfo, fromTokenInfo]\n                  : [fromTokenInfo, toTokenInfo];\n                return (\n                  <div className=\"PositionEditor-token-symbol\">\n                    {tokenA.symbol}&nbsp;per&nbsp;{tokenB.symbol}\n                  </div>\n                );\n              })()}\n            </div>\n          </div>\n        )}\n        {showTriggerPriceSection && (\n          <div className=\"Exchange-swap-section\">\n            <div className=\"Exchange-swap-section-top\">\n              <div className=\"muted\">\n                <Trans>Price</Trans>\n              </div>\n              <div\n                className=\"muted align-right clickable\"\n                onClick={() => {\n                  setTriggerPriceValue(formatAmountFree(entryMarkPrice, USD_DECIMALS, 2));\n                }}\n              >\n                <Trans>Mark: {formatAmount(entryMarkPrice, USD_DECIMALS, 2, true)}</Trans>\n              </div>\n            </div>\n            <div className=\"Exchange-swap-section-bottom\">\n              <div className=\"Exchange-swap-input-container\">\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  placeholder=\"0.0\"\n                  className=\"Exchange-swap-input\"\n                  value={triggerPriceValue}\n                  onChange={onTriggerPriceChange}\n                />\n              </div>\n              <div className=\"PositionEditor-token-symbol\">USD</div>\n            </div>\n          </div>\n        )}\n        {isSwap && (\n          <div className=\"Exchange-swap-box-info\">\n            <ExchangeInfoRow label={t`Fees`}>\n              <div>\n                {!fees && \"-\"}\n                {fees && (\n                  <div>\n                    {formatAmount(feeBps, 2, 2, false)}%&nbsp; ({formatAmount(fees, fromToken.decimals, 4, true)}{\" \"}\n                    {fromToken.symbol}: ${formatAmount(feesUsd, USD_DECIMALS, 2, true)})\n                  </div>\n                )}\n              </div>\n            </ExchangeInfoRow>\n          </div>\n        )}\n        {(isLong || isShort) && !isStopOrder && (\n          <div className=\"Exchange-leverage-box\">\n            <div className=\"Exchange-leverage-slider-settings\">\n              <Checkbox isChecked={isLeverageSliderEnabled} setIsChecked={setIsLeverageSliderEnabled}>\n                <span className=\"muted\">Leverage slider</span>\n              </Checkbox>\n            </div>\n            {isLeverageSliderEnabled && (\n              <div\n                className={cx(\"Exchange-leverage-slider\", \"App-slider\", {\n                  positive: isLong,\n                  negative: isShort,\n                })}\n              >\n                <Slider\n                  min={1.1}\n                  max={MAX_ALLOWED_LEVERAGE / BASIS_POINTS_DIVISOR}\n                  step={0.1}\n                  marks={leverageMarks}\n                  handle={leverageSliderHandle}\n                  onChange={(value) => setLeverageOption(value)}\n                  defaultValue={leverageOption}\n                />\n              </div>\n            )}\n            {isShort && (\n              <div className=\"Exchange-info-row\">\n                <div className=\"Exchange-info-label\">\n                  <Trans>Collateral In</Trans>\n                </div>\n\n                <div className=\"align-right\">\n                  <TokenSelector\n                    label={t`Collateral In`}\n                    chainId={chainId}\n                    tokenAddress={shortCollateralAddress}\n                    onSelectToken={onSelectShortCollateralAddress}\n                    tokens={stableTokens}\n                    showTokenImgInDropdown={true}\n                  />\n                </div>\n              </div>\n            )}\n            {isLong && (\n              <div className=\"Exchange-info-row\">\n                <div className=\"Exchange-info-label\">\n                  <Trans>Collateral In</Trans>\n                </div>\n                <div className=\"align-right\">\n                  <Tooltip\n                    position=\"right-bottom\"\n                    handle=\"USD\"\n                    renderContent={() => (\n                      <span className=\"SwapBox-collateral-tooltip-text\">\n                        <Trans>\n                          A snapshot of the USD value of your {existingPosition?.collateralToken?.symbol} collateral is\n                          taken when the position is opened.\n                        </Trans>\n                        <br />\n                        <br />\n                        <Trans>\n                          When closing the position, you can select which token you would like to receive the profits\n                          in.\n                        </Trans>\n                      </span>\n                    )}\n                  />\n                </div>\n              </div>\n            )}\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Leverage</Trans>\n              </div>\n              <div className=\"align-right\">\n                {hasExistingPosition && toAmount && toAmount.gt(0) && (\n                  <div className=\"inline-block muted\">\n                    {formatAmount(existingPosition.leverage, 4, 2)}x\n                    <BsArrowRight className=\"transition-arrow\" />\n                  </div>\n                )}\n                {toAmount && leverage && leverage.gt(0) && `${formatAmount(leverage, 4, 2)}x`}\n                {!toAmount && leverage && leverage.gt(0) && `-`}\n                {leverage && leverage.eq(0) && `-`}\n              </div>\n            </div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Entry Price</Trans>\n              </div>\n              <div className=\"align-right\">\n                {hasExistingPosition && toAmount && toAmount.gt(0) && (\n                  <div className=\"inline-block muted\">\n                    ${formatAmount(existingPosition.averagePrice, USD_DECIMALS, 2, true)}\n                    <BsArrowRight className=\"transition-arrow\" />\n                  </div>\n                )}\n                {nextAveragePrice && `$${formatAmount(nextAveragePrice, USD_DECIMALS, 2, true)}`}\n                {!nextAveragePrice && `-`}\n              </div>\n            </div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Liq. Price</Trans>\n              </div>\n              <div className=\"align-right\">\n                {hasExistingPosition && toAmount && toAmount.gt(0) && (\n                  <div className=\"inline-block muted\">\n                    ${formatAmount(existingLiquidationPrice, USD_DECIMALS, 2, true)}\n                    <BsArrowRight className=\"transition-arrow\" />\n                  </div>\n                )}\n                {toAmount &&\n                  displayLiquidationPrice &&\n                  `$${formatAmount(displayLiquidationPrice, USD_DECIMALS, 2, true)}`}\n                {!toAmount && displayLiquidationPrice && `-`}\n                {!displayLiquidationPrice && `-`}\n              </div>\n            </div>\n            <ExchangeInfoRow label={t`Fees`}>\n              <div>\n                {!feesUsd && \"-\"}\n                {feesUsd && (\n                  <Tooltip\n                    handle={`$${formatAmount(feesUsd, USD_DECIMALS, 2, true)}`}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      return (\n                        <div>\n                          {swapFees && (\n                            <div>\n                              <Trans>{collateralToken.symbol} is required for collateral.</Trans> <br />\n                              <br />\n                              <StatsTooltipRow\n                                label={t`Swap Fee`}\n                                value={formatAmount(swapFees, USD_DECIMALS, 2, true)}\n                              />\n                            </div>\n                          )}\n                          <div>\n                            <StatsTooltipRow\n                              label={t`Open Fee`}\n                              value={formatAmount(positionFee, USD_DECIMALS, 2, true)}\n                            />\n                          </div>\n                          <br />\n                          <div className=\"PositionSeller-fee-item\">\n                            <Trans>\n                              <ExternalLink href=\"https://gmxio.gitbook.io/gmx/trading#fees\">More Info</ExternalLink>{\" \"}\n                              about fees.\n                            </Trans>\n                          </div>\n                        </div>\n                      );\n                    }}\n                  />\n                )}\n              </div>\n            </ExchangeInfoRow>\n          </div>\n        )}\n        {isStopOrder && (\n          <div className=\"Exchange-swap-section Exchange-trigger-order-info\">\n            <Trans>\n              Take-profit and stop-loss orders can be set after opening a position. <br />\n              <br />\n              There will be a \"Close\" button on each position row, clicking this will display the option to set trigger\n              orders. <br />\n              <br />\n              For screenshots and more information, please see the{\" \"}\n              <ExternalLink href=\"https://gmxio.gitbook.io/gmx/trading#stop-loss-take-profit-orders\">docs</ExternalLink>\n              .\n            </Trans>\n          </div>\n        )}\n        <div className=\"Exchange-swap-button-container\">{renderPrimaryButton()}</div>\n      </div>\n      {isSwap && (\n        <div className=\"Exchange-swap-market-box App-box App-box-border\">\n          <div className=\"Exchange-swap-market-box-title\">\n            <Trans>Swap</Trans>\n          </div>\n          <div className=\"App-card-divider\"></div>\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">\n              <Trans>{fromToken.symbol} Price</Trans>\n            </div>\n            <div className=\"align-right\">\n              ${fromTokenInfo && formatAmount(fromTokenInfo.minPrice, USD_DECIMALS, 2, true)}\n            </div>\n          </div>\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">\n              <Trans>{toToken.symbol} Price</Trans>\n            </div>\n            <div className=\"align-right\">\n              ${toTokenInfo && formatAmount(toTokenInfo.maxPrice, USD_DECIMALS, 2, true)}\n            </div>\n          </div>\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">\n              <Trans>Available Liquidity</Trans>\n            </div>\n\n            <div className=\"align-right al-swap\">\n              <Tooltip\n                handle={`$${formatAmount(maxSwapAmountUsd, USD_DECIMALS, 2, true)}`}\n                position=\"right-bottom\"\n                renderContent={() => {\n                  return (\n                    <div>\n                      <StatsTooltipRow\n                        label={t`Max ${fromTokenInfo.symbol} in`}\n                        value={[\n                          `${formatAmount(maxFromTokenIn, fromTokenInfo.decimals, 0, true)} ${fromTokenInfo.symbol}`,\n                          `($${formatAmount(maxFromTokenInUSD, USD_DECIMALS, 0, true)})`,\n                        ]}\n                      />\n                      <StatsTooltipRow\n                        label={t`Max ${toTokenInfo.symbol} out`}\n                        value={[\n                          `${formatAmount(maxToTokenOut, toTokenInfo.decimals, 0, true)} ${toTokenInfo.symbol}`,\n                          `($${formatAmount(maxToTokenOutUSD, USD_DECIMALS, 0, true)})`,\n                        ]}\n                      />\n                    </div>\n                  );\n                }}\n              />\n            </div>\n          </div>\n          {!isMarketOrder && (\n            <ExchangeInfoRow label={t`Price`}>\n              {getExchangeRateDisplay(getExchangeRate(fromTokenInfo, toTokenInfo), fromToken, toToken)}\n            </ExchangeInfoRow>\n          )}\n        </div>\n      )}\n      {(isLong || isShort) && (\n        <div className=\"Exchange-swap-market-box App-box App-box-border\">\n          <div className=\"Exchange-swap-market-box-title\">\n            {isLong ? t`Long` : t`Short`}&nbsp;{toToken.symbol}\n          </div>\n          <div className=\"App-card-divider\" />\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">\n              <Trans>Entry Price</Trans>\n            </div>\n            <div className=\"align-right\">\n              <Tooltip\n                handle={`$${formatAmount(entryMarkPrice, USD_DECIMALS, 2, true)}`}\n                position=\"right-bottom\"\n                renderContent={() => {\n                  return (\n                    <div>\n                      <Trans>\n                        The position will be opened at {formatAmount(entryMarkPrice, USD_DECIMALS, 2, true)} USD with a\n                        max slippage of {parseFloat(savedSlippageAmount / 100.0).toFixed(2)}%.\n                        <br />\n                        <br />\n                        The slippage amount can be configured under Settings, found by clicking on your address at the\n                        top right of the page after connecting your wallet.\n                        <br />\n                        <br />\n                        <ExternalLink href=\"https://gmxio.gitbook.io/gmx/trading#opening-a-position\">\n                          More Info\n                        </ExternalLink>\n                      </Trans>\n                    </div>\n                  );\n                }}\n              />\n            </div>\n          </div>\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">\n              <Trans>Exit Price</Trans>\n            </div>\n            <div className=\"align-right\">\n              <Tooltip\n                handle={`$${formatAmount(exitMarkPrice, USD_DECIMALS, 2, true)}`}\n                position=\"right-bottom\"\n                renderContent={() => {\n                  return (\n                    <div>\n                      <Trans>\n                        If you have an existing position, the position will be closed at{\" \"}\n                        {formatAmount(entryMarkPrice, USD_DECIMALS, 2, true)} USD.\n                        <br />\n                        <br />\n                        This exit price will change with the price of the asset.\n                        <br />\n                        <br />\n                        <ExternalLink href=\"https://gmxio.gitbook.io/gmx/trading#opening-a-position\">\n                          More Info\n                        </ExternalLink>\n                      </Trans>\n                    </div>\n                  );\n                }}\n              />\n            </div>\n          </div>\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">\n              <Trans>Borrow Fee</Trans>\n            </div>\n            <div className=\"align-right\">\n              <Tooltip\n                handle={borrowFeeText}\n                position=\"right-bottom\"\n                renderContent={() => {\n                  return (\n                    <div>\n                      {hasZeroBorrowFee && (\n                        <div>\n                          {isLong && t`There are more shorts than longs, borrow fees for longing is currently zero`}\n                          {isShort && t`There are more longs than shorts, borrow fees for shorting is currently zero`}\n                        </div>\n                      )}\n                      {!hasZeroBorrowFee && (\n                        <div>\n                          <Trans>\n                            The borrow fee is calculated as (assets borrowed) / (total assets in pool) * 0.01% per hour.\n                          </Trans>\n                          <br />\n                          <br />\n                          {isShort && t`You can change the \"Collateral In\" token above to find lower fees`}\n                        </div>\n                      )}\n                      <br />\n                      <ExternalLink href=\"https://gmxio.gitbook.io/gmx/trading#opening-a-position\">\n                        <Trans>More Info</Trans>\n                      </ExternalLink>\n                    </div>\n                  );\n                }}\n              >\n                {!hasZeroBorrowFee && null}\n              </Tooltip>\n            </div>\n          </div>\n          {renderAvailableLongLiquidity()}\n          {isShort && toTokenInfo.hasMaxAvailableShort && (\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Available Liquidity</Trans>\n              </div>\n              <div className=\"align-right\">\n                <Tooltip\n                  handle={`$${formatAmount(toTokenInfo.maxAvailableShort, USD_DECIMALS, 2, true)}`}\n                  position=\"right-bottom\"\n                  renderContent={() => {\n                    return (\n                      <>\n                        <StatsTooltipRow\n                          label={t`Max ${toTokenInfo.symbol} short capacity`}\n                          value={formatAmount(toTokenInfo.maxGlobalShortSize, USD_DECIMALS, 0, true)}\n                        />\n                        <StatsTooltipRow\n                          label={t`Current ${toTokenInfo.symbol} shorts`}\n                          value={formatAmount(toTokenInfo.globalShortSize, USD_DECIMALS, 0, true)}\n                        />\n                      </>\n                    );\n                  }}\n                ></Tooltip>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n      <UsefulLinks className=\"Useful-links-swapbox\" />\n      <NoLiquidityErrorModal\n        chainId={chainId}\n        fromToken={fromToken}\n        toToken={toToken}\n        shortCollateralToken={shortCollateralToken}\n        isLong={isLong}\n        isShort={isShort}\n        modalError={modalError}\n        setModalError={setModalError}\n      />\n      {renderOrdersToa()}\n      {isConfirming && (\n        <ConfirmationBox\n          library={library}\n          isHigherSlippageAllowed={isHigherSlippageAllowed}\n          setIsHigherSlippageAllowed={setIsHigherSlippageAllowed}\n          orders={orders}\n          isSwap={isSwap}\n          isLong={isLong}\n          isMarketOrder={isMarketOrder}\n          orderOption={orderOption}\n          isShort={isShort}\n          fromToken={fromToken}\n          fromTokenInfo={fromTokenInfo}\n          toToken={toToken}\n          toTokenInfo={toTokenInfo}\n          toAmount={toAmount}\n          fromAmount={fromAmount}\n          feeBps={feeBps}\n          onConfirmationClick={onConfirmationClick}\n          setIsConfirming={setIsConfirming}\n          hasExistingPosition={hasExistingPosition}\n          shortCollateralAddress={shortCollateralAddress}\n          shortCollateralToken={shortCollateralToken}\n          leverage={leverage}\n          existingPosition={existingPosition}\n          existingLiquidationPrice={existingLiquidationPrice}\n          displayLiquidationPrice={displayLiquidationPrice}\n          nextAveragePrice={nextAveragePrice}\n          triggerPriceUsd={triggerPriceUsd}\n          triggerRatio={triggerRatio}\n          fees={fees}\n          feesUsd={feesUsd}\n          isSubmitting={isSubmitting}\n          isPendingConfirmation={isPendingConfirmation}\n          fromUsdMin={fromUsdMin}\n          toUsdMax={toUsdMax}\n          collateralTokenAddress={collateralTokenAddress}\n          infoTokens={infoTokens}\n          chainId={chainId}\n          setPendingTxns={setPendingTxns}\n          pendingTxns={pendingTxns}\n          minExecutionFee={minExecutionFee}\n          minExecutionFeeUSD={minExecutionFeeUSD}\n          minExecutionFeeErrorMessage={minExecutionFeeErrorMessage}\n          entryMarkPrice={entryMarkPrice}\n          swapFees={swapFees}\n          positionFee={positionFee}\n        />\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Menu } from \"@headlessui/react\";\nimport { FaChevronDown } from \"react-icons/fa\";\nimport cx from \"classnames\";\nimport \"./ChartTokenSelector.css\";\nimport { LONG, SHORT, SWAP } from \"lib/legacy\";\nimport { getTokens, getWhitelistedTokens } from \"config/tokens\";\n\nexport default function ChartTokenSelector(props) {\n  const { chainId, selectedToken, onSelectToken, swapOption } = props;\n\n  const isLong = swapOption === LONG;\n  const isShort = swapOption === SHORT;\n  const isSwap = swapOption === SWAP;\n\n  let options = getTokens(chainId);\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const indexTokens = whitelistedTokens.filter((token) => !token.isStable && !token.isWrapped);\n  const shortableTokens = indexTokens.filter((token) => token.isShortable);\n\n  if (isLong) {\n    options = indexTokens;\n  }\n  if (isShort) {\n    options = shortableTokens;\n  }\n\n  const onSelect = async (token) => {\n    onSelectToken(token);\n  };\n\n  var value = selectedToken;\n\n  return (\n    <Menu>\n      <Menu.Button as=\"div\" disabled={isSwap}>\n        <button className={cx(\"App-cta small transparent chart-token-selector\", { \"default-cursor\": isSwap })}>\n          <span className=\"chart-token-selector--current\">{value.symbol} / USD</span>\n          {!isSwap && <FaChevronDown />}\n        </button>\n      </Menu.Button>\n      <div className=\"chart-token-menu\">\n        <Menu.Items as=\"div\" className=\"menu-items chart-token-menu-items\">\n          {options.map((option, index) => (\n            <Menu.Item key={index}>\n              <div\n                className=\"menu-item\"\n                onClick={() => {\n                  onSelect(option);\n                }}\n              >\n                <span style={{ marginLeft: 5 }} className=\"token-label\">\n                  {option.symbol} / USD\n                </span>\n              </div>\n            </Menu.Item>\n          ))}\n        </Menu.Items>\n      </div>\n    </Menu>\n  );\n}\n","import { ARBITRUM, AVALANCHE } from \"config/chains\";\nimport { formatTVDate, formatTVTime } from \"lib/dates\";\n\nconst RED = \"#fa3c58\";\nconst GREEN = \"#0ecc83\";\nexport const DEFAULT_PERIOD = \"4h\";\n\nconst chartStyleOverrides = [\"candleStyle\", \"hollowCandleStyle\", \"haStyle\"].reduce((acc, cv) => {\n  acc[`mainSeriesProperties.${cv}.drawWick`] = true;\n  acc[`mainSeriesProperties.${cv}.drawBorder`] = false;\n  acc[`mainSeriesProperties.${cv}.upColor`] = GREEN;\n  acc[`mainSeriesProperties.${cv}.downColor`] = RED;\n  acc[`mainSeriesProperties.${cv}.wickUpColor`] = GREEN;\n  acc[`mainSeriesProperties.${cv}.wickDownColor`] = RED;\n  acc[`mainSeriesProperties.${cv}.borderUpColor`] = GREEN;\n  acc[`mainSeriesProperties.${cv}.borderDownColor`] = RED;\n  return acc;\n}, {});\n\nconst chartOverrides = {\n  \"paneProperties.background\": \"#16182e\",\n  \"paneProperties.backgroundGradientStartColor\": \"#16182e\",\n  \"paneProperties.backgroundGradientEndColor\": \"#16182e\",\n  \"paneProperties.backgroundType\": \"solid\",\n  \"paneProperties.vertGridProperties.color\": \"rgba(35, 38, 59, 1)\",\n  \"paneProperties.vertGridProperties.style\": 2,\n  \"paneProperties.horzGridProperties.color\": \"rgba(35, 38, 59, 1)\",\n  \"paneProperties.horzGridProperties.style\": 2,\n  \"mainSeriesProperties.priceLineColor\": \"#3a3e5e\",\n  \"scalesProperties.textColor\": \"#fff\",\n  \"scalesProperties.lineColor\": \"#16182e\",\n  ...chartStyleOverrides,\n};\n\nexport const disabledFeaturesOnMobile = [\"header_saveload\", \"header_fullscreen_button\"];\n\nconst disabledFeatures = [\n  \"volume_force_overlay\",\n  \"show_logo_on_all_charts\",\n  \"caption_buttons_text_if_possible\",\n  \"create_volume_indicator_by_default\",\n  \"header_compare\",\n  \"compare_symbol\",\n  \"display_market_status\",\n  \"header_interval_dialog_button\",\n  \"show_interval_dialog_on_key_press\",\n  \"header_symbol_search\",\n  \"popup_hints\",\n  \"header_in_fullscreen_mode\",\n  \"use_localstorage_for_settings\",\n  \"right_bar_stays_on_scroll\",\n  \"symbol_info\",\n];\nconst enabledFeatures = [\n  \"side_toolbar_in_fullscreen_mode\",\n  \"header_in_fullscreen_mode\",\n  \"hide_resolution_in_legend\",\n  \"items_favoriting\",\n  \"hide_left_toolbar_by_default\",\n];\n\nexport const defaultChartProps = {\n  theme: \"Dark\",\n  locale: \"en\",\n  library_path: \"/charting_library/\",\n  clientId: \"tradingview.com\",\n  userId: \"public_user_id\",\n  fullscreen: false,\n  autosize: true,\n  header_widget_dom_node: false,\n  overrides: chartOverrides,\n  enabled_features: enabledFeatures,\n  disabled_features: disabledFeatures,\n  custom_css_url: \"/tradingview-chart.css\",\n  loading_screen: { backgroundColor: \"#16182e\", foregroundColor: \"#2962ff\" },\n  favorites: {\n    intervals: [\"5\", \"15\", \"60\", \"240\", \"1D\"],\n  },\n  custom_formatters: {\n    timeFormatter: {\n      format: (date) => formatTVTime(date),\n    },\n    dateFormatter: {\n      format: (date) => formatTVDate(date),\n    },\n  },\n};\n\nexport const availableNetworksForChart = [ARBITRUM, AVALANCHE];\n","export const SUPPORTED_RESOLUTIONS = { 5: \"5m\", 15: \"15m\", 60: \"1h\", 240: \"4h\", \"1D\": \"1d\" };\nexport const LAST_BAR_REFRESH_INTERVAL = 15000; // 15 seconds\nexport const TV_CHART_RELOAD_INTERVAL = 15 * 60 * 1000; // 15 minutes\n","import { timezoneOffset } from \"domain/prices\";\nimport { CHART_PERIODS } from \"lib/legacy\";\nimport { Bar } from \"./types\";\n\nexport function getObjectKeyFromValue(value, object) {\n  return Object.keys(object).find((key) => object[key] === value);\n}\n\nexport function formatTimeInBarToMs(bar: Bar) {\n  return {\n    ...bar,\n    time: bar.time * 1000,\n  };\n}\n\nexport function getCurrentCandleTime(period: string) {\n  // Converts current time to seconds, rounds down to nearest period, adds timezone offset, and converts back to milliseconds\n  const periodSeconds = CHART_PERIODS[period];\n  return Math.floor(Date.now() / 1000 / periodSeconds) * periodSeconds + timezoneOffset;\n}\n","import { HistoryCallback, PeriodParams, ResolutionString, SubscribeBarsCallback } from \"charting_library\";\nimport { getNativeToken, getTokens, isChartAvailabeForToken } from \"config/tokens\";\nimport { SUPPORTED_RESOLUTIONS } from \"config/tradingview\";\nimport { useChainId } from \"lib/chains\";\nimport { useEffect, useMemo, useRef } from \"react\";\nimport { TVDataProvider } from \"./TVDataProvider\";\nimport { SymbolInfo } from \"./types\";\nimport { formatTimeInBarToMs } from \"./utils\";\n\nconst configurationData = {\n  supported_resolutions: Object.keys(SUPPORTED_RESOLUTIONS),\n  supports_marks: false,\n  supports_timescale_marks: false,\n  supports_time: true,\n  reset_cache_timeout: 100,\n};\n\ntype Props = {\n  dataProvider?: TVDataProvider;\n};\n\nexport default function useTVDatafeed({ dataProvider }: Props) {\n  const { chainId } = useChainId();\n  const intervalRef = useRef<ReturnType<typeof setInterval> | undefined>();\n  const resetCacheRef = useRef<() => void | undefined>();\n  const activeTicker = useRef<string | undefined>();\n  const tvDataProvider = useRef<TVDataProvider>();\n  const shouldRefetchBars = useRef<boolean>(false);\n\n  useEffect(() => {\n    if (dataProvider && tvDataProvider.current !== dataProvider) {\n      tvDataProvider.current = dataProvider;\n    }\n  }, [dataProvider]);\n\n  return useMemo(() => {\n    return {\n      resetCache: function () {\n        shouldRefetchBars.current = true;\n        resetCacheRef.current?.();\n        shouldRefetchBars.current = false;\n      },\n      datafeed: {\n        onReady: (callback) => {\n          setTimeout(() => callback(configurationData));\n        },\n        resolveSymbol(symbolName, onSymbolResolvedCallback) {\n          if (!isChartAvailabeForToken(chainId, symbolName)) {\n            symbolName = getNativeToken(chainId).symbol;\n          }\n\n          const stableTokens = getTokens(chainId)\n            .filter((t) => t.isStable)\n            .map((t) => t.symbol);\n          const symbolInfo = {\n            name: symbolName,\n            type: \"crypto\",\n            description: symbolName + \" / USD\",\n            ticker: symbolName,\n            session: \"24x7\",\n            minmov: 1,\n            pricescale: 100,\n            timezone: \"Etc/UTC\",\n            has_intraday: true,\n            has_daily: true,\n            currency_code: \"USD\",\n            visible_plots_set: \"ohlc\",\n            data_status: \"streaming\",\n            isStable: stableTokens.includes(symbolName),\n          };\n          setTimeout(() => onSymbolResolvedCallback(symbolInfo));\n        },\n\n        async getBars(\n          symbolInfo: SymbolInfo,\n          resolution: ResolutionString,\n          periodParams: PeriodParams,\n          onHistoryCallback: HistoryCallback,\n          onErrorCallback: (error: string) => void\n        ) {\n          if (!SUPPORTED_RESOLUTIONS[resolution]) {\n            return onErrorCallback(\"[getBars] Invalid resolution\");\n          }\n          const { ticker, isStable } = symbolInfo;\n          if (activeTicker.current !== ticker) {\n            activeTicker.current = ticker;\n          }\n\n          try {\n            if (!ticker) {\n              onErrorCallback(\"Invalid ticker!\");\n              return;\n            }\n            const bars = await tvDataProvider.current?.getBars(\n              chainId,\n              ticker,\n              resolution,\n              isStable,\n              periodParams,\n              shouldRefetchBars.current\n            );\n            const noData = !bars || bars.length === 0;\n            onHistoryCallback(bars, { noData });\n          } catch {\n            onErrorCallback(\"Unable to load historical data!\");\n          }\n        },\n        async subscribeBars(\n          symbolInfo: SymbolInfo,\n          resolution: ResolutionString,\n          onRealtimeCallback: SubscribeBarsCallback,\n          _subscribeUID,\n          onResetCacheNeededCallback: () => void\n        ) {\n          const { ticker, isStable } = symbolInfo;\n          if (!ticker) {\n            return;\n          }\n          intervalRef.current && clearInterval(intervalRef.current);\n          resetCacheRef.current = onResetCacheNeededCallback;\n          if (!isStable) {\n            intervalRef.current = setInterval(function () {\n              tvDataProvider.current?.getLiveBar(chainId, ticker, resolution).then((bar) => {\n                if (bar && ticker === activeTicker.current) {\n                  onRealtimeCallback(formatTimeInBarToMs(bar));\n                }\n              });\n            }, 500);\n          }\n        },\n        unsubscribeBars: () => {\n          intervalRef.current && clearInterval(intervalRef.current);\n        },\n      },\n    };\n  }, [chainId]);\n}\n","import { ChartData } from \"charting_library\";\nimport { getTokenBySymbol } from \"config/tokens\";\nimport { Token } from \"domain/tokens\";\n\nexport class SaveLoadAdapter {\n  charts: ChartData[] | undefined;\n  setTvCharts: (a: ChartData[]) => void;\n  onSelectToken: (token: Token) => void;\n  chainId: number;\n\n  constructor(\n    chainId: number,\n    charts: ChartData[] | undefined,\n    setTvCharts: (a: ChartData[]) => void,\n    onSelectToken: (token: Token) => void\n  ) {\n    this.charts = charts;\n    this.setTvCharts = setTvCharts;\n    this.chainId = chainId;\n    this.onSelectToken = onSelectToken;\n  }\n\n  getAllCharts() {\n    return Promise.resolve(this.charts);\n  }\n\n  removeChart(id: string) {\n    if (!this.charts) return Promise.reject();\n    for (let i = 0; i < this.charts.length; ++i) {\n      if (this.charts[i].id === id) {\n        this.charts.splice(i, 1);\n        this.setTvCharts(this.charts);\n        return Promise.resolve();\n      }\n    }\n\n    return Promise.reject();\n  }\n\n  saveChart(chartData) {\n    if (!chartData.id) {\n      chartData.id = Math.random().toString();\n    } else {\n      this.removeChart(chartData.id);\n    }\n\n    chartData.timestamp = new Date().valueOf();\n\n    if (this.charts) {\n      this.charts.push(chartData);\n      this.setTvCharts(this.charts);\n    }\n\n    return Promise.resolve(chartData.id);\n  }\n\n  getChartContent(id: string) {\n    if (!this.charts) return Promise.reject();\n    for (let i = 0; i < this.charts.length; ++i) {\n      if (this.charts[i].id === id) {\n        const { content, symbol } = this.charts[i];\n        const tokenInfo = getTokenBySymbol(this.chainId, symbol);\n        this.onSelectToken(tokenInfo);\n        return Promise.resolve(content);\n      }\n    }\n    return Promise.reject();\n  }\n}\n","import \"./Loader.css\";\n\nexport default function Loader() {\n  return (\n    <div className=\"bouncing-loader\">\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n  );\n}\n","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport { TV_CHART_RELOAD_TIMESTAMP_KEY, TV_SAVE_LOAD_CHARTS_KEY } from \"config/localStorage\";\nimport { useLocalStorage, useMedia } from \"react-use\";\nimport { defaultChartProps, DEFAULT_PERIOD, disabledFeaturesOnMobile } from \"./constants\";\nimport useTVDatafeed from \"domain/tradingview/useTVDatafeed\";\nimport { ChartData, IChartingLibraryWidget, IPositionLineAdapter } from \"../../charting_library\";\nimport { getObjectKeyFromValue } from \"domain/tradingview/utils\";\nimport { SaveLoadAdapter } from \"./SaveLoadAdapter\";\nimport { SUPPORTED_RESOLUTIONS, TV_CHART_RELOAD_INTERVAL } from \"config/tradingview\";\nimport { isChartAvailabeForToken } from \"config/tokens\";\nimport { TVDataProvider } from \"domain/tradingview/TVDataProvider\";\nimport Loader from \"components/Common/Loader\";\nimport { useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport { CHART_PERIODS } from \"lib/legacy\";\nimport { Token } from \"domain/tokens\";\n\nexport type ChartLine = {\n  price: number;\n  title: string;\n};\n\ntype Props = {\n  symbol: string;\n  chainId: number;\n  savedShouldShowPositionLines: boolean;\n  chartLines: ChartLine[];\n  onSelectToken: (token: Token) => void;\n  dataProvider?: TVDataProvider;\n};\n\nexport default function TVChartContainer({\n  symbol,\n  chainId,\n  savedShouldShowPositionLines,\n  chartLines,\n  onSelectToken,\n  dataProvider,\n}: Props) {\n  let [period, setPeriod] = useLocalStorageSerializeKey([chainId, \"Chart-period\"], DEFAULT_PERIOD);\n\n  if (!period || !(period in CHART_PERIODS)) {\n    period = DEFAULT_PERIOD;\n  }\n\n  const chartContainerRef = useRef<HTMLDivElement | null>(null);\n  const tvWidgetRef = useRef<IChartingLibraryWidget | null>(null);\n  const [chartReady, setChartReady] = useState(false);\n  const [chartDataLoading, setChartDataLoading] = useState(true);\n  const [tvCharts, setTvCharts] = useLocalStorage<ChartData[] | undefined>(TV_SAVE_LOAD_CHARTS_KEY, []);\n  const { datafeed, resetCache } = useTVDatafeed({ dataProvider });\n  const isMobile = useMedia(\"(max-width: 550px)\");\n  const symbolRef = useRef(symbol);\n\n  const drawLineOnChart = useCallback(\n    (title: string, price: number) => {\n      if (chartReady && tvWidgetRef.current?.activeChart?.().dataReady()) {\n        const chart = tvWidgetRef.current.activeChart();\n        const positionLine = chart.createPositionLine({ disableUndo: true });\n\n        return positionLine\n          .setText(title)\n          .setPrice(price)\n          .setQuantity(\"\")\n          .setLineStyle(1)\n          .setLineLength(1)\n          .setBodyFont(`normal 12pt \"Relative\", sans-serif`)\n          .setBodyTextColor(\"#fff\")\n          .setLineColor(\"#3a3e5e\")\n          .setBodyBackgroundColor(\"#3a3e5e\")\n          .setBodyBorderColor(\"#3a3e5e\");\n      }\n    },\n    [chartReady]\n  );\n\n  /* Tradingview charting library only fetches the historical data once so if the tab is inactive or system is in sleep mode\n  for a long time, the historical data will be outdated. */\n  useEffect(() => {\n    const handleVisibilityChange = () => {\n      if (document.visibilityState === \"hidden\") {\n        localStorage.setItem(TV_CHART_RELOAD_TIMESTAMP_KEY, Date.now().toString());\n      } else {\n        const tvReloadTimestamp = Number(localStorage.getItem(TV_CHART_RELOAD_TIMESTAMP_KEY));\n        if (tvReloadTimestamp && Date.now() - tvReloadTimestamp > TV_CHART_RELOAD_INTERVAL) {\n          if (resetCache) {\n            resetCache();\n            tvWidgetRef.current?.activeChart().resetData();\n          }\n        }\n      }\n    };\n\n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n\n    return () => {\n      document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n    };\n  }, [resetCache]);\n\n  useEffect(\n    function updateLines() {\n      const lines: (IPositionLineAdapter | undefined)[] = [];\n      if (savedShouldShowPositionLines) {\n        chartLines.forEach((order) => {\n          lines.push(drawLineOnChart(order.title, order.price));\n        });\n      }\n      return () => {\n        lines.forEach((line) => line?.remove());\n      };\n    },\n    [chartLines, savedShouldShowPositionLines, drawLineOnChart]\n  );\n\n  useEffect(() => {\n    if (chartReady && tvWidgetRef.current && symbol !== tvWidgetRef.current?.activeChart?.().symbol()) {\n      if (isChartAvailabeForToken(chainId, symbol)) {\n        tvWidgetRef.current.setSymbol(symbol, tvWidgetRef.current.activeChart().resolution(), () => {});\n      }\n    }\n  }, [symbol, chartReady, period, chainId]);\n\n  useEffect(() => {\n    const widgetOptions = {\n      debug: false,\n      symbol: symbolRef.current, // Using ref to avoid unnecessary re-renders on symbol change and still have access to the latest symbol\n      datafeed: datafeed,\n      theme: defaultChartProps.theme,\n      container: chartContainerRef.current,\n      library_path: defaultChartProps.library_path,\n      locale: defaultChartProps.locale,\n      loading_screen: defaultChartProps.loading_screen,\n      enabled_features: defaultChartProps.enabled_features,\n      disabled_features: isMobile\n        ? defaultChartProps.disabled_features.concat(disabledFeaturesOnMobile)\n        : defaultChartProps.disabled_features,\n      client_id: defaultChartProps.clientId,\n      user_id: defaultChartProps.userId,\n      fullscreen: defaultChartProps.fullscreen,\n      autosize: defaultChartProps.autosize,\n      custom_css_url: defaultChartProps.custom_css_url,\n      overrides: defaultChartProps.overrides,\n      interval: getObjectKeyFromValue(period, SUPPORTED_RESOLUTIONS),\n      favorites: defaultChartProps.favorites,\n      custom_formatters: defaultChartProps.custom_formatters,\n      save_load_adapter: new SaveLoadAdapter(chainId, tvCharts, setTvCharts, onSelectToken),\n    };\n    tvWidgetRef.current = new window.TradingView.widget(widgetOptions);\n    tvWidgetRef.current!.onChartReady(function () {\n      setChartReady(true);\n      tvWidgetRef.current!.applyOverrides({\n        \"paneProperties.background\": \"#16182e\",\n        \"paneProperties.backgroundType\": \"solid\",\n      });\n      tvWidgetRef.current\n        ?.activeChart()\n        .onIntervalChanged()\n        .subscribe(null, (interval) => {\n          if (SUPPORTED_RESOLUTIONS[interval]) {\n            const period = SUPPORTED_RESOLUTIONS[interval];\n            setPeriod(period);\n          }\n        });\n\n      tvWidgetRef.current?.activeChart().dataReady(() => {\n        setChartDataLoading(false);\n      });\n    });\n\n    return () => {\n      if (tvWidgetRef.current) {\n        tvWidgetRef.current.remove();\n        tvWidgetRef.current = null;\n        setChartReady(false);\n        setChartDataLoading(true);\n      }\n    };\n    // We don't want to re-initialize the chart when the symbol changes. This will make the chart flicker.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [chainId]);\n\n  return (\n    <div className=\"ExchangeChart-error\">\n      {chartDataLoading && <Loader />}\n      <div\n        style={{ visibility: !chartDataLoading ? \"visible\" : \"hidden\" }}\n        ref={chartContainerRef}\n        className=\"TVChartContainer ExchangeChart-bottom-content\"\n      />\n    </div>\n  );\n}\n","import { getServerUrl } from \"config/backend\";\nimport { getTokenBySymbol, getWrappedToken } from \"config/tokens\";\nimport { getChainlinkChartPricesFromGraph, getChartPricesFromStats, timezoneOffset } from \"domain/prices\";\nimport { CHART_PERIODS } from \"lib/legacy\";\n\nfunction getCurrentBarTimestamp(periodSeconds) {\n  return Math.floor(Date.now() / (periodSeconds * 1000)) * (periodSeconds * 1000);\n}\n\nexport const getTokenChartPrice = async (chainId: number, symbol: string, period: string) => {\n  let prices;\n  try {\n    prices = await getChartPricesFromStats(chainId, symbol, period);\n  } catch (ex) {\n    // eslint-disable-next-line no-console\n    console.warn(ex, \"Switching to graph chainlink data\");\n    try {\n      prices = await getChainlinkChartPricesFromGraph(symbol, period);\n    } catch (ex2) {\n      // eslint-disable-next-line no-console\n      console.warn(\"getChainlinkChartPricesFromGraph failed\", ex2);\n      prices = [];\n    }\n  }\n  return prices;\n};\n\nexport async function getCurrentPriceOfToken(chainId: number, symbol: string) {\n  try {\n    const indexPricesUrl = getServerUrl(chainId, \"/prices\");\n    const response = await fetch(indexPricesUrl);\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    const indexPrices = await response.json();\n    let symbolInfo = getTokenBySymbol(chainId, symbol);\n    if (symbolInfo.isNative) {\n      symbolInfo = getWrappedToken(chainId);\n    }\n\n    return indexPrices[symbolInfo.address];\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.error(err);\n  }\n}\n\nexport function fillBarGaps(prices, periodSeconds) {\n  if (prices.length < 2) return prices;\n\n  const currentBarTimestamp = getCurrentBarTimestamp(periodSeconds) / 1000 + timezoneOffset;\n  let lastBar = prices[prices.length - 1];\n\n  if (lastBar.time !== currentBarTimestamp) {\n    prices.push({\n      ...lastBar,\n      time: currentBarTimestamp,\n    });\n  }\n\n  const newPrices = [prices[0]];\n  let prevTime = prices[0].time;\n\n  for (let i = 1; i < prices.length; i++) {\n    const { time, open } = prices[i];\n    if (prevTime) {\n      const numBarsToFill = Math.floor((time - prevTime) / periodSeconds) - 1;\n      for (let j = numBarsToFill; j > 0; j--) {\n        const newBar = {\n          time: time - j * periodSeconds,\n          open,\n          close: open,\n          high: open * 1.0003,\n          low: open * 0.9996,\n        };\n        newPrices.push(newBar);\n      }\n    }\n    prevTime = time;\n    newPrices.push(prices[i]);\n  }\n\n  return newPrices;\n}\n\nexport function getStableCoinPrice(period: string, from: number, to: number) {\n  const periodSeconds = CHART_PERIODS[period];\n  const fromCandle = Math.floor(from / periodSeconds) * periodSeconds;\n  const toCandle = Math.floor(to / periodSeconds) * periodSeconds;\n  let priceData: any = [];\n  for (let candleTime = fromCandle; candleTime <= toCandle; candleTime += periodSeconds) {\n    priceData.push({\n      time: candleTime,\n      open: 1,\n      close: 1,\n      high: 1,\n      low: 1,\n    });\n  }\n  return priceData.filter((candle) => candle.time >= from && candle.time <= to);\n}\n","import { LAST_BAR_REFRESH_INTERVAL, SUPPORTED_RESOLUTIONS } from \"config/tradingview\";\nimport { getLimitChartPricesFromStats, timezoneOffset } from \"domain/prices\";\nimport { CHART_PERIODS, USD_DECIMALS } from \"lib/legacy\";\nimport { formatAmount } from \"lib/numbers\";\nimport { Bar } from \"./types\";\nimport { formatTimeInBarToMs, getCurrentCandleTime } from \"./utils\";\nimport { fillBarGaps, getCurrentPriceOfToken, getStableCoinPrice, getTokenChartPrice } from \"./requests\";\nimport { BigNumberish } from \"ethers\";\nimport { PeriodParams } from \"charting_library\";\n\nconst initialHistoryBarsInfo = {\n  period: \"\",\n  data: [],\n  ticker: \"\",\n};\n\nexport class TVDataProvider {\n  lastBar: Bar | null;\n  startTime: number;\n  lastTicker: string;\n  lastPeriod: string;\n  barsInfo: {\n    period: string;\n    data: Bar[];\n    ticker: string;\n  };\n\n  constructor() {\n    this.lastBar = null;\n    this.startTime = 0;\n    this.lastTicker = \"\";\n    this.lastPeriod = \"\";\n    this.barsInfo = initialHistoryBarsInfo;\n  }\n\n  async getCurrentPriceOfToken(chainId: number, ticker: string): Promise<BigNumberish> {\n    return getCurrentPriceOfToken(chainId, ticker);\n  }\n\n  async getTokenLastBars(chainId: number, ticker: string, period: string, limit: number): Promise<Bar[]> {\n    return getLimitChartPricesFromStats(chainId, ticker, period, limit);\n  }\n\n  async getTokenChartPrice(chainId: number, ticker: string, period: string): Promise<Bar[]> {\n    return getTokenChartPrice(chainId, ticker, period);\n  }\n\n  async getTokenHistoryBars(\n    chainId: number,\n    ticker: string,\n    period: string,\n    periodParams: PeriodParams,\n    shouldRefetchBars: boolean\n  ): Promise<Bar[]> {\n    const barsInfo = this.barsInfo;\n    if (!barsInfo.data.length || barsInfo.ticker !== ticker || barsInfo.period !== period || shouldRefetchBars) {\n      try {\n        const bars = await this.getTokenChartPrice(chainId, ticker, period);\n        const filledBars = fillBarGaps(bars, CHART_PERIODS[period]);\n        const currentCandleTime = getCurrentCandleTime(period);\n        const lastCandleTime = currentCandleTime - CHART_PERIODS[period];\n        const lastBar = filledBars[filledBars.length - 1];\n        if (lastBar.time === currentCandleTime || lastBar.time === lastCandleTime) {\n          this.lastBar = { ...lastBar, ticker };\n        }\n        this.barsInfo.data = filledBars;\n        this.barsInfo.ticker = ticker;\n        this.barsInfo.period = period;\n      } catch (error) {\n        // eslint-disable-next-line no-console\n        console.error(error);\n        this.barsInfo = initialHistoryBarsInfo;\n      }\n    }\n\n    const { from, to, countBack } = periodParams;\n    const toWithOffset = to + timezoneOffset;\n    const fromWithOffset = from + timezoneOffset;\n    const bars = barsInfo.data.filter((bar) => bar.time > fromWithOffset && bar.time <= toWithOffset);\n\n    // if no bars returned, return empty array\n    if (!bars.length) {\n      return [];\n    }\n\n    // if bars are fewer than countBack, return all of them\n    if (bars.length < countBack) {\n      return bars;\n    }\n\n    // if bars are more than countBack, return latest bars\n    return bars.slice(bars.length - countBack, bars.length);\n  }\n\n  async getBars(\n    chainId: number,\n    ticker: string,\n    resolution: string,\n    isStable: boolean,\n    periodParams: PeriodParams,\n    shouldRefetchBars: boolean\n  ) {\n    const period = SUPPORTED_RESOLUTIONS[resolution];\n    const { from, to } = periodParams;\n\n    try {\n      const bars = isStable\n        ? getStableCoinPrice(period, from, to)\n        : await this.getTokenHistoryBars(chainId, ticker, period, periodParams, shouldRefetchBars);\n\n      return bars.map(formatTimeInBarToMs);\n    } catch {\n      throw new Error(\"Failed to get history bars\");\n    }\n  }\n\n  async getLastBar(chainId: number, ticker: string, period: string) {\n    if (!ticker || !period || !chainId) {\n      throw new Error(\"Invalid input. Ticker, period, and chainId are required parameters.\");\n    }\n    const currentTime = Date.now();\n    if (\n      currentTime - this.startTime > LAST_BAR_REFRESH_INTERVAL ||\n      this.lastTicker !== ticker ||\n      this.lastPeriod !== period\n    ) {\n      const prices = await this.getTokenLastBars(chainId, ticker, period, 1);\n      if (prices?.length) {\n        // @ts-ignore\n        const lastBar = prices[0];\n        const currentCandleTime = getCurrentCandleTime(period);\n        const lastCandleTime = currentCandleTime - CHART_PERIODS[period];\n        if (lastBar.time === currentCandleTime || lastBar.time === lastCandleTime) {\n          this.lastBar = { ...lastBar, ticker };\n          this.startTime = currentTime;\n          this.lastTicker = ticker;\n          this.lastPeriod = period;\n        }\n      }\n    }\n    return this.lastBar;\n  }\n\n  async getLiveBar(chainId: number, ticker: string, resolution: string) {\n    const period = SUPPORTED_RESOLUTIONS[resolution];\n    if (!ticker || !period || !chainId) return;\n\n    const currentCandleTime = getCurrentCandleTime(period);\n    try {\n      this.lastBar = await this.getLastBar(chainId, ticker, period);\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error(error);\n    }\n\n    if (!this.lastBar) return;\n\n    const currentPrice = await this.getCurrentPriceOfToken(chainId, ticker);\n    const averagePriceValue = parseFloat(formatAmount(currentPrice, USD_DECIMALS, 4));\n    if (this.lastBar.time && currentCandleTime === this.lastBar.time && ticker === this.lastBar.ticker) {\n      return {\n        ...this.lastBar,\n        close: averagePriceValue,\n        high: Math.max(this.lastBar.open, this.lastBar.high, averagePriceValue),\n        low: Math.min(this.lastBar.open, this.lastBar.low, averagePriceValue),\n        ticker,\n      };\n    } else {\n      const newBar = {\n        time: currentCandleTime,\n        open: this.lastBar.close,\n        close: averagePriceValue,\n        high: Math.max(this.lastBar.close, averagePriceValue),\n        low: Math.min(this.lastBar.close, averagePriceValue),\n        ticker,\n      };\n      this.lastBar = newBar;\n      return this.lastBar;\n    }\n  }\n}\n","import React, { useEffect, useState, useRef, useMemo } from \"react\";\nimport cx from \"classnames\";\n\nimport { USD_DECIMALS, SWAP, INCREASE, getLiquidationPrice } from \"lib/legacy\";\nimport { useChartPrices } from \"domain/legacy\";\nimport ChartTokenSelector from \"./ChartTokenSelector\";\nimport { getTokenInfo } from \"domain/tokens/utils\";\nimport { formatAmount, numberWithCommas } from \"lib/numbers\";\nimport { getToken, getTokens } from \"config/tokens\";\nimport TVChartContainer from \"components/TVChartContainer/TVChartContainer\";\nimport { t } from \"@lingui/macro\";\nimport { availableNetworksForChart } from \"components/TVChartContainer/constants\";\nimport { TVDataProvider } from \"domain/tradingview/TVDataProvider\";\n\nconst PRICE_LINE_TEXT_WIDTH = 15;\n\nexport function getChartToken(swapOption, fromToken, toToken, chainId) {\n  if (!fromToken || !toToken) {\n    return;\n  }\n\n  if (swapOption !== SWAP) {\n    return toToken;\n  }\n\n  if (fromToken.isUsdg && toToken.isUsdg) {\n    return getTokens(chainId).find((t) => t.isStable);\n  }\n  if (fromToken.isUsdg) {\n    return toToken;\n  }\n  if (toToken.isUsdg) {\n    return fromToken;\n  }\n\n  if (fromToken.isStable && toToken.isStable) {\n    return toToken;\n  }\n  if (fromToken.isStable) {\n    return toToken;\n  }\n  if (toToken.isStable) {\n    return fromToken;\n  }\n\n  return toToken;\n}\n\nexport default function ExchangeTVChart(props) {\n  const {\n    swapOption,\n    fromTokenAddress,\n    toTokenAddress,\n    infoTokens,\n    chainId,\n    positions,\n    savedShouldShowPositionLines,\n    orders,\n    setToTokenAddress,\n  } = props;\n  const [currentSeries] = useState();\n  const dataProvider = useRef();\n\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n  const toToken = getTokenInfo(infoTokens, toTokenAddress);\n\n  const [chartToken, setChartToken] = useState({\n    maxPrice: null,\n    minPrice: null,\n  });\n\n  useEffect(() => {\n    dataProvider.current = new TVDataProvider();\n  }, []);\n\n  useEffect(() => {\n    const tmp = getChartToken(swapOption, fromToken, toToken, chainId);\n    setChartToken(tmp);\n  }, [swapOption, fromToken, toToken, chainId]);\n\n  const currentOrders = useMemo(() => {\n    if (!chartToken) {\n      return [];\n    }\n\n    return orders\n      .filter((order) => {\n        if (order.type === SWAP) {\n          // we can't show non-stable to non-stable swap orders with existing charts\n          // so to avoid users confusion we'll show only long/short orders\n          return false;\n        }\n\n        const indexToken = getToken(chainId, order.indexToken);\n        return order.indexToken === chartToken.address || (chartToken.isNative && indexToken.isWrapped);\n      })\n      .map((order) => {\n        const indexToken = getToken(chainId, order.indexToken);\n        const longOrShortText = order.isLong ? t`Long` : t`Short`;\n        const orderTypeText = order.type === INCREASE ? t`Inc.` : t`Dec.`;\n        let tokenSymbol;\n        if (indexToken && indexToken.symbol) {\n          tokenSymbol = indexToken.isWrapped ? indexToken.baseSymbol : indexToken.symbol;\n        }\n        const title = `${orderTypeText} ${tokenSymbol} ${longOrShortText}`;\n        return { title, price: parseFloat(formatAmount(order.triggerPrice, USD_DECIMALS, 2)) };\n      });\n  }, [orders, chartToken, chainId]);\n\n  const currentPositions = useMemo(() => {\n    if (!positions || !chartToken) {\n      return [];\n    }\n    return positions\n      .filter((p) => p.indexToken.address === chartToken.address)\n      .map((position) => {\n        const longOrShortText = position.isLong ? t`Long` : t`Short`;\n        return {\n          open: {\n            price: parseFloat(formatAmount(position.averagePrice, USD_DECIMALS, 2)),\n            title: t`Open ${position.indexToken.symbol} ${longOrShortText}`,\n          },\n          liquidation: {\n            price: parseFloat(formatAmount(getLiquidationPrice(position), USD_DECIMALS, 2)),\n            title: t`Liq. ${position.indexToken.symbol} ${longOrShortText}`,\n          },\n        };\n      });\n  }, [chartToken, positions]);\n\n  const chartLines = useMemo(() => {\n    const lines = [];\n    if (currentOrders.length > 0) {\n      lines.push(...currentOrders);\n    }\n\n    if (currentPositions.length > 0) {\n      currentPositions.forEach((position) => {\n        lines.push(position.open);\n        lines.push(position.liquidation);\n      });\n    }\n\n    return lines;\n  }, [currentOrders, currentPositions]);\n\n  const ref = useRef(null);\n\n  const currentAveragePrice =\n    chartToken.maxPrice && chartToken.minPrice ? chartToken.maxPrice.add(chartToken.minPrice).div(2) : null;\n  const [priceData, updatePriceData] = useChartPrices(\n    chainId,\n    chartToken.symbol,\n    chartToken.isStable,\n    \"1h\",\n    currentAveragePrice\n  );\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      updatePriceData(undefined, true);\n    }, 60 * 1000);\n    return () => clearInterval(interval);\n  }, [updatePriceData]);\n\n  useEffect(() => {\n    const lines = [];\n    if (currentSeries && savedShouldShowPositionLines) {\n      if (currentOrders && currentOrders.length > 0) {\n        currentOrders.forEach((order) => {\n          const indexToken = getToken(chainId, order.indexToken);\n          let tokenSymbol;\n          if (indexToken && indexToken.symbol) {\n            tokenSymbol = indexToken.isWrapped ? indexToken.baseSymbol : indexToken.symbol;\n          }\n          const title = `${order.type === INCREASE ? \"Inc.\" : \"Dec.\"} ${tokenSymbol} ${\n            order.isLong ? \"Long\" : \"Short\"\n          }`;\n          const color = \"#3a3e5e\";\n          lines.push(\n            currentSeries.createPriceLine({\n              price: parseFloat(formatAmount(order.triggerPrice, USD_DECIMALS, 2)),\n              color,\n              title: title.padEnd(PRICE_LINE_TEXT_WIDTH, \" \"),\n            })\n          );\n        });\n      }\n      if (currentPositions && currentPositions.length > 0) {\n        const color = \"#3a3e5e\";\n\n        positions.forEach((position) => {\n          lines.push(\n            currentSeries.createPriceLine({\n              price: parseFloat(formatAmount(position.averagePrice, USD_DECIMALS, 2)),\n              color,\n              title: `Open ${position.indexToken.symbol} ${position.isLong ? \"Long\" : \"Short\"}`.padEnd(\n                PRICE_LINE_TEXT_WIDTH,\n                \" \"\n              ),\n            })\n          );\n\n          const liquidationPrice = getLiquidationPrice(position);\n          lines.push(\n            currentSeries.createPriceLine({\n              price: parseFloat(formatAmount(liquidationPrice, USD_DECIMALS, 2)),\n              color,\n              title: `Liq. ${position.indexToken.symbol} ${position.isLong ? \"Long\" : \"Short\"}`.padEnd(\n                PRICE_LINE_TEXT_WIDTH,\n                \" \"\n              ),\n            })\n          );\n        });\n      }\n    }\n    return () => {\n      lines.forEach((line) => currentSeries.removePriceLine(line));\n    };\n  }, [currentOrders, currentSeries, chainId, savedShouldShowPositionLines, currentPositions, positions]);\n\n  let high;\n  let low;\n  let deltaPrice;\n  let delta;\n  let deltaPercentage;\n  let deltaPercentageStr;\n\n  const now = parseInt(Date.now() / 1000);\n  const timeThreshold = now - 24 * 60 * 60;\n\n  if (priceData) {\n    for (let i = priceData.length - 1; i > 0; i--) {\n      const price = priceData[i];\n      if (price.time < timeThreshold) {\n        break;\n      }\n      if (!low) {\n        low = price.low;\n      }\n      if (!high) {\n        high = price.high;\n      }\n\n      if (price.high > high) {\n        high = price.high;\n      }\n      if (price.low < low) {\n        low = price.low;\n      }\n\n      deltaPrice = price.open;\n    }\n  }\n\n  if (deltaPrice && currentAveragePrice) {\n    const average = parseFloat(formatAmount(currentAveragePrice, USD_DECIMALS, 2));\n    delta = average - deltaPrice;\n    deltaPercentage = (delta * 100) / average;\n    if (deltaPercentage > 0) {\n      deltaPercentageStr = `+${deltaPercentage.toFixed(2)}%`;\n    } else {\n      deltaPercentageStr = `${deltaPercentage.toFixed(2)}%`;\n    }\n    if (deltaPercentage === 0) {\n      deltaPercentageStr = \"0.00\";\n    }\n  }\n\n  useEffect(() => {\n    dataProvider.current = new TVDataProvider();\n  }, []);\n\n  if (!chartToken) {\n    return null;\n  }\n\n  const onSelectToken = (token) => {\n    const tmp = getTokenInfo(infoTokens, token.address);\n    setChartToken(tmp);\n    setToTokenAddress(swapOption, token.address);\n  };\n\n  return (\n    <div className=\"ExchangeChart tv\" ref={ref}>\n      <div className=\"ExchangeChart-top App-box App-box-border\">\n        <div className=\"ExchangeChart-top-inner\">\n          <div>\n            <div className=\"ExchangeChart-title\">\n              <ChartTokenSelector\n                chainId={chainId}\n                selectedToken={chartToken}\n                swapOption={swapOption}\n                infoTokens={infoTokens}\n                onSelectToken={onSelectToken}\n                className=\"chart-token-selector\"\n              />\n            </div>\n          </div>\n          <div>\n            <div className=\"ExchangeChart-main-price\">\n              {chartToken.maxPrice && formatAmount(chartToken.maxPrice, USD_DECIMALS, 2, true)}\n            </div>\n            <div className=\"ExchangeChart-info-label\">\n              ${chartToken.minPrice && formatAmount(chartToken.minPrice, USD_DECIMALS, 2, true)}\n            </div>\n          </div>\n          <div>\n            <div className=\"ExchangeChart-info-label\">24h Change</div>\n            <div className={cx({ positive: deltaPercentage > 0, negative: deltaPercentage < 0 })}>\n              {!deltaPercentageStr && \"-\"}\n              {deltaPercentageStr && deltaPercentageStr}\n            </div>\n          </div>\n          <div className=\"ExchangeChart-additional-info\">\n            <div className=\"ExchangeChart-info-label\">24h High</div>\n            <div>\n              {!high && \"-\"}\n              {high && numberWithCommas(high.toFixed(2))}\n            </div>\n          </div>\n          <div className=\"ExchangeChart-additional-info\">\n            <div className=\"ExchangeChart-info-label\">24h Low</div>\n            <div>\n              {!low && \"-\"}\n              {low && numberWithCommas(low.toFixed(2))}\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"ExchangeChart-bottom App-box App-box-border\">\n        {availableNetworksForChart.includes(chainId) && chartToken.symbol && chainId ? (\n          <TVChartContainer\n            chartLines={chartLines}\n            savedShouldShowPositionLines={savedShouldShowPositionLines}\n            symbol={chartToken.symbol}\n            chainId={chainId}\n            onSelectToken={onSelectToken}\n            dataProvider={dataProvider.current}\n          />\n        ) : (\n          <p className=\"ExchangeChart-error\">Sorry, chart is not supported on this network yet.</p>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React, { useState, useCallback, useEffect, useMemo } from \"react\";\nimport { ethers } from \"ethers\";\nimport cx from \"classnames\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { BsArrowRight } from \"react-icons/bs\";\n\nimport {\n  DEFAULT_SLIPPAGE_AMOUNT,\n  DEFAULT_HIGHER_SLIPPAGE_AMOUNT,\n  USD_DECIMALS,\n  DUST_USD,\n  BASIS_POINTS_DIVISOR,\n  MIN_PROFIT_TIME,\n  getLiquidationPrice,\n  getLeverage,\n  getMarginFee,\n  PRECISION,\n  MARKET,\n  STOP,\n  DECREASE,\n  calculatePositionDelta,\n  getDeltaStr,\n  getProfitPrice,\n  getNextToAmount,\n  USDG_DECIMALS,\n  adjustForDecimals,\n  isAddressZero,\n  MAX_ALLOWED_LEVERAGE,\n} from \"lib/legacy\";\nimport { ARBITRUM, getChainName, getConstant, IS_NETWORK_DISABLED } from \"config/chains\";\nimport { createDecreaseOrder, useHasOutdatedUi } from \"domain/legacy\";\nimport { getContract } from \"config/contracts\";\nimport PositionRouter from \"abis/PositionRouter.json\";\nimport Checkbox from \"../Checkbox/Checkbox\";\nimport Tab from \"../Tab/Tab\";\nimport Modal from \"../Modal/Modal\";\nimport ExchangeInfoRow from \"./ExchangeInfoRow\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport TokenSelector from \"components/TokenSelector/TokenSelector\";\nimport \"./PositionSeller.css\";\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\nimport { callContract } from \"lib/contracts\";\nimport { getTokenAmountFromUsd } from \"domain/tokens\";\nimport { TRIGGER_PREFIX_ABOVE, TRIGGER_PREFIX_BELOW } from \"config/ui\";\nimport { useLocalStorageByChainId, useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport { CLOSE_POSITION_RECEIVE_TOKEN_KEY, SLIPPAGE_BPS_KEY } from \"config/localStorage\";\nimport { getTokenInfo, getUsd } from \"domain/tokens/utils\";\nimport { usePrevious } from \"lib/usePrevious\";\nimport { bigNumberify, expandDecimals, formatAmount, formatAmountFree, parseValue } from \"lib/numbers\";\nimport { getTokens, getWrappedToken } from \"config/tokens\";\nimport { formatDateTime, getTimeRemaining } from \"lib/dates\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport { ErrorCode, ErrorDisplayType } from \"./constants\";\nimport FeesTooltip from \"./FeesTooltip\";\n\nconst { AddressZero } = ethers.constants;\nconst ORDER_SIZE_DUST_USD = expandDecimals(1, USD_DECIMALS - 1); // $0.10\n\nconst HIGH_SPREAD_THRESHOLD = expandDecimals(1, USD_DECIMALS).div(100); // 1%;\n\nfunction applySpread(amount, spread) {\n  if (!amount || !spread) {\n    return amount;\n  }\n  return amount.sub(amount.mul(spread).div(PRECISION));\n}\n\nfunction shouldSwap(collateralToken, receiveToken) {\n  // If position collateral is WETH in contract, then position.collateralToken is { symbol: ETH, isNative: true,  }\n  // @see https://github.com/gmx-io/gmx-interface/blob/master/src/pages/Exchange/Exchange.js#L162\n  // meaning if collateralToken.isNative === true in reality position has WETH as a collateral\n  // and if collateralToken.isNative === true and receiveToken.isNative === true then positions WETH will be unwrapped and user will receive native ETH\n  const isCollateralWrapped = collateralToken.isNative;\n\n  const isSameToken =\n    collateralToken.address === receiveToken.address || (isCollateralWrapped && receiveToken.isWrapped);\n\n  const isUnwrap = isCollateralWrapped && receiveToken.isNative;\n\n  return !isSameToken && !isUnwrap;\n}\n\nfunction getSwapLimits(infoTokens, fromTokenAddress, toTokenAddress) {\n  const fromInfo = getTokenInfo(infoTokens, fromTokenAddress);\n  const toInfo = getTokenInfo(infoTokens, toTokenAddress);\n\n  let maxInUsd;\n  let maxIn;\n  let maxOut;\n  let maxOutUsd;\n\n  if (!fromInfo?.maxUsdgAmount) {\n    maxInUsd = bigNumberify(0);\n    maxIn = bigNumberify(0);\n  } else {\n    maxInUsd = fromInfo.maxUsdgAmount\n      .sub(fromInfo.usdgAmount)\n      .mul(expandDecimals(1, USD_DECIMALS))\n      .div(expandDecimals(1, USDG_DECIMALS));\n\n    maxIn = maxInUsd.mul(expandDecimals(1, fromInfo.decimals)).div(fromInfo.maxPrice).toString();\n  }\n\n  if (!toInfo?.poolAmount || !toInfo?.bufferAmount) {\n    maxOut = bigNumberify(0);\n    maxOutUsd = bigNumberify(0);\n  } else {\n    maxOut = toInfo.availableAmount.gt(toInfo.poolAmount.sub(toInfo.bufferAmount))\n      ? toInfo.poolAmount.sub(toInfo.bufferAmount)\n      : toInfo.availableAmount;\n\n    maxOutUsd = getUsd(maxOut, toInfo.address, false, infoTokens);\n  }\n\n  return {\n    maxIn,\n    maxInUsd,\n    maxOut,\n    maxOutUsd,\n  };\n}\n\nexport default function PositionSeller(props) {\n  const {\n    pendingPositions,\n    setPendingPositions,\n    positionsMap,\n    positionKey,\n    isVisible,\n    setIsVisible,\n    account,\n    library,\n    infoTokens,\n    setPendingTxns,\n    flagOrdersEnabled,\n    savedIsPnlInLeverage,\n    chainId,\n    nativeTokenAddress,\n    orders,\n    isWaitingForPluginApproval,\n    isPluginApproving,\n    orderBookApproved,\n    setOrdersToaOpen,\n    positionRouterApproved,\n    isWaitingForPositionRouterApproval,\n    isPositionRouterApproving,\n    approvePositionRouter,\n    isHigherSlippageAllowed,\n    setIsHigherSlippageAllowed,\n    minExecutionFee,\n    minExecutionFeeErrorMessage,\n    usdgSupply,\n    totalTokenWeights,\n    isContractAccount,\n  } = props;\n  const [savedSlippageAmount] = useLocalStorageSerializeKey([chainId, SLIPPAGE_BPS_KEY], DEFAULT_SLIPPAGE_AMOUNT);\n  const [keepLeverage, setKeepLeverage] = useLocalStorageSerializeKey([chainId, \"Exchange-keep-leverage\"], true);\n  const position = positionsMap && positionKey ? positionsMap[positionKey] : undefined;\n  const [fromValue, setFromValue] = useState(\"\");\n  const [isProfitWarningAccepted, setIsProfitWarningAccepted] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const prevIsVisible = usePrevious(isVisible);\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\n  const nativeTokenSymbol = getConstant(chainId, \"nativeTokenSymbol\");\n  const longOrShortText = position?.isLong ? t`Long` : t`Short`;\n\n  const toTokens = isContractAccount ? getTokens(chainId).filter((t) => !t.isNative) : getTokens(chainId);\n  const wrappedToken = getWrappedToken(chainId);\n\n  const [savedRecieveTokenAddress, setSavedRecieveTokenAddress] = useLocalStorageByChainId(\n    chainId,\n    `${CLOSE_POSITION_RECEIVE_TOKEN_KEY}-${position.indexToken.symbol}-${position?.isLong ? \"long\" : \"short\"}`\n  );\n\n  const [swapToToken, setSwapToToken] = useState(() =>\n    savedRecieveTokenAddress ? toTokens.find((token) => token.address === savedRecieveTokenAddress) : undefined\n  );\n\n  let allowedSlippage = savedSlippageAmount;\n  if (isHigherSlippageAllowed) {\n    allowedSlippage = DEFAULT_HIGHER_SLIPPAGE_AMOUNT;\n  }\n\n  const ORDER_OPTIONS = [MARKET, STOP];\n  const ORDER_OPTION_LABELS = {\n    [MARKET]: t`Market`,\n    [STOP]: t`Trigger`,\n  };\n  let [orderOption, setOrderOption] = useState(MARKET);\n\n  if (!flagOrdersEnabled) {\n    orderOption = MARKET;\n  }\n\n  const needPositionRouterApproval = !positionRouterApproved && orderOption === MARKET;\n\n  const onOrderOptionChange = (option) => {\n    setOrderOption(option);\n  };\n\n  const onTriggerPriceChange = (evt) => {\n    setTriggerPriceValue(evt.target.value || \"\");\n  };\n\n  const [triggerPriceValue, setTriggerPriceValue] = useState(\"\");\n  const triggerPriceUsd = orderOption === MARKET ? 0 : parseValue(triggerPriceValue, USD_DECIMALS);\n\n  const [nextDelta, nextHasProfit = bigNumberify(0)] = useMemo(() => {\n    if (!position) {\n      return [bigNumberify(0), false];\n    }\n\n    if (orderOption !== STOP) {\n      return [position.delta, position.hasProfit, position.deltaPercentage];\n    }\n\n    if (!triggerPriceUsd) {\n      return [bigNumberify(0), false];\n    }\n\n    const { delta, hasProfit, deltaPercentage } = calculatePositionDelta(triggerPriceUsd, position);\n    return [delta, hasProfit, deltaPercentage];\n  }, [position, orderOption, triggerPriceUsd]);\n\n  const existingOrders = useMemo(() => {\n    if (orderOption === STOP && (!triggerPriceUsd || triggerPriceUsd.eq(0))) {\n      return [];\n    }\n    if (!orders || !position) {\n      return [];\n    }\n\n    const ret = [];\n    for (const order of orders) {\n      // only Stop orders can't be executed without corresponding opened position\n      if (order.type !== DECREASE) continue;\n\n      // if user creates Stop-Loss we need only Stop-Loss orders and vice versa\n      if (orderOption === STOP) {\n        const triggerAboveThreshold = triggerPriceUsd.gt(position.markPrice);\n        if (triggerAboveThreshold !== order.triggerAboveThreshold) continue;\n      }\n\n      const sameToken =\n        order.indexToken === nativeTokenAddress\n          ? position.indexToken.isNative\n          : order.indexToken === position.indexToken.address;\n      if (order.isLong === position.isLong && sameToken) {\n        ret.push(order);\n      }\n    }\n    return ret;\n  }, [position, orders, triggerPriceUsd, orderOption, nativeTokenAddress]);\n\n  const existingOrder = existingOrders[0];\n\n  const needOrderBookApproval = orderOption === STOP && !orderBookApproved;\n\n  const isSwapAllowed = orderOption === MARKET;\n\n  const { data: hasOutdatedUi } = useHasOutdatedUi();\n\n  let receiveToken;\n  let maxAmount;\n  let maxAmountFormatted;\n  let maxAmountFormattedFree;\n  let fromAmount;\n\n  let convertedAmount;\n  let convertedAmountFormatted;\n\n  let nextLeverage;\n  let liquidationPrice;\n  let nextLiquidationPrice;\n  let isClosing;\n  let sizeDelta;\n\n  let nextCollateral;\n  let collateralDelta = bigNumberify(0);\n  let receiveUsd = bigNumberify(0);\n  let receiveAmount = bigNumberify(0);\n  let adjustedDelta = bigNumberify(0);\n\n  let isNotEnoughReceiveTokenLiquidity;\n  let isCollateralPoolCapacityExceeded;\n\n  let title;\n  let fundingFee;\n  let positionFee;\n  let swapFee;\n  let totalFees = bigNumberify(0);\n\n  useEffect(() => {\n    if (isSwapAllowed && isContractAccount && isAddressZero(receiveToken.address)) {\n      setSwapToToken(wrappedToken);\n      setSavedRecieveTokenAddress(wrappedToken.address);\n    }\n  }, [\n    isContractAccount,\n    isSwapAllowed,\n    nativeTokenSymbol,\n    receiveToken?.address,\n    wrappedToken,\n    setSavedRecieveTokenAddress,\n  ]);\n\n  let executionFee = orderOption === STOP ? getConstant(chainId, \"DECREASE_ORDER_EXECUTION_GAS_FEE\") : minExecutionFee;\n  let executionFeeUsd = getUsd(executionFee, nativeTokenAddress, false, infoTokens) || bigNumberify(0);\n\n  const collateralToken = position.collateralToken;\n  const collateralTokenInfo = getTokenInfo(infoTokens, collateralToken.address);\n\n  if (position) {\n    fundingFee = position.fundingFee;\n    fromAmount = parseValue(fromValue, USD_DECIMALS);\n    sizeDelta = fromAmount;\n\n    title = t`Close ${longOrShortText} ${position.indexToken.symbol}`;\n    liquidationPrice = getLiquidationPrice(position);\n\n    if (fromAmount) {\n      isClosing = position.size.sub(fromAmount).lt(DUST_USD);\n      positionFee = getMarginFee(fromAmount);\n    }\n\n    if (isClosing) {\n      sizeDelta = position.size;\n      receiveUsd = position.collateral;\n    } else if (orderOption === STOP && sizeDelta && existingOrders.length > 0) {\n      let residualSize = position.size;\n      for (const order of existingOrders) {\n        residualSize = residualSize.sub(order.sizeDelta);\n      }\n      if (residualSize.sub(sizeDelta).abs().lt(ORDER_SIZE_DUST_USD)) {\n        sizeDelta = residualSize;\n      }\n    }\n\n    if (sizeDelta && position.size.gt(0)) {\n      adjustedDelta = nextDelta.mul(sizeDelta).div(position.size);\n    }\n\n    if (nextHasProfit) {\n      receiveUsd = receiveUsd.add(adjustedDelta);\n    } else {\n      if (receiveUsd.gt(adjustedDelta)) {\n        receiveUsd = receiveUsd.sub(adjustedDelta);\n      } else {\n        receiveUsd = bigNumberify(0);\n      }\n    }\n\n    if (keepLeverage && sizeDelta && !isClosing) {\n      collateralDelta = sizeDelta.mul(position.collateral).div(position.size);\n      // if the position will be realising a loss then reduce collateralDelta by the realised loss\n      if (!nextHasProfit) {\n        const deductions = adjustedDelta.add(positionFee).add(fundingFee);\n        if (collateralDelta.gt(deductions)) {\n          collateralDelta = collateralDelta = collateralDelta.sub(deductions);\n        } else {\n          collateralDelta = bigNumberify(0);\n        }\n      }\n    }\n\n    maxAmount = position.size;\n    maxAmountFormatted = formatAmount(maxAmount, USD_DECIMALS, 2, true);\n    maxAmountFormattedFree = formatAmountFree(maxAmount, USD_DECIMALS, 2);\n\n    if (fromAmount && collateralToken.maxPrice) {\n      convertedAmount = fromAmount.mul(expandDecimals(1, collateralToken.decimals)).div(collateralToken.maxPrice);\n      convertedAmountFormatted = formatAmount(convertedAmount, collateralToken.decimals, 4, true);\n    }\n\n    totalFees = totalFees.add(positionFee || bigNumberify(0)).add(fundingFee || bigNumberify(0));\n\n    receiveUsd = receiveUsd.add(collateralDelta);\n\n    if (sizeDelta) {\n      if (receiveUsd.gt(totalFees)) {\n        receiveUsd = receiveUsd.sub(totalFees);\n      } else {\n        receiveUsd = bigNumberify(0);\n      }\n    }\n\n    receiveUsd = applySpread(receiveUsd, collateralTokenInfo?.spread);\n\n    receiveToken = isSwapAllowed && swapToToken ? swapToToken : collateralToken;\n\n    if (isSwapAllowed && isContractAccount && isAddressZero(receiveToken.address)) {\n      receiveToken = wrappedToken;\n    }\n\n    // Calculate swap fees\n    if (isSwapAllowed && swapToToken) {\n      const { feeBasisPoints } = getNextToAmount(\n        chainId,\n        convertedAmount,\n        collateralToken.address,\n        receiveToken.address,\n        infoTokens,\n        undefined,\n        undefined,\n        usdgSupply,\n        totalTokenWeights,\n        true\n      );\n\n      if (feeBasisPoints) {\n        swapFee = receiveUsd.mul(feeBasisPoints).div(BASIS_POINTS_DIVISOR);\n        totalFees = totalFees.add(swapFee || bigNumberify(0));\n        receiveUsd = receiveUsd.sub(swapFee);\n      }\n      const swapToTokenInfo = getTokenInfo(infoTokens, swapToToken.address);\n      receiveUsd = applySpread(receiveUsd, swapToTokenInfo?.spread);\n    }\n\n    // For Shorts trigger orders the collateral is a stable coin, it should not depend on the triggerPrice\n    if (orderOption === STOP && position.isLong) {\n      receiveAmount = getTokenAmountFromUsd(infoTokens, receiveToken.address, receiveUsd, {\n        overridePrice: triggerPriceUsd,\n      });\n    } else {\n      receiveAmount = getTokenAmountFromUsd(infoTokens, receiveToken.address, receiveUsd);\n    }\n\n    // Check swap limits (max in / max out)\n    if (isSwapAllowed && shouldSwap(collateralToken, receiveToken)) {\n      const collateralInfo = getTokenInfo(infoTokens, collateralToken.address);\n      const receiveTokenInfo = getTokenInfo(infoTokens, receiveToken.address);\n\n      isNotEnoughReceiveTokenLiquidity =\n        receiveTokenInfo.availableAmount.lt(receiveAmount) ||\n        receiveTokenInfo.bufferAmount.gt(receiveTokenInfo.poolAmount.sub(receiveAmount));\n\n      if (\n        collateralInfo.maxUsdgAmount &&\n        collateralInfo.maxUsdgAmount.gt(0) &&\n        collateralInfo.usdgAmount &&\n        collateralInfo.maxPrice\n      ) {\n        const usdgFromAmount = adjustForDecimals(receiveUsd, USD_DECIMALS, USDG_DECIMALS);\n        const nextUsdgAmount = collateralInfo.usdgAmount.add(usdgFromAmount);\n\n        if (nextUsdgAmount.gt(collateralInfo.maxUsdgAmount)) {\n          isCollateralPoolCapacityExceeded = true;\n        }\n      }\n    }\n\n    if (isClosing) {\n      nextCollateral = bigNumberify(0);\n    } else {\n      if (position.collateral) {\n        nextCollateral = position.collateral;\n        if (collateralDelta && collateralDelta.gt(0)) {\n          nextCollateral = position.collateral.sub(collateralDelta);\n        } else if (position.delta && position.delta.gt(0) && sizeDelta) {\n          if (!position.hasProfit) {\n            nextCollateral = nextCollateral.sub(adjustedDelta);\n          }\n        }\n      }\n    }\n\n    if (fromAmount) {\n      if (!isClosing && !keepLeverage) {\n        nextLeverage = getLeverage({\n          size: position.size,\n          sizeDelta,\n          collateral: position.collateral,\n          entryFundingRate: position.entryFundingRate,\n          cumulativeFundingRate: position.cumulativeFundingRate,\n          hasProfit: nextHasProfit,\n          delta: nextDelta,\n          includeDelta: savedIsPnlInLeverage,\n        });\n        nextLiquidationPrice = getLiquidationPrice({\n          isLong: position.isLong,\n          size: position.size,\n          sizeDelta,\n          collateral: position.collateral,\n          averagePrice: position.averagePrice,\n          entryFundingRate: position.entryFundingRate,\n          cumulativeFundingRate: position.cumulativeFundingRate,\n          delta: nextDelta,\n          hasProfit: nextHasProfit,\n          includeDelta: true,\n        });\n      }\n    }\n  }\n\n  const [deltaStr, deltaPercentageStr] = useMemo(() => {\n    if (!position || !position.markPrice || position.collateral.eq(0)) {\n      return [\"-\", \"-\"];\n    }\n    if (orderOption !== STOP) {\n      const { pendingDelta, pendingDeltaPercentage, hasProfit } = calculatePositionDelta(\n        position.markPrice,\n        position,\n        fromAmount\n      );\n      const { deltaStr, deltaPercentageStr } = getDeltaStr({\n        delta: pendingDelta,\n        deltaPercentage: pendingDeltaPercentage,\n        hasProfit,\n      });\n      return [deltaStr, deltaPercentageStr];\n    }\n    if (!triggerPriceUsd || triggerPriceUsd.eq(0)) {\n      return [\"-\", \"-\"];\n    }\n\n    const { pendingDelta, pendingDeltaPercentage, hasProfit } = calculatePositionDelta(\n      triggerPriceUsd,\n      position,\n      fromAmount\n    );\n\n    const { deltaStr, deltaPercentageStr } = getDeltaStr({\n      delta: pendingDelta,\n      deltaPercentage: pendingDeltaPercentage,\n      hasProfit,\n    });\n    return [deltaStr, deltaPercentageStr];\n  }, [position, triggerPriceUsd, orderOption, fromAmount]);\n\n  const getError = () => {\n    if (isSwapAllowed && isContractAccount && isAddressZero(receiveToken?.address)) {\n      return [t`${nativeTokenSymbol} can not be sent to smart contract addresses. Select another token.`];\n    }\n    if (IS_NETWORK_DISABLED[chainId]) {\n      if (orderOption === STOP) return [t`Trigger order disabled, pending ${getChainName(chainId)} upgrade`];\n      return [t`Position close disabled, pending ${getChainName(chainId)} upgrade`];\n    }\n    if (hasOutdatedUi) {\n      return [t`Page outdated, please refresh`];\n    }\n    if (!fromAmount) {\n      return [t`Enter an amount`];\n    }\n    if (nextLeverage && nextLeverage.eq(0)) {\n      return [t`Enter an amount`];\n    }\n    if (orderOption === STOP) {\n      if (!triggerPriceUsd || triggerPriceUsd.eq(0)) {\n        return [t`Enter Price`];\n      }\n      if (position.isLong && triggerPriceUsd.lte(liquidationPrice)) {\n        return [t`Price below Liq. Price`];\n      }\n      if (!position.isLong && triggerPriceUsd.gte(liquidationPrice)) {\n        return [t`Price above Liq. Price`];\n      }\n\n      if (profitPrice && nextDelta.eq(0) && nextHasProfit) {\n        return [t`Invalid price, see warning`];\n      }\n    }\n\n    if (isNotEnoughReceiveTokenLiquidity) {\n      return [t`Insufficient Liquidity`, ErrorDisplayType.Tooltip, ErrorCode.InsufficientReceiveToken];\n    }\n\n    if (isCollateralPoolCapacityExceeded) {\n      return [t`Insufficient Liquidity`, ErrorDisplayType.Tooltip, ErrorCode.ReceiveCollateralTokenOnly];\n    }\n\n    if (!isClosing && position && position.size && fromAmount) {\n      if (position.size.sub(fromAmount).lt(expandDecimals(10, USD_DECIMALS))) {\n        return [t`Leftover position below 10 USD`];\n      }\n      if (nextCollateral && nextCollateral.lt(expandDecimals(5, USD_DECIMALS))) {\n        return [t`Leftover collateral below 5 USD`];\n      }\n    }\n\n    if (position && position.size && position.size.lt(fromAmount)) {\n      return [t`Max close amount exceeded`];\n    }\n\n    if (nextLeverage && nextLeverage.lt(1.1 * BASIS_POINTS_DIVISOR)) {\n      return [t`Min leverage: 1.1x`];\n    }\n\n    if (nextLeverage && nextLeverage.gt(MAX_ALLOWED_LEVERAGE)) {\n      return [t`Max leverage: ${(MAX_ALLOWED_LEVERAGE / BASIS_POINTS_DIVISOR).toFixed(1)}x`];\n    }\n\n    if (hasPendingProfit && orderOption !== STOP && !isProfitWarningAccepted) {\n      return [t`Forfeit profit not checked`];\n    }\n    return [false];\n  };\n\n  const isPrimaryEnabled = () => {\n    const [error] = getError();\n    if (error) {\n      return false;\n    }\n    if (isSubmitting) {\n      return false;\n    }\n    if (needOrderBookApproval && isWaitingForPluginApproval) {\n      return false;\n    }\n    if (isPluginApproving) {\n      return false;\n    }\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      return false;\n    }\n    if (isPositionRouterApproving) {\n      return false;\n    }\n\n    return true;\n  };\n\n  const hasPendingProfit = MIN_PROFIT_TIME > 0 && position.delta.eq(0) && position.pendingDelta.gt(0);\n\n  const getPrimaryText = () => {\n    const [error] = getError();\n    if (error) {\n      return error;\n    }\n\n    if (orderOption === STOP) {\n      if (isSubmitting) return t`Creating Order...`;\n\n      if (needOrderBookApproval && isWaitingForPluginApproval) {\n        return t`Enabling Orders...`;\n      }\n      if (isPluginApproving) {\n        return t`Enabling Orders...`;\n      }\n      if (needOrderBookApproval) {\n        return t`Enable Orders`;\n      }\n\n      return t`Create Order`;\n    }\n\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      return t`Enabling Leverage...`;\n    }\n\n    if (isPositionRouterApproving) {\n      return t`Enabling Leverage...`;\n    }\n\n    if (needPositionRouterApproval) {\n      return t`Enable Leverage`;\n    }\n\n    if (hasPendingProfit) {\n      return t`Close without profit`;\n    }\n    return isSubmitting ? t`Closing...` : t`Close`;\n  };\n\n  const resetForm = () => {\n    setFromValue(\"\");\n    setIsProfitWarningAccepted(false);\n  };\n\n  useEffect(() => {\n    if (prevIsVisible !== isVisible) {\n      resetForm();\n    }\n  }, [prevIsVisible, isVisible]);\n\n  const receiveSpreadInfo = useMemo(() => {\n    if (!collateralTokenInfo || !infoTokens) {\n      return null;\n    }\n\n    if (!swapToToken || swapToToken.address === collateralTokenInfo.address) {\n      return {\n        value: collateralTokenInfo.spread,\n        isHigh: collateralTokenInfo.spread.gt(HIGH_SPREAD_THRESHOLD),\n      };\n    }\n\n    const swapToTokenInfo = getTokenInfo(infoTokens, swapToToken.address);\n    const spread = collateralTokenInfo.spread.add(swapToTokenInfo.spread);\n    return {\n      value: spread,\n      isHigh: spread.gt(HIGH_SPREAD_THRESHOLD),\n    };\n  }, [swapToToken, infoTokens, collateralTokenInfo]);\n  const showReceiveSpread = receiveSpreadInfo && receiveSpreadInfo.value.gt(0);\n\n  const renderReceiveSpreadWarning = useCallback(() => {\n    if (receiveSpreadInfo && receiveSpreadInfo.isHigh) {\n      return (\n        <div className=\"Confirmation-box-warning\">\n          <Trans>\n            Transacting with a depegged stable coin is subject to spreads reflecting the worse of current market price\n            or $1.00, with transactions involving multiple stablecoins may have multiple spreads.\n          </Trans>\n        </div>\n      );\n    }\n  }, [receiveSpreadInfo]);\n\n  const onClickPrimary = async () => {\n    if (needOrderBookApproval) {\n      setOrdersToaOpen(true);\n      return;\n    }\n\n    if (needPositionRouterApproval) {\n      approvePositionRouter({\n        sentMsg: t`Enable leverage sent.`,\n        failMsg: t`Enable leverage failed.`,\n      });\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    const collateralTokenAddress = position.collateralToken.isNative\n      ? nativeTokenAddress\n      : position.collateralToken.address;\n    const indexTokenAddress = position.indexToken.isNative ? nativeTokenAddress : position.indexToken.address;\n\n    if (orderOption === STOP) {\n      const triggerAboveThreshold = triggerPriceUsd.gt(position.markPrice);\n\n      createDecreaseOrder(\n        chainId,\n        library,\n        indexTokenAddress,\n        sizeDelta,\n        collateralTokenAddress,\n        collateralDelta,\n        position.isLong,\n        triggerPriceUsd,\n        triggerAboveThreshold,\n        {\n          sentMsg: t`Order submitted!`,\n          successMsg: t`Order created!`,\n          failMsg: t`Order creation failed.`,\n          setPendingTxns,\n        }\n      )\n        .then(() => {\n          setFromValue(\"\");\n          setIsVisible(false);\n        })\n        .finally(() => {\n          setIsSubmitting(false);\n        });\n      return;\n    }\n\n    const priceBasisPoints = position.isLong\n      ? BASIS_POINTS_DIVISOR - allowedSlippage\n      : BASIS_POINTS_DIVISOR + allowedSlippage;\n    const refPrice = position.isLong ? position.indexToken.minPrice : position.indexToken.maxPrice;\n    let priceLimit = refPrice.mul(priceBasisPoints).div(BASIS_POINTS_DIVISOR);\n    const minProfitExpiration = position.lastIncreasedTime + MIN_PROFIT_TIME;\n    const minProfitTimeExpired = parseInt(Date.now() / 1000) > minProfitExpiration;\n\n    if (nextHasProfit && !minProfitTimeExpired && !isProfitWarningAccepted) {\n      if ((position.isLong && priceLimit.lt(profitPrice)) || (!position.isLong && priceLimit.gt(profitPrice))) {\n        priceLimit = profitPrice;\n      }\n    }\n\n    const tokenAddress0 = collateralTokenAddress === AddressZero ? nativeTokenAddress : collateralTokenAddress;\n\n    const path = [tokenAddress0];\n\n    const isUnwrap = receiveToken.address === AddressZero;\n    const isSwap = receiveToken.address !== tokenAddress0;\n\n    if (isSwap) {\n      if (isUnwrap && tokenAddress0 !== nativeTokenAddress) {\n        path.push(nativeTokenAddress);\n      } else if (!isUnwrap) {\n        path.push(receiveToken.address);\n      }\n    }\n\n    const withdrawETH = isUnwrap && !isContractAccount;\n\n    const params = [\n      path, // _path\n      indexTokenAddress, // _indexToken\n      collateralDelta, // _collateralDelta\n      sizeDelta, // _sizeDelta\n      position.isLong, // _isLong\n      account, // _receiver\n      priceLimit, // _acceptablePrice\n      0, // _minOut\n      minExecutionFee, // _executionFee\n      withdrawETH, // _withdrawETH\n      AddressZero, // _callbackTarget\n    ];\n    const sizeDeltaUsd = formatAmount(sizeDelta, USD_DECIMALS, 2);\n    const successMsg = t`Requested decrease of ${position.indexToken.symbol} ${longOrShortText} by ${sizeDeltaUsd} USD.`;\n\n    const contract = new ethers.Contract(positionRouterAddress, PositionRouter.abi, library.getSigner());\n\n    callContract(chainId, contract, \"createDecreasePosition\", params, {\n      value: minExecutionFee,\n      sentMsg: t`Close submitted!`,\n      successMsg,\n      failMsg: t`Close failed.`,\n      setPendingTxns,\n      // for Arbitrum, sometimes the successMsg shows after the position has already been executed\n      // hide the success message for Arbitrum as a workaround\n      hideSuccessMsg: chainId === ARBITRUM,\n    })\n      .then(async (res) => {\n        setFromValue(\"\");\n        setIsVisible(false);\n\n        let nextSize = position.size.sub(sizeDelta);\n\n        pendingPositions[position.key] = {\n          updatedAt: Date.now(),\n          pendingChanges: {\n            size: nextSize,\n          },\n        };\n\n        setPendingPositions({ ...pendingPositions });\n      })\n      .finally(() => {\n        setIsSubmitting(false);\n      });\n  };\n\n  const renderExistingOrderWarning = useCallback(() => {\n    if (!existingOrder) {\n      return;\n    }\n    const indexToken = getTokenInfo(infoTokens, existingOrder.indexToken);\n    const sizeInToken = formatAmount(\n      existingOrder.sizeDelta.mul(PRECISION).div(existingOrder.triggerPrice),\n      USD_DECIMALS,\n      4,\n      true\n    );\n    const prefix = existingOrder.triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\n    return (\n      <div className=\"Confirmation-box-warning\">\n        <Trans>\n          You have an active order to decrease {longOrShortText} {sizeInToken} {indexToken.symbol} ($\n          {formatAmount(existingOrder.sizeDelta, USD_DECIMALS, 2, true)}) at {prefix}{\" \"}\n          {formatAmount(existingOrder.triggerPrice, USD_DECIMALS, 2, true)}\n        </Trans>\n      </div>\n    );\n  }, [existingOrder, infoTokens, longOrShortText]);\n\n  function renderMinProfitWarning() {\n    if (MIN_PROFIT_TIME === 0) {\n      return null;\n    }\n\n    if (profitPrice && nextDelta.eq(0) && nextHasProfit) {\n      const minProfitExpiration = position.lastIncreasedTime + MIN_PROFIT_TIME;\n\n      if (orderOption === MARKET) {\n        return (\n          <div className=\"Confirmation-box-warning\">\n            <Trans>\n              Reducing the position at the current price will forfeit a&nbsp;\n              <ExternalLink href=\"https://gmxio.gitbook.io/gmx/trading#minimum-price-change\">\n                pending profit\n              </ExternalLink>{\" \"}\n              of {deltaStr}. <br />\n            </Trans>\n            <Trans>\n              <br />\n              Profit price: {position.isLong ? \">\" : \"<\"} ${formatAmount(profitPrice, USD_DECIMALS, 2, true)}. This rule\n              applies for the next {getTimeRemaining(minProfitExpiration)}, until {formatDateTime(minProfitExpiration)}.\n            </Trans>\n          </div>\n        );\n      }\n      return (\n        <div className=\"Confirmation-box-warning\">\n          <Trans>\n            This order will forfeit a&nbsp;\n            <ExternalLink href=\"https://gmxio.gitbook.io/gmx/trading#minimum-price-change\">profit</ExternalLink> of{\" \"}\n            {deltaStr}. <br />\n          </Trans>\n          <Trans>\n            Profit price: {position.isLong ? \">\" : \"<\"} ${formatAmount(profitPrice, USD_DECIMALS, 2, true)}. This rule\n            applies for the next {getTimeRemaining(minProfitExpiration)}, until {formatDateTime(minProfitExpiration)}.\n          </Trans>\n        </div>\n      );\n    }\n  }\n\n  const profitPrice = getProfitPrice(orderOption === MARKET ? position.markPrice : triggerPriceUsd, position);\n\n  let triggerPricePrefix;\n  if (triggerPriceUsd) {\n    triggerPricePrefix = triggerPriceUsd.gt(position.markPrice) ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\n  }\n\n  const shouldShowExistingOrderWarning = false;\n\n  if (orderOption === STOP && !triggerPriceUsd) {\n    receiveUsd = bigNumberify(0);\n    receiveAmount = bigNumberify(0);\n  }\n\n  const ERROR_TOOLTIP_MSG = {\n    [ErrorCode.InsufficientReceiveToken]: (\n      <Trans>\n        Swap amount from {position.collateralToken.symbol} to {receiveToken.symbol} exceeds {receiveToken.symbol}{\" \"}\n        available liquidity. Choose a different \"Receive\" token.\n      </Trans>\n    ),\n    [ErrorCode.ReceiveCollateralTokenOnly]: (\n      <Trans>\n        Swap amount from {position.collateralToken.symbol} to {receiveToken.symbol} exceeds{\" \"}\n        {position.collateralToken.symbol} acceptable amount. Can only receive {position.collateralToken.symbol}.\n      </Trans>\n    ),\n  };\n\n  function renderPrimaryButton() {\n    const [errorMessage, errorType, errorCode] = getError();\n    const primaryTextMessage = getPrimaryText();\n    if (errorType === ErrorDisplayType.Tooltip && errorMessage === primaryTextMessage && ERROR_TOOLTIP_MSG[errorCode]) {\n      return (\n        <Tooltip\n          isHandlerDisabled\n          handle={\n            <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n              {primaryTextMessage}\n            </button>\n          }\n          position=\"center-top\"\n          className=\"Tooltip-flex\"\n          renderContent={() => ERROR_TOOLTIP_MSG[errorCode]}\n        />\n      );\n    }\n\n    return (\n      <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n        {primaryTextMessage}\n      </button>\n    );\n  }\n\n  return (\n    <div className=\"PositionEditor\">\n      {position && (\n        <Modal className=\"PositionSeller-modal\" isVisible={isVisible} setIsVisible={setIsVisible} label={title}>\n          {flagOrdersEnabled && (\n            <Tab\n              options={ORDER_OPTIONS}\n              option={orderOption}\n              optionLabels={ORDER_OPTION_LABELS}\n              onChange={onOrderOptionChange}\n            />\n          )}\n          <div className=\"Exchange-swap-section\">\n            <div className=\"Exchange-swap-section-top\">\n              <div className=\"muted\">\n                {convertedAmountFormatted && (\n                  <div className=\"Exchange-swap-usd\">\n                    <Trans>\n                      Close: {convertedAmountFormatted} {position.collateralToken.symbol}\n                    </Trans>\n                  </div>\n                )}\n                {!convertedAmountFormatted && t`Close`}\n              </div>\n              {maxAmount && (\n                <div className=\"muted align-right clickable\" onClick={() => setFromValue(maxAmountFormattedFree)}>\n                  <Trans>Max: {maxAmountFormatted}</Trans>\n                </div>\n              )}\n            </div>\n            <div className=\"Exchange-swap-section-bottom\">\n              <div className=\"Exchange-swap-input-container\">\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  placeholder=\"0.0\"\n                  className=\"Exchange-swap-input\"\n                  value={fromValue}\n                  onChange={(e) => setFromValue(e.target.value)}\n                />\n                {fromValue !== maxAmountFormattedFree && (\n                  <div\n                    className=\"Exchange-swap-max\"\n                    onClick={() => {\n                      setFromValue(maxAmountFormattedFree);\n                    }}\n                  >\n                    <Trans>MAX</Trans>\n                  </div>\n                )}\n              </div>\n              <div className=\"PositionEditor-token-symbol\">USD</div>\n            </div>\n          </div>\n          {orderOption === STOP && (\n            <div className=\"Exchange-swap-section\">\n              <div className=\"Exchange-swap-section-top\">\n                <div className=\"muted\">\n                  <Trans>Price</Trans>\n                </div>\n                <div\n                  className=\"muted align-right clickable\"\n                  onClick={() => {\n                    setTriggerPriceValue(formatAmountFree(position.markPrice, USD_DECIMALS, 2));\n                  }}\n                >\n                  <Trans>Mark: {formatAmount(position.markPrice, USD_DECIMALS, 2, true)}</Trans>\n                </div>\n              </div>\n              <div className=\"Exchange-swap-section-bottom\">\n                <div className=\"Exchange-swap-input-container\">\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    placeholder=\"0.0\"\n                    className=\"Exchange-swap-input\"\n                    value={triggerPriceValue}\n                    onChange={onTriggerPriceChange}\n                  />\n                </div>\n                <div className=\"PositionEditor-token-symbol\">USD</div>\n              </div>\n            </div>\n          )}\n          {renderMinProfitWarning()}\n          {renderReceiveSpreadWarning()}\n          {shouldShowExistingOrderWarning && renderExistingOrderWarning()}\n          <div className=\"PositionEditor-info-box\">\n            {minExecutionFeeErrorMessage && (\n              <div className=\"Confirmation-box-warning\">{minExecutionFeeErrorMessage}</div>\n            )}\n            {hasPendingProfit && orderOption !== STOP && (\n              <div className=\"PositionEditor-accept-profit-warning\">\n                <Checkbox isChecked={isProfitWarningAccepted} setIsChecked={setIsProfitWarningAccepted}>\n                  <span className=\"muted\">Forfeit profit</span>\n                </Checkbox>\n              </div>\n            )}\n            <div className=\"PositionEditor-keep-leverage-settings\">\n              <Checkbox isChecked={keepLeverage} setIsChecked={setKeepLeverage}>\n                <span className=\"muted font-sm\">\n                  <Trans>Keep leverage at {formatAmount(position.leverage, 4, 2)}x</Trans>\n                </span>\n              </Checkbox>\n            </div>\n            {orderOption === MARKET && (\n              <div className=\"PositionEditor-allow-higher-slippage\">\n                <Checkbox isChecked={isHigherSlippageAllowed} setIsChecked={setIsHigherSlippageAllowed}>\n                  <span className=\"muted font-sm\">\n                    <Trans>Allow up to 1% slippage</Trans>\n                  </span>\n                </Checkbox>\n              </div>\n            )}\n            {orderOption === MARKET && (\n              <div>\n                <ExchangeInfoRow label={t`Allowed Slippage`}>\n                  <Tooltip\n                    handle={`${formatAmount(allowedSlippage, 2, 2)}%`}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      return (\n                        <Trans>\n                          You can change this in the settings menu on the top right of the page.\n                          <br />\n                          <br />\n                          Note that a low allowed slippage, e.g. less than 0.5%, may result in failed orders if prices\n                          are volatile.\n                        </Trans>\n                      );\n                    }}\n                  />\n                </ExchangeInfoRow>\n              </div>\n            )}\n            {orderOption === STOP && (\n              <div className=\"Exchange-info-row\">\n                <div className=\"Exchange-info-label\">\n                  <Trans>Trigger Price</Trans>\n                </div>\n                <div className=\"align-right\">\n                  {!triggerPriceUsd && \"-\"}\n                  {triggerPriceUsd && `${triggerPricePrefix} ${formatAmount(triggerPriceUsd, USD_DECIMALS, 2, true)}`}\n                </div>\n              </div>\n            )}\n            <div className=\"Exchange-info-row top-line\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Mark Price</Trans>\n              </div>\n              <div className=\"align-right\">${formatAmount(position.markPrice, USD_DECIMALS, 2, true)}</div>\n            </div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Entry Price</Trans>\n              </div>\n              <div className=\"align-right\">${formatAmount(position.averagePrice, USD_DECIMALS, 2, true)}</div>\n            </div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Liq. Price</Trans>\n              </div>\n              <div className=\"align-right\">\n                {isClosing && orderOption !== STOP && \"-\"}\n                {(!isClosing || orderOption === STOP) && (\n                  <div>\n                    {(!nextLiquidationPrice || nextLiquidationPrice.eq(liquidationPrice)) && (\n                      <div>{`$${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}`}</div>\n                    )}\n                    {nextLiquidationPrice && !nextLiquidationPrice.eq(liquidationPrice) && (\n                      <div>\n                        <div className=\"inline-block muted\">\n                          ${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}\n                          <BsArrowRight className=\"transition-arrow\" />\n                        </div>\n                        ${formatAmount(nextLiquidationPrice, USD_DECIMALS, 2, true)}\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n            </div>\n            <div className=\"Exchange-info-row top-line\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Size</Trans>\n              </div>\n              <div className=\"align-right\">\n                {position && position.size && fromAmount && (\n                  <div>\n                    <div className=\"inline-block muted\">\n                      ${formatAmount(position.size, USD_DECIMALS, 2, true)}\n                      <BsArrowRight className=\"transition-arrow\" />\n                    </div>\n                    ${formatAmount(position.size.sub(fromAmount), USD_DECIMALS, 2, true)}\n                  </div>\n                )}\n                {position && position.size && !fromAmount && (\n                  <div>${formatAmount(position.size, USD_DECIMALS, 2, true)}</div>\n                )}\n              </div>\n            </div>\n            <div className=\"Exchange-info-row\">\n              <div>\n                <Tooltip\n                  handle={\n                    <span className=\"Exchange-info-label\">\n                      <Trans>Collateral ({collateralToken.symbol})</Trans>\n                    </span>\n                  }\n                  position=\"left-top\"\n                  renderContent={() => {\n                    return <Trans>Initial Collateral (Collateral excluding Borrow Fee).</Trans>;\n                  }}\n                />\n              </div>\n\n              <div className=\"align-right\">\n                {nextCollateral && !nextCollateral.eq(position.collateral) ? (\n                  <div>\n                    <div className=\"inline-block muted\">\n                      ${formatAmount(position.collateral, USD_DECIMALS, 2, true)}\n                      <BsArrowRight className=\"transition-arrow\" />\n                    </div>\n                    ${formatAmount(nextCollateral, USD_DECIMALS, 2, true)}\n                  </div>\n                ) : (\n                  `$${formatAmount(position.collateral, USD_DECIMALS, 4, true)}`\n                )}\n              </div>\n            </div>\n            {!keepLeverage && (\n              <div className=\"Exchange-info-row\">\n                <div className=\"Exchange-info-label\">\n                  <Trans>Leverage</Trans>\n                </div>\n                <div className=\"align-right\">\n                  {isClosing && \"-\"}\n                  {!isClosing && (\n                    <div>\n                      {!nextLeverage && <div>{formatAmount(position.leverage, 4, 2)}x</div>}\n                      {nextLeverage && (\n                        <div>\n                          <div className=\"inline-block muted\">\n                            {formatAmount(position.leverage, 4, 2)}x\n                            <BsArrowRight className=\"transition-arrow\" />\n                          </div>\n                          {formatAmount(nextLeverage, 4, 2)}x\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>PnL</Trans>\n              </div>\n              <div className=\"align-right\">\n                {deltaStr} ({deltaPercentageStr})\n              </div>\n            </div>\n\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Fees</Trans>\n              </div>\n              <div className=\"align-right\">\n                <FeesTooltip\n                  isOpening={false}\n                  positionFee={positionFee}\n                  fundingFee={`$${formatAmount(fundingFee, USD_DECIMALS, 2, true)}`}\n                  totalFees={executionFeeUsd.add(totalFees)}\n                  executionFees={{\n                    fee: executionFee,\n                    feeUSD: executionFeeUsd,\n                  }}\n                  swapFee={swapFee}\n                />\n              </div>\n            </div>\n            {showReceiveSpread && (\n              <ExchangeInfoRow label={t`Spread`} isWarning={receiveSpreadInfo.isHigh} isTop>\n                {formatAmount(receiveSpreadInfo.value.mul(100), USD_DECIMALS, 2, true)}%\n              </ExchangeInfoRow>\n            )}\n            <div className={[\"Exchange-info-row PositionSeller-receive-row\", !showReceiveSpread ? \"top-line\" : \"\"]}>\n              <div className=\"Exchange-info-label\">\n                <Trans>Receive</Trans>\n              </div>\n\n              {!isSwapAllowed && receiveToken && (\n                <div className=\"align-right PositionSelector-selected-receive-token\">\n                  {formatAmount(receiveAmount, receiveToken.decimals, 4, true)}\n                  &nbsp;{receiveToken.symbol} ($\n                  {formatAmount(receiveUsd, USD_DECIMALS, 2, true)})\n                </div>\n              )}\n\n              {isSwapAllowed && receiveToken && (\n                <div className=\"align-right\">\n                  <TokenSelector\n                    className={cx(\"PositionSeller-token-selector\", {\n                      warning: isNotEnoughReceiveTokenLiquidity || isCollateralPoolCapacityExceeded,\n                    })}\n                    label={t`Receive`}\n                    showBalances={false}\n                    chainId={chainId}\n                    tokenAddress={receiveToken.address}\n                    onSelectToken={(token) => {\n                      setSwapToToken(token);\n                      setSavedRecieveTokenAddress(token.address);\n                    }}\n                    tokens={toTokens}\n                    getTokenState={(tokenOptionInfo) => {\n                      if (!shouldSwap(collateralToken, tokenOptionInfo)) {\n                        return;\n                      }\n\n                      const convertedTokenAmount = getTokenAmountFromUsd(\n                        infoTokens,\n                        tokenOptionInfo.address,\n                        receiveUsd\n                      );\n\n                      const isNotEnoughLiquidity =\n                        tokenOptionInfo.availableAmount.lt(convertedTokenAmount) ||\n                        tokenOptionInfo.bufferAmount.gt(tokenOptionInfo.poolAmount.sub(convertedTokenAmount));\n\n                      if (isNotEnoughLiquidity) {\n                        const { maxIn, maxOut, maxInUsd, maxOutUsd } = getSwapLimits(\n                          infoTokens,\n                          collateralToken.address,\n                          tokenOptionInfo.address\n                        );\n\n                        const collateralInfo = getTokenInfo(infoTokens, collateralToken.address);\n\n                        return {\n                          disabled: true,\n                          message: (\n                            <div>\n                              <Trans>Insufficient Available Liquidity to swap to {tokenOptionInfo.symbol}:</Trans>\n                              <br />\n                              <br />\n                              <StatsTooltipRow\n                                label={t`Max ${collateralInfo.symbol} in`}\n                                value={[\n                                  `${formatAmount(maxIn, collateralInfo.decimals, 0, true)} ${collateralInfo.symbol}`,\n                                  `($${formatAmount(maxInUsd, USD_DECIMALS, 0, true)})`,\n                                ]}\n                              />\n                              <br />\n                              <StatsTooltipRow\n                                label={t`Max ${tokenOptionInfo.symbol} out`}\n                                value={[\n                                  `${formatAmount(maxOut, tokenOptionInfo.decimals, 2, true)} ${\n                                    tokenOptionInfo.symbol\n                                  }`,\n                                  `($${formatAmount(maxOutUsd, USD_DECIMALS, 2, true)})`,\n                                ]}\n                              />\n                            </div>\n                          ),\n                        };\n                      }\n                    }}\n                    infoTokens={infoTokens}\n                    showTokenImgInDropdown={true}\n                    selectedTokenLabel={\n                      <span className=\"PositionSelector-selected-receive-token\">\n                        {formatAmount(receiveAmount, receiveToken.decimals, 4, true)}&nbsp;\n                        {receiveToken.symbol} (${formatAmount(receiveUsd, USD_DECIMALS, 2, true)})\n                      </span>\n                    }\n                  />\n                </div>\n              )}\n            </div>\n          </div>\n          <div className=\"Exchange-swap-button-container\">{renderPrimaryButton()}</div>\n        </Modal>\n      )}\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport useSWR from \"swr\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { ethers } from \"ethers\";\nimport { BsArrowRight } from \"react-icons/bs\";\n\nimport {\n  USD_DECIMALS,\n  BASIS_POINTS_DIVISOR,\n  DEPOSIT_FEE,\n  DUST_BNB,\n  getLiquidationPrice,\n  MAX_ALLOWED_LEVERAGE,\n  getFundingFee,\n} from \"lib/legacy\";\nimport { getContract } from \"config/contracts\";\nimport Tab from \"../Tab/Tab\";\nimport Modal from \"../Modal/Modal\";\n\nimport PositionRouter from \"abis/PositionRouter.json\";\nimport Token from \"abis/Token.json\";\nimport Tooltip from \"../Tooltip/Tooltip\";\n\nimport { getChainName, IS_NETWORK_DISABLED } from \"config/chains\";\nimport { callContract, contractFetcher } from \"lib/contracts\";\nimport { helperToast } from \"lib/helperToast\";\nimport { getTokenInfo } from \"domain/tokens/utils\";\nimport { approveTokens, shouldRaiseGasError } from \"domain/tokens\";\nimport { usePrevious } from \"lib/usePrevious\";\nimport { bigNumberify, expandDecimals, formatAmount, formatAmountFree, parseValue } from \"lib/numbers\";\nimport { ErrorCode, ErrorDisplayType } from \"./constants\";\nimport Button from \"components/Button/Button\";\nimport FeesTooltip from \"./FeesTooltip\";\n\nconst DEPOSIT = \"Deposit\";\nconst WITHDRAW = \"Withdraw\";\nconst EDIT_OPTIONS = [DEPOSIT, WITHDRAW];\nconst MIN_ORDER_USD = expandDecimals(10, USD_DECIMALS);\nconst { AddressZero } = ethers.constants;\n\nexport default function PositionEditor(props) {\n  const {\n    pendingPositions,\n    setPendingPositions,\n    positionsMap,\n    positionKey,\n    isVisible,\n    setIsVisible,\n    infoTokens,\n    active,\n    account,\n    library,\n    collateralTokenAddress,\n    pendingTxns,\n    setPendingTxns,\n    getUsd,\n    getLeverage,\n    savedIsPnlInLeverage,\n    positionRouterApproved,\n    isWaitingForPositionRouterApproval,\n    isPositionRouterApproving,\n    approvePositionRouter,\n    chainId,\n    minExecutionFee,\n    minExecutionFeeUSD,\n    minExecutionFeeErrorMessage,\n    isContractAccount,\n  } = props;\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n  const position = positionsMap && positionKey ? positionsMap[positionKey] : undefined;\n  const [option, setOption] = useState(DEPOSIT);\n  const [fromValue, setFromValue] = useState(\"\");\n  const [isApproving, setIsApproving] = useState(false);\n  const [isSwapping, setIsSwapping] = useState(false);\n  const prevIsVisible = usePrevious(isVisible);\n  const longOrShortText = position?.isLong ? t`Long` : t`Short`;\n\n  const routerAddress = getContract(chainId, \"Router\");\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\n\n  const { data: tokenAllowance } = useSWR(\n    [active, chainId, collateralTokenAddress, \"allowance\", account, routerAddress],\n    {\n      fetcher: contractFetcher(library, Token),\n    }\n  );\n\n  const isDeposit = option === DEPOSIT;\n  const isWithdrawal = option === WITHDRAW;\n\n  const needPositionRouterApproval = !positionRouterApproved;\n\n  let collateralToken;\n  let maxAmount;\n  let maxAmountFormatted;\n  let maxAmountFormattedFree;\n  let fromAmount;\n  let needApproval;\n\n  let convertedAmount;\n  let convertedAmountFormatted;\n\n  let nextLeverage;\n  let nextLeverageExcludingPnl;\n  let liquidationPrice;\n  let nextLiquidationPrice;\n  let nextCollateral;\n\n  let title;\n  let collateralDelta;\n  let fundingFee;\n  let depositFeeUSD;\n\n  if (position) {\n    title = t`Edit ${longOrShortText} ${position.indexToken.symbol}`;\n    collateralToken = position.collateralToken;\n    liquidationPrice = getLiquidationPrice(position);\n    fundingFee = getFundingFee(position);\n\n    if (isDeposit) {\n      fromAmount = parseValue(fromValue, collateralToken.decimals);\n      maxAmount = collateralToken ? collateralToken.balance : bigNumberify(0);\n      maxAmountFormatted = formatAmount(maxAmount, collateralToken.decimals, 4, true);\n      maxAmountFormattedFree = formatAmountFree(maxAmount, collateralToken.decimals, 8);\n      if (fromAmount) {\n        convertedAmount = getUsd(fromAmount, position.collateralToken.address, false, infoTokens);\n        convertedAmountFormatted = formatAmount(convertedAmount, USD_DECIMALS, 2);\n      }\n    } else {\n      fromAmount = parseValue(fromValue, USD_DECIMALS);\n\n      maxAmount = position.collateralAfterFee.sub(MIN_ORDER_USD).gt(0)\n        ? position.collateralAfterFee.sub(MIN_ORDER_USD)\n        : bigNumberify(0);\n\n      maxAmountFormatted = formatAmount(maxAmount, USD_DECIMALS, 2, true);\n      maxAmountFormattedFree = formatAmountFree(maxAmount, USD_DECIMALS, 2);\n      if (fromAmount) {\n        convertedAmount = fromAmount.mul(expandDecimals(1, collateralToken.decimals)).div(collateralToken.maxPrice);\n        convertedAmountFormatted = formatAmount(convertedAmount, collateralToken.decimals, 4, true);\n      }\n    }\n    needApproval = isDeposit && tokenAllowance && fromAmount && fromAmount.gt(tokenAllowance);\n\n    if (fromAmount) {\n      collateralDelta = isDeposit ? convertedAmount : fromAmount;\n\n      if (position.isLong && isDeposit) {\n        collateralDelta = collateralDelta.mul(BASIS_POINTS_DIVISOR - DEPOSIT_FEE).div(BASIS_POINTS_DIVISOR);\n        depositFeeUSD = convertedAmount.mul(DEPOSIT_FEE).div(BASIS_POINTS_DIVISOR);\n      }\n\n      nextLeverage = getLeverage({\n        size: position.size,\n        collateral: position.collateral,\n        collateralDelta,\n        increaseCollateral: isDeposit,\n        entryFundingRate: position.entryFundingRate,\n        cumulativeFundingRate: position.cumulativeFundingRate,\n        hasProfit: position.hasProfit,\n        delta: position.delta,\n        includeDelta: savedIsPnlInLeverage,\n      });\n\n      nextLeverageExcludingPnl = getLeverage({\n        size: position.size,\n        collateral: position.collateral,\n        collateralDelta,\n        increaseCollateral: isDeposit,\n        entryFundingRate: position.entryFundingRate,\n        cumulativeFundingRate: position.cumulativeFundingRate,\n        hasProfit: position.hasProfit,\n        delta: position.delta,\n        includeDelta: false,\n      });\n\n      nextLiquidationPrice = getLiquidationPrice({\n        isLong: position.isLong,\n        size: position.size,\n        collateral: position.collateral,\n        averagePrice: position.averagePrice,\n        entryFundingRate: position.entryFundingRate,\n        cumulativeFundingRate: position.cumulativeFundingRate,\n        collateralDelta,\n        increaseCollateral: isDeposit,\n      });\n\n      nextCollateral = isDeposit\n        ? position.collateralAfterFee.add(collateralDelta)\n        : position.collateralAfterFee.sub(collateralDelta);\n    }\n  }\n\n  const getError = () => {\n    if (IS_NETWORK_DISABLED[chainId]) {\n      if (isDeposit) return [t`Deposit disabled, pending ${getChainName(chainId)} upgrade`];\n      return [t`Withdraw disabled, pending ${getChainName(chainId)} upgrade`];\n    }\n\n    if (!fromAmount) {\n      return [t`Enter an amount`];\n    }\n\n    if (fromAmount.lte(0)) {\n      return [t`Amount should be greater than zero`];\n    }\n\n    if (!isDeposit && fromAmount) {\n      if (position.collateralAfterFee.sub(fromAmount).lt(MIN_ORDER_USD)) {\n        return [t`Min residual collateral: 10 USD`];\n      }\n    }\n\n    if (!isDeposit && fromAmount && nextLiquidationPrice) {\n      if (position.isLong && position.markPrice.lt(nextLiquidationPrice)) {\n        return [t`Invalid liq. price`, ErrorDisplayType.Tooltip, ErrorCode.InvalidLiqPrice];\n      }\n      if (!position.isLong && position.markPrice.gt(nextLiquidationPrice)) {\n        return [t`Invalid liq. price`, ErrorDisplayType.Tooltip, ErrorCode.InvalidLiqPrice];\n      }\n    }\n\n    if (nextLeverageExcludingPnl && nextLeverageExcludingPnl.lt(1.1 * BASIS_POINTS_DIVISOR)) {\n      return [t`Min leverage: 1.1x`];\n    }\n\n    if (nextLeverage && nextLeverage.gt(MAX_ALLOWED_LEVERAGE)) {\n      return [t`Max leverage: ${(MAX_ALLOWED_LEVERAGE / BASIS_POINTS_DIVISOR).toFixed(1)}x`];\n    }\n    return [false];\n  };\n\n  const isPrimaryEnabled = () => {\n    const [error] = getError();\n    if (error) {\n      return false;\n    }\n    if (isSwapping) {\n      return false;\n    }\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      return false;\n    }\n    if (isPositionRouterApproving) {\n      return false;\n    }\n\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    const [error] = getError();\n    if (error) {\n      return error;\n    }\n    if (isSwapping) {\n      if (isDeposit) {\n        return t`Depositing...`;\n      }\n      return t`Withdrawing...`;\n    }\n\n    if (isApproving) {\n      return t`Approving ${position.collateralToken.symbol}...`;\n    }\n    if (needApproval) {\n      return t`Approve ${position.collateralToken.symbol}`;\n    }\n\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\n      return t`Enabling Leverage`;\n    }\n\n    if (isPositionRouterApproving) {\n      return t`Enabling Leverage...`;\n    }\n\n    if (needPositionRouterApproval) {\n      return t`Enable Leverage`;\n    }\n\n    if (isDeposit) {\n      return t`Deposit`;\n    }\n\n    return t`Withdraw`;\n  };\n\n  const resetForm = () => {\n    setFromValue(\"\");\n  };\n\n  useEffect(() => {\n    if (prevIsVisible !== isVisible) {\n      resetForm();\n    }\n  }, [prevIsVisible, isVisible]);\n\n  const depositCollateral = async () => {\n    setIsSwapping(true);\n    const tokenAddress0 = collateralTokenAddress === AddressZero ? nativeTokenAddress : collateralTokenAddress;\n    const path = [tokenAddress0];\n    const indexTokenAddress =\n      position.indexToken.address === AddressZero ? nativeTokenAddress : position.indexToken.address;\n\n    const priceBasisPoints = position.isLong ? 11000 : 9000;\n    const priceLimit = position.indexToken.maxPrice.mul(priceBasisPoints).div(10000);\n\n    const referralCode = ethers.constants.HashZero;\n    let params = [\n      path, // _path\n      indexTokenAddress, // _indexToken\n      fromAmount, // _amountIn\n      0, // _minOut\n      0, // _sizeDelta\n      position.isLong, // _isLong\n      priceLimit, // _acceptablePrice\n      minExecutionFee, // _executionFee\n      referralCode, // _referralCode\n      AddressZero, // _callbackTarget\n    ];\n\n    let method = \"createIncreasePosition\";\n    let value = minExecutionFee;\n    if (collateralTokenAddress === AddressZero) {\n      method = \"createIncreasePositionETH\";\n      value = fromAmount.add(minExecutionFee);\n      params = [\n        path, // _path\n        indexTokenAddress, // _indexToken\n        0, // _minOut\n        0, // _sizeDelta\n        position.isLong, // _isLong\n        priceLimit, // _acceptablePrice\n        minExecutionFee, // _executionFee\n        referralCode, // _referralCode\n        AddressZero, // _callbackTarget\n      ];\n    }\n\n    if (shouldRaiseGasError(getTokenInfo(infoTokens, collateralTokenAddress), fromAmount)) {\n      setIsSwapping(false);\n      helperToast.error(t`Leave at least ${formatAmount(DUST_BNB, 18, 3)} ETH for gas`);\n      return;\n    }\n\n    const contract = new ethers.Contract(positionRouterAddress, PositionRouter.abi, library.getSigner());\n    callContract(chainId, contract, method, params, {\n      value,\n      sentMsg: t`Deposit submitted.`,\n      successMsg: t`Requested deposit of ${formatAmount(fromAmount, position.collateralToken.decimals, 4)} ${\n        position.collateralToken.symbol\n      } into ${position.indexToken.symbol} ${longOrShortText}.`,\n      failMsg: t`Deposit failed.`,\n      setPendingTxns,\n    })\n      .then(async (res) => {\n        setFromValue(\"\");\n        setIsVisible(false);\n\n        pendingPositions[position.key] = {\n          updatedAt: Date.now(),\n          pendingChanges: {\n            collateralSnapshot: position.collateral,\n            expectingCollateralChange: true,\n          },\n        };\n\n        setPendingPositions({ ...pendingPositions });\n      })\n      .finally(() => {\n        setIsSwapping(false);\n      });\n  };\n\n  const withdrawCollateral = async () => {\n    setIsSwapping(true);\n    const tokenAddress0 = collateralTokenAddress === AddressZero ? nativeTokenAddress : collateralTokenAddress;\n    const indexTokenAddress =\n      position.indexToken.address === AddressZero ? nativeTokenAddress : position.indexToken.address;\n    const priceBasisPoints = position.isLong ? 9000 : 11000;\n    const priceLimit = position.indexToken.maxPrice.mul(priceBasisPoints).div(10000);\n\n    const withdrawAmount = fromAmount.add(fundingFee || bigNumberify(0));\n\n    const withdrawETH =\n      !isContractAccount && (collateralTokenAddress === AddressZero || collateralTokenAddress === nativeTokenAddress);\n\n    const params = [\n      [tokenAddress0], // _path\n      indexTokenAddress, // _indexToken\n      withdrawAmount, // _collateralDelta\n      0, // _sizeDelta\n      position.isLong, // _isLong\n      account, // _receiver\n      priceLimit, // _acceptablePrice\n      0, // _minOut\n      minExecutionFee, // _executionFee\n      withdrawETH, // _withdrawETH\n      AddressZero, // _callbackTarget\n    ];\n\n    const method = \"createDecreasePosition\";\n\n    const contract = new ethers.Contract(positionRouterAddress, PositionRouter.abi, library.getSigner());\n    callContract(chainId, contract, method, params, {\n      value: minExecutionFee,\n      sentMsg: t`Withdrawal submitted.`,\n      successMsg: t`Requested withdrawal of ${formatAmount(fromAmount, USD_DECIMALS, 2)} USD from ${\n        position.indexToken.symbol\n      } ${longOrShortText}.`,\n      failMsg: t`Withdrawal failed.`,\n      setPendingTxns,\n    })\n      .then(async (res) => {\n        setFromValue(\"\");\n        setIsVisible(false);\n\n        pendingPositions[position.key] = {\n          updatedAt: Date.now(),\n          pendingChanges: {\n            collateralSnapshot: position.collateral,\n            expectingCollateralChange: true,\n          },\n        };\n      })\n      .finally(() => {\n        setIsSwapping(false);\n      });\n  };\n\n  const onClickPrimary = () => {\n    if (needApproval) {\n      approveTokens({\n        setIsApproving,\n        library,\n        tokenAddress: collateralTokenAddress,\n        spender: routerAddress,\n        chainId: chainId,\n        infoTokens,\n        getTokenInfo,\n        pendingTxns,\n        setPendingTxns,\n      });\n      return;\n    }\n\n    if (needPositionRouterApproval) {\n      approvePositionRouter({\n        sentMsg: isDeposit ? t`Enable deposit sent.` : t`Enable withdraw sent.`,\n        failMsg: isDeposit ? t`Enable deposit failed.` : t`Enable withdraw failed.`,\n      });\n      return;\n    }\n\n    if (isDeposit) {\n      depositCollateral();\n      return;\n    }\n\n    withdrawCollateral();\n  };\n\n  const EDIT_OPTIONS_LABELS = {\n    [DEPOSIT]: t`Deposit`,\n    [WITHDRAW]: t`Withdraw`,\n  };\n  const ERROR_TOOLTIP_MSG = {\n    [ErrorCode.InvalidLiqPrice]: t`Liquidation price would cross mark price.`,\n  };\n\n  function renderPrimaryButton() {\n    const [errorMessage, errorType, errorCode] = getError();\n    const primaryTextMessage = getPrimaryText();\n    if (errorType === ErrorDisplayType.Tooltip && errorMessage === primaryTextMessage && ERROR_TOOLTIP_MSG[errorCode]) {\n      return (\n        <Tooltip\n          isHandlerDisabled\n          handle={\n            <Button variant=\"primary-action\" className=\"w-100\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n              {primaryTextMessage}\n            </Button>\n          }\n          className=\"Tooltip-flex\"\n          position=\"center-top\"\n          renderContent={() => ERROR_TOOLTIP_MSG[errorCode]}\n        />\n      );\n    }\n    return (\n      <Button variant=\"primary-action\" className=\"w-100\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n        {primaryTextMessage}\n      </Button>\n    );\n  }\n\n  function getTotalFees() {\n    if (isDeposit && position?.isLong && minExecutionFeeUSD.gt(0)) {\n      return depositFeeUSD && minExecutionFeeUSD.add(depositFeeUSD);\n    }\n    return minExecutionFeeUSD;\n  }\n\n  return (\n    <div className=\"PositionEditor\">\n      {position && (\n        <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={title}>\n          <div>\n            <Tab\n              options={EDIT_OPTIONS}\n              optionLabels={EDIT_OPTIONS_LABELS}\n              option={option}\n              setOption={setOption}\n              onChange={resetForm}\n            />\n            {(isDeposit || isWithdrawal) && (\n              <div>\n                <div className=\"Exchange-swap-section\">\n                  <div className=\"Exchange-swap-section-top\">\n                    <div className=\"muted\">\n                      {convertedAmountFormatted && (\n                        <div className=\"Exchange-swap-usd\">\n                          {isDeposit ? t`Deposit` : t`Withdraw`}: {convertedAmountFormatted}{\" \"}\n                          {isDeposit ? \"USD\" : position.collateralToken.symbol}\n                        </div>\n                      )}\n                      {!convertedAmountFormatted && `${isDeposit ? t`Deposit` : t`Withdraw`}`}\n                    </div>\n                    {maxAmount && (\n                      <div className=\"muted align-right clickable\" onClick={() => setFromValue(maxAmountFormattedFree)}>\n                        <Trans>Max: {maxAmountFormatted}</Trans>\n                      </div>\n                    )}\n                  </div>\n                  <div className=\"Exchange-swap-section-bottom\">\n                    <div className=\"Exchange-swap-input-container\">\n                      <input\n                        type=\"number\"\n                        min=\"0\"\n                        placeholder=\"0.0\"\n                        className=\"Exchange-swap-input\"\n                        value={fromValue}\n                        onChange={(e) => setFromValue(e.target.value)}\n                      />\n                      {fromValue !== maxAmountFormattedFree && maxAmount?.gt(0) && (\n                        <div\n                          className=\"Exchange-swap-max\"\n                          onClick={() => {\n                            setFromValue(maxAmountFormattedFree);\n                          }}\n                        >\n                          <Trans>MAX</Trans>\n                        </div>\n                      )}\n                    </div>\n                    <div className=\"PositionEditor-token-symbol\">\n                      {isDeposit ? position.collateralToken.symbol : \"USD\"}\n                    </div>\n                  </div>\n                </div>\n                <div className=\"PositionEditor-info-box\">\n                  {minExecutionFeeErrorMessage && (\n                    <div className=\"Confirmation-box-warning\">{minExecutionFeeErrorMessage}</div>\n                  )}\n                  <div className=\"Exchange-info-row\">\n                    <div className=\"Exchange-info-label\">\n                      <Trans>Leverage</Trans>\n                    </div>\n                    <div className=\"align-right\">\n                      {!nextLeverage && <div>{formatAmount(position.leverage, 4, 2, true)}x</div>}\n                      {nextLeverage && (\n                        <div>\n                          <div className=\"inline-block muted\">\n                            {formatAmount(position.leverage, 4, 2, true)}x\n                            <BsArrowRight className=\"transition-arrow\" />\n                          </div>\n                          {formatAmount(nextLeverage, 4, 2, true)}x\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"Exchange-info-row top-line\">\n                    <div className=\"Exchange-info-label\">\n                      <Trans>Entry Price</Trans>\n                    </div>\n                    <div className=\"align-right\">${formatAmount(position.averagePrice, USD_DECIMALS, 2, true)}</div>\n                  </div>\n                  <div className=\"Exchange-info-row\">\n                    <div className=\"Exchange-info-label\">\n                      <Trans>Mark Price</Trans>\n                    </div>\n                    <div className=\"align-right\">${formatAmount(position.markPrice, USD_DECIMALS, 2, true)}</div>\n                  </div>\n                  <div className=\"Exchange-info-row\">\n                    <div className=\"Exchange-info-label\">\n                      <Trans>Liq. Price</Trans>\n                    </div>\n                    <div className=\"align-right\">\n                      {!nextLiquidationPrice && (\n                        <div>\n                          {!fromAmount && `$${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}`}\n                          {fromAmount && \"-\"}\n                        </div>\n                      )}\n                      {nextLiquidationPrice && (\n                        <div>\n                          <div className=\"inline-block muted\">\n                            ${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}\n                            <BsArrowRight className=\"transition-arrow\" />\n                          </div>\n                          ${formatAmount(nextLiquidationPrice, USD_DECIMALS, 2, true)}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"Exchange-info-row top-line\">\n                    <div className=\"Exchange-info-label\">\n                      <Trans>Size</Trans>\n                    </div>\n                    <div className=\"align-right\">{formatAmount(position.size, USD_DECIMALS, 2, true)} USD</div>\n                  </div>\n                  <div className=\"Exchange-info-row\">\n                    <div className=\"Exchange-info-label\">\n                      <Trans>Collateral ({collateralToken.symbol})</Trans>\n                    </div>\n                    <div className=\"align-right\">\n                      {!nextCollateral && (\n                        <div>${formatAmount(position.collateralAfterFee, USD_DECIMALS, 2, true)}</div>\n                      )}\n                      {nextCollateral && (\n                        <div>\n                          <div className=\"inline-block muted\">\n                            ${formatAmount(position.collateralAfterFee, USD_DECIMALS, 2, true)}\n                            <BsArrowRight className=\"transition-arrow\" />\n                          </div>\n                          ${formatAmount(nextCollateral, USD_DECIMALS, 2, true)}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  {fromAmount?.gt(0) && fundingFee?.gt(0) && (\n                    <div className=\"Exchange-info-row\">\n                      <div className=\"Exchange-info-label\">\n                        <Trans>Borrow Fee</Trans>\n                      </div>\n                      <div className=\"align-right\">\n                        <Tooltip\n                          handle={\n                            <>\n                              <div className=\"inline-block muted\">\n                                ${formatAmount(fundingFee, USD_DECIMALS, 2, true)}\n                                <BsArrowRight className=\"transition-arrow\" />\n                              </div>\n                              $0\n                            </>\n                          }\n                          position=\"right-top\"\n                          renderContent={() => (\n                            <Trans>The pending borrow fee will be charged on this transaction.</Trans>\n                          )}\n                        />\n                      </div>\n                    </div>\n                  )}\n\n                  <div className=\"Exchange-info-row\">\n                    <div className=\"Exchange-info-label\">\n                      <Trans>Fees</Trans>\n                    </div>\n                    <div className=\"align-right\">\n                      <FeesTooltip\n                        executionFees={{\n                          fee: minExecutionFee,\n                          feeUSD: minExecutionFeeUSD,\n                        }}\n                        totalFees={getTotalFees()}\n                        depositFee={depositFeeUSD}\n                      />\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"Exchange-swap-button-container\">{renderPrimaryButton()}</div>\n              </div>\n            )}\n          </div>\n        </Modal>\n      )}\n    </div>\n  );\n}\n","import \"./SpinningLoader.css\";\n\nimport { ImSpinner2 } from \"react-icons/im\";\n\nfunction SpinningLoader({ size = \"1.25rem\" }) {\n  return <ImSpinner2 className=\"spin spinning-loader\" style={{ fontSize: size }} />;\n}\n\nexport default SpinningLoader;\n","export default async function downloadImage(dataURI: string, filename: string) {\n  const blob = await (await fetch(dataURI)).blob();\n  if (typeof window.navigator.msSaveBlob !== \"undefined\") {\n    // IE doesn't allow using a blob object directly as link href.\n    // Workaround for \"HTML7007: One or more blob URLs were\n    // revoked by closing the blob for which they were created.\n    // These URLs will no longer resolve as the data backing\n    // the URL has been freed.\"\n    window.navigator.msSaveBlob(blob, filename);\n    return;\n  }\n  // Other browsers\n  // Create a link pointing to the ObjectURL containing the blob\n  const blobURL = window.URL.createObjectURL(blob);\n  const tempLink = document.createElement(\"a\");\n  tempLink.style.display = \"none\";\n  tempLink.href = blobURL;\n  tempLink.setAttribute(\"download\", filename);\n  // Safari thinks _blank anchor are pop ups. We only want to set _blank\n  // target if the browser does not support the HTML5 download attribute.\n  // This allows you to download files in desktop safari if pop up blocking\n  // is enabled.\n  if (typeof tempLink.download === \"undefined\") {\n    tempLink.setAttribute(\"target\", \"_blank\");\n  }\n  document.body.appendChild(tempLink);\n  tempLink.click();\n  document.body.removeChild(tempLink);\n  setTimeout(() => {\n    // For Firefox it is necessary to delay revoking the ObjectURL\n    window.URL.revokeObjectURL(blobURL);\n  }, 100);\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport { t, Trans } from \"@lingui/macro\";\nimport { toJpeg } from \"html-to-image\";\nimport cx from \"classnames\";\nimport { BiCopy } from \"react-icons/bi\";\nimport { RiFileDownloadLine } from \"react-icons/ri\";\nimport { FiTwitter } from \"react-icons/fi\";\nimport { useCopyToClipboard, useMedia } from \"react-use\";\nimport Modal from \"../Modal/Modal\";\nimport gmxLogo from \"img/gmx-logo-with-name.svg\";\nimport \"./PositionShare.css\";\nimport { QRCodeSVG } from \"qrcode.react\";\nimport { getHomeUrl, getRootShareApiUrl, getTwitterIntentURL, USD_DECIMALS } from \"lib/legacy\";\nimport { useAffiliateCodes } from \"domain/referrals\";\nimport SpinningLoader from \"../Common/SpinningLoader\";\nimport useLoadImage from \"lib/useLoadImage\";\nimport shareBgImg from \"img/position-share-bg.png\";\nimport { helperToast } from \"lib/helperToast\";\nimport { formatAmount } from \"lib/numbers\";\nimport downloadImage from \"lib/downloadImage\";\nconst ROOT_SHARE_URL = getRootShareApiUrl();\nconst UPLOAD_URL = ROOT_SHARE_URL + \"/api/upload\";\nconst UPLOAD_SHARE = ROOT_SHARE_URL + \"/api/s\";\nconst config = { quality: 0.95, canvasWidth: 518, canvasHeight: 292, type: \"image/jpeg\" };\n\nfunction getShareURL(imageInfo, ref) {\n  if (!imageInfo) return;\n  let url = `${UPLOAD_SHARE}?id=${imageInfo.id}`;\n  if (ref.success && ref.code) {\n    url = url + `&ref=${ref.code}`;\n  }\n  return url;\n}\n\nfunction PositionShare({ setIsPositionShareModalOpen, isPositionShareModalOpen, positionToShare, account, chainId }) {\n  const userAffiliateCode = useAffiliateCodes(chainId, account);\n  const [uploadedImageInfo, setUploadedImageInfo] = useState();\n  const [uploadedImageError, setUploadedImageError] = useState();\n  const [, copyToClipboard] = useCopyToClipboard();\n  const sharePositionBgImg = useLoadImage(shareBgImg);\n  const positionRef = useRef();\n  const tweetLink = getTwitterIntentURL(\n    `Latest $${positionToShare?.indexToken?.symbol} trade on @GMX_IO`,\n    getShareURL(uploadedImageInfo, userAffiliateCode)\n  );\n\n  useEffect(() => {\n    (async function () {\n      const element = positionRef.current;\n      if (element && userAffiliateCode.success && sharePositionBgImg && positionToShare) {\n        // We have to call the toJpeg function multiple times to make sure the canvas renders all the elements like background image\n        // @refer https://github.com/tsayen/dom-to-image/issues/343#issuecomment-652831863\n        const image = await toJpeg(element, config)\n          .then(() => toJpeg(element, config))\n          .then(() => toJpeg(element, config));\n        try {\n          const imageInfo = await fetch(UPLOAD_URL, { method: \"POST\", body: image }).then((res) => res.json());\n          setUploadedImageInfo(imageInfo);\n        } catch {\n          setUploadedImageInfo(null);\n          setUploadedImageError(t`Image generation error, please refresh and try again.`);\n        }\n      }\n    })();\n  }, [userAffiliateCode, sharePositionBgImg, positionToShare]);\n\n  async function handleDownload() {\n    const element = positionRef.current;\n    if (!element) return;\n    const imgBlob = await toJpeg(element, config)\n      .then(() => toJpeg(element, config))\n      .then(() => toJpeg(element, config));\n    downloadImage(imgBlob, \"share.jpeg\");\n  }\n\n  function handleCopy() {\n    if (!uploadedImageInfo) return;\n    const url = getShareURL(uploadedImageInfo, userAffiliateCode);\n    copyToClipboard(url);\n    helperToast.success(t`Link copied to clipboard.`);\n  }\n  return (\n    <Modal\n      className=\"position-share-modal\"\n      isVisible={isPositionShareModalOpen}\n      setIsVisible={setIsPositionShareModalOpen}\n      label={t`Share Position`}\n    >\n      <PositionShareCard\n        userAffiliateCode={userAffiliateCode}\n        positionRef={positionRef}\n        position={positionToShare}\n        chainId={chainId}\n        account={account}\n        uploadedImageInfo={uploadedImageInfo}\n        uploadedImageError={uploadedImageError}\n        sharePositionBgImg={sharePositionBgImg}\n      />\n      {uploadedImageError && <span className=\"error\">{uploadedImageError}</span>}\n\n      <div className=\"actions\">\n        <button disabled={!uploadedImageInfo} className=\"mr-base App-button-option\" onClick={handleCopy}>\n          <BiCopy className=\"icon\" />\n          <Trans>Copy</Trans>\n        </button>\n        <button disabled={!uploadedImageInfo} className=\"mr-base App-button-option\" onClick={handleDownload}>\n          <RiFileDownloadLine className=\"icon\" />\n          <Trans>Download</Trans>\n        </button>\n        <div className={cx(\"tweet-link-container\", { disabled: !uploadedImageInfo })}>\n          <a\n            target=\"_blank\"\n            className={cx(\"tweet-link App-button-option\", { disabled: !uploadedImageInfo })}\n            rel=\"noreferrer\"\n            href={tweetLink}\n          >\n            <FiTwitter className=\"icon\" />\n            <Trans>Tweet</Trans>\n          </a>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nfunction PositionShareCard({\n  positionRef,\n  position,\n  userAffiliateCode,\n  uploadedImageInfo,\n  uploadedImageError,\n  sharePositionBgImg,\n}) {\n  const isMobile = useMedia(\"(max-width: 400px)\");\n  const { code, success } = userAffiliateCode;\n  const { deltaAfterFeesPercentageStr, isLong, leverage, indexToken, averagePrice, markPrice } = position;\n\n  const homeURL = getHomeUrl();\n  return (\n    <div className=\"relative\">\n      <div ref={positionRef} className=\"position-share\" style={{ backgroundImage: `url(${sharePositionBgImg})` }}>\n        <img className=\"logo\" src={gmxLogo} alt=\"GMX Logo\" />\n        <ul className=\"info\">\n          <li className=\"side\">{isLong ? \"LONG\" : \"SHORT\"}</li>\n          <li>{formatAmount(leverage, 4, 2, true)}x&nbsp;</li>\n          <li>{indexToken.symbol} USD</li>\n        </ul>\n        <h3 className=\"pnl\">{deltaAfterFeesPercentageStr}</h3>\n        <div className=\"prices\">\n          <div>\n            <p>Entry Price</p>\n            <p className=\"price\">${formatAmount(averagePrice, USD_DECIMALS, 2, true)}</p>\n          </div>\n          <div>\n            <p>Index Price</p>\n            <p className=\"price\">${formatAmount(markPrice, USD_DECIMALS, 2, true)}</p>\n          </div>\n        </div>\n        <div className=\"referral-code\">\n          <div>\n            <QRCodeSVG size={isMobile ? 24 : 32} value={success && code ? `${homeURL}/#/?ref=${code}` : `${homeURL}`} />\n          </div>\n          <div className=\"referral-code-info\">\n            {success && code ? (\n              <>\n                <p className=\"label\">Referral Code:</p>\n                <p className=\"code\">{code}</p>\n              </>\n            ) : (\n              <p className=\"code\">https://gmx.io</p>\n            )}\n          </div>\n        </div>\n      </div>\n      {!uploadedImageInfo && !uploadedImageError && (\n        <div className=\"image-overlay-wrapper\">\n          <div className=\"image-overlay\">\n            <SpinningLoader />\n            <p className=\"loading-text\">\n              <Trans>Generating shareable image...</Trans>\n            </p>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default PositionShare;\n","import { useEffect, useState } from \"react\";\n\nexport default function useLoadImage(src: string) {\n  const [sourceLoaded, setSourceLoaded] = useState<string | null>(null);\n\n  useEffect(() => {\n    const img = new Image();\n    img.src = src;\n    img.onload = () => setSourceLoaded(src);\n  }, [src]);\n\n  return sourceLoaded;\n}\n","import { Menu } from \"@headlessui/react\";\nimport { Trans } from \"@lingui/macro\";\nimport { HiDotsVertical } from \"react-icons/hi\";\nimport { AiOutlineEdit } from \"react-icons/ai\";\nimport { BiSelectMultiple } from \"react-icons/bi\";\nimport { RiShareBoxFill } from \"react-icons/ri\";\nimport \"./PositionDropdown.css\";\n\nfunction PositionDropdown(p) {\n  const { handleEditCollateral, handleShare, handleMarketSelect } = p;\n\n  return (\n    <Menu>\n      <Menu.Button as=\"div\">\n        <button className=\"PositionDropdown-dots-icon\">\n          <HiDotsVertical fontSize={20} fontWeight={700} />\n        </button>\n      </Menu.Button>\n      <div className=\"PositionDropdown-extra-options\">\n        <Menu.Items as=\"div\" className=\"menu-items\">\n          <Menu.Item>\n            <div className=\"menu-item\" onClick={handleEditCollateral}>\n              <AiOutlineEdit fontSize={16} />\n              <p>\n                <Trans>Edit Collateral</Trans>\n              </p>\n            </div>\n          </Menu.Item>\n          <Menu.Item>\n            <div className=\"menu-item\" onClick={handleMarketSelect}>\n              <BiSelectMultiple fontSize={16} />\n              <p>\n                <Trans>Select Market</Trans>\n              </p>\n            </div>\n          </Menu.Item>\n          {handleShare && (\n            <Menu.Item>\n              <div className=\"menu-item\" onClick={handleShare}>\n                <RiShareBoxFill fontSize={16} />\n                <p>\n                  <Trans>Share Position</Trans>\n                </p>\n              </div>\n            </Menu.Item>\n          )}\n        </Menu.Items>\n      </div>\n    </Menu>\n  );\n}\n\nexport default PositionDropdown;\n","import { useEffect, useState } from \"react\";\nimport { useWeb3React } from \"@web3-react/core\";\n\nexport enum AccountType {\n  CONTRACT = \"contract\",\n  EOA = \"eoa\",\n}\n\nexport default function useAccountType() {\n  const { active, account, library } = useWeb3React();\n  const [contractType, setContractType] = useState<AccountType | null>(null);\n\n  useEffect(() => {\n    if (!active) return;\n    (async function () {\n      const code = await library.getCode(account);\n      const type = code === \"0x\" ? AccountType.EOA : AccountType.CONTRACT;\n      setContractType(type);\n    })();\n  }, [account, library, active]);\n\n  return contractType;\n}\n","import { Trans, t } from \"@lingui/macro\";\nimport StatsTooltipRow from \"components/StatsTooltip/StatsTooltipRow\";\nimport Tooltip from \"components/Tooltip/Tooltip\";\nimport { Position } from \"domain/positions/types\";\nimport { USD_DECIMALS } from \"lib/legacy\";\nimport { formatAmount } from \"lib/numbers\";\n\ntype Props = {\n  position: Position;\n  isMobile?: boolean;\n};\n\nexport default function NetValueTooltip({ position, isMobile }: Props) {\n  return (\n    <Tooltip\n      handle={`$${formatAmount(position.netValue, USD_DECIMALS, 2, true)}`}\n      position={isMobile ? \"right-bottom\" : \"left-bottom\"}\n      handleClassName=\"plain\"\n      renderContent={() => {\n        return (\n          <>\n            <Trans>Net Value: Initial Collateral + PnL - Borrow Fee - Close Fee</Trans>\n            <br />\n            <br />\n            <StatsTooltipRow\n              label={t`Initial Collateral`}\n              value={formatAmount(position.collateral, USD_DECIMALS, 2, true)}\n            />\n            <StatsTooltipRow label={t`PnL`} value={position.deltaBeforeFeesStr} showDollar={false} />\n            <StatsTooltipRow\n              label={t`Borrow Fee`}\n              showDollar={false}\n              value={`-$${formatAmount(position.fundingFee, USD_DECIMALS, 2, true)}`}\n            />\n            <StatsTooltipRow\n              label={t`Open Fee`}\n              showDollar={false}\n              value={`-$${formatAmount(position.closingFee, USD_DECIMALS, 2, true)}`}\n            />\n            <StatsTooltipRow\n              label={t`Close Fee`}\n              showDollar={false}\n              value={`-$${formatAmount(position.closingFee, USD_DECIMALS, 2, true)}`}\n            />\n            <br />\n            <StatsTooltipRow\n              label={t`PnL After Fees`}\n              value={[position.deltaAfterFeesStr, `(${position.deltaAfterFeesPercentageStr})`]}\n              showDollar={false}\n            />\n          </>\n        );\n      }}\n    />\n  );\n}\n","import React, { useState } from \"react\";\nimport cx from \"classnames\";\nimport { Trans, t } from \"@lingui/macro\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport PositionSeller from \"./PositionSeller\";\nimport PositionEditor from \"./PositionEditor\";\nimport OrdersToa from \"./OrdersToa\";\nimport { ImSpinner2 } from \"react-icons/im\";\n\nimport {\n  getLiquidationPrice,\n  getLeverage,\n  getOrderError,\n  USD_DECIMALS,\n  FUNDING_RATE_PRECISION,\n  SWAP,\n  LONG,\n  SHORT,\n  INCREASE,\n  DECREASE,\n} from \"lib/legacy\";\nimport PositionShare from \"./PositionShare\";\nimport PositionDropdown from \"./PositionDropdown\";\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\nimport NetValueTooltip from \"./NetValueTooltip\";\nimport { helperToast } from \"lib/helperToast\";\nimport { getUsd } from \"domain/tokens/utils\";\nimport { bigNumberify, formatAmount } from \"lib/numbers\";\nimport { AiOutlineEdit } from \"react-icons/ai\";\nimport useAccountType, { AccountType } from \"lib/wallets/useAccountType\";\n\nconst getOrdersForPosition = (account, position, orders, nativeTokenAddress) => {\n  if (!orders || orders.length === 0) {\n    return [];\n  }\n  /* eslint-disable array-callback-return */\n  return orders\n    .filter((order) => {\n      if (order.type === SWAP) {\n        return false;\n      }\n      const hasMatchingIndexToken =\n        order.indexToken === nativeTokenAddress\n          ? position.indexToken.isNative\n          : order.indexToken === position.indexToken.address;\n      const hasMatchingCollateralToken =\n        order.collateralToken === nativeTokenAddress\n          ? position.collateralToken.isNative\n          : order.collateralToken === position.collateralToken.address;\n      if (order.isLong === position.isLong && hasMatchingIndexToken && hasMatchingCollateralToken) {\n        return true;\n      }\n    })\n    .map((order) => {\n      order.error = getOrderError(account, order, undefined, position);\n      if (order.type === DECREASE && order.sizeDelta.gt(position.size)) {\n        order.error = t`Order size is bigger than position, will only be executable if position increases`;\n      }\n      return order;\n    });\n};\n\nexport default function PositionsList(props) {\n  const {\n    pendingPositions,\n    setPendingPositions,\n    positions,\n    positionsDataIsLoading,\n    positionsMap,\n    infoTokens,\n    active,\n    account,\n    library,\n    pendingTxns,\n    setPendingTxns,\n    setListSection,\n    flagOrdersEnabled,\n    savedIsPnlInLeverage,\n    chainId,\n    nativeTokenAddress,\n    orders,\n    setIsWaitingForPluginApproval,\n    approveOrderBook,\n    isPluginApproving,\n    isWaitingForPluginApproval,\n    orderBookApproved,\n    positionRouterApproved,\n    isWaitingForPositionRouterApproval,\n    isPositionRouterApproving,\n    approvePositionRouter,\n    showPnlAfterFees,\n    setMarket,\n    minExecutionFee,\n    minExecutionFeeUSD,\n    minExecutionFeeErrorMessage,\n    usdgSupply,\n    totalTokenWeights,\n    hideActions,\n  } = props;\n\n  const [positionToEditKey, setPositionToEditKey] = useState(undefined);\n  const [positionToSellKey, setPositionToSellKey] = useState(undefined);\n  const [positionToShare, setPositionToShare] = useState(null);\n  const [isPositionEditorVisible, setIsPositionEditorVisible] = useState(undefined);\n  const [isPositionSellerVisible, setIsPositionSellerVisible] = useState(undefined);\n  const [collateralTokenAddress, setCollateralTokenAddress] = useState(undefined);\n  const [isPositionShareModalOpen, setIsPositionShareModalOpen] = useState(false);\n  const [ordersToaOpen, setOrdersToaOpen] = useState(false);\n  const [isHigherSlippageAllowed, setIsHigherSlippageAllowed] = useState(false);\n  const accountType = useAccountType();\n  const isContractAccount = accountType === AccountType.CONTRACT;\n\n  const editPosition = (position) => {\n    setCollateralTokenAddress(position.collateralToken.address);\n    setPositionToEditKey(position.key);\n    setIsPositionEditorVisible(true);\n  };\n\n  const sellPosition = (position) => {\n    setPositionToSellKey(position.key);\n    setIsPositionSellerVisible(true);\n    setIsHigherSlippageAllowed(false);\n  };\n\n  const onPositionClick = (position) => {\n    if (hideActions) return;\n    const longOrShortText = position.isLong ? t`Long` : t`Short`;\n    helperToast.success(t`${longOrShortText} ${position.indexToken.symbol} market selected`);\n    setMarket(position.isLong ? LONG : SHORT, position.indexToken.address);\n  };\n\n  return (\n    <div className=\"PositionsList\">\n      <PositionEditor\n        pendingPositions={pendingPositions}\n        setPendingPositions={setPendingPositions}\n        positionsMap={positionsMap}\n        positionKey={positionToEditKey}\n        isVisible={isPositionEditorVisible}\n        setIsVisible={setIsPositionEditorVisible}\n        infoTokens={infoTokens}\n        active={active}\n        account={account}\n        library={library}\n        collateralTokenAddress={collateralTokenAddress}\n        pendingTxns={pendingTxns}\n        setPendingTxns={setPendingTxns}\n        getUsd={getUsd}\n        getLeverage={getLeverage}\n        savedIsPnlInLeverage={savedIsPnlInLeverage}\n        positionRouterApproved={positionRouterApproved}\n        isPositionRouterApproving={isPositionRouterApproving}\n        isWaitingForPositionRouterApproval={isWaitingForPositionRouterApproval}\n        approvePositionRouter={approvePositionRouter}\n        chainId={chainId}\n        minExecutionFee={minExecutionFee}\n        minExecutionFeeUSD={minExecutionFeeUSD}\n        minExecutionFeeErrorMessage={minExecutionFeeErrorMessage}\n        isContractAccount={isContractAccount}\n      />\n      {ordersToaOpen && (\n        <OrdersToa\n          setIsVisible={setOrdersToaOpen}\n          approveOrderBook={approveOrderBook}\n          isPluginApproving={isPluginApproving}\n        />\n      )}\n      {isPositionShareModalOpen && (\n        <PositionShare\n          setIsPositionShareModalOpen={setIsPositionShareModalOpen}\n          isPositionShareModalOpen={isPositionShareModalOpen}\n          positionToShare={positionToShare}\n          chainId={chainId}\n          account={account}\n        />\n      )}\n      {ordersToaOpen && (\n        <OrdersToa\n          setIsVisible={setOrdersToaOpen}\n          approveOrderBook={approveOrderBook}\n          isPluginApproving={isPluginApproving}\n        />\n      )}\n      {isPositionSellerVisible && (\n        <PositionSeller\n          pendingPositions={pendingPositions}\n          setPendingPositions={setPendingPositions}\n          setIsWaitingForPluginApproval={setIsWaitingForPluginApproval}\n          approveOrderBook={approveOrderBook}\n          isPluginApproving={isPluginApproving}\n          isWaitingForPluginApproval={isWaitingForPluginApproval}\n          orderBookApproved={orderBookApproved}\n          positionsMap={positionsMap}\n          positionKey={positionToSellKey}\n          isVisible={isPositionSellerVisible}\n          setIsVisible={setIsPositionSellerVisible}\n          infoTokens={infoTokens}\n          active={active}\n          account={account}\n          orders={orders}\n          library={library}\n          pendingTxns={pendingTxns}\n          setPendingTxns={setPendingTxns}\n          flagOrdersEnabled={flagOrdersEnabled}\n          savedIsPnlInLeverage={savedIsPnlInLeverage}\n          chainId={chainId}\n          nativeTokenAddress={nativeTokenAddress}\n          setOrdersToaOpen={setOrdersToaOpen}\n          positionRouterApproved={positionRouterApproved}\n          isPositionRouterApproving={isPositionRouterApproving}\n          isWaitingForPositionRouterApproval={isWaitingForPositionRouterApproval}\n          approvePositionRouter={approvePositionRouter}\n          isHigherSlippageAllowed={isHigherSlippageAllowed}\n          setIsHigherSlippageAllowed={setIsHigherSlippageAllowed}\n          minExecutionFee={minExecutionFee}\n          minExecutionFeeUSD={minExecutionFeeUSD}\n          minExecutionFeeErrorMessage={minExecutionFeeErrorMessage}\n          usdgSupply={usdgSupply}\n          totalTokenWeights={totalTokenWeights}\n          isContractAccount={isContractAccount}\n        />\n      )}\n      {positions && (\n        <div className=\"Exchange-list small\">\n          <div>\n            {positions.length === 0 && positionsDataIsLoading && (\n              <div className=\"Exchange-empty-positions-list-note App-card\">\n                <Trans>Loading...</Trans>\n              </div>\n            )}\n            {positions.length === 0 && !positionsDataIsLoading && (\n              <div className=\"Exchange-empty-positions-list-note App-card\">\n                <Trans>No open positions</Trans>\n              </div>\n            )}\n            {positions.map((position) => {\n              const positionOrders = getOrdersForPosition(account, position, orders, nativeTokenAddress);\n              const liquidationPrice = getLiquidationPrice(position);\n              const hasPositionProfit = position[showPnlAfterFees ? \"hasProfitAfterFees\" : \"hasProfit\"];\n              const positionDelta =\n                position[showPnlAfterFees ? \"pendingDeltaAfterFees\" : \"pendingDelta\"] || bigNumberify(0);\n              let borrowFeeUSD;\n              if (position.collateralToken && position.collateralToken.fundingRate) {\n                const borrowFeeRate = position.collateralToken.fundingRate\n                  .mul(position.size)\n                  .mul(24)\n                  .div(FUNDING_RATE_PRECISION);\n                borrowFeeUSD = formatAmount(borrowFeeRate, USD_DECIMALS, 2, true);\n              }\n\n              return (\n                <div key={position.key} className=\"App-card\">\n                  <div className=\"App-card-title\">\n                    <span className=\"Exchange-list-title\">{position.indexToken.symbol}</span>\n                  </div>\n                  <div className=\"App-card-divider\" />\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Leverage</Trans>\n                      </div>\n                      <div>\n                        <span className=\"Position-leverage\">{position.leverageStr}</span>\n                        <span\n                          className={cx(\"Exchange-list-side\", {\n                            positive: position.isLong,\n                            negative: !position.isLong,\n                          })}\n                        >\n                          {position.isLong ? t`Long` : t`Short`}\n                        </span>\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Size</Trans>\n                      </div>\n                      <div>${formatAmount(position.size, USD_DECIMALS, 2, true)}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Collateral</Trans>\n                      </div>\n                      <div className=\"position-list-collateral\">\n                        <Tooltip\n                          handle={`$${formatAmount(position.collateralAfterFee, USD_DECIMALS, 2, true)}`}\n                          position=\"right-bottom\"\n                          handleClassName={cx(\"plain\", { negative: position.hasLowCollateral })}\n                          renderContent={() => {\n                            return (\n                              <>\n                                {position.hasLowCollateral && (\n                                  <div>\n                                    <Trans>\n                                      WARNING: This position has a low amount of collateral after deducting borrowing\n                                      fees, deposit more collateral to reduce the position's liquidation risk.\n                                    </Trans>\n                                    <br />\n                                    <br />\n                                  </div>\n                                )}\n                                <StatsTooltipRow\n                                  label={t`Initial Collateral`}\n                                  value={formatAmount(position.collateral, USD_DECIMALS, 2, true)}\n                                />\n                                <StatsTooltipRow\n                                  label={t`Borrow Fee`}\n                                  value={formatAmount(position.fundingFee, USD_DECIMALS, 2, true)}\n                                />\n                                <StatsTooltipRow\n                                  showDollar={false}\n                                  label={t`Borrow Fee / Day`}\n                                  value={`-$${borrowFeeUSD}`}\n                                />\n\n                                {!hideActions && (\n                                  <span>\n                                    <Trans>Use the Edit Collateral icon to deposit or withdraw collateral.</Trans>\n                                  </span>\n                                )}\n                              </>\n                            );\n                          }}\n                        />\n                        {!hideActions && (\n                          <span className=\"edit-icon\" onClick={() => editPosition(position)}>\n                            <AiOutlineEdit fontSize={16} />\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>PnL</Trans>\n                      </div>\n                      <div>\n                        <span\n                          className={cx(\"Exchange-list-info-label\", {\n                            positive: hasPositionProfit && positionDelta.gt(0),\n                            negative: !hasPositionProfit && positionDelta.gt(0),\n                            muted: positionDelta.eq(0),\n                          })}\n                        >\n                          {position.deltaStr} ({position.deltaPercentageStr})\n                        </span>\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Net Value</Trans>\n                      </div>\n                      <div>\n                        <NetValueTooltip isMobile position={position} />\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Orders</Trans>\n                      </div>\n                      <div>\n                        {positionOrders.length === 0 && \"None\"}\n                        {positionOrders.map((order) => {\n                          const orderText = () => (\n                            <>\n                              {order.triggerAboveThreshold ? \">\" : \"<\"} {formatAmount(order.triggerPrice, 30, 2, true)}:\n                              {order.type === INCREASE ? \" +\" : \" -\"}${formatAmount(order.sizeDelta, 30, 2, true)}\n                            </>\n                          );\n                          if (order.error) {\n                            return (\n                              <div key={`${order.isLong}-${order.type}-${order.index}`} className=\"Position-list-order\">\n                                <Tooltip\n                                  className=\"order-error\"\n                                  handle={orderText()}\n                                  position=\"right-bottom\"\n                                  handleClassName=\"plain\"\n                                  renderContent={() => <span className=\"negative\">{order.error}</span>}\n                                />\n                              </div>\n                            );\n                          } else {\n                            return (\n                              <div key={`${order.isLong}-${order.type}-${order.index}`} className=\"Position-list-order\">\n                                {orderText()}\n                              </div>\n                            );\n                          }\n                        })}\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"App-card-divider\" />\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Entry Price</Trans>\n                      </div>\n                      <div>${formatAmount(position.averagePrice, USD_DECIMALS, 2, true)}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Mark Price</Trans>\n                      </div>\n                      <div>${formatAmount(position.markPrice, USD_DECIMALS, 2, true)}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Liq. Price</Trans>\n                      </div>\n                      <div>${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}</div>\n                    </div>\n                  </div>\n                  {!hideActions && (\n                    <>\n                      <div className=\"App-card-divider\"></div>\n                      <div className=\"App-card-options\">\n                        <button\n                          className=\"App-button-option App-card-option\"\n                          disabled={position.size.eq(0)}\n                          onClick={() => sellPosition(position)}\n                        >\n                          <Trans>Close</Trans>\n                        </button>\n                        <button\n                          className=\"App-button-option App-card-option\"\n                          disabled={position.size.eq(0)}\n                          onClick={() => editPosition(position)}\n                        >\n                          <Trans>Edit Collateral</Trans>\n                        </button>\n                        <button\n                          className=\"Exchange-list-action App-button-option App-card-option\"\n                          onClick={() => {\n                            setPositionToShare(position);\n                            setIsPositionShareModalOpen(true);\n                          }}\n                          disabled={position.size.eq(0)}\n                        >\n                          <Trans>Share</Trans>\n                        </button>\n                      </div>\n                    </>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      )}\n      <table className=\"Exchange-list large App-box\">\n        <tbody>\n          <tr className=\"Exchange-list-header\">\n            <th>\n              <Trans>Position</Trans>\n            </th>\n            <th>\n              <Trans>Net Value</Trans>\n            </th>\n            <th>\n              <Trans>Size</Trans>\n            </th>\n            <th>\n              <Trans>Collateral</Trans>\n            </th>\n            <th>\n              <Trans>Entry Price</Trans>\n            </th>\n            <th>\n              <Trans>Mark Price</Trans>\n            </th>\n            <th>\n              <Trans>Liq. Price</Trans>\n            </th>\n            {!hideActions && (\n              <>\n                <th></th>\n                <th></th>\n              </>\n            )}\n          </tr>\n          {positions.length === 0 && positionsDataIsLoading && (\n            <tr>\n              <td colSpan=\"15\">\n                <div className=\"Exchange-empty-positions-list-note\">Loading...</div>\n              </td>\n            </tr>\n          )}\n          {positions.length === 0 && !positionsDataIsLoading && (\n            <tr>\n              <td colSpan=\"15\">\n                <div className=\"Exchange-empty-positions-list-note\">\n                  <Trans>No open positions</Trans>\n                </div>\n              </td>\n            </tr>\n          )}\n          {positions.map((position) => {\n            const liquidationPrice = getLiquidationPrice(position) || bigNumberify(0);\n            const positionOrders = getOrdersForPosition(account, position, orders, nativeTokenAddress);\n            const hasOrderError = !!positionOrders.find((order) => order.error);\n            const hasPositionProfit = position[showPnlAfterFees ? \"hasProfitAfterFees\" : \"hasProfit\"];\n            const positionDelta =\n              position[showPnlAfterFees ? \"pendingDeltaAfterFees\" : \"pendingDelta\"] || bigNumberify(0);\n            let borrowFeeUSD;\n            if (position.collateralToken && position.collateralToken.fundingRate) {\n              const borrowFeeRate = position.collateralToken.fundingRate\n                .mul(position.size)\n                .mul(24)\n                .div(FUNDING_RATE_PRECISION);\n              borrowFeeUSD = formatAmount(borrowFeeRate, USD_DECIMALS, 2, true);\n            }\n\n            return (\n              <tr key={position.key}>\n                <td className=\"clickable\" onClick={() => onPositionClick(position)}>\n                  <div className=\"Exchange-list-title\">\n                    {!hideActions ? (\n                      <Tooltip\n                        handle={position.indexToken.symbol}\n                        position=\"left-bottom\"\n                        handleClassName=\"plain clickable\"\n                        renderContent={() => {\n                          return (\n                            <div>\n                              <Trans>\n                                Click on a row to select the position's market, then use the trade box to increase your\n                                position size if needed.\n                              </Trans>\n                              <br />\n                              <br />\n                              <Trans>\n                                Use the \"Close\" button to reduce your position size, or to set stop-loss / take-profit\n                                orders.\n                              </Trans>\n                            </div>\n                          );\n                        }}\n                      />\n                    ) : (\n                      position.indexToken.symbol\n                    )}\n                    {position.hasPendingChanges && <ImSpinner2 className=\"spin position-loading-icon\" />}\n                  </div>\n                  <div className=\"Exchange-list-info-label\">\n                    {position.leverageStr && <span className=\"muted Position-leverage\">{position.leverageStr}</span>}\n                    <span className={cx({ positive: position.isLong, negative: !position.isLong })}>\n                      {position.isLong ? t`Long` : t`Short`}\n                    </span>\n                  </div>\n                </td>\n                <td>\n                  <div>{position.netValue ? <NetValueTooltip position={position} /> : t`Opening...`}</div>\n\n                  {position.deltaStr && (\n                    <div\n                      className={cx(\"Exchange-list-info-label\", {\n                        positive: hasPositionProfit && positionDelta.gt(0),\n                        negative: !hasPositionProfit && positionDelta.gt(0),\n                        muted: positionDelta.eq(0),\n                      })}\n                    >\n                      {position.deltaStr} ({position.deltaPercentageStr})\n                    </div>\n                  )}\n                </td>\n                <td>\n                  <div>${formatAmount(position.size, USD_DECIMALS, 2, true)}</div>\n                  {positionOrders.length > 0 && (\n                    <div onClick={() => setListSection && setListSection(\"Orders\")}>\n                      <Tooltip\n                        handle={t`Orders (${positionOrders.length})`}\n                        position=\"left-bottom\"\n                        handleClassName={cx(\n                          [\"Exchange-list-info-label\", \"Exchange-position-list-orders\", \"plain\", \"clickable\"],\n                          { muted: !hasOrderError, negative: hasOrderError }\n                        )}\n                        renderContent={() => {\n                          return (\n                            <>\n                              <strong>\n                                <Trans>Active Orders</Trans>\n                              </strong>\n                              {positionOrders.map((order) => {\n                                return (\n                                  <div\n                                    key={`${order.isLong}-${order.type}-${order.index}`}\n                                    className=\"Position-list-order active-order-tooltip\"\n                                  >\n                                    {order.triggerAboveThreshold ? \">\" : \"<\"}{\" \"}\n                                    {formatAmount(order.triggerPrice, 30, 2, true)}:\n                                    {order.type === INCREASE ? \" +\" : \" -\"}${formatAmount(order.sizeDelta, 30, 2, true)}\n                                    {order.error && <div className=\"negative active-oredr-error\">{order.error}</div>}\n                                  </div>\n                                );\n                              })}\n                            </>\n                          );\n                        }}\n                      />\n                    </div>\n                  )}\n                </td>\n                <td>\n                  <div className=\"position-list-collateral\">\n                    <Tooltip\n                      handle={`$${formatAmount(position.collateralAfterFee, USD_DECIMALS, 2, true)}`}\n                      position=\"left-bottom\"\n                      handleClassName={cx(\"plain\", { negative: position.hasLowCollateral })}\n                      renderContent={() => {\n                        return (\n                          <>\n                            {position.hasLowCollateral && (\n                              <div>\n                                <Trans>\n                                  WARNING: This position has a low amount of collateral after deducting borrowing fees,\n                                  deposit more collateral to reduce the position's liquidation risk.\n                                </Trans>\n                                <br />\n                                <br />\n                              </div>\n                            )}\n\n                            <StatsTooltipRow\n                              label={t`Initial Collateral`}\n                              value={formatAmount(position.collateral, USD_DECIMALS, 2, true)}\n                            />\n                            <StatsTooltipRow\n                              label={t`Borrow Fee`}\n                              showDollar={false}\n                              value={`-$${formatAmount(position.fundingFee, USD_DECIMALS, 2, true)}`}\n                            />\n                            <StatsTooltipRow\n                              showDollar={false}\n                              label={t`Borrow Fee / Day`}\n                              value={`-$${borrowFeeUSD}`}\n                            />\n                            {!hideActions && (\n                              <>\n                                <br />\n                                <Trans>Use the Edit Collateral icon to deposit or withdraw collateral.</Trans>\n                              </>\n                            )}\n                          </>\n                        );\n                      }}\n                    />\n                    {!hideActions && (\n                      <span className=\"edit-icon\" onClick={() => editPosition(position)}>\n                        <AiOutlineEdit fontSize={16} />\n                      </span>\n                    )}\n                  </div>\n                </td>\n                <td className=\"clickable\" onClick={() => onPositionClick(position)}>\n                  ${formatAmount(position.averagePrice, USD_DECIMALS, 2, true)}\n                </td>\n                <td className=\"clickable\" onClick={() => onPositionClick(position)}>\n                  ${formatAmount(position.markPrice, USD_DECIMALS, 2, true)}\n                </td>\n                <td className=\"clickable\" onClick={() => onPositionClick(position)}>\n                  ${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}\n                </td>\n\n                <td>\n                  <button\n                    className=\"Exchange-list-action\"\n                    onClick={() => sellPosition(position)}\n                    disabled={position.size.eq(0)}\n                  >\n                    <Trans>Close</Trans>\n                  </button>\n                </td>\n                {!hideActions && (\n                  <td>\n                    <PositionDropdown\n                      handleEditCollateral={() => {\n                        editPosition(position);\n                      }}\n                      handleShare={() => {\n                        setPositionToShare(position);\n                        setIsPositionShareModalOpen(true);\n                      }}\n                      handleMarketSelect={() => {\n                        onPositionClick(position);\n                      }}\n                    />\n                  </td>\n                )}\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n","import React, { useState, useMemo } from \"react\";\nimport { BsArrowRight } from \"react-icons/bs\";\n\nimport {\n  PRECISION,\n  USD_DECIMALS,\n  SWAP,\n  DECREASE,\n  INCREASE,\n  isTriggerRatioInverted,\n  getNextToAmount,\n  getExchangeRate,\n  getExchangeRateDisplay,\n  calculatePositionDelta,\n  getLiquidationPrice,\n} from \"lib/legacy\";\nimport { updateSwapOrder, updateIncreaseOrder, updateDecreaseOrder } from \"domain/legacy\";\nimport Modal from \"../Modal/Modal\";\nimport ExchangeInfoRow from \"./ExchangeInfoRow\";\nimport { getContract } from \"config/contracts\";\nimport { TRIGGER_PREFIX_ABOVE, TRIGGER_PREFIX_BELOW } from \"config/ui\";\nimport { getTokenInfo } from \"domain/tokens/utils\";\nimport { bigNumberify, formatAmount, formatAmountFree, parseValue } from \"lib/numbers\";\nimport { useChainId } from \"lib/chains\";\nimport { t, Trans } from \"@lingui/macro\";\nimport Button from \"components/Button/Button\";\n\nexport default function OrderEditor(props) {\n  const {\n    account,\n    order,\n    setEditingOrder,\n    infoTokens,\n    pendingTxns,\n    setPendingTxns,\n    library,\n    totalTokenWeights,\n    usdgSupply,\n    getPositionForOrder,\n    positionsMap,\n    savedShouldDisableValidationForTesting,\n  } = props;\n\n  const { chainId } = useChainId();\n\n  const position = order.type !== SWAP ? getPositionForOrder(account, order, positionsMap) : null;\n  const liquidationPrice = order.type === DECREASE && position ? getLiquidationPrice(position) : null;\n\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n  const fromTokenInfo = order.type === SWAP ? getTokenInfo(infoTokens, order.path[0], true, nativeTokenAddress) : null;\n  const toTokenInfo =\n    order.type === SWAP\n      ? getTokenInfo(infoTokens, order.path[order.path.length - 1], order.shouldUnwrap, nativeTokenAddress)\n      : null;\n\n  const triggerRatioInverted = useMemo(() => {\n    if (order.type !== SWAP) {\n      return null;\n    }\n\n    return isTriggerRatioInverted(fromTokenInfo, toTokenInfo);\n  }, [toTokenInfo, fromTokenInfo, order.type]);\n\n  let initialRatio = 0;\n  if (order.triggerRatio) {\n    initialRatio = triggerRatioInverted ? PRECISION.mul(PRECISION).div(order.triggerRatio) : order.triggerRatio;\n  }\n  const [triggerRatioValue, setTriggerRatioValue] = useState(formatAmountFree(initialRatio, USD_DECIMALS, 6));\n\n  const [triggerPriceValue, setTriggerPriceValue] = useState(formatAmountFree(order.triggerPrice, USD_DECIMALS, 4));\n  const triggerPrice = useMemo(() => {\n    return triggerPriceValue ? parseValue(triggerPriceValue, USD_DECIMALS) : 0;\n  }, [triggerPriceValue]);\n\n  const triggerRatio = useMemo(() => {\n    if (!triggerRatioValue) {\n      return bigNumberify(0);\n    }\n    let ratio = parseValue(triggerRatioValue, USD_DECIMALS);\n    if (triggerRatioInverted) {\n      ratio = PRECISION.mul(PRECISION).div(ratio);\n    }\n    return ratio;\n  }, [triggerRatioValue, triggerRatioInverted]);\n\n  const indexTokenMarkPrice = useMemo(() => {\n    if (order.type === SWAP) {\n      return;\n    }\n    const toTokenInfo = getTokenInfo(infoTokens, order.indexToken);\n    return order.isLong ? toTokenInfo.maxPrice : toTokenInfo.minPrice;\n  }, [infoTokens, order]);\n\n  let toAmount;\n  if (order.type === SWAP) {\n    const { amount } = getNextToAmount(\n      chainId,\n      order.amountIn,\n      order.path[0],\n      order.path[order.path.length - 1],\n      infoTokens,\n      undefined,\n      triggerRatio,\n      usdgSupply,\n      totalTokenWeights\n    );\n    toAmount = amount;\n  }\n\n  const onClickPrimary = () => {\n    setIsSubmitting(true);\n\n    let func;\n    let params;\n\n    if (order.type === SWAP) {\n      func = updateSwapOrder;\n      params = [chainId, library, order.index, toAmount, triggerRatio, order.triggerAboveThreshold];\n    } else if (order.type === DECREASE) {\n      func = updateDecreaseOrder;\n      params = [\n        chainId,\n        library,\n        order.index,\n        order.collateralDelta,\n        order.sizeDelta,\n        triggerPrice,\n        order.triggerAboveThreshold,\n      ];\n    } else if (order.type === INCREASE) {\n      func = updateIncreaseOrder;\n      params = [chainId, library, order.index, order.sizeDelta, triggerPrice, order.triggerAboveThreshold];\n    }\n\n    params.push({\n      successMsg: t`Order updated!`,\n      failMsg: t`Order update failed.`,\n      sentMsg: t`Order update submitted!`,\n      pendingTxns,\n      setPendingTxns,\n    });\n\n    return func(...params)\n      .then(() => {\n        setEditingOrder(null);\n      })\n      .finally(() => {\n        setIsSubmitting(false);\n      });\n  };\n\n  const onTriggerRatioChange = (evt) => {\n    setTriggerRatioValue(evt.target.value || \"\");\n  };\n\n  const onTriggerPriceChange = (evt) => {\n    setTriggerPriceValue(evt.target.value || \"\");\n  };\n\n  const getError = () => {\n    if ((!triggerRatio || triggerRatio.eq(0)) && (!triggerPrice || triggerPrice.eq(0))) {\n      return t`Enter Price`;\n    }\n    if (order.type === SWAP && triggerRatio.eq(order.triggerRatio)) {\n      return t`Enter new Price`;\n    }\n    if (order.type !== SWAP && triggerPrice.eq(order.triggerPrice)) {\n      return t`Enter new Price`;\n    }\n    if (position) {\n      if (order.type === DECREASE) {\n        if (position.isLong && triggerPrice.lte(liquidationPrice)) {\n          return t`Price below Liq. Price`;\n        }\n        if (!position.isLong && triggerPrice.gte(liquidationPrice)) {\n          return t`Price above Liq. Price`;\n        }\n      }\n\n      const { delta, hasProfit } = calculatePositionDelta(triggerPrice, position);\n      if (hasProfit && delta.eq(0)) {\n        return t`Invalid price, see warning`;\n      }\n    }\n\n    if (order.type !== SWAP && indexTokenMarkPrice && !savedShouldDisableValidationForTesting) {\n      if (order.triggerAboveThreshold && indexTokenMarkPrice.gt(triggerPrice)) {\n        return t`Price below Mark Price`;\n      }\n      if (!order.triggerAboveThreshold && indexTokenMarkPrice.lt(triggerPrice)) {\n        return t`Price above Mark Price`;\n      }\n    }\n\n    if (order.type === SWAP) {\n      const currentRate = getExchangeRate(fromTokenInfo, toTokenInfo);\n      if (currentRate && !currentRate.gte(triggerRatio)) {\n        return triggerRatioInverted ? t`Price is below Mark Price` : t`Price is above Mark Price`;\n      }\n    }\n  };\n\n  const isPrimaryEnabled = () => {\n    if (isSubmitting) {\n      return false;\n    }\n    const error = getError();\n    if (error) {\n      return false;\n    }\n\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    const error = getError();\n    if (error) {\n      return error;\n    }\n\n    if (isSubmitting) {\n      return t`Updating Order...`;\n    }\n    return t`Update Order`;\n  };\n\n  if (order.type !== SWAP) {\n    const triggerPricePrefix = order.triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\n    return (\n      <Modal\n        isVisible={true}\n        className=\"Exchange-list-modal\"\n        setIsVisible={() => setEditingOrder(null)}\n        label={t`Edit order`}\n      >\n        <div className=\"Exchange-swap-section\">\n          <div className=\"Exchange-swap-section-top\">\n            <div className=\"muted\">\n              <Trans>Price</Trans>\n            </div>\n            <div\n              className=\"muted align-right clickable\"\n              onClick={() => {\n                setTriggerPriceValue(formatAmountFree(indexTokenMarkPrice, USD_DECIMALS, 2));\n              }}\n            >\n              <Trans>Mark: {formatAmount(indexTokenMarkPrice, USD_DECIMALS, 2)}</Trans>\n            </div>\n          </div>\n          <div className=\"Exchange-swap-section-bottom\">\n            <div className=\"Exchange-swap-input-container\">\n              <input\n                type=\"number\"\n                min=\"0\"\n                placeholder=\"0.0\"\n                className=\"Exchange-swap-input\"\n                value={triggerPriceValue}\n                onChange={onTriggerPriceChange}\n              />\n            </div>\n            <div className=\"PositionEditor-token-symbol\">USD</div>\n          </div>\n        </div>\n        <ExchangeInfoRow label={t`Price`}>\n          {triggerPrice && !triggerPrice.eq(order.triggerPrice) ? (\n            <>\n              <span className=\"muted\">\n                {triggerPricePrefix} {formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)}\n              </span>\n              &nbsp;\n              <BsArrowRight />\n              &nbsp;\n              {triggerPricePrefix} {formatAmount(triggerPrice, USD_DECIMALS, 2, true)}\n            </>\n          ) : (\n            <span>\n              {triggerPricePrefix} {formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)}\n            </span>\n          )}\n        </ExchangeInfoRow>\n        {liquidationPrice && (\n          <div className=\"Exchange-info-row\">\n            <div className=\"Exchange-info-label\">\n              <Trans>Liq. Price</Trans>\n            </div>\n            <div className=\"align-right\">{`$${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}`}</div>\n          </div>\n        )}\n        <div className=\"Exchange-swap-button-container\">\n          <Button variant=\"primary-action\" className=\"w-100\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n            {getPrimaryText()}\n          </Button>\n        </div>\n      </Modal>\n    );\n  }\n\n  return (\n    <Modal\n      isVisible={true}\n      className=\"Exchange-list-modal\"\n      setIsVisible={() => setEditingOrder(null)}\n      label={t`Edit order`}\n    >\n      <div className=\"Exchange-swap-section\">\n        <div className=\"Exchange-swap-section-top\">\n          <div className=\"muted\">\n            <Trans>Price</Trans>\n          </div>\n          {fromTokenInfo && toTokenInfo && (\n            <div\n              className=\"muted align-right clickable\"\n              onClick={() => {\n                setTriggerRatioValue(\n                  formatAmountFree(getExchangeRate(fromTokenInfo, toTokenInfo, triggerRatioInverted), USD_DECIMALS, 10)\n                );\n              }}\n            >\n              <Trans>Mark Price: </Trans>\n              {formatAmount(getExchangeRate(fromTokenInfo, toTokenInfo, triggerRatioInverted), USD_DECIMALS, 2)}\n            </div>\n          )}\n        </div>\n        <div className=\"Exchange-swap-section-bottom\">\n          <div className=\"Exchange-swap-input-container\">\n            <input\n              type=\"number\"\n              min=\"0\"\n              placeholder=\"0.0\"\n              className=\"Exchange-swap-input\"\n              value={triggerRatioValue}\n              onChange={onTriggerRatioChange}\n            />\n          </div>\n          {(() => {\n            if (!toTokenInfo) return;\n            if (!fromTokenInfo) return;\n            const [tokenA, tokenB] = triggerRatioInverted ? [toTokenInfo, fromTokenInfo] : [fromTokenInfo, toTokenInfo];\n            return (\n              <div className=\"PositionEditor-token-symbol\">\n                {tokenA.symbol}&nbsp;/&nbsp;{tokenB.symbol}\n              </div>\n            );\n          })()}\n        </div>\n      </div>\n      <ExchangeInfoRow label={t`Minimum received`}>\n        {triggerRatio && !triggerRatio.eq(order.triggerRatio) ? (\n          <>\n            <span className=\"muted\">{formatAmount(order.minOut, toTokenInfo.decimals, 4, true)}</span>\n            &nbsp;\n            <BsArrowRight />\n            &nbsp;\n            {formatAmount(toAmount, toTokenInfo.decimals, 4, true)}\n          </>\n        ) : (\n          formatAmount(order.minOut, toTokenInfo.decimals, 4, true)\n        )}\n        &nbsp;{toTokenInfo.symbol}\n      </ExchangeInfoRow>\n      <ExchangeInfoRow label={t`Price`}>\n        {triggerRatio && !triggerRatio.eq(0) && !triggerRatio.eq(order.triggerRatio) ? (\n          <>\n            <span className=\"muted\">\n              {getExchangeRateDisplay(order.triggerRatio, fromTokenInfo, toTokenInfo, {\n                omitSymbols: !triggerRatio || !triggerRatio.eq(order.triggerRatio),\n              })}\n            </span>\n            &nbsp;\n            <BsArrowRight />\n            &nbsp;\n            {getExchangeRateDisplay(triggerRatio, fromTokenInfo, toTokenInfo)}\n          </>\n        ) : (\n          getExchangeRateDisplay(order.triggerRatio, fromTokenInfo, toTokenInfo, {\n            omitSymbols: !triggerRatio || !triggerRatio.eq(order.triggerRatio),\n          })\n        )}\n      </ExchangeInfoRow>\n      {fromTokenInfo && (\n        <div className=\"Exchange-info-row\">\n          <div className=\"Exchange-info-label\">\n            <Trans>{fromTokenInfo.symbol} price</Trans>\n          </div>\n          <div className=\"align-right\">{formatAmount(fromTokenInfo.minPrice, USD_DECIMALS, 2, true)} USD</div>\n        </div>\n      )}\n      {toTokenInfo && (\n        <div className=\"Exchange-info-row\">\n          <div className=\"Exchange-info-label\">\n            <Trans>{toTokenInfo.symbol} price</Trans>\n          </div>\n          <div className=\"align-right\">{formatAmount(toTokenInfo.maxPrice, USD_DECIMALS, 2, true)} USD</div>\n        </div>\n      )}\n      <div className=\"Exchange-swap-button-container\">\n        <Button variant=\"primary-action\" className=\"w-100\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n          {getPrimaryText()}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n","import React, { useState, useCallback } from \"react\";\nimport { t, Trans } from \"@lingui/macro\";\n\nimport {\n  SWAP,\n  INCREASE,\n  DECREASE,\n  USD_DECIMALS,\n  getOrderError,\n  getExchangeRateDisplay,\n  getExchangeRate,\n  getPositionForOrder,\n} from \"lib/legacy\";\nimport { handleCancelOrder } from \"domain/legacy\";\nimport { getContract } from \"config/contracts\";\n\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport OrderEditor from \"./OrderEditor\";\n\nimport \"./OrdersList.css\";\nimport Checkbox from \"../Checkbox/Checkbox\";\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\nimport { TRIGGER_PREFIX_ABOVE, TRIGGER_PREFIX_BELOW } from \"config/ui\";\nimport { getTokenInfo, getUsd } from \"domain/tokens/utils\";\nimport { formatAmount } from \"lib/numbers\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nfunction getOrderTitle(order, indexTokenSymbol) {\n  const orderTypeText = order.type === INCREASE ? t`Increase` : t`Decrease`;\n  const longShortText = order.isLong ? t`Long` : t`Short`;\n  const sizeDeltaText = formatAmount(order.sizeDelta, USD_DECIMALS, 2, true);\n\n  return `${orderTypeText} ${indexTokenSymbol} ${longShortText} by $${sizeDeltaText}`;\n}\n\nexport default function OrdersList(props) {\n  const {\n    account,\n    library,\n    setPendingTxns,\n    pendingTxns,\n    infoTokens,\n    positionsMap,\n    totalTokenWeights,\n    usdgSupply,\n    orders,\n    hideActions,\n    chainId,\n    savedShouldDisableValidationForTesting,\n    cancelOrderIdList,\n    setCancelOrderIdList,\n  } = props;\n\n  const [editingOrder, setEditingOrder] = useState(null);\n\n  const onCancelClick = useCallback(\n    (order) => {\n      handleCancelOrder(chainId, library, order, { pendingTxns, setPendingTxns });\n    },\n    [library, pendingTxns, setPendingTxns, chainId]\n  );\n\n  const onEditClick = useCallback(\n    (order) => {\n      setEditingOrder(order);\n    },\n    [setEditingOrder]\n  );\n\n  const renderHead = useCallback(() => {\n    const isAllOrdersSelected = cancelOrderIdList?.length > 0 && cancelOrderIdList?.length === orders.length;\n    return (\n      <tr className=\"Exchange-list-header\">\n        {!hideActions && orders.length > 0 && (\n          <th>\n            <div className=\"checkbox-inline \">\n              <Checkbox\n                isChecked={isAllOrdersSelected}\n                setIsChecked={() => {\n                  if (isAllOrdersSelected) {\n                    setCancelOrderIdList([]);\n                  } else {\n                    const allOrderIds = orders.map((o) => `${o.type}-${o.index}`);\n                    setCancelOrderIdList(allOrderIds);\n                  }\n                }}\n              />\n            </div>\n          </th>\n        )}\n\n        <th>\n          <div>\n            <Trans>Type</Trans>\n          </div>\n        </th>\n        <th>\n          <div>\n            <Trans>Order</Trans>\n          </div>\n        </th>\n        <th>\n          <div>\n            <Trans>Price</Trans>\n          </div>\n        </th>\n        <th>\n          <div>\n            <Trans>Mark Price</Trans>\n          </div>\n        </th>\n      </tr>\n    );\n  }, [cancelOrderIdList, orders, setCancelOrderIdList, hideActions]);\n\n  const renderEmptyRow = useCallback(() => {\n    if (orders && orders.length) {\n      return null;\n    }\n\n    return (\n      <tr>\n        <td colSpan=\"5\">\n          <Trans>No open orders</Trans>\n        </td>\n      </tr>\n    );\n  }, [orders]);\n\n  const renderActions = useCallback(\n    (order) => {\n      return (\n        <>\n          <td>\n            <button className=\"Exchange-list-action\" onClick={() => onEditClick(order)}>\n              <Trans>Edit</Trans>\n            </button>\n          </td>\n          <td>\n            <button className=\"Exchange-list-action\" onClick={() => onCancelClick(order)}>\n              <Trans>Cancel</Trans>\n            </button>\n          </td>\n        </>\n      );\n    },\n    [onEditClick, onCancelClick]\n  );\n\n  const renderLargeList = useCallback(() => {\n    if (!orders || !orders.length) {\n      return null;\n    }\n    return orders.map((order) => {\n      if (order.type === SWAP) {\n        const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n        const fromTokenInfo = getTokenInfo(infoTokens, order.path[0], true, nativeTokenAddress);\n        const toTokenInfo = getTokenInfo(\n          infoTokens,\n          order.path[order.path.length - 1],\n          order.shouldUnwrap,\n          nativeTokenAddress\n        );\n\n        const markExchangeRate = getExchangeRate(fromTokenInfo, toTokenInfo);\n        const orderId = `${order.type}-${order.index}`;\n\n        return (\n          <tr className=\"Exchange-list-item\" key={orderId}>\n            {!hideActions && (\n              <td>\n                <div className=\"checkbox-inline \">\n                  <Checkbox\n                    isChecked={cancelOrderIdList?.includes(orderId)}\n                    setIsChecked={() => {\n                      setCancelOrderIdList((prevState) => {\n                        if (prevState.includes(orderId)) {\n                          return prevState.filter((i) => i !== orderId);\n                        } else {\n                          return prevState.concat(orderId);\n                        }\n                      });\n                    }}\n                  />\n                </div>\n              </td>\n            )}\n            <td className=\"Exchange-list-item-type\">\n              <Trans>Limit</Trans>\n            </td>\n            <td>\n              <Trans>Swap</Trans>{\" \"}\n              {formatAmount(\n                order.amountIn,\n                fromTokenInfo.decimals,\n                fromTokenInfo.isStable || fromTokenInfo.isUsdg ? 2 : 4,\n                true\n              )}{\" \"}\n              {fromTokenInfo.symbol} for{\" \"}\n              {formatAmount(\n                order.minOut,\n                toTokenInfo.decimals,\n                toTokenInfo.isStable || toTokenInfo.isUsdg ? 2 : 4,\n                true\n              )}{\" \"}\n              {toTokenInfo.symbol}\n            </td>\n            <td>\n              {!hideActions ? (\n                <Tooltip\n                  handle={getExchangeRateDisplay(order.triggerRatio, fromTokenInfo, toTokenInfo)}\n                  renderContent={() => t`\n                  You will receive at least ${formatAmount(\n                    order.minOut,\n                    toTokenInfo.decimals,\n                    toTokenInfo.isStable || toTokenInfo.isUsdg ? 2 : 4,\n                    true\n                  )} ${\n                    toTokenInfo.symbol\n                  } if this order is executed. The execution price may vary depending on swap fees at the time the order is executed.\n                `}\n                />\n              ) : (\n                getExchangeRateDisplay(order.triggerRatio, fromTokenInfo, toTokenInfo)\n              )}\n            </td>\n            <td>{getExchangeRateDisplay(markExchangeRate, fromTokenInfo, toTokenInfo, true)}</td>\n            {!hideActions && renderActions(order)}\n          </tr>\n        );\n      }\n\n      const indexToken = getTokenInfo(infoTokens, order.indexToken);\n\n      // Longs Increase: max price\n      // Longs Decrease: min price\n      // Short Increase: min price\n      // Short Decrease: max price\n      const maximisePrice = (order.type === INCREASE && order.isLong) || (order.type === DECREASE && !order.isLong);\n\n      const markPrice = maximisePrice ? indexToken.contractMaxPrice : indexToken.contractMinPrice;\n      const triggerPricePrefix = order.triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\n      const indexTokenSymbol = indexToken.isWrapped ? indexToken.baseSymbol : indexToken.symbol;\n\n      const error = getOrderError(account, order, positionsMap);\n      const orderId = `${order.type}-${order.index}`;\n      const orderTitle = getOrderTitle(order, indexTokenSymbol);\n\n      const orderText = (\n        <>\n          {error ? (\n            <Tooltip\n              className=\"order-error\"\n              handle={orderTitle}\n              position=\"right-bottom\"\n              handleClassName=\"plain\"\n              renderContent={() => <span className=\"negative\">{error}</span>}\n            />\n          ) : (\n            orderTitle\n          )}\n        </>\n      );\n\n      return (\n        <tr className=\"Exchange-list-item\" key={`${order.isLong}-${order.type}-${order.index}`}>\n          {!hideActions && (\n            <td className=\"Exchange-list-item-type\">\n              <div>\n                <Checkbox\n                  isChecked={cancelOrderIdList?.includes(orderId)}\n                  setIsChecked={() => {\n                    setCancelOrderIdList((prevState) => {\n                      if (prevState.includes(orderId)) {\n                        return prevState.filter((i) => i !== orderId);\n                      } else {\n                        return prevState.concat(orderId);\n                      }\n                    });\n                  }}\n                />\n              </div>\n            </td>\n          )}\n          <td className=\"Exchange-list-item-type\">{order.type === INCREASE ? t`Limit` : t`Trigger`}</td>\n          <td>\n            {order.type === DECREASE ? (\n              orderText\n            ) : (\n              <Tooltip\n                handle={orderText}\n                position=\"right-bottom\"\n                renderContent={() => {\n                  const collateralTokenInfo = getTokenInfo(infoTokens, order.purchaseToken);\n                  const collateralUSD = getUsd(order.purchaseTokenAmount, order.purchaseToken, false, infoTokens);\n                  return (\n                    <StatsTooltipRow\n                      label={t`Collateral`}\n                      value={`${formatAmount(collateralUSD, USD_DECIMALS, 2, true)} (${formatAmount(\n                        order.purchaseTokenAmount,\n                        collateralTokenInfo.decimals,\n                        4,\n                        true\n                      )}\n                      ${collateralTokenInfo.baseSymbol || collateralTokenInfo.symbol})`}\n                    />\n                  );\n                }}\n              />\n            )}\n          </td>\n          <td>\n            {triggerPricePrefix} {formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)}\n          </td>\n          <td>\n            <Tooltip\n              handle={formatAmount(markPrice, USD_DECIMALS, 2, true)}\n              position=\"right-bottom\"\n              renderContent={() => {\n                return (\n                  <Trans>\n                    <p>\n                      The price that orders can be executed at may differ slightly from the chart price, as market\n                      orders update oracle prices, while limit/trigger orders do not.\n                    </p>\n                    <p>\n                      This can also cause limit/triggers to not be executed if the price is not reached for long enough.{\" \"}\n                      <ExternalLink href=\"https://gmxio.gitbook.io/gmx/trading#stop-loss-take-profit-orders\">\n                        Read more\n                      </ExternalLink>\n                      .\n                    </p>\n                  </Trans>\n                );\n              }}\n            />\n          </td>\n          {!hideActions && renderActions(order)}\n        </tr>\n      );\n    });\n  }, [\n    orders,\n    renderActions,\n    infoTokens,\n    positionsMap,\n    hideActions,\n    chainId,\n    account,\n    cancelOrderIdList,\n    setCancelOrderIdList,\n  ]);\n\n  const renderSmallList = useCallback(() => {\n    if (!orders || !orders.length) {\n      return null;\n    }\n\n    return orders.map((order) => {\n      if (order.type === SWAP) {\n        const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n        const fromTokenInfo = getTokenInfo(infoTokens, order.path[0], true, nativeTokenAddress);\n        const toTokenInfo = getTokenInfo(\n          infoTokens,\n          order.path[order.path.length - 1],\n          order.shouldUnwrap,\n          nativeTokenAddress\n        );\n        const markExchangeRate = getExchangeRate(fromTokenInfo, toTokenInfo);\n\n        return (\n          <div key={`${order.type}-${order.index}`} className=\"App-card\">\n            <div className=\"App-card-title-small\">\n              Swap {formatAmount(order.amountIn, fromTokenInfo.decimals, fromTokenInfo.isStable ? 2 : 4, true)}{\" \"}\n              {fromTokenInfo.symbol} for{\" \"}\n              {formatAmount(order.minOut, toTokenInfo.decimals, toTokenInfo.isStable ? 2 : 4, true)}{\" \"}\n              {toTokenInfo.symbol}\n            </div>\n            <div className=\"App-card-divider\"></div>\n            <div className=\"App-card-content\">\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Price</Trans>\n                </div>\n                <div>\n                  <Tooltip\n                    position=\"right-bottom\"\n                    handle={getExchangeRateDisplay(order.triggerRatio, fromTokenInfo, toTokenInfo)}\n                    renderContent={() => t`\n                    You will receive at least ${formatAmount(\n                      order.minOut,\n                      toTokenInfo.decimals,\n                      toTokenInfo.isStable || toTokenInfo.isUsdg ? 2 : 4,\n                      true\n                    )} ${\n                      toTokenInfo.symbol\n                    } if this order is executed. The exact execution price may vary depending on fees at the time the order is executed.\n                  `}\n                  />\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Mark Price</Trans>\n                </div>\n                <div>{getExchangeRateDisplay(markExchangeRate, fromTokenInfo, toTokenInfo)}</div>\n              </div>\n              {!hideActions && (\n                <>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-options\">\n                    <button className=\"App-button-option App-card-option\" onClick={() => onEditClick(order)}>\n                      <Trans>Edit</Trans>\n                    </button>\n                    <button className=\"App-button-option App-card-option\" onClick={() => onCancelClick(order)}>\n                      <Trans>Cancel</Trans>\n                    </button>\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n        );\n      }\n\n      const indexToken = getTokenInfo(infoTokens, order.indexToken);\n      const maximisePrice = (order.type === INCREASE && order.isLong) || (order.type === DECREASE && !order.isLong);\n      const markPrice = maximisePrice ? indexToken.contractMaxPrice : indexToken.contractMinPrice;\n      const triggerPricePrefix = order.triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\n      const indexTokenSymbol = indexToken.isWrapped ? indexToken.baseSymbol : indexToken.symbol;\n\n      const collateralTokenInfo = getTokenInfo(infoTokens, order.purchaseToken);\n      const collateralUSD = getUsd(order.purchaseTokenAmount, order.purchaseToken, true, infoTokens);\n\n      const error = getOrderError(account, order, positionsMap);\n      const orderTitle = getOrderTitle(order, indexTokenSymbol);\n\n      return (\n        <div key={`${order.isLong}-${order.type}-${order.index}`} className=\"App-card\">\n          <div className=\"App-card-title-small\">\n            {error ? (\n              <Tooltip\n                className=\"order-error\"\n                handle={orderTitle}\n                position=\"left-bottom\"\n                handleClassName=\"plain\"\n                renderContent={() => <span className=\"negative\">{error}</span>}\n              />\n            ) : (\n              orderTitle\n            )}\n          </div>\n          <div className=\"App-card-divider\"></div>\n          <div className=\"App-card-content\">\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Price</Trans>\n              </div>\n              <div>\n                {triggerPricePrefix} {formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)}\n              </div>\n            </div>\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Mark Price</Trans>\n              </div>\n              <div>\n                <Tooltip\n                  handle={formatAmount(markPrice, USD_DECIMALS, 2, true)}\n                  position=\"right-bottom\"\n                  renderContent={() => {\n                    return (\n                      <Trans>\n                        The price that the order can be executed at may differ slightly from the chart price as market\n                        orders can change the price while limit / trigger orders cannot.\n                      </Trans>\n                    );\n                  }}\n                />\n              </div>\n            </div>\n            {order.type === INCREASE && (\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Collateral</Trans>\n                </div>\n                <div>\n                  ${formatAmount(collateralUSD, USD_DECIMALS, 2, true)} (\n                  {formatAmount(order.purchaseTokenAmount, collateralTokenInfo.decimals, 4, true)}{\" \"}\n                  {collateralTokenInfo.baseSymbol || collateralTokenInfo.symbol})\n                </div>\n              </div>\n            )}\n            {!hideActions && (\n              <>\n                <div className=\"App-card-divider\"></div>\n                <div className=\"App-card-options\">\n                  <button className=\"App-button-option App-card-option\" onClick={() => onEditClick(order)}>\n                    <Trans>Edit</Trans>\n                  </button>\n                  <button className=\"App-button-option App-card-option\" onClick={() => onCancelClick(order)}>\n                    <Trans>Cancel</Trans>\n                  </button>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      );\n    });\n  }, [orders, onEditClick, onCancelClick, infoTokens, positionsMap, hideActions, chainId, account]);\n\n  return (\n    <React.Fragment>\n      <table className=\"Exchange-list Orders App-box large\">\n        <tbody>\n          {renderHead()}\n          {renderEmptyRow()}\n          {renderLargeList()}\n        </tbody>\n      </table>\n      <div className=\"Exchange-list Orders small\">\n        {(!orders || orders.length === 0) && (\n          <div className=\"Exchange-empty-positions-list-note App-card\">\n            <Trans>No open orders</Trans>\n          </div>\n        )}\n        {renderSmallList()}\n      </div>\n      {editingOrder && (\n        <OrderEditor\n          account={account}\n          order={editingOrder}\n          setEditingOrder={setEditingOrder}\n          infoTokens={infoTokens}\n          pendingTxns={pendingTxns}\n          setPendingTxns={setPendingTxns}\n          getPositionForOrder={getPositionForOrder}\n          positionsMap={positionsMap}\n          library={library}\n          totalTokenWeights={totalTokenWeights}\n          usdgSupply={usdgSupply}\n          savedShouldDisableValidationForTesting={savedShouldDisableValidationForTesting}\n        />\n      )}\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect, useCallback, useMemo } from \"react\";\nimport { ethers } from \"ethers\";\nimport { Link } from \"react-router-dom\";\nimport Tooltip from \"components/Tooltip/Tooltip\";\n\nimport {\n  USD_DECIMALS,\n  MAX_LEVERAGE,\n  BASIS_POINTS_DIVISOR,\n  LIQUIDATION_FEE,\n  TRADES_PAGE_SIZE,\n  deserialize,\n  getExchangeRateDisplay,\n  INCREASE,\n} from \"lib/legacy\";\nimport { useTrades, useLiquidationsData } from \"domain/legacy\";\nimport { getContract } from \"config/contracts\";\n\nimport \"./TradeHistory.css\";\nimport { getExplorerUrl } from \"config/chains\";\nimport { bigNumberify, formatAmount } from \"lib/numbers\";\nimport { formatDateTime } from \"lib/dates\";\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\nimport { t, Trans } from \"@lingui/macro\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport Button from \"components/Button/Button\";\n\nconst { AddressZero } = ethers.constants;\n\nfunction getPositionDisplay(increase, indexToken, isLong, sizeDelta) {\n  const symbol = indexToken ? (indexToken.isWrapped ? indexToken.baseSymbol : indexToken.symbol) : \"\";\n  return `\n    ${increase ? t`Increase` : t`Decrease`} ${symbol} ${isLong ? t`Long` : t`Short`}\n    ${increase ? \"+\" : \"-\"}${formatAmount(sizeDelta, USD_DECIMALS, 2, true)} USD`;\n}\n\nfunction getOrderActionTitle(action) {\n  let actionDisplay;\n\n  if (action.startsWith(\"Create\")) {\n    actionDisplay = t`Create`;\n  } else if (action.startsWith(\"Cancel\")) {\n    actionDisplay = t`Cancel`;\n  } else {\n    actionDisplay = t`Update`;\n  }\n\n  return t`${actionDisplay} Order`;\n}\n\nfunction renderLiquidationTooltip(liquidationData, label) {\n  const minCollateral = liquidationData.size.mul(BASIS_POINTS_DIVISOR).div(MAX_LEVERAGE);\n  const text =\n    liquidationData.type === \"full\"\n      ? t`This position was liquidated as the max leverage of 100x was exceeded.`\n      : t`Max leverage of 100x was exceeded, the remaining collateral after deducting losses and fees have been sent back to your account:`;\n  return (\n    <Tooltip\n      position=\"left-top\"\n      handle={label}\n      renderContent={() => (\n        <>\n          {text}\n          <br />\n          <br />\n          <StatsTooltipRow\n            label={t`Initial collateral`}\n            showDollar\n            value={formatAmount(liquidationData.collateral, USD_DECIMALS, 2, true)}\n          />\n          <StatsTooltipRow\n            label={t`Min required collateral`}\n            showDollar\n            value={formatAmount(minCollateral, USD_DECIMALS, 2, true)}\n          />\n          <StatsTooltipRow\n            label={t`Borrow Fee`}\n            showDollar\n            value={formatAmount(liquidationData.borrowFee, USD_DECIMALS, 2, true)}\n          />\n          <StatsTooltipRow\n            label={t`PnL`}\n            showDollar={false}\n            value={`-$${formatAmount(liquidationData.loss, USD_DECIMALS, 2, true)}`}\n          />\n          {liquidationData.type === \"full\" && (\n            <StatsTooltipRow label={t`Liquidation Fee`} showDollar value={formatAmount(LIQUIDATION_FEE, 30, 2, true)} />\n          )}\n        </>\n      )}\n    />\n  );\n}\n\nfunction getLiquidationData(liquidationsDataMap, key, timestamp) {\n  return liquidationsDataMap && liquidationsDataMap[`${key}:${timestamp}`];\n}\n\nexport default function TradeHistory(props) {\n  const { account, infoTokens, getTokenInfo, chainId, nativeTokenAddress, shouldShowPaginationButtons } = props;\n  const [pageIds, setPageIds] = useState({});\n  const [pageIndex, setPageIndex] = useState(0);\n\n  const getAfterId = () => {\n    return pageIds[pageIndex];\n  };\n\n  const { trades, updateTrades } = useTrades(chainId, account, props.forSingleAccount, getAfterId());\n\n  const liquidationsData = useLiquidationsData(chainId, account);\n  const liquidationsDataMap = useMemo(() => {\n    if (!liquidationsData) {\n      return null;\n    }\n    return liquidationsData.reduce((memo, item) => {\n      const liquidationKey = `${item.key}:${item.timestamp}`;\n      memo[liquidationKey] = item;\n      return memo;\n    }, {});\n  }, [liquidationsData]);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      updateTrades(undefined, true);\n    }, 10 * 1000);\n    return () => clearInterval(interval);\n  }, [updateTrades]);\n\n  const loadNextPage = () => {\n    if (!trades || trades.length === 0) {\n      return;\n    }\n\n    const lastTrade = trades[trades.length - 1];\n    pageIds[pageIndex + 1] = lastTrade.id;\n    setPageIds(pageIds);\n    setPageIndex(pageIndex + 1);\n  };\n\n  const loadPrevPage = () => {\n    setPageIndex(pageIndex - 1);\n  };\n\n  const getMsg = useCallback(\n    (trade) => {\n      const tradeData = trade.data;\n      const params = JSON.parse(tradeData.params);\n      const longOrShortText = params?.isLong ? t`Long` : t`Short`;\n      const defaultMsg = \"\";\n\n      if (tradeData.action === \"BuyUSDG\") {\n        const token = getTokenInfo(infoTokens, params.token, true, nativeTokenAddress);\n        if (!token) {\n          return defaultMsg;\n        }\n        return t`Swap ${formatAmount(params.tokenAmount, token.decimals, 4, true)} ${token.symbol} for ${formatAmount(\n          params.usdgAmount,\n          18,\n          4,\n          true\n        )} USDG`;\n      }\n\n      if (tradeData.action === \"SellUSDG\") {\n        const token = getTokenInfo(infoTokens, params.token, true, nativeTokenAddress);\n        if (!token) {\n          return defaultMsg;\n        }\n        return t`Swap ${formatAmount(params.usdgAmount, 18, 4, true)} USDG for ${formatAmount(\n          params.tokenAmount,\n          token.decimals,\n          4,\n          true\n        )} ${token.symbol}`;\n      }\n\n      if (tradeData.action === \"Swap\") {\n        const tokenIn = getTokenInfo(infoTokens, params.tokenIn, true, nativeTokenAddress);\n        const tokenOut = getTokenInfo(infoTokens, params.tokenOut, true, nativeTokenAddress);\n        if (!tokenIn || !tokenOut) {\n          return defaultMsg;\n        }\n        return t`Swap ${formatAmount(params.amountIn, tokenIn.decimals, 4, true)} ${tokenIn.symbol} for ${formatAmount(\n          params.amountOut,\n          tokenOut.decimals,\n          4,\n          true\n        )} ${tokenOut.symbol}`;\n      }\n\n      if (tradeData.action === \"CreateIncreasePosition\") {\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n\n        if (bigNumberify(params.sizeDelta).eq(0)) {\n          return t`Request deposit into ${indexToken.symbol} ${longOrShortText}`;\n        }\n\n        return t`Request increase ${indexToken.symbol} ${longOrShortText}, +${formatAmount(\n          params.sizeDelta,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD, Acceptable Price: ${params.isLong ? \"<\" : \">\"} ${formatAmount(\n          params.acceptablePrice,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD`;\n      }\n\n      if (tradeData.action === \"CreateDecreasePosition\") {\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n\n        if (bigNumberify(params.sizeDelta).eq(0)) {\n          return t`Request withdrawal from ${indexToken.symbol} ${longOrShortText}`;\n        }\n\n        return t`Request decrease ${indexToken.symbol} ${longOrShortText}, -${formatAmount(\n          params.sizeDelta,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD, Acceptable Price: ${params.isLong ? \">\" : \"<\"} ${formatAmount(\n          params.acceptablePrice,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD`;\n      }\n\n      if (tradeData.action === \"CancelIncreasePosition\") {\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n\n        if (bigNumberify(params.sizeDelta).eq(0)) {\n          return (\n            <Trans>\n              Could not execute deposit into {indexToken.symbol} {longOrShortText}\n            </Trans>\n          );\n        }\n\n        return (\n          <>\n            <Trans>\n              Could not increase {indexToken.symbol} {longOrShortText},\n              {`+${formatAmount(params.sizeDelta, USD_DECIMALS, 2, true)}`} USD, Acceptable Price:&nbsp;\n              {params.isLong ? \"<\" : \">\"}&nbsp;\n            </Trans>\n            <Tooltip\n              position=\"center-top\"\n              handle={`${formatAmount(params.acceptablePrice, USD_DECIMALS, 2, true)} USD`}\n              renderContent={() => (\n                <Trans>Try increasing the \"Allowed Slippage\", under the Settings menu on the top right.</Trans>\n              )}\n            />\n          </>\n        );\n      }\n\n      if (tradeData.action === \"CancelDecreasePosition\") {\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n\n        if (bigNumberify(params.sizeDelta).eq(0)) {\n          return t`Could not execute withdrawal from ${indexToken.symbol} ${longOrShortText}`;\n        }\n\n        return (\n          <>\n            <Trans>\n              Could not decrease {indexToken.symbol} {longOrShortText},\n              {`+${formatAmount(params.sizeDelta, USD_DECIMALS, 2, true)}`} USD, Acceptable Price:&nbsp;\n              {params.isLong ? \">\" : \"<\"}&nbsp;\n            </Trans>\n            <Tooltip\n              position=\"right-top\"\n              handle={`${formatAmount(params.acceptablePrice, USD_DECIMALS, 2, true)} USD`}\n              renderContent={() => (\n                <Trans>Try increasing the \"Allowed Slippage\", under the Settings menu on the top right</Trans>\n              )}\n            />\n          </>\n        );\n      }\n\n      if (tradeData.action === \"IncreasePosition-Long\" || tradeData.action === \"IncreasePosition-Short\") {\n        if (params.flags?.isOrderExecution) {\n          return;\n        }\n\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n        if (bigNumberify(params.sizeDelta).eq(0)) {\n          return t`Deposit ${formatAmount(params.collateralDelta, USD_DECIMALS, 2, true)} USD into ${\n            indexToken.symbol\n          } ${longOrShortText}`;\n        }\n        return t`Increase ${indexToken.symbol} ${longOrShortText}, +${formatAmount(\n          params.sizeDelta,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD, ${indexToken.symbol} Price: ${formatAmount(params.price, USD_DECIMALS, 2, true)} USD`;\n      }\n\n      if (tradeData.action === \"DecreasePosition-Long\" || tradeData.action === \"DecreasePosition-Short\") {\n        if (params.flags?.isOrderExecution) {\n          return;\n        }\n\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n        if (bigNumberify(params.sizeDelta).eq(0)) {\n          return t`Withdraw ${formatAmount(params.collateralDelta, USD_DECIMALS, 2, true)} USD from ${\n            indexToken.symbol\n          } ${longOrShortText}`;\n        }\n        const isLiquidation = params.flags?.isLiquidation;\n        const liquidationData = getLiquidationData(liquidationsDataMap, params.key, tradeData.timestamp);\n\n        if (isLiquidation && liquidationData) {\n          return (\n            <>\n              {renderLiquidationTooltip(liquidationData, t`Partial Liquidation`)}&nbsp;\n              {indexToken.symbol} {longOrShortText}, -{formatAmount(params.sizeDelta, USD_DECIMALS, 2, true)} USD,{\" \"}\n              {indexToken.symbol}&nbsp; Price: ${formatAmount(params.price, USD_DECIMALS, 2, true)} USD\n            </>\n          );\n        }\n        const actionDisplay = isLiquidation ? t`Partially Liquidated` : t`Decreased`;\n        return t`${actionDisplay} ${indexToken.symbol} ${longOrShortText},\n        -${formatAmount(params.sizeDelta, USD_DECIMALS, 2, true)} USD,\n        ${indexToken.symbol} Price: ${formatAmount(params.price, USD_DECIMALS, 2, true)} USD\n      `;\n      }\n\n      if (tradeData.action === \"LiquidatePosition-Long\" || tradeData.action === \"LiquidatePosition-Short\") {\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n        const liquidationData = getLiquidationData(liquidationsDataMap, params.key, tradeData.timestamp);\n        if (liquidationData) {\n          return (\n            <Trans>\n              {renderLiquidationTooltip(liquidationData, t`Liquidated`)}&nbsp; {indexToken.symbol} {longOrShortText}, -\n              {formatAmount(params.size, USD_DECIMALS, 2, true)} USD,&nbsp;\n              {indexToken.symbol} Price: ${formatAmount(params.markPrice, USD_DECIMALS, 2, true)} USD\n            </Trans>\n          );\n        }\n        return t`\n        Liquidated ${indexToken.symbol} ${longOrShortText},\n        -${formatAmount(params.size, USD_DECIMALS, 2, true)} USD,\n        ${indexToken.symbol} Price: ${formatAmount(params.markPrice, USD_DECIMALS, 2, true)} USD\n      `;\n      }\n\n      if ([\"ExecuteIncreaseOrder\", \"ExecuteDecreaseOrder\"].includes(tradeData.action)) {\n        const order = deserialize(params.order);\n        const indexToken = getTokenInfo(infoTokens, order.indexToken, true, nativeTokenAddress);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n        const longShortDisplay = order.isLong ? t`Long` : t`Short`;\n        const orderTypeText = order.type === INCREASE ? t`Increase` : t`Decrease`;\n        const executionPriceDisplay = formatAmount(order.executionPrice, USD_DECIMALS, 2, true);\n        const sizeDeltaDisplay = `${order.type === \"Increase\" ? \"+\" : \"-\"}${formatAmount(\n          order.sizeDelta,\n          USD_DECIMALS,\n          2,\n          true\n        )}`;\n        return t`Execute Order: ${orderTypeText} ${indexToken.symbol} ${longShortDisplay} ${sizeDeltaDisplay} USD, Price: ${executionPriceDisplay} USD`;\n      }\n\n      if (\n        [\n          \"CreateIncreaseOrder\",\n          \"CancelIncreaseOrder\",\n          \"UpdateIncreaseOrder\",\n          \"CreateDecreaseOrder\",\n          \"CancelDecreaseOrder\",\n          \"UpdateDecreaseOrder\",\n        ].includes(tradeData.action)\n      ) {\n        const order = deserialize(params.order);\n        const indexToken = getTokenInfo(infoTokens, order.indexToken);\n        if (!indexToken) {\n          return defaultMsg;\n        }\n        const increase = tradeData.action.includes(\"Increase\");\n        const priceDisplay = `${order.triggerAboveThreshold ? \">\" : \"<\"} ${formatAmount(\n          order.triggerPrice,\n          USD_DECIMALS,\n          2,\n          true\n        )}`;\n        return t`\n        ${getOrderActionTitle(tradeData.action)}:\n        ${getPositionDisplay(increase, indexToken, order.isLong, order.sizeDelta)},\n        Price: ${priceDisplay}\n      `;\n      }\n\n      if (tradeData.action === \"ExecuteSwapOrder\") {\n        const order = deserialize(params.order);\n        const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n        const fromToken = getTokenInfo(infoTokens, order.path[0] === nativeTokenAddress ? AddressZero : order.path[0]);\n        const toToken = getTokenInfo(infoTokens, order.shouldUnwrap ? AddressZero : order.path[order.path.length - 1]);\n        if (!fromToken || !toToken) {\n          return defaultMsg;\n        }\n        const fromAmountDisplay = formatAmount(order.amountIn, fromToken.decimals, fromToken.isStable ? 2 : 4, true);\n        const toAmountDisplay = formatAmount(order.amountOut, toToken.decimals, toToken.isStable ? 2 : 4, true);\n        return t`\n        Execute Order: Swap ${fromAmountDisplay} ${fromToken.symbol} for ${toAmountDisplay} ${toToken.symbol}\n      `;\n      }\n\n      if ([\"CreateSwapOrder\", \"UpdateSwapOrder\", \"CancelSwapOrder\"].includes(tradeData.action)) {\n        const order = deserialize(params.order);\n        const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n        const fromToken = getTokenInfo(infoTokens, order.path[0] === nativeTokenAddress ? AddressZero : order.path[0]);\n        const toToken = getTokenInfo(infoTokens, order.shouldUnwrap ? AddressZero : order.path[order.path.length - 1]);\n        if (!fromToken || !toToken) {\n          return defaultMsg;\n        }\n        const amountInDisplay = fromToken\n          ? formatAmount(order.amountIn, fromToken.decimals, fromToken.isStable ? 2 : 4, true)\n          : \"\";\n        const minOutDisplay = toToken\n          ? formatAmount(order.minOut, toToken.decimals, toToken.isStable ? 2 : 4, true)\n          : \"\";\n\n        return t`${getOrderActionTitle(tradeData.action)}: Swap ${amountInDisplay}\n        ${fromToken?.symbol || \"\"} for ${minOutDisplay} ${toToken?.symbol || \"\"},\n        Price: ${getExchangeRateDisplay(order.triggerRatio, fromToken, toToken)}`;\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [getTokenInfo, infoTokens, nativeTokenAddress, chainId, liquidationsDataMap]\n  );\n\n  const tradesWithMessages = useMemo(() => {\n    if (!trades) {\n      return [];\n    }\n\n    return trades\n      .map((trade) => ({\n        msg: getMsg(trade),\n        ...trade,\n      }))\n      .filter((trade) => trade.msg);\n  }, [trades, getMsg]);\n\n  return (\n    <div className=\"TradeHistory\">\n      {tradesWithMessages.length === 0 && (\n        <div className=\"TradeHistory-row App-box\">\n          <Trans>No trades yet</Trans>\n        </div>\n      )}\n      {tradesWithMessages.length > 0 &&\n        tradesWithMessages.map((trade, index) => {\n          const tradeData = trade.data;\n          const txUrl = getExplorerUrl(chainId) + \"tx/\" + tradeData.txhash;\n\n          let msg = getMsg(trade);\n\n          if (!msg) {\n            return null;\n          }\n\n          return (\n            <div className=\"TradeHistory-row App-box App-box-border\" key={index}>\n              <div>\n                <div className=\"muted TradeHistory-time\">\n                  {formatDateTime(tradeData.timestamp)}\n                  {(!account || account.length === 0) && (\n                    <span>\n                      {\" \"}\n                      (<Link to={`/actions/${tradeData.account}`}>{tradeData.account}</Link>)\n                    </span>\n                  )}\n                </div>\n                <ExternalLink className=\"plain TradeHistory-item-link\" href={txUrl}>\n                  {msg}\n                </ExternalLink>\n              </div>\n            </div>\n          );\n        })}\n      {shouldShowPaginationButtons && (\n        <div className=\"gap-right\">\n          {pageIndex > 0 && (\n            <Button variant=\"semi-clear\" onClick={loadPrevPage}>\n              <Trans>Prev</Trans>\n            </Button>\n          )}\n          {trades && trades.length >= TRADES_PAGE_SIZE && (\n            <Button variant=\"semi-clear\" onClick={loadNextPage}>\n              <Trans>Next</Trans>\n            </Button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\n\nimport \"./ExchangeWalletTokens.css\";\nimport { bigNumberify, expandDecimals, formatAmount } from \"lib/numbers\";\n\nexport default function ExchangeWalletTokens(props) {\n  const { tokens, mintingCap, infoTokens, onSelectToken } = props;\n\n  return (\n    <div className=\"ExchangeWalletTokens App-box\">\n      {tokens.map((token) => {\n        let info = infoTokens ? infoTokens[token.address] : {};\n        let mintAmount;\n        let balance = info.balance;\n        if (mintingCap && info.usdgAmount) {\n          mintAmount = mintingCap.sub(info.usdgAmount);\n        }\n        if (mintAmount && mintAmount.lt(0)) {\n          mintAmount = bigNumberify(0);\n        }\n        let balanceUsd;\n        if (balance && info.maxPrice) {\n          balanceUsd = balance.mul(info.maxPrice).div(expandDecimals(1, token.decimals));\n        }\n        return (\n          <div className=\"ExchangeWalletTokens-token-row\" onClick={() => onSelectToken(token)} key={token.address}>\n            <div className=\"ExchangeWalletTokens-top-row\">\n              <div>{token.symbol}</div>\n              {balance && (\n                <div className=\"align-right\">\n                  {balance.gt(0) && formatAmount(balance, token.decimals, 4, true)}\n                  {balance.eq(0) && \"-\"}\n                </div>\n              )}\n            </div>\n            <div className=\"ExchangeWalletTokens-content-row\">\n              <div className=\"ExchangeWalletTokens-token-name\">{token.name}</div>\n              {balanceUsd && balanceUsd.gt(0) && (\n                <div className=\"align-right\">${formatAmount(balanceUsd, 30, 2, true)}</div>\n              )}\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Trans } from \"@lingui/macro\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nimport \"./ExchangeBanner.css\";\n\nexport default function ExchangeBanner(props) {\n  const { hideBanner } = props;\n\n  return (\n    <div className=\"ExchangeBanner\">\n      <p className=\"ExchangeBanner-text\">\n        <Trans>\n          Trade on GMX and win <span className=\"ExchangeBanner-price\">$250.000</span> in prizes! Live until November\n          30th,{\" \"}\n          <ExternalLink\n            href=\"https://medium.com/@gmx.io/gmx-trading-competition-win-250-000-usd-in-prizes-1346504b96f6\"\n            className=\"ExchangeBanner-link\"\n          >\n            click here\n          </ExternalLink>{\" \"}\n          to learn more.\n        </Trans>\n      </p>\n      <span\n        className=\"ExchangeBanner-close\"\n        onClick={(e) => {\n          hideBanner();\n        }}\n      >\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"11.25\" height=\"11.25\" viewBox=\"0 0 11.25 11.25\">\n          <path\n            id=\"ic_close\"\n            d=\"M11-2.565,6.818-6.75,11-10.935a.844.844,0,0,0,0-1.193.844.844,0,0,0-1.193,0L5.625-7.943,1.44-12.128a.844.844,0,0,0-1.193,0,.844.844,0,0,0,0,1.193L4.432-6.75.247-2.565a.844.844,0,0,0,0,1.193.844.844,0,0,0,1.193,0L5.625-5.557,9.81-1.372a.844.844,0,0,0,1.193,0A.844.844,0,0,0,11-2.565Z\"\n            transform=\"translate(0 12.375)\"\n            fill=\"#fff\"\n          />\n        </svg>\n      </span>\n    </div>\n  );\n}\n","import { defineMessage } from \"@lingui/macro\";\nimport \"./Footer.css\";\nimport twitterIcon from \"img/ic_twitter.svg\";\nimport discordIcon from \"img/ic_discord.svg\";\nimport telegramIcon from \"img/ic_telegram.svg\";\nimport githubIcon from \"img/ic_github.svg\";\nimport mediumIcon from \"img/ic_medium.svg\";\nimport { MessageDescriptor } from \"@lingui/core\";\n\ntype Link = {\n  text: MessageDescriptor;\n  link: string;\n  external?: boolean;\n  isAppLink?: boolean;\n};\n\ntype SocialLink = {\n  link: string;\n  name: string;\n  icon: string;\n};\n\nexport const FOOTER_LINKS: { home: Link[]; app: Link[] } = {\n  home: [\n    { text: defineMessage({ message: \"Terms and Conditions\" }), link: \"/terms-and-conditions\" },\n    { text: defineMessage({ message: \"Referral Terms\" }), link: \"/referral-terms\" },\n    { text: defineMessage({ message: \"Media Kit\" }), link: \"https://gmxio.gitbook.io/gmx/media-kit\", external: true },\n    // { text: \"Jobs\", link: \"/jobs\", isAppLink: true },\n  ],\n  app: [\n    { text: defineMessage({ message: \"Media Kit\" }), link: \"https://gmxio.gitbook.io/gmx/media-kit\", external: true },\n    // { text: \"Jobs\", link: \"/jobs\" },\n  ],\n};\n\nexport function getFooterLinks(isHome) {\n  return FOOTER_LINKS[isHome ? \"home\" : \"app\"];\n}\n\nexport const SOCIAL_LINKS: SocialLink[] = [\n  { link: \"https://twitter.com/GMX_IO\", name: \"Twitter\", icon: twitterIcon },\n  { link: \"https://medium.com/@gmx.io\", name: \"Medium\", icon: mediumIcon },\n  { link: \"https://github.com/gmx-io\", name: \"Github\", icon: githubIcon },\n  { link: \"https://t.me/GMX_IO\", name: \"Telegram\", icon: telegramIcon },\n  { link: \"https://discord.com/invite/ymN38YefH9\", name: \"Discord\", icon: discordIcon },\n];\n","import React from \"react\";\nimport cx from \"classnames\";\nimport \"./Footer.css\";\nimport logoImg from \"img/ic_gmx_footer.svg\";\nimport { NavLink } from \"react-router-dom\";\nimport { isHomeSite, getAppBaseUrl, shouldShowRedirectModal } from \"lib/legacy\";\nimport { getFooterLinks, SOCIAL_LINKS } from \"./constants\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport { i18n } from \"@lingui/core\";\n\ntype Props = { showRedirectModal?: (to: string) => void; redirectPopupTimestamp?: () => void };\n\nexport default function Footer({ showRedirectModal, redirectPopupTimestamp }: Props) {\n  const isHome = isHomeSite();\n\n  return (\n    <div className=\"Footer\">\n      <div className={cx(\"Footer-wrapper\", { home: isHome })}>\n        <div className=\"Footer-logo\">\n          <img src={logoImg} alt=\"MetaMask\" />\n        </div>\n        <div className=\"Footer-social-link-block\">\n          {SOCIAL_LINKS.map((platform) => {\n            return (\n              <ExternalLink key={platform.name} className=\"App-social-link\" href={platform.link}>\n                <img src={platform.icon} alt={platform.name} />\n              </ExternalLink>\n            );\n          })}\n        </div>\n        <div className=\"Footer-links\">\n          {getFooterLinks(isHome).map(({ external, text, link, isAppLink }) => {\n            if (external) {\n              return (\n                <ExternalLink key={i18n._(text)} href={link} className=\"Footer-link\">\n                  {i18n._(text)}\n                </ExternalLink>\n              );\n            }\n            if (isAppLink) {\n              if (shouldShowRedirectModal(redirectPopupTimestamp)) {\n                return (\n                  <div\n                    key={i18n._(text)}\n                    className=\"Footer-link a\"\n                    onClick={() => showRedirectModal && showRedirectModal(link)}\n                  >\n                    {i18n._(text)}\n                  </div>\n                );\n              } else {\n                const baseUrl = getAppBaseUrl();\n                return (\n                  <a key={i18n._(text)} href={baseUrl + link} className=\"Footer-link\">\n                    {i18n._(text)}\n                  </a>\n                );\n              }\n            }\n            return (\n              <NavLink key={link} to={link} className=\"Footer-link\" activeClassName=\"active\">\n                {i18n._(text)}\n              </NavLink>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect, useState, useMemo, useCallback, forwardRef, useImperativeHandle } from \"react\";\nimport { Trans, t, Plural } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\nimport cx from \"classnames\";\n\nimport {\n  BASIS_POINTS_DIVISOR,\n  MARGIN_FEE_BASIS_POINTS,\n  SWAP,\n  LONG,\n  SHORT,\n  USD_DECIMALS,\n  getPositionKey,\n  getPositionContractKey,\n  getLeverage,\n  getDeltaStr,\n  useAccountOrders,\n  getPageTitle,\n  getFundingFee,\n  getLeverageStr,\n} from \"lib/legacy\";\nimport { getConstant, getExplorerUrl } from \"config/chains\";\nimport { approvePlugin, useMinExecutionFee, cancelMultipleOrders } from \"domain/legacy\";\n\nimport { getContract } from \"config/contracts\";\n\nimport Reader from \"abis/ReaderV2.json\";\nimport VaultV2 from \"abis/VaultV2.json\";\nimport Router from \"abis/Router.json\";\nimport Token from \"abis/Token.json\";\n\nimport Checkbox from \"components/Checkbox/Checkbox\";\nimport SwapBox from \"components/Exchange/SwapBox\";\nimport ExchangeTVChart, { getChartToken } from \"components/Exchange/ExchangeTVChart\";\nimport PositionsList from \"components/Exchange/PositionsList\";\nimport OrdersList from \"components/Exchange/OrdersList\";\nimport TradeHistory from \"components/Exchange/TradeHistory\";\nimport ExchangeWalletTokens from \"components/Exchange/ExchangeWalletTokens\";\nimport ExchangeBanner from \"components/Exchange/ExchangeBanner\";\nimport Tab from \"components/Tab/Tab\";\nimport Footer from \"components/Footer/Footer\";\n\nimport \"./Exchange.css\";\nimport { contractFetcher } from \"lib/contracts\";\nimport { useInfoTokens } from \"domain/tokens\";\nimport { useLocalStorageByChainId, useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport { helperToast } from \"lib/helperToast\";\nimport { getTokenInfo } from \"domain/tokens/utils\";\nimport { bigNumberify, formatAmount } from \"lib/numbers\";\nimport { getToken, getTokenBySymbol, getTokens, getWhitelistedTokens } from \"config/tokens\";\nimport { useChainId } from \"lib/chains\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport UsefulLinks from \"components/Exchange/UsefulLinks\";\nconst { AddressZero } = ethers.constants;\n\nconst PENDING_POSITION_VALID_DURATION = 600 * 1000;\nconst UPDATED_POSITION_VALID_DURATION = 60 * 1000;\n\nconst notifications = {};\n\nfunction pushSuccessNotification(chainId, message, e) {\n  const { transactionHash } = e;\n  const id = ethers.utils.id(message + transactionHash);\n  if (notifications[id]) {\n    return;\n  }\n\n  notifications[id] = true;\n\n  const txUrl = getExplorerUrl(chainId) + \"tx/\" + transactionHash;\n  helperToast.success(\n    <div>\n      {message}{\" \"}\n      <ExternalLink href={txUrl}>\n        <Trans>View</Trans>\n      </ExternalLink>\n    </div>\n  );\n}\n\nfunction pushErrorNotification(chainId, message, e) {\n  const { transactionHash } = e;\n  const id = ethers.utils.id(message + transactionHash);\n  if (notifications[id]) {\n    return;\n  }\n\n  notifications[id] = true;\n\n  const txUrl = getExplorerUrl(chainId) + \"tx/\" + transactionHash;\n  helperToast.error(\n    <div>\n      {message}{\" \"}\n      <ExternalLink href={txUrl}>\n        <Trans>View</Trans>\n      </ExternalLink>\n    </div>\n  );\n}\n\nconst getTokenAddress = (token, nativeTokenAddress) => {\n  if (token.address === AddressZero) {\n    return nativeTokenAddress;\n  }\n  return token.address;\n};\n\nfunction applyPendingChanges(position, pendingPositions) {\n  if (!pendingPositions) {\n    return;\n  }\n  const { key } = position;\n\n  if (\n    pendingPositions[key] &&\n    pendingPositions[key].updatedAt &&\n    pendingPositions[key].pendingChanges &&\n    pendingPositions[key].updatedAt + PENDING_POSITION_VALID_DURATION > Date.now()\n  ) {\n    const { pendingChanges } = pendingPositions[key];\n    if (pendingChanges.size && position.size.eq(pendingChanges.size)) {\n      return;\n    }\n\n    if (pendingChanges.expectingCollateralChange && !position.collateral.eq(pendingChanges.collateralSnapshot)) {\n      return;\n    }\n\n    position.hasPendingChanges = true;\n    position.pendingChanges = pendingChanges;\n  }\n}\n\nexport function getPositions(\n  chainId,\n  positionQuery,\n  positionData,\n  infoTokens,\n  includeDelta,\n  showPnlAfterFees,\n  account,\n  pendingPositions,\n  updatedPositions\n) {\n  const propsLength = getConstant(chainId, \"positionReaderPropsLength\");\n  const positions = [];\n  const positionsMap = {};\n  if (!positionData) {\n    return { positions, positionsMap };\n  }\n  const { collateralTokens, indexTokens, isLong } = positionQuery;\n  for (let i = 0; i < collateralTokens.length; i++) {\n    const collateralToken = getTokenInfo(infoTokens, collateralTokens[i], true, getContract(chainId, \"NATIVE_TOKEN\"));\n    const indexToken = getTokenInfo(infoTokens, indexTokens[i], true, getContract(chainId, \"NATIVE_TOKEN\"));\n    const key = getPositionKey(account, collateralTokens[i], indexTokens[i], isLong[i]);\n    let contractKey;\n    if (account) {\n      contractKey = getPositionContractKey(account, collateralTokens[i], indexTokens[i], isLong[i]);\n    }\n\n    const position = {\n      key,\n      contractKey,\n      collateralToken,\n      indexToken,\n      isLong: isLong[i],\n      size: positionData[i * propsLength],\n      collateral: positionData[i * propsLength + 1],\n      averagePrice: positionData[i * propsLength + 2],\n      entryFundingRate: positionData[i * propsLength + 3],\n      cumulativeFundingRate: collateralToken.cumulativeFundingRate,\n      hasRealisedProfit: positionData[i * propsLength + 4].eq(1),\n      realisedPnl: positionData[i * propsLength + 5],\n      lastIncreasedTime: positionData[i * propsLength + 6].toNumber(),\n      hasProfit: positionData[i * propsLength + 7].eq(1),\n      delta: positionData[i * propsLength + 8],\n      markPrice: isLong[i] ? indexToken.minPrice : indexToken.maxPrice,\n    };\n\n    if (\n      updatedPositions &&\n      updatedPositions[key] &&\n      updatedPositions[key].updatedAt &&\n      updatedPositions[key].updatedAt + UPDATED_POSITION_VALID_DURATION > Date.now()\n    ) {\n      const updatedPosition = updatedPositions[key];\n      position.size = updatedPosition.size;\n      position.collateral = updatedPosition.collateral;\n      position.averagePrice = updatedPosition.averagePrice;\n      position.entryFundingRate = updatedPosition.entryFundingRate;\n    }\n\n    let fundingFee = getFundingFee(position);\n    position.fundingFee = fundingFee ? fundingFee : bigNumberify(0);\n    position.collateralAfterFee = position.collateral.sub(position.fundingFee);\n\n    position.closingFee = position.size.mul(MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\n    position.positionFee = position.size.mul(MARGIN_FEE_BASIS_POINTS).mul(2).div(BASIS_POINTS_DIVISOR);\n    position.totalFees = position.positionFee.add(position.fundingFee);\n\n    position.pendingDelta = position.delta;\n\n    if (position.collateral.gt(0)) {\n      position.hasLowCollateral =\n        position.collateralAfterFee.lt(0) || position.size.div(position.collateralAfterFee.abs()).gt(50);\n\n      if (position.averagePrice && position.markPrice) {\n        const priceDelta = position.averagePrice.gt(position.markPrice)\n          ? position.averagePrice.sub(position.markPrice)\n          : position.markPrice.sub(position.averagePrice);\n        position.pendingDelta = position.size.mul(priceDelta).div(position.averagePrice);\n\n        position.delta = position.pendingDelta;\n\n        if (position.isLong) {\n          position.hasProfit = position.markPrice.gte(position.averagePrice);\n        } else {\n          position.hasProfit = position.markPrice.lte(position.averagePrice);\n        }\n      }\n\n      position.deltaPercentage = position.pendingDelta.mul(BASIS_POINTS_DIVISOR).div(position.collateral);\n\n      const { deltaStr, deltaPercentageStr } = getDeltaStr({\n        delta: position.pendingDelta,\n        deltaPercentage: position.deltaPercentage,\n        hasProfit: position.hasProfit,\n      });\n\n      position.deltaStr = deltaStr;\n      position.deltaPercentageStr = deltaPercentageStr;\n      position.deltaBeforeFeesStr = deltaStr;\n\n      let hasProfitAfterFees;\n      let pendingDeltaAfterFees;\n\n      if (position.hasProfit) {\n        if (position.pendingDelta.gt(position.totalFees)) {\n          hasProfitAfterFees = true;\n          pendingDeltaAfterFees = position.pendingDelta.sub(position.totalFees);\n        } else {\n          hasProfitAfterFees = false;\n          pendingDeltaAfterFees = position.totalFees.sub(position.pendingDelta);\n        }\n      } else {\n        hasProfitAfterFees = false;\n        pendingDeltaAfterFees = position.pendingDelta.add(position.totalFees);\n      }\n\n      position.hasProfitAfterFees = hasProfitAfterFees;\n      position.pendingDeltaAfterFees = pendingDeltaAfterFees;\n      // while calculating delta percentage after fees, we need to add opening fee (which is equal to closing fee) to collateral\n      position.deltaPercentageAfterFees = position.pendingDeltaAfterFees\n        .mul(BASIS_POINTS_DIVISOR)\n        .div(position.collateral.add(position.closingFee));\n\n      const { deltaStr: deltaAfterFeesStr, deltaPercentageStr: deltaAfterFeesPercentageStr } = getDeltaStr({\n        delta: position.pendingDeltaAfterFees,\n        deltaPercentage: position.deltaPercentageAfterFees,\n        hasProfit: hasProfitAfterFees,\n      });\n\n      position.deltaAfterFeesStr = deltaAfterFeesStr;\n      position.deltaAfterFeesPercentageStr = deltaAfterFeesPercentageStr;\n\n      if (showPnlAfterFees) {\n        position.deltaStr = position.deltaAfterFeesStr;\n        position.deltaPercentageStr = position.deltaAfterFeesPercentageStr;\n      }\n\n      let netValue = position.hasProfit\n        ? position.collateral.add(position.pendingDelta)\n        : position.collateral.sub(position.pendingDelta);\n\n      netValue = netValue.sub(position.fundingFee).sub(position.closingFee);\n      position.netValue = netValue;\n    }\n\n    position.leverage = getLeverage({\n      size: position.size,\n      collateral: position.collateral,\n      entryFundingRate: position.entryFundingRate,\n      cumulativeFundingRate: position.cumulativeFundingRate,\n      hasProfit: position.hasProfit,\n      delta: position.delta,\n      includeDelta,\n    });\n    position.leverageStr = getLeverageStr(position.leverage);\n\n    positionsMap[key] = position;\n\n    applyPendingChanges(position, pendingPositions);\n\n    if (position.size.gt(0) || position.hasPendingChanges) {\n      positions.push(position);\n    }\n  }\n\n  return { positions, positionsMap };\n}\n\nexport function getPositionQuery(tokens, nativeTokenAddress) {\n  const collateralTokens = [];\n  const indexTokens = [];\n  const isLong = [];\n\n  for (let i = 0; i < tokens.length; i++) {\n    const token = tokens[i];\n    if (token.isStable) {\n      continue;\n    }\n    if (token.isWrapped) {\n      continue;\n    }\n    collateralTokens.push(getTokenAddress(token, nativeTokenAddress));\n    indexTokens.push(getTokenAddress(token, nativeTokenAddress));\n    isLong.push(true);\n  }\n\n  for (let i = 0; i < tokens.length; i++) {\n    const stableToken = tokens[i];\n    if (!stableToken.isStable) {\n      continue;\n    }\n\n    for (let j = 0; j < tokens.length; j++) {\n      const token = tokens[j];\n      if (token.isStable) {\n        continue;\n      }\n      if (token.isWrapped) {\n        continue;\n      }\n      collateralTokens.push(stableToken.address);\n      indexTokens.push(getTokenAddress(token, nativeTokenAddress));\n      isLong.push(false);\n    }\n  }\n\n  return { collateralTokens, indexTokens, isLong };\n}\n\nexport const Exchange = forwardRef((props, ref) => {\n  const {\n    savedIsPnlInLeverage,\n    setSavedIsPnlInLeverage,\n    savedShowPnlAfterFees,\n    savedSlippageAmount,\n    pendingTxns,\n    setPendingTxns,\n    savedShouldShowPositionLines,\n    setSavedShouldShowPositionLines,\n    connectWallet,\n    savedShouldDisableValidationForTesting,\n  } = props;\n  const [showBanner, setShowBanner] = useLocalStorageSerializeKey(\"showBanner\", true);\n  const [bannerHidden, setBannerHidden] = useLocalStorageSerializeKey(\"bannerHidden\", null);\n\n  const [pendingPositions, setPendingPositions] = useState({});\n  const [updatedPositions, setUpdatedPositions] = useState({});\n\n  const hideBanner = () => {\n    const hiddenLimit = new Date(new Date().getTime() + 2 * 24 * 60 * 60 * 1000);\n    setBannerHidden(hiddenLimit);\n    setShowBanner(false);\n  };\n\n  useEffect(() => {\n    if (new Date() > new Date(\"2021-11-30\")) {\n      setShowBanner(false);\n    } else {\n      if (bannerHidden && new Date(bannerHidden) > new Date()) {\n        setShowBanner(false);\n      } else {\n        setBannerHidden(null);\n        setShowBanner(true);\n      }\n    }\n  }, [showBanner, bannerHidden, setBannerHidden, setShowBanner]);\n\n  const { active, account, library } = useWeb3React();\n  const { chainId } = useChainId();\n  const currentAccount = account;\n\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\n  const readerAddress = getContract(chainId, \"Reader\");\n  const usdgAddress = getContract(chainId, \"USDG\");\n\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const whitelistedTokenAddresses = whitelistedTokens.map((token) => token.address);\n\n  const positionQuery = getPositionQuery(whitelistedTokens, nativeTokenAddress);\n\n  const defaultCollateralSymbol = getConstant(chainId, \"defaultCollateralSymbol\");\n  const defaultTokenSelection = useMemo(\n    () => ({\n      [SWAP]: {\n        from: AddressZero,\n        to: getTokenBySymbol(chainId, defaultCollateralSymbol).address,\n      },\n      [LONG]: {\n        from: AddressZero,\n        to: AddressZero,\n      },\n      [SHORT]: {\n        from: getTokenBySymbol(chainId, defaultCollateralSymbol).address,\n        to: AddressZero,\n      },\n    }),\n    [chainId, defaultCollateralSymbol]\n  );\n\n  const [tokenSelection, setTokenSelection] = useLocalStorageByChainId(\n    chainId,\n    \"Exchange-token-selection-v2\",\n    defaultTokenSelection\n  );\n  const [swapOption, setSwapOption] = useLocalStorageByChainId(chainId, \"Swap-option-v2\", LONG);\n\n  const fromTokenAddress = tokenSelection[swapOption].from;\n  const toTokenAddress = tokenSelection[swapOption].to;\n\n  const setFromTokenAddress = useCallback(\n    (selectedSwapOption, address) => {\n      const newTokenSelection = JSON.parse(JSON.stringify(tokenSelection));\n      newTokenSelection[selectedSwapOption].from = address;\n      setTokenSelection(newTokenSelection);\n    },\n    [tokenSelection, setTokenSelection]\n  );\n\n  const setToTokenAddress = useCallback(\n    (selectedSwapOption, address) => {\n      const newTokenSelection = JSON.parse(JSON.stringify(tokenSelection));\n      newTokenSelection[selectedSwapOption].to = address;\n      if (selectedSwapOption === LONG || selectedSwapOption === SHORT) {\n        newTokenSelection[LONG].to = address;\n        newTokenSelection[SHORT].to = address;\n      }\n      setTokenSelection(newTokenSelection);\n    },\n    [tokenSelection, setTokenSelection]\n  );\n\n  const setMarket = (selectedSwapOption, toTokenAddress) => {\n    setSwapOption(selectedSwapOption);\n    const newTokenSelection = JSON.parse(JSON.stringify(tokenSelection));\n    newTokenSelection[selectedSwapOption].to = toTokenAddress;\n    if (selectedSwapOption === LONG || selectedSwapOption === SHORT) {\n      newTokenSelection[LONG].to = toTokenAddress;\n      newTokenSelection[SHORT].to = toTokenAddress;\n    }\n    setTokenSelection(newTokenSelection);\n  };\n\n  const [isConfirming, setIsConfirming] = useState(false);\n  const [isPendingConfirmation, setIsPendingConfirmation] = useState(false);\n\n  const tokens = getTokens(chainId);\n\n  const tokenAddresses = tokens.map((token) => token.address);\n  const { data: tokenBalances } = useSWR(active && [active, chainId, readerAddress, \"getTokenBalances\", account], {\n    fetcher: contractFetcher(library, Reader, [tokenAddresses]),\n  });\n\n  const { data: positionData, error: positionDataError } = useSWR(\n    active && [active, chainId, readerAddress, \"getPositions\", vaultAddress, account],\n    {\n      fetcher: contractFetcher(library, Reader, [\n        positionQuery.collateralTokens,\n        positionQuery.indexTokens,\n        positionQuery.isLong,\n      ]),\n    }\n  );\n\n  const positionsDataIsLoading = active && !positionData && !positionDataError;\n\n  const { data: fundingRateInfo } = useSWR([active, chainId, readerAddress, \"getFundingRates\"], {\n    fetcher: contractFetcher(library, Reader, [vaultAddress, nativeTokenAddress, whitelistedTokenAddresses]),\n  });\n\n  const { data: totalTokenWeights } = useSWR(\n    [`Exchange:totalTokenWeights:${active}`, chainId, vaultAddress, \"totalTokenWeights\"],\n    {\n      fetcher: contractFetcher(library, VaultV2),\n    }\n  );\n\n  const { data: usdgSupply } = useSWR([`Exchange:usdgSupply:${active}`, chainId, usdgAddress, \"totalSupply\"], {\n    fetcher: contractFetcher(library, Token),\n  });\n\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\n  const routerAddress = getContract(chainId, \"Router\");\n  const { data: orderBookApproved } = useSWR(\n    active && [active, chainId, routerAddress, \"approvedPlugins\", account, orderBookAddress],\n    {\n      fetcher: contractFetcher(library, Router),\n    }\n  );\n\n  const { data: positionRouterApproved } = useSWR(\n    active && [active, chainId, routerAddress, \"approvedPlugins\", account, positionRouterAddress],\n    {\n      fetcher: contractFetcher(library, Router),\n    }\n  );\n\n  const { infoTokens } = useInfoTokens(library, chainId, active, tokenBalances, fundingRateInfo);\n  const { minExecutionFee, minExecutionFeeUSD, minExecutionFeeErrorMessage } = useMinExecutionFee(\n    library,\n    active,\n    chainId,\n    infoTokens\n  );\n\n  useEffect(() => {\n    const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\n    const toToken = getTokenInfo(infoTokens, toTokenAddress);\n    let selectedToken = getChartToken(swapOption, fromToken, toToken, chainId);\n    let currentTokenPriceStr = formatAmount(selectedToken.maxPrice, USD_DECIMALS, 2, true);\n    let title = getPageTitle(currentTokenPriceStr + ` | ${selectedToken.symbol}${selectedToken.isStable ? \"\" : \"USD\"}`);\n    document.title = title;\n  }, [tokenSelection, swapOption, infoTokens, chainId, fromTokenAddress, toTokenAddress]);\n\n  const { positions, positionsMap } = getPositions(\n    chainId,\n    positionQuery,\n    positionData,\n    infoTokens,\n    savedIsPnlInLeverage,\n    savedShowPnlAfterFees,\n    account,\n    pendingPositions,\n    updatedPositions\n  );\n\n  useImperativeHandle(ref, () => ({\n    onUpdatePosition(key, size, collateral, averagePrice, entryFundingRate, reserveAmount, realisedPnl) {\n      for (let i = 0; i < positions.length; i++) {\n        const position = positions[i];\n        if (position.contractKey === key) {\n          updatedPositions[position.key] = {\n            size,\n            collateral,\n            averagePrice,\n            entryFundingRate,\n            reserveAmount,\n            realisedPnl,\n            updatedAt: Date.now(),\n          };\n          setUpdatedPositions({ ...updatedPositions });\n          break;\n        }\n      }\n    },\n    onClosePosition(key, size, collateral, averagePrice, entryFundingRate, reserveAmount, realisedPnl, e) {\n      for (let i = 0; i < positions.length; i++) {\n        const position = positions[i];\n        if (position.contractKey === key) {\n          updatedPositions[position.key] = {\n            size: bigNumberify(0),\n            collateral: bigNumberify(0),\n            averagePrice,\n            entryFundingRate,\n            reserveAmount,\n            realisedPnl,\n            updatedAt: Date.now(),\n          };\n          setUpdatedPositions({ ...updatedPositions });\n          break;\n        }\n      }\n    },\n\n    onIncreasePosition(key, account, collateralToken, indexToken, collateralDelta, sizeDelta, isLong, price, fee, e) {\n      if (account !== currentAccount) {\n        return;\n      }\n\n      const indexTokenItem = getToken(chainId, indexToken);\n      const tokenSymbol = indexTokenItem.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexTokenItem.symbol;\n      const longOrShortText = isLong ? t`Long` : t`Short`;\n      let message;\n      if (sizeDelta.eq(0)) {\n        message = t`Deposited ${formatAmount(\n          collateralDelta,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD into ${tokenSymbol} ${longOrShortText}`;\n      } else {\n        message = t`Increased ${tokenSymbol} ${longOrShortText}, +${formatAmount(\n          sizeDelta,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD.`;\n      }\n\n      pushSuccessNotification(chainId, message, e);\n    },\n\n    onDecreasePosition(key, account, collateralToken, indexToken, collateralDelta, sizeDelta, isLong, price, fee, e) {\n      if (account !== currentAccount) {\n        return;\n      }\n\n      const indexTokenItem = getToken(chainId, indexToken);\n      const tokenSymbol = indexTokenItem.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexTokenItem.symbol;\n      const longOrShortText = isLong ? t`Long` : t`Short`;\n\n      let message;\n      if (sizeDelta.eq(0)) {\n        message = t`Withdrew ${formatAmount(\n          collateralDelta,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD from ${tokenSymbol} ${longOrShortText}.`;\n      } else {\n        message = t`Decreased ${tokenSymbol} ${longOrShortText}, -${formatAmount(\n          sizeDelta,\n          USD_DECIMALS,\n          2,\n          true\n        )} USD.`;\n      }\n\n      pushSuccessNotification(chainId, message, e);\n    },\n\n    onCancelIncreasePosition(\n      account,\n      path,\n      indexToken,\n      amountIn,\n      minOut,\n      sizeDelta,\n      isLong,\n      acceptablePrice,\n      executionFee,\n      blockGap,\n      timeGap,\n      e\n    ) {\n      if (account !== currentAccount) {\n        return;\n      }\n      const indexTokenItem = getToken(chainId, indexToken);\n      const tokenSymbol = indexTokenItem.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexTokenItem.symbol;\n      const longOrShortText = isLong ? t`Long` : t`Short`;\n\n      const message = t`Could not increase ${tokenSymbol} ${longOrShortText} within the allowed slippage, you can adjust the allowed slippage in the settings on the top right of the page.`;\n      pushErrorNotification(chainId, message, e);\n\n      const key = getPositionKey(account, path[path.length - 1], indexToken, isLong);\n      pendingPositions[key] = {};\n      setPendingPositions({ ...pendingPositions });\n    },\n\n    onCancelDecreasePosition(\n      account,\n      path,\n      indexToken,\n      collateralDelta,\n      sizeDelta,\n      isLong,\n      receiver,\n      acceptablePrice,\n      minOut,\n      executionFee,\n      blockGap,\n      timeGap,\n      e\n    ) {\n      if (account !== currentAccount) {\n        return;\n      }\n      const indexTokenItem = getToken(chainId, indexToken);\n      const tokenSymbol = indexTokenItem.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexTokenItem.symbol;\n      const longOrShortText = isLong ? t`Long` : t`Short`;\n\n      const message = t`Could not decrease ${tokenSymbol} ${longOrShortText} within the allowed slippage, you can adjust the allowed slippage in the settings on the top right of the page.`;\n\n      pushErrorNotification(chainId, message, e);\n\n      const key = getPositionKey(account, path[path.length - 1], indexToken, isLong);\n      pendingPositions[key] = {};\n      setPendingPositions({ ...pendingPositions });\n    },\n  }));\n\n  const flagOrdersEnabled = true;\n  const [orders] = useAccountOrders(flagOrdersEnabled);\n\n  const [isWaitingForPluginApproval, setIsWaitingForPluginApproval] = useState(false);\n  const [isWaitingForPositionRouterApproval, setIsWaitingForPositionRouterApproval] = useState(false);\n  const [isPluginApproving, setIsPluginApproving] = useState(false);\n  const [isPositionRouterApproving, setIsPositionRouterApproving] = useState(false);\n  const [isCancelMultipleOrderProcessing, setIsCancelMultipleOrderProcessing] = useState(false);\n  const [cancelOrderIdList, setCancelOrderIdList] = useState([]);\n\n  const onMultipleCancelClick = useCallback(\n    async function () {\n      setIsCancelMultipleOrderProcessing(true);\n      try {\n        const tx = await cancelMultipleOrders(chainId, library, cancelOrderIdList, {\n          successMsg: t`Orders cancelled.`,\n          failMsg: t`Cancel failed.`,\n          sentMsg: t`Cancel submitted.`,\n          pendingTxns,\n          setPendingTxns,\n        });\n        const receipt = await tx.wait();\n        if (receipt.status === 1) {\n          setCancelOrderIdList([]);\n        }\n      } catch (error) {\n        // eslint-disable-next-line no-console\n        console.error(error);\n      } finally {\n        setIsCancelMultipleOrderProcessing(false);\n      }\n    },\n    [\n      chainId,\n      library,\n      pendingTxns,\n      setPendingTxns,\n      setCancelOrderIdList,\n      cancelOrderIdList,\n      setIsCancelMultipleOrderProcessing,\n    ]\n  );\n\n  const approveOrderBook = () => {\n    setIsPluginApproving(true);\n    return approvePlugin(chainId, orderBookAddress, {\n      library,\n      pendingTxns,\n      setPendingTxns,\n      sentMsg: t`Enable orders sent.`,\n      failMsg: t`Enable orders failed.`,\n    })\n      .then(() => {\n        setIsWaitingForPluginApproval(true);\n      })\n      .finally(() => {\n        setIsPluginApproving(false);\n      });\n  };\n\n  const approvePositionRouter = ({ sentMsg, failMsg }) => {\n    setIsPositionRouterApproving(true);\n    return approvePlugin(chainId, positionRouterAddress, {\n      library,\n      pendingTxns,\n      setPendingTxns,\n      sentMsg,\n      failMsg,\n    })\n      .then(() => {\n        setIsWaitingForPositionRouterApproval(true);\n      })\n      .finally(() => {\n        setIsPositionRouterApproving(false);\n      });\n  };\n  const POSITIONS = \"Positions\";\n  const ORDERS = \"Orders\";\n  const TRADES = \"Trades\";\n\n  const LIST_SECTIONS = [POSITIONS, flagOrdersEnabled && ORDERS, TRADES].filter(Boolean);\n  let [listSection, setListSection] = useLocalStorageByChainId(chainId, \"List-section-v2\", LIST_SECTIONS[0]);\n  const LIST_SECTIONS_LABELS = {\n    [ORDERS]: orders.length ? t`Orders (${orders.length})` : t`Orders`,\n    [POSITIONS]: positions.length ? t`Positions (${positions.length})` : t`Positions`,\n    [TRADES]: t`Trades`,\n  };\n  if (!LIST_SECTIONS.includes(listSection)) {\n    listSection = LIST_SECTIONS[0];\n  }\n\n  if (!getToken(chainId, toTokenAddress)) {\n    return null;\n  }\n\n  const renderCancelOrderButton = () => {\n    if (cancelOrderIdList.length === 0) return;\n    return (\n      <button\n        className=\"muted font-base cancel-order-btn\"\n        disabled={isCancelMultipleOrderProcessing}\n        type=\"button\"\n        onClick={onMultipleCancelClick}\n      >\n        <Plural value={cancelOrderIdList.length} one=\"Cancel order\" other=\"Cancel # orders\" />\n      </button>\n    );\n  };\n\n  const getListSection = () => {\n    return (\n      <div>\n        <div className=\"Exchange-list-tab-container\">\n          <Tab\n            options={LIST_SECTIONS}\n            optionLabels={LIST_SECTIONS_LABELS}\n            option={listSection}\n            onChange={(section) => setListSection(section)}\n            type=\"inline\"\n            className=\"Exchange-list-tabs\"\n          />\n          <div className=\"align-right Exchange-should-show-position-lines\">\n            {renderCancelOrderButton()}\n            <Checkbox\n              isChecked={savedShouldShowPositionLines}\n              setIsChecked={setSavedShouldShowPositionLines}\n              className={cx(\"muted chart-positions\", { active: savedShouldShowPositionLines })}\n            >\n              <span>\n                <Trans>Chart positions</Trans>\n              </span>\n            </Checkbox>\n          </div>\n        </div>\n        {listSection === POSITIONS && (\n          <PositionsList\n            positionsDataIsLoading={positionsDataIsLoading}\n            pendingPositions={pendingPositions}\n            setPendingPositions={setPendingPositions}\n            setListSection={setListSection}\n            setIsWaitingForPluginApproval={setIsWaitingForPluginApproval}\n            setIsWaitingForPositionRouterApproval={setIsWaitingForPositionRouterApproval}\n            approveOrderBook={approveOrderBook}\n            approvePositionRouter={approvePositionRouter}\n            isPluginApproving={isPluginApproving}\n            isPositionRouterApproving={isPositionRouterApproving}\n            isWaitingForPluginApproval={isWaitingForPluginApproval}\n            isWaitingForPositionRouterApproval={isWaitingForPositionRouterApproval}\n            orderBookApproved={orderBookApproved}\n            positionRouterApproved={positionRouterApproved}\n            positions={positions}\n            positionsMap={positionsMap}\n            infoTokens={infoTokens}\n            active={active}\n            account={account}\n            library={library}\n            pendingTxns={pendingTxns}\n            setPendingTxns={setPendingTxns}\n            flagOrdersEnabled={flagOrdersEnabled}\n            savedIsPnlInLeverage={savedIsPnlInLeverage}\n            chainId={chainId}\n            nativeTokenAddress={nativeTokenAddress}\n            setMarket={setMarket}\n            orders={orders}\n            showPnlAfterFees={savedShowPnlAfterFees}\n            minExecutionFee={minExecutionFee}\n            minExecutionFeeUSD={minExecutionFeeUSD}\n            minExecutionFeeErrorMessage={minExecutionFeeErrorMessage}\n            usdgSupply={usdgSupply}\n            totalTokenWeights={totalTokenWeights}\n          />\n        )}\n        {listSection === ORDERS && (\n          <OrdersList\n            account={account}\n            active={active}\n            library={library}\n            pendingTxns={pendingTxns}\n            setPendingTxns={setPendingTxns}\n            infoTokens={infoTokens}\n            positionsMap={positionsMap}\n            chainId={chainId}\n            orders={orders}\n            totalTokenWeights={totalTokenWeights}\n            usdgSupply={usdgSupply}\n            savedShouldDisableValidationForTesting={savedShouldDisableValidationForTesting}\n            cancelOrderIdList={cancelOrderIdList}\n            setCancelOrderIdList={setCancelOrderIdList}\n          />\n        )}\n        {listSection === TRADES && (\n          <TradeHistory\n            account={account}\n            forSingleAccount={true}\n            infoTokens={infoTokens}\n            getTokenInfo={getTokenInfo}\n            chainId={chainId}\n            nativeTokenAddress={nativeTokenAddress}\n            shouldShowPaginationButtons={true}\n          />\n        )}\n      </div>\n    );\n  };\n\n  const onSelectWalletToken = (token) => {\n    setFromTokenAddress(swapOption, token.address);\n  };\n\n  const renderChart = () => {\n    return (\n      <ExchangeTVChart\n        fromTokenAddress={fromTokenAddress}\n        toTokenAddress={toTokenAddress}\n        infoTokens={infoTokens}\n        swapOption={swapOption}\n        chainId={chainId}\n        positions={positions}\n        savedShouldShowPositionLines={savedShouldShowPositionLines}\n        orders={orders}\n        setToTokenAddress={setToTokenAddress}\n      />\n    );\n  };\n\n  return (\n    <div className=\"Exchange page-layout\">\n      {showBanner && <ExchangeBanner hideBanner={hideBanner} />}\n      <div className=\"Exchange-content\">\n        <div className=\"Exchange-left\">\n          {renderChart()}\n          <div className=\"Exchange-lists large\">{getListSection()}</div>\n        </div>\n        <div className=\"Exchange-right\">\n          <SwapBox\n            pendingPositions={pendingPositions}\n            setPendingPositions={setPendingPositions}\n            setIsWaitingForPluginApproval={setIsWaitingForPluginApproval}\n            setIsWaitingForPositionRouterApproval={setIsWaitingForPositionRouterApproval}\n            approveOrderBook={approveOrderBook}\n            approvePositionRouter={approvePositionRouter}\n            isPluginApproving={isPluginApproving}\n            isPositionRouterApproving={isPositionRouterApproving}\n            isWaitingForPluginApproval={isWaitingForPluginApproval}\n            isWaitingForPositionRouterApproval={isWaitingForPositionRouterApproval}\n            orderBookApproved={orderBookApproved}\n            positionRouterApproved={positionRouterApproved}\n            orders={orders}\n            flagOrdersEnabled={flagOrdersEnabled}\n            chainId={chainId}\n            infoTokens={infoTokens}\n            active={active}\n            connectWallet={connectWallet}\n            library={library}\n            account={account}\n            positionsMap={positionsMap}\n            fromTokenAddress={fromTokenAddress}\n            setFromTokenAddress={setFromTokenAddress}\n            toTokenAddress={toTokenAddress}\n            setToTokenAddress={setToTokenAddress}\n            swapOption={swapOption}\n            setSwapOption={setSwapOption}\n            pendingTxns={pendingTxns}\n            setPendingTxns={setPendingTxns}\n            tokenSelection={tokenSelection}\n            setTokenSelection={setTokenSelection}\n            isConfirming={isConfirming}\n            setIsConfirming={setIsConfirming}\n            isPendingConfirmation={isPendingConfirmation}\n            setIsPendingConfirmation={setIsPendingConfirmation}\n            savedIsPnlInLeverage={savedIsPnlInLeverage}\n            setSavedIsPnlInLeverage={setSavedIsPnlInLeverage}\n            nativeTokenAddress={nativeTokenAddress}\n            savedSlippageAmount={savedSlippageAmount}\n            totalTokenWeights={totalTokenWeights}\n            usdgSupply={usdgSupply}\n            savedShouldDisableValidationForTesting={savedShouldDisableValidationForTesting}\n            minExecutionFee={minExecutionFee}\n            minExecutionFeeUSD={minExecutionFeeUSD}\n            minExecutionFeeErrorMessage={minExecutionFeeErrorMessage}\n          />\n          <div className=\"Exchange-wallet-tokens\">\n            <div className=\"Exchange-wallet-tokens-content\">\n              <ExchangeWalletTokens tokens={tokens} infoTokens={infoTokens} onSelectToken={onSelectWalletToken} />\n            </div>\n          </div>\n        </div>\n        <div className=\"Exchange-lists small\">{getListSection()}</div>\n        <UsefulLinks className=\"Useful-links-exchange\" />\n      </div>\n      <Footer />\n    </div>\n  );\n});\n","import React from \"react\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { useParams } from \"react-router-dom\";\n\nimport \"./Actions.css\";\n\nimport { getContract } from \"config/contracts\";\nimport { useAccountOrders } from \"lib/legacy\";\n\nimport { getPositions, getPositionQuery } from \"../Exchange/Exchange\";\n\nimport PositionsList from \"components/Exchange/PositionsList\";\nimport OrdersList from \"components/Exchange/OrdersList\";\n\nimport TradeHistory from \"components/Exchange/TradeHistory\";\nimport Reader from \"abis/Reader.json\";\n\nimport { Trans, t } from \"@lingui/macro\";\nimport { getServerBaseUrl } from \"config/backend\";\nimport { contractFetcher } from \"lib/contracts\";\nimport { useInfoTokens } from \"domain/tokens\";\nimport { getTokenInfo } from \"domain/tokens/utils\";\nimport { formatAmount } from \"lib/numbers\";\nimport { getToken, getTokens, getWhitelistedTokens } from \"config/tokens\";\nimport { useChainId } from \"lib/chains\";\n\nconst USD_DECIMALS = 30;\n\nexport default function Actions({ savedIsPnlInLeverage, savedShowPnlAfterFees }) {\n  const { account } = useParams();\n  const { active, library } = useWeb3React();\n\n  const { chainId } = useChainId();\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const readerAddress = getContract(chainId, \"Reader\");\n\n  const shouldShowPnl = false;\n\n  let checkSummedAccount = \"\";\n  if (ethers.utils.isAddress(account)) {\n    checkSummedAccount = ethers.utils.getAddress(account);\n  }\n  const pnlUrl = `${getServerBaseUrl(chainId)}/pnl?account=${checkSummedAccount}`;\n  const { data: pnlData } = useSWR([pnlUrl], {\n    fetcher: (...args) => fetch(...args).then((res) => res.json()),\n  });\n\n  const tokens = getTokens(chainId);\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const positionQuery = getPositionQuery(whitelistedTokens, nativeTokenAddress);\n\n  const whitelistedTokenAddresses = whitelistedTokens.map((token) => token.address);\n  const tokenAddresses = tokens.map((token) => token.address);\n  const { data: tokenBalances } = useSWR([active, chainId, readerAddress, \"getTokenBalances\", account], {\n    fetcher: contractFetcher(library, Reader, [tokenAddresses]),\n  });\n\n  const { data: positionData } = useSWR([active, chainId, readerAddress, \"getPositions\", vaultAddress, account], {\n    fetcher: contractFetcher(library, Reader, [\n      positionQuery.collateralTokens,\n      positionQuery.indexTokens,\n      positionQuery.isLong,\n    ]),\n  });\n\n  const { data: fundingRateInfo } = useSWR([active, chainId, readerAddress, \"getFundingRates\"], {\n    fetcher: contractFetcher(library, Reader, [vaultAddress, nativeTokenAddress, whitelistedTokenAddresses]),\n  });\n\n  const { infoTokens } = useInfoTokens(library, chainId, active, tokenBalances, fundingRateInfo);\n  const { positions, positionsMap } = getPositions(\n    chainId,\n    positionQuery,\n    positionData,\n    infoTokens,\n    savedIsPnlInLeverage,\n    savedShowPnlAfterFees,\n    checkSummedAccount,\n    undefined,\n    undefined\n  );\n\n  const flagOrdersEnabled = true;\n  const [orders, updateOrders] = useAccountOrders(flagOrdersEnabled, checkSummedAccount);\n\n  return (\n    <div className=\"Actions\">\n      {checkSummedAccount.length > 0 && (\n        <div className=\"Actions-section\">\n          <Trans>Account</Trans>: {checkSummedAccount}\n        </div>\n      )}\n      {shouldShowPnl && (\n        <div className=\"Actions-section\">\n          <div className=\"Actions-title\">\n            <Trans>PnL</Trans>\n          </div>\n          {(!pnlData || pnlData.length === 0) && (\n            <div>\n              <Trans>No PnLs found</Trans>\n            </div>\n          )}\n          {pnlData &&\n            pnlData.length > 0 &&\n            pnlData.map((pnlRow, index) => {\n              const token = getToken(chainId, pnlRow.data.indexToken);\n              return (\n                <div className=\"TradeHistory-row App-box App-box-border\" key={index}>\n                  <div>\n                    {token.symbol} {pnlRow.data.isLong ? t`Long` : t`Short`} <Trans>Profit</Trans>:{\" \"}\n                    {formatAmount(pnlRow.data.profit, USD_DECIMALS, 2, true)} USD\n                  </div>\n                  <div>\n                    {token.symbol} {pnlRow.data.isLong ? t`Long` : t`Short`} <Trans>Loss</Trans>:{\" \"}\n                    {formatAmount(pnlRow.data.loss, USD_DECIMALS, 2, true)} USD\n                  </div>\n                </div>\n              );\n            })}\n        </div>\n      )}\n      {checkSummedAccount.length > 0 && (\n        <div className=\"Actions-section\">\n          <div className=\"Actions-title\">\n            <Trans>Positions</Trans>\n          </div>\n          <PositionsList\n            positions={positions}\n            positionsMap={positionsMap}\n            infoTokens={infoTokens}\n            active={active}\n            orders={orders}\n            account={checkSummedAccount}\n            library={library}\n            flagOrdersEnabled={false}\n            chainId={chainId}\n            nativeTokenAddress={nativeTokenAddress}\n            savedIsPnlInLeverage={savedIsPnlInLeverage}\n            showPnlAfterFees={savedShowPnlAfterFees}\n            hideActions\n          />\n        </div>\n      )}\n      {flagOrdersEnabled && checkSummedAccount.length > 0 && (\n        <div className=\"Actions-section\">\n          <div className=\"Actions-title\">\n            <Trans>Orders</Trans>\n          </div>\n          <OrdersList\n            account={checkSummedAccount}\n            infoTokens={infoTokens}\n            positionsMap={positionsMap}\n            chainId={chainId}\n            orders={orders}\n            updateOrders={updateOrders}\n            hideActions\n          />\n        </div>\n      )}\n      <div className=\"Actions-section\">\n        <div className=\"Actions-title\">\n          <Trans>Actions</Trans>\n        </div>\n        <TradeHistory\n          account={checkSummedAccount}\n          infoTokens={infoTokens}\n          getTokenInfo={getTokenInfo}\n          chainId={chainId}\n          nativeTokenAddress={nativeTokenAddress}\n          shouldShowPaginationButtons={true}\n        />\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\nimport { useWeb3React } from \"@web3-react/core\";\n\nimport { getContract } from \"config/contracts\";\n\nimport Modal from \"components/Modal/Modal\";\nimport Footer from \"components/Footer/Footer\";\n\nimport Token from \"abis/Token.json\";\nimport Vester from \"abis/Vester.json\";\nimport RewardTracker from \"abis/RewardTracker.json\";\nimport RewardRouter from \"abis/RewardRouter.json\";\n\nimport { FaCheck, FaTimes } from \"react-icons/fa\";\n\nimport { Trans, t } from \"@lingui/macro\";\n\nimport \"./BeginAccountTransfer.css\";\nimport { callContract, contractFetcher } from \"lib/contracts\";\nimport { approveTokens } from \"domain/tokens\";\nimport { useChainId } from \"lib/chains\";\nimport Button from \"components/Button/Button\";\n\nfunction ValidationRow({ isValid, children }) {\n  return (\n    <div className=\"ValidationRow\">\n      <div className=\"ValidationRow-icon-container\">\n        {isValid && <FaCheck className=\"ValidationRow-icon\" />}\n        {!isValid && <FaTimes className=\"ValidationRow-icon\" />}\n      </div>\n      <div>{children}</div>\n    </div>\n  );\n}\n\nexport default function BeginAccountTransfer(props) {\n  const { setPendingTxns } = props;\n  const { active, library, account } = useWeb3React();\n  const { chainId } = useChainId();\n\n  const [receiver, setReceiver] = useState(\"\");\n  const [isTransferring, setIsTransferring] = useState(false);\n  const [isApproving, setIsApproving] = useState(false);\n  const [isTransferSubmittedModalVisible, setIsTransferSubmittedModalVisible] = useState(false);\n  let parsedReceiver = ethers.constants.AddressZero;\n  if (ethers.utils.isAddress(receiver)) {\n    parsedReceiver = receiver;\n  }\n\n  const gmxAddress = getContract(chainId, \"GMX\");\n  const gmxVesterAddress = getContract(chainId, \"GmxVester\");\n  const glpVesterAddress = getContract(chainId, \"GlpVester\");\n\n  const rewardRouterAddress = getContract(chainId, \"RewardRouter\");\n\n  const { data: gmxVesterBalance } = useSWR(active && [active, chainId, gmxVesterAddress, \"balanceOf\", account], {\n    fetcher: contractFetcher(library, Token),\n  });\n\n  const { data: glpVesterBalance } = useSWR(active && [active, chainId, glpVesterAddress, \"balanceOf\", account], {\n    fetcher: contractFetcher(library, Token),\n  });\n\n  const stakedGmxTrackerAddress = getContract(chainId, \"StakedGmxTracker\");\n  const { data: cumulativeGmxRewards } = useSWR(\n    [active, chainId, stakedGmxTrackerAddress, \"cumulativeRewards\", parsedReceiver],\n    {\n      fetcher: contractFetcher(library, RewardTracker),\n    }\n  );\n\n  const stakedGlpTrackerAddress = getContract(chainId, \"StakedGlpTracker\");\n  const { data: cumulativeGlpRewards } = useSWR(\n    [active, chainId, stakedGlpTrackerAddress, \"cumulativeRewards\", parsedReceiver],\n    {\n      fetcher: contractFetcher(library, RewardTracker),\n    }\n  );\n\n  const { data: transferredCumulativeGmxRewards } = useSWR(\n    [active, chainId, gmxVesterAddress, \"transferredCumulativeRewards\", parsedReceiver],\n    {\n      fetcher: contractFetcher(library, Vester),\n    }\n  );\n\n  const { data: transferredCumulativeGlpRewards } = useSWR(\n    [active, chainId, glpVesterAddress, \"transferredCumulativeRewards\", parsedReceiver],\n    {\n      fetcher: contractFetcher(library, Vester),\n    }\n  );\n\n  const { data: pendingReceiver } = useSWR(\n    active && [active, chainId, rewardRouterAddress, \"pendingReceivers\", account],\n    {\n      fetcher: contractFetcher(library, RewardRouter),\n    }\n  );\n\n  const { data: gmxAllowance } = useSWR(\n    active && [active, chainId, gmxAddress, \"allowance\", account, stakedGmxTrackerAddress],\n    {\n      fetcher: contractFetcher(library, Token),\n    }\n  );\n\n  const { data: gmxStaked } = useSWR(\n    active && [active, chainId, stakedGmxTrackerAddress, \"depositBalances\", account, gmxAddress],\n    {\n      fetcher: contractFetcher(library, RewardTracker),\n    }\n  );\n\n  const needApproval = gmxAllowance && gmxStaked && gmxStaked.gt(gmxAllowance);\n\n  const hasVestedGmx = gmxVesterBalance && gmxVesterBalance.gt(0);\n  const hasVestedGlp = glpVesterBalance && glpVesterBalance.gt(0);\n  const hasStakedGmx =\n    (cumulativeGmxRewards && cumulativeGmxRewards.gt(0)) ||\n    (transferredCumulativeGmxRewards && transferredCumulativeGmxRewards.gt(0));\n  const hasStakedGlp =\n    (cumulativeGlpRewards && cumulativeGlpRewards.gt(0)) ||\n    (transferredCumulativeGlpRewards && transferredCumulativeGlpRewards.gt(0));\n  const hasPendingReceiver = pendingReceiver && pendingReceiver !== ethers.constants.AddressZero;\n\n  const getError = () => {\n    if (!account) {\n      return t`Wallet is not connected`;\n    }\n    if (hasVestedGmx) {\n      return t`Vested GMX not withdrawn`;\n    }\n    if (hasVestedGlp) {\n      return t`Vested GLP not withdrawn`;\n    }\n    if (!receiver || receiver.length === 0) {\n      return t`Enter Receiver Address`;\n    }\n    if (!ethers.utils.isAddress(receiver)) {\n      return t`Invalid Receiver Address`;\n    }\n    if (hasStakedGmx || hasStakedGlp) {\n      return t`Invalid Receiver`;\n    }\n    if ((parsedReceiver || \"\").toString().toLowerCase() === (account || \"\").toString().toLowerCase()) {\n      return t`Self-transfer not supported`;\n    }\n\n    if (\n      (parsedReceiver || \"\").length > 0 &&\n      (parsedReceiver || \"\").toString().toLowerCase() === (pendingReceiver || \"\").toString().toLowerCase()\n    ) {\n      return t`Transfer already initiated`;\n    }\n  };\n\n  const isPrimaryEnabled = () => {\n    const error = getError();\n    if (error) {\n      return false;\n    }\n    if (isApproving) {\n      return false;\n    }\n    if (isTransferring) {\n      return false;\n    }\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    const error = getError();\n    if (error) {\n      return error;\n    }\n    if (needApproval) {\n      return t`Approve GMX`;\n    }\n    if (isApproving) {\n      return t`Approving...`;\n    }\n    if (isTransferring) {\n      return t`Transferring`;\n    }\n\n    return t`Begin Transfer`;\n  };\n\n  const onClickPrimary = () => {\n    if (needApproval) {\n      approveTokens({\n        setIsApproving,\n        library,\n        tokenAddress: gmxAddress,\n        spender: stakedGmxTrackerAddress,\n        chainId,\n      });\n      return;\n    }\n\n    setIsTransferring(true);\n    const contract = new ethers.Contract(rewardRouterAddress, RewardRouter.abi, library.getSigner());\n\n    callContract(chainId, contract, \"signalTransfer\", [parsedReceiver], {\n      sentMsg: t`Transfer submitted!`,\n      failMsg: t`Transfer failed.`,\n      setPendingTxns,\n    })\n      .then(async (res) => {\n        setIsTransferSubmittedModalVisible(true);\n      })\n      .finally(() => {\n        setIsTransferring(false);\n      });\n  };\n\n  const completeTransferLink = `/complete_account_transfer/${account}/${parsedReceiver}`;\n  const pendingTransferLink = `/complete_account_transfer/${account}/${pendingReceiver}`;\n\n  return (\n    <div className=\"BeginAccountTransfer Page page-layout\">\n      <Modal\n        isVisible={isTransferSubmittedModalVisible}\n        setIsVisible={setIsTransferSubmittedModalVisible}\n        label={t`Transfer Submitted`}\n      >\n        <Trans>Your transfer has been initiated.</Trans>\n        <br />\n        <br />\n        <Link className=\"App-cta\" to={completeTransferLink}>\n          <Trans>Continue</Trans>\n        </Link>\n      </Modal>\n      <div className=\"Page-title-section\">\n        <div className=\"Page-title\">\n          <Trans>Transfer Account</Trans>\n        </div>\n        <div className=\"Page-description\">\n          <Trans>\n            Please only use this for full account transfers.\n            <br />\n            This will transfer all your GMX, esGMX, GLP and Multiplier Points to your new account.\n            <br />\n            Transfers are only supported if the receiving account has not staked GMX or GLP tokens before.\n            <br />\n            Transfers are one-way, you will not be able to transfer staked tokens back to the sending account.\n          </Trans>\n        </div>\n        {hasPendingReceiver && (\n          <div className=\"Page-description\">\n            <Trans>\n              You have a <Link to={pendingTransferLink}>pending transfer</Link> to {pendingReceiver}.\n            </Trans>\n          </div>\n        )}\n      </div>\n      <div className=\"Page-content\">\n        <div className=\"input-form\">\n          <div className=\"input-row\">\n            <label className=\"input-label\">\n              <Trans>Receiver Address</Trans>\n            </label>\n            <div>\n              <input\n                type=\"text\"\n                value={receiver}\n                onChange={(e) => setReceiver(e.target.value)}\n                className=\"text-input\"\n              />\n            </div>\n          </div>\n          <div className=\"BeginAccountTransfer-validations\">\n            <ValidationRow isValid={!hasVestedGmx}>\n              <Trans>Sender has withdrawn all tokens from GMX Vesting Vault</Trans>\n            </ValidationRow>\n            <ValidationRow isValid={!hasVestedGlp}>\n              <Trans>Sender has withdrawn all tokens from GLP Vesting Vault</Trans>\n            </ValidationRow>\n            <ValidationRow isValid={!hasStakedGmx}>\n              <Trans>Receiver has not staked GMX tokens before</Trans>\n            </ValidationRow>\n            <ValidationRow isValid={!hasStakedGlp}>\n              <Trans>Receiver has not staked GLP tokens before</Trans>\n            </ValidationRow>\n          </div>\n          <div className=\"input-row\">\n            <Button\n              variant=\"primary-action\"\n              className=\"w-100\"\n              disabled={!isPrimaryEnabled()}\n              onClick={() => onClickPrimary()}\n            >\n              {getPrimaryText()}\n            </Button>\n          </div>\n        </div>\n      </div>\n      <Footer />\n    </div>\n  );\n}\n","import { ARBITRUM, ARBITRUM_TESTNET, AVALANCHE, AVALANCHE_FUJI } from \"config/chains\";\nimport arbitrum from \"img/ic_arbitrum_24.svg\";\nimport avalanche from \"img/ic_avalanche_24.svg\";\nimport avalancheTestnet from \"img/ic_avalanche_testnet_24.svg\";\n\nimport gmxIcon from \"img/ic_gmx_40.svg\";\nimport gmxOutlineIcon from \"img/ic_gmxv1flat.svg\";\nimport glpIcon from \"img/ic_glp_40.svg\";\nimport gmIcon from \"img/gm_icon.svg\";\nimport gmArbitrum from \"img/ic_gm_arbitrum.svg\";\nimport gmAvax from \"img/ic_gm_avax.svg\";\nimport gmxArbitrum from \"img/ic_gmx_arbitrum.svg\";\nimport gmxAvax from \"img/ic_gmx_avax.svg\";\nimport glpArbitrum from \"img/ic_glp_arbitrum.svg\";\nimport glpAvax from \"img/ic_glp_avax.svg\";\n\nconst ICONS = {\n  [ARBITRUM]: {\n    network: arbitrum,\n    gmx: gmxArbitrum,\n    glp: glpArbitrum,\n    gm: gmArbitrum,\n  },\n  [AVALANCHE]: {\n    network: avalanche,\n    gmx: gmxAvax,\n    glp: glpAvax,\n    gm: gmAvax,\n  },\n  [ARBITRUM_TESTNET]: {\n    network: arbitrum,\n    gm: gmArbitrum,\n  },\n  [AVALANCHE_FUJI]: {\n    network: avalancheTestnet,\n    gm: gmAvax,\n    gmx: gmxAvax,\n    glp: glpAvax,\n  },\n  common: {\n    gmx: gmxIcon,\n    gmxOutline: gmxOutlineIcon,\n    glp: glpIcon,\n    gm: gmIcon,\n  },\n};\n\nexport function getIcon(chainId: number | \"common\", label: string) {\n  if (chainId in ICONS) {\n    if (label in ICONS[chainId]) {\n      return ICONS[chainId][label];\n    }\n  }\n}\nexport function getIcons(chainId: number | \"common\") {\n  if (!chainId) return;\n  if (chainId in ICONS) {\n    return ICONS[chainId];\n  }\n}\n","import React from \"react\";\n\nimport useSWR from \"swr\";\n\nimport {\n  PLACEHOLDER_ACCOUNT,\n  getBalanceAndSupplyData,\n  getDepositBalanceData,\n  getVestingData,\n  getStakingData,\n  getProcessedData,\n} from \"lib/legacy\";\n\nimport Vault from \"abis/Vault.json\";\nimport ReaderV2 from \"abis/ReaderV2.json\";\nimport RewardReader from \"abis/RewardReader.json\";\nimport Token from \"abis/Token.json\";\nimport GlpManager from \"abis/GlpManager.json\";\n\nimport { useWeb3React } from \"@web3-react/core\";\n\nimport { useGmxPrice } from \"domain/legacy\";\n\nimport { getContract } from \"config/contracts\";\nimport { getServerUrl } from \"config/backend\";\nimport { contractFetcher } from \"lib/contracts\";\nimport { formatKeyAmount } from \"lib/numbers\";\n\nexport default function APRLabel({ chainId, label }) {\n  let { active } = useWeb3React();\n\n  const rewardReaderAddress = getContract(chainId, \"RewardReader\");\n  const readerAddress = getContract(chainId, \"Reader\");\n\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n  const gmxAddress = getContract(chainId, \"GMX\");\n  const esGmxAddress = getContract(chainId, \"ES_GMX\");\n  const bnGmxAddress = getContract(chainId, \"BN_GMX\");\n  const glpAddress = getContract(chainId, \"GLP\");\n\n  const stakedGmxTrackerAddress = getContract(chainId, \"StakedGmxTracker\");\n  const bonusGmxTrackerAddress = getContract(chainId, \"BonusGmxTracker\");\n  const feeGmxTrackerAddress = getContract(chainId, \"FeeGmxTracker\");\n\n  const stakedGlpTrackerAddress = getContract(chainId, \"StakedGlpTracker\");\n  const feeGlpTrackerAddress = getContract(chainId, \"FeeGlpTracker\");\n\n  const glpManagerAddress = getContract(chainId, \"GlpManager\");\n\n  const gmxVesterAddress = getContract(chainId, \"GmxVester\");\n  const glpVesterAddress = getContract(chainId, \"GlpVester\");\n\n  const vesterAddresses = [gmxVesterAddress, glpVesterAddress];\n\n  const walletTokens = [gmxAddress, esGmxAddress, glpAddress, stakedGmxTrackerAddress];\n  const depositTokens = [\n    gmxAddress,\n    esGmxAddress,\n    stakedGmxTrackerAddress,\n    bonusGmxTrackerAddress,\n    bnGmxAddress,\n    glpAddress,\n  ];\n  const rewardTrackersForDepositBalances = [\n    stakedGmxTrackerAddress,\n    stakedGmxTrackerAddress,\n    bonusGmxTrackerAddress,\n    feeGmxTrackerAddress,\n    feeGmxTrackerAddress,\n    feeGlpTrackerAddress,\n  ];\n  const rewardTrackersForStakingInfo = [\n    stakedGmxTrackerAddress,\n    bonusGmxTrackerAddress,\n    feeGmxTrackerAddress,\n    stakedGlpTrackerAddress,\n    feeGlpTrackerAddress,\n  ];\n\n  const { data: walletBalances } = useSWR(\n    [`StakeV2:walletBalances:${active}`, chainId, readerAddress, \"getTokenBalancesWithSupplies\", PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: contractFetcher(undefined, ReaderV2, [walletTokens]),\n    }\n  );\n\n  const { data: depositBalances } = useSWR(\n    [`StakeV2:depositBalances:${active}`, chainId, rewardReaderAddress, \"getDepositBalances\", PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: contractFetcher(undefined, RewardReader, [depositTokens, rewardTrackersForDepositBalances]),\n    }\n  );\n\n  const { data: stakingInfo } = useSWR(\n    [`StakeV2:stakingInfo:${active}`, chainId, rewardReaderAddress, \"getStakingInfo\", PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: contractFetcher(undefined, RewardReader, [rewardTrackersForStakingInfo]),\n    }\n  );\n\n  const { data: stakedGmxSupply } = useSWR(\n    [`StakeV2:stakedGmxSupply:${active}`, chainId, gmxAddress, \"balanceOf\", stakedGmxTrackerAddress],\n    {\n      fetcher: contractFetcher(undefined, Token),\n    }\n  );\n\n  const { data: aums } = useSWR([`StakeV2:getAums:${active}`, chainId, glpManagerAddress, \"getAums\"], {\n    fetcher: contractFetcher(undefined, GlpManager),\n  });\n\n  const { data: nativeTokenPrice } = useSWR(\n    [`StakeV2:nativeTokenPrice:${active}`, chainId, vaultAddress, \"getMinPrice\", nativeTokenAddress],\n    {\n      fetcher: contractFetcher(undefined, Vault),\n    }\n  );\n\n  const { data: vestingInfo } = useSWR(\n    [`StakeV2:vestingInfo:${active}`, chainId, readerAddress, \"getVestingInfo\", PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: contractFetcher(undefined, ReaderV2, [vesterAddresses]),\n    }\n  );\n\n  const { gmxPrice } = useGmxPrice(chainId, {}, active);\n\n  const gmxSupplyUrl = getServerUrl(chainId, \"/gmx_supply\");\n  const { data: gmxSupply } = useSWR([gmxSupplyUrl], {\n    fetcher: (...args) => fetch(...args).then((res) => res.text()),\n  });\n\n  let aum;\n  if (aums && aums.length > 0) {\n    aum = aums[0].add(aums[1]).div(2);\n  }\n\n  const { balanceData, supplyData } = getBalanceAndSupplyData(walletBalances);\n  const depositBalanceData = getDepositBalanceData(depositBalances);\n  const stakingData = getStakingData(stakingInfo);\n  const vestingData = getVestingData(vestingInfo);\n\n  const processedData = getProcessedData(\n    balanceData,\n    supplyData,\n    depositBalanceData,\n    stakingData,\n    vestingData,\n    aum,\n    nativeTokenPrice,\n    stakedGmxSupply,\n    gmxPrice,\n    gmxSupply\n  );\n\n  return <>{`${formatKeyAmount(processedData, label, 2, 2, true)}%`}</>;\n}\n","import React, { MouseEventHandler, ReactNode } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport cx from \"classnames\";\nimport { getAppBaseUrl, getHomeUrl } from \"lib/legacy\";\n\nimport \"./Header.css\";\nimport { isHomeSite, shouldShowRedirectModal } from \"lib/legacy\";\n\ntype Props = {\n  isHome?: boolean;\n  isHomeLink?: boolean;\n  className?: string;\n  exact?: boolean;\n  to: string;\n  shouldShowRedirectModal?: boolean;\n  showRedirectModal: (to: string) => void;\n  redirectPopupTimestamp: number;\n  onClick?: MouseEventHandler<HTMLDivElement | HTMLAnchorElement>;\n  children?: ReactNode;\n};\n\nexport function HeaderLink({\n  isHomeLink,\n  className,\n  exact,\n  to,\n  children,\n  redirectPopupTimestamp,\n  showRedirectModal,\n  onClick,\n}: Props) {\n  const isOnHomePage = window.location.pathname === \"/\";\n  const isHome = isHomeSite();\n\n  if (isHome && !(isHomeLink && !isOnHomePage)) {\n    if (shouldShowRedirectModal(redirectPopupTimestamp)) {\n      return (\n        <div\n          className={cx(\"a\", className, { active: isHomeLink })}\n          onClick={(e) => {\n            if (onClick) {\n              onClick(e);\n            }\n            showRedirectModal(to);\n          }}\n        >\n          {children}\n        </div>\n      );\n    } else {\n      const baseUrl = getAppBaseUrl();\n      return (\n        <a className={cx(\"a\", className, { active: isHomeLink })} href={baseUrl + to} onClick={onClick}>\n          {children}\n        </a>\n      );\n    }\n  }\n\n  if (isHomeLink) {\n    return (\n      <a href={getHomeUrl()} className={cx(className)} onClick={onClick}>\n        {children}\n      </a>\n    );\n  }\n\n  return (\n    <NavLink activeClassName=\"active\" className={cx(className)} exact={exact} to={to} onClick={onClick}>\n      {children}\n    </NavLink>\n  );\n}\n","import { ethers } from \"ethers\";\n\nexport function hashData(dataTypes, dataValues) {\n  const bytes = ethers.utils.defaultAbiCoder.encode(dataTypes, dataValues);\n  const hash = ethers.utils.keccak256(ethers.utils.arrayify(bytes));\n\n  return hash;\n}\n\nexport function hashString(string: string) {\n  return hashData([\"string\"], [string]);\n}\n","import { BigNumber } from \"ethers\";\nimport { hashString, hashData } from \"lib/hash\";\n\nexport const POSITION_IMPACT_FACTOR_KEY = hashString(\"POSITION_IMPACT_FACTOR\");\nexport const MAX_POSITION_IMPACT_FACTOR_KEY = hashString(\"MAX_POSITION_IMPACT_FACTOR\");\nexport const POSITION_IMPACT_EXPONENT_FACTOR_KEY = hashString(\"POSITION_IMPACT_EXPONENT_FACTOR\");\nexport const POSITION_FEE_FACTOR_KEY = hashString(\"POSITION_FEE_FACTOR\");\nexport const SWAP_IMPACT_FACTOR_KEY = hashString(\"SWAP_IMPACT_FACTOR\");\nexport const SWAP_IMPACT_EXPONENT_FACTOR_KEY = hashString(\"SWAP_IMPACT_EXPONENT_FACTOR\");\nexport const SWAP_FEE_FACTOR_KEY = hashString(\"SWAP_FEE_FACTOR\");\nexport const FEE_RECEIVER_DEPOSIT_FACTOR_KEY = hashString(\"FEE_RECEIVER_DEPOSIT_FACTOR\");\nexport const BORROWING_FEE_RECEIVER_FACTOR_KEY = hashString(\"BORROWING_FEE_RECEIVER_FACTOR\");\nexport const FEE_RECEIVER_WITHDRAWAL_FACTOR_KEY = hashString(\"FEE_RECEIVER_WITHDRAWAL_FACTOR\");\nexport const FEE_RECEIVER_SWAP_FACTOR_KEY = hashString(\"FEE_RECEIVER_SWAP_FACTOR\");\nexport const FEE_RECEIVER_POSITION_FACTOR_KEY = hashString(\"FEE_RECEIVER_POSITION_FACTOR\");\nexport const OPEN_INTEREST_KEY = hashString(\"OPEN_INTEREST\");\nexport const OPEN_INTEREST_IN_TOKENS_KEY = hashString(\"OPEN_INTEREST_IN_TOKENS\");\nexport const POOL_AMOUNT_KEY = hashString(\"POOL_AMOUNT\");\nexport const RESERVE_FACTOR_KEY = hashString(\"RESERVE_FACTOR\");\nexport const NONCE_KEY = hashString(\"NONCE\");\nexport const BORROWING_FACTOR_KEY = hashString(\"BORROWING_FACTOR\");\nexport const CUMULATIVE_BORROWING_FACTOR_KEY = hashString(\"CUMULATIVE_BORROWING_FACTOR\");\nexport const TOTAL_BORROWING_KEY = hashString(\"TOTAL_BORROWING\");\nexport const MAX_PNL_FACTOR_KEY = hashString(\"MAX_PNL_FACTOR\");\nexport const MAX_PNL_FACTOR_FOR_WITHDRAWALS_KEY = hashString(\"MAX_PNL_FACTOR_FOR_WITHDRAWALS\");\nexport const MAX_PNL_FACTOR_FOR_DEPOSITS_KEY = hashString(\"MAX_PNL_FACTOR_FOR_DEPOSITS\");\nexport const MAX_PNL_FACTOR_FOR_TRADERS_KEY = hashString(\"MAX_PNL_FACTOR_FOR_TRADERS\");\nexport const MAX_POSITION_IMPACT_FACTOR_FOR_LIQUIDATIONS_KEY = hashString(\n  \"MAX_POSITION_IMPACT_FACTOR_FOR_LIQUIDATIONS\"\n);\nexport const POSITION_IMPACT_POOL_AMOUNT_KEY = hashString(\"POSITION_IMPACT_POOL_AMOUNT\");\nexport const SWAP_IMPACT_POOL_AMOUNT_KEY = hashString(\"SWAP_IMPACT_POOL_AMOUNT\");\nexport const MIN_COLLATERAL_USD_KEY = hashString(\"MIN_COLLATERAL_USD\");\nexport const MIN_COLLATERAL_FACTOR_KEY = hashString(\"MIN_COLLATERAL_FACTOR\");\nexport const MAX_LEVERAGE_KEY = hashString(\"MAX_LEVERAGE\");\nexport const DEPOSIT_GAS_LIMIT_KEY = hashString(\"DEPOSIT_GAS_LIMIT\");\nexport const WITHDRAWAL_GAS_LIMIT_KEY = hashString(\"WITHDRAWAL_GAS_LIMIT\");\nexport const INCREASE_ORDER_GAS_LIMIT_KEY = hashString(\"INCREASE_ORDER_GAS_LIMIT\");\nexport const DECREASE_ORDER_GAS_LIMIT_KEY = hashString(\"DECREASE_ORDER_GAS_LIMIT\");\nexport const SWAP_ORDER_GAS_LIMIT_KEY = hashString(\"SWAP_ORDER_GAS_LIMIT\");\nexport const SINGLE_SWAP_GAS_LIMIT_KEY = hashString(\"SINGLE_SWAP_GAS_LIMIT\");\nexport const TOKEN_TRANSFER_GAS_LIMIT_KEY = hashString(\"TOKEN_TRANSFER_GAS_LIMIT\");\nexport const NATIVE_TOKEN_TRANSFER_GAS_LIMIT_KEY = hashString(\"NATIVE_TOKEN_TRANSFER_GAS_LIMIT\");\nexport const ESTIMATED_GAS_FEE_BASE_AMOUNT = hashString(\"ESTIMATED_GAS_FEE_BASE_AMOUNT\");\nexport const ESTIMATED_GAS_FEE_MULTIPLIER_FACTOR = hashString(\"ESTIMATED_GAS_FEE_MULTIPLIER_FACTOR\");\nexport const MARKET_LIST_KEY = hashString(\"MARKET_LIST\");\nexport const POSITION_LIST_KEY = hashString(\"POSITION_LIST\");\nexport const ACCOUNT_POSITION_LIST_KEY = hashString(\"ACCOUNT_POSITION_LIST\");\nexport const ORDER_LIST_KEY = hashString(\"ORDER_LIST\");\nexport const ACCOUNT_ORDER_LIST_KEY = hashString(\"ACCOUNT_ORDER_LIST\");\nexport const CLAIMABLE_FUNDING_AMOUNT = hashString(\"CLAIMABLE_FUNDING_AMOUNT\");\nexport const VIRTUAL_TOKEN_ID_KEY = hashString(\"VIRTUAL_TOKEN_ID\");\nexport const VIRTUAL_MARKET_ID_KEY = hashString(\"VIRTUAL_MARKET_ID\");\nexport const VIRTUAL_INVENTORY_FOR_POSITIONS_KEY = hashString(\"VIRTUAL_INVENTORY_FOR_POSITIONS\");\nexport const VIRTUAL_INVENTORY_FOR_SWAPS_KEY = hashString(\"VIRTUAL_INVENTORY_FOR_SWAPS\");\nexport const POOL_AMOUNT_ADJUSTMENT_KEY = hashString(\"POOL_AMOUNT_ADJUSTMENT\");\n\nexport function positionImpactFactorKey(market: string, isPositive: boolean) {\n  return hashData([\"bytes32\", \"address\", \"bool\"], [POSITION_IMPACT_FACTOR_KEY, market, isPositive]);\n}\n\nexport function positionImpactExponentFactorKey(market: string) {\n  return hashData([\"bytes32\", \"address\"], [POSITION_IMPACT_EXPONENT_FACTOR_KEY, market]);\n}\n\nexport function maxPositionImpactFactorKey(market: string, isPositive: boolean) {\n  return hashData([\"bytes32\", \"address\", \"bool\"], [MAX_POSITION_IMPACT_FACTOR_KEY, market, isPositive]);\n}\n\nexport function positionFeeFactorKey(market: string) {\n  return hashData([\"bytes32\", \"address\"], [POSITION_FEE_FACTOR_KEY, market]);\n}\n\nexport function swapImpactFactorKey(market: string, isPositive: boolean) {\n  return hashData([\"bytes32\", \"address\", \"bool\"], [SWAP_IMPACT_FACTOR_KEY, market, isPositive]);\n}\n\nexport function swapImpactExponentFactorKey(market: string) {\n  return hashData([\"bytes32\", \"address\"], [SWAP_IMPACT_EXPONENT_FACTOR_KEY, market]);\n}\n\nexport function swapFeeFactorKey(market: string) {\n  return hashData([\"bytes32\", \"address\"], [SWAP_FEE_FACTOR_KEY, market]);\n}\n\nexport function openInterestKey(market: string, collateralToken: string, isLong: boolean) {\n  return hashData([\"bytes32\", \"address\", \"address\", \"bool\"], [OPEN_INTEREST_KEY, market, collateralToken, isLong]);\n}\n\nexport function openInterestInTokensKey(market: string, collateralToken: string, isLong: boolean) {\n  return hashData(\n    [\"bytes32\", \"address\", \"address\", \"bool\"],\n    [OPEN_INTEREST_IN_TOKENS_KEY, market, collateralToken, isLong]\n  );\n}\n\nexport function poolAmountKey(market: string, token: string) {\n  return hashData([\"bytes32\", \"address\", \"address\"], [POOL_AMOUNT_KEY, market, token]);\n}\n\nexport function reserveFactorKey(market: string, isLong: boolean) {\n  return hashData([\"bytes32\", \"address\", \"bool\"], [RESERVE_FACTOR_KEY, market, isLong]);\n}\n\nexport function borrowingFactorKey(market: string, isLong: boolean) {\n  return hashData([\"bytes32\", \"address\", \"bool\"], [BORROWING_FACTOR_KEY, market, isLong]);\n}\n\nexport function cumulativeBorrowingFactorKey(market: string, isLong: boolean) {\n  return hashData([\"bytes32\", \"address\", \"bool\"], [CUMULATIVE_BORROWING_FACTOR_KEY, market, isLong]);\n}\n\nexport function totalBorrowingKey(market: string, isLong: boolean) {\n  return hashData([\"bytes32\", \"address\", \"bool\"], [TOTAL_BORROWING_KEY, market, isLong]);\n}\n\nexport function maxPnlFactorKey(pnlFactorType: string, market: string, isLong: boolean) {\n  return hashData([\"bytes32\", \"bytes32\", \"address\", \"bool\"], [MAX_PNL_FACTOR_KEY, pnlFactorType, market, isLong]);\n}\n\nexport function positionImpactPoolAmountKey(market: string) {\n  return hashData([\"bytes32\", \"address\"], [POSITION_IMPACT_POOL_AMOUNT_KEY, market]);\n}\n\nexport function maxPositionImpactFactorForLiquidationsKey(market: string) {\n  return hashData([\"bytes32\", \"address\"], [MAX_POSITION_IMPACT_FACTOR_FOR_LIQUIDATIONS_KEY, market]);\n}\n\nexport function swapImpactPoolAmountKey(market: string, token: string) {\n  return hashData([\"bytes32\", \"address\", \"address\"], [SWAP_IMPACT_POOL_AMOUNT_KEY, market, token]);\n}\n\nexport function orderKey(dataStoreAddress: string, nonce: BigNumber) {\n  return hashData([\"address\", \"uint256\"], [dataStoreAddress, nonce]);\n}\n\nexport function depositGasLimitKey(singleToken: boolean) {\n  return hashData([\"bytes32\", \"bool\"], [DEPOSIT_GAS_LIMIT_KEY, singleToken]);\n}\n\nexport function withdrawalGasLimitKey(singleToken: boolean) {\n  return hashData([\"bytes32\", \"bool\"], [WITHDRAWAL_GAS_LIMIT_KEY, singleToken]);\n}\n\nexport function singleSwapGasLimitKey() {\n  return hashData([\"bytes32\"], [SINGLE_SWAP_GAS_LIMIT_KEY]);\n}\n\nexport function increaseOrderGasLimitKey() {\n  return hashData([\"bytes32\"], [INCREASE_ORDER_GAS_LIMIT_KEY]);\n}\n\nexport function decreaseOrderGasLimitKey() {\n  return hashData([\"bytes32\"], [DECREASE_ORDER_GAS_LIMIT_KEY]);\n}\n\nexport function swapOrderGasLimitKey() {\n  return hashData([\"bytes32\"], [SWAP_ORDER_GAS_LIMIT_KEY]);\n}\n\nexport function accountOrderListKey(account: string) {\n  return hashData([\"bytes32\", \"address\"], [ACCOUNT_ORDER_LIST_KEY, account]);\n}\n\nexport function accountPositionListKey(account: string) {\n  return hashData([\"bytes32\", \"address\"], [ACCOUNT_POSITION_LIST_KEY, account]);\n}\n\nexport function minCollateralFactorKey(market: string) {\n  return hashData([\"bytes32\", \"address\"], [MIN_COLLATERAL_FACTOR_KEY, market]);\n}\n\nexport function hashedPositionKey(account: string, market: string, collateralToken: string, isLong: boolean) {\n  return hashData([\"address\", \"address\", \"address\", \"bool\"], [account, market, collateralToken, isLong]);\n}\n\nexport function claimableFundingAmountKey(market: string, token: string, account: string) {\n  return hashData([\"bytes32\", \"address\", \"address\", \"address\"], [CLAIMABLE_FUNDING_AMOUNT, market, token, account]);\n}\nexport function virtualTokenIdKey(token: string) {\n  return hashData([\"bytes32\", \"address\"], [VIRTUAL_TOKEN_ID_KEY, token]);\n}\n\nexport function virtualMarketIdKey(market: string) {\n  return hashData([\"bytes32\", \"address\"], [VIRTUAL_MARKET_ID_KEY, market]);\n}\n\nexport function virtualInventoryForSwapsKey(virtualMarketId: string, token: string) {\n  return hashData([\"bytes32\", \"bytes32\", \"address\"], [VIRTUAL_INVENTORY_FOR_SWAPS_KEY, virtualMarketId, token]);\n}\n\nexport function virtualInventoryForPositionsKey(virtualTokenId: string) {\n  return hashData([\"bytes32\", \"bytes32\"], [VIRTUAL_INVENTORY_FOR_POSITIONS_KEY, virtualTokenId]);\n}\n\nexport function poolAmountAdjustmentKey(market: string, token: string) {\n  return hashData([\"bytes32\", \"address\", \"address\"], [POOL_AMOUNT_ADJUSTMENT_KEY, market, token]);\n}\n","import { Web3Provider } from \"@ethersproject/providers\";\nimport { CHAIN_NAMES_MAP, getRpcUrl } from \"config/chains\";\nimport { ContractCallContext, Multicall } from \"ethereum-multicall\";\nimport { CallContext, ContractCallResults } from \"ethereum-multicall/dist/esm/models\";\nimport { ethers } from \"ethers\";\nimport { bigNumberify } from \"lib/numbers\";\nimport { getFallbackProvider } from \"lib/rpc\";\nimport { sleep } from \"lib/sleep\";\nimport { MulticallRequestConfig, MulticallResult } from \"./types\";\n\nexport const MAX_TIMEOUT = 2000;\n\nexport async function executeMulticall(\n  chainId: number,\n  library: Web3Provider | undefined,\n  request: MulticallRequestConfig<any>\n) {\n  // Try to use rpc provider of the connected wallet\n  let provider = library ? library.getSigner().provider : undefined;\n\n  // Wait for initialization to chech the network\n  await provider?.ready;\n\n  // If the wallet is not connected or the network does not match the chainId of the request, create a new rpc provider\n  if (!provider || provider.network?.chainId !== chainId) {\n    const rpcUrl = getRpcUrl(chainId);\n\n    provider = new ethers.providers.StaticJsonRpcProvider(rpcUrl, { chainId, name: CHAIN_NAMES_MAP[chainId] });\n  }\n\n  const multicall = getMulticallLib(provider);\n\n  const formattedReq = formatMulticallRequest(request);\n\n  const requestPromise = Promise.race([\n    multicall.call(formattedReq),\n    sleep(MAX_TIMEOUT).then(() => Promise.reject(\"rpc timeout\")),\n  ]).catch((e) => {\n    const fallbackProvider = getFallbackProvider(chainId);\n\n    if (!fallbackProvider) {\n      throw e;\n    }\n\n    // eslint-disable-next-line no-console\n    console.log(`using multicall fallback for chain ${chainId}`);\n\n    const multicall = getMulticallLib(fallbackProvider);\n\n    return multicall.call(formattedReq);\n  });\n\n  return requestPromise\n    .then((res) => formatMulticallResult(res.results))\n    .catch((e) => {\n      // eslint-disable-next-line no-console\n      console.error(\"multicall error\", e);\n\n      throw e;\n    });\n}\n\nfunction getMulticallLib(provider: ethers.providers.Provider) {\n  return new Multicall({\n    // @ts-ignore inconsistent provider types\n    ethersProvider: provider,\n    tryAggregate: false,\n  });\n}\n\nfunction formatMulticallRequest(requestConfig: MulticallRequestConfig<any>): ContractCallContext[] {\n  const result = Object.keys(requestConfig).reduce((contracts, contractField) => {\n    const contractConfig = requestConfig[contractField];\n\n    // ignore empty contract configs\n    if (!contractConfig || Object.keys(contractConfig.calls).length === 0) return contracts;\n\n    contracts.push({\n      reference: contractField,\n      ...contractConfig,\n      calls: Object.keys(contractConfig.calls).reduce((calls, callField) => {\n        const callConfig = contractConfig.calls[callField];\n\n        // ignore empty calls\n        if (!callConfig) return calls;\n\n        calls.push({\n          reference: callField,\n          methodName: callConfig.methodName,\n          methodParameters: callConfig.params,\n        });\n\n        return calls;\n      }, [] as CallContext[]),\n    });\n\n    return contracts;\n  }, [] as ContractCallContext[]);\n\n  return result;\n}\n\nfunction formatMulticallResult(response: ContractCallResults[\"results\"]): MulticallResult<any> {\n  const result = Object.keys(response).reduce((acc, contractReference) => {\n    const contractResponse = response[contractReference].callsReturnContext;\n\n    const callsResults = contractResponse.reduce((callsObj, call) => {\n      callsObj[call.reference] = call;\n\n      callsObj[call.reference].returnValues = call.returnValues?.map(formatReturnValue);\n\n      return callsObj;\n    }, {});\n\n    acc[contractReference] = callsResults;\n\n    return acc;\n  }, {} as MulticallResult<any>);\n\n  return result;\n}\n\nfunction formatReturnValue(val: any) {\n  // etherium-multicall doesn't parse BigNumbers automatically\n  if (val?.type === \"BigNumber\") {\n    return bigNumberify(val);\n  }\n\n  return val;\n}\n","import { useWeb3React } from \"@web3-react/core\";\nimport useSWR from \"swr\";\nimport { CacheKey, MulticallRequestConfig, MulticallResult, SkipKey } from \"./types\";\nimport { executeMulticall } from \"./utils\";\n\n/**\n * A hook to fetch data from contracts via multicall.\n * Preferably wrapped in custom hooks, such as useMarkets, usePositions, etc.\n *\n * @param chainId - on which network the request should be executed\n * @param name - an unique name for the request, used as a part of swr cache key\n * @param params.key - the cache key as an array, if a falsy value is passed, the request will be skipped\n * @param params.request - contract calls config or callback which returns it\n * @param params.parseResponse - optional callback to pre-process and format the response\n */\nexport function useMulticall<TConfig extends MulticallRequestConfig<any>, TResult = MulticallResult<TConfig>>(\n  chainId: number,\n  name: string,\n  params: {\n    key: CacheKey | SkipKey;\n    refreshInterval?: number;\n    request: TConfig | ((chainId: number, key: CacheKey) => TConfig);\n    parseResponse?: (result: MulticallResult<TConfig>, chainId: number, key: CacheKey) => TResult;\n  }\n) {\n  const { library } = useWeb3React();\n\n  let swrFullKey = Array.isArray(params.key) && chainId && name ? [chainId, name, ...params.key] : null;\n\n  const swrOpts: any = {};\n\n  // SWR resets global options if pass undefined explicitly\n  if (params.refreshInterval) {\n    swrOpts.refreshInterval = params.refreshInterval;\n  }\n\n  const { data } = useSWR<TResult | undefined>(swrFullKey, {\n    ...swrOpts,\n    fetcher: async () => {\n      try {\n        // prettier-ignore\n        const request = typeof params.request === \"function\" \n            ? params.request(chainId, params.key as CacheKey) \n            : params.request;\n\n        if (Object.keys(request).length === 0) {\n          throw new Error(`Multicall request is empty`);\n        }\n\n        const response = await executeMulticall(chainId, library, request);\n\n        // prettier-ignore\n        const result = typeof params.parseResponse === \"function\"\n            ? params.parseResponse(response, chainId, params.key as CacheKey)\n            : response;\n\n        return result as TResult;\n      } catch (e) {\n        // eslint-disable-next-line no-console\n        console.error(`Multicall request failed: ${name}`, e);\n\n        throw e;\n      }\n    },\n  });\n\n  return {\n    data,\n    isLoading: Boolean(swrFullKey) && !data,\n  };\n}\n","import { useWeb3React } from \"@web3-react/core\";\nimport Token from \"abis/Token.json\";\nimport { NATIVE_TOKEN_ADDRESS } from \"config/tokens\";\nimport { useMulticall } from \"lib/multicall\";\nimport { TokensAllowanceData } from \"./types\";\n\ntype TokenAllowanceResult = {\n  tokensAllowanceData?: TokensAllowanceData;\n};\n\nconst defaultValue = {};\n\nexport function useTokensAllowanceData(\n  chainId: number,\n  p: { spenderAddress?: string; tokenAddresses: string[] }\n): TokenAllowanceResult {\n  const { spenderAddress, tokenAddresses } = p;\n  const { account } = useWeb3React();\n\n  const isNativeToken = tokenAddresses.length === 1 && tokenAddresses[0] === NATIVE_TOKEN_ADDRESS;\n\n  const { data } = useMulticall(chainId, \"useTokenAllowance\", {\n    key:\n      account && spenderAddress && tokenAddresses.length > 0 && !isNativeToken\n        ? [account, spenderAddress, tokenAddresses.join(\"-\")]\n        : null,\n\n    request: () =>\n      tokenAddresses\n        .filter((address) => address !== NATIVE_TOKEN_ADDRESS)\n        .reduce((contracts, address) => {\n          contracts[address] = {\n            contractAddress: address,\n            abi: Token.abi,\n            calls: {\n              allowance: {\n                methodName: \"allowance\",\n                params: [account, spenderAddress],\n              },\n            },\n          };\n\n          return contracts;\n        }, {}),\n\n    parseResponse: (res) =>\n      Object.keys(res).reduce((tokenAllowance: TokensAllowanceData, address) => {\n        tokenAllowance[address] = res[address].allowance.returnValues[0];\n\n        return tokenAllowance;\n      }, {} as TokensAllowanceData),\n  });\n\n  return {\n    tokensAllowanceData: isNativeToken ? defaultValue : data,\n  };\n}\n","export function arrayURLFetcher(...urlArr) {\n  const fetcher = (url) => fetch(url).then((res) => res.json());\n  return Promise.all(urlArr.map(fetcher));\n}\n\nexport function jsonFetcher(...args: any) {\n  // @ts-ignore\n  return fetch(...args).then((res) => res.json());\n}\n","import { ARBITRUM, AVALANCHE, AVALANCHE_FUJI } from \"./chains\";\nimport queryString from \"query-string\";\n\nconst ORACLE_KEEPER_URLS = {\n  [ARBITRUM]: \"https://seashell-app-zdvwo.ondigitalocean.app\",\n\n  [AVALANCHE]: \"https://seashell-app-zdvwo.ondigitalocean.app\",\n\n  [AVALANCHE_FUJI]: \"https://gmx-oracle-keeper-ro-avax-fuji-d4il9.ondigitalocean.app\",\n\n  default: \"https://gmx-oracle-keeper-ro-avax-fuji-d4il9.ondigitalocean.app\",\n};\n\nexport function getOracleKeeperBaseUrl(chainId: number) {\n  const url = ORACLE_KEEPER_URLS[chainId] || ORACLE_KEEPER_URLS.default;\n\n  return url;\n}\n\nexport function getOracleKeeperUrl(chainId: number, path: string, query?: any) {\n  const qs = query ? `?${queryString.stringify(query)}` : \"\";\n\n  return `${getOracleKeeperBaseUrl(chainId)}${path}${qs}`;\n}\n","import { InfoTokens, Token, TokenInfo, getIsEquivalentTokens } from \"domain/tokens\";\nimport { BigNumber } from \"ethers\";\nimport { TokensAllowanceData, TokenData, TokenPrices, TokensData, TokensRatio } from \"./types\";\nimport { expandDecimals, formatAmount } from \"lib/numbers\";\nimport { NATIVE_TOKEN_ADDRESS } from \"config/tokens\";\nimport { PRECISION, USD_DECIMALS, adjustForDecimals } from \"lib/legacy\";\nimport { Bar } from \"domain/tradingview/types\";\n\nexport function getTokenData(tokensData?: TokensData, address?: string, convertTo?: \"wrapped\" | \"native\") {\n  if (!address || !tokensData?.[address]) {\n    return undefined;\n  }\n\n  const token = tokensData[address];\n\n  if (convertTo === \"wrapped\" && token.isNative && token.wrappedAddress) {\n    return tokensData[token.wrappedAddress];\n  }\n\n  if (convertTo === \"native\" && token.isWrapped) {\n    return tokensData[NATIVE_TOKEN_ADDRESS];\n  }\n\n  return token;\n}\n\nexport function getNeedTokenApprove(\n  tokenAllowanceData: TokensAllowanceData,\n  tokenAddress: string,\n  amountToSpend: BigNumber\n): boolean {\n  if (tokenAddress === NATIVE_TOKEN_ADDRESS || !tokenAllowanceData[tokenAddress]) {\n    return false;\n  }\n\n  return amountToSpend.gt(tokenAllowanceData[tokenAddress]);\n}\n\nexport function convertToTokenAmount(\n  usd: BigNumber | undefined,\n  tokenDecimals: number | undefined,\n  price: BigNumber | undefined\n) {\n  if (!usd || typeof tokenDecimals !== \"number\" || !price?.gt(0)) {\n    return undefined;\n  }\n\n  return usd.mul(expandDecimals(1, tokenDecimals)).div(price);\n}\n\nexport function convertToUsd(\n  tokenAmount: BigNumber | undefined,\n  tokenDecimals: number | undefined,\n  price: BigNumber | undefined\n) {\n  if (!tokenAmount || typeof tokenDecimals !== \"number\" || !price) {\n    return undefined;\n  }\n\n  return tokenAmount.mul(price).div(expandDecimals(1, tokenDecimals));\n}\n\nexport function getTokensRatioByPrice(p: {\n  fromToken: TokenData;\n  toToken: TokenData;\n  fromPrice: BigNumber;\n  toPrice: BigNumber;\n}): TokensRatio {\n  const { fromToken, toToken, fromPrice, toPrice } = p;\n\n  const [largestToken, smallestToken, largestPrice, smallestPrice] = fromPrice.gt(toPrice)\n    ? [fromToken, toToken, fromPrice, toPrice]\n    : [toToken, fromToken, toPrice, fromPrice];\n\n  const ratio = largestPrice.mul(PRECISION).div(smallestPrice);\n\n  return { ratio, largestToken, smallestToken };\n}\n\nexport function getTokensRatioByAmounts(p: {\n  fromToken: Token;\n  toToken: Token;\n  fromTokenAmount: BigNumber;\n  toTokenAmount: BigNumber;\n}): TokensRatio {\n  const { fromToken, toToken, fromTokenAmount, toTokenAmount } = p;\n\n  const adjustedFromAmount = fromTokenAmount.mul(PRECISION).div(expandDecimals(1, fromToken.decimals));\n  const adjustedToAmount = toTokenAmount.mul(PRECISION).div(expandDecimals(1, toToken.decimals));\n\n  const [largestToken, smallestToken, largestAmount, smallestAmount] = adjustedFromAmount.gt(adjustedToAmount)\n    ? [fromToken, toToken, adjustedFromAmount, adjustedToAmount]\n    : [toToken, fromToken, adjustedToAmount, adjustedFromAmount];\n\n  const ratio = smallestAmount.gt(0) ? largestAmount.mul(PRECISION).div(smallestAmount) : BigNumber.from(0);\n\n  return { ratio, largestToken, smallestToken };\n}\n\nexport function formatTokensRatio(fromToken?: Token, toToken?: Token, ratio?: TokensRatio) {\n  if (!fromToken || !toToken || !ratio) {\n    return undefined;\n  }\n\n  const [largest, smallest] =\n    ratio.largestToken.address === fromToken.address ? [fromToken, toToken] : [toToken, fromToken];\n\n  return `${formatAmount(ratio.ratio, USD_DECIMALS, 4)} ${smallest.symbol} / ${largest.symbol}`;\n}\n\nexport function getAmountByRatio(p: {\n  fromToken: Token;\n  toToken: Token;\n  fromTokenAmount: BigNumber;\n  ratio: BigNumber;\n  shouldInvertRatio?: boolean;\n}) {\n  const { fromToken, toToken, fromTokenAmount, ratio, shouldInvertRatio } = p;\n\n  if (getIsEquivalentTokens(fromToken, toToken) || fromTokenAmount.eq(0)) {\n    return p.fromTokenAmount;\n  }\n\n  const _ratio = shouldInvertRatio ? PRECISION.mul(PRECISION).div(ratio) : ratio;\n\n  const adjustedDecimalsRatio = adjustForDecimals(_ratio, fromToken.decimals, toToken.decimals);\n\n  return p.fromTokenAmount.mul(adjustedDecimalsRatio).div(PRECISION);\n}\n\nexport function getCandlesDelta(candles: Bar[], currentAveragePrice: BigNumber, periodInSeconds: number) {\n  const currentPrice = parseFloat(formatAmount(currentAveragePrice, USD_DECIMALS, 2));\n\n  if (!candles.length) {\n    return undefined;\n  }\n\n  const result: Partial<{\n    high: number;\n    low: number;\n    delta: number;\n    deltaPrice: number;\n    deltaPercentage: number;\n    deltaPercentageStr: string;\n  }> = {};\n\n  const now = Math.round(Date.now() / 1000);\n  const timeThreshold = now - periodInSeconds;\n\n  for (const candle of candles) {\n    if (candle.time < timeThreshold) {\n      break;\n    }\n\n    if (!result.high || candle.high > result.high) {\n      result.high = candle.high;\n    }\n\n    if (!result.low || candle.low < result.low) {\n      result.low = candle.low;\n    }\n\n    result.deltaPrice = candle.open;\n  }\n\n  result.delta = currentPrice - result.deltaPrice!;\n  result.deltaPercentage = (result.delta * 100) / currentPrice;\n\n  if (result.deltaPercentage > 0) {\n    result.deltaPercentageStr = `+${result.deltaPercentage.toFixed(2)}%`;\n  } else {\n    result.deltaPercentageStr = `${result.deltaPercentage.toFixed(2)}%`;\n  }\n  if (result.deltaPercentage === 0) {\n    result.deltaPercentageStr = \"0.00\";\n  }\n\n  return result as Required<typeof result>;\n}\n\nexport function getMidPrice(prices: TokenPrices) {\n  return prices.minPrice.add(prices.maxPrice).div(2);\n}\n\nexport function parseOraclePrice(price: string, tokenDecimals: number, oracleDecimals: number) {\n  return expandDecimals(price, tokenDecimals + oracleDecimals);\n}\n\nexport function convertToContractPrice(price: BigNumber, tokenDecimals: number) {\n  return price.div(expandDecimals(1, tokenDecimals));\n}\n\nexport function convertToContractTokenPrices(prices: TokenPrices, tokenDecimals: number) {\n  return {\n    min: convertToContractPrice(prices.minPrice, tokenDecimals),\n    max: convertToContractPrice(prices.maxPrice, tokenDecimals),\n  };\n}\n\nexport function parseContractPrice(price: BigNumber, tokenDecimals: number) {\n  return price.mul(expandDecimals(1, tokenDecimals));\n}\n\n/**\n * Used to adapt Synthetics tokens to InfoTokens where it's possible\n */\nexport function adaptToV1InfoTokens(tokensData: TokensData): InfoTokens {\n  const infoTokens = Object.keys(tokensData).reduce((acc, address) => {\n    const tokenData = getTokenData(tokensData, address)!;\n\n    acc[address] = adaptToV1TokenInfo(tokenData);\n\n    return acc;\n  }, {} as InfoTokens);\n\n  return infoTokens;\n}\n\n/**\n * Used to adapt Synthetics tokens to InfoTokens where it's possible\n */\nexport function adaptToV1TokenInfo(tokenData: TokenData): TokenInfo {\n  return {\n    ...tokenData,\n    minPrice: tokenData.prices?.minPrice,\n    maxPrice: tokenData.prices?.maxPrice,\n  };\n}\n","import { getAvailableTradeTokens, getTokensMap } from \"config/tokens\";\nimport { useMemo } from \"react\";\nimport { TokensData } from \"./types\";\nimport { useTokenBalances } from \"./useTokenBalances\";\nimport { useTokenRecentPrices } from \"./useTokenRecentPricesData\";\n\ntype TokensDataResult = {\n  tokensData?: TokensData;\n};\n\nexport function useAvailableTokensData(chainId: number): TokensDataResult {\n  const tokenAddresses = useMemo(\n    () => getAvailableTradeTokens(chainId, { includeSynthetic: true }).map((token) => token.address),\n    [chainId]\n  );\n\n  return useTokensData(chainId, { tokenAddresses });\n}\n\nexport function useTokensData(chainId: number, { tokenAddresses }: { tokenAddresses: string[] }): TokensDataResult {\n  const tokenConfigs = getTokensMap(chainId);\n  const { balancesData } = useTokenBalances(chainId, { tokenAddresses });\n  const { pricesData } = useTokenRecentPrices(chainId);\n\n  const tokenKeys = tokenAddresses.join(\"-\");\n\n  return useMemo(() => {\n    if (!pricesData) {\n      return {\n        tokensData: undefined,\n      };\n    }\n\n    return {\n      tokensData: tokenKeys.split(\"-\").reduce((acc: TokensData, tokenAddress) => {\n        const prices = pricesData[tokenAddress];\n        const balance = balancesData?.[tokenAddress];\n        const tokenConfig = tokenConfigs[tokenAddress];\n\n        if (!prices) {\n          return acc;\n        }\n\n        acc[tokenAddress] = {\n          ...tokenConfig,\n          prices,\n          balance,\n        };\n        return acc;\n      }, {} as TokensData),\n    };\n  }, [tokenKeys, tokenConfigs, pricesData, balancesData]);\n}\n","import { useWeb3React } from \"@web3-react/core\";\nimport Multicall from \"abis/Multicall.json\";\nimport Token from \"abis/Token.json\";\nimport { getContract } from \"config/contracts\";\nimport { getToken, NATIVE_TOKEN_ADDRESS } from \"config/tokens\";\nimport { useMulticall } from \"lib/multicall\";\nimport { TokenBalancesData } from \"./types\";\n\ntype BalancesDataResult = {\n  balancesData?: TokenBalancesData;\n};\n\nexport function useTokenBalances(chainId: number, p: { tokenAddresses: string[] }): BalancesDataResult {\n  const { account } = useWeb3React();\n\n  const { data } = useMulticall(chainId, \"useTokenBalances\", {\n    key: account && p.tokenAddresses.length > 0 ? [account, p.tokenAddresses.join(\"-\")] : null,\n    request: () =>\n      p.tokenAddresses.reduce((acc, address) => {\n        const token = getToken(chainId, address);\n        // Skip synthetic tokens\n        if (token.isSynthetic) return acc;\n\n        if (address === NATIVE_TOKEN_ADDRESS) {\n          acc[address] = {\n            contractAddress: getContract(chainId, \"Multicall\"),\n            abi: Multicall.abi,\n            calls: {\n              balance: {\n                methodName: \"getEthBalance\",\n                params: [account],\n              },\n            },\n          };\n        } else {\n          acc[address] = {\n            contractAddress: address,\n            abi: Token.abi,\n            calls: {\n              balance: {\n                methodName: \"balanceOf\",\n                params: [account],\n              },\n            },\n          };\n        }\n\n        return acc;\n      }, {}),\n    parseResponse: (res) =>\n      Object.keys(res).reduce((tokenBalances: TokenBalancesData, tokenAddress) => {\n        tokenBalances[tokenAddress] = res[tokenAddress].balance.returnValues[0];\n\n        return tokenBalances;\n      }, {} as TokenBalancesData),\n  });\n\n  return {\n    balancesData: data,\n  };\n}\n","import useSWR from \"swr\";\nimport { getTokenBySymbol, getTokens, getWrappedToken, NATIVE_TOKEN_ADDRESS } from \"config/tokens\";\nimport { jsonFetcher } from \"lib/fetcher\";\nimport { expandDecimals } from \"lib/numbers\";\nimport { getOracleKeeperUrl } from \"config/oracleKeeper\";\nimport { USD_DECIMALS } from \"lib/legacy\";\nimport { TokenPricesData } from \"./types\";\nimport { parseOraclePrice } from \"./utils\";\n\ntype BackendResponse = {\n  minPrice: string;\n  maxPrice: string;\n  oracleDecimals: number;\n  tokenSymbol: string;\n  tokenAddress: string;\n  updatedAt: number;\n}[];\n\ntype TokenPricesDataResult = {\n  pricesData?: TokenPricesData;\n};\n\nexport function useTokenRecentPrices(chainId: number): TokenPricesDataResult {\n  const url = getOracleKeeperUrl(chainId, \"/prices/tickers\");\n\n  const { data } = useSWR<TokenPricesData>(url, {\n    fetcher: (...args) =>\n      jsonFetcher(...args).then((priceItems: BackendResponse) => {\n        const result: TokenPricesData = {};\n\n        priceItems.forEach((priceItem) => {\n          let tokenConfig: any;\n\n          try {\n            tokenConfig = getTokenBySymbol(chainId, priceItem.tokenSymbol);\n          } catch (e) {\n            // ignore unknown token errors\n\n            return;\n          }\n\n          result[tokenConfig.address] = {\n            minPrice: parseOraclePrice(priceItem.minPrice, tokenConfig.decimals, priceItem.oracleDecimals),\n            maxPrice: parseOraclePrice(priceItem.maxPrice, tokenConfig.decimals, priceItem.oracleDecimals),\n          };\n        });\n\n        const stableTokens = getTokens(chainId).filter((token) => token.isStable);\n\n        stableTokens.forEach((token) => {\n          if (!result[token.address]) {\n            result[token.address] = {\n              minPrice: expandDecimals(1, USD_DECIMALS),\n              maxPrice: expandDecimals(1, USD_DECIMALS),\n            };\n          }\n        });\n\n        const wrappedToken = getWrappedToken(chainId);\n\n        if (!result[wrappedToken.address] && result[NATIVE_TOKEN_ADDRESS]) {\n          result[wrappedToken.address] = result[NATIVE_TOKEN_ADDRESS];\n        }\n\n        return result;\n      }),\n  });\n\n  return {\n    pricesData: data,\n  };\n}\n","export function setByKey<T>(obj: { [key: string]: T }, key: string, data: T) {\n  return { ...obj, [key]: data };\n}\n\nexport function updateByKey<T>(obj: { [key: string]: T }, key: string, data: Partial<T>) {\n  if (!obj[key]) return obj;\n\n  return { ...obj, [key]: { ...obj[key], ...data } };\n}\n\nexport function getByKey<T>(obj?: { [key: string]: T }, key?: string): T | undefined {\n  if (!obj || !key) return undefined;\n\n  return obj[key];\n}\n","import { expandDecimals } from \"lib/numbers\";\n\nexport const HIGH_SPREAD_THRESHOLD = expandDecimals(1, 30).div(100); // 1%\n\n// V2\nexport const HIGH_PRICE_IMPACT_BPS = 80; // 0.8%\nexport const DEFAULT_ACCEPABLE_PRICE_IMPACT_BPS = 100; // 1%;\n","import { t } from \"@lingui/macro\";\nimport { getHighExecutionFee } from \"config/chains\";\nimport { NATIVE_TOKEN_ADDRESS } from \"config/tokens\";\nimport { TokensData, convertToUsd, getTokenData } from \"domain/synthetics/tokens\";\nimport { BigNumber } from \"ethers\";\nimport { USD_DECIMALS } from \"lib/legacy\";\nimport { applyFactor, expandDecimals } from \"lib/numbers\";\nimport { ExecutionFee, GasLimitsConfig } from \"../types\";\n\nexport function getExecutionFee(\n  chainId: number,\n  gasLimts: GasLimitsConfig,\n  tokensData: TokensData,\n  estimatedGasLimit: BigNumber,\n  gasPrice: BigNumber\n): ExecutionFee | undefined {\n  const nativeToken = getTokenData(tokensData, NATIVE_TOKEN_ADDRESS);\n\n  if (!nativeToken) return undefined;\n\n  const baseGasLimit = gasLimts.estimatedFeeBaseGasLimit;\n  const multiplierFactor = gasLimts.estimatedFeeMultiplierFactor;\n  const adjustedGasLimit = baseGasLimit.add(applyFactor(estimatedGasLimit, multiplierFactor));\n\n  const feeTokenAmount = adjustedGasLimit.mul(gasPrice);\n\n  const feeUsd = convertToUsd(feeTokenAmount, nativeToken.decimals, nativeToken.prices.minPrice)!;\n\n  const isFeeHigh = feeUsd.gt(expandDecimals(getHighExecutionFee(chainId), USD_DECIMALS));\n\n  const warning = isFeeHigh\n    ? t`The network cost to send transactions is high at the moment, please check the \"Execution Fee\" value before proceeding.`\n    : undefined;\n\n  return {\n    feeUsd,\n    feeTokenAmount,\n    feeToken: nativeToken,\n    warning,\n  };\n}\n\nexport function estimateExecuteDepositGasLimit(\n  gasLimits: GasLimitsConfig,\n  deposit: {\n    longTokenSwapPath?: string[];\n    shortTokenSwapPath?: string[];\n    initialLongTokenAmount?: BigNumber;\n    initialShortTokenAmount?: BigNumber;\n    callbackGasLimit?: BigNumber;\n  }\n) {\n  const gasPerSwap = gasLimits.singleSwap;\n  const swapsCount = (deposit.longTokenSwapPath?.length || 0) + (deposit.shortTokenSwapPath?.length || 0);\n\n  const gasForSwaps = gasPerSwap.mul(swapsCount);\n  const isMultiTokenDeposit = deposit.initialLongTokenAmount?.gt(0) && deposit.initialShortTokenAmount?.gt(0);\n\n  const depositGasLimit = isMultiTokenDeposit ? gasLimits.depositMultiToken : gasLimits.depositSingleToken;\n\n  return depositGasLimit.add(gasForSwaps).add(deposit.callbackGasLimit || 0);\n}\n\nexport function estimateExecuteWithdrawalGasLimit(\n  gasLimits: GasLimitsConfig,\n  withdrawal: { callbackGasLimit?: BigNumber }\n) {\n  return gasLimits.withdrawalMultiToken.add(withdrawal.callbackGasLimit || 0);\n}\n\nexport function estimateExecuteIncreaseOrderGasLimit(\n  gasLimits: GasLimitsConfig,\n  order: { swapPath?: string[]; callbackGasLimit?: BigNumber }\n) {\n  const swapsCount = order.swapPath?.length || 0;\n\n  return gasLimits.increaseOrder.add(gasLimits.singleSwap.mul(swapsCount)).add(order.callbackGasLimit || 0);\n}\n\nexport function estimateExecuteDecreaseOrderGasLimit(\n  gasLimits: GasLimitsConfig,\n  order: { swapPath?: string[]; callbackGasLimit?: BigNumber }\n) {\n  const swapsCount = order.swapPath?.length || 0;\n\n  return gasLimits.decreaseOrder.add(gasLimits.singleSwap.mul(swapsCount)).add(order.callbackGasLimit || 0);\n}\n\nexport function estimateExecuteSwapOrderGasLimit(\n  gasLimits: GasLimitsConfig,\n  order: { swapPath?: string[]; callbackGasLimit?: BigNumber }\n) {\n  const swapsCount = order.swapPath?.length || 0;\n\n  return gasLimits.swapOrder.add(gasLimits.singleSwap.mul(swapsCount)).add(order.callbackGasLimit || 0);\n}\n","import { Web3Provider } from \"@ethersproject/providers\";\nimport { t } from \"@lingui/macro\";\nimport { getContract } from \"config/contracts\";\nimport { BigNumber, ethers } from \"ethers\";\nimport { callContract } from \"lib/contracts\";\nimport ExchangeRouter from \"abis/ExchangeRouter.json\";\nimport { NATIVE_TOKEN_ADDRESS, convertTokenAddress } from \"config/tokens\";\n\ntype Params = {\n  account: string;\n  initialLongTokenAddress: string;\n  initialShortTokenAddress: string;\n  marketTokenAddress: string;\n  longTokenAmount?: BigNumber;\n  shortTokenAmount?: BigNumber;\n  minMarketTokens: BigNumber;\n  executionFee: BigNumber;\n  setPendingTxns: (txns: any) => void;\n};\n\nexport async function createDepositTxn(chainId: number, library: Web3Provider, p: Params) {\n  const contract = new ethers.Contract(getContract(chainId, \"ExchangeRouter\"), ExchangeRouter.abi, library.getSigner());\n  const depositVaultAddress = getContract(chainId, \"DepositVault\");\n\n  const isNativeLongDeposit = p.initialLongTokenAddress === NATIVE_TOKEN_ADDRESS && p.longTokenAmount?.gt(0);\n  const isNativeShortDeposit = p.initialShortTokenAddress === NATIVE_TOKEN_ADDRESS && p.shortTokenAmount?.gt(0);\n\n  let wntDeposit = BigNumber.from(0);\n\n  if (isNativeLongDeposit) {\n    wntDeposit = wntDeposit.add(p.longTokenAmount!);\n  }\n\n  if (isNativeShortDeposit) {\n    wntDeposit = wntDeposit.add(p.shortTokenAmount!);\n  }\n\n  const wntAmount = p.executionFee.add(wntDeposit);\n\n  const sendLongTokenCall =\n    !isNativeLongDeposit && p.longTokenAmount?.gt(0)\n      ? contract.interface.encodeFunctionData(\"sendTokens\", [\n          p.initialLongTokenAddress,\n          depositVaultAddress,\n          p.longTokenAmount,\n        ])\n      : undefined;\n\n  const sendShortTokenCall =\n    !isNativeShortDeposit && p.shortTokenAmount?.gt(0)\n      ? contract.interface.encodeFunctionData(\"sendTokens\", [\n          p.initialShortTokenAddress,\n          depositVaultAddress,\n          p.shortTokenAmount,\n        ])\n      : undefined;\n\n  const multicall = [\n    contract.interface.encodeFunctionData(\"sendWnt\", [depositVaultAddress, wntAmount]),\n    sendLongTokenCall,\n    sendShortTokenCall,\n    contract.interface.encodeFunctionData(\"createDeposit\", [\n      {\n        receiver: p.account,\n        callbackContract: ethers.constants.AddressZero,\n        market: p.marketTokenAddress,\n        initialLongToken: convertTokenAddress(chainId, p.initialLongTokenAddress, \"wrapped\"),\n        initialShortToken: convertTokenAddress(chainId, p.initialShortTokenAddress, \"wrapped\"),\n        longTokenSwapPath: [],\n        shortTokenSwapPath: [],\n        minMarketTokens: p.minMarketTokens.sub(p.minMarketTokens.div(10)) || BigNumber.from(0),\n        shouldUnwrapNativeToken: false,\n        executionFee: p.executionFee,\n        callbackGasLimit: BigNumber.from(0),\n      },\n    ]),\n  ].filter(Boolean) as string[];\n\n  return callContract(chainId, contract, \"multicall\", [multicall], {\n    value: wntAmount,\n    sentMsg: t`Deposit order sent`,\n    successMsg: t`Success deposit order`,\n    failMsg: t`Deposit order failed`,\n    hideSuccessMsg: true,\n    setPendingTxns: p.setPendingTxns,\n  });\n}\n","import { useWeb3React } from \"@web3-react/core\";\nimport DataStore from \"abis/DataStore.json\";\nimport SyntheticsReader from \"abis/SyntheticsReader.json\";\nimport { getContract } from \"config/contracts\";\nimport {\n  BORROWING_FEE_RECEIVER_FACTOR_KEY,\n  MAX_PNL_FACTOR_FOR_DEPOSITS_KEY,\n  MAX_PNL_FACTOR_FOR_TRADERS_KEY,\n  MAX_PNL_FACTOR_FOR_WITHDRAWALS_KEY,\n  claimableFundingAmountKey,\n  cumulativeBorrowingFactorKey,\n  maxPnlFactorKey,\n  maxPositionImpactFactorForLiquidationsKey,\n  maxPositionImpactFactorKey,\n  minCollateralFactorKey,\n  openInterestInTokensKey,\n  openInterestKey,\n  poolAmountAdjustmentKey,\n  poolAmountKey,\n  positionFeeFactorKey,\n  positionImpactExponentFactorKey,\n  positionImpactFactorKey,\n  positionImpactPoolAmountKey,\n  reserveFactorKey,\n  swapFeeFactorKey,\n  swapImpactExponentFactorKey,\n  swapImpactFactorKey,\n  swapImpactPoolAmountKey,\n  totalBorrowingKey,\n} from \"config/dataStore\";\nimport { useMulticall } from \"lib/multicall\";\nimport { bigNumberify } from \"lib/numbers\";\nimport { getByKey } from \"lib/objects\";\nimport { useAvailableTokensData } from \"../tokens\";\nimport { MarketsInfoData } from \"./types\";\nimport { useMarkets } from \"./useMarkets\";\nimport { getContractMarketPrices } from \"./utils\";\n\nexport type MarketsInfoResult = {\n  marketsInfoData?: MarketsInfoData;\n};\n\nexport function useMarketsInfo(chainId: number): MarketsInfoResult {\n  const { account } = useWeb3React();\n  const { marketsData, marketsAddresses } = useMarkets(chainId);\n  const { tokensData } = useAvailableTokensData(chainId);\n  const dataStoreAddress = getContract(chainId, \"DataStore\");\n\n  const isDepencenciesLoading = !marketsAddresses || !tokensData;\n\n  const { data } = useMulticall(chainId, \"useMarketsInfo\", {\n    key: !isDepencenciesLoading &&\n      marketsAddresses.length > 0 && [marketsAddresses.join(\"-\"), dataStoreAddress, account],\n\n    request: () =>\n      marketsAddresses!.reduce((request, marketAddress) => {\n        const market = getByKey(marketsData, marketAddress)!;\n        const marketPrices = getContractMarketPrices(tokensData!, market)!;\n\n        const marketProps = {\n          marketToken: market.marketTokenAddress,\n          indexToken: market.indexTokenAddress,\n          longToken: market.longTokenAddress,\n          shortToken: market.shortTokenAddress,\n        };\n\n        return Object.assign(request, {\n          [`${marketAddress}-reader`]: {\n            contractAddress: getContract(chainId, \"SyntheticsReader\"),\n            abi: SyntheticsReader.abi,\n            calls: {\n              marketInfo: {\n                methodName: \"getMarketInfo\",\n                params: [dataStoreAddress, marketPrices, marketAddress],\n              },\n              marketTokenPriceMax: {\n                methodName: \"getMarketTokenPrice\",\n                params: [\n                  dataStoreAddress,\n                  marketProps,\n                  marketPrices.indexTokenPrice,\n                  marketPrices.longTokenPrice,\n                  marketPrices.shortTokenPrice,\n                  MAX_PNL_FACTOR_FOR_TRADERS_KEY,\n                  true,\n                ],\n              },\n              marketTokenPriceMin: {\n                methodName: \"getMarketTokenPrice\",\n                params: [\n                  dataStoreAddress,\n                  marketProps,\n                  marketPrices.indexTokenPrice,\n                  marketPrices.longTokenPrice,\n                  marketPrices.shortTokenPrice,\n                  MAX_PNL_FACTOR_FOR_TRADERS_KEY,\n                  false,\n                ],\n              },\n            },\n          },\n          [`${marketAddress}-dataStore`]: {\n            contractAddress: dataStoreAddress,\n            abi: DataStore.abi,\n            calls: {\n              longPoolAmount: {\n                methodName: \"getUint\",\n                params: [poolAmountKey(marketAddress, market.longTokenAddress)],\n              },\n              shortPoolAmount: {\n                methodName: \"getUint\",\n                params: [poolAmountKey(marketAddress, market.shortTokenAddress)],\n              },\n              longPoolAmountAdjustment: {\n                methodName: \"getUint\",\n                params: [poolAmountAdjustmentKey(marketAddress, market.longTokenAddress)],\n              },\n              shortPoolAmountAdjustment: {\n                methodName: \"getUint\",\n                params: [poolAmountAdjustmentKey(marketAddress, market.longTokenAddress)],\n              },\n              reserveFactorLong: {\n                methodName: \"getUint\",\n                params: [reserveFactorKey(marketAddress, true)],\n              },\n              reserveFactorShort: {\n                methodName: \"getUint\",\n                params: [reserveFactorKey(marketAddress, true)],\n              },\n              totalBorrowingLong: {\n                methodName: \"getUint\",\n                params: [totalBorrowingKey(marketAddress, true)],\n              },\n              totalBorrowingShort: {\n                methodName: \"getUint\",\n                params: [totalBorrowingKey(marketAddress, false)],\n              },\n              cummulativeBorrowingFactorLong: {\n                methodName: \"getUint\",\n                params: [cumulativeBorrowingFactorKey(marketAddress, true)],\n              },\n              cummulativeBorrowingFactorShort: {\n                methodName: \"getUint\",\n                params: [cumulativeBorrowingFactorKey(marketAddress, false)],\n              },\n              borrowingFeeReceiverFactor: {\n                methodName: \"getUint\",\n                params: [BORROWING_FEE_RECEIVER_FACTOR_KEY],\n              },\n              positionImpactPoolAmount: {\n                methodName: \"getUint\",\n                params: [positionImpactPoolAmountKey(marketAddress)],\n              },\n              swapImpactPoolAmountLong: {\n                methodName: \"getUint\",\n                params: [swapImpactPoolAmountKey(marketAddress, market.longTokenAddress)],\n              },\n              swapImpactPoolAmountShort: {\n                methodName: \"getUint\",\n                params: [swapImpactPoolAmountKey(marketAddress, market.shortTokenAddress)],\n              },\n              maxPnlFactorForTradersLong: {\n                methodName: \"getUint\",\n                params: [maxPnlFactorKey(MAX_PNL_FACTOR_FOR_TRADERS_KEY, marketAddress, true)],\n              },\n              maxPnlFactorForTradersShort: {\n                methodName: \"getUint\",\n                params: [maxPnlFactorKey(MAX_PNL_FACTOR_FOR_TRADERS_KEY, marketAddress, false)],\n              },\n              maxPnlFactorForDepositsLong: {\n                methodName: \"getUint\",\n                params: [maxPnlFactorKey(MAX_PNL_FACTOR_FOR_DEPOSITS_KEY, marketAddress, true)],\n              },\n              maxPnlFactorForDepositsShort: {\n                methodName: \"getUint\",\n                params: [maxPnlFactorKey(MAX_PNL_FACTOR_FOR_DEPOSITS_KEY, marketAddress, false)],\n              },\n              maxPnlFactorForWithdrawalsLong: {\n                methodName: \"getUint\",\n                params: [maxPnlFactorKey(MAX_PNL_FACTOR_FOR_WITHDRAWALS_KEY, marketAddress, true)],\n              },\n              maxPnlFactorForWithdrawalsShort: {\n                methodName: \"getUint\",\n                params: [maxPnlFactorKey(MAX_PNL_FACTOR_FOR_WITHDRAWALS_KEY, marketAddress, false)],\n              },\n              claimableFundingAmountLong: account\n                ? {\n                    methodName: \"getUint\",\n                    params: [claimableFundingAmountKey(marketAddress, market.longTokenAddress, account)],\n                  }\n                : undefined,\n              claimableFundingAmountShort: account\n                ? {\n                    methodName: \"getUint\",\n                    params: [claimableFundingAmountKey(marketAddress, market.shortTokenAddress, account)],\n                  }\n                : undefined,\n              positionFeeFactor: {\n                methodName: \"getUint\",\n                params: [positionFeeFactorKey(marketAddress)],\n              },\n              positionImpactFactorPositive: {\n                methodName: \"getUint\",\n                params: [positionImpactFactorKey(marketAddress, true)],\n              },\n              positionImpactFactorNegative: {\n                methodName: \"getUint\",\n                params: [positionImpactFactorKey(marketAddress, false)],\n              },\n              maxPositionImpactFactorPositive: {\n                methodName: \"getUint\",\n                params: [maxPositionImpactFactorKey(marketAddress, true)],\n              },\n              maxPositionImpactFactorNegative: {\n                methodName: \"getUint\",\n                params: [maxPositionImpactFactorKey(marketAddress, false)],\n              },\n              maxPositionImpactFactorForLiquidations: {\n                methodName: \"getUint\",\n                params: [maxPositionImpactFactorForLiquidationsKey(marketAddress)],\n              },\n              minCollateralFactor: {\n                methodName: \"getUint\",\n                params: [minCollateralFactorKey(marketAddress)],\n              },\n              positionImpactExponentFactor: {\n                methodName: \"getUint\",\n                params: [positionImpactExponentFactorKey(marketAddress)],\n              },\n              swapFeeFactor: {\n                methodName: \"getUint\",\n                params: [swapFeeFactorKey(marketAddress)],\n              },\n              swapImpactFactorPositive: {\n                methodName: \"getUint\",\n                params: [swapImpactFactorKey(marketAddress, true)],\n              },\n              swapImpactFactorNegative: {\n                methodName: \"getUint\",\n                params: [swapImpactFactorKey(marketAddress, false)],\n              },\n              swapImpactExponentFactor: {\n                methodName: \"getUint\",\n                params: [swapImpactExponentFactorKey(marketAddress)],\n              },\n              longInterestUsingLongToken: {\n                methodName: \"getUint\",\n                params: [openInterestKey(marketAddress, market.longTokenAddress, true)],\n              },\n              longInterestUsingShortToken: {\n                methodName: \"getUint\",\n                params: [openInterestKey(marketAddress, market.shortTokenAddress, true)],\n              },\n              shortInterestUsingLongToken: {\n                methodName: \"getUint\",\n                params: [openInterestKey(marketAddress, market.longTokenAddress, false)],\n              },\n              shortInterestUsingShortToken: {\n                methodName: \"getUint\",\n                params: [openInterestKey(marketAddress, market.shortTokenAddress, false)],\n              },\n              longInterestInTokensUsingLongToken: {\n                methodName: \"getUint\",\n                params: [openInterestInTokensKey(marketAddress, market.longTokenAddress, true)],\n              },\n              longInterestInTokensUsingShortToken: {\n                methodName: \"getUint\",\n                params: [openInterestInTokensKey(marketAddress, market.shortTokenAddress, true)],\n              },\n              shortInterestInTokensUsingLongToken: {\n                methodName: \"getUint\",\n                params: [openInterestInTokensKey(marketAddress, market.longTokenAddress, false)],\n              },\n              shortInterestInTokensUsingShortToken: {\n                methodName: \"getUint\",\n                params: [openInterestInTokensKey(marketAddress, market.shortTokenAddress, false)],\n              },\n            },\n          },\n        });\n      }, {}),\n    parseResponse: (res) => {\n      return marketsAddresses!.reduce((acc: MarketsInfoData, marketAddress) => {\n        const readerValues = res[`${marketAddress}-reader`];\n        const dataStoreValues = res[`${marketAddress}-dataStore`];\n\n        const longInterestUsingLongToken = dataStoreValues.longInterestUsingLongToken.returnValues[0];\n        const longInterestUsingShortToken = dataStoreValues.longInterestUsingShortToken.returnValues[0];\n        const shortInterestUsingLongToken = dataStoreValues.shortInterestUsingLongToken.returnValues[0];\n        const shortInterestUsingShortToken = dataStoreValues.shortInterestUsingShortToken.returnValues[0];\n\n        const longInterestUsd = longInterestUsingLongToken.add(longInterestUsingShortToken);\n        const shortInterestUsd = shortInterestUsingLongToken.add(shortInterestUsingShortToken);\n\n        const longInterestInTokensUsingLongToken = dataStoreValues.longInterestInTokensUsingLongToken.returnValues[0];\n        const longInterestInTokensUsingShortToken = dataStoreValues.longInterestInTokensUsingShortToken.returnValues[0];\n        const shortInterestInTokensUsingLongToken = dataStoreValues.shortInterestInTokensUsingLongToken.returnValues[0];\n        const shortInterestInTokensUsingShortToken =\n          dataStoreValues.shortInterestInTokensUsingShortToken.returnValues[0];\n\n        const longInterestInTokens = longInterestInTokensUsingLongToken.add(longInterestInTokensUsingShortToken);\n        const shortInterestInTokens = shortInterestInTokensUsingLongToken.add(shortInterestInTokensUsingShortToken);\n\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const [_, borrowingFactorPerSecondForLongs, borrowingFactorPerSecondForShorts, funding] =\n          readerValues.marketInfo.returnValues;\n\n        const [\n          longsPayShorts,\n          fundingPerSecond,\n          fundingAmountPerSize_LongCollateral_LongPosition,\n          fundingAmountPerSize_LongCollateral_ShortPosition,\n          fundingAmountPerSize_ShortCollateral_LongPosition,\n          fundingAmountPerSize_ShortCollateral_ShortPosition,\n        ] = funding;\n\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const [_priceMin, poolValueInfoMin] = readerValues.marketTokenPriceMin.returnValues;\n\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const [_priceMax, poolValueInfoMax] = readerValues.marketTokenPriceMax.returnValues;\n\n        const [poolValueMin, pnlLongMin, pnlShortMin, netPnlMin] = poolValueInfoMin.map(bigNumberify);\n\n        const [\n          poolValueMax,\n          pnlLongMax,\n          pnlShortMax,\n          netPnlMax,\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          _longTokenAmount,\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          _shortTokenAmount,\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          longTokenUsd,\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          shortTokenUsd,\n          totalBorrowingFees,\n        ] = poolValueInfoMax.map(bigNumberify);\n\n        const market = getByKey(marketsData, marketAddress)!;\n        const longToken = getByKey(tokensData!, market.longTokenAddress)!;\n        const shortToken = getByKey(tokensData!, market.shortTokenAddress)!;\n        const indexToken = getByKey(tokensData!, market.indexTokenAddress)!;\n\n        acc[marketAddress] = {\n          ...market,\n          longToken,\n          shortToken,\n          indexToken,\n          longInterestUsd,\n          shortInterestUsd,\n          longInterestInTokens,\n          shortInterestInTokens,\n          longPoolAmount: dataStoreValues.longPoolAmount.returnValues[0],\n          shortPoolAmount: dataStoreValues.shortPoolAmount.returnValues[0],\n          longPoolAmountAdjustment: dataStoreValues.longPoolAmountAdjustment.returnValues[0],\n          shortPoolAmountAdjustment: dataStoreValues.shortPoolAmountAdjustment.returnValues[0],\n          poolValueMin: poolValueMin,\n          poolValueMax: poolValueMax,\n          reserveFactorLong: dataStoreValues.reserveFactorLong.returnValues[0],\n          reserveFactorShort: dataStoreValues.reserveFactorShort.returnValues[0],\n          totalBorrowingLong: dataStoreValues.totalBorrowingLong.returnValues[0],\n          totalBorrowingShort: dataStoreValues.totalBorrowingShort.returnValues[0],\n          totalBorrowingFees,\n          cummulativeBorrowingFactorLong: dataStoreValues.cummulativeBorrowingFactorLong.returnValues[0],\n          cummulativeBorrowingFactorShort: dataStoreValues.cummulativeBorrowingFactorShort.returnValues[0],\n          borrowingFeeReceiverFactor: dataStoreValues.borrowingFeeReceiverFactor.returnValues[0],\n          positionImpactPoolAmount: dataStoreValues.positionImpactPoolAmount.returnValues[0],\n          swapImpactPoolAmountLong: dataStoreValues.swapImpactPoolAmountLong.returnValues[0],\n          swapImpactPoolAmountShort: dataStoreValues.swapImpactPoolAmountShort.returnValues[0],\n          pnlLongMax,\n          pnlLongMin,\n          pnlShortMax,\n          pnlShortMin,\n          netPnlMax,\n          netPnlMin,\n          maxPnlFactorForTradersLong: dataStoreValues.maxPnlFactorForTradersLong.returnValues[0],\n          maxPnlFactorForTradersShort: dataStoreValues.maxPnlFactorForTradersShort.returnValues[0],\n          maxPnlFactorForDepositsLong: dataStoreValues.maxPnlFactorForDepositsLong.returnValues[0],\n          maxPnlFactorForDepositsShort: dataStoreValues.maxPnlFactorForDepositsShort.returnValues[0],\n          maxPnlFactorForWithdrawalsLong: dataStoreValues.maxPnlFactorForWithdrawalsLong.returnValues[0],\n          maxPnlFactorForWithdrawalsShort: dataStoreValues.maxPnlFactorForWithdrawalsShort.returnValues[0],\n          minCollateralFactor: dataStoreValues.minCollateralFactor.returnValues[0],\n          claimableFundingAmountLong: dataStoreValues.claimableFundingAmountLong?.returnValues[0],\n          claimableFundingAmountShort: dataStoreValues.claimableFundingAmountShort?.returnValues[0],\n          positionFeeFactor: dataStoreValues.positionFeeFactor.returnValues[0],\n          positionImpactFactorPositive: dataStoreValues.positionImpactFactorPositive.returnValues[0],\n          positionImpactFactorNegative: dataStoreValues.positionImpactFactorNegative.returnValues[0],\n          maxPositionImpactFactorPositive: dataStoreValues.maxPositionImpactFactorPositive.returnValues[0],\n          maxPositionImpactFactorNegative: dataStoreValues.maxPositionImpactFactorNegative.returnValues[0],\n          maxPositionImpactFactorForLiquidations:\n            dataStoreValues.maxPositionImpactFactorForLiquidations.returnValues[0],\n          positionImpactExponentFactor: dataStoreValues.positionImpactExponentFactor.returnValues[0],\n          swapFeeFactor: dataStoreValues.swapFeeFactor.returnValues[0],\n          swapImpactFactorPositive: dataStoreValues.swapImpactFactorPositive.returnValues[0],\n          swapImpactFactorNegative: dataStoreValues.swapImpactFactorNegative.returnValues[0],\n          swapImpactExponentFactor: dataStoreValues.swapImpactExponentFactor.returnValues[0],\n\n          borrowingFactorPerSecondForLongs,\n          borrowingFactorPerSecondForShorts,\n          fundingPerSecond: bigNumberify(fundingPerSecond)!,\n          longsPayShorts,\n          fundingAmountPerSize_LongCollateral_LongPosition: bigNumberify(\n            fundingAmountPerSize_LongCollateral_LongPosition\n          )!,\n          fundingAmountPerSize_LongCollateral_ShortPosition: bigNumberify(\n            fundingAmountPerSize_LongCollateral_ShortPosition\n          )!,\n          fundingAmountPerSize_ShortCollateral_LongPosition: bigNumberify(\n            fundingAmountPerSize_ShortCollateral_LongPosition\n          )!,\n          fundingAmountPerSize_ShortCollateral_ShortPosition: bigNumberify(\n            fundingAmountPerSize_ShortCollateral_ShortPosition\n          )!,\n        };\n\n        return acc;\n      }, {} as MarketsInfoData);\n    },\n  });\n\n  return {\n    marketsInfoData: data,\n  };\n}\n","import { MarketInfo, getTokenPoolType } from \"domain/synthetics/markets\";\nimport { TokenData, convertToTokenAmount, convertToUsd, getMidPrice } from \"domain/synthetics/tokens\";\nimport { BigNumber } from \"ethers\";\nimport { applyFactor, bigNumberify, expandDecimals, roundUpDivision } from \"lib/numbers\";\nimport { VirtualInventoryForPositionsData, VirtualInventoryForSwapsData } from \"../types\";\n\nexport function applySwapImpactWithCap(marketInfo: MarketInfo, tokenAddress: string, priceImpactDeltaUsd: BigNumber) {\n  const tokenPoolType = getTokenPoolType(marketInfo, tokenAddress);\n\n  if (!tokenPoolType) {\n    throw new Error(`Token ${tokenAddress} is not a collateral of market ${marketInfo.marketTokenAddress}`);\n  }\n\n  const token = tokenPoolType === \"long\" ? marketInfo.longToken : marketInfo.shortToken;\n  const isLongCollateral = tokenPoolType === \"long\";\n  const price = priceImpactDeltaUsd.gt(0) ? token.prices.maxPrice : token.prices.minPrice;\n\n  let impactDeltaAmount: BigNumber;\n\n  if (priceImpactDeltaUsd.gt(0)) {\n    // round positive impactAmount down, this will be deducted from the swap impact pool for the user\n    impactDeltaAmount = convertToTokenAmount(priceImpactDeltaUsd, token.decimals, price)!;\n\n    const maxImpactAmount = isLongCollateral\n      ? marketInfo.swapImpactPoolAmountLong\n      : marketInfo.swapImpactPoolAmountShort;\n\n    if (impactDeltaAmount.gt(maxImpactAmount)) {\n      impactDeltaAmount = maxImpactAmount;\n    }\n  } else {\n    // round negative impactAmount up, this will be deducted from the user\n    impactDeltaAmount = roundUpDivision(priceImpactDeltaUsd.mul(expandDecimals(1, token.decimals)), price);\n  }\n\n  return impactDeltaAmount;\n}\n\nexport function getCappedPositionImpactUsd(\n  marketInfo: MarketInfo,\n  priceImpactDeltaUsd: BigNumber,\n  sizeDeltaUsd: BigNumber\n) {\n  if (priceImpactDeltaUsd.lt(0)) {\n    return priceImpactDeltaUsd;\n  }\n\n  const { indexToken } = marketInfo;\n\n  const impactPoolAmount = marketInfo?.positionImpactPoolAmount;\n\n  const maxPriceImpactUsdBasedOnImpactPool = convertToUsd(\n    impactPoolAmount,\n    indexToken.decimals,\n    indexToken.prices.minPrice\n  )!;\n\n  let cappedImpactUsd = priceImpactDeltaUsd;\n\n  if (cappedImpactUsd.gt(maxPriceImpactUsdBasedOnImpactPool)) {\n    cappedImpactUsd = maxPriceImpactUsdBasedOnImpactPool;\n  }\n\n  const maxPriceImpactFactor = marketInfo.maxPositionImpactFactorPositive;\n  const maxPriceImpactUsdBasedOnMaxPriceImpactFactor = applyFactor(sizeDeltaUsd, maxPriceImpactFactor);\n\n  if (cappedImpactUsd.gt(maxPriceImpactUsdBasedOnMaxPriceImpactFactor)) {\n    cappedImpactUsd = maxPriceImpactUsdBasedOnMaxPriceImpactFactor;\n  }\n\n  return cappedImpactUsd;\n}\n\nexport function getPriceImpactForPosition(\n  marketInfo: MarketInfo,\n  virtualInventoryForPositions: VirtualInventoryForPositionsData,\n  sizeDeltaUsd: BigNumber,\n  isLong: boolean\n) {\n  const { longInterestUsd, shortInterestUsd } = marketInfo;\n\n  const { currentLongUsd, currentShortUsd, nextLongUsd, nextShortUsd } = getNextOpenInterestParams({\n    currentLongUsd: longInterestUsd,\n    currentShortUsd: shortInterestUsd,\n    usdDelta: sizeDeltaUsd,\n    isLong: isLong!,\n  });\n\n  const priceImpactUsd = getPriceImpactUsd({\n    currentLongUsd,\n    currentShortUsd,\n    nextLongUsd,\n    nextShortUsd,\n    factorPositive: marketInfo.positionImpactFactorPositive,\n    factorNegative: marketInfo.positionImpactFactorNegative,\n    exponentFactor: marketInfo.positionImpactExponentFactor,\n  });\n\n  if (priceImpactUsd.gt(0)) {\n    return priceImpactUsd;\n  }\n\n  const virtualInventory = virtualInventoryForPositions[marketInfo.indexTokenAddress];\n\n  if (!virtualInventory) {\n    return priceImpactUsd;\n  }\n\n  const virtualInventoryParams = getNextOpenInterestForVirtualInventory({\n    virtualInventory,\n    usdDelta: sizeDeltaUsd,\n    isLong: isLong!,\n  });\n\n  const priceImpactUsdForVirtualInventory = getPriceImpactUsd({\n    currentLongUsd: virtualInventoryParams.currentLongUsd,\n    currentShortUsd: virtualInventoryParams.currentShortUsd,\n    nextLongUsd: virtualInventoryParams.nextLongUsd,\n    nextShortUsd: virtualInventoryParams.nextShortUsd,\n    factorPositive: marketInfo.positionImpactFactorPositive,\n    factorNegative: marketInfo.positionImpactFactorNegative,\n    exponentFactor: marketInfo.positionImpactExponentFactor,\n  });\n\n  return priceImpactUsdForVirtualInventory.lt(priceImpactUsd!) ? priceImpactUsdForVirtualInventory : priceImpactUsd;\n}\n\nexport function getPriceImpactForSwap(\n  marketInfo: MarketInfo,\n  virtualInventoryForSwaps: VirtualInventoryForSwapsData,\n  fromTokenAddress: string,\n  fromDeltaAmount: BigNumber,\n  toDeltaAmount: BigNumber\n) {\n  const { longToken, shortToken } = marketInfo;\n\n  const fromTokenPoolType = getTokenPoolType(marketInfo, fromTokenAddress);\n\n  const longDeltaAmount = fromTokenPoolType === \"long\" ? fromDeltaAmount : toDeltaAmount;\n  const shortDeltaAmount = fromTokenPoolType === \"short\" ? fromDeltaAmount : toDeltaAmount;\n\n  const longDeltaUsd = convertToUsd(longDeltaAmount, longToken.decimals, getMidPrice(longToken.prices))!;\n  const shortDeltaUsd = convertToUsd(shortDeltaAmount, shortToken.decimals, getMidPrice(shortToken.prices))!;\n\n  const { longPoolUsd, shortPoolUsd, nextLongPoolUsd, nextShortPoolUsd } = getNextPoolAmountsParams({\n    marketInfo,\n    longToken,\n    shortToken,\n    longPoolAmount: marketInfo.longPoolAmount,\n    shortPoolAmount: marketInfo.shortPoolAmount,\n    longDeltaUsd,\n    shortDeltaUsd,\n  });\n\n  const priceImpactUsd = getPriceImpactUsd({\n    currentLongUsd: longPoolUsd,\n    currentShortUsd: shortPoolUsd,\n    nextLongUsd: nextLongPoolUsd,\n    nextShortUsd: nextShortPoolUsd,\n    factorPositive: marketInfo.swapImpactFactorPositive,\n    factorNegative: marketInfo.swapImpactFactorNegative,\n    exponentFactor: marketInfo.swapImpactExponentFactor,\n  });\n\n  if (priceImpactUsd.gt(0)) {\n    return priceImpactUsd;\n  }\n\n  const virtualInventoryLong = virtualInventoryForSwaps[marketInfo.marketTokenAddress]?.[marketInfo.longTokenAddress];\n  const virtualInventoryShort = virtualInventoryForSwaps[marketInfo.marketTokenAddress]?.[marketInfo.shortTokenAddress];\n\n  if (!virtualInventoryLong || !virtualInventoryShort) {\n    return priceImpactUsd;\n  }\n\n  const virtualInventoryParams = getNextPoolAmountsParams({\n    marketInfo,\n    longToken,\n    shortToken,\n    longPoolAmount: virtualInventoryLong,\n    shortPoolAmount: virtualInventoryShort,\n    longDeltaUsd,\n    shortDeltaUsd,\n  });\n\n  const priceImpactUsdForVirtualInventory = getPriceImpactUsd({\n    currentLongUsd: virtualInventoryParams.longPoolUsd,\n    currentShortUsd: virtualInventoryParams.shortPoolUsd,\n    nextLongUsd: virtualInventoryParams.nextLongPoolUsd,\n    nextShortUsd: virtualInventoryParams.nextShortPoolUsd,\n    factorPositive: marketInfo.swapImpactFactorPositive,\n    factorNegative: marketInfo.swapImpactFactorNegative,\n    exponentFactor: marketInfo.swapImpactExponentFactor,\n  });\n\n  return priceImpactUsdForVirtualInventory.lt(priceImpactUsd!) ? priceImpactUsdForVirtualInventory : priceImpactUsd;\n}\n\nfunction getNextOpenInterestForVirtualInventory(p: {\n  virtualInventory: BigNumber;\n  usdDelta: BigNumber;\n  isLong: boolean;\n}) {\n  const { virtualInventory, usdDelta, isLong } = p;\n\n  let currentLongUsd = BigNumber.from(0);\n  let currentShortUsd = BigNumber.from(0);\n\n  if (virtualInventory.gt(0)) {\n    currentShortUsd = virtualInventory;\n  } else {\n    currentLongUsd = virtualInventory.mul(-1);\n  }\n\n  return getNextOpenInterestParams({\n    currentLongUsd,\n    currentShortUsd,\n    usdDelta,\n    isLong,\n  });\n}\n\nfunction getNextOpenInterestParams(p: {\n  currentLongUsd: BigNumber;\n  currentShortUsd: BigNumber;\n  usdDelta: BigNumber;\n  isLong: boolean;\n}) {\n  const { currentLongUsd, currentShortUsd, usdDelta, isLong } = p;\n\n  let nextLongUsd = currentLongUsd;\n  let nextShortUsd = currentShortUsd;\n\n  if (isLong) {\n    nextLongUsd = currentLongUsd?.add(usdDelta || 0);\n  } else {\n    nextShortUsd = currentShortUsd?.add(usdDelta || 0);\n  }\n\n  return {\n    currentLongUsd,\n    currentShortUsd,\n    nextLongUsd,\n    nextShortUsd,\n  };\n}\n\nexport function getNextPoolAmountsParams(p: {\n  marketInfo: MarketInfo;\n  longToken: TokenData;\n  shortToken: TokenData;\n  longPoolAmount: BigNumber;\n  shortPoolAmount: BigNumber;\n  longDeltaUsd: BigNumber;\n  shortDeltaUsd: BigNumber;\n}) {\n  const { marketInfo, longToken, shortToken, longPoolAmount, shortPoolAmount, longDeltaUsd, shortDeltaUsd } = p;\n\n  const longPrice = getMidPrice(longToken.prices);\n  const shortPrice = getMidPrice(shortToken.prices);\n\n  const longPoolUsd = convertToUsd(longPoolAmount, longToken.decimals, longPrice)!;\n  const shortPoolUsd = convertToUsd(shortPoolAmount, shortToken.decimals, shortPrice)!;\n\n  const longPoolUsdAdjustment = convertToUsd(marketInfo.longPoolAmountAdjustment, longToken.decimals, longPrice)!;\n  const shortPoolUsdAdjustment = convertToUsd(marketInfo.shortPoolAmountAdjustment, shortToken.decimals, shortPrice)!;\n\n  const nextLongPoolUsd = longPoolUsd.add(longDeltaUsd).add(longPoolUsdAdjustment);\n  const nextShortPoolUsd = shortPoolUsd.add(shortDeltaUsd).add(shortPoolUsdAdjustment);\n\n  return {\n    longPoolUsd,\n    shortPoolUsd,\n    nextLongPoolUsd,\n    nextShortPoolUsd,\n  };\n}\n\n/**\n * @see https://github.com/gmx-io/gmx-synthetics/blob/updates/contracts/pricing/SwapPricingUtils.sol\n */\nexport function getPriceImpactUsd(p: {\n  currentLongUsd: BigNumber;\n  currentShortUsd: BigNumber;\n  nextLongUsd: BigNumber;\n  nextShortUsd: BigNumber;\n  factorPositive: BigNumber;\n  factorNegative: BigNumber;\n  exponentFactor: BigNumber;\n}) {\n  const { nextLongUsd, nextShortUsd } = p;\n\n  if (nextLongUsd.lt(0) || nextShortUsd.lt(0)) {\n    throw new Error(\"Negative pool amount\");\n  }\n\n  const currentDiff = p.currentLongUsd.sub(p.currentShortUsd).abs();\n  const nextDiff = nextLongUsd.sub(nextShortUsd).abs();\n\n  const isSameSideRebalance = p.currentLongUsd.lt(p.currentShortUsd) === nextLongUsd.lt(nextShortUsd);\n\n  let impactUsd: BigNumber;\n\n  if (isSameSideRebalance) {\n    const hasPositiveImpact = nextDiff.lt(currentDiff);\n    const factor = hasPositiveImpact ? p.factorPositive : p.factorNegative;\n\n    impactUsd = calculateImpactForSameSideRebalance({\n      currentDiff,\n      nextDiff,\n      hasPositiveImpact,\n      factor,\n      exponentFactor: p.exponentFactor,\n    });\n  } else {\n    impactUsd = calculateImpactForCrossoverRebalance({\n      currentDiff,\n      nextDiff,\n      factorPositive: p.factorPositive,\n      factorNegative: p.factorNegative,\n      exponentFactor: p.exponentFactor,\n    });\n  }\n\n  return impactUsd;\n}\n\n/**\n *  @see https://github.com/gmx-io/gmx-synthetics/blob/5fd9991ff2c37ae5f24f03bc9c132730b012ebf2/contracts/pricing/PricingUtils.sol\n */\nexport function calculateImpactForSameSideRebalance(p: {\n  currentDiff: BigNumber;\n  nextDiff: BigNumber;\n  hasPositiveImpact: boolean;\n  factor: BigNumber;\n  exponentFactor: BigNumber;\n}) {\n  const { currentDiff, nextDiff, hasPositiveImpact, factor, exponentFactor } = p;\n\n  const currentImpact = applyImpactFactor(currentDiff, factor, exponentFactor);\n  const nextImpact = applyImpactFactor(nextDiff, factor, exponentFactor);\n\n  const deltaDiff = currentImpact.sub(nextImpact).abs();\n\n  return hasPositiveImpact ? deltaDiff : BigNumber.from(0).sub(deltaDiff);\n}\n\n/**\n *  @see  https://github.com/gmx-io/gmx-synthetics/blob/5fd9991ff2c37ae5f24f03bc9c132730b012ebf2/contracts/pricing/PricingUtils.sol\n */\nexport function calculateImpactForCrossoverRebalance(p: {\n  currentDiff: BigNumber;\n  nextDiff: BigNumber;\n  factorPositive: BigNumber;\n  factorNegative: BigNumber;\n  exponentFactor: BigNumber;\n}) {\n  const { currentDiff, nextDiff, factorNegative, factorPositive, exponentFactor } = p;\n\n  const positiveImpact = applyImpactFactor(currentDiff, factorPositive, exponentFactor);\n  const negativeImpactUsd = applyImpactFactor(nextDiff, factorNegative, exponentFactor);\n\n  const deltaDiffUsd = positiveImpact.sub(negativeImpactUsd).abs();\n\n  return positiveImpact.gt(negativeImpactUsd) ? deltaDiffUsd : BigNumber.from(0).sub(deltaDiffUsd);\n}\n\nexport function applyImpactFactor(diff: BigNumber, factor: BigNumber, exponent: BigNumber) {\n  // Convert diff and exponent to float js numbers\n  const _diff = Number(diff) / 10 ** 30;\n  const _exponent = Number(exponent) / 10 ** 30;\n\n  // Pow and convert back to BigNumber with 30 decimals\n  let result = bigNumberify(BigInt(Math.round(_diff ** _exponent * 10 ** 30)))!;\n\n  result = result.mul(factor).div(expandDecimals(1, 30)).div(2);\n\n  return result;\n}\n","import { HIGH_PRICE_IMPACT_BPS } from \"config/factors\";\nimport { MarketInfo } from \"domain/synthetics/markets\";\nimport { BigNumber } from \"ethers\";\nimport { applyFactor, getBasisPoints } from \"lib/numbers\";\nimport { FeeItem } from \"../types\";\nimport { PRECISION } from \"lib/legacy\";\n\nexport * from \"./executionFee\";\nexport * from \"./priceImpact\";\n\nexport function getPositionFee(marketInfo: MarketInfo, sizeDeltaUsd: BigNumber) {\n  return applyFactor(sizeDeltaUsd, marketInfo.positionFeeFactor);\n}\n\nexport function getFundingFeeFactor(marketInfo: MarketInfo, isLong: boolean, periodInSeconds: number) {\n  const { fundingPerSecond, longsPayShorts } = marketInfo;\n\n  const isPositive = isLong ? longsPayShorts : !longsPayShorts;\n\n  return fundingPerSecond.mul(isPositive ? 1 : -1).mul(periodInSeconds || 1);\n}\n\nexport function getFundingApr(marketInfo: MarketInfo, isLong: boolean, periodInSeconds: number) {\n  const fundingFactor = getFundingFeeFactor(marketInfo, isLong, periodInSeconds);\n\n  const usdImbalance = marketInfo.longInterestUsd.sub(marketInfo.shortInterestUsd).abs();\n  const fundingUsd = applyFactor(usdImbalance, fundingFactor);\n\n  if (fundingUsd.eq(0)) {\n    return BigNumber.from(0);\n  }\n\n  if (isLong && marketInfo.longInterestUsd.gt(0)) {\n    return fundingUsd.mul(PRECISION).div(marketInfo.longInterestUsd).mul(100);\n  } else if (!isLong && marketInfo.shortInterestUsd.gt(0)) {\n    return fundingUsd.mul(PRECISION).div(marketInfo.shortInterestUsd).mul(100);\n  }\n\n  return BigNumber.from(0);\n}\n\nexport function getFundingFeeRateUsd(\n  marketInfo: MarketInfo,\n  isLong: boolean,\n  sizeInUsd: BigNumber,\n  periodInSeconds: number\n) {\n  const factor = getFundingFeeFactor(marketInfo, isLong, periodInSeconds);\n\n  return applyFactor(sizeInUsd, factor);\n}\n\nexport function getBorrowingFeeFactor(marketInfo: MarketInfo, isLong: boolean, periodInSeconds: number) {\n  const factorPerSecond = isLong\n    ? marketInfo.borrowingFactorPerSecondForLongs\n    : marketInfo.borrowingFactorPerSecondForShorts;\n\n  return factorPerSecond.mul(periodInSeconds || 1);\n}\n\nexport function getBorrowingFeeRateUsd(\n  marketInfo: MarketInfo,\n  isLong: boolean,\n  sizeInUsd: BigNumber,\n  periodInSeconds: number\n) {\n  const factor = getBorrowingFeeFactor(marketInfo, isLong, periodInSeconds);\n\n  return applyFactor(sizeInUsd, factor);\n}\n\nexport function getIsHighPriceImpact(priceImpact?: FeeItem) {\n  return priceImpact?.deltaUsd.lt(0) && priceImpact.bps.abs().gte(HIGH_PRICE_IMPACT_BPS);\n}\n\nexport function getFeeItem(feeDeltaUsd?: BigNumber, basis?: BigNumber): FeeItem | undefined {\n  if (!feeDeltaUsd || !basis?.gt(0)) return undefined;\n\n  return {\n    deltaUsd: feeDeltaUsd,\n    bps: getBasisPoints(feeDeltaUsd, basis),\n  };\n}\n\nexport function getTotalFeeItem(feeItems: (FeeItem | undefined)[]): FeeItem {\n  const totalFeeItem: FeeItem = {\n    deltaUsd: BigNumber.from(0),\n    bps: BigNumber.from(0),\n  };\n\n  (feeItems.filter(Boolean) as FeeItem[]).forEach((feeItem) => {\n    totalFeeItem.deltaUsd = totalFeeItem.deltaUsd.add(feeItem.deltaUsd);\n    totalFeeItem.bps = totalFeeItem.bps.add(feeItem.bps);\n  });\n\n  return totalFeeItem;\n}\n","import useSWR from \"swr\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { BigNumber } from \"ethers\";\nimport { getProvider } from \"lib/rpc\";\n\nexport function useGasPrice(chainId: number) {\n  const { library } = useWeb3React();\n\n  const { data: gasPrice } = useSWR<BigNumber | undefined>([\"gasPrice\", chainId], {\n    fetcher: () => {\n      return new Promise(async (resolve, reject) => {\n        const provider = getProvider(library, chainId);\n\n        if (!provider) {\n          resolve(undefined);\n          return;\n        }\n\n        try {\n          const gasPrice = await provider.getGasPrice();\n          resolve(gasPrice);\n        } catch (e) {\n          // eslint-disable-next-line no-console\n          console.error(e);\n          reject(e);\n        }\n      });\n    },\n  });\n\n  return { gasPrice };\n}\n","import { getContract } from \"config/contracts\";\nimport DataStore from \"abis/DataStore.json\";\nimport { useMulticall } from \"lib/multicall\";\nimport {\n  ESTIMATED_GAS_FEE_BASE_AMOUNT,\n  ESTIMATED_GAS_FEE_MULTIPLIER_FACTOR,\n  decreaseOrderGasLimitKey,\n  depositGasLimitKey,\n  increaseOrderGasLimitKey,\n  singleSwapGasLimitKey,\n  swapOrderGasLimitKey,\n  withdrawalGasLimitKey,\n} from \"config/dataStore\";\nimport { GasLimitsConfig } from \"./types\";\n\ntype GasLimitsResult = {\n  gasLimits?: GasLimitsConfig;\n};\n\nexport function useGasLimits(chainId: number): GasLimitsResult {\n  const { data } = useMulticall(chainId, \"useGasLimitsConfig\", {\n    key: [],\n    request: () => ({\n      dataStore: {\n        contractAddress: getContract(chainId, \"DataStore\"),\n        abi: DataStore.abi,\n        calls: {\n          depositSingleToken: {\n            methodName: \"getUint\",\n            params: [depositGasLimitKey(true)],\n          },\n          depositMultiToken: {\n            methodName: \"getUint\",\n            params: [depositGasLimitKey(false)],\n          },\n          withdrawalSingleToken: {\n            methodName: \"getUint\",\n            params: [withdrawalGasLimitKey(true)],\n          },\n          withdrawalMultiToken: {\n            methodName: \"getUint\",\n            params: [withdrawalGasLimitKey(false)],\n          },\n          singleSwap: {\n            methodName: \"getUint\",\n            params: [singleSwapGasLimitKey()],\n          },\n          swapOrder: {\n            methodName: \"getUint\",\n            params: [swapOrderGasLimitKey()],\n          },\n          increaseOrder: {\n            methodName: \"getUint\",\n            params: [increaseOrderGasLimitKey()],\n          },\n          decreaseOrder: {\n            methodName: \"getUint\",\n            params: [decreaseOrderGasLimitKey()],\n          },\n          estimatedFeeBaseGasLimit: {\n            methodName: \"getUint\",\n            params: [ESTIMATED_GAS_FEE_BASE_AMOUNT],\n          },\n          estimatedFeeMultiplierFactor: {\n            methodName: \"getUint\",\n            params: [ESTIMATED_GAS_FEE_MULTIPLIER_FACTOR],\n          },\n        },\n      },\n    }),\n    parseResponse: (res) => {\n      const results = res.dataStore;\n\n      return {\n        depositSingleToken: results.depositSingleToken.returnValues[0],\n        depositMultiToken: results.depositMultiToken.returnValues[0],\n        withdrawalSingleToken: results.withdrawalSingleToken.returnValues[0],\n        withdrawalMultiToken: results.withdrawalMultiToken.returnValues[0],\n        singleSwap: results.singleSwap.returnValues[0],\n        swapOrder: results.swapOrder.returnValues[0],\n        increaseOrder: results.increaseOrder.returnValues[0],\n        decreaseOrder: results.decreaseOrder.returnValues[0],\n        estimatedFeeBaseGasLimit: results.estimatedFeeBaseGasLimit.returnValues[0],\n        estimatedFeeMultiplierFactor: results.estimatedFeeMultiplierFactor.returnValues[0],\n      };\n    },\n  });\n\n  return {\n    gasLimits: data,\n  };\n}\n","import { BigNumber } from \"ethers\";\nimport { PRECISION } from \"lib/legacy\";\nimport { applyFactor } from \"lib/numbers\";\nimport { convertToContractTokenPrices, convertToUsd, getMidPrice, getTokenData } from \"../tokens\";\nimport { TokensData } from \"../tokens/types\";\nimport { ContractMarketPrices, Market, MarketInfo, PnlFactorType } from \"./types\";\nimport { NATIVE_TOKEN_ADDRESS } from \"config/tokens\";\nimport { Token } from \"domain/tokens\";\nimport { VirtualInventoryForPositionsData, getCappedPositionImpactUsd, getPriceImpactForPosition } from \"../fees\";\n\nexport function getMarketFullName(p: { longToken: Token; shortToken: Token; indexToken: Token; isSpotOnly: boolean }) {\n  const { indexToken, longToken, shortToken, isSpotOnly } = p;\n\n  return `${getMarketIndexName({ indexToken, isSpotOnly })} ${getMarketPoolName({ longToken, shortToken })}`;\n}\n\nexport function getMarketIndexName(p: { indexToken: Token; isSpotOnly: boolean }) {\n  const { indexToken, isSpotOnly } = p;\n\n  if (isSpotOnly) {\n    return `SPOT`;\n  }\n\n  return `${indexToken.baseSymbol || indexToken.symbol}/USD`;\n}\n\nexport function getMarketPoolName(p: { longToken: Token; shortToken: Token }) {\n  const { longToken, shortToken } = p;\n\n  return `[${longToken.symbol}-${shortToken.symbol}]`;\n}\n\nexport function getTokenPoolType(marketInfo: MarketInfo, tokenAddress: string) {\n  const { longToken, shortToken } = marketInfo;\n\n  if (tokenAddress === longToken.address || (tokenAddress === NATIVE_TOKEN_ADDRESS && longToken.isWrapped)) {\n    return \"long\";\n  }\n\n  if (tokenAddress === shortToken.address || (tokenAddress === NATIVE_TOKEN_ADDRESS && shortToken.isWrapped)) {\n    return \"short\";\n  }\n\n  return undefined;\n}\n\nexport function getOppositeCollateral(marketInfo: MarketInfo, tokenAddress: string) {\n  const poolType = getTokenPoolType(marketInfo, tokenAddress);\n\n  if (poolType === \"long\") {\n    return marketInfo.shortToken;\n  }\n\n  if (poolType === \"short\") {\n    return marketInfo.longToken;\n  }\n\n  return undefined;\n}\n\nexport function isMarketCollateral(marketInfo: MarketInfo, tokenAddress: string) {\n  return getTokenPoolType(marketInfo, tokenAddress) !== undefined;\n}\n\nexport function isMarketIndexToken(marketInfo: MarketInfo, tokenAddress: string) {\n  return (\n    tokenAddress === marketInfo.indexToken.address ||\n    (tokenAddress === NATIVE_TOKEN_ADDRESS && marketInfo.indexToken.isWrapped)\n  );\n}\n\nexport function getMarketCollateral(marketInfo: MarketInfo, isLong: boolean) {\n  return isLong ? marketInfo.longToken : marketInfo.shortToken;\n}\n\nexport function getPoolUsd(marketInfo: MarketInfo, isLong: boolean, priceType: \"minPrice\" | \"maxPrice\" | \"midPrice\") {\n  const poolAmount = isLong ? marketInfo.longPoolAmount : marketInfo.shortPoolAmount;\n  const token = isLong ? marketInfo.longToken : marketInfo.shortToken;\n\n  let price: BigNumber;\n\n  if (priceType === \"minPrice\") {\n    price = token.prices?.minPrice;\n  } else if (priceType === \"maxPrice\") {\n    price = token.prices?.maxPrice;\n  } else {\n    price = getMidPrice(token.prices);\n  }\n\n  return convertToUsd(poolAmount, token.decimals, price)!;\n}\n\nexport function getReservedUsd(marketInfo: MarketInfo, isLong: boolean) {\n  const { indexToken } = marketInfo;\n\n  if (isLong) {\n    return convertToUsd(marketInfo.longInterestInTokens, marketInfo.indexToken.decimals, indexToken.prices.maxPrice)!;\n  } else {\n    return marketInfo.shortInterestUsd;\n  }\n}\n\nexport function getMaxReservedUsd(marketInfo: MarketInfo, isLong: boolean) {\n  const poolUsd = getPoolUsd(marketInfo, isLong, \"minPrice\");\n  const reserveFactor = isLong ? marketInfo.reserveFactorLong : marketInfo.reserveFactorShort;\n\n  return poolUsd.mul(reserveFactor).div(PRECISION);\n}\n\nexport function getAvailableUsdLiquidityForPosition(marketInfo: MarketInfo, isLong: boolean) {\n  if (marketInfo.isSpotOnly) {\n    return BigNumber.from(0);\n  }\n\n  const maxReservedUsd = getMaxReservedUsd(marketInfo, isLong);\n  const reservedUsd = getReservedUsd(marketInfo, isLong);\n\n  return maxReservedUsd.sub(reservedUsd);\n}\n\nexport function getAvailableUsdLiquidityForCollateral(marketInfo: MarketInfo, isLong: boolean) {\n  const reservedUsd = getReservedUsd(marketInfo, isLong);\n\n  const poolUsd = getPoolUsd(marketInfo, isLong, \"minPrice\");\n\n  return poolUsd.sub(reservedUsd);\n}\n\nexport function getCappedPoolPnl(p: {\n  marketInfo: MarketInfo;\n  poolUsd: BigNumber;\n  isLong: boolean;\n  maximize: boolean;\n  pnlFactorType: PnlFactorType;\n}) {\n  const { marketInfo, poolUsd, isLong, pnlFactorType, maximize } = p;\n\n  let poolPnl: BigNumber;\n\n  if (isLong) {\n    poolPnl = maximize ? marketInfo.pnlLongMax : marketInfo.pnlLongMin;\n  } else {\n    poolPnl = maximize ? marketInfo.pnlShortMax : marketInfo.pnlShortMin;\n  }\n\n  if (poolPnl.lt(0)) {\n    return poolPnl;\n  }\n\n  let maxPnlFactor: BigNumber;\n\n  if (pnlFactorType === \"FOR_TRADERS\") {\n    maxPnlFactor = isLong ? marketInfo.maxPnlFactorForTradersLong : marketInfo.maxPnlFactorForTradersShort;\n  } else if (pnlFactorType === \"FOR_DEPOSITS\") {\n    maxPnlFactor = isLong ? marketInfo.maxPnlFactorForDepositsLong : marketInfo.maxPnlFactorForDepositsShort;\n  } else {\n    maxPnlFactor = isLong ? marketInfo.maxPnlFactorForWithdrawalsLong : marketInfo.maxPnlFactorForWithdrawalsShort;\n  }\n\n  const maxPnl = applyFactor(poolUsd, maxPnlFactor);\n\n  return poolPnl.gt(maxPnl) ? maxPnl : poolPnl;\n}\n\nexport function getMostLiquidMarketForPosition(\n  marketsInfo: MarketInfo[],\n  indexTokenAddress: string,\n  collateralTokenAddress: string | undefined,\n  isLong: boolean\n) {\n  let bestMarket: MarketInfo | undefined;\n  let bestLiquidity: BigNumber | undefined;\n\n  for (const marketInfo of marketsInfo) {\n    if (marketInfo.isSpotOnly) {\n      continue;\n    }\n\n    let isCandidate = isMarketIndexToken(marketInfo, indexTokenAddress);\n\n    if (collateralTokenAddress) {\n      isCandidate = isMarketCollateral(marketInfo, collateralTokenAddress);\n    }\n\n    if (isCandidate) {\n      const liquidity = getAvailableUsdLiquidityForPosition(marketInfo, isLong);\n\n      if (liquidity && liquidity.gt(bestLiquidity || 0)) {\n        bestMarket = marketInfo;\n        bestLiquidity = liquidity;\n      }\n    }\n  }\n\n  return bestMarket;\n}\n\nexport function getMostLiquidMarketForSwap(marketsInfo: MarketInfo[], toTokenAddress: string) {\n  let bestMarket: MarketInfo | undefined;\n  let bestLiquidity: BigNumber | undefined;\n\n  for (const marketInfo of marketsInfo) {\n    if (isMarketCollateral(marketInfo, toTokenAddress)) {\n      const liquidity = getAvailableUsdLiquidityForCollateral(\n        marketInfo,\n        getTokenPoolType(marketInfo, toTokenAddress) === \"long\"\n      );\n\n      if (liquidity && (!bestLiquidity || liquidity.gt(bestLiquidity))) {\n        bestMarket = marketInfo;\n        bestLiquidity = liquidity;\n      }\n    }\n  }\n\n  return bestMarket;\n}\n\nexport function getMinPriceImpactMarket(\n  marketsInfo: MarketInfo[],\n  virtualInventoryForPositions: VirtualInventoryForPositionsData,\n  indexTokenAddress: string,\n  isLong: boolean,\n  sizeDeltaUsd: BigNumber\n) {\n  let bestMarket: MarketInfo | undefined;\n  // minimize negative impact\n  let bestImpactDeltaUsd: BigNumber | undefined;\n\n  for (const marketInfo of marketsInfo) {\n    const liquidity = getAvailableUsdLiquidityForPosition(marketInfo, isLong);\n\n    if (isMarketIndexToken(marketInfo, indexTokenAddress) && liquidity.gt(sizeDeltaUsd)) {\n      let priceImpactDeltaUsd = getPriceImpactForPosition(\n        marketInfo,\n        virtualInventoryForPositions,\n        sizeDeltaUsd,\n        isLong\n      );\n      priceImpactDeltaUsd = getCappedPositionImpactUsd(marketInfo, priceImpactDeltaUsd, sizeDeltaUsd);\n\n      if (!bestImpactDeltaUsd || priceImpactDeltaUsd.gt(bestImpactDeltaUsd)) {\n        bestMarket = marketInfo;\n        bestImpactDeltaUsd = priceImpactDeltaUsd;\n      }\n    }\n  }\n\n  return {\n    bestMarket,\n    bestImpactDeltaUsd,\n  };\n}\n\nexport function getClaimableFundingAmount(marketInfo: MarketInfo, isLong: boolean) {\n  return isLong ? marketInfo.claimableFundingAmountLong : marketInfo.claimableFundingAmountShort;\n}\n\nexport function getTotalClaimableFundingUsd(markets: MarketInfo[]) {\n  return markets.reduce((acc, market) => {\n    const { longToken, shortToken } = market;\n\n    const amountLong = getClaimableFundingAmount(market, true);\n    const amountShort = getClaimableFundingAmount(market, false);\n\n    const usdLong = convertToUsd(amountLong, longToken.decimals, longToken.prices.minPrice)!;\n    const usdShort = convertToUsd(amountShort, shortToken.decimals, shortToken.prices.minPrice)!;\n\n    return acc.add(usdLong).add(usdShort);\n  }, BigNumber.from(0));\n}\n\nexport function getContractMarketPrices(tokensData: TokensData, market: Market): ContractMarketPrices {\n  const indexToken = getTokenData(tokensData, market.indexTokenAddress)!;\n  const longToken = getTokenData(tokensData, market.longTokenAddress)!;\n  const shortToken = getTokenData(tokensData, market.shortTokenAddress)!;\n\n  return {\n    indexTokenPrice: convertToContractTokenPrices(indexToken.prices, indexToken.decimals),\n    longTokenPrice: convertToContractTokenPrices(longToken.prices, longToken.decimals),\n    shortTokenPrice: convertToContractTokenPrices(shortToken.prices, shortToken.decimals),\n  };\n}\n","import SyntheticsReader from \"abis/SyntheticsReader.json\";\nimport { getContract } from \"config/contracts\";\nimport { useMulticall } from \"lib/multicall\";\nimport { MarketsData } from \"./types\";\nimport { convertTokenAddress, getToken } from \"config/tokens\";\nimport { getMarketFullName } from \"./utils\";\nimport { ethers } from \"ethers\";\n\ntype MarketsResult = {\n  marketsData?: MarketsData;\n  marketsAddresses?: string[];\n};\n\nconst MARKETS_COUNT = 100;\n\nexport function useMarkets(chainId: number): MarketsResult {\n  const { data } = useMulticall(chainId, \"useMarketsData\", {\n    key: [],\n    request: () => ({\n      reader: {\n        contractAddress: getContract(chainId, \"SyntheticsReader\"),\n        abi: SyntheticsReader.abi,\n        calls: {\n          markets: {\n            methodName: \"getMarkets\",\n            params: [getContract(chainId, \"DataStore\"), 0, MARKETS_COUNT],\n          },\n        },\n      },\n    }),\n    parseResponse: (res) => {\n      return res.reader.markets.returnValues.reduce(\n        (acc: { marketsData: MarketsData; marketsAddresses: string[] }, marketValues) => {\n          const [marketTokenAddress, indexTokenAddress, longTokenAddress, shortTokenAddress, data] = marketValues;\n\n          try {\n            const indexToken = getToken(chainId, convertTokenAddress(chainId, indexTokenAddress, \"native\"));\n            const longToken = getToken(chainId, longTokenAddress);\n            const shortToken = getToken(chainId, shortTokenAddress);\n\n            const isSameCollaterals = longTokenAddress === shortTokenAddress;\n            const isSpotOnly = indexTokenAddress === ethers.constants.AddressZero;\n\n            const name = getMarketFullName({ indexToken, longToken, shortToken, isSpotOnly });\n\n            acc.marketsData[marketTokenAddress] = {\n              marketTokenAddress,\n              indexTokenAddress,\n              longTokenAddress,\n              shortTokenAddress,\n              isSameCollaterals,\n              isSpotOnly,\n              name,\n              data,\n            };\n\n            acc.marketsAddresses.push(marketTokenAddress);\n          } catch (e) {\n            // ignore parsing errors on unknown tokens\n          }\n\n          return acc;\n        },\n        { marketsData: {}, marketsAddresses: [] }\n      );\n    },\n  });\n\n  return {\n    marketsData: data?.marketsData,\n    marketsAddresses: data?.marketsAddresses,\n  };\n}\n","import { useWeb3React } from \"@web3-react/core\";\nimport SyntheticsReader from \"abis/SyntheticsReader.json\";\nimport TokenAbi from \"abis/Token.json\";\nimport { getContract } from \"config/contracts\";\nimport { MAX_PNL_FACTOR_FOR_DEPOSITS_KEY, MAX_PNL_FACTOR_FOR_WITHDRAWALS_KEY } from \"config/dataStore\";\nimport { getTokenBySymbol } from \"config/tokens\";\nimport { TokensData, useAvailableTokensData } from \"domain/synthetics/tokens\";\nimport { USD_DECIMALS } from \"lib/legacy\";\nimport { useMulticall } from \"lib/multicall\";\nimport { expandDecimals } from \"lib/numbers\";\nimport { getByKey } from \"lib/objects\";\nimport { useMarkets } from \"./useMarkets\";\nimport { getContractMarketPrices } from \"./utils\";\n\ntype MarketTokensDataResult = {\n  marketTokensData?: TokensData;\n};\n\nexport function useMarketTokensData(chainId: number, p: { isDeposit: boolean }): MarketTokensDataResult {\n  const { isDeposit } = p;\n  const { account } = useWeb3React();\n  const { tokensData } = useAvailableTokensData(chainId);\n  const { marketsData, marketsAddresses } = useMarkets(chainId);\n\n  const isDataLoaded = tokensData && marketsAddresses?.length;\n\n  const { data } = useMulticall(chainId, \"useMarketTokensData\", {\n    key: isDataLoaded ? [account, marketsAddresses.join(\"-\")] : undefined,\n    request: () =>\n      marketsAddresses!.reduce((requests, marketAddress) => {\n        const market = getByKey(marketsData, marketAddress)!;\n        const marketPrices = getContractMarketPrices(tokensData!, market);\n\n        if (marketPrices) {\n          const marketProps = {\n            marketToken: market.marketTokenAddress,\n            longToken: market.longTokenAddress,\n            shortToken: market.shortTokenAddress,\n            indexToken: market.indexTokenAddress,\n          };\n\n          const pnlFactorType = isDeposit ? MAX_PNL_FACTOR_FOR_DEPOSITS_KEY : MAX_PNL_FACTOR_FOR_WITHDRAWALS_KEY;\n\n          requests[`${marketAddress}-prices`] = {\n            contractAddress: getContract(chainId, \"SyntheticsReader\"),\n            abi: SyntheticsReader.abi,\n            calls: {\n              minPrice: {\n                methodName: \"getMarketTokenPrice\",\n                params: [\n                  getContract(chainId, \"DataStore\"),\n                  marketProps,\n                  marketPrices.indexTokenPrice,\n                  marketPrices.longTokenPrice,\n                  marketPrices.shortTokenPrice,\n                  pnlFactorType,\n                  false,\n                ],\n              },\n              maxPrice: {\n                methodName: \"getMarketTokenPrice\",\n                params: [\n                  getContract(chainId, \"DataStore\"),\n                  marketProps,\n                  marketPrices.indexTokenPrice,\n                  marketPrices.longTokenPrice,\n                  marketPrices.shortTokenPrice,\n                  pnlFactorType,\n                  true,\n                ],\n              },\n            },\n          };\n        }\n\n        requests[`${marketAddress}-tokenData`] = {\n          contractAddress: marketAddress,\n          abi: TokenAbi.abi,\n          calls: {\n            totalSupply: {\n              methodName: \"totalSupply\",\n              params: [],\n            },\n            balance: account\n              ? {\n                  methodName: \"balanceOf\",\n                  params: [account],\n                }\n              : undefined,\n          },\n        };\n\n        return requests;\n      }, {}),\n    parseResponse: (res) =>\n      marketsAddresses!.reduce((marketTokensMap: TokensData, marketAddress: string) => {\n        const pricesData = res[`${marketAddress}-prices`];\n        const tokenData = res[`${marketAddress}-tokenData`];\n\n        const tokenConfig = getTokenBySymbol(chainId, \"GM\");\n\n        const minPrice = pricesData?.minPrice.returnValues[0];\n        const maxPrice = pricesData?.maxPrice.returnValues[0];\n\n        marketTokensMap[marketAddress] = {\n          ...tokenConfig,\n          address: marketAddress,\n          prices: {\n            minPrice: minPrice?.gt(0) ? minPrice : expandDecimals(1, USD_DECIMALS),\n            maxPrice: maxPrice?.gt(0) ? maxPrice : expandDecimals(1, USD_DECIMALS),\n          },\n          totalSupply: tokenData?.totalSupply.returnValues[0],\n          balance: tokenData?.balance?.returnValues[0],\n        };\n\n        return marketTokensMap;\n      }, {} as TokensData),\n  });\n\n  return {\n    marketTokensData: data,\n  };\n}\n","import useSWR from \"swr\";\nimport { gql } from \"@apollo/client\";\nimport { BigNumber } from \"ethers\";\nimport { BASIS_POINTS_DIVISOR } from \"lib/legacy\";\nimport { bigNumberify, expandDecimals } from \"lib/numbers\";\nimport { getSyntheticsGraphClient } from \"lib/subgraph\";\nimport { useMarketTokensData } from \"./useMarketTokensData\";\nimport { useMarkets } from \"./useMarkets\";\n\ntype RawCollectedFee = {\n  id: string;\n  period: string;\n  marketAddress: string;\n  collateralTokenAddress: string;\n  feeUsdForPool: string;\n  timestampGroup: number;\n};\n\ntype MarketTokensAPRData = {\n  [marketAddress: string]: BigNumber;\n};\n\nexport type MarketTokensAPRResult = {\n  marketsTokensAPRData?: MarketTokensAPRData;\n  avgMarketsAPR?: BigNumber;\n};\n\nexport function useMarketTokensAPR(chainId: number): MarketTokensAPRResult {\n  const { marketsData } = useMarkets(chainId);\n  const { marketTokensData } = useMarketTokensData(chainId, { isDeposit: false });\n\n  const client = getSyntheticsGraphClient(chainId);\n\n  const marketAddresses = Object.keys(marketTokensData || {});\n\n  const key = marketAddresses.length && client ? marketAddresses.join(\",\") : null;\n\n  const { data } = useSWR(key, {\n    fetcher: async () => {\n      const getMarketQuery = (marketAddress: string, collateralTokenAddress: string) => `\n        _${marketAddress}_${collateralTokenAddress}: collectedPositionFees(\n            first: 7,\n            orderBy: timestampGroup,\n            orderDirection: desc,\n            where: { marketAddress: \"${marketAddress.toLowerCase()}\", collateralTokenAddress: \"${collateralTokenAddress.toLocaleLowerCase()}\", period: \"1d\" }\n        ) {\n            id\n            period\n            marketAddress\n            collateralTokenAddress\n            feeUsdForPool\n            timestampGroup\n        }\n      `;\n\n      const queryBody = marketAddresses.reduce((acc, marketAddress) => {\n        const { longTokenAddress, shortTokenAddress } = marketsData![marketAddress];\n\n        acc += getMarketQuery(marketAddress, longTokenAddress);\n        acc += getMarketQuery(marketAddress, shortTokenAddress);\n\n        return acc;\n      }, \"\");\n\n      const { data: response } = await client!.query({ query: gql(`{${queryBody}}`) });\n\n      const marketTokensAPRData = marketAddresses.reduce((acc, marketAddress) => {\n        const market = marketsData?.[marketAddress]!;\n        const marketToken = marketTokensData?.[marketAddress]!;\n\n        const feeItems = [\n          ...response[`_${marketAddress}_${market.longTokenAddress}`],\n          ...response[`_${marketAddress}_${market.shortTokenAddress}`],\n        ];\n\n        const feesUsdForPeriod = feeItems.reduce((acc, rawCollectedFee: RawCollectedFee) => {\n          return acc.add(bigNumberify(rawCollectedFee.feeUsdForPool));\n        }, BigNumber.from(0));\n\n        const feesPerMarketToken = feesUsdForPeriod.mul(expandDecimals(1, 18)).div(marketToken.totalSupply);\n        const weeksInYear = 52;\n        const apr = feesPerMarketToken.mul(BASIS_POINTS_DIVISOR).div(marketToken.prices!.maxPrice).mul(weeksInYear);\n\n        acc[marketAddress] = apr;\n\n        return acc;\n      }, {} as MarketTokensAPRData);\n\n      const avgApr = Object.values(marketTokensAPRData)\n        .reduce((acc, apr) => {\n          return acc.add(apr);\n        }, BigNumber.from(0))\n        .div(marketAddresses.length);\n\n      return {\n        marketTokensAPRData,\n        avgMarketsAPR: avgApr,\n      };\n    },\n  });\n\n  return {\n    marketsTokensAPRData: data?.marketTokensAPRData,\n    avgMarketsAPR: data?.avgMarketsAPR,\n  };\n}\n","import { Trans } from \"@lingui/macro\";\nimport { useCallback } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport { isHomeSite } from \"lib/legacy\";\n\nimport { useWeb3React } from \"@web3-react/core\";\n\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport { ARBITRUM, AVALANCHE, AVALANCHE_FUJI } from \"config/chains\";\nimport { getIcon } from \"config/icons\";\nimport { useChainId } from \"lib/chains\";\nimport { switchNetwork } from \"lib/wallets\";\nimport APRLabel from \"../APRLabel/APRLabel\";\nimport { HeaderLink } from \"../Header/HeaderLink\";\nimport { useMarketTokensAPR } from \"domain/synthetics/markets/useMarketTokensAPR\";\nimport { isDevelopment } from \"config/env\";\nimport { formatAmount } from \"lib/numbers\";\n\nconst glpIcon = getIcon(\"common\", \"glp\");\nconst gmxIcon = getIcon(\"common\", \"gmx\");\nconst gmIcon = getIcon(\"common\", \"gm\");\n\nexport default function TokenCard({ showRedirectModal, redirectPopupTimestamp }) {\n  const isHome = isHomeSite();\n  const { chainId } = useChainId();\n  const { active } = useWeb3React();\n\n  const { avgMarketsAPR: fujiAvgMarketsAPR } = useMarketTokensAPR(AVALANCHE_FUJI);\n\n  const changeNetwork = useCallback(\n    (network) => {\n      if (network === chainId) {\n        return;\n      }\n      if (!active) {\n        setTimeout(() => {\n          return switchNetwork(network, active);\n        }, 500);\n      } else {\n        return switchNetwork(network, active);\n      }\n    },\n    [chainId, active]\n  );\n\n  const BuyLink = ({ className, to, children, network }) => {\n    if (isHome && showRedirectModal) {\n      return (\n        <HeaderLink\n          to={to}\n          className={className}\n          redirectPopupTimestamp={redirectPopupTimestamp}\n          showRedirectModal={showRedirectModal}\n        >\n          {children}\n        </HeaderLink>\n      );\n    }\n\n    return (\n      <Link to={to} className={className} onClick={() => changeNetwork(network)}>\n        {children}\n      </Link>\n    );\n  };\n\n  return (\n    <div className=\"Home-token-card-options\">\n      <div className=\"Home-token-card-option\">\n        <div className=\"Home-token-card-option-icon\">\n          <img src={gmxIcon} width=\"40\" alt=\"GMX Icons\" /> GMX\n        </div>\n        <div className=\"Home-token-card-option-info\">\n          <div className=\"Home-token-card-option-title\">\n            <Trans>GMX is the utility and governance token. Accrues 30% of the platform's generated fees.</Trans>\n          </div>\n          <div className=\"Home-token-card-option-apr\">\n            <Trans>Arbitrum APR:</Trans> <APRLabel chainId={ARBITRUM} label=\"gmxAprTotal\" />,{\" \"}\n            <Trans>Avalanche APR:</Trans> <APRLabel chainId={AVALANCHE} label=\"gmxAprTotal\" key=\"AVALANCHE\" />\n          </div>\n          <div className=\"Home-token-card-option-action\">\n            <div className=\"buy\">\n              <BuyLink to=\"/buy_gmx\" className=\"default-btn\" network={ARBITRUM}>\n                <Trans>Buy on Arbitrum</Trans>\n              </BuyLink>\n              <BuyLink to=\"/buy_gmx\" className=\"default-btn\" network={AVALANCHE}>\n                <Trans>Buy on Avalanche</Trans>\n              </BuyLink>\n            </div>\n            <ExternalLink href=\"https://gmxio.gitbook.io/gmx/tokenomics\" className=\"default-btn read-more\">\n              <Trans>Read more</Trans>\n            </ExternalLink>\n          </div>\n        </div>\n      </div>\n      <div className=\"Home-token-card-option\">\n        <div className=\"Home-token-card-option-icon\">\n          <img src={glpIcon} width=\"40\" alt=\"GLP Icon\" /> GLP\n        </div>\n        <div className=\"Home-token-card-option-info\">\n          <div className=\"Home-token-card-option-title\">\n            <Trans>\n              GLP is the liquidity provider token for GMX V1 markets. Accrues 70% of the V1 markets generated fees.\n            </Trans>\n          </div>\n          <div className=\"Home-token-card-option-apr\">\n            <Trans>Arbitrum APR:</Trans> <APRLabel chainId={ARBITRUM} label=\"glpAprTotal\" key=\"ARBITRUM\" />,{\" \"}\n            <Trans>Avalanche APR:</Trans> <APRLabel chainId={AVALANCHE} label=\"glpAprTotal\" key=\"AVALANCHE\" />\n          </div>\n          <div className=\"Home-token-card-option-action\">\n            <div className=\"buy\">\n              <BuyLink to=\"/buy_glp\" className=\"default-btn\" network={ARBITRUM}>\n                <Trans>Buy on Arbitrum</Trans>\n              </BuyLink>\n              <BuyLink to=\"/buy_glp\" className=\"default-btn\" network={AVALANCHE}>\n                <Trans>Buy on Avalanche</Trans>\n              </BuyLink>\n            </div>\n            <a\n              href=\"https://gmxio.gitbook.io/gmx/glp\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              className=\"default-btn read-more\"\n            >\n              <Trans>Read more</Trans>\n            </a>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"Home-token-card-option\">\n        <div className=\"Home-token-card-option-icon\">\n          <img src={gmIcon} alt=\"gmxBigIcon\" /> GM\n        </div>\n        <div className=\"Home-token-card-option-info\">\n          <div className=\"Home-token-card-option-title\">\n            <Trans>\n              GM is the liquidity provider token for GMX V2 markets. Accrues 70% of the V2 markets generated fees.\n            </Trans>\n          </div>\n\n          {isDevelopment() && (\n            <div className=\"Home-token-card-option-apr\">\n              <Trans>Avalanche FUJI Avg. APR:</Trans> {formatAmount(fujiAvgMarketsAPR, 2, 2)}%\n            </div>\n          )}\n\n          <div className=\"Home-token-card-option-action\">\n            <div className=\"buy\">\n              <BuyLink to=\"/pools\" className=\"default-btn\" network={AVALANCHE_FUJI}>\n                <Trans>Buy on Avalanche FUJI</Trans>\n              </BuyLink>\n            </div>\n            {/* <a\n                href=\"https://gmxio.gitbook.io/gmx/glp\"\n                target=\"_blank\"\n                rel=\"noreferrer\"\n                className=\"default-btn read-more\"\n              >\n                <Trans>Read more</Trans>\n              </a> */}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { Helmet } from \"react-helmet\";\n\nfunction SEO(props) {\n  const { children, ...customMeta } = props;\n  const meta = {\n    title: \"GMX | Decentralized Perpetual Exchange\",\n    description:\n      \"Trade spot or perpetual BTC, ETH, AVAX and other top cryptocurrencies with up to 50x leverage directly from your wallet on Arbitrum and Avalanche.\",\n    image: \"https://gmx.io/og.png\",\n    type: \"exchange\",\n    ...customMeta,\n  };\n  return (\n    <>\n      <Helmet>\n        <title>{meta.title}</title>\n        <meta name=\"robots\" content=\"follow, index\" />\n        <meta content={meta.description} name=\"description\" />\n        <meta property=\"og:type\" content={meta.type} />\n        <meta property=\"og:site_name\" content=\"GMX\" />\n        <meta property=\"og:description\" content={meta.description} />\n        <meta property=\"og:title\" content={meta.title} />\n        <meta property=\"og:image\" content={meta.image} />\n        <meta name=\"twitter:card\" content=\"summary_large_image\" />\n        <meta name=\"twitter:site\" content=\"@gmx_io\" />\n        <meta name=\"twitter:title\" content={meta.title} />\n        <meta name=\"twitter:description\" content={meta.description} />\n        <meta name=\"twitter:image\" content={meta.image} />\n      </Helmet>\n      {children}\n    </>\n  );\n}\n\nexport default SEO;\n","import React from \"react\";\nimport { Trans } from \"@lingui/macro\";\nimport Footer from \"components/Footer/Footer\";\nimport \"./Buy.css\";\nimport TokenCard from \"components/TokenCard/TokenCard\";\nimport buyGMXIcon from \"img/buy_gmx.svg\";\nimport SEO from \"components/Common/SEO\";\nimport { getPageTitle } from \"lib/legacy\";\n\nexport default function BuyGMXGLP() {\n  return (\n    <SEO title={getPageTitle(\"Buy GLP or GMX\")}>\n      <div className=\"BuyGMXGLP page-layout\">\n        <div className=\"BuyGMXGLP-container default-container\">\n          <div className=\"section-title-block\">\n            <div className=\"section-title-icon\">\n              <img src={buyGMXIcon} alt=\"buyGMXIcon\" />\n            </div>\n            <div className=\"section-title-content\">\n              <div className=\"Page-title\">\n                <Trans>Buy Protocol Tokens</Trans>\n              </div>\n            </div>\n          </div>\n          <TokenCard />\n        </div>\n        <Footer />\n      </div>\n    </SEO>\n  );\n}\n","import { Trans } from \"@lingui/macro\";\nimport cx from \"classnames\";\nimport { ChangeEvent, ReactNode } from \"react\";\nimport \"./BuyInputSection.css\";\n\ntype Props = {\n  topLeftLabel: string;\n  topLeftValue?: string;\n  topRightLabel?: string;\n  topRightValue?: string;\n  onClickTopRightLabel?: () => void;\n  inputValue?: number | string;\n  onInputValueChange?: (e: ChangeEvent<HTMLInputElement>) => void;\n  onClickMax?: () => void;\n  onFocus?: () => void;\n  onBlur?: () => void;\n  showMaxButton?: boolean;\n  staticInput?: boolean;\n  children?: ReactNode;\n};\n\nexport default function BuyInputSection(props: Props) {\n  const {\n    topLeftLabel,\n    topLeftValue,\n    topRightLabel,\n    topRightValue,\n    onClickTopRightLabel,\n    inputValue,\n    onInputValueChange,\n    onClickMax,\n    onFocus,\n    onBlur,\n    showMaxButton,\n    staticInput,\n    children,\n  } = props;\n\n  return (\n    <div className=\"Exchange-swap-section buy-input\">\n      <div className=\"Exchange-swap-section-top\">\n        <div className=\"muted\">\n          {topLeftLabel} {topLeftValue}\n        </div>\n        <div className={cx(\"align-right\", { clickable: onClickTopRightLabel })} onClick={onClickTopRightLabel}>\n          <span className=\"Exchange-swap-label muted\">{topRightLabel}</span>&nbsp;\n          <span className=\"Exchange-swap-balance\">{topRightValue}</span>\n        </div>\n      </div>\n      <div className=\"Exchange-swap-section-bottom\">\n        <div className=\"Exchange-swap-input-container\">\n          {!staticInput && (\n            <input\n              type=\"number\"\n              min=\"0\"\n              placeholder=\"0.0\"\n              className=\"Exchange-swap-input\"\n              value={inputValue}\n              onChange={onInputValueChange}\n              onFocus={onFocus}\n              onBlur={onBlur}\n            />\n          )}\n          {staticInput && <div className=\"InputSection-static-input\">{inputValue}</div>}\n          {showMaxButton && (\n            <div className=\"Exchange-swap-max\" onClick={onClickMax}>\n              <Trans>MAX</Trans>\n            </div>\n          )}\n        </div>\n        <div className=\"PositionEditor-token-symbol\">{children}</div>\n      </div>\n    </div>\n  );\n}\n","import { Menu } from \"@headlessui/react\";\nimport { FiChevronDown } from \"react-icons/fi\";\nimport \"./AssetDropdown.css\";\nimport coingeckoIcon from \"img/ic_coingecko_16.svg\";\nimport metamaskIcon from \"img/ic_metamask_16.svg\";\nimport nansenPortfolioIcon from \"img/nansen_portfolio.svg\";\nimport { useWeb3React } from \"@web3-react/core\";\n\nimport { t, Trans } from \"@lingui/macro\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport { EXPLORER_LINKS, PLATFORM_TOKENS } from \"config/tokens\";\nimport { addTokenToMetamask } from \"lib/wallets\";\nimport { useChainId } from \"lib/chains\";\nimport { Token } from \"domain/tokens\";\nimport { ARBITRUM, AVALANCHE } from \"config/chains\";\nimport { getIcon } from \"config/icons\";\n\nconst avalancheIcon = getIcon(AVALANCHE, \"network\");\nconst arbitrumIcon = getIcon(ARBITRUM, \"network\");\n\ntype Props = {\n  assetSymbol: string;\n  assetInfo?: Token;\n};\n\nfunction AssetDropdown({ assetSymbol, assetInfo }: Props) {\n  const { active } = useWeb3React();\n  const { chainId } = useChainId();\n  let { coingecko, arbitrum, avalanche, reserves } = EXPLORER_LINKS[chainId][assetSymbol] || {};\n  const unavailableTokenSymbols =\n    {\n      42161: [\"ETH\"],\n      43114: [\"AVAX\"],\n    }[chainId] || [];\n\n  return (\n    <Menu>\n      <Menu.Button as=\"div\" className=\"dropdown-arrow center-both\">\n        <FiChevronDown size={20} />\n      </Menu.Button>\n      <Menu.Items as=\"div\" className=\"asset-menu-items\">\n        <Menu.Item>\n          <>\n            {reserves && assetSymbol === \"GLP\" && (\n              <ExternalLink href={reserves} className=\"asset-item\">\n                <img className=\"asset-item-icon\" src={nansenPortfolioIcon} alt=\"Proof of Reserves\" />\n                <p>\n                  <Trans>Proof of Reserves</Trans>\n                </p>\n              </ExternalLink>\n            )}\n          </>\n        </Menu.Item>\n        <Menu.Item>\n          <>\n            {coingecko && (\n              <ExternalLink href={coingecko} className=\"asset-item\">\n                <img className=\"asset-item-icon\" src={coingeckoIcon} alt=\"Open in Coingecko\" />\n                <p>\n                  <Trans>Open in Coingecko</Trans>\n                </p>\n              </ExternalLink>\n            )}\n          </>\n        </Menu.Item>\n        <Menu.Item>\n          <>\n            {arbitrum && (\n              <ExternalLink href={arbitrum} className=\"asset-item\">\n                <img className=\"asset-item-icon\" src={arbitrumIcon} alt=\"Open in explorer\" />\n                <p>\n                  <Trans>Open in Explorer</Trans>\n                </p>\n              </ExternalLink>\n            )}\n            {avalanche && (\n              <ExternalLink href={avalanche} className=\"asset-item\">\n                <img className=\"asset-item-icon\" src={avalancheIcon} alt=\"Open in explorer\" />\n                <p>\n                  <Trans>Open in Explorer</Trans>\n                </p>\n              </ExternalLink>\n            )}\n          </>\n        </Menu.Item>\n        <Menu.Item>\n          <>\n            {active && unavailableTokenSymbols.indexOf(assetSymbol) < 0 && (\n              <div\n                onClick={() => {\n                  let token = assetInfo\n                    ? { ...assetInfo, image: assetInfo.imageUrl }\n                    : PLATFORM_TOKENS[chainId][assetSymbol];\n                  addTokenToMetamask(token);\n                }}\n                className=\"asset-item\"\n              >\n                <img className=\"asset-item-icon\" src={metamaskIcon} alt={t`Add to Metamask`} />\n                <p>\n                  <Trans>Add to Metamask</Trans>\n                </p>\n              </div>\n            )}\n          </>\n        </Menu.Item>\n      </Menu.Items>\n    </Menu>\n  );\n}\n\nexport default AssetDropdown;\n","import { useEffect, useState } from \"react\";\nimport { BigNumber } from \"ethers\";\nimport { ethers } from \"ethers\";\nimport Modal from \"../Modal/Modal\";\nimport { get1InchSwapUrl } from \"config/links\";\nimport { getLowestFeeTokenForBuyGlp, InfoTokens, Token } from \"domain/tokens\";\nimport { getNativeToken } from \"config/tokens\";\nimport { t, Trans } from \"@lingui/macro\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nconst { AddressZero } = ethers.constants;\n\ntype Props = {\n  swapToken: Token;\n  isVisible: boolean;\n  setIsVisible: () => void;\n  chainId: number;\n  glpAmount: BigNumber;\n  usdgSupply: BigNumber;\n  totalTokenWeights: BigNumber;\n  glpPrice: BigNumber;\n  swapUsdMin: BigNumber;\n  infoTokens: InfoTokens;\n};\n\nexport default function SwapErrorModal({\n  swapToken,\n  isVisible,\n  setIsVisible,\n  chainId,\n  glpAmount,\n  usdgSupply,\n  totalTokenWeights,\n  glpPrice,\n  infoTokens,\n  swapUsdMin,\n}: Props) {\n  const [lowestFeeToken, setLowestFeeToken] = useState<\n    { token: Token; fees: number; amountLeftToDeposit: BigNumber } | undefined\n  >();\n  useEffect(() => {\n    const lowestFeeTokenInfo = getLowestFeeTokenForBuyGlp(\n      chainId,\n      glpAmount,\n      glpPrice,\n      usdgSupply,\n      totalTokenWeights,\n      infoTokens,\n      swapToken.address,\n      swapUsdMin\n    );\n    setLowestFeeToken(lowestFeeTokenInfo);\n  }, [chainId, glpAmount, glpPrice, usdgSupply, totalTokenWeights, infoTokens, swapUsdMin, swapToken.address]);\n\n  const label = t`${swapToken?.symbol} Capacity Reached`;\n\n  if (lowestFeeToken && swapUsdMin && swapUsdMin.gt(lowestFeeToken.amountLeftToDeposit)) {\n    return (\n      <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={label} className=\"Error-modal\">\n        <p>\n          <Trans>\n            There is not enough liquidity in a single token for your size. Please check the Save on Fees section and\n            consider splitting your order into several different ones\n          </Trans>\n        </p>\n        <p>\n          <ExternalLink href={get1InchSwapUrl(chainId)}>\n            <Trans>Swap on 1inch</Trans>\n          </ExternalLink>\n        </p>\n      </Modal>\n    );\n  }\n\n  const nativeToken = getNativeToken(chainId);\n  const inputCurrency = swapToken.address === AddressZero ? nativeToken.symbol : swapToken.address;\n  const outputCurrency =\n    lowestFeeToken?.token.address === AddressZero ? nativeToken.symbol : lowestFeeToken?.token.address;\n  const oneInchUrl = get1InchSwapUrl(chainId, inputCurrency, outputCurrency);\n\n  return (\n    <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={label} className=\"Error-modal\">\n      <Trans>\n        <p>The pool's capacity has been reached for {swapToken.symbol}. Please use another token to buy GLP.</p>\n        <p>Check the \"Save on Fees\" section for tokens with the lowest fees.</p>\n      </Trans>\n      <p>\n        <ExternalLink href={oneInchUrl}>\n          <Trans>\n            Swap {swapToken.symbol} to {lowestFeeToken?.token.symbol} on 1inch\n          </Trans>\n        </ExternalLink>\n      </p>\n    </Modal>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\nimport Tab from \"../Tab/Tab\";\nimport cx from \"classnames\";\nimport { getContract } from \"config/contracts\";\nimport {\n  getBuyGlpToAmount,\n  getBuyGlpFromAmount,\n  getSellGlpFromAmount,\n  getSellGlpToAmount,\n  adjustForDecimals,\n  GLP_DECIMALS,\n  USD_DECIMALS,\n  BASIS_POINTS_DIVISOR,\n  GLP_COOLDOWN_DURATION,\n  SECONDS_PER_YEAR,\n  USDG_DECIMALS,\n  PLACEHOLDER_ACCOUNT,\n  importImage,\n} from \"lib/legacy\";\n\nimport { useGmxPrice } from \"domain/legacy\";\n\nimport TokenSelector from \"components/TokenSelector/TokenSelector\";\nimport BuyInputSection from \"../BuyInputSection/BuyInputSection\";\nimport Tooltip from \"../Tooltip/Tooltip\";\n\nimport ReaderV2 from \"abis/ReaderV2.json\";\nimport RewardReader from \"abis/RewardReader.json\";\nimport VaultV2 from \"abis/VaultV2.json\";\nimport GlpManager from \"abis/GlpManager.json\";\nimport RewardTracker from \"abis/RewardTracker.json\";\nimport Vester from \"abis/Vester.json\";\nimport RewardRouter from \"abis/RewardRouter.json\";\nimport Token from \"abis/Token.json\";\n\nimport arrowIcon from \"img/ic_convert_down.svg\";\n\nimport \"./GlpSwap.css\";\nimport AssetDropdown from \"pages/Dashboard/AssetDropdown\";\nimport SwapErrorModal from \"./SwapErrorModal\";\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\nimport { ARBITRUM, getChainName, IS_NETWORK_DISABLED } from \"config/chains\";\nimport { callContract, contractFetcher } from \"lib/contracts\";\nimport { approveTokens, useInfoTokens } from \"domain/tokens\";\nimport { useLocalStorageByChainId } from \"lib/localStorage\";\nimport { helperToast } from \"lib/helperToast\";\nimport { getTokenInfo, getUsd } from \"domain/tokens/utils\";\nimport { bigNumberify, expandDecimals, formatAmount, formatAmountFree, formatKeyAmount, parseValue } from \"lib/numbers\";\nimport { getNativeToken, getToken, getTokens, getWhitelistedTokens, getWrappedToken } from \"config/tokens\";\nimport { useChainId } from \"lib/chains\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport { getIcon } from \"config/icons\";\nimport Button from \"components/Button/Button\";\n\nconst { AddressZero } = ethers.constants;\n\nfunction getStakingData(stakingInfo) {\n  if (!stakingInfo || stakingInfo.length === 0) {\n    return;\n  }\n\n  const keys = [\"stakedGlpTracker\", \"feeGlpTracker\"];\n  const data = {};\n  const propsLength = 5;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    data[key] = {\n      claimable: stakingInfo[i * propsLength],\n      tokensPerInterval: stakingInfo[i * propsLength + 1],\n      averageStakedAmounts: stakingInfo[i * propsLength + 2],\n      cumulativeRewards: stakingInfo[i * propsLength + 3],\n      totalSupply: stakingInfo[i * propsLength + 4],\n    };\n  }\n\n  return data;\n}\n\nfunction getTooltipContent(managedUsd, tokenInfo, token) {\n  return (\n    <>\n      <StatsTooltipRow\n        label={t`Current Pool Amount`}\n        value={[\n          `$${formatAmount(managedUsd, USD_DECIMALS, 0, true)}`,\n          `(${formatKeyAmount(tokenInfo, \"managedAmount\", token.decimals, 0, true)} ${token.symbol})`,\n        ]}\n      />\n      <StatsTooltipRow label={t`Max Pool Capacity`} value={formatAmount(tokenInfo.maxUsdgAmount, 18, 0, true)} />\n    </>\n  );\n}\n\nexport default function GlpSwap(props) {\n  const {\n    savedSlippageAmount,\n    isBuying,\n    setPendingTxns,\n    connectWallet,\n    setIsBuying,\n    savedShouldDisableValidationForTesting,\n  } = props;\n  const history = useHistory();\n  const swapLabel = isBuying ? \"BuyGlp\" : \"SellGlp\";\n  const tabLabel = isBuying ? t`Buy GLP` : t`Sell GLP`;\n  const { active, library, account } = useWeb3React();\n  const { chainId } = useChainId();\n  const tokens = getTokens(chainId);\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const tokenList = whitelistedTokens.filter((t) => !t.isWrapped);\n  const visibleTokens = tokenList.filter((t) => !t.isTempHidden);\n  const [swapValue, setSwapValue] = useState(\"\");\n  const [glpValue, setGlpValue] = useState(\"\");\n  const [swapTokenAddress, setSwapTokenAddress] = useLocalStorageByChainId(\n    chainId,\n    `${swapLabel}-swap-token-address`,\n    AddressZero\n  );\n  const [isApproving, setIsApproving] = useState(false);\n  const [isWaitingForApproval, setIsWaitingForApproval] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [anchorOnSwapAmount, setAnchorOnSwapAmount] = useState(true);\n  const [feeBasisPoints, setFeeBasisPoints] = useState(\"\");\n  const [modalError, setModalError] = useState(false);\n\n  const readerAddress = getContract(chainId, \"Reader\");\n  const rewardReaderAddress = getContract(chainId, \"RewardReader\");\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n  const stakedGlpTrackerAddress = getContract(chainId, \"StakedGlpTracker\");\n  const feeGlpTrackerAddress = getContract(chainId, \"FeeGlpTracker\");\n  const usdgAddress = getContract(chainId, \"USDG\");\n  const glpManagerAddress = getContract(chainId, \"GlpManager\");\n  const glpRewardRouterAddress = getContract(chainId, \"GlpRewardRouter\");\n\n  const tokensForBalanceAndSupplyQuery = [stakedGlpTrackerAddress, usdgAddress];\n  const glpIcon = getIcon(chainId, \"glp\");\n\n  const tokenAddresses = tokens.map((token) => token.address);\n  const { data: tokenBalances } = useSWR(\n    [`GlpSwap:getTokenBalances:${active}`, chainId, readerAddress, \"getTokenBalances\", account || PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: contractFetcher(library, ReaderV2, [tokenAddresses]),\n    }\n  );\n\n  const { data: balancesAndSupplies } = useSWR(\n    [\n      `GlpSwap:getTokenBalancesWithSupplies:${active}`,\n      chainId,\n      readerAddress,\n      \"getTokenBalancesWithSupplies\",\n      account || PLACEHOLDER_ACCOUNT,\n    ],\n    {\n      fetcher: contractFetcher(library, ReaderV2, [tokensForBalanceAndSupplyQuery]),\n    }\n  );\n\n  const { data: aums } = useSWR([`GlpSwap:getAums:${active}`, chainId, glpManagerAddress, \"getAums\"], {\n    fetcher: contractFetcher(library, GlpManager),\n  });\n\n  const { data: totalTokenWeights } = useSWR(\n    [`GlpSwap:totalTokenWeights:${active}`, chainId, vaultAddress, \"totalTokenWeights\"],\n    {\n      fetcher: contractFetcher(library, VaultV2),\n    }\n  );\n\n  const tokenAllowanceAddress = swapTokenAddress === AddressZero ? nativeTokenAddress : swapTokenAddress;\n  const { data: tokenAllowance } = useSWR(\n    [active, chainId, tokenAllowanceAddress, \"allowance\", account || PLACEHOLDER_ACCOUNT, glpManagerAddress],\n    {\n      fetcher: contractFetcher(library, Token),\n    }\n  );\n\n  const { data: lastPurchaseTime } = useSWR(\n    [`GlpSwap:lastPurchaseTime:${active}`, chainId, glpManagerAddress, \"lastAddedAt\", account || PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: contractFetcher(library, GlpManager),\n    }\n  );\n\n  const { data: glpBalance } = useSWR(\n    [`GlpSwap:glpBalance:${active}`, chainId, feeGlpTrackerAddress, \"stakedAmounts\", account || PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: contractFetcher(library, RewardTracker),\n    }\n  );\n\n  const glpVesterAddress = getContract(chainId, \"GlpVester\");\n  const { data: reservedAmount } = useSWR(\n    [`GlpSwap:reservedAmount:${active}`, chainId, glpVesterAddress, \"pairAmounts\", account || PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: contractFetcher(library, Vester),\n    }\n  );\n\n  const { gmxPrice } = useGmxPrice(chainId, { arbitrum: chainId === ARBITRUM ? library : undefined }, active);\n\n  const rewardTrackersForStakingInfo = [stakedGlpTrackerAddress, feeGlpTrackerAddress];\n  const { data: stakingInfo } = useSWR(\n    [`GlpSwap:stakingInfo:${active}`, chainId, rewardReaderAddress, \"getStakingInfo\", account || PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: contractFetcher(library, RewardReader, [rewardTrackersForStakingInfo]),\n    }\n  );\n\n  const stakingData = getStakingData(stakingInfo);\n\n  const redemptionTime = lastPurchaseTime ? lastPurchaseTime.add(GLP_COOLDOWN_DURATION) : undefined;\n  const inCooldownWindow = redemptionTime && parseInt(Date.now() / 1000) < redemptionTime;\n\n  const glpSupply = balancesAndSupplies ? balancesAndSupplies[1] : bigNumberify(0);\n  const usdgSupply = balancesAndSupplies ? balancesAndSupplies[3] : bigNumberify(0);\n  let aum;\n  if (aums && aums.length > 0) {\n    aum = isBuying ? aums[0] : aums[1];\n  }\n  const glpPrice =\n    aum && aum.gt(0) && glpSupply.gt(0)\n      ? aum.mul(expandDecimals(1, GLP_DECIMALS)).div(glpSupply)\n      : expandDecimals(1, USD_DECIMALS);\n  let glpBalanceUsd;\n  if (glpBalance) {\n    glpBalanceUsd = glpBalance.mul(glpPrice).div(expandDecimals(1, GLP_DECIMALS));\n  }\n  const glpSupplyUsd = glpSupply.mul(glpPrice).div(expandDecimals(1, GLP_DECIMALS));\n\n  let reserveAmountUsd;\n  if (reservedAmount) {\n    reserveAmountUsd = reservedAmount.mul(glpPrice).div(expandDecimals(1, GLP_DECIMALS));\n  }\n\n  let maxSellAmount = glpBalance;\n  if (glpBalance && reservedAmount) {\n    maxSellAmount = glpBalance.sub(reservedAmount);\n  }\n\n  const { infoTokens } = useInfoTokens(library, chainId, active, tokenBalances, undefined);\n  const swapToken = getToken(chainId, swapTokenAddress);\n  const swapTokenInfo = getTokenInfo(infoTokens, swapTokenAddress);\n\n  const swapTokenBalance = swapTokenInfo && swapTokenInfo.balance ? swapTokenInfo.balance : bigNumberify(0);\n\n  const swapAmount = parseValue(swapValue, swapToken && swapToken.decimals);\n  const glpAmount = parseValue(glpValue, GLP_DECIMALS);\n\n  const needApproval =\n    isBuying && swapTokenAddress !== AddressZero && tokenAllowance && swapAmount && swapAmount.gt(tokenAllowance);\n\n  const swapUsdMin = getUsd(swapAmount, swapTokenAddress, false, infoTokens);\n  const glpUsdMax = glpAmount && glpPrice ? glpAmount.mul(glpPrice).div(expandDecimals(1, GLP_DECIMALS)) : undefined;\n\n  let isSwapTokenCapReached;\n  if (swapTokenInfo.managedUsd && swapTokenInfo.maxUsdgAmount) {\n    isSwapTokenCapReached = swapTokenInfo.managedUsd.gt(\n      adjustForDecimals(swapTokenInfo.maxUsdgAmount, USDG_DECIMALS, USD_DECIMALS)\n    );\n  }\n\n  const onSwapValueChange = (e) => {\n    setAnchorOnSwapAmount(true);\n    setSwapValue(e.target.value);\n  };\n\n  const onGlpValueChange = (e) => {\n    setAnchorOnSwapAmount(false);\n    setGlpValue(e.target.value);\n  };\n\n  const onSelectSwapToken = (token) => {\n    setSwapTokenAddress(token.address);\n    setIsWaitingForApproval(false);\n  };\n\n  const nativeToken = getTokenInfo(infoTokens, AddressZero);\n\n  let totalApr = bigNumberify(0);\n\n  let feeGlpTrackerAnnualRewardsUsd;\n  let feeGlpTrackerApr;\n  if (\n    stakingData &&\n    stakingData.feeGlpTracker &&\n    stakingData.feeGlpTracker.tokensPerInterval &&\n    nativeToken &&\n    nativeToken.minPrice &&\n    glpSupplyUsd &&\n    glpSupplyUsd.gt(0)\n  ) {\n    feeGlpTrackerAnnualRewardsUsd = stakingData.feeGlpTracker.tokensPerInterval\n      .mul(SECONDS_PER_YEAR)\n      .mul(nativeToken.minPrice)\n      .div(expandDecimals(1, 18));\n    feeGlpTrackerApr = feeGlpTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(glpSupplyUsd);\n    totalApr = totalApr.add(feeGlpTrackerApr);\n  }\n\n  let stakedGlpTrackerAnnualRewardsUsd;\n  let stakedGlpTrackerApr;\n\n  if (\n    gmxPrice &&\n    stakingData &&\n    stakingData.stakedGlpTracker &&\n    stakingData.stakedGlpTracker.tokensPerInterval &&\n    glpSupplyUsd &&\n    glpSupplyUsd.gt(0)\n  ) {\n    stakedGlpTrackerAnnualRewardsUsd = stakingData.stakedGlpTracker.tokensPerInterval\n      .mul(SECONDS_PER_YEAR)\n      .mul(gmxPrice)\n      .div(expandDecimals(1, 18));\n    stakedGlpTrackerApr = stakedGlpTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(glpSupplyUsd);\n    totalApr = totalApr.add(stakedGlpTrackerApr);\n  }\n\n  useEffect(() => {\n    const updateSwapAmounts = () => {\n      if (anchorOnSwapAmount) {\n        if (!swapAmount) {\n          setGlpValue(\"\");\n          setFeeBasisPoints(\"\");\n          return;\n        }\n\n        if (isBuying) {\n          const { amount: nextAmount, feeBasisPoints: feeBps } = getBuyGlpToAmount(\n            swapAmount,\n            swapTokenAddress,\n            infoTokens,\n            glpPrice,\n            usdgSupply,\n            totalTokenWeights\n          );\n          const nextValue = formatAmountFree(nextAmount, GLP_DECIMALS, GLP_DECIMALS);\n          setGlpValue(nextValue);\n          setFeeBasisPoints(feeBps);\n        } else {\n          const { amount: nextAmount, feeBasisPoints: feeBps } = getSellGlpFromAmount(\n            swapAmount,\n            swapTokenAddress,\n            infoTokens,\n            glpPrice,\n            usdgSupply,\n            totalTokenWeights\n          );\n          const nextValue = formatAmountFree(nextAmount, GLP_DECIMALS, GLP_DECIMALS);\n          setGlpValue(nextValue);\n          setFeeBasisPoints(feeBps);\n        }\n\n        return;\n      }\n\n      if (!glpAmount) {\n        setSwapValue(\"\");\n        setFeeBasisPoints(\"\");\n        return;\n      }\n\n      if (swapToken) {\n        if (isBuying) {\n          const { amount: nextAmount, feeBasisPoints: feeBps } = getBuyGlpFromAmount(\n            glpAmount,\n            swapTokenAddress,\n            infoTokens,\n            glpPrice,\n            usdgSupply,\n            totalTokenWeights\n          );\n          const nextValue = formatAmountFree(nextAmount, swapToken.decimals, swapToken.decimals);\n          setSwapValue(nextValue);\n          setFeeBasisPoints(feeBps);\n        } else {\n          const { amount: nextAmount, feeBasisPoints: feeBps } = getSellGlpToAmount(\n            glpAmount,\n            swapTokenAddress,\n            infoTokens,\n            glpPrice,\n            usdgSupply,\n            totalTokenWeights,\n            true\n          );\n\n          const nextValue = formatAmountFree(nextAmount, swapToken.decimals, swapToken.decimals);\n          setSwapValue(nextValue);\n          setFeeBasisPoints(feeBps);\n        }\n      }\n    };\n\n    updateSwapAmounts();\n  }, [\n    isBuying,\n    anchorOnSwapAmount,\n    swapAmount,\n    glpAmount,\n    swapToken,\n    swapTokenAddress,\n    infoTokens,\n    glpPrice,\n    usdgSupply,\n    totalTokenWeights,\n  ]);\n\n  const switchSwapOption = (hash = \"\") => {\n    history.push(`${history.location.pathname}#${hash}`);\n    props.setIsBuying(hash === \"redeem\" ? false : true);\n  };\n\n  const fillMaxAmount = () => {\n    if (isBuying) {\n      setAnchorOnSwapAmount(true);\n      setSwapValue(formatAmountFree(swapTokenBalance, swapToken.decimals, swapToken.decimals));\n      return;\n    }\n\n    setAnchorOnSwapAmount(false);\n    setGlpValue(formatAmountFree(maxSellAmount, GLP_DECIMALS, GLP_DECIMALS));\n  };\n\n  const getError = () => {\n    if (IS_NETWORK_DISABLED[chainId]) {\n      if (isBuying) return [t`GLP buy disabled, pending ${getChainName(chainId)} upgrade`];\n      return [t`GLP sell disabled, pending ${getChainName(chainId)} upgrade`];\n    }\n\n    if (!isBuying && inCooldownWindow) {\n      return [t`Redemption time not yet reached`];\n    }\n\n    if (!swapAmount || swapAmount.eq(0)) {\n      return [t`Enter an amount`];\n    }\n    if (!glpAmount || glpAmount.eq(0)) {\n      return [t`Enter an amount`];\n    }\n\n    if (isBuying) {\n      const swapTokenInfo = getTokenInfo(infoTokens, swapTokenAddress);\n      if (\n        !savedShouldDisableValidationForTesting &&\n        swapTokenInfo &&\n        swapTokenInfo.balance &&\n        swapAmount &&\n        swapAmount.gt(swapTokenInfo.balance)\n      ) {\n        return [t`Insufficient ${swapTokenInfo.symbol} balance`];\n      }\n\n      if (swapTokenInfo.maxUsdgAmount && swapTokenInfo.usdgAmount && swapUsdMin) {\n        const usdgFromAmount = adjustForDecimals(swapUsdMin, USD_DECIMALS, USDG_DECIMALS);\n        const nextUsdgAmount = swapTokenInfo.usdgAmount.add(usdgFromAmount);\n        if (swapTokenInfo.maxUsdgAmount.gt(0) && nextUsdgAmount.gt(swapTokenInfo.maxUsdgAmount)) {\n          return [t`${swapTokenInfo.symbol} pool exceeded, try different token`, true];\n        }\n      }\n    }\n\n    if (!isBuying) {\n      if (maxSellAmount && glpAmount && glpAmount.gt(maxSellAmount)) {\n        return [t`Insufficient GLP balance`];\n      }\n\n      const swapTokenInfo = getTokenInfo(infoTokens, swapTokenAddress);\n      if (\n        swapTokenInfo &&\n        swapTokenInfo.availableAmount &&\n        swapAmount &&\n        swapAmount.gt(swapTokenInfo.availableAmount)\n      ) {\n        return [t`Insufficient liquidity`];\n      }\n    }\n\n    return [false];\n  };\n\n  const isPrimaryEnabled = () => {\n    if (IS_NETWORK_DISABLED[chainId]) {\n      return false;\n    }\n    if (!active) {\n      return true;\n    }\n    const [error, modal] = getError();\n    if (error && !modal) {\n      return false;\n    }\n    if ((needApproval && isWaitingForApproval) || isApproving) {\n      return false;\n    }\n    if (isApproving) {\n      return false;\n    }\n    if (isSubmitting) {\n      return false;\n    }\n    if (isBuying && isSwapTokenCapReached) {\n      return false;\n    }\n\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    if (!active) {\n      return t`Connect Wallet`;\n    }\n    const [error, modal] = getError();\n    if (error && !modal) {\n      return error;\n    }\n    if (isBuying && isSwapTokenCapReached) {\n      return t`Max Capacity for ${swapToken.symbol} Reached`;\n    }\n\n    if (needApproval && isWaitingForApproval) {\n      return t`Waiting for Approval`;\n    }\n    if (isApproving) {\n      return t`Approving ${swapToken.symbol}...`;\n    }\n    if (needApproval) {\n      return t`Approve ${swapToken.symbol}`;\n    }\n\n    if (isSubmitting) {\n      return isBuying ? t`Buying...` : t`Selling...`;\n    }\n\n    return isBuying ? t`Buy GLP` : t`Sell GLP`;\n  };\n\n  const approveFromToken = () => {\n    approveTokens({\n      setIsApproving,\n      library,\n      tokenAddress: swapToken.address,\n      spender: glpManagerAddress,\n      chainId: chainId,\n      onApproveSubmitted: () => {\n        setIsWaitingForApproval(true);\n      },\n      infoTokens,\n      getTokenInfo,\n    });\n  };\n\n  const buyGlp = () => {\n    setIsSubmitting(true);\n\n    const minGlp = glpAmount.mul(BASIS_POINTS_DIVISOR - savedSlippageAmount).div(BASIS_POINTS_DIVISOR);\n\n    const contract = new ethers.Contract(glpRewardRouterAddress, RewardRouter.abi, library.getSigner());\n    const method = swapTokenAddress === AddressZero ? \"mintAndStakeGlpETH\" : \"mintAndStakeGlp\";\n    const params = swapTokenAddress === AddressZero ? [0, minGlp] : [swapTokenAddress, swapAmount, 0, minGlp];\n    const value = swapTokenAddress === AddressZero ? swapAmount : 0;\n\n    callContract(chainId, contract, method, params, {\n      value,\n      sentMsg: t`Buy submitted.`,\n      failMsg: t`Buy failed.`,\n      successMsg: t`${formatAmount(glpAmount, 18, 4, true)} GLP bought with ${formatAmount(\n        swapAmount,\n        swapTokenInfo.decimals,\n        4,\n        true\n      )} ${swapTokenInfo.symbol}!`,\n      setPendingTxns,\n    })\n      .then(async () => {})\n      .finally(() => {\n        setIsSubmitting(false);\n      });\n  };\n\n  const sellGlp = () => {\n    setIsSubmitting(true);\n\n    const minOut = swapAmount.mul(BASIS_POINTS_DIVISOR - savedSlippageAmount).div(BASIS_POINTS_DIVISOR);\n\n    const contract = new ethers.Contract(glpRewardRouterAddress, RewardRouter.abi, library.getSigner());\n    const method = swapTokenAddress === AddressZero ? \"unstakeAndRedeemGlpETH\" : \"unstakeAndRedeemGlp\";\n    const params =\n      swapTokenAddress === AddressZero ? [glpAmount, minOut, account] : [swapTokenAddress, glpAmount, minOut, account];\n\n    callContract(chainId, contract, method, params, {\n      sentMsg: t`Sell submitted!`,\n      failMsg: t`Sell failed.`,\n      successMsg: t`${formatAmount(glpAmount, 18, 4, true)} GLP sold for ${formatAmount(\n        swapAmount,\n        swapTokenInfo.decimals,\n        4,\n        true\n      )} ${swapTokenInfo.symbol}!`,\n      setPendingTxns,\n    })\n      .then(async () => {})\n      .finally(() => {\n        setIsSubmitting(false);\n      });\n  };\n\n  const onClickPrimary = () => {\n    if (!active) {\n      connectWallet();\n      return;\n    }\n\n    if (needApproval) {\n      approveFromToken();\n      return;\n    }\n\n    const [, modal] = getError();\n\n    if (modal) {\n      setModalError(true);\n      return;\n    }\n\n    if (isBuying) {\n      buyGlp();\n    } else {\n      sellGlp();\n    }\n  };\n\n  let payLabel = t`Pay:`;\n  let receiveLabel = t`Receive:`;\n  let payBalance = \"$0.00\";\n  let receiveBalance = \"$0.00\";\n  if (isBuying) {\n    if (swapUsdMin) {\n      payBalance = `$${formatAmount(swapUsdMin, USD_DECIMALS, 2, true)}`;\n    }\n    if (glpUsdMax) {\n      receiveBalance = `$${formatAmount(glpUsdMax, USD_DECIMALS, 2, true)}`;\n    }\n  } else {\n    if (glpUsdMax) {\n      payBalance = `$${formatAmount(glpUsdMax, USD_DECIMALS, 2, true)}`;\n    }\n    if (swapUsdMin) {\n      receiveBalance = `$${formatAmount(swapUsdMin, USD_DECIMALS, 2, true)}`;\n    }\n  }\n\n  const selectToken = (token) => {\n    setAnchorOnSwapAmount(false);\n    setSwapTokenAddress(token.address);\n    helperToast.success(t`${token.symbol} selected in order form`);\n  };\n\n  let feePercentageText = formatAmount(feeBasisPoints, 2, 2, true, \"-\");\n  if (feeBasisPoints !== undefined && feeBasisPoints.toString().length > 0) {\n    feePercentageText += \"%\";\n  }\n\n  const wrappedTokenSymbol = getWrappedToken(chainId).symbol;\n  const nativeTokenSymbol = getNativeToken(chainId).symbol;\n\n  const onSwapOptionChange = (opt) => {\n    if (opt === t`Sell GLP`) {\n      switchSwapOption(\"redeem\");\n    } else {\n      switchSwapOption();\n    }\n  };\n\n  return (\n    <div className=\"GlpSwap\">\n      <SwapErrorModal\n        isVisible={Boolean(modalError)}\n        setIsVisible={setModalError}\n        swapToken={swapToken}\n        chainId={chainId}\n        glpAmount={glpAmount}\n        usdgSupply={usdgSupply}\n        totalTokenWeights={totalTokenWeights}\n        glpPrice={glpPrice}\n        infoTokens={infoTokens}\n        swapUsdMin={swapUsdMin}\n      />\n      <div className=\"GlpSwap-content\">\n        <div className=\"App-card GlpSwap-stats-card\">\n          <div className=\"App-card-title\">\n            <div className=\"App-card-title-mark\">\n              <div className=\"App-card-title-mark-icon\">\n                <img width=\"40\" src={glpIcon} alt=\"GLP\" />\n              </div>\n              <div className=\"App-card-title-mark-info\">\n                <div className=\"App-card-title-mark-title\">GLP</div>\n                <div className=\"App-card-title-mark-subtitle\">GLP</div>\n              </div>\n              <div>\n                <AssetDropdown assetSymbol=\"GLP\" />\n              </div>\n            </div>\n          </div>\n          <div className=\"App-card-divider\" />\n          <div className=\"App-card-content\">\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Price</Trans>\n              </div>\n              <div className=\"value\">${formatAmount(glpPrice, USD_DECIMALS, 3, true)}</div>\n            </div>\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Wallet</Trans>\n              </div>\n              <div className=\"value\">\n                {formatAmount(glpBalance, GLP_DECIMALS, 4, true)} GLP ($\n                {formatAmount(glpBalanceUsd, USD_DECIMALS, 2, true)})\n              </div>\n            </div>\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Staked</Trans>\n              </div>\n              <div className=\"value\">\n                {formatAmount(glpBalance, GLP_DECIMALS, 4, true)} GLP ($\n                {formatAmount(glpBalanceUsd, USD_DECIMALS, 2, true)})\n              </div>\n            </div>\n          </div>\n          <div className=\"App-card-divider\" />\n          <div className=\"App-card-content\">\n            {!isBuying && (\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Reserved</Trans>\n                </div>\n                <div className=\"value\">\n                  <Tooltip\n                    handle={`${formatAmount(reservedAmount, 18, 4, true)} GLP ($${formatAmount(\n                      reserveAmountUsd,\n                      USD_DECIMALS,\n                      2,\n                      true\n                    )})`}\n                    position=\"right-bottom\"\n                    renderContent={() =>\n                      t`${formatAmount(reservedAmount, 18, 4, true)} GLP have been reserved for vesting.`\n                    }\n                  />\n                </div>\n              </div>\n            )}\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>APR</Trans>\n              </div>\n              <div className=\"value\">\n                <Tooltip\n                  handle={`${formatAmount(totalApr, 2, 2, true)}%`}\n                  position=\"right-bottom\"\n                  renderContent={() => {\n                    return (\n                      <>\n                        <StatsTooltipRow\n                          label={t`${nativeTokenSymbol} (${wrappedTokenSymbol}) APR`}\n                          value={`${formatAmount(feeGlpTrackerApr, 2, 2, false)}%`}\n                          showDollar={false}\n                        />\n                        <StatsTooltipRow\n                          label={t`Escrowed GMX APR`}\n                          value={`${formatAmount(stakedGlpTrackerApr, 2, 2, false)}%`}\n                          showDollar={false}\n                        />\n                      </>\n                    );\n                  }}\n                />\n              </div>\n            </div>\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Total Supply</Trans>\n              </div>\n              <div className=\"value\">\n                <Trans>\n                  {formatAmount(glpSupply, GLP_DECIMALS, 4, true)} GLP ($\n                  {formatAmount(glpSupplyUsd, USD_DECIMALS, 2, true)})\n                </Trans>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"GlpSwap-box App-box\">\n          <Tab\n            options={[t`Buy GLP`, t`Sell GLP`]}\n            option={tabLabel}\n            onChange={onSwapOptionChange}\n            className=\"Exchange-swap-option-tabs\"\n          />\n          {isBuying && (\n            <BuyInputSection\n              topLeftLabel={payLabel}\n              topLeftValue={payBalance}\n              topRightLabel={t`Balance:`}\n              topRightValue={`${formatAmount(swapTokenBalance, swapToken.decimals, 4, true)}`}\n              inputValue={swapValue}\n              onInputValueChange={onSwapValueChange}\n              showMaxButton={swapValue !== formatAmountFree(swapTokenBalance, swapToken.decimals, swapToken.decimals)}\n              onClickTopRightLabel={fillMaxAmount}\n              onClickMax={fillMaxAmount}\n            >\n              <TokenSelector\n                label={t`Pay`}\n                chainId={chainId}\n                tokenAddress={swapTokenAddress}\n                onSelectToken={onSelectSwapToken}\n                tokens={whitelistedTokens}\n                infoTokens={infoTokens}\n                className=\"GlpSwap-from-token\"\n                showSymbolImage={true}\n                showTokenImgInDropdown={true}\n              />\n            </BuyInputSection>\n          )}\n\n          {!isBuying && (\n            <BuyInputSection\n              topLeftLabel={payLabel}\n              topLeftValue={payBalance}\n              topRightLabel={t`Available:`}\n              topRightValue={`${formatAmount(maxSellAmount, GLP_DECIMALS, 4, true)}`}\n              inputValue={glpValue}\n              onInputValueChange={onGlpValueChange}\n              showMaxButton={glpValue !== formatAmountFree(maxSellAmount, GLP_DECIMALS, GLP_DECIMALS)}\n              onClickTopRightLabel={fillMaxAmount}\n              onClickMax={fillMaxAmount}\n            >\n              <div className=\"selected-token\">GLP</div>\n            </BuyInputSection>\n          )}\n\n          <div className=\"AppOrder-ball-container\">\n            <div className=\"AppOrder-ball\">\n              <img\n                src={arrowIcon}\n                alt=\"arrowIcon\"\n                onClick={() => {\n                  setIsBuying(!isBuying);\n                  switchSwapOption(isBuying ? \"redeem\" : \"\");\n                }}\n              />\n            </div>\n          </div>\n\n          {isBuying && (\n            <BuyInputSection\n              topLeftLabel={receiveLabel}\n              topLeftValue={receiveBalance}\n              topRightLabel={t`Balance:`}\n              topRightValue={`${formatAmount(glpBalance, GLP_DECIMALS, 4, true)}`}\n              inputValue={glpValue}\n              onInputValueChange={onGlpValueChange}\n            >\n              <div className=\"selected-token\">GLP</div>\n            </BuyInputSection>\n          )}\n\n          {!isBuying && (\n            <BuyInputSection\n              topLeftLabel={receiveLabel}\n              topLeftValue={receiveBalance}\n              topRightLabel={t`Balance:`}\n              topRightValue={`${formatAmount(swapTokenBalance, swapToken.decimals, 4, true)}`}\n              inputValue={swapValue}\n              onInputValueChange={onSwapValueChange}\n            >\n              <TokenSelector\n                label={t`Receive`}\n                chainId={chainId}\n                tokenAddress={swapTokenAddress}\n                onSelectToken={onSelectSwapToken}\n                tokens={whitelistedTokens}\n                infoTokens={infoTokens}\n                className=\"GlpSwap-from-token\"\n                showSymbolImage={true}\n                showTokenImgInDropdown={true}\n              />\n            </BuyInputSection>\n          )}\n\n          <div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">{feeBasisPoints > 50 ? t`WARNING: High Fees` : t`Fees`}</div>\n              <div className=\"align-right fee-block\">\n                {isBuying && (\n                  <Tooltip\n                    handle={isBuying && isSwapTokenCapReached ? \"NA\" : feePercentageText}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      if (!feeBasisPoints) {\n                        return (\n                          <div className=\"text-white\">\n                            <Trans>Fees will be shown once you have entered an amount in the order form.</Trans>\n                          </div>\n                        );\n                      }\n                      return (\n                        <div className=\"text-white\">\n                          {feeBasisPoints > 50 && <Trans>To reduce fees, select a different asset to pay with.</Trans>}\n                          <Trans>Check the \"Save on Fees\" section below to get the lowest fee percentages.</Trans>\n                        </div>\n                      );\n                    }}\n                  />\n                )}\n                {!isBuying && (\n                  <Tooltip\n                    handle={feePercentageText}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      if (!feeBasisPoints) {\n                        return (\n                          <div className=\"text-white\">\n                            <Trans>Fees will be shown once you have entered an amount in the order form.</Trans>\n                          </div>\n                        );\n                      }\n                      return (\n                        <div className=\"text-white\">\n                          {feeBasisPoints > 50 && <Trans>To reduce fees, select a different asset to receive.</Trans>}\n                          <Trans>Check the \"Save on Fees\" section below to get the lowest fee percentages.</Trans>\n                        </div>\n                      );\n                    }}\n                  />\n                )}\n              </div>\n            </div>\n          </div>\n          <div className=\"GlpSwap-cta Exchange-swap-button-container\">\n            <Button variant=\"primary-action\" className=\"w-100\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n              {getPrimaryText()}\n            </Button>\n          </div>\n        </div>\n      </div>\n      <div className=\"Tab-title-section\">\n        <div className=\"Page-title\">\n          <Trans>Save on Fees</Trans>\n        </div>\n        {isBuying && (\n          <div className=\"Page-description\">\n            <Trans>\n              Fees may vary depending on which asset you use to buy GLP. <br />\n              Enter the amount of GLP you want to purchase in the order form, then check here to compare fees.\n            </Trans>\n          </div>\n        )}\n        {!isBuying && (\n          <div className=\"Page-description\">\n            <Trans>\n              Fees may vary depending on which asset you sell GLP for. <br />\n              Enter the amount of GLP you want to redeem in the order form, then check here to compare fees.\n            </Trans>\n          </div>\n        )}\n      </div>\n      <div className=\"GlpSwap-token-list\">\n        {/* <div className=\"GlpSwap-token-list-content\"> */}\n        <table className=\"token-table\">\n          <thead>\n            <tr>\n              <th>\n                <Trans>TOKEN</Trans>\n              </th>\n              <th>\n                <Trans>PRICE</Trans>\n              </th>\n              <th>\n                {isBuying ? (\n                  <Tooltip\n                    handle={t`AVAILABLE`}\n                    tooltipIconPosition=\"right\"\n                    position=\"right-bottom text-none\"\n                    renderContent={() => (\n                      <p className=\"text-white\">\n                        <Trans>Available amount to deposit into GLP.</Trans>\n                      </p>\n                    )}\n                  />\n                ) : (\n                  <Tooltip\n                    handle={t`AVAILABLE`}\n                    tooltipIconPosition=\"right\"\n                    position=\"center-bottom text-none\"\n                    renderContent={() => {\n                      return (\n                        <p className=\"text-white\">\n                          <Trans>\n                            Available amount to withdraw from GLP. Funds not utilized by current open positions.\n                          </Trans>\n                        </p>\n                      );\n                    }}\n                  />\n                )}\n              </th>\n              <th>\n                <Trans>WALLET</Trans>\n              </th>\n              <th>\n                <Tooltip\n                  handle={t`FEES`}\n                  tooltipIconPosition=\"right\"\n                  position=\"right-bottom text-none\"\n                  renderContent={() => {\n                    return (\n                      <div className=\"text-white\">\n                        <Trans>Fees will be shown once you have entered an amount in the order form.</Trans>\n                      </div>\n                    );\n                  }}\n                />\n              </th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            {visibleTokens.map((token) => {\n              let tokenFeeBps;\n              if (isBuying) {\n                const { feeBasisPoints: feeBps } = getBuyGlpFromAmount(\n                  glpAmount,\n                  token.address,\n                  infoTokens,\n                  glpPrice,\n                  usdgSupply,\n                  totalTokenWeights\n                );\n                tokenFeeBps = feeBps;\n              } else {\n                const { feeBasisPoints: feeBps } = getSellGlpToAmount(\n                  glpAmount,\n                  token.address,\n                  infoTokens,\n                  glpPrice,\n                  usdgSupply,\n                  totalTokenWeights\n                );\n                tokenFeeBps = feeBps;\n              }\n              const tokenInfo = getTokenInfo(infoTokens, token.address);\n              let managedUsd;\n              if (tokenInfo && tokenInfo.managedUsd) {\n                managedUsd = tokenInfo.managedUsd;\n              }\n              let availableAmountUsd;\n              if (tokenInfo && tokenInfo.minPrice && tokenInfo.availableAmount) {\n                availableAmountUsd = tokenInfo.availableAmount\n                  .mul(tokenInfo.minPrice)\n                  .div(expandDecimals(1, token.decimals));\n              }\n              let balanceUsd;\n              if (tokenInfo && tokenInfo.minPrice && tokenInfo.balance) {\n                balanceUsd = tokenInfo.balance.mul(tokenInfo.minPrice).div(expandDecimals(1, token.decimals));\n              }\n              const tokenImage = importImage(\"ic_\" + token.symbol.toLowerCase() + \"_40.svg\");\n              let isCapReached = tokenInfo.managedAmount?.gt(tokenInfo.maxUsdgAmount);\n\n              let amountLeftToDeposit = bigNumberify(0);\n              if (tokenInfo.maxUsdgAmount && tokenInfo.maxUsdgAmount.gt(0)) {\n                amountLeftToDeposit = tokenInfo.maxUsdgAmount\n                  .sub(tokenInfo.usdgAmount)\n                  .mul(expandDecimals(1, USD_DECIMALS))\n                  .div(expandDecimals(1, USDG_DECIMALS));\n              }\n              if (amountLeftToDeposit.lt(0)) {\n                amountLeftToDeposit = bigNumberify(0);\n              }\n              function renderFees() {\n                const swapUrl = `https://app.1inch.io/#/${chainId}/swap/`;\n                switch (true) {\n                  case (isBuying && isCapReached) || (!isBuying && managedUsd?.lt(1)):\n                    return (\n                      <Tooltip\n                        handle=\"NA\"\n                        position=\"right-bottom\"\n                        renderContent={() => (\n                          <div className=\"text-white\">\n                            <Trans>\n                              Max pool capacity reached for {tokenInfo.symbol}\n                              <br />\n                              <br />\n                              Please mint GLP using another token\n                            </Trans>\n                            <br />\n                            <p>\n                              <ExternalLink href={swapUrl}>\n                                <Trans> Swap {tokenInfo.symbol} on 1inch</Trans>\n                              </ExternalLink>\n                            </p>\n                          </div>\n                        )}\n                      />\n                    );\n                  case (isBuying && !isCapReached) || (!isBuying && managedUsd?.gt(0)):\n                    return `${formatAmount(tokenFeeBps, 2, 2, true, \"-\")}${\n                      tokenFeeBps !== undefined && tokenFeeBps.toString().length > 0 ? \"%\" : \"\"\n                    }`;\n                  default:\n                    return \"\";\n                }\n              }\n\n              return (\n                <tr key={token.symbol}>\n                  <td>\n                    <div className=\"App-card-title-info\">\n                      <div className=\"App-card-title-info-icon\">\n                        <img src={tokenImage} alt={token.symbol} width=\"40\" />\n                      </div>\n                      <div className=\"App-card-title-info-text\">\n                        <div className=\"App-card-info-title\">{token.name}</div>\n                        <div className=\"App-card-info-subtitle\">{token.symbol}</div>\n                      </div>\n                      <div>\n                        <AssetDropdown assetSymbol={token.symbol} assetInfo={token} />\n                      </div>\n                    </div>\n                  </td>\n                  <td>${formatKeyAmount(tokenInfo, \"minPrice\", USD_DECIMALS, 2, true)}</td>\n                  <td>\n                    {isBuying && (\n                      <div>\n                        <Tooltip\n                          handle={\n                            amountLeftToDeposit && amountLeftToDeposit.lt(0)\n                              ? \"$0.00\"\n                              : `$${formatAmount(amountLeftToDeposit, USD_DECIMALS, 2, true)}`\n                          }\n                          className=\"nowrap\"\n                          position=\"right-bottom\"\n                          tooltipIconPosition=\"right\"\n                          renderContent={() => getTooltipContent(managedUsd, tokenInfo, token)}\n                        />\n                      </div>\n                    )}\n                    {!isBuying && (\n                      <div>\n                        <Tooltip\n                          handle={\n                            availableAmountUsd && availableAmountUsd.lt(0)\n                              ? \"$0.00\"\n                              : `$${formatAmount(availableAmountUsd, USD_DECIMALS, 2, true)}`\n                          }\n                          className=\"nowrap\"\n                          position=\"right-bottom\"\n                          tooltipIconPosition=\"right\"\n                          renderContent={() => getTooltipContent(managedUsd, tokenInfo, token)}\n                        />\n                      </div>\n                    )}\n                  </td>\n                  <td>\n                    {formatKeyAmount(tokenInfo, \"balance\", tokenInfo.decimals, 2, true)} {tokenInfo.symbol} ($\n                    {formatAmount(balanceUsd, USD_DECIMALS, 2, true)})\n                  </td>\n                  <td>{renderFees()}</td>\n                  <td>\n                    <Button\n                      variant=\"semi-clear\"\n                      className={cx(\"w-100\", isBuying ? \"buying\" : \"selling\")}\n                      onClick={() => selectToken(token)}\n                    >\n                      {isBuying ? t`Buy with ${token.symbol}` : t`Sell for ${token.symbol}`}\n                    </Button>\n                  </td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n        <div className=\"token-grid\">\n          {visibleTokens.map((token) => {\n            let tokenFeeBps;\n            if (isBuying) {\n              const { feeBasisPoints: feeBps } = getBuyGlpFromAmount(\n                glpAmount,\n                token.address,\n                infoTokens,\n                glpPrice,\n                usdgSupply,\n                totalTokenWeights\n              );\n              tokenFeeBps = feeBps;\n            } else {\n              const { feeBasisPoints: feeBps } = getSellGlpToAmount(\n                glpAmount,\n                token.address,\n                infoTokens,\n                glpPrice,\n                usdgSupply,\n                totalTokenWeights\n              );\n              tokenFeeBps = feeBps;\n            }\n            const tokenInfo = getTokenInfo(infoTokens, token.address);\n            let managedUsd;\n            if (tokenInfo && tokenInfo.managedUsd) {\n              managedUsd = tokenInfo.managedUsd;\n            }\n            let availableAmountUsd;\n            if (tokenInfo && tokenInfo.minPrice && tokenInfo.availableAmount) {\n              availableAmountUsd = tokenInfo.availableAmount\n                .mul(tokenInfo.minPrice)\n                .div(expandDecimals(1, token.decimals));\n            }\n            let balanceUsd;\n            if (tokenInfo && tokenInfo.minPrice && tokenInfo.balance) {\n              balanceUsd = tokenInfo.balance.mul(tokenInfo.minPrice).div(expandDecimals(1, token.decimals));\n            }\n\n            let amountLeftToDeposit = bigNumberify(0);\n            if (tokenInfo.maxUsdgAmount && tokenInfo.maxUsdgAmount.gt(0)) {\n              amountLeftToDeposit = tokenInfo.maxUsdgAmount\n                .sub(tokenInfo.usdgAmount)\n                .mul(expandDecimals(1, USD_DECIMALS))\n                .div(expandDecimals(1, USDG_DECIMALS));\n            }\n            if (amountLeftToDeposit.lt(0)) {\n              amountLeftToDeposit = bigNumberify(0);\n            }\n            let isCapReached = tokenInfo.managedAmount?.gt(tokenInfo.maxUsdgAmount);\n\n            function renderFees() {\n              switch (true) {\n                case (isBuying && isCapReached) || (!isBuying && managedUsd?.lt(1)):\n                  return (\n                    <Tooltip\n                      handle=\"NA\"\n                      position=\"right-bottom\"\n                      renderContent={() => (\n                        <Trans>\n                          Max pool capacity reached for {tokenInfo.symbol}. Please mint GLP using another token\n                        </Trans>\n                      )}\n                    />\n                  );\n                case (isBuying && !isCapReached) || (!isBuying && managedUsd?.gt(0)):\n                  return `${formatAmount(tokenFeeBps, 2, 2, true, \"-\")}${\n                    tokenFeeBps !== undefined && tokenFeeBps.toString().length > 0 ? \"%\" : \"\"\n                  }`;\n                default:\n                  return \"\";\n              }\n            }\n            const tokenImage = importImage(\"ic_\" + token.symbol.toLowerCase() + \"_24.svg\");\n            return (\n              <div className=\"App-card\" key={token.symbol}>\n                <div className=\"mobile-token-card\">\n                  <img src={tokenImage} alt={token.symbol} width=\"20px\" />\n                  <div className=\"token-symbol-text\">{token.symbol}</div>\n                  <div>\n                    <AssetDropdown assetSymbol={token.symbol} assetInfo={token} />\n                  </div>\n                </div>\n                <div className=\"App-card-divider\" />\n                <div className=\"App-card-content\">\n                  <div className=\"App-card-row\">\n                    <div className=\"label\">\n                      <Trans>Price</Trans>\n                    </div>\n                    <div>${formatKeyAmount(tokenInfo, \"minPrice\", USD_DECIMALS, 2, true)}</div>\n                  </div>\n                  {isBuying && (\n                    <div className=\"App-card-row\">\n                      <Tooltip\n                        handle={t`Available`}\n                        position=\"left-bottom\"\n                        className=\"label\"\n                        renderContent={() => (\n                          <p className=\"text-white\">\n                            <Trans>Available amount to deposit into GLP.</Trans>\n                          </p>\n                        )}\n                      />\n                      <div>\n                        <Tooltip\n                          handle={amountLeftToDeposit && `$${formatAmount(amountLeftToDeposit, USD_DECIMALS, 2, true)}`}\n                          position=\"right-bottom\"\n                          tooltipIconPosition=\"right\"\n                          renderContent={() => getTooltipContent(managedUsd, tokenInfo, token)}\n                        />\n                      </div>\n                    </div>\n                  )}\n                  {!isBuying && (\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Tooltip\n                          handle={t`Available`}\n                          position=\"left-bottom\"\n                          renderContent={() => {\n                            return (\n                              <p className=\"text-white\">\n                                <Trans>\n                                  Available amount to withdraw from GLP. Funds not utilized by current open positions.\n                                </Trans>\n                              </p>\n                            );\n                          }}\n                        />\n                      </div>\n\n                      <div>\n                        <Tooltip\n                          handle={\n                            availableAmountUsd && availableAmountUsd.lt(0)\n                              ? \"$0.00\"\n                              : `$${formatAmount(availableAmountUsd, USD_DECIMALS, 2, true)}`\n                          }\n                          position=\"right-bottom\"\n                          tooltipIconPosition=\"right\"\n                          renderContent={() => getTooltipContent(managedUsd, tokenInfo, token)}\n                        />\n                      </div>\n                    </div>\n                  )}\n\n                  <div className=\"App-card-row\">\n                    <div className=\"label\">\n                      <Trans>Wallet</Trans>\n                    </div>\n                    <div>\n                      {formatKeyAmount(tokenInfo, \"balance\", tokenInfo.decimals, 2, true)} {tokenInfo.symbol} ($\n                      {formatAmount(balanceUsd, USD_DECIMALS, 2, true)})\n                    </div>\n                  </div>\n                  <div className=\"App-card-row\">\n                    <div>\n                      {tokenFeeBps ? (\n                        t`Fees`\n                      ) : (\n                        <Tooltip\n                          handle={t`Fees`}\n                          className=\"label\"\n                          renderContent={() => (\n                            <p className=\"text-white\">\n                              <Trans>Fees will be shown once you have entered an amount in the order form.</Trans>\n                            </p>\n                          )}\n                        />\n                      )}\n                    </div>\n                    <div>{renderFees()}</div>\n                  </div>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-options\">\n                    {isBuying && (\n                      <Button variant=\"semi-clear\" onClick={() => selectToken(token)}>\n                        <Trans>Buy with {token.symbol}</Trans>\n                      </Button>\n                    )}\n                    {!isBuying && (\n                      <Button variant=\"semi-clear\" onClick={() => selectToken(token)}>\n                        <Trans>Sell for {token.symbol}</Trans>\n                      </Button>\n                    )}\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\n\nimport GlpSwap from \"components/Glp/GlpSwap\";\nimport Footer from \"components/Footer/Footer\";\nimport \"./BuyGlp.css\";\n\nimport { Trans } from \"@lingui/macro\";\nimport { getNativeToken } from \"config/tokens\";\nimport { useChainId } from \"lib/chains\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nexport default function BuyGlp(props) {\n  const { chainId } = useChainId();\n  const history = useHistory();\n  const [isBuying, setIsBuying] = useState(true);\n  const nativeTokenSymbol = getNativeToken(chainId).symbol;\n\n  useEffect(() => {\n    const hash = history.location.hash.replace(\"#\", \"\");\n    const buying = hash === \"redeem\" ? false : true;\n    setIsBuying(buying);\n  }, [history.location.hash]);\n\n  return (\n    <div className=\"default-container page-layout\">\n      <div className=\"section-title-block\">\n        <div className=\"section-title-content\">\n          <div className=\"Page-title\">\n            <Trans>Buy / Sell GLP</Trans>\n          </div>\n          <div className=\"Page-description\">\n            <Trans>\n              Purchase <ExternalLink href=\"https://gmxio.gitbook.io/gmx/glp\">GLP tokens</ExternalLink> to earn{\" \"}\n              {nativeTokenSymbol} fees from swaps and leverages trading.\n            </Trans>\n            <br />\n            <Trans>\n              View <Link to=\"/earn\">staking</Link> page.\n            </Trans>\n          </div>\n        </div>\n      </div>\n      <GlpSwap {...props} isBuying={isBuying} setIsBuying={setIsBuying} />\n      <Footer />\n    </div>\n  );\n}\n","import { ReactNode } from \"react\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport \"./Card.css\";\n\ntype Props = {\n  title: string;\n  children: ReactNode;\n  className?: string;\n  tooltipText?: string;\n};\n\nfunction Card({ title, children, className, tooltipText }: Props) {\n  return (\n    <div className={`card ${className ? className : \"\"}`}>\n      {tooltipText ? (\n        <Tooltip\n          handle={<div className=\"card-header\">{title}</div>}\n          position=\"left-bottom\"\n          renderContent={() => tooltipText}\n        />\n      ) : (\n        <div className=\"card-header\">{title}</div>\n      )}\n      <div className=\"card-divider\"></div>\n      <div className=\"card-body\">{children}</div>\n    </div>\n  );\n}\n\nexport default Card;\n","import { ARBITRUM, AVALANCHE } from \"config/chains\";\nimport { getContract } from \"config/contracts\";\n\nconst ARBITRUM_GMX = getContract(ARBITRUM, \"GMX\").toLowerCase();\nconst AVALANCHE_GMX = getContract(AVALANCHE, \"GMX\").toLowerCase();\n\ntype Exchange = {\n  name: string;\n  icon: string;\n  links: { [key: number]: string };\n};\n\nexport const EXTERNAL_LINKS = {\n  [ARBITRUM]: {\n    networkWebsite: \"https://arbitrum.io/\",\n    buyGmx: {\n      uniswap: `https://app.uniswap.org/#/swap?inputCurrency=ETH&outputCurrency=${ARBITRUM_GMX}`,\n    },\n  },\n  [AVALANCHE]: {\n    networkWebsite: \"https://www.avax.network/\",\n    buyGmx: {\n      traderjoe: `https://traderjoexyz.com/trade?outputCurrency=${AVALANCHE_GMX}`,\n    },\n  },\n};\n\nexport const FIAT_GATEWAYS: Exchange[] = [\n  {\n    name: \"Binance Connect\",\n    icon: \"ic_binance.svg\",\n    links: {\n      [ARBITRUM]: \"https://www.binancecnt.com/en/buy-sell-crypto\",\n      [AVALANCHE]: \"https://www.binancecnt.com/en/buy-sell-crypto\",\n    },\n  },\n  {\n    name: \"Banxa\",\n    icon: \"ic_banxa.svg\",\n    links: {\n      [ARBITRUM]: \"https://gmx.banxa.com/?coinType=GMX&fiatType=USD&fiatAmount=500&blockchain=arbitrum\",\n      [AVALANCHE]: \"https://gmx.banxa.com/?coinType=GMX&fiatType=USD&fiatAmount=500&blockchain=avalanche\",\n    },\n  },\n  {\n    name: \"Transak\",\n    icon: \"ic_tansak.svg\",\n    links: {\n      [ARBITRUM]:\n        \"https://global.transak.com/?apiKey=28a15a9b-d94e-4944-99cc-6aa35b45cc74&networks=arbitrum&defaultCryptoCurrency=GMX&isAutoFillUserData=true&hideMenu=true&isFeeCalculationHidden=true\",\n    },\n  },\n];\n\nexport const GMX_FROM_ANY_NETWORKS: Exchange[] = [\n  {\n    name: \"Bungee\",\n    icon: \"ic_bungee.png\",\n    links: {\n      [ARBITRUM]: `https://multitx.bungee.exchange/?toChainId=42161&toTokenAddress=${ARBITRUM_GMX}`,\n      [AVALANCHE]: `https://multitx.bungee.exchange/?toChainId=43114&toTokenAddress=${AVALANCHE_GMX}`,\n    },\n  },\n  {\n    name: \"O3\",\n    icon: \"ic_o3.png\",\n    links: {\n      [ARBITRUM]: `https://o3swap.com/swap?dst_chain=42161&dst_token_hash=${ARBITRUM_GMX}`,\n      [AVALANCHE]: `https://o3swap.com/swap?dst_chain=43114&dst_token_hash=${AVALANCHE_GMX}`,\n    },\n  },\n];\n\nexport const BUY_NATIVE_TOKENS: Exchange[] = [\n  {\n    name: \"Bungee\",\n    icon: \"ic_bungee.png\",\n    links: {\n      [ARBITRUM]: `https://multitx.bungee.exchange/?fromChainId=1&fromTokenAddress=0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee&toChainId=42161&toTokenAddress=0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee `,\n      [AVALANCHE]: `https://multitx.bungee.exchange/?fromChainId=1&fromTokenAddress=0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee&toChainId=43114&toTokenAddress=0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee`,\n    },\n  },\n  {\n    name: \"O3\",\n    icon: \"ic_o3.png\",\n    links: {\n      [ARBITRUM]:\n        \"https://o3swap.com/swap?src_chain=1&dst_chain=42161&dst_token_hash=0x0000000000000000000000000000000000000000\",\n      [AVALANCHE]:\n        \"https://o3swap.com/swap?src_chain=1&dst_chain=43114&dst_token_hash=0x0000000000000000000000000000000000000000\",\n    },\n  },\n  {\n    name: \"Banxa\",\n    icon: \"ic_banxa.svg\",\n    links: {\n      [ARBITRUM]: \"https://gmx.banxa.com/?coinType=ETH&fiatType=USD&fiatAmount=500&blockchain=arbitrum\",\n      [AVALANCHE]: \"https://gmx.banxa.com/?coinType=AVAX&fiatType=USD&fiatAmount=500&blockchain=avalanche\",\n    },\n  },\n  {\n    name: \"Transak\",\n    icon: \"ic_tansak.svg\",\n    links: {\n      [ARBITRUM]:\n        \"https://global.transak.com/?apiKey=28a15a9b-d94e-4944-99cc-6aa35b45cc74&networks=arbitrum&isAutoFillUserData=true&hideMenu=true&isFeeCalculationHidden=true\",\n      [AVALANCHE]:\n        \"https://global.transak.com/?apiKey=28a15a9b-d94e-4944-99cc-6aa35b45cc74&networks=avaxcchain&defaultCryptoCurrency=AVAX&isAutoFillUserData=true&hideMenu=true&isFeeCalculationHidden=true\",\n    },\n  },\n];\n\nexport const TRANSFER_EXCHANGES: Exchange[] = [\n  {\n    name: \"Binance\",\n    icon: \"ic_binance.svg\",\n    links: {\n      [ARBITRUM]: \"https://www.binance.com/en/trade/\",\n      [AVALANCHE]: \"https://www.binance.com/en/trade/\",\n    },\n  },\n  {\n    name: \"Synapse\",\n    icon: \"ic_synapse.svg\",\n    links: {\n      [ARBITRUM]: \"https://synapseprotocol.com/?inputCurrency=ETH&outputCurrency=ETH&outputChain=42161\",\n      [AVALANCHE]: \"https://synapseprotocol.com/\",\n    },\n  },\n  {\n    name: \"Arbitrum\",\n    icon: \"ic_arbitrum_24.svg\",\n    links: {\n      [ARBITRUM]: \"https://bridge.arbitrum.io/\",\n    },\n  },\n  {\n    name: \"Avalanche\",\n    icon: \"ic_avax_30.svg\",\n    links: {\n      [AVALANCHE]: \"https://bridge.avax.network/\",\n    },\n  },\n  {\n    name: \"Hop\",\n    icon: \"ic_hop.svg\",\n    links: { [ARBITRUM]: \"https://app.hop.exchange/send?token=ETH&sourceNetwork=ethereum&destNetwork=arbitrum\" },\n  },\n  {\n    name: \"Bungee\",\n    icon: \"ic_bungee.png\",\n    links: {\n      [ARBITRUM]:\n        \"https://multitx.bungee.exchange/?fromChainId=1&fromTokenAddress=0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee&toChainId=42161&toTokenAddress=0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee\",\n      [AVALANCHE]:\n        \"https://multitx.bungee.exchange/?fromChainId=1&fromTokenAddress=0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee&toChainId=43114&toTokenAddress=0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee\",\n    },\n  },\n  {\n    name: \"Multichain\",\n    icon: \"ic_multichain.svg\",\n    links: {\n      [ARBITRUM]: \"https://app.multichain.org/#/router\",\n      [AVALANCHE]: \"https://app.multichain.org/#/router\",\n    },\n  },\n  {\n    name: \"O3\",\n    icon: \"ic_o3.png\",\n    links: {\n      [ARBITRUM]:\n        \"https://o3swap.com/swap?src_chain=1&dst_chain=42161&dst_token_hash=0x0000000000000000000000000000000000000000\",\n      [AVALANCHE]:\n        \"https://o3swap.com/swap?src_chain=1&dst_chain=43114&dst_token_hash=0x0000000000000000000000000000000000000000\",\n    },\n  },\n  {\n    name: \"Across\",\n    icon: \"ic_across.svg\",\n    links: { [ARBITRUM]: \"https://across.to/bridge?from=1&to=42161&asset=ETH\" },\n  },\n];\n\nexport const CENTRALISED_EXCHANGES: Exchange[] = [\n  {\n    name: \"Binance\",\n    icon: \"ic_binance.svg\",\n    links: {\n      [ARBITRUM]: \"https://www.binance.com/en/trade/GMX_USDT\",\n      [AVALANCHE]: \"https://www.binance.com/en/trade/GMX_USDT\",\n    },\n  },\n  {\n    name: \"Bybit\",\n    icon: \"ic_bybit.svg\",\n    links: {\n      [ARBITRUM]: \"https://www.bybit.com/en-US/trade/spot/GMX/USDT\",\n      [AVALANCHE]: \"https://www.bybit.com/en-US/trade/spot/GMX/USDT\",\n    },\n  },\n  {\n    name: \"Kucoin\",\n    icon: \"ic_kucoin.svg\",\n    links: {\n      [ARBITRUM]: \"https://www.kucoin.com/trade/GMX-USDT\",\n      [AVALANCHE]: \"https://www.kucoin.com/trade/GMX-USDT\",\n    },\n  },\n  {\n    name: \"Huobi\",\n    icon: \"ic_huobi.svg\",\n    links: {\n      [ARBITRUM]: \"https://www.huobi.com/en-us/exchange/gmx_usdt/\",\n      [AVALANCHE]: \"https://www.huobi.com/en-us/exchange/gmx_usdt/\",\n    },\n  },\n];\n\nexport const DECENTRALISED_AGGRIGATORS: Exchange[] = [\n  {\n    name: \"1inch\",\n    icon: \"ic_1inch.svg\",\n    links: {\n      [ARBITRUM]: \"https://app.1inch.io/#/42161/unified/swap/ETH/GMX\",\n      [AVALANCHE]: \"https://app.1inch.io/#/43114/unified/swap/AVAX/GMX\",\n    },\n  },\n  {\n    name: \"Matcha\",\n    icon: \"ic_matcha.png\",\n    links: {\n      [ARBITRUM]: `https://www.matcha.xyz/markets/42161/${ARBITRUM_GMX}`,\n      [AVALANCHE]: `https://www.matcha.xyz/markets/43114/${AVALANCHE_GMX}`,\n    },\n  },\n  {\n    name: \"Paraswap\",\n    icon: \"ic_paraswap.svg\",\n    links: {\n      [ARBITRUM]: `https://app.paraswap.io/#/${ARBITRUM_GMX}?network=arbitrum`,\n      [AVALANCHE]: `https://app.paraswap.io/#/${AVALANCHE_GMX}?network=avalanche`,\n    },\n  },\n  {\n    name: \"KyberSwap\",\n    icon: \"ic_kyberswap.svg\",\n    links: {\n      [ARBITRUM]: \"https://kyberswap.com/swap/arbitrum/eth-to-gmx\",\n      [AVALANCHE]: \"https://kyberswap.com/swap/avalanche/avax-to-gmx\",\n    },\n  },\n  {\n    name: \"OpenOcean\",\n    icon: \"ic_openocean.svg\",\n    links: {\n      [ARBITRUM]: \"https://app.openocean.finance/CLASSIC#/ARBITRUM/ETH/GMX\",\n      [AVALANCHE]: \"https://app.openocean.finance/CLASSIC#/AVAX/AVAX/GMX\",\n    },\n  },\n  {\n    name: \"DODO\",\n    icon: \"ic_dodo.svg\",\n    links: {\n      [ARBITRUM]: `https://app.dodoex.io/?from=ETH&to=${ARBITRUM_GMX}&network=arbitrum`,\n      [AVALANCHE]: `https://app.dodoex.io/?from=AVAX&to=${AVALANCHE_GMX}&network=avalanche`,\n    },\n  },\n  {\n    name: \"Slingshot\",\n    icon: \"ic_slingshot.svg\",\n    links: { [ARBITRUM]: \"https://app.slingshot.finance/swap/ETH?network=arbitrum\" },\n  },\n  {\n    name: \"Yieldyak\",\n    icon: \"ic_yield_yak.png\",\n    links: {\n      [AVALANCHE]: `https://yieldyak.com/swap?outputCurrency=${AVALANCHE_GMX}`,\n    },\n  },\n  {\n    name: \"Firebird\",\n    icon: \"ic_firebird.png\",\n    links: {\n      [ARBITRUM]: \"https://app.firebird.finance/swap\",\n      [AVALANCHE]: \"https://app.firebird.finance/swap\",\n    },\n  },\n  {\n    name: \"Odos\",\n    icon: \"ic_odos.png\",\n    links: {\n      [ARBITRUM]: \"https://app.odos.xyz/swap/42161/ETH/GMX\",\n      [AVALANCHE]: \"https://app.odos.xyz/swap/43114/AVAX/GMX\",\n    },\n  },\n];\n","import React, { useCallback } from \"react\";\nimport Footer from \"components/Footer/Footer\";\nimport \"./BuyGMX.css\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { Trans, t } from \"@lingui/macro\";\nimport Button from \"components/Button/Button\";\nimport { ARBITRUM, AVALANCHE, getChainName, getConstant } from \"config/chains\";\nimport { switchNetwork } from \"lib/wallets\";\nimport { useChainId } from \"lib/chains\";\nimport Card from \"components/Common/Card\";\nimport { importImage } from \"lib/legacy\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nimport bondProtocolIcon from \"img/ic_bondprotocol_arbitrum.svg\";\nimport uniswapArbitrumIcon from \"img/ic_uni_arbitrum.svg\";\nimport traderjoeIcon from \"img/ic_traderjoe_avax.png\";\nimport {\n  BUY_NATIVE_TOKENS,\n  CENTRALISED_EXCHANGES,\n  DECENTRALISED_AGGRIGATORS,\n  EXTERNAL_LINKS,\n  FIAT_GATEWAYS,\n  GMX_FROM_ANY_NETWORKS,\n  TRANSFER_EXCHANGES,\n} from \"./constants\";\n\nexport default function BuyGMX() {\n  const { chainId } = useChainId();\n  const isArbitrum = chainId === ARBITRUM;\n  const { active } = useWeb3React();\n  const nativeTokenSymbol = getConstant(chainId, \"nativeTokenSymbol\");\n  const externalLinks = EXTERNAL_LINKS[chainId];\n\n  const onNetworkSelect = useCallback(\n    (value) => {\n      if (value === chainId) {\n        return;\n      }\n      return switchNetwork(value, active);\n    },\n    [chainId, active]\n  );\n\n  return (\n    <div className=\"BuyGMXGLP default-container page-layout\">\n      <div className=\"BuyGMXGLP-container\">\n        <div className=\"section-title-block\">\n          <div className=\"section-title-content\">\n            <div className=\"Page-title\">\n              <Trans>Buy GMX on {getChainName(chainId)}</Trans>\n            </div>\n            <div className=\"Page-description\">\n              <Trans>Choose to buy from decentralized or centralized exchanges.</Trans>\n              <br />\n              <Trans>\n                To purchase GMX on the {isArbitrum ? \"Avalanche\" : \"Arbitrum\"} blockchain, please{\" \"}\n                <span onClick={() => onNetworkSelect(isArbitrum ? AVALANCHE : ARBITRUM)}>change your network</span>.\n              </Trans>\n            </div>\n          </div>\n        </div>\n        <div className=\"cards-row\">\n          <DecentralisedExchanges chainId={chainId} externalLinks={externalLinks} />\n          <CentralisedExchanges chainId={chainId} />\n        </div>\n\n        {isArbitrum ? (\n          <div className=\"section-title-block mt-top\">\n            <div className=\"section-title-content\">\n              <div className=\"Page-title\">\n                <Trans>Buy or Transfer ETH to Arbitrum</Trans>\n              </div>\n              <div className=\"Page-description\">\n                <Trans>Buy ETH directly to Arbitrum or transfer it there.</Trans>\n              </div>\n            </div>\n          </div>\n        ) : (\n          <div className=\"section-title-block mt-top\">\n            <div className=\"section-title-content\">\n              <div className=\"Page-title\">\n                <Trans>Buy or Transfer AVAX to Avalanche</Trans>\n              </div>\n              <div className=\"Page-description\">\n                <Trans>Buy AVAX directly to Avalanche or transfer it there.</Trans>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div className=\"cards-row\">\n          <Card title={t`Buy ${nativeTokenSymbol}`}>\n            <div className=\"App-card-content\">\n              <div className=\"BuyGMXGLP-description\">\n                {isArbitrum ? (\n                  <Trans>\n                    You can buy ETH directly on{\" \"}\n                    <ExternalLink href={externalLinks.networkWebsite}>Arbitrum</ExternalLink> using these options:\n                  </Trans>\n                ) : (\n                  <Trans>\n                    You can buy AVAX directly on{\" \"}\n                    <ExternalLink href={externalLinks.networkWebsite}>Avalanche</ExternalLink> using these options:\n                  </Trans>\n                )}\n              </div>\n              <div className=\"buttons-group\">\n                {BUY_NATIVE_TOKENS.filter((e) => chainId in e.links).map((exchange) => {\n                  const icon = importImage(exchange.icon) || \"\";\n                  const link = exchange.links[chainId];\n                  return (\n                    <Button\n                      variant=\"clear\"\n                      key={exchange.name}\n                      to={link}\n                      imgInfo={{ src: icon, alt: exchange.name }}\n                      newTab\n                    >\n                      {exchange.name}\n                    </Button>\n                  );\n                })}\n              </div>\n            </div>\n          </Card>\n          <Card title={t`Transfer ${nativeTokenSymbol}`}>\n            <div className=\"App-card-content\">\n              {isArbitrum ? (\n                <div className=\"BuyGMXGLP-description\">\n                  <Trans>You can transfer ETH from other networks to Arbitrum using any of the below options:</Trans>\n                </div>\n              ) : (\n                <div className=\"BuyGMXGLP-description\">\n                  <Trans>You can transfer AVAX from other networks to Avalanche using any of the below options:</Trans>\n                </div>\n              )}\n              <div className=\"buttons-group\">\n                {TRANSFER_EXCHANGES.filter((e) => chainId in e.links).map((exchange) => {\n                  const icon = importImage(exchange.icon) || \"\";\n                  const link = exchange.links[chainId];\n                  return (\n                    <Button\n                      variant=\"clear\"\n                      key={exchange.name}\n                      to={link}\n                      imgInfo={{ src: icon, alt: exchange.name }}\n                      newTab\n                    >\n                      {exchange.name}\n                    </Button>\n                  );\n                })}\n              </div>\n            </div>\n          </Card>\n        </div>\n      </div>\n      <Footer />\n    </div>\n  );\n}\n\nfunction DecentralisedExchanges({ chainId, externalLinks }) {\n  const isArbitrum = chainId === ARBITRUM;\n  return (\n    <Card title={t`Buy GMX from a Decentralized Exchange`}>\n      <div className=\"App-card-content\">\n        {isArbitrum ? (\n          <div className=\"exchange-info-group\">\n            <div className=\"BuyGMXGLP-description\">\n              <Trans>Buy GMX from Uniswap (make sure to select Arbitrum):</Trans>\n            </div>\n            <div className=\"buttons-group col-1\">\n              <Button\n                variant=\"clear\"\n                imgInfo={{ src: uniswapArbitrumIcon, alt: \"Uniswap\" }}\n                to={externalLinks.buyGmx.uniswap}\n                newTab\n              >\n                Uniswap\n              </Button>\n            </div>\n          </div>\n        ) : (\n          <div className=\"exchange-info-group\">\n            <div className=\"BuyGMXGLP-description\">\n              <Trans>Buy GMX from Traderjoe:</Trans>\n            </div>\n            <div className=\"buttons-group col-1\">\n              <Button\n                variant=\"clear\"\n                to={externalLinks.buyGmx.traderjoe}\n                imgInfo={{ src: traderjoeIcon, alt: \"Traderjoe\" }}\n                newTab\n              >\n                TraderJoe\n              </Button>\n            </div>\n          </div>\n        )}\n        <div className=\"exchange-info-group\">\n          <div className=\"BuyGMXGLP-description\">\n            <Trans>Buy GMX using Decentralized Exchange Aggregators:</Trans>\n          </div>\n          <div className=\"buttons-group\">\n            {DECENTRALISED_AGGRIGATORS.filter((e) => chainId in e.links).map((exchange) => {\n              const icon = importImage(exchange.icon) || \"\";\n              const link = exchange.links[chainId];\n              return (\n                <Button\n                  variant=\"clear\"\n                  key={exchange.name}\n                  to={link}\n                  imgInfo={{ src: icon, alt: exchange.name }}\n                  newTab\n                >\n                  {exchange.name}\n                </Button>\n              );\n            })}\n          </div>\n        </div>\n        <div className=\"exchange-info-group\">\n          <div className=\"BuyGMXGLP-description\">\n            <Trans>Buy GMX using any token from any network:</Trans>\n          </div>\n          <div className=\"buttons-group\">\n            {GMX_FROM_ANY_NETWORKS.filter((e) => chainId in e.links).map((exchange) => {\n              const icon = importImage(exchange.icon) || \"\";\n              const link = exchange.links[chainId];\n              return (\n                <Button\n                  variant=\"clear\"\n                  key={exchange.name}\n                  to={link}\n                  imgInfo={{ src: icon, alt: exchange.name }}\n                  newTab\n                >\n                  {exchange.name}\n                </Button>\n              );\n            })}\n          </div>\n        </div>\n        {isArbitrum && (\n          <div className=\"exchange-info-group\">\n            <div className=\"BuyGMXGLP-description\">\n              <Trans>GMX bonds can be bought on Bond Protocol with a discount and a small vesting period:</Trans>\n            </div>\n            <div className=\"buttons-group col-1\">\n              <Button\n                variant=\"clear\"\n                to={\"https://app.bondprotocol.finance/#/issuers/GMX\"}\n                imgInfo={{ src: bondProtocolIcon, alt: \"Bond Protocol\" }}\n                newTab\n              >\n                Bond Protocol\n              </Button>\n            </div>\n          </div>\n        )}\n      </div>\n    </Card>\n  );\n}\n\nfunction CentralisedExchanges({ chainId }) {\n  return (\n    <Card title={t`Buy GMX from centralized services`}>\n      <div className=\"App-card-content\">\n        <div className=\"exchange-info-group\">\n          <div className=\"BuyGMXGLP-description\">\n            <Trans>Buy GMX from centralized exchanges:</Trans>\n          </div>\n          <div className=\"buttons-group\">\n            {CENTRALISED_EXCHANGES.filter((e) => chainId in e.links).map((exchange) => {\n              const icon = importImage(exchange.icon) || \"\";\n              const link = exchange.links[chainId];\n              return (\n                <Button\n                  variant=\"clear\"\n                  key={exchange.name}\n                  to={link}\n                  imgInfo={{ src: icon, alt: exchange.name }}\n                  newTab\n                >\n                  {exchange.name}\n                </Button>\n              );\n            })}\n          </div>\n        </div>\n\n        <div className=\"exchange-info-group\">\n          <div className=\"BuyGMXGLP-description\">\n            <Trans>Buy GMX using FIAT gateways:</Trans>\n          </div>\n          <div className=\"buttons-group col-2\">\n            {FIAT_GATEWAYS.filter((e) => chainId in e.links).map((exchange) => {\n              const icon = importImage(exchange.icon) || \"\";\n              let link = exchange.links[chainId];\n\n              return (\n                <Button\n                  variant=\"clear\"\n                  key={exchange.name}\n                  to={link}\n                  imgInfo={{ src: icon, alt: exchange.name }}\n                  newTab\n                >\n                  {exchange.name}\n                </Button>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n    </Card>\n  );\n}\n","import React, { useState } from \"react\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { PLACEHOLDER_ACCOUNT } from \"lib/legacy\";\n\nimport { getContract } from \"config/contracts\";\n\nimport Token from \"abis/Token.json\";\nimport RewardReader from \"abis/RewardReader.json\";\n\nimport Checkbox from \"components/Checkbox/Checkbox\";\n\nimport \"./ClaimEsGmx.css\";\n\nimport arbitrumIcon from \"img/ic_arbitrum_96.svg\";\nimport avaIcon from \"img/ic_avalanche_96.svg\";\n\nimport { Trans, t } from \"@lingui/macro\";\nimport { ARBITRUM, AVALANCHE } from \"config/chains\";\nimport { callContract, contractFetcher } from \"lib/contracts\";\nimport { bigNumberify, formatAmount, formatAmountFree, parseValue } from \"lib/numbers\";\nimport { useChainId } from \"lib/chains\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport Button from \"components/Button/Button\";\n\nconst VEST_WITH_GMX_ARB = \"VEST_WITH_GMX_ARB\";\nconst VEST_WITH_GLP_ARB = \"VEST_WITH_GLP_ARB\";\nconst VEST_WITH_GMX_AVAX = \"VEST_WITH_GMX_AVAX\";\nconst VEST_WITH_GLP_AVAX = \"VEST_WITH_GLP_AVAX\";\n\nexport function getVestingDataV2(vestingInfo) {\n  if (!vestingInfo || vestingInfo.length === 0) {\n    return;\n  }\n\n  const keys = [\"gmxVester\", \"glpVester\"];\n  const data = {};\n  const propsLength = 12;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    data[key] = {\n      pairAmount: vestingInfo[i * propsLength],\n      vestedAmount: vestingInfo[i * propsLength + 1],\n      escrowedBalance: vestingInfo[i * propsLength + 2],\n      claimedAmounts: vestingInfo[i * propsLength + 3],\n      claimable: vestingInfo[i * propsLength + 4],\n      maxVestableAmount: vestingInfo[i * propsLength + 5],\n      combinedAverageStakedAmount: vestingInfo[i * propsLength + 6],\n      cumulativeReward: vestingInfo[i * propsLength + 7],\n      transferredCumulativeReward: vestingInfo[i * propsLength + 8],\n      bonusReward: vestingInfo[i * propsLength + 9],\n      averageStakedAmount: vestingInfo[i * propsLength + 10],\n      transferredAverageStakedAmount: vestingInfo[i * propsLength + 11],\n    };\n\n    data[key + \"PairAmount\"] = data[key].pairAmount;\n    data[key + \"VestedAmount\"] = data[key].vestedAmount;\n    data[key + \"EscrowedBalance\"] = data[key].escrowedBalance;\n    data[key + \"ClaimSum\"] = data[key].claimedAmounts.add(data[key].claimable);\n    data[key + \"Claimable\"] = data[key].claimable;\n    data[key + \"MaxVestableAmount\"] = data[key].maxVestableAmount;\n    data[key + \"CombinedAverageStakedAmount\"] = data[key].combinedAverageStakedAmount;\n    data[key + \"CumulativeReward\"] = data[key].cumulativeReward;\n    data[key + \"TransferredCumulativeReward\"] = data[key].transferredCumulativeReward;\n    data[key + \"BonusReward\"] = data[key].bonusReward;\n    data[key + \"AverageStakedAmount\"] = data[key].averageStakedAmount;\n    data[key + \"TransferredAverageStakedAmount\"] = data[key].transferredAverageStakedAmount;\n  }\n\n  return data;\n}\n\nfunction getVestingValues({ minRatio, amount, vestingDataItem }) {\n  if (!vestingDataItem || !amount || amount.eq(0)) {\n    return;\n  }\n\n  let currentRatio = bigNumberify(0);\n\n  const ratioMultiplier = 10000;\n  const maxVestableAmount = vestingDataItem.maxVestableAmount;\n  const nextMaxVestableEsGmx = maxVestableAmount.add(amount);\n\n  const combinedAverageStakedAmount = vestingDataItem.combinedAverageStakedAmount;\n  if (maxVestableAmount.gt(0)) {\n    currentRatio = combinedAverageStakedAmount.mul(ratioMultiplier).div(maxVestableAmount);\n  }\n\n  const transferredCumulativeReward = vestingDataItem.transferredCumulativeReward;\n  const nextTransferredCumulativeReward = transferredCumulativeReward.add(amount);\n  const cumulativeReward = vestingDataItem.cumulativeReward;\n  const totalCumulativeReward = cumulativeReward.add(nextTransferredCumulativeReward);\n\n  let nextCombinedAverageStakedAmount = combinedAverageStakedAmount;\n\n  if (combinedAverageStakedAmount.lt(totalCumulativeReward.mul(minRatio))) {\n    const averageStakedAmount = vestingDataItem.averageStakedAmount;\n    let nextTransferredAverageStakedAmount = totalCumulativeReward.mul(minRatio);\n    nextTransferredAverageStakedAmount = nextTransferredAverageStakedAmount.sub(\n      averageStakedAmount.mul(cumulativeReward).div(totalCumulativeReward)\n    );\n    nextTransferredAverageStakedAmount = nextTransferredAverageStakedAmount\n      .mul(totalCumulativeReward)\n      .div(nextTransferredCumulativeReward);\n\n    nextCombinedAverageStakedAmount = averageStakedAmount\n      .mul(cumulativeReward)\n      .div(totalCumulativeReward)\n      .add(nextTransferredAverageStakedAmount.mul(nextTransferredCumulativeReward).div(totalCumulativeReward));\n  }\n\n  const nextRatio = nextCombinedAverageStakedAmount.mul(ratioMultiplier).div(nextMaxVestableEsGmx);\n\n  const initialStakingAmount = currentRatio.mul(maxVestableAmount);\n  const nextStakingAmount = nextRatio.mul(nextMaxVestableEsGmx);\n\n  return {\n    maxVestableAmount,\n    currentRatio,\n    nextMaxVestableEsGmx,\n    nextRatio,\n    initialStakingAmount,\n    nextStakingAmount,\n  };\n}\n\nexport default function ClaimEsGmx({ setPendingTxns }) {\n  const { active, account, library } = useWeb3React();\n  const { chainId } = useChainId();\n  const [selectedOption, setSelectedOption] = useState(\"\");\n  const [isClaiming, setIsClaiming] = useState(false);\n  const [value, setValue] = useState(\"\");\n\n  const isArbitrum = chainId === ARBITRUM;\n\n  const esGmxIouAddress = getContract(chainId, \"ES_GMX_IOU\");\n\n  const { data: esGmxIouBalance } = useSWR(\n    isArbitrum && [\n      `ClaimEsGmx:esGmxIouBalance:${active}`,\n      chainId,\n      esGmxIouAddress,\n      \"balanceOf\",\n      account || PLACEHOLDER_ACCOUNT,\n    ],\n    {\n      fetcher: contractFetcher(library, Token),\n    }\n  );\n\n  const arbRewardReaderAddress = getContract(ARBITRUM, \"RewardReader\");\n  const avaxRewardReaderAddress = getContract(AVALANCHE, \"RewardReader\");\n\n  const arbVesterAdddresses = [getContract(ARBITRUM, \"GmxVester\"), getContract(ARBITRUM, \"GlpVester\")];\n  const avaxVesterAdddresses = [getContract(AVALANCHE, \"GmxVester\"), getContract(AVALANCHE, \"GlpVester\")];\n\n  const { data: arbVestingInfo } = useSWR(\n    [\n      `StakeV2:vestingInfo:${active}`,\n      ARBITRUM,\n      arbRewardReaderAddress,\n      \"getVestingInfoV2\",\n      account || PLACEHOLDER_ACCOUNT,\n    ],\n    {\n      fetcher: contractFetcher(undefined, RewardReader, [arbVesterAdddresses]),\n    }\n  );\n\n  const { data: avaxVestingInfo } = useSWR(\n    [\n      `StakeV2:vestingInfo:${active}`,\n      AVALANCHE,\n      avaxRewardReaderAddress,\n      \"getVestingInfoV2\",\n      account || PLACEHOLDER_ACCOUNT,\n    ],\n    {\n      fetcher: contractFetcher(undefined, RewardReader, [avaxVesterAdddresses]),\n    }\n  );\n\n  const arbVestingData = getVestingDataV2(arbVestingInfo);\n  const avaxVestingData = getVestingDataV2(avaxVestingInfo);\n\n  let amount = parseValue(value, 18);\n\n  let maxVestableAmount;\n  let currentRatio;\n\n  let nextMaxVestableEsGmx;\n  let nextRatio;\n\n  let initialStakingAmount;\n  let nextStakingAmount;\n\n  let stakingToken = \"staked GMX\";\n\n  const shouldShowStakingAmounts = false;\n\n  if (selectedOption === VEST_WITH_GMX_ARB && arbVestingData) {\n    const result = getVestingValues({\n      minRatio: bigNumberify(4),\n      amount,\n      vestingDataItem: arbVestingData.gmxVester,\n    });\n\n    if (result) {\n      ({ maxVestableAmount, currentRatio, nextMaxVestableEsGmx, nextRatio, initialStakingAmount, nextStakingAmount } =\n        result);\n    }\n  }\n\n  if (selectedOption === VEST_WITH_GLP_ARB && arbVestingData) {\n    const result = getVestingValues({\n      minRatio: bigNumberify(320),\n      amount,\n      vestingDataItem: arbVestingData.glpVester,\n    });\n\n    if (result) {\n      ({ maxVestableAmount, currentRatio, nextMaxVestableEsGmx, nextRatio, initialStakingAmount, nextStakingAmount } =\n        result);\n    }\n\n    stakingToken = \"GLP\";\n  }\n\n  if (selectedOption === VEST_WITH_GMX_AVAX && avaxVestingData) {\n    const result = getVestingValues({\n      minRatio: bigNumberify(4),\n      amount,\n      vestingDataItem: avaxVestingData.gmxVester,\n    });\n\n    if (result) {\n      ({ maxVestableAmount, currentRatio, nextMaxVestableEsGmx, nextRatio, initialStakingAmount, nextStakingAmount } =\n        result);\n    }\n  }\n\n  if (selectedOption === VEST_WITH_GLP_AVAX && avaxVestingData) {\n    const result = getVestingValues({\n      minRatio: bigNumberify(320),\n      amount,\n      vestingDataItem: avaxVestingData.glpVester,\n    });\n\n    if (result) {\n      ({ maxVestableAmount, currentRatio, nextMaxVestableEsGmx, nextRatio, initialStakingAmount, nextStakingAmount } =\n        result);\n    }\n\n    stakingToken = \"GLP\";\n  }\n\n  const getError = () => {\n    if (!active) {\n      return t`Wallet not connected`;\n    }\n\n    if (esGmxIouBalance && esGmxIouBalance.eq(0)) {\n      return t`No esGMX to claim`;\n    }\n\n    if (!amount || amount.eq(0)) {\n      return t`Enter an amount`;\n    }\n\n    if (selectedOption === \"\") {\n      return t`Select an option`;\n    }\n\n    return false;\n  };\n\n  const error = getError();\n\n  const getPrimaryText = () => {\n    if (error) {\n      return error;\n    }\n\n    if (isClaiming) {\n      return t`Claiming...`;\n    }\n\n    return t`Claim`;\n  };\n\n  const isPrimaryEnabled = () => {\n    return !error && !isClaiming;\n  };\n\n  const claim = () => {\n    setIsClaiming(true);\n\n    let receiver;\n\n    if (selectedOption === VEST_WITH_GMX_ARB) {\n      receiver = \"0x544a6ec142Aa9A7F75235fE111F61eF2EbdC250a\";\n    }\n\n    if (selectedOption === VEST_WITH_GLP_ARB) {\n      receiver = \"0x9d8f6f6eE45275A5Ca3C6f6269c5622b1F9ED515\";\n    }\n\n    if (selectedOption === VEST_WITH_GMX_AVAX) {\n      receiver = \"0x171a321A78dAE0CDC0Ba3409194df955DEEcA746\";\n    }\n\n    if (selectedOption === VEST_WITH_GLP_AVAX) {\n      receiver = \"0x28863Dd19fb52DF38A9f2C6dfed40eeB996e3818\";\n    }\n\n    const contract = new ethers.Contract(esGmxIouAddress, Token.abi, library.getSigner());\n    callContract(chainId, contract, \"transfer\", [receiver, amount], {\n      sentMsg: t`Claim submitted!`,\n      failMsg: t`Claim failed.`,\n      successMsg: t`Claim completed!`,\n      setPendingTxns,\n    })\n      .then(async (res) => {})\n      .finally(() => {\n        setIsClaiming(false);\n      });\n  };\n\n  return (\n    <div className=\"ClaimEsGmx Page page-layout\">\n      <div className=\"Page-title-section mt-0\">\n        <div className=\"Page-title\">\n          <Trans>Claim esGMX</Trans>\n        </div>\n        {!isArbitrum && (\n          <div className=\"Page-description\">\n            <br />\n            <Trans>Please switch your network to Arbitrum.</Trans>\n          </div>\n        )}\n        {isArbitrum && (\n          <div>\n            <div className=\"Page-description\">\n              <br />\n              <Trans>You have {formatAmount(esGmxIouBalance, 18, 2, true)} esGMX (IOU) tokens.</Trans>\n              <br />\n              <br />\n              <Trans>The address of the esGMX (IOU) token is {esGmxIouAddress}.</Trans>\n              <br />\n              <Trans>\n                The esGMX (IOU) token is transferrable. You can add the token to your wallet and send it to another\n                address to claim if you'd like.\n              </Trans>\n              <br />\n              <br />\n              <Trans>Select your vesting option below then click \"Claim\".</Trans>\n              <br />\n              <Trans>\n                After claiming, the esGMX tokens will be airdropped to your account on the selected network within 7\n                days.\n              </Trans>\n              <br />\n              <Trans>The esGMX tokens can be staked or vested at any time.</Trans>\n              <br />\n              <Trans>\n                Your esGMX (IOU) balance will decrease by your claim amount after claiming, this is expected behaviour.\n              </Trans>\n              <br />\n              <Trans>\n                You can check your claim history{\" \"}\n                <ExternalLink href={`https://arbiscan.io/token/${esGmxIouAddress}?a=${account}`}>here</ExternalLink>.\n              </Trans>\n            </div>\n            <br />\n            <div className=\"ClaimEsGmx-vesting-options\">\n              <Checkbox\n                className=\"arbitrum vest-option\"\n                isChecked={selectedOption === VEST_WITH_GMX_ARB}\n                setIsChecked={() => setSelectedOption(VEST_WITH_GMX_ARB)}\n              >\n                <Trans>Vest with GMX on Arbitrum</Trans>\n                <img src={arbitrumIcon} alt=\"Arbitrum\" />\n              </Checkbox>\n              <Checkbox\n                className=\"arbitrum vest-option\"\n                isChecked={selectedOption === VEST_WITH_GLP_ARB}\n                setIsChecked={() => setSelectedOption(VEST_WITH_GLP_ARB)}\n              >\n                <Trans>Vest with GLP on Arbitrum</Trans>\n                <img src={arbitrumIcon} alt=\"Arbitrum\" />\n              </Checkbox>\n              <Checkbox\n                className=\"avalanche vest-option\"\n                isChecked={selectedOption === VEST_WITH_GMX_AVAX}\n                setIsChecked={() => setSelectedOption(VEST_WITH_GMX_AVAX)}\n              >\n                <Trans>Vest with GMX on Avalanche</Trans>\n                <img src={avaIcon} alt=\"Avalanche\" />\n              </Checkbox>\n              <Checkbox\n                className=\"avalanche vest-option\"\n                isChecked={selectedOption === VEST_WITH_GLP_AVAX}\n                setIsChecked={() => setSelectedOption(VEST_WITH_GLP_AVAX)}\n              >\n                <Trans>Vest with GLP on Avalanche</Trans>\n                <img src={avaIcon} alt=\"Avalanche\" />\n              </Checkbox>\n            </div>\n            <br />\n            {!error && (\n              <div className=\"muted\">\n                <Trans>\n                  You can currently vest a maximum of {formatAmount(maxVestableAmount, 18, 2, true)} esGMX tokens at a\n                  ratio of {formatAmount(currentRatio, 4, 2, true)} {stakingToken} to 1 esGMX.\n                </Trans>\n                {shouldShowStakingAmounts && `${formatAmount(initialStakingAmount, 18, 2, true)}.`}\n                <br />\n                <Trans>\n                  After claiming you will be able to vest a maximum of {formatAmount(nextMaxVestableEsGmx, 18, 2, true)}{\" \"}\n                  esGMX at a ratio of {formatAmount(nextRatio, 4, 2, true)} {stakingToken} to 1 esGMX.\n                </Trans>\n                {shouldShowStakingAmounts && `${formatAmount(nextStakingAmount, 18, 2, true)}.`}\n                <br />\n                <br />\n              </div>\n            )}\n            <div>\n              <div className=\"ClaimEsGmx-input-label muted\">\n                <Trans>Amount to claim</Trans>\n              </div>\n              <div className=\"ClaimEsGmx-input-container\">\n                <input type=\"number\" placeholder=\"0.0\" value={value} onChange={(e) => setValue(e.target.value)} />\n                {value !== formatAmountFree(esGmxIouBalance, 18, 18) && (\n                  <div\n                    className=\"ClaimEsGmx-max-button\"\n                    onClick={() => setValue(formatAmountFree(esGmxIouBalance, 18, 18))}\n                  >\n                    <Trans>MAX</Trans>\n                  </div>\n                )}\n              </div>\n            </div>\n            <br />\n            <div>\n              <Button variant=\"primary-action\" className=\"w-100\" disabled={!isPrimaryEnabled()} onClick={() => claim()}>\n                {getPrimaryText()}\n              </Button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { ethers } from \"ethers\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { useCopyToClipboard } from \"react-use\";\n\nimport { getContract } from \"config/contracts\";\n\nimport Modal from \"components/Modal/Modal\";\nimport Footer from \"components/Footer/Footer\";\n\nimport RewardRouter from \"abis/RewardRouter.json\";\n\nimport \"./CompleteAccountTransfer.css\";\n\nimport { Trans, t } from \"@lingui/macro\";\nimport { callContract } from \"lib/contracts\";\nimport { helperToast } from \"lib/helperToast\";\nimport { useChainId } from \"lib/chains\";\nimport Button from \"components/Button/Button\";\n\nexport default function CompleteAccountTransfer(props) {\n  const [, copyToClipboard] = useCopyToClipboard();\n  const { sender, receiver } = useParams();\n  const { setPendingTxns } = props;\n  const { library, account } = useWeb3React();\n  const [isTransferSubmittedModalVisible, setIsTransferSubmittedModalVisible] = useState(false);\n\n  const { chainId } = useChainId();\n\n  const [isConfirming, setIsConfirming] = useState(false);\n  const isCorrectAccount = (account || \"\").toString().toLowerCase() === (receiver || \"\").toString().toLowerCase();\n\n  const rewardRouterAddress = getContract(chainId, \"RewardRouter\");\n\n  const getError = () => {\n    if (!account) {\n      return t`Wallet is not connected`;\n    }\n    if (!isCorrectAccount) {\n      return t`Incorrect Account`;\n    }\n  };\n\n  const isPrimaryEnabled = () => {\n    const error = getError();\n    if (error) {\n      return false;\n    }\n    if (isConfirming) {\n      return false;\n    }\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    const error = getError();\n    if (error) {\n      return error;\n    }\n    return t`Complete Transfer`;\n  };\n\n  const onClickPrimary = () => {\n    setIsConfirming(true);\n\n    const contract = new ethers.Contract(rewardRouterAddress, RewardRouter.abi, library.getSigner());\n\n    callContract(chainId, contract, \"acceptTransfer\", [sender], {\n      sentMsg: t`Transfer submitted!`,\n      failMsg: t`Transfer failed.`,\n      setPendingTxns,\n    })\n      .then(async (res) => {\n        setIsTransferSubmittedModalVisible(true);\n      })\n      .finally(() => {\n        setIsConfirming(false);\n      });\n  };\n\n  return (\n    <div className=\"CompleteAccountTransfer Page page-layout\">\n      <Modal\n        isVisible={isTransferSubmittedModalVisible}\n        setIsVisible={setIsTransferSubmittedModalVisible}\n        label=\"Transfer Completed\"\n      >\n        <Trans>Your transfer has been completed.</Trans>\n        <br />\n        <br />\n        <Link className=\"App-cta\" to=\"/earn\">\n          <Trans>Continue</Trans>\n        </Link>\n      </Modal>\n      <div className=\"Page-title-section\">\n        <div className=\"Page-title\">\n          <Trans>Complete Account Transfer</Trans>\n        </div>\n        {!isCorrectAccount && (\n          <div className=\"Page-description\">\n            <Trans>To complete the transfer, you must switch your connected account to {receiver}.</Trans>\n            <br />\n            <br />\n            <Trans>\n              You will need to be on this page to accept the transfer,{\" \"}\n              <span\n                onClick={() => {\n                  copyToClipboard(window.location.href);\n                  helperToast.success(\"Link copied to your clipboard\");\n                }}\n              >\n                click here\n              </span>{\" \"}\n              to copy the link to this page if needed.\n            </Trans>\n            <br />\n            <br />\n          </div>\n        )}\n        {isCorrectAccount && (\n          <div className=\"Page-description\">\n            <Trans>You have a pending transfer from {sender}.</Trans>\n            <br />\n          </div>\n        )}\n      </div>\n      {isCorrectAccount && (\n        <div className=\"Page-content\">\n          <div className=\"input-form\">\n            <div className=\"input-row\">\n              <Button\n                variant=\"primary-action\"\n                className=\"w-100\"\n                disabled={!isPrimaryEnabled()}\n                onClick={onClickPrimary}\n              >\n                {getPrimaryText()}\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n      <Footer />\n    </div>\n  );\n}\n","import useSWR from \"swr\";\nimport { ARBITRUM, AVALANCHE, AVALANCHE_FUJI } from \"config/chains\";\nimport { getServerUrl } from \"config/backend\";\nimport { arrayURLFetcher } from \"lib/fetcher\";\nconst ACTIVE_CHAIN_IDS = [ARBITRUM, AVALANCHE, AVALANCHE_FUJI];\n\nexport function useFeesSummary() {\n  const { data: feesSummary } = useSWR(\n    ACTIVE_CHAIN_IDS.map((chainId) => getServerUrl(chainId, \"/fees_summary\")),\n    {\n      fetcher: arrayURLFetcher,\n    }\n  );\n\n  const feesSummaryByChain = {};\n  for (let i = 0; i < ACTIVE_CHAIN_IDS.length; i++) {\n    if (feesSummary && feesSummary.length === ACTIVE_CHAIN_IDS.length) {\n      feesSummaryByChain[ACTIVE_CHAIN_IDS[i]] = feesSummary[i];\n    } else {\n      feesSummaryByChain[ACTIVE_CHAIN_IDS[i]] = {};\n    }\n  }\n\n  return { data: feesSummaryByChain };\n}\n","import useSWR from \"swr\";\nimport { getTotalVolumeSum } from \"lib/legacy\";\nimport { ARBITRUM, AVALANCHE } from \"config/chains\";\nimport { getServerUrl } from \"config/backend\";\nimport { bigNumberify } from \"lib/numbers\";\nimport { arrayURLFetcher } from \"lib/fetcher\";\nconst ACTIVE_CHAIN_IDS = [ARBITRUM, AVALANCHE];\n\nexport function useTotalVolume() {\n  const { data: totalVolume } = useSWR<any>(\n    ACTIVE_CHAIN_IDS.map((chain) => getServerUrl(chain, \"/total_volume\")),\n    {\n      fetcher: arrayURLFetcher,\n    }\n  );\n  if (totalVolume?.length > 0) {\n    return ACTIVE_CHAIN_IDS.reduce(\n      (acc, chainId, index) => {\n        const sum = getTotalVolumeSum(totalVolume[index])!;\n        acc[chainId] = sum;\n        acc.total = acc.total.add(sum);\n        return acc;\n      },\n      { total: bigNumberify(0)! }\n    );\n  }\n}\n","import { Trans } from \"@lingui/macro\";\nimport { BigNumber } from \"ethers\";\nimport { USD_DECIMALS } from \"lib/legacy\";\nimport \"./StatsTooltip.css\";\nimport { formatAmount } from \"lib/numbers\";\n\ntype Props = {\n  title: string;\n  total?: BigNumber;\n  avaxValue?: BigNumber;\n  arbitrumValue?: BigNumber;\n  showDollar?: boolean;\n  decimalsForConversion: number;\n  symbol: string;\n};\n\nexport default function StatsTooltip({\n  title,\n  total,\n  avaxValue,\n  arbitrumValue,\n  showDollar = true,\n  decimalsForConversion = USD_DECIMALS,\n  symbol,\n}: Props) {\n  return (\n    <>\n      <p className=\"Tooltip-row\">\n        <span className=\"label\">\n          <Trans>{title} on Arbitrum:</Trans>\n        </span>\n        <span className=\"amount\">\n          {showDollar && \"$\"}\n          {formatAmount(arbitrumValue, decimalsForConversion, 0, true)}\n          {!showDollar && symbol && \" \" + symbol}\n        </span>\n      </p>\n      <p className=\"Tooltip-row\">\n        <span className=\"label\">\n          <Trans>{title} on Avalanche:</Trans>\n        </span>\n        <span className=\"amount\">\n          {showDollar && \"$\"}\n          {formatAmount(avaxValue, decimalsForConversion, 0, true)}\n          {!showDollar && symbol && \" \" + symbol}\n        </span>\n      </p>\n      <div className=\"Tooltip-divider\" />\n      <p className=\"Tooltip-row\">\n        <span className=\"label\">\n          <Trans>Total:</Trans>\n        </span>\n        <span className=\"amount\">\n          {showDollar && \"$\"}\n          {formatAmount(total, decimalsForConversion, 0, true)}\n          {!showDollar && symbol && \" \" + symbol}\n        </span>\n      </p>\n    </>\n  );\n}\n","import { AVALANCHE_FUJI } from \"./chains\";\nimport { isDevelopment } from \"./env\";\n\nexport function getIsSyntheticsSupported(chainId: number) {\n  if (isDevelopment()) {\n    return [AVALANCHE_FUJI].includes(chainId);\n  }\n\n  return false;\n}\n","import { Trans } from \"@lingui/macro\";\nimport StatsTooltipRow from \"components/StatsTooltip/StatsTooltipRow\";\nimport Tooltip from \"components/Tooltip/Tooltip\";\nimport { getIcon } from \"config/icons\";\nimport { getToken } from \"config/tokens\";\nimport { getFundingFeeFactor } from \"domain/synthetics/fees\";\nimport { Market, getReservedUsd, useMarketsInfo } from \"domain/synthetics/markets\";\nimport { TokenData, getMidPrice } from \"domain/synthetics/tokens\";\nimport { BigNumber, ethers } from \"ethers\";\nimport { useChainId } from \"lib/chains\";\nimport { BASIS_POINTS_DIVISOR, importImage } from \"lib/legacy\";\nimport { formatAmount, formatUsd } from \"lib/numbers\";\nimport AssetDropdown from \"pages/Dashboard/AssetDropdown\";\n\nimport { useMemo } from \"react\";\nimport { useMedia } from \"react-use\";\n\nfunction formatFundingRate(fundingRate?: BigNumber) {\n  if (!fundingRate) {\n    return \"-\";\n  }\n\n  const sign = fundingRate.isZero() ? \"\" : fundingRate.isNegative() ? \"-\" : \"+\";\n\n  return `${sign}${formatAmount(fundingRate.mul(100).abs(), 30, 4)}%`;\n}\n\nexport function MarketsList() {\n  const { chainId } = useChainId();\n\n  const { marketsInfoData } = useMarketsInfo(chainId);\n\n  const isMobile = useMedia(\"(max-width: 1100px)\");\n\n  const indexTokensStats = useMemo(() => {\n    const markets = Object.values(marketsInfoData || {});\n\n    const indexMap: {\n      [address: string]: {\n        token: TokenData;\n        price: BigNumber;\n        totalPoolValue: BigNumber;\n        minFundingRate: BigNumber;\n        maxFundingRate: BigNumber;\n        totalUtilization: BigNumber;\n        totalReservedUsd: BigNumber;\n        marketsStats: {\n          market: Market;\n          poolValueUsd: BigNumber;\n          fundingRate: BigNumber;\n          utilization: BigNumber;\n        }[];\n      };\n    } = {};\n\n    for (const market of markets) {\n      if (!indexMap[market.indexTokenAddress]) {\n        const token = market.indexToken;\n\n        if (!token.prices) {\n          continue;\n        }\n\n        const price = getMidPrice(token?.prices)!;\n\n        indexMap[market.indexTokenAddress] = {\n          token,\n          price,\n          totalPoolValue: BigNumber.from(0),\n          minFundingRate: ethers.constants.MaxInt256,\n          maxFundingRate: BigNumber.from(0),\n          totalUtilization: BigNumber.from(0),\n          totalReservedUsd: BigNumber.from(0),\n          marketsStats: [],\n        };\n      }\n\n      const indexTokenStats = indexMap[market.indexTokenAddress];\n\n      const poolValueUsd = market.poolValueMax;\n\n      const longReservedUsd = getReservedUsd(market, true);\n\n      const shortReservedUsd = getReservedUsd(market, false);\n\n      const totalReservedUsd = longReservedUsd?.add(shortReservedUsd || 0);\n\n      const fundingRate = getFundingFeeFactor(market, true, 60 * 60) || BigNumber.from(0);\n\n      if (fundingRate.gt(indexTokenStats.maxFundingRate)) {\n        indexTokenStats.maxFundingRate = fundingRate;\n      }\n\n      if (fundingRate.lt(indexTokenStats.minFundingRate)) {\n        indexTokenStats.minFundingRate = fundingRate;\n      }\n\n      const utilization =\n        poolValueUsd?.gt(0) && totalReservedUsd\n          ? totalReservedUsd.mul(BASIS_POINTS_DIVISOR).div(poolValueUsd || 0)\n          : BigNumber.from(0);\n\n      indexTokenStats.totalPoolValue = indexTokenStats.totalPoolValue.add(poolValueUsd || 0);\n\n      indexTokenStats.totalReservedUsd = indexTokenStats.totalReservedUsd.add(totalReservedUsd || 0);\n      indexTokenStats.marketsStats.push({\n        market,\n        utilization,\n        fundingRate,\n        poolValueUsd,\n      });\n    }\n\n    for (const indexTokenStats of Object.values(indexMap)) {\n      indexTokenStats.totalUtilization = indexTokenStats.totalPoolValue.gt(0)\n        ? indexTokenStats.totalReservedUsd.mul(BASIS_POINTS_DIVISOR).div(indexTokenStats.totalPoolValue)\n        : BigNumber.from(0);\n    }\n\n    return Object.values(indexMap);\n  }, [marketsInfoData]);\n\n  return (\n    <>\n      {!isMobile && (\n        <div className=\"token-table-wrapper App-card\">\n          <div className=\"App-card-title\">\n            <Trans>GM Index Composition</Trans> <img src={getIcon(chainId, \"network\")} width=\"16\" alt=\"Network Icon\" />\n          </div>\n          <div className=\"App-card-divider\"></div>\n          <table className=\"token-table\">\n            <thead>\n              <tr>\n                <th>\n                  <Trans>TOKEN</Trans>\n                </th>\n                <th>\n                  <Trans>PRICE</Trans>\n                </th>\n                <th>\n                  <Trans>POOL</Trans>\n                </th>\n                <th>\n                  <Trans>FUNDING RATE / 1h</Trans>\n                </th>\n                <th>\n                  <Trans>UTILIZATION</Trans>\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {indexTokensStats.map((stats) => (\n                <tr key={stats.token.symbol}>\n                  <td>\n                    <div className=\"token-symbol-wrapper\">\n                      <div className=\"App-card-title-info\">\n                        <div className=\"App-card-title-info-icon\">\n                          <img\n                            src={importImage(\"ic_\" + stats.token.symbol.toLocaleLowerCase() + \"_40.svg\")}\n                            alt={stats.token.symbol}\n                            width=\"40\"\n                          />\n                        </div>\n                        <div className=\"App-card-title-info-text\">\n                          <div className=\"App-card-title-info-text-name\">{stats.token.name}</div>\n                          <div className=\"App-card-title-info-text-address\">{stats.token.symbol}</div>\n                        </div>\n                        <div>\n                          <AssetDropdown assetSymbol={stats.token.symbol} assetInfo={stats.token} />\n                        </div>\n                      </div>\n                    </div>\n                  </td>\n                  <td>{formatUsd(stats.token.prices?.minPrice)}</td>\n                  <td>\n                    <Tooltip\n                      handle={formatUsd(stats.totalPoolValue)}\n                      renderContent={() => (\n                        <>\n                          {stats.marketsStats.map(({ market, poolValueUsd }) => (\n                            <StatsTooltipRow\n                              key={market.marketTokenAddress}\n                              showDollar={false}\n                              label={`[${getToken(chainId, market.longTokenAddress)?.symbol}-${\n                                getToken(chainId, market.shortTokenAddress)?.symbol\n                              }]`}\n                              value={formatUsd(poolValueUsd)}\n                            />\n                          ))}\n                        </>\n                      )}\n                    />\n                  </td>\n                  <td>\n                    <Tooltip\n                      handle={`${formatFundingRate(stats.minFundingRate)} / ${formatFundingRate(stats.maxFundingRate)}`}\n                      renderContent={() => (\n                        <>\n                          {stats.marketsStats.map(({ market, fundingRate }) => (\n                            <StatsTooltipRow\n                              key={market.marketTokenAddress}\n                              showDollar={false}\n                              label={`[${getToken(chainId, market.longTokenAddress)?.symbol}-${\n                                getToken(chainId, market.shortTokenAddress)?.symbol\n                              }]`}\n                              value={`${formatFundingRate(fundingRate)}`}\n                            />\n                          ))}\n                        </>\n                      )}\n                    />\n                  </td>\n                  <td>{formatAmount(stats.totalUtilization, 2, 2)}%</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n\n      {isMobile && (\n        <>\n          <div className=\"App-card-title-small\">\n            <span>\n              <Trans>GM Index Composition</Trans>\n            </span>\n            <img className=\"title-icon\" src={getIcon(chainId, \"network\")} width=\"16\" alt=\"Network Icon\" />\n          </div>\n\n          <div className=\"token-grid\">\n            {indexTokensStats.map((stats) => (\n              <div className=\"App-card\" key={stats.token.symbol}>\n                <div className=\"App-card-title\">\n                  <div className=\"mobile-token-card\">\n                    <img\n                      src={importImage(\"ic_\" + stats.token.symbol.toLocaleLowerCase() + \"_40.svg\")}\n                      alt={stats.token.symbol}\n                      width=\"20\"\n                    />\n                    <div className=\"token-symbol-text\">{stats.token.symbol}</div>\n                    <div>\n                      <AssetDropdown assetSymbol={stats.token.symbol} assetInfo={stats.token} />\n                    </div>\n                  </div>\n                </div>\n                <div className=\"App-card-divider\"></div>\n                <div className=\"App-card-content\">\n                  <div className=\"App-card-row\">\n                    <div className=\"label\">\n                      <Trans>Price</Trans>\n                    </div>\n                    <div>{formatUsd(stats.token.prices?.minPrice)}</div>\n                  </div>\n                  <div className=\"App-card-row\">\n                    <div className=\"label\">\n                      <Trans>Pool</Trans>\n                    </div>\n                    <div>\n                      <Tooltip\n                        handle={`${formatFundingRate(stats.minFundingRate)} / ${formatFundingRate(\n                          stats.maxFundingRate\n                        )}`}\n                        renderContent={() => (\n                          <>\n                            {stats.marketsStats.map(({ market, fundingRate }) => (\n                              <StatsTooltipRow\n                                key={market.marketTokenAddress}\n                                showDollar={false}\n                                label={`[${getToken(chainId, market.longTokenAddress)?.symbol}-${\n                                  getToken(chainId, market.shortTokenAddress)?.symbol\n                                }]`}\n                                value={`${formatFundingRate(fundingRate)}`}\n                              />\n                            ))}\n                          </>\n                        )}\n                      />\n                    </div>\n                  </div>\n                  <div className=\"App-card-row\">\n                    <div className=\"label\">\n                      <Trans>Funding Rate / 1h</Trans>\n                    </div>\n                    <div>\n                      <Tooltip\n                        handle={`${formatAmount(stats.minFundingRate.mul(100), 30, 4)}% / ${formatAmount(\n                          stats.maxFundingRate.mul(100),\n                          30,\n                          4\n                        )}`}\n                        renderContent={() => (\n                          <>\n                            {stats.marketsStats.map(({ market, poolValueUsd }) => (\n                              <StatsTooltipRow\n                                key={market.marketTokenAddress}\n                                showDollar={false}\n                                label={`[${getToken(chainId, market.longTokenAddress)?.symbol}-${\n                                  getToken(chainId, market.shortTokenAddress)?.symbol\n                                }]`}\n                                value={`${formatAmount(stats.minFundingRate.mul(100), 30, 4)}%`}\n                              />\n                            ))}\n                          </>\n                        )}\n                      />\n                    </div>\n                  </div>\n                  <div className=\"App-card-row\">\n                    <div className=\"label\">\n                      <Trans>Utilization</Trans>\n                    </div>\n                    <div>{formatAmount(stats.totalUtilization, 2, 2, false)}%</div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </>\n      )}\n    </>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { Trans, t } from \"@lingui/macro\";\nimport useSWR from \"swr\";\nimport { PieChart, Pie, Cell, Tooltip } from \"recharts\";\nimport TooltipComponent from \"components/Tooltip/Tooltip\";\n\nimport hexToRgba from \"hex-to-rgba\";\nimport { ethers } from \"ethers\";\n\nimport {\n  USD_DECIMALS,\n  GMX_DECIMALS,\n  GLP_DECIMALS,\n  BASIS_POINTS_DIVISOR,\n  DEFAULT_MAX_USDG_AMOUNT,\n  getPageTitle,\n  importImage,\n} from \"lib/legacy\";\nimport { useTotalGmxInLiquidity, useGmxPrice, useTotalGmxStaked, useTotalGmxSupply } from \"domain/legacy\";\n\nimport { getContract } from \"config/contracts\";\n\nimport VaultV2 from \"abis/VaultV2.json\";\nimport ReaderV2 from \"abis/ReaderV2.json\";\nimport GlpManager from \"abis/GlpManager.json\";\nimport Footer from \"components/Footer/Footer\";\n\nimport \"./DashboardV2.css\";\n\nimport AssetDropdown from \"./AssetDropdown\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport SEO from \"components/Common/SEO\";\nimport { useTotalVolume, useVolumeInfo, useFeesSummary } from \"domain/stats\";\nimport StatsTooltip from \"components/StatsTooltip/StatsTooltip\";\nimport StatsTooltipRow from \"components/StatsTooltip/StatsTooltipRow\";\nimport { ARBITRUM, AVALANCHE, getChainName } from \"config/chains\";\nimport { getServerUrl } from \"config/backend\";\nimport { contractFetcher } from \"lib/contracts\";\nimport { useInfoTokens } from \"domain/tokens\";\nimport { getTokenBySymbol, getWhitelistedTokens, GLP_POOL_COLORS } from \"config/tokens\";\nimport { bigNumberify, expandDecimals, formatAmount, formatKeyAmount, numberWithCommas } from \"lib/numbers\";\nimport { useChainId } from \"lib/chains\";\nimport { formatDate } from \"lib/dates\";\nimport { getIcons } from \"config/icons\";\nimport { arrayURLFetcher } from \"lib/fetcher\";\nimport { getIsSyntheticsSupported } from \"config/features\";\nimport { MarketsList } from \"components/Synthetics/MarketsList/MarketsList\";\nimport { useMedia } from \"react-use\";\nconst ACTIVE_CHAIN_IDS = [ARBITRUM, AVALANCHE];\n\nconst { AddressZero } = ethers.constants;\n\nfunction getPositionStats(positionStats) {\n  if (!positionStats || positionStats.length === 0) {\n    return null;\n  }\n  return positionStats.reduce(\n    (acc, cv, i) => {\n      acc.totalLongPositionSizes = acc.totalLongPositionSizes.add(cv.totalLongPositionSizes);\n      acc.totalShortPositionSizes = acc.totalShortPositionSizes.add(cv.totalShortPositionSizes);\n      acc[ACTIVE_CHAIN_IDS[i]] = cv;\n      return acc;\n    },\n    {\n      totalLongPositionSizes: bigNumberify(0),\n      totalShortPositionSizes: bigNumberify(0),\n    }\n  );\n}\n\nfunction getCurrentFeesUsd(tokenAddresses, fees, infoTokens) {\n  if (!fees || !infoTokens) {\n    return bigNumberify(0);\n  }\n\n  let currentFeesUsd = bigNumberify(0);\n  for (let i = 0; i < tokenAddresses.length; i++) {\n    const tokenAddress = tokenAddresses[i];\n    const tokenInfo = infoTokens[tokenAddress];\n    if (!tokenInfo || !tokenInfo.contractMinPrice) {\n      continue;\n    }\n\n    const feeUsd = fees[i].mul(tokenInfo.contractMinPrice).div(expandDecimals(1, tokenInfo.decimals));\n    currentFeesUsd = currentFeesUsd.add(feeUsd);\n  }\n\n  return currentFeesUsd;\n}\n\nexport default function DashboardV2() {\n  const { active, library } = useWeb3React();\n  const { chainId } = useChainId();\n  const totalVolume = useTotalVolume();\n\n  const isMobile = useMedia(\"(max-width: 1200px)\");\n\n  const chainName = getChainName(chainId);\n  const currentIcons = getIcons(chainId);\n\n  const { data: positionStats } = useSWR(\n    ACTIVE_CHAIN_IDS.map((chainId) => getServerUrl(chainId, \"/position_stats\")),\n    {\n      fetcher: arrayURLFetcher,\n    }\n  );\n\n  let { total: totalGmxSupply } = useTotalGmxSupply();\n\n  const currentVolumeInfo = useVolumeInfo();\n\n  const positionStatsInfo = getPositionStats(positionStats);\n\n  function getWhitelistedTokenAddresses(chainId) {\n    const whitelistedTokens = getWhitelistedTokens(chainId);\n    return whitelistedTokens.map((token) => token.address);\n  }\n\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const tokenList = whitelistedTokens.filter((t) => !t.isWrapped);\n  const visibleTokens = tokenList.filter((t) => !t.isTempHidden);\n\n  const readerAddress = getContract(chainId, \"Reader\");\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const glpManagerAddress = getContract(chainId, \"GlpManager\");\n\n  const gmxAddress = getContract(chainId, \"GMX\");\n  const glpAddress = getContract(chainId, \"GLP\");\n  const usdgAddress = getContract(chainId, \"USDG\");\n\n  const tokensForSupplyQuery = [gmxAddress, glpAddress, usdgAddress];\n\n  const { data: aums } = useSWR([`Dashboard:getAums:${active}`, chainId, glpManagerAddress, \"getAums\"], {\n    fetcher: contractFetcher(library, GlpManager),\n  });\n\n  const { data: totalSupplies } = useSWR(\n    [`Dashboard:totalSupplies:${active}`, chainId, readerAddress, \"getTokenBalancesWithSupplies\", AddressZero],\n    {\n      fetcher: contractFetcher(library, ReaderV2, [tokensForSupplyQuery]),\n    }\n  );\n\n  const { data: totalTokenWeights } = useSWR(\n    [`GlpSwap:totalTokenWeights:${active}`, chainId, vaultAddress, \"totalTokenWeights\"],\n    {\n      fetcher: contractFetcher(library, VaultV2),\n    }\n  );\n\n  const { infoTokens } = useInfoTokens(library, chainId, active, undefined, undefined);\n  const { infoTokens: infoTokensArbitrum } = useInfoTokens(null, ARBITRUM, active, undefined, undefined);\n  const { infoTokens: infoTokensAvax } = useInfoTokens(null, AVALANCHE, active, undefined, undefined);\n\n  const { data: currentFees } = useSWR(\n    infoTokensArbitrum[AddressZero].contractMinPrice && infoTokensAvax[AddressZero].contractMinPrice\n      ? \"Dashboard:currentFees\"\n      : null,\n    {\n      fetcher: () => {\n        return Promise.all(\n          ACTIVE_CHAIN_IDS.map((chainId) =>\n            contractFetcher(null, ReaderV2, [getWhitelistedTokenAddresses(chainId)])(\n              `Dashboard:fees:${chainId}`,\n              chainId,\n              getContract(chainId, \"Reader\"),\n              \"getFees\",\n              getContract(chainId, \"Vault\")\n            )\n          )\n        ).then((fees) => {\n          return fees.reduce(\n            (acc, cv, i) => {\n              const feeUSD = getCurrentFeesUsd(\n                getWhitelistedTokenAddresses(ACTIVE_CHAIN_IDS[i]),\n                cv,\n                ACTIVE_CHAIN_IDS[i] === ARBITRUM ? infoTokensArbitrum : infoTokensAvax\n              );\n              acc[ACTIVE_CHAIN_IDS[i]] = feeUSD;\n              acc.total = acc.total.add(feeUSD);\n              return acc;\n            },\n            { total: bigNumberify(0) }\n          );\n        });\n      },\n    }\n  );\n\n  const { data: feesSummaryByChain } = useFeesSummary();\n  const feesSummary = feesSummaryByChain[chainId];\n\n  const eth = infoTokens[getTokenBySymbol(chainId, \"ETH\").address];\n  const shouldIncludeCurrrentFees =\n    feesSummaryByChain[chainId]?.lastUpdatedAt &&\n    parseInt(Date.now() / 1000) - feesSummaryByChain[chainId]?.lastUpdatedAt > 60 * 60;\n\n  const totalFees = ACTIVE_CHAIN_IDS.map((chainId) => {\n    if (shouldIncludeCurrrentFees && currentFees && currentFees[chainId]) {\n      return currentFees[chainId].div(expandDecimals(1, USD_DECIMALS)).add(feesSummaryByChain[chainId]?.totalFees || 0);\n    }\n\n    return feesSummaryByChain[chainId].totalFees || 0;\n  })\n    .map((v) => Math.round(v))\n    .reduce(\n      (acc, cv, i) => {\n        acc[ACTIVE_CHAIN_IDS[i]] = cv;\n        acc.total = acc.total + cv;\n        return acc;\n      },\n      { total: 0 }\n    );\n\n  const { gmxPrice, gmxPriceFromArbitrum, gmxPriceFromAvalanche } = useGmxPrice(\n    chainId,\n    { arbitrum: chainId === ARBITRUM ? library : undefined },\n    active\n  );\n\n  let { total: totalGmxInLiquidity } = useTotalGmxInLiquidity(chainId, active);\n\n  let { avax: avaxStakedGmx, arbitrum: arbitrumStakedGmx, total: totalStakedGmx } = useTotalGmxStaked();\n\n  let gmxMarketCap;\n  if (gmxPrice && totalGmxSupply) {\n    gmxMarketCap = gmxPrice.mul(totalGmxSupply).div(expandDecimals(1, GMX_DECIMALS));\n  }\n\n  let stakedGmxSupplyUsd;\n  if (gmxPrice && totalStakedGmx) {\n    stakedGmxSupplyUsd = totalStakedGmx.mul(gmxPrice).div(expandDecimals(1, GMX_DECIMALS));\n  }\n\n  let aum;\n  if (aums && aums.length > 0) {\n    aum = aums[0].add(aums[1]).div(2);\n  }\n\n  let glpPrice;\n  let glpSupply;\n  let glpMarketCap;\n  if (aum && totalSupplies && totalSupplies[3]) {\n    glpSupply = totalSupplies[3];\n    glpPrice =\n      aum && aum.gt(0) && glpSupply.gt(0)\n        ? aum.mul(expandDecimals(1, GLP_DECIMALS)).div(glpSupply)\n        : expandDecimals(1, USD_DECIMALS);\n    glpMarketCap = glpPrice.mul(glpSupply).div(expandDecimals(1, GLP_DECIMALS));\n  }\n\n  let tvl;\n  if (glpMarketCap && gmxPrice && totalStakedGmx) {\n    tvl = glpMarketCap.add(gmxPrice.mul(totalStakedGmx).div(expandDecimals(1, GMX_DECIMALS)));\n  }\n\n  const ethFloorPriceFund = expandDecimals(350 + 148 + 384, 18);\n  const glpFloorPriceFund = expandDecimals(660001, 18);\n  const usdcFloorPriceFund = expandDecimals(784598 + 200000, 30);\n\n  let totalFloorPriceFundUsd;\n\n  if (eth && eth.contractMinPrice && glpPrice) {\n    const ethFloorPriceFundUsd = ethFloorPriceFund.mul(eth.contractMinPrice).div(expandDecimals(1, eth.decimals));\n    const glpFloorPriceFundUsd = glpFloorPriceFund.mul(glpPrice).div(expandDecimals(1, 18));\n\n    totalFloorPriceFundUsd = ethFloorPriceFundUsd.add(glpFloorPriceFundUsd).add(usdcFloorPriceFund);\n  }\n\n  let adjustedUsdgSupply = bigNumberify(0);\n\n  for (let i = 0; i < tokenList.length; i++) {\n    const token = tokenList[i];\n    const tokenInfo = infoTokens[token.address];\n    if (tokenInfo && tokenInfo.usdgAmount) {\n      adjustedUsdgSupply = adjustedUsdgSupply.add(tokenInfo.usdgAmount);\n    }\n  }\n\n  const getWeightText = (tokenInfo) => {\n    if (\n      !tokenInfo.weight ||\n      !tokenInfo.usdgAmount ||\n      !adjustedUsdgSupply ||\n      adjustedUsdgSupply.eq(0) ||\n      !totalTokenWeights\n    ) {\n      return \"...\";\n    }\n\n    const currentWeightBps = tokenInfo.usdgAmount.mul(BASIS_POINTS_DIVISOR).div(adjustedUsdgSupply);\n    // use add(1).div(10).mul(10) to round numbers up\n    const targetWeightBps = tokenInfo.weight.mul(BASIS_POINTS_DIVISOR).div(totalTokenWeights).add(1).div(10).mul(10);\n\n    const weightText = `${formatAmount(currentWeightBps, 2, 2, false)}% / ${formatAmount(\n      targetWeightBps,\n      2,\n      2,\n      false\n    )}%`;\n\n    return (\n      <TooltipComponent\n        handle={weightText}\n        position=\"right-bottom\"\n        renderContent={() => {\n          return (\n            <>\n              <StatsTooltipRow\n                label={t`Current Weight`}\n                value={`${formatAmount(currentWeightBps, 2, 2, false)}%`}\n                showDollar={false}\n              />\n              <StatsTooltipRow\n                label={t`Target Weight`}\n                value={`${formatAmount(targetWeightBps, 2, 2, false)}%`}\n                showDollar={false}\n              />\n              <br />\n              {currentWeightBps.lt(targetWeightBps) && (\n                <div className=\"text-white\">\n                  <Trans>\n                    {tokenInfo.symbol} is below its target weight.\n                    <br />\n                    <br />\n                    Get lower fees to{\" \"}\n                    <Link to=\"/buy_glp\" target=\"_blank\" rel=\"noopener noreferrer\">\n                      buy GLP\n                    </Link>{\" \"}\n                    with {tokenInfo.symbol}, and to{\" \"}\n                    <Link to=\"/trade\" target=\"_blank\" rel=\"noopener noreferrer\">\n                      swap\n                    </Link>{\" \"}\n                    {tokenInfo.symbol} for other tokens.\n                  </Trans>\n                </div>\n              )}\n              {currentWeightBps.gt(targetWeightBps) && (\n                <div className=\"text-white\">\n                  <Trans>\n                    {tokenInfo.symbol} is above its target weight.\n                    <br />\n                    <br />\n                    Get lower fees to{\" \"}\n                    <Link to=\"/trade\" target=\"_blank\" rel=\"noopener noreferrer\">\n                      swap\n                    </Link>{\" \"}\n                    tokens for {tokenInfo.symbol}.\n                  </Trans>\n                </div>\n              )}\n              <br />\n              <div>\n                <ExternalLink href=\"https://gmxio.gitbook.io/gmx/glp\">\n                  <Trans>More Info</Trans>\n                </ExternalLink>\n              </div>\n            </>\n          );\n        }}\n      />\n    );\n  };\n\n  let stakedPercent = 0;\n\n  if (totalGmxSupply && !totalGmxSupply.isZero() && !totalStakedGmx.isZero()) {\n    stakedPercent = totalStakedGmx.mul(100).div(totalGmxSupply).toNumber();\n  }\n\n  let liquidityPercent = 0;\n\n  if (totalGmxSupply && !totalGmxSupply.isZero() && totalGmxInLiquidity) {\n    liquidityPercent = totalGmxInLiquidity.mul(100).div(totalGmxSupply).toNumber();\n  }\n\n  let notStakedPercent = 100 - stakedPercent - liquidityPercent;\n\n  let gmxDistributionData = [\n    {\n      name: t`staked`,\n      value: stakedPercent,\n      color: \"#4353fa\",\n    },\n    {\n      name: t`in liquidity`,\n      value: liquidityPercent,\n      color: \"#0598fa\",\n    },\n    {\n      name: t`not staked`,\n      value: notStakedPercent,\n      color: \"#5c0af5\",\n    },\n  ];\n\n  const totalStatsStartDate = chainId === AVALANCHE ? t`06 Jan 2022` : t`01 Sep 2021`;\n\n  let stableGlp = 0;\n  let totalGlp = 0;\n\n  let glpPool = tokenList.map((token) => {\n    const tokenInfo = infoTokens[token.address];\n    if (tokenInfo.usdgAmount && adjustedUsdgSupply && adjustedUsdgSupply.gt(0)) {\n      const currentWeightBps = tokenInfo.usdgAmount.mul(BASIS_POINTS_DIVISOR).div(adjustedUsdgSupply);\n      if (tokenInfo.isStable) {\n        stableGlp += parseFloat(`${formatAmount(currentWeightBps, 2, 2, false)}`);\n      }\n      totalGlp += parseFloat(`${formatAmount(currentWeightBps, 2, 2, false)}`);\n      return {\n        fullname: token.name,\n        name: token.symbol,\n        value: parseFloat(`${formatAmount(currentWeightBps, 2, 2, false)}`),\n      };\n    }\n    return null;\n  });\n\n  let stablePercentage = totalGlp > 0 ? ((stableGlp * 100) / totalGlp).toFixed(2) : \"0.0\";\n\n  glpPool = glpPool.filter(function (element) {\n    return element !== null;\n  });\n\n  glpPool = glpPool.sort(function (a, b) {\n    if (a.value < b.value) return 1;\n    else return -1;\n  });\n\n  gmxDistributionData = gmxDistributionData.sort(function (a, b) {\n    if (a.value < b.value) return 1;\n    else return -1;\n  });\n\n  const [gmxActiveIndex, setGMXActiveIndex] = useState(null);\n\n  const onGMXDistributionChartEnter = (_, index) => {\n    setGMXActiveIndex(index);\n  };\n\n  const onGMXDistributionChartLeave = (_, index) => {\n    setGMXActiveIndex(null);\n  };\n\n  const [glpActiveIndex, setGLPActiveIndex] = useState(null);\n\n  const onGLPPoolChartEnter = (_, index) => {\n    setGLPActiveIndex(index);\n  };\n\n  const onGLPPoolChartLeave = (_, index) => {\n    setGLPActiveIndex(null);\n  };\n\n  const CustomTooltip = ({ active, payload }) => {\n    if (active && payload && payload.length) {\n      return (\n        <div className=\"stats-label\">\n          <div className=\"stats-label-color\" style={{ backgroundColor: payload[0].color }}></div>\n          {payload[0].value}% {payload[0].name}\n        </div>\n      );\n    }\n\n    return null;\n  };\n\n  return (\n    <SEO title={getPageTitle(\"Dashboard\")}>\n      <div className=\"default-container DashboardV2 page-layout\">\n        <div className=\"section-title-block\">\n          <div className=\"section-title-icon\"></div>\n          <div className=\"section-title-content\">\n            <div className=\"Page-title\">\n              <Trans>Stats</Trans> <img width=\"24\" src={currentIcons.network} alt=\"Network Icon\" />\n            </div>\n            <div className=\"Page-description\">\n              <Trans>\n                {chainName} Total Stats start from {totalStatsStartDate}.<br /> For detailed stats:\n              </Trans>{\" \"}\n              {chainId === ARBITRUM && <ExternalLink href=\"https://stats.gmx.io\">https://stats.gmx.io</ExternalLink>}\n              {chainId === AVALANCHE && (\n                <ExternalLink href=\"https://stats.gmx.io/avalanche\">https://stats.gmx.io/avalanche</ExternalLink>\n              )}\n              .\n            </div>\n          </div>\n        </div>\n        <div className=\"DashboardV2-content\">\n          <div className=\"DashboardV2-cards\">\n            <div className=\"App-card\">\n              <div className=\"App-card-title\">\n                <Trans>Overview</Trans>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-content\">\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>AUM</Trans>\n                  </div>\n                  <div>\n                    <TooltipComponent\n                      handle={`$${formatAmount(tvl, USD_DECIMALS, 0, true)}`}\n                      position=\"right-bottom\"\n                      renderContent={() => (\n                        <span>{t`Assets Under Management: GMX staked (All chains) + GLP pool (${chainName}).`}</span>\n                      )}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>GLP Pool</Trans>\n                  </div>\n                  <div>\n                    <TooltipComponent\n                      handle={`$${formatAmount(aum, USD_DECIMALS, 0, true)}`}\n                      position=\"right-bottom\"\n                      renderContent={() => (\n                        <Trans>\n                          <p>Total value of tokens in GLP pool ({chainName}).</p>\n                          <p>\n                            Other websites may show a higher value as they add positions' collaterals to the GLP pool.\n                          </p>\n                        </Trans>\n                      )}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>24h Volume</Trans>\n                  </div>\n                  <div>\n                    <TooltipComponent\n                      position=\"right-bottom\"\n                      className=\"nowrap\"\n                      handle={`$${formatAmount(currentVolumeInfo?.[chainId], USD_DECIMALS, 0, true)}`}\n                      renderContent={() => (\n                        <StatsTooltip\n                          title={t`Volume`}\n                          arbitrumValue={currentVolumeInfo?.[ARBITRUM]}\n                          avaxValue={currentVolumeInfo?.[AVALANCHE]}\n                          total={currentVolumeInfo?.total}\n                        />\n                      )}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Long Positions</Trans>\n                  </div>\n                  <div>\n                    <TooltipComponent\n                      position=\"right-bottom\"\n                      className=\"nowrap\"\n                      handle={`$${formatAmount(\n                        positionStatsInfo?.[chainId]?.totalLongPositionSizes,\n                        USD_DECIMALS,\n                        0,\n                        true\n                      )}`}\n                      renderContent={() => (\n                        <StatsTooltip\n                          title={t`Long Positions`}\n                          arbitrumValue={positionStatsInfo?.[ARBITRUM].totalLongPositionSizes}\n                          avaxValue={positionStatsInfo?.[AVALANCHE].totalLongPositionSizes}\n                          total={positionStatsInfo?.totalLongPositionSizes}\n                        />\n                      )}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Short Positions</Trans>\n                  </div>\n                  <div>\n                    <TooltipComponent\n                      position=\"right-bottom\"\n                      className=\"nowrap\"\n                      handle={`$${formatAmount(\n                        positionStatsInfo?.[chainId]?.totalShortPositionSizes,\n                        USD_DECIMALS,\n                        0,\n                        true\n                      )}`}\n                      renderContent={() => (\n                        <StatsTooltip\n                          title={t`Short Positions`}\n                          arbitrumValue={positionStatsInfo?.[ARBITRUM].totalShortPositionSizes}\n                          avaxValue={positionStatsInfo?.[AVALANCHE].totalShortPositionSizes}\n                          total={positionStatsInfo?.totalShortPositionSizes}\n                        />\n                      )}\n                    />\n                  </div>\n                </div>\n                {feesSummary?.lastUpdatedAt ? (\n                  <div className=\"App-card-row\">\n                    <div className=\"label\">\n                      <Trans>Fees since</Trans> {formatDate(feesSummary.lastUpdatedAt)}\n                    </div>\n                    <div>\n                      <TooltipComponent\n                        position=\"right-bottom\"\n                        className=\"nowrap\"\n                        handle={`$${formatAmount(currentFees?.[chainId], USD_DECIMALS, 2, true)}`}\n                        renderContent={() => (\n                          <StatsTooltip\n                            title={t`Fees`}\n                            arbitrumValue={currentFees?.[ARBITRUM]}\n                            avaxValue={currentFees?.[AVALANCHE]}\n                            total={currentFees?.total}\n                          />\n                        )}\n                      />\n                    </div>\n                  </div>\n                ) : null}\n              </div>\n            </div>\n            <div className=\"App-card\">\n              <div className=\"App-card-title\">\n                <Trans>Total Stats</Trans>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-content\">\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Total Fees</Trans>\n                  </div>\n                  <div>\n                    <TooltipComponent\n                      position=\"right-bottom\"\n                      className=\"nowrap\"\n                      handle={`$${numberWithCommas(totalFees?.[chainId])}`}\n                      renderContent={() => (\n                        <StatsTooltip\n                          title={t`Total Fees`}\n                          arbitrumValue={totalFees?.[ARBITRUM]}\n                          avaxValue={totalFees?.[AVALANCHE]}\n                          total={totalFees?.total}\n                          decimalsForConversion={0}\n                        />\n                      )}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Total Volume</Trans>\n                  </div>\n                  <div>\n                    <TooltipComponent\n                      position=\"right-bottom\"\n                      className=\"nowrap\"\n                      handle={`$${formatAmount(totalVolume?.[chainId], USD_DECIMALS, 0, true)}`}\n                      renderContent={() => (\n                        <StatsTooltip\n                          title={t`Total Volume`}\n                          arbitrumValue={totalVolume?.[ARBITRUM]}\n                          avaxValue={totalVolume?.[AVALANCHE]}\n                          total={totalVolume?.total}\n                        />\n                      )}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Floor Price Fund</Trans>\n                  </div>\n                  <div>${formatAmount(totalFloorPriceFundUsd, 30, 0, true)}</div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"Tab-title-section\">\n            <div className=\"Page-title\">\n              <Trans>Tokens</Trans> <img src={currentIcons.network} width=\"24\" alt=\"Network Icon\" />\n            </div>\n            <div className=\"Page-description\">\n              <Trans>Platform, GLP and GM index tokens.</Trans>\n            </div>\n          </div>\n          <div className=\"DashboardV2-token-cards\">\n            <div className=\"stats-wrapper stats-wrapper--gmx\">\n              <div className=\"App-card\">\n                <div className=\"stats-block\">\n                  <div className=\"App-card-title\">\n                    <div className=\"App-card-title-mark\">\n                      <div className=\"App-card-title-mark-icon\">\n                        <img src={currentIcons.gmx} width=\"40\" alt=\"GMX Token Icon\" />\n                      </div>\n                      <div className=\"App-card-title-mark-info\">\n                        <div className=\"App-card-title-mark-title\">GMX</div>\n                        <div className=\"App-card-title-mark-subtitle\">GMX</div>\n                      </div>\n                      <div>\n                        <AssetDropdown assetSymbol=\"GMX\" />\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Price</Trans>\n                      </div>\n                      <div>\n                        {!gmxPrice && \"...\"}\n                        {gmxPrice && (\n                          <TooltipComponent\n                            position=\"right-bottom\"\n                            className=\"nowrap\"\n                            handle={\"$\" + formatAmount(gmxPrice, USD_DECIMALS, 2, true)}\n                            renderContent={() => (\n                              <>\n                                <StatsTooltipRow\n                                  label={t`Price on Arbitrum`}\n                                  value={formatAmount(gmxPriceFromArbitrum, USD_DECIMALS, 2, true)}\n                                  showDollar={true}\n                                />\n                                <StatsTooltipRow\n                                  label={t`Price on Avalanche`}\n                                  value={formatAmount(gmxPriceFromAvalanche, USD_DECIMALS, 2, true)}\n                                  showDollar={true}\n                                />\n                              </>\n                            )}\n                          />\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Supply</Trans>\n                      </div>\n                      <div>{formatAmount(totalGmxSupply, GMX_DECIMALS, 0, true)} GMX</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Total Staked</Trans>\n                      </div>\n                      <div>\n                        <TooltipComponent\n                          position=\"right-bottom\"\n                          className=\"nowrap\"\n                          handle={`$${formatAmount(stakedGmxSupplyUsd, USD_DECIMALS, 0, true)}`}\n                          renderContent={() => (\n                            <StatsTooltip\n                              title={t`Staked`}\n                              arbitrumValue={arbitrumStakedGmx}\n                              avaxValue={avaxStakedGmx}\n                              total={totalStakedGmx}\n                              decimalsForConversion={GMX_DECIMALS}\n                              showDollar={false}\n                            />\n                          )}\n                        />\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Market Cap</Trans>\n                      </div>\n                      <div>${formatAmount(gmxMarketCap, USD_DECIMALS, 0, true)}</div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"stats-piechart\" onMouseLeave={onGMXDistributionChartLeave}>\n                  {gmxDistributionData.length > 0 && (\n                    <PieChart width={210} height={210}>\n                      <Pie\n                        data={gmxDistributionData}\n                        cx={100}\n                        cy={100}\n                        innerRadius={73}\n                        outerRadius={80}\n                        fill=\"#8884d8\"\n                        dataKey=\"value\"\n                        startAngle={90}\n                        endAngle={-270}\n                        paddingAngle={2}\n                        onMouseEnter={onGMXDistributionChartEnter}\n                        onMouseOut={onGMXDistributionChartLeave}\n                        onMouseLeave={onGMXDistributionChartLeave}\n                      >\n                        {gmxDistributionData.map((entry, index) => (\n                          <Cell\n                            key={`cell-${index}`}\n                            fill={entry.color}\n                            style={{\n                              filter:\n                                gmxActiveIndex === index\n                                  ? `drop-shadow(0px 0px 6px ${hexToRgba(entry.color, 0.7)})`\n                                  : \"none\",\n                              cursor: \"pointer\",\n                            }}\n                            stroke={entry.color}\n                            strokeWidth={gmxActiveIndex === index ? 1 : 1}\n                          />\n                        ))}\n                      </Pie>\n                      <text x={\"50%\"} y={\"50%\"} fill=\"white\" textAnchor=\"middle\" dominantBaseline=\"middle\">\n                        <Trans>Distribution</Trans>\n                      </text>\n                      <Tooltip content={<CustomTooltip />} />\n                    </PieChart>\n                  )}\n                </div>\n              </div>\n              <div className=\"App-card\">\n                <div className=\"stats-block\">\n                  <div className=\"App-card-title\">\n                    <div className=\"App-card-title-mark\">\n                      <div className=\"App-card-title-mark-icon\">\n                        <img src={currentIcons.glp} width=\"40\" alt=\"GLP Icon\" />\n                      </div>\n                      <div className=\"App-card-title-mark-info\">\n                        <div className=\"App-card-title-mark-title\">GLP</div>\n                        <div className=\"App-card-title-mark-subtitle\">GLP</div>\n                      </div>\n                      <div>\n                        <AssetDropdown assetSymbol=\"GLP\" />\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Price</Trans>\n                      </div>\n                      <div>${formatAmount(glpPrice, USD_DECIMALS, 3, true)}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Supply</Trans>\n                      </div>\n                      <div>{formatAmount(glpSupply, GLP_DECIMALS, 0, true)} GLP</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Total Staked</Trans>\n                      </div>\n                      <div>${formatAmount(glpMarketCap, USD_DECIMALS, 0, true)}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Market Cap</Trans>\n                      </div>\n                      <div>${formatAmount(glpMarketCap, USD_DECIMALS, 0, true)}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Stablecoin Percentage</Trans>\n                      </div>\n                      <div>{stablePercentage}%</div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"stats-piechart\" onMouseOut={onGLPPoolChartLeave}>\n                  {glpPool.length > 0 && (\n                    <PieChart width={210} height={210}>\n                      <Pie\n                        data={glpPool}\n                        cx={100}\n                        cy={100}\n                        innerRadius={73}\n                        outerRadius={80}\n                        fill=\"#8884d8\"\n                        dataKey=\"value\"\n                        startAngle={90}\n                        endAngle={-270}\n                        onMouseEnter={onGLPPoolChartEnter}\n                        onMouseOut={onGLPPoolChartLeave}\n                        onMouseLeave={onGLPPoolChartLeave}\n                        paddingAngle={2}\n                      >\n                        {glpPool.map((entry, index) => (\n                          <Cell\n                            key={`cell-${index}`}\n                            fill={GLP_POOL_COLORS[entry.name]}\n                            style={{\n                              filter:\n                                glpActiveIndex === index\n                                  ? `drop-shadow(0px 0px 6px ${hexToRgba(GLP_POOL_COLORS[entry.name], 0.7)})`\n                                  : \"none\",\n                              cursor: \"pointer\",\n                            }}\n                            stroke={GLP_POOL_COLORS[entry.name]}\n                            strokeWidth={glpActiveIndex === index ? 1 : 1}\n                          />\n                        ))}\n                      </Pie>\n                      <text x={\"50%\"} y={\"50%\"} fill=\"white\" textAnchor=\"middle\" dominantBaseline=\"middle\">\n                        GLP Pool\n                      </text>\n                      <Tooltip content={<CustomTooltip />} />\n                    </PieChart>\n                  )}\n                </div>\n              </div>\n            </div>\n            <div className=\"token-table-wrapper App-card\">\n              <div className=\"App-card-title\">\n                <Trans>GLP Index Composition</Trans> <img src={currentIcons.network} width=\"16\" alt=\"Network Icon\" />\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <table className=\"token-table\">\n                <thead>\n                  <tr>\n                    <th>\n                      <Trans>TOKEN</Trans>\n                    </th>\n                    <th>\n                      <Trans>PRICE</Trans>\n                    </th>\n                    <th>\n                      <Trans>POOL</Trans>\n                    </th>\n                    <th>\n                      <Trans>WEIGHT</Trans>\n                    </th>\n                    <th>\n                      <Trans>UTILIZATION</Trans>\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {visibleTokens.map((token) => {\n                    const tokenInfo = infoTokens[token.address];\n                    let utilization = bigNumberify(0);\n                    if (tokenInfo && tokenInfo.reservedAmount && tokenInfo.poolAmount && tokenInfo.poolAmount.gt(0)) {\n                      utilization = tokenInfo.reservedAmount.mul(BASIS_POINTS_DIVISOR).div(tokenInfo.poolAmount);\n                    }\n                    let maxUsdgAmount = DEFAULT_MAX_USDG_AMOUNT;\n                    if (tokenInfo.maxUsdgAmount && tokenInfo.maxUsdgAmount.gt(0)) {\n                      maxUsdgAmount = tokenInfo.maxUsdgAmount;\n                    }\n                    const tokenImage = importImage(\"ic_\" + token.symbol.toLowerCase() + \"_40.svg\");\n\n                    return (\n                      <tr key={token.symbol}>\n                        <td>\n                          <div className=\"token-symbol-wrapper\">\n                            <div className=\"App-card-title-info\">\n                              <div className=\"App-card-title-info-icon\">\n                                <img src={tokenImage} alt={token.symbol} width=\"40\" />\n                              </div>\n                              <div className=\"App-card-title-info-text\">\n                                <div className=\"App-card-info-title\">{token.name}</div>\n                                <div className=\"App-card-info-subtitle\">{token.symbol}</div>\n                              </div>\n                              <div>\n                                <AssetDropdown assetSymbol={token.symbol} assetInfo={token} />\n                              </div>\n                            </div>\n                          </div>\n                        </td>\n                        <td>${formatKeyAmount(tokenInfo, \"minPrice\", USD_DECIMALS, 2, true)}</td>\n                        <td>\n                          <TooltipComponent\n                            handle={`$${formatKeyAmount(tokenInfo, \"managedUsd\", USD_DECIMALS, 0, true)}`}\n                            position=\"right-bottom\"\n                            className=\"nowrap\"\n                            renderContent={() => {\n                              return (\n                                <>\n                                  <StatsTooltipRow\n                                    label={t`Pool Amount`}\n                                    value={`${formatKeyAmount(tokenInfo, \"managedAmount\", token.decimals, 0, true)} ${\n                                      token.symbol\n                                    }`}\n                                    showDollar={false}\n                                  />\n                                  <StatsTooltipRow\n                                    label={t`Target Min Amount`}\n                                    value={`${formatKeyAmount(tokenInfo, \"bufferAmount\", token.decimals, 0, true)} ${\n                                      token.symbol\n                                    }`}\n                                    showDollar={false}\n                                  />\n                                  <StatsTooltipRow\n                                    label={t`Max ${tokenInfo.symbol} Capacity`}\n                                    value={formatAmount(maxUsdgAmount, 18, 0, true)}\n                                    showDollar={true}\n                                  />\n                                </>\n                              );\n                            }}\n                          />\n                        </td>\n                        <td>{getWeightText(tokenInfo)}</td>\n                        <td>{formatAmount(utilization, 2, 2, false)}%</td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n\n            {isMobile && (\n              <>\n                <div className=\"App-card-title-small\">\n                  <Trans>GLP Index Composition</Trans> <img src={currentIcons.network} width=\"16\" alt=\"Network Icon\" />\n                </div>\n\n                <div className=\"token-grid\">\n                  {visibleTokens.map((token) => {\n                    const tokenInfo = infoTokens[token.address];\n                    let utilization = bigNumberify(0);\n                    if (tokenInfo && tokenInfo.reservedAmount && tokenInfo.poolAmount && tokenInfo.poolAmount.gt(0)) {\n                      utilization = tokenInfo.reservedAmount.mul(BASIS_POINTS_DIVISOR).div(tokenInfo.poolAmount);\n                    }\n                    let maxUsdgAmount = DEFAULT_MAX_USDG_AMOUNT;\n                    if (tokenInfo.maxUsdgAmount && tokenInfo.maxUsdgAmount.gt(0)) {\n                      maxUsdgAmount = tokenInfo.maxUsdgAmount;\n                    }\n\n                    const tokenImage = importImage(\"ic_\" + token.symbol.toLowerCase() + \"_24.svg\");\n                    return (\n                      <div className=\"App-card\" key={token.symbol}>\n                        <div className=\"App-card-title\">\n                          <div className=\"mobile-token-card\">\n                            <img src={tokenImage} alt={token.symbol} width=\"20px\" />\n                            <div className=\"token-symbol-text\">{token.symbol}</div>\n                            <div>\n                              <AssetDropdown assetSymbol={token.symbol} assetInfo={token} />\n                            </div>\n                          </div>\n                        </div>\n                        <div className=\"App-card-divider\"></div>\n                        <div className=\"App-card-content\">\n                          <div className=\"App-card-row\">\n                            <div className=\"label\">\n                              <Trans>Price</Trans>\n                            </div>\n                            <div>${formatKeyAmount(tokenInfo, \"minPrice\", USD_DECIMALS, 2, true)}</div>\n                          </div>\n                          <div className=\"App-card-row\">\n                            <div className=\"label\">\n                              <Trans>Pool</Trans>\n                            </div>\n                            <div>\n                              <TooltipComponent\n                                handle={`$${formatKeyAmount(tokenInfo, \"managedUsd\", USD_DECIMALS, 0, true)}`}\n                                position=\"right-bottom\"\n                                renderContent={() => {\n                                  return (\n                                    <>\n                                      <StatsTooltipRow\n                                        label={t`Pool Amount`}\n                                        value={`${formatKeyAmount(\n                                          tokenInfo,\n                                          \"managedAmount\",\n                                          token.decimals,\n                                          0,\n                                          true\n                                        )} ${token.symbol}`}\n                                        showDollar={false}\n                                      />\n                                      <StatsTooltipRow\n                                        label={t`Target Min Amount`}\n                                        value={`${formatKeyAmount(\n                                          tokenInfo,\n                                          \"bufferAmount\",\n                                          token.decimals,\n                                          0,\n                                          true\n                                        )} ${token.symbol}`}\n                                        showDollar={false}\n                                      />\n                                      <StatsTooltipRow\n                                        label={t`Max ${tokenInfo.symbol} Capacity`}\n                                        value={formatAmount(maxUsdgAmount, 18, 0, true)}\n                                      />\n                                    </>\n                                  );\n                                }}\n                              />\n                            </div>\n                          </div>\n                          <div className=\"App-card-row\">\n                            <div className=\"label\">\n                              <Trans>Weight</Trans>\n                            </div>\n                            <div>{getWeightText(tokenInfo)}</div>\n                          </div>\n                          <div className=\"App-card-row\">\n                            <div className=\"label\">\n                              <Trans>Utilization</Trans>\n                            </div>\n                            <div>{formatAmount(utilization, 2, 2, false)}%</div>\n                          </div>\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              </>\n            )}\n            {getIsSyntheticsSupported(chainId) && <MarketsList />}\n          </div>\n        </div>\n        <Footer />\n      </div>\n    </SEO>\n  );\n}\n","import { GMX_STATS_API_URL } from \"config/backend\";\nimport { ARBITRUM, AVALANCHE } from \"config/chains\";\nimport { bigNumberify } from \"lib/numbers\";\nimport useSWR from \"swr\";\n\nexport function useVolumeInfo() {\n  const url = `${GMX_STATS_API_URL}/volume/24h`;\n\n  const { data } = useSWR(\n    url,\n    async (url) => {\n      const res = await fetch(url);\n      const json = await res.json();\n      return {\n        [ARBITRUM]: bigNumberify(json[ARBITRUM]),\n        [AVALANCHE]: bigNumberify(json[AVALANCHE]),\n        total: bigNumberify(json.total),\n      };\n    },\n    {\n      refreshInterval: 60000,\n    }\n  );\n\n  return data;\n}\n","import React from \"react\";\n\nimport DashboardV2 from \"./DashboardV2\";\n\nexport default function Dashboard(props) {\n  return <DashboardV2 />;\n}\n","import { useWeb3React } from \"@web3-react/core\";\nimport { getContract } from \"config/contracts\";\nimport { getWhitelistedTokens } from \"config/tokens\";\nimport { TokenInfo, useInfoTokens } from \"domain/tokens\";\nimport { useChainId } from \"lib/chains\";\nimport { contractFetcher } from \"lib/contracts\";\nimport { BASIS_POINTS_DIVISOR } from \"lib/legacy\";\nimport useSWR from \"swr\";\nimport { getServerUrl } from \"config/backend\";\nimport { formatDistance } from \"date-fns\";\n\nimport Reader from \"abis/Reader.json\";\nimport VaultV2 from \"abis/VaultV2.json\";\nimport { BigNumber, BigNumberish } from \"ethers\";\nimport { bigNumberify, expandDecimals, formatAmount } from \"lib/numbers\";\n\nimport \"./Stats.css\";\nimport Tooltip from \"components/Tooltip/Tooltip\";\n\nfunction shareBar(share?: BigNumberish, total?: BigNumberish) {\n  if (!share || !total || bigNumberify(total)!.eq(0)) {\n    return null;\n  }\n\n  let progress = bigNumberify(share)!.mul(100).div(total).toNumber();\n  progress = Math.min(progress, 100);\n\n  return (\n    <div className=\"Stats-share-bar\">\n      <div className=\"Stats-share-bar-fill\" style={{ width: `${progress}%` }} />\n    </div>\n  );\n}\n\nfunction formatAmountHuman(amount: BigNumberish | undefined, tokenDecimals: number) {\n  const n = Number(formatAmount(amount, tokenDecimals));\n\n  if (n > 1000000) {\n    return `${(n / 1000000).toFixed(1)}M`;\n  }\n  if (n > 1000) {\n    return `${(n / 1000).toFixed(1)}K`;\n  }\n  return n.toFixed(1);\n}\n\nexport default function Stats() {\n  const { active, library } = useWeb3React();\n  const { chainId } = useChainId();\n\n  const readerAddress = getContract(chainId, \"Reader\");\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n\n  const whitelistedTokens = getWhitelistedTokens(chainId);\n  const tokenList = whitelistedTokens.filter((t) => !t.isWrapped);\n  const whitelistedTokenAddresses = whitelistedTokens.map((token) => token.address);\n\n  const vaultAddress = getContract(chainId, \"Vault\");\n\n  const { data: totalTokenWeights } = useSWR<BigNumber>(\n    [`GlpSwap:totalTokenWeights:${active}`, chainId, vaultAddress, \"totalTokenWeights\"],\n    {\n      fetcher: contractFetcher(library, VaultV2),\n    }\n  );\n\n  const { data: fundingRateInfo } = useSWR([active, chainId, readerAddress, \"getFundingRates\"], {\n    fetcher: contractFetcher(library, Reader, [vaultAddress, nativeTokenAddress, whitelistedTokenAddresses]),\n  });\n  const { infoTokens } = useInfoTokens(library, chainId, active, undefined, fundingRateInfo as any);\n\n  let adjustedUsdgSupply = bigNumberify(0);\n\n  for (let i = 0; i < tokenList.length; i++) {\n    const token = tokenList[i];\n    const tokenInfo = infoTokens[token.address];\n    if (tokenInfo && tokenInfo.usdgAmount) {\n      adjustedUsdgSupply = adjustedUsdgSupply!.add(tokenInfo.usdgAmount);\n    }\n  }\n\n  const { data: capsSettingsByToken } = useSWR(getServerUrl(chainId, \"/caps\"), {\n    fetcher: (url) =>\n      fetch(url)\n        .then((res) => res.json())\n        .then((res) =>\n          res.reduce((acc, cur) => {\n            acc[cur.id] = cur.data;\n            return acc;\n          }, {})\n        ),\n  });\n\n  function renderOiCell(tokenInfo: TokenInfo, isLong: boolean) {\n    if (tokenInfo.isStable) {\n      return \"n/a\";\n    }\n\n    let className = \"\";\n    if (\n      isLong &&\n      tokenInfo.maxGlobalLongSize &&\n      tokenInfo.guaranteedUsd?.mul(11).div(10).gt(tokenInfo.maxGlobalLongSize)\n    ) {\n      className = \"warn\";\n    }\n    if (\n      !isLong &&\n      tokenInfo.maxGlobalShortSize &&\n      tokenInfo.guaranteedUsd?.mul(11).div(10).gt(tokenInfo.maxGlobalShortSize)\n    ) {\n      className = \"warn\";\n    }\n\n    const caps = capsSettingsByToken?.[tokenInfo.address];\n    const oi = isLong ? tokenInfo.guaranteedUsd : tokenInfo.globalShortSize;\n    const maxGlobalSize = isLong ? tokenInfo.maxGlobalLongSize : tokenInfo.maxGlobalShortSize;\n    const openInterestIncrement = isLong ? caps?.openInterestIncrementLong : caps?.openInterestIncrementShort;\n    const globalSizeLastIncreasedAt = isLong\n      ? caps?.globalSizeLastIncreasedAtLong\n      : caps?.globalSizeLastIncreasedAtShort;\n    const maxOpenInterest = isLong ? caps?.maxOpenInterestLong : caps?.maxOpenInterestShort;\n\n    return (\n      <>\n        <Tooltip\n          handle={\n            <div className={className}>\n              ${formatAmountHuman(oi, 30)} / ${formatAmountHuman(maxGlobalSize, 30)}\n            </div>\n          }\n          renderContent={() => {\n            return (\n              <div>\n                <>\n                  Increase rate: ${formatAmountHuman(openInterestIncrement, 0)} / 30 minutes\n                  <br />\n                  Last increased at:{\" \"}\n                  {caps?.globalSizeLastIncreasedAtLong\n                    ? formatDistance(new Date(globalSizeLastIncreasedAt * 1000), new Date(), {\n                        addSuffix: true,\n                      })\n                    : null}\n                  <br />\n                  Max possible cap: ${formatAmountHuman(maxOpenInterest, 0)}\n                </>\n              </div>\n            );\n          }}\n        />\n        <div className={className}>{shareBar(oi, maxGlobalSize)}</div>\n      </>\n    );\n  }\n\n  return (\n    <table className=\"Stats\">\n      <thead>\n        <tr>\n          <th>Token</th>\n          <th>Pool</th>\n          <th>\n            <Tooltip\n              handle=\"Max pool\"\n              renderContent={() => \"uses internal USDG value of token. may deviate from pool amount\"}\n            />\n          </th>\n          <th>\n            <Tooltip\n              handle=\"Long OI\"\n              renderContent={() =>\n                \"Current OI is calculated as sum of all positions sizes minus all positions collateral. In reality it's higher\"\n              }\n            />\n          </th>\n          <th>Short OI</th>\n          <th>\n            <Tooltip\n              handle=\"Weight\"\n              renderContent={() => \"Progress bar shows deviation from target. Bigger -> further from target\"}\n            />\n          </th>\n          <th>\n            <Tooltip handle=\"Target\" renderContent={() => \"= token target weight * AUM\"} />\n          </th>\n          <th>Borrow rate</th>\n        </tr>\n      </thead>\n      <tbody>\n        {Object.values(infoTokens)\n          .filter((t: TokenInfo) => !t.isNative)\n          .map((tokenInfo: TokenInfo) => {\n            let maxPoolUsd;\n            if (tokenInfo.maxUsdgAmount && tokenInfo.maxUsdgAmount.gt(0)) {\n              maxPoolUsd = expandDecimals(tokenInfo.maxUsdgAmount, 12);\n            }\n\n            let maxPoolClassName = \"\";\n            if (tokenInfo.managedUsd?.mul(11).div(10).gt(maxPoolUsd)) {\n              maxPoolClassName = \"warn\";\n            }\n\n            let targetWeightBps;\n            let currentWeightBps;\n            let targetUsdg;\n            let weightClassName = \"\";\n            let weightDiffBps;\n            if (tokenInfo.usdgAmount?.gt(0) && adjustedUsdgSupply?.gt(0) && tokenInfo.weight?.gt(0)) {\n              currentWeightBps = tokenInfo.usdgAmount.mul(BASIS_POINTS_DIVISOR).div(adjustedUsdgSupply);\n              // use add(1).div(10).mul(10) to round numbers up\n              targetWeightBps = tokenInfo.weight\n                .mul(BASIS_POINTS_DIVISOR)\n                .div(totalTokenWeights as BigNumberish)\n                .add(1)\n                .div(10)\n                .mul(10);\n\n              weightDiffBps = currentWeightBps.sub(targetWeightBps).abs();\n              if (weightDiffBps.gt(targetWeightBps.mul(35).div(100))) {\n                weightClassName = \"warn\";\n              } else if (weightDiffBps.gt(targetWeightBps.mul(25).div(100))) {\n                weightClassName = \"warn\";\n              }\n\n              targetUsdg = adjustedUsdgSupply.mul(targetWeightBps).div(BASIS_POINTS_DIVISOR);\n            }\n\n            return (\n              <tr>\n                <td>{tokenInfo.symbol}</td>\n                <td>\n                  <>${formatAmountHuman(tokenInfo.managedUsd, 30)}</>\n                </td>\n                <td className={maxPoolClassName}>\n                  ${formatAmountHuman(tokenInfo.usdgAmount, 18)} / ${formatAmountHuman(tokenInfo.maxUsdgAmount, 18)}\n                  {shareBar(tokenInfo.usdgAmount, tokenInfo.maxUsdgAmount)}\n                </td>\n                <td>{renderOiCell(tokenInfo, true)}</td>\n                <td>{renderOiCell(tokenInfo, false)}</td>\n                <td className={weightClassName}>\n                  {formatAmountHuman(currentWeightBps, 2)} / {formatAmountHuman(targetWeightBps, 2)}%\n                  {shareBar(weightDiffBps, targetWeightBps)}\n                </td>\n                <td>\n                  ${formatAmountHuman(tokenInfo.usdgAmount, 18)} / ${formatAmountHuman(targetUsdg, 18)}\n                </td>\n                <td>{formatAmount(tokenInfo.fundingRate?.mul(24 * 365), 4, 2) + \"%\"}</td>\n              </tr>\n            );\n          })}\n      </tbody>\n    </table>\n  );\n}\n","import React from \"react\";\nimport { Trans } from \"@lingui/macro\";\nimport SEO from \"components/Common/SEO\";\n\nimport Footer from \"components/Footer/Footer\";\nimport { getPageTitle } from \"lib/legacy\";\n\nimport \"./Ecosystem.css\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport { ARBITRUM, AVALANCHE } from \"config/chains\";\nimport { t } from \"@lingui/macro\";\nimport { getIcon } from \"config/icons\";\n\nconst NETWORK_ICONS = {\n  [ARBITRUM]: getIcon(ARBITRUM, \"network\"),\n  [AVALANCHE]: getIcon(AVALANCHE, \"network\"),\n};\n\nconst NETWORK_ICON_ALTS = {\n  [ARBITRUM]: \"Arbitrum Icon\",\n  [AVALANCHE]: \"Avalanche Icon\",\n};\n\nexport default function Ecosystem() {\n  const gmxPages = [\n    {\n      title: \"GMX Governance\",\n      link: \"https://gov.gmx.io/\",\n      linkLabel: \"gov.gmx.io\",\n      about: t`GMX Governance Page`,\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"GMX Stats\",\n      link: \"https://stats.gmx.io/\",\n      linkLabel: \"stats.gmx.io\",\n      about: t`GMX Stats Page`,\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"GMX Proposals\",\n      link: \"https://snapshot.org/#/gmx.eth\",\n      linkLabel: \"snapshot.org\",\n      about: t`GMX Proposals Voting page`,\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"GMX Announcements\",\n      link: \"https://t.me/GMX_Announcements\",\n      linkLabel: \"t.me\",\n      about: t`GMX Announcements and Updates`,\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n  ];\n\n  const communityProjects = [\n    {\n      title: \"GMX Blueberry Club\",\n      link: \"https://www.blueberry.club/\",\n      linkLabel: \"blueberry.club\",\n      about: t`GMX Blueberry NFTs`,\n      creatorLabel: \"@xm92boi\",\n      creatorLink: \"https://t.me/xm92boi\",\n      chainIds: [ARBITRUM],\n    },\n    {\n      title: \"GMX Leaderboard\",\n      link: \"https://www.gmx.house/\",\n      linkLabel: \"gmx.house\",\n      about: t`Leaderboard for GMX traders`,\n      creatorLabel: \"@Itburnz\",\n      creatorLink: \"https://t.me/Itburnz\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"GMX Positions Bot\",\n      link: \"https://t.me/GMXPositions\",\n      linkLabel: \"t.me\",\n      about: t`Telegram bot for GMX position updates`,\n      creatorLabel: \"@zhongfu\",\n      creatorLink: \"https://t.me/zhongfu\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"Blueberry Pulse\",\n      link: \"https://blueberrypulse.substack.com/\",\n      linkLabel: \"substack.com\",\n      about: t`GMX Weekly Updates`,\n      creatorLabel: \"@puroscohiba\",\n      creatorLink: \"https://t.me/puroscohiba\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"DegenClip\",\n      link: \"https://degenclip.com/gmx\",\n      linkLabel: \"degenclip.com\",\n      about: t`Community curated tweet collection`,\n      creatorLabel: \"@ox21l\",\n      creatorLink: \"https://t.me/ox21l\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"GMX Yield Simulator\",\n      link: \"https://gmx.defisims.com/\",\n      linkLabel: \"defisims.com\",\n      about: t`Yield simulator for GMX`,\n      creatorLabel: \"@kyzoeth\",\n      creatorLink: \"https://twitter.com/kyzoeth\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"GMX Returns Calculator\",\n      link: \"https://docs.google.com/spreadsheets/u/4/d/1mQZlztz_NpTg5qQiYIzc_Ls1OTLfMOUtmEQN-WW8jj4/copy\",\n      linkLabel: \"docs.google.com\",\n      about: t`Returns calculator for GMX and GLP`,\n      creatorLabel: \"@AStoicTrader1\",\n      creatorLink: \"https://twitter.com/AStoicTrader1\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"GMX Trading Stats\",\n      link: \"https://t.me/GMXTradingStats\",\n      linkLabel: \"t.me\",\n      about: t`Telegram bot for Open Interest on GMX`,\n      creatorLabel: \"@SniperMonke01\",\n      creatorLink: \"https://twitter.com/SniperMonke01\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"GMX Staking Bot\",\n      link: \"https://t.me/GMX_Staking_bot\",\n      linkLabel: \"t.me\",\n      about: t`GMX staking rewards updates and insights`,\n      creatorLabel: \"@GMX_Staking_bot\",\n      creatorLink: \"https://twitter.com/GMX_Staking_bot\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"GMX Staking Calculator\",\n      link: \"https://gmxstaking.com\",\n      linkLabel: \"gmxstaking.com\",\n      about: t`GMX staking calculator`,\n      creatorLabel: \"@n1njawtf\",\n      creatorLink: \"https://t.me/n1njawtf\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"GMX Hedging Simulator\",\n      link: \"https://www.gmxhedge.com/\",\n      linkLabel: \"gmxhedge.com\",\n      about: t`Simulate your hedge strategy`,\n      creatorLabel: \"@kyzoeth\",\n      creatorLink: \"https://twitter.com/kyzoeth\",\n      chainIds: [ARBITRUM],\n    },\n    {\n      title: \"GMX Swaps\",\n      link: \"https://t.me/GMXSwaps\",\n      linkLabel: \"t.me\",\n      about: t`Telegram bot for GMX Swaps monitoring`,\n      creatorLabel: \"@snipermonke01\",\n      creatorLink: \"https://twitter.com/snipermonke01\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"GMX Position Calculator\",\n      link: \"https://docs.google.com/spreadsheets/d/1OKCeRGU7l-xGx33-siBw_l8x7vP97y4KKKjA2x5LqhQ/edit#gid=0\",\n      linkLabel: \"docs.google.com\",\n      about: t`Spreadsheet for position calculations`,\n      creatorLabel: \"@barryfried1\",\n      creatorLink: \"https://twitter.com/barryfried1\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n  ];\n\n  const dashboardProjects = [\n    {\n      title: \"GMX Referrals Dashboard\",\n      link: \"https://www.gmxreferrals.com/\",\n      linkLabel: \"gmxreferrals.com\",\n      about: t`Dashboard for GMX referral stats`,\n      creatorLabel: \"@kyzoeth\",\n      creatorLink: \"https://twitter.com/kyzoeth\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"GMX Terminal\",\n      link: \"https://gmxterminal.com\",\n      linkLabel: \"gmxterminal.com\",\n      about: t`GMX explorer for stats and traders`,\n      creatorLabel: \"@vipineth\",\n      creatorLink: \"https://t.me/vipineth\",\n      chainIds: [ARBITRUM],\n    },\n    {\n      title: \"GMX Analytics\",\n      link: \"https://gmxstats.com/\",\n      linkLabel: \"gmxstats.com\",\n      about: t`Financial reports and protocol analytics`,\n      creatorLabel: \"@CryptoMessiah\",\n      creatorLink: \"https://t.me/LarpCapital\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"TokenTerminal\",\n      link: \"https://tokenterminal.com/terminal/projects/gmx\",\n      linkLabel: \"tokenterminal.com\",\n      about: t`GMX fundamentals`,\n      creatorLabel: \"@tokenterminal\",\n      creatorLink: \"https://twitter.com/tokenterminal\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"CryptoFees\",\n      link: \"https://cryptofees.info\",\n      linkLabel: \"cryptofees.info\",\n      about: t`Fees generated by GMX`,\n      creatorLabel: \"@CryptoFeesInfo\",\n      creatorLink: \"https://twitter.com/CryptoFeesInfo\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"Shogun Dashboard (Dune Arbitrum)\",\n      link: \"https://dune.com/shogun/gmx-analytics-arbitrum\",\n      linkLabel: \"dune.com\",\n      about: t`Protocol analytics`,\n      creatorLabel: \"@JamesCliffyz\",\n      creatorLink: \"https://twitter.com/JamesCliffyz\",\n      chainIds: [ARBITRUM],\n    },\n    {\n      title: \"Shogun Dashboard (Dune Avalanche)\",\n      link: \"https://dune.com/shogun/gmx-analytics-avalanche\",\n      linkLabel: \"dune.com\",\n      about: t`Protocol analytics`,\n      creatorLabel: \"@JamesCliffyz\",\n      creatorLink: \"https://twitter.com/JamesCliffyz\",\n      chainIds: [AVALANCHE],\n    },\n    {\n      title: \"GMX Perpetuals Data\",\n      link: \"https://app.laevitas.ch/altsderivs/GMX/perpetualswaps\",\n      linkLabel: \"laevitas.ch\",\n      about: t`GMX Perpetuals Data`,\n      creatorLabel: \"@laevitas1\",\n      creatorLink: \"https://twitter.com/laevitas1\",\n      chainIds: [ARBITRUM],\n    },\n    {\n      title: \"GMX Blueberry Leaderboard\",\n      link: \"https://www.blueberryboard.com\",\n      linkLabel: \"blueberryboard.com\",\n      about: t`GBC NFTs APR tracker and rewards`,\n      creatorLabel: \"@kyzoeth\",\n      creatorLink: \"https://twitter.com/kyzoeth\",\n      chainIds: [ARBITRUM],\n    },\n    {\n      title: \"GMX Open Trades Ranking and Stats\",\n      link: \"https://dune.com/HanSolar/gmx-open-trade-ranking-and-stats\",\n      linkLabel: \"dune.com\",\n      about: t`Open trades ranking and stats`,\n      creatorLabel: \"@hansolar21\",\n      creatorLink: \"https://twitter.com/hansolar21\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"GMX Everything Dashboard\",\n      link: \"https://dune.com/gmxtrader/gmx-dashboard-insights\",\n      linkLabel: \"dune.com\",\n      about: t`Overall protocol analytics`,\n      creatorLabel: \"@gmxtrader\",\n      creatorLink: \"https://twitter.com/gmxtrader\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n  ];\n\n  const integrations = [\n    {\n      title: \"DeBank\",\n      link: \"debank.com\",\n      linkLabe: \"debank.com\",\n      about: t`DeFi Portfolio Tracker`,\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/GMX_IO/status/1439711532884152324\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"Defi Llama\",\n      link: \"https://defillama.com\",\n      linkLabel: \"defillama.com\",\n      about: t`Decentralized Finance Dashboard`,\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/GMX_IO/status/1438124768033660938\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"Dopex\",\n      link: \"https://dopex.io\",\n      linkLabel: \"dopex.io\",\n      about: t`Decentralized Options Protocol`,\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/GMX_IO/status/1482445801523716099\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"Rook\",\n      link: \"https://www.rook.fi/\",\n      linkLabel: \"rook.fi\",\n      about: t`MEV Optimizer`,\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/Rook/status/1509613786600116251\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"Jones DAO\",\n      link: \"https://jonesdao.io\",\n      linkLabel: \"jonesdao.io\",\n      about: t`Decentralized Options Strategies`,\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/GMX_IO/status/1482788805635678212\",\n      chainIds: [ARBITRUM],\n    },\n    {\n      title: \"Yield Yak Optimizer\",\n      link: \"https://yieldyak.com/\",\n      linkLabel: \"yieldyak.com\",\n      about: t`Yield Optimizer on Avalanche`,\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/GMX_IO/status/1484601407378378754\",\n      chainIds: [AVALANCHE],\n    },\n    {\n      title: \"Vovo Finance\",\n      link: \"https://vovo.finance/\",\n      linkLabel: \"vovo.finance\",\n      about: t`Structured Products`,\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/VovoFinance/status/1531517177790345217\",\n      chainIds: [ARBITRUM],\n    },\n    {\n      title: \"Stabilize Protocol\",\n      link: \"https://www.stabilize.finance/\",\n      linkLabel: \"stabilize.finance\",\n      about: t`Yield Vaults`,\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/StabilizePro/status/1532348674986082306\",\n      chainIds: [ARBITRUM],\n    },\n    {\n      title: \"DODO\",\n      link: \"https://dodoex.io/\",\n      linkLabel: \"dodoex.io\",\n      about: t`Decentralized Trading Protocol`,\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/GMX_IO/status/1438899138549145605\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"Open Ocean\",\n      link: \"https://openocean.finance/\",\n      linkLabel: \"openocean.finance\",\n      about: t`DEX Aggregator`,\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/GMX_IO/status/1495780826016989191\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"Paraswap\",\n      link: \"https://www.paraswap.io/\",\n      linkLabel: \"paraswap.io\",\n      about: t`DEX Aggregator`,\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/paraswap/status/1546869879336222728\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"1inch\",\n      link: \"https://1inch.io/\",\n      linkLabel: \"1inch.io\",\n      about: t`DEX Aggregator`,\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/GMX_IO/status/1522247451410845696\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n    {\n      title: \"Firebird Finance\",\n      link: \"https://app.firebird.finance/swap\",\n      linkLabel: \"firebird.finance\",\n      about: t`DEX Aggregator`,\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/financefirebird/status/1561767094064238595\",\n      chainIds: [AVALANCHE],\n    },\n    {\n      title: \"Yield Yak Swap\",\n      link: \"https://yieldyak.com/swap\",\n      linkLabel: \"yieldyak.com\",\n      about: t`DEX Aggregator`,\n      announcementLabel: \"twitter.com\",\n      announcementLink: \"https://twitter.com/yieldyak_/status/1484458884827947008\",\n      chainIds: [AVALANCHE],\n    },\n    {\n      title: \"Plutus\",\n      link: \"https://plutusdao.io/vaults\",\n      linkLabel: \"plutusdao.io\",\n      about: t`GLP autocompounding vaults`,\n      announcementLabel: \"medium.com\",\n      announcementLink: \"https://medium.com/@plutusdao.io/product-release-plutus-vaults-d0b0252cdf03\",\n      chainIds: [ARBITRUM],\n    },\n    {\n      title: \"Beefy.com\",\n      link: \"https://app.beefy.com/\",\n      linkLabel: \"beefy.com\",\n      about: t`GLP and GMX autocompounding vaults`,\n      announcementLabel: \"beefy.com\",\n      announcementLink: \"https://beefy.com/articles/earn-glp-with-beefy-s-new-glp-strategy-and-vaults/\",\n      chainIds: [ARBITRUM, AVALANCHE],\n    },\n  ];\n\n  const telegramGroups = [\n    {\n      title: \"GMX\",\n      link: \"https://t.me/GMX_IO\",\n      linkLabel: \"t.me\",\n      about: t`Telegram Group`,\n    },\n    {\n      title: \"GMX (Chinese)\",\n      link: \"https://t.me/gmxch\",\n      linkLabel: \"t.me\",\n      about: t`Telegram Group (Chinese)`,\n    },\n    {\n      title: \"GMX (Portuguese)\",\n      link: \"https://t.me/GMX_Portuguese\",\n      linkLabel: \"t.me\",\n      about: t`Telegram Group (Portuguese)`,\n    },\n    {\n      title: \"GMX Trading Chat\",\n      link: \"https://t.me/gambittradingchat\",\n      linkLabel: \"t.me\",\n      about: t`GMX community discussion`,\n    },\n  ];\n\n  return (\n    <SEO title={getPageTitle(\"Ecosystem Projects\")}>\n      <div className=\"default-container page-layout\">\n        <div>\n          <div className=\"section-title-block\">\n            <div className=\"section-title-icon\" />\n            <div className=\"section-title-content\">\n              <div className=\"Page-title\">\n                <Trans>GMX Pages</Trans>\n              </div>\n              <div className=\"Page-description\">\n                <Trans>GMX ecosystem pages.</Trans>\n              </div>\n            </div>\n          </div>\n          <div className=\"DashboardV2-projects\">\n            {gmxPages.map((item) => {\n              const linkLabel = item.linkLabel ? item.linkLabel : item.link;\n              return (\n                <div className=\"App-card\" key={item.title}>\n                  <div className=\"App-card-title\">\n                    {item.title}\n                    <div className=\"App-card-title-icon\">\n                      {item.chainIds.map((network) => (\n                        <img width=\"16\" key={network} src={NETWORK_ICONS[network]} alt={NETWORK_ICON_ALTS[network]} />\n                      ))}\n                    </div>\n                  </div>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Link</Trans>\n                      </div>\n                      <div>\n                        <ExternalLink href={item.link}>{linkLabel}</ExternalLink>\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>About</Trans>\n                      </div>\n                      <div>{item.about}</div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n          <div className=\"Tab-title-section\">\n            <div className=\"Page-title\">\n              <Trans>Community Projects</Trans>\n            </div>\n            <div className=\"Page-description\">\n              <Trans>\n                Projects developed by the GMX community. <br />\n                Please exercise caution when interacting with any app, apps are fully maintained by community\n                developers.\n              </Trans>\n            </div>\n          </div>\n          <div className=\"DashboardV2-projects\">\n            {communityProjects.map((item) => {\n              const linkLabel = item.linkLabel ? item.linkLabel : item.link;\n              return (\n                <div className=\"App-card\" key={item.title}>\n                  <div className=\"App-card-title\">\n                    {item.title}\n                    <div className=\"App-card-title-icon\">\n                      {item.chainIds.map((network) => (\n                        <img width=\"16\" key={network} src={NETWORK_ICONS[network]} alt={NETWORK_ICON_ALTS[network]} />\n                      ))}\n                    </div>\n                  </div>\n                  <div className=\"App-card-divider\" />\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Link</Trans>\n                      </div>\n                      <div>\n                        <ExternalLink href={item.link}>{linkLabel}</ExternalLink>\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>About</Trans>\n                      </div>\n                      <div>{item.about}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Creator</Trans>\n                      </div>\n                      <div>\n                        <ExternalLink href={item.creatorLink}>{item.creatorLabel}</ExternalLink>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n          <div className=\"Tab-title-section\">\n            <div className=\"Page-title\">\n              <Trans>Dashboards</Trans>\n            </div>\n            <div className=\"Page-description\">\n              <Trans>GMX dashboards and analytics.</Trans>\n            </div>\n          </div>\n          <div className=\"DashboardV2-projects\">\n            {dashboardProjects.map((item) => {\n              const linkLabel = item.linkLabel ? item.linkLabel : item.link;\n              return (\n                <div className=\"App-card\" key={item.title}>\n                  <div className=\"App-card-title\">\n                    {item.title}\n                    <div className=\"App-card-title-icon\">\n                      {item.chainIds.map((network) => (\n                        <img width=\"16\" key={network} src={NETWORK_ICONS[network]} alt={NETWORK_ICON_ALTS[network]} />\n                      ))}\n                    </div>\n                  </div>\n\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Link</Trans>\n                      </div>\n                      <div>\n                        <ExternalLink href={item.link}>{linkLabel}</ExternalLink>\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>About</Trans>\n                      </div>\n                      <div>{item.about}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Creator</Trans>\n                      </div>\n                      <div>\n                        <ExternalLink href={item.creatorLink}>{item.creatorLabel}</ExternalLink>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n          <div className=\"Tab-title-section\">\n            <div className=\"Page-title\">\n              <Trans>Partnerships and Integrations</Trans>\n            </div>\n            <div className=\"Page-description\">\n              <Trans>Projects integrated with GMX.</Trans>\n            </div>\n          </div>\n          <div className=\"DashboardV2-projects\">\n            {integrations.map((item) => {\n              const linkLabel = item.linkLabel ? item.linkLabel : item.link;\n              return (\n                <div key={item.title} className=\"App-card\">\n                  <div className=\"App-card-title\">\n                    {item.title}\n                    <div className=\"App-card-title-icon\">\n                      {item.chainIds.map((network) => (\n                        <img width=\"16\" key={network} src={NETWORK_ICONS[network]} alt={NETWORK_ICON_ALTS[network]} />\n                      ))}\n                    </div>\n                  </div>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Link</Trans>\n                      </div>\n                      <div>\n                        <ExternalLink href={item.link}>{linkLabel}</ExternalLink>\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>About</Trans>\n                      </div>\n                      <div>{item.about}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Announcement</Trans>\n                      </div>\n                      <div>\n                        <ExternalLink href={item.announcementLink}>{item.announcementLabel}</ExternalLink>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n          <div className=\"Tab-title-section\">\n            <div className=\"Page-title\">\n              <Trans>Telegram Groups</Trans>\n            </div>\n            <div className=\"Page-description\">\n              <Trans>Community-led Telegram groups.</Trans>\n            </div>\n          </div>\n          <div className=\"DashboardV2-projects\">\n            {telegramGroups.map((item) => {\n              const linkLabel = item.linkLabel ? item.linkLabel : item.link;\n              return (\n                <div className=\"App-card\" key={item.title}>\n                  <div className=\"App-card-title\">{item.title}</div>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Link</Trans>\n                      </div>\n                      <div>\n                        <ExternalLink href={item.link}>{linkLabel}</ExternalLink>\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>About</Trans>\n                      </div>\n                      <div>{item.about}</div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n        <Footer />\n      </div>\n    </SEO>\n  );\n}\n","import React from \"react\";\nimport Footer from \"components/Footer/Footer\";\nimport \"./Home.css\";\n\nimport simpleSwapIcon from \"img/ic_simpleswaps.svg\";\nimport costIcon from \"img/ic_cost.svg\";\nimport liquidityIcon from \"img/ic_liquidity.svg\";\nimport totaluserIcon from \"img/ic_totaluser.svg\";\n\nimport statsIcon from \"img/ic_stats.svg\";\nimport tradingIcon from \"img/ic_trading.svg\";\n\nimport useSWR from \"swr\";\n\nimport { USD_DECIMALS, getTotalVolumeSum } from \"lib/legacy\";\n\nimport { useUserStat } from \"domain/legacy\";\n\nimport arbitrumIcon from \"img/ic_arbitrum_96.svg\";\nimport avaxIcon from \"img/ic_avalanche_96.svg\";\n\nimport TokenCard from \"components/TokenCard/TokenCard\";\nimport { Trans } from \"@lingui/macro\";\nimport { HeaderLink } from \"components/Header/HeaderLink\";\nimport { ARBITRUM, AVALANCHE } from \"config/chains\";\nimport { getServerUrl } from \"config/backend\";\nimport { bigNumberify, formatAmount, numberWithCommas } from \"lib/numbers\";\n\nexport default function Home({ showRedirectModal, redirectPopupTimestamp }) {\n  // const [openedFAQIndex, setOpenedFAQIndex] = useState(null)\n  // const faqContent = [{\n  //   id: 1,\n  //   question: \"What is GMX?\",\n  //   answer: \"GMX is a decentralized spot and perpetual exchange that supports low swap fees and zero price impact trades.<br><br>Trading is supported by a unique multi-asset pool that earns liquidity providers fees from market making, swap fees, leverage trading (spreads, funding fees & liquidations), and asset rebalancing.<br><br>Dynamic pricing is supported by Chainlink Oracles along with TWAP pricing from leading volume DEXs.\"\n  // }, {\n  //   id: 2,\n  //   question: \"What is the GMX Governance Token?\",\n  //   answer: \"The GMX token is the governance token of the GMX ecosystem, it provides the token owner voting rights on the direction of the GMX platform.<br><br>Additionally, when GMX is staked you will earn 30% of the platform-generated fees, you will also earn Escrowed GMX tokens and Multiplier Points.\"\n  // }, {\n  //   id: 3,\n  //   question: \"What is the GLP Token?\",\n  //   answer: \"The GLP token represents the liquidity users provide to the GMX platform for Swaps and Margin Trading.<br><br>To provide liquidity to GLP you <a href='https://gmx.io/buy_glp' target='_blank'>trade</a> your crypto asset BTC, ETH, LINK, UNI, USDC, USDT, MIM, or FRAX to the liquidity pool, in exchange, you gain exposure to a diversified index of tokens while earning 50% of the platform trading fees and esGMX.\"\n  // }, {\n  //   id: 4,\n  //   question: \"What can I trade on GMX? \",\n  //   answer: \"On GMX you can swap or margin trade any of the following assets: ETH, BTC, LINK, UNI, USDC, USDT, MIM, FRAX, with others to be added.\"\n  // }]\n\n  // const toggleFAQContent = function(index) {\n  //   if (openedFAQIndex === index) {\n  //     setOpenedFAQIndex(null)\n  //   } else {\n  //     setOpenedFAQIndex(index)\n  //   }\n  // }\n\n  // ARBITRUM\n\n  const arbitrumPositionStatsUrl = getServerUrl(ARBITRUM, \"/position_stats\");\n  const { data: arbitrumPositionStats } = useSWR([arbitrumPositionStatsUrl], {\n    fetcher: (...args) => fetch(...args).then((res) => res.json()),\n  });\n\n  const arbitrumTotalVolumeUrl = getServerUrl(ARBITRUM, \"/total_volume\");\n  const { data: arbitrumTotalVolume } = useSWR([arbitrumTotalVolumeUrl], {\n    fetcher: (...args) => fetch(...args).then((res) => res.json()),\n  });\n\n  // AVALANCHE\n\n  const avalanchePositionStatsUrl = getServerUrl(AVALANCHE, \"/position_stats\");\n  const { data: avalanchePositionStats } = useSWR([avalanchePositionStatsUrl], {\n    fetcher: (...args) => fetch(...args).then((res) => res.json()),\n  });\n\n  const avalancheTotalVolumeUrl = getServerUrl(AVALANCHE, \"/total_volume\");\n  const { data: avalancheTotalVolume } = useSWR([avalancheTotalVolumeUrl], {\n    fetcher: (...args) => fetch(...args).then((res) => res.json()),\n  });\n\n  // Total Volume\n\n  const arbitrumTotalVolumeSum = getTotalVolumeSum(arbitrumTotalVolume);\n  const avalancheTotalVolumeSum = getTotalVolumeSum(avalancheTotalVolume);\n\n  let totalVolumeSum = bigNumberify(0);\n  if (arbitrumTotalVolumeSum && avalancheTotalVolumeSum) {\n    totalVolumeSum = totalVolumeSum.add(arbitrumTotalVolumeSum);\n    totalVolumeSum = totalVolumeSum.add(avalancheTotalVolumeSum);\n  }\n\n  // Open Interest\n\n  let openInterest = bigNumberify(0);\n  if (\n    arbitrumPositionStats &&\n    arbitrumPositionStats.totalLongPositionSizes &&\n    arbitrumPositionStats.totalShortPositionSizes\n  ) {\n    openInterest = openInterest.add(arbitrumPositionStats.totalLongPositionSizes);\n    openInterest = openInterest.add(arbitrumPositionStats.totalShortPositionSizes);\n  }\n\n  if (\n    avalanchePositionStats &&\n    avalanchePositionStats.totalLongPositionSizes &&\n    avalanchePositionStats.totalShortPositionSizes\n  ) {\n    openInterest = openInterest.add(avalanchePositionStats.totalLongPositionSizes);\n    openInterest = openInterest.add(avalanchePositionStats.totalShortPositionSizes);\n  }\n\n  // user stat\n  const arbitrumUserStats = useUserStat(ARBITRUM);\n  const avalancheUserStats = useUserStat(AVALANCHE);\n  let totalUsers = 0;\n\n  if (arbitrumUserStats && arbitrumUserStats.uniqueCount) {\n    totalUsers += arbitrumUserStats.uniqueCount;\n  }\n\n  if (avalancheUserStats && avalancheUserStats.uniqueCount) {\n    totalUsers += avalancheUserStats.uniqueCount;\n  }\n\n  const LaunchExchangeButton = () => {\n    return (\n      <HeaderLink\n        className=\"default-btn\"\n        to=\"/trade\"\n        redirectPopupTimestamp={redirectPopupTimestamp}\n        showRedirectModal={showRedirectModal}\n      >\n        <Trans>Launch App</Trans>\n      </HeaderLink>\n    );\n  };\n\n  return (\n    <div className=\"Home\">\n      <div className=\"Home-top\">\n        {/* <div className=\"Home-top-image\"></div> */}\n        <div className=\"Home-title-section-container default-container\">\n          <div className=\"Home-title-section\">\n            <div className=\"Home-title\">\n              <Trans>\n                Decentralized\n                <br />\n                Perpetual Exchange\n              </Trans>\n            </div>\n            <div className=\"Home-description\">\n              <Trans>\n                Trade BTC, ETH, AVAX and other top cryptocurrencies with up to 50x leverage directly from your wallet\n              </Trans>\n            </div>\n            <LaunchExchangeButton />\n          </div>\n        </div>\n        <div className=\"Home-latest-info-container default-container\">\n          <div className=\"Home-latest-info-block\">\n            <img src={tradingIcon} alt=\"Total Trading Volume Icon\" className=\"Home-latest-info__icon\" />\n            <div className=\"Home-latest-info-content\">\n              <div className=\"Home-latest-info__title\">\n                <Trans>Total Trading Volume</Trans>\n              </div>\n              <div className=\"Home-latest-info__value\">${formatAmount(totalVolumeSum, USD_DECIMALS, 0, true)}</div>\n            </div>\n          </div>\n          <div className=\"Home-latest-info-block\">\n            <img src={statsIcon} alt=\"Open Interest Icon\" className=\"Home-latest-info__icon\" />\n            <div className=\"Home-latest-info-content\">\n              <div className=\"Home-latest-info__title\">\n                <Trans>Open Interest</Trans>\n              </div>\n              <div className=\"Home-latest-info__value\">${formatAmount(openInterest, USD_DECIMALS, 0, true)}</div>\n            </div>\n          </div>\n          <div className=\"Home-latest-info-block\">\n            <img src={totaluserIcon} alt=\"Total Users Icon\" className=\"Home-latest-info__icon\" />\n            <div className=\"Home-latest-info-content\">\n              <div className=\"Home-latest-info__title\">\n                <Trans>Total Users</Trans>\n              </div>\n              <div className=\"Home-latest-info__value\">{numberWithCommas(totalUsers.toFixed(0))}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"Home-benefits-section\">\n        <div className=\"Home-benefits default-container\">\n          <div className=\"Home-benefit\">\n            <div className=\"Home-benefit-icon\">\n              <img src={liquidityIcon} alt=\"Reduce Liquidation Risks Icon\" className=\"Home-benefit-icon-symbol\" />\n              <div className=\"Home-benefit-title\">\n                <Trans>Reduce Liquidation Risks</Trans>\n              </div>\n            </div>\n            <div className=\"Home-benefit-description\">\n              <Trans>\n                An aggregate of high-quality price feeds determine when liquidations occur. This keeps positions safe\n                from temporary wicks.\n              </Trans>\n            </div>\n          </div>\n          <div className=\"Home-benefit\">\n            <div className=\"Home-benefit-icon\">\n              <img src={costIcon} alt=\"Save on Costs Icon\" className=\"Home-benefit-icon-symbol\" />\n              <div className=\"Home-benefit-title\">\n                <Trans>Save on Costs</Trans>\n              </div>\n            </div>\n            <div className=\"Home-benefit-description\">\n              <Trans>\n                Enter and exit positions with minimal spread and zero price impact. Get the optimal price without\n                incurring additional costs.\n              </Trans>\n            </div>\n          </div>\n          <div className=\"Home-benefit\">\n            <div className=\"Home-benefit-icon\">\n              <img src={simpleSwapIcon} alt=\"Simple Swaps Icon\" className=\"Home-benefit-icon-symbol\" />\n              <div className=\"Home-benefit-title\">\n                <Trans>Simple Swaps</Trans>\n              </div>\n            </div>\n            <div className=\"Home-benefit-description\">\n              <Trans>\n                Open positions through a simple swap interface. Conveniently swap from any supported asset into the\n                position of your choice.\n              </Trans>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"Home-cta-section\">\n        <div className=\"Home-cta-container default-container\">\n          <div className=\"Home-cta-info\">\n            <div className=\"Home-cta-info__title\">\n              <Trans>Available on your preferred network</Trans>\n            </div>\n            <div className=\"Home-cta-info__description\">\n              <Trans>GMX is currently live on Arbitrum and Avalanche.</Trans>\n            </div>\n          </div>\n          <div className=\"Home-cta-options\">\n            <div className=\"Home-cta-option Home-cta-option-arbitrum\">\n              <div className=\"Home-cta-option-icon\">\n                <img src={arbitrumIcon} width=\"96\" alt=\"Arbitrum Icon\" />\n              </div>\n              <div className=\"Home-cta-option-info\">\n                <div className=\"Home-cta-option-title\">Arbitrum</div>\n                <div className=\"Home-cta-option-action\">\n                  <LaunchExchangeButton />\n                </div>\n              </div>\n            </div>\n            <div className=\"Home-cta-option Home-cta-option-ava\">\n              <div className=\"Home-cta-option-icon\">\n                <img src={avaxIcon} width=\"96\" alt=\"Avalanche Icon\" />\n              </div>\n              <div className=\"Home-cta-option-info\">\n                <div className=\"Home-cta-option-title\">Avalanche</div>\n                <div className=\"Home-cta-option-action\">\n                  <LaunchExchangeButton />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"Home-token-card-section\">\n        <div className=\"Home-token-card-container default-container\">\n          <div className=\"Home-token-card-info\">\n            <div className=\"Home-token-card-info__title\">\n              <Trans>Three tokens create our ecosystem</Trans>\n            </div>\n          </div>\n          <TokenCard showRedirectModal={showRedirectModal} redirectPopupTimestamp={redirectPopupTimestamp} />\n        </div>\n      </div>\n\n      {/* <div className=\"Home-video-section\">\n        <div className=\"Home-video-container default-container\">\n          <div className=\"Home-video-block\">\n            <img src={gmxBigIcon} alt=\"gmxbig\" />\n          </div>\n        </div>\n      </div> */}\n      {/* <div className=\"Home-faqs-section\">\n        <div className=\"Home-faqs-container default-container\">\n          <div className=\"Home-faqs-introduction\">\n            <div className=\"Home-faqs-introduction__title\">FAQs</div>\n            <div className=\"Home-faqs-introduction__description\">Most asked questions. If you wish to learn more, please head to our Documentation page.</div>\n            <a href=\"https://gmxio.gitbook.io/gmx/\" className=\"default-btn Home-faqs-documentation\">Documentation</a>\n          </div>\n          <div className=\"Home-faqs-content-block\">\n            {\n              faqContent.map((content, index) => (\n                <div className=\"Home-faqs-content\" key={index} onClick={() => toggleFAQContent(index)}>\n                  <div className=\"Home-faqs-content-header\">\n                    <div className=\"Home-faqs-content-header__icon\">\n                      {\n                        openedFAQIndex === index ? <FiMinus className=\"opened\" /> : <FiPlus className=\"closed\" />\n                      }\n                    </div>\n                    <div className=\"Home-faqs-content-header__text\">\n                      { content.question }\n                    </div>\n                  </div>\n                  <div className={ openedFAQIndex === index ? \"Home-faqs-content-main opened\" : \"Home-faqs-content-main\" }>\n                    <div className=\"Home-faqs-content-main__text\">\n                      <div dangerouslySetInnerHTML={{__html: content.answer}} >\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))\n            }\n          </div>\n        </div>\n      </div> */}\n      <Footer showRedirectModal={showRedirectModal} redirectPopupTimestamp={redirectPopupTimestamp} />\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { ethers } from \"ethers\";\nimport { useWeb3React } from \"@web3-react/core\";\n\nimport ERC721 from \"abis/ERC721.json\";\n\nimport \"./NftWallet.css\";\nimport { t, Trans } from \"@lingui/macro\";\nimport { callContract } from \"lib/contracts\";\nimport { useChainId } from \"lib/chains\";\n\nexport default function NftWallet() {\n  const [nftAddress, setNftAddress] = useState(\"\");\n  const [nftId, setNftId] = useState(\"\");\n  const [receiver, setReceiver] = useState(\"\");\n  const [isSubmitting, setIsSubmitting] = useState(\"\");\n\n  const { active, account, library } = useWeb3React();\n  const { chainId } = useChainId();\n\n  function getTransferError() {\n    if (!active) {\n      return t`Wallet not connected`;\n    }\n    if (!receiver || receiver.length === 0) {\n      return t`Enter Receiver Address`;\n    }\n    if (!ethers.utils.isAddress(receiver)) {\n      return t`Invalid Receiver Address`;\n    }\n    if (!nftAddress || nftAddress.length === 0) {\n      return t`Enter NFT Address`;\n    }\n    if (!ethers.utils.isAddress(nftAddress)) {\n      return t`Invalid NFT Address`;\n    }\n    if (!nftId || nftId.toString().length === 0) {\n      return t`Enter NFT ID`;\n    }\n  }\n\n  function getPrimaryText() {\n    const transferError = getTransferError();\n    if (transferError) {\n      return transferError;\n    }\n    if (isSubmitting) {\n      return t`Tranferring...`;\n    }\n    return t`Transfer NFT`;\n  }\n\n  function isPrimaryEnabled() {\n    return !getTransferError();\n  }\n\n  function transferNft() {\n    setIsSubmitting(true);\n    const contract = new ethers.Contract(nftAddress, ERC721.abi, library.getSigner());\n    callContract(chainId, contract, \"transferFrom\", [account, receiver, nftId], {\n      sentMsg: t`Transfer submitted!`,\n      failMsg: t`Transfer failed.`,\n    }).finally(() => {\n      setIsSubmitting(false);\n    });\n  }\n\n  return (\n    <div className=\"NftWallet Page page-layout\">\n      <div className=\"Page-title-section\">\n        <div className=\"Page-title\">\n          <Trans>NFT Wallet</Trans>\n        </div>\n      </div>\n      <div className=\"NftWallet-content\">\n        <div className=\"NftWallet-row\">\n          <label>\n            <Trans>Receiver Address</Trans>\n          </label>\n          <div>\n            <input type=\"text\" value={receiver} onChange={(e) => setReceiver(e.target.value)} />\n          </div>\n        </div>\n        <div className=\"NftWallet-row\">\n          <label>\n            <Trans>NFT Address</Trans>\n          </label>\n          <div>\n            <input type=\"text\" value={nftAddress} onChange={(e) => setNftAddress(e.target.value)} />\n          </div>\n        </div>\n        <div className=\"NftWallet-row\">\n          <label>\n            <Trans>NFT ID</Trans>\n          </label>\n          <div>\n            <input type=\"number\" value={nftId} onChange={(e) => setNftId(e.target.value)} />\n          </div>\n        </div>\n        <div className=\"NftWallet-row\">\n          <button className=\"App-cta Exchange-swap-button\" disabled={!isPrimaryEnabled()} onClick={() => transferNft()}>\n            {getPrimaryText()}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useWeb3React } from \"@web3-react/core\";\nimport cx from \"classnames\";\n\nimport { NavLink } from \"react-router-dom\";\n\nimport { getContract } from \"config/contracts\";\nimport * as Api from \"domain/legacy\";\nimport { useAllOrders, useAllOrdersStats, usePositionsForOrders } from \"domain/legacy\";\nimport {\n  DECREASE,\n  getExchangeRate,\n  getExchangeRateDisplay,\n  getOrderKey,\n  INCREASE,\n  shortenAddress,\n  shouldInvertTriggerRatio,\n  SWAP,\n  USD_DECIMALS,\n} from \"lib/legacy\";\n\nimport \"./OrdersOverview.css\";\nimport { t, Trans } from \"@lingui/macro\";\nimport { getTokenInfo } from \"domain/tokens/utils\";\nimport { useInfoTokens } from \"domain/tokens\";\nimport { formatAmount } from \"lib/numbers\";\nimport { useChainId } from \"lib/chains\";\nimport { formatDateTime } from \"lib/dates\";\n\nexport default function OrdersOverview() {\n  const { chainId } = useChainId();\n  const { library, account, active } = useWeb3React();\n\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n\n  const { infoTokens } = useInfoTokens(library, chainId, active, undefined, undefined);\n\n  const orders = useAllOrders(chainId, library);\n  const stats = useAllOrdersStats(chainId);\n  const ORDER_TYPE_LABELS = {\n    Increase: t`Increase`,\n    Decrease: t`Decrease`,\n    Swap: t`Swap`,\n  };\n\n  const positionsForOrders = usePositionsForOrders(\n    chainId,\n    library,\n    orders.filter((order) => order.type === DECREASE)\n  );\n\n  let openTotal;\n  let executedTotal;\n  let cancelledTotal;\n\n  if (stats) {\n    openTotal = stats.openDecrease + stats.openIncrease + stats.openSwap;\n    executedTotal = stats.executedDecrease + stats.executedIncrease + stats.executedSwap;\n    cancelledTotal = stats.cancelledDecrease + stats.cancelledIncrease + stats.cancelledSwap;\n  }\n\n  const NEAR_TRESHOLD = 98;\n\n  const executeOrder = (evt, order) => {\n    evt.preventDefault();\n\n    const params = [chainId, library, order.account, order.index, account];\n    let method;\n    if (order.type === \"Swap\") {\n      method = \"executeSwapOrder\";\n    } else if (order.type === \"Increase\") {\n      method = \"executeIncreaseOrder\";\n    } else {\n      method = \"executeDecreaseOrder\";\n    }\n    return Api[method](...params);\n  };\n\n  return (\n    <div className=\"Orders-overview\">\n      {stats && (\n        <p className=\"Orders-overview-stats\">\n          <Trans>\n            Total active: {openTotal}, executed: {executedTotal}, cancelled: {cancelledTotal}\n          </Trans>\n          <br />\n          <Trans>\n            Increase active: {stats.openIncrease}, executed: {stats.executedIncrease}, cancelled:{\" \"}\n            {stats.cancelledIncrease}\n          </Trans>\n          <br />\n          <Trans>\n            Decrease active: {stats.openDecrease}, executed: {stats.executedDecrease}, cancelled:{\" \"}\n            {stats.cancelledDecrease}\n          </Trans>\n          <br />\n          <Trans>\n            Swap active: {stats.openSwap}, executed: {stats.executedSwap}, cancelled: {stats.cancelledSwap}\n          </Trans>\n          <br />\n        </p>\n      )}\n      <p>\n        <span className=\"positive\">\n          <Trans>Price conditions are met</Trans>\n        </span>\n        <br />\n        <span style={{ color: \"orange\" }}>\n          <Trans>Close to execution price</Trans>\n        </span>\n        <br />\n        <span className=\"negative\">\n          <Trans>Can't execute because of an error</Trans>\n        </span>\n      </p>\n      <table className=\"Orders-overview-table\">\n        <thead>\n          <tr>\n            <th>\n              <Trans>Type</Trans>\n            </th>\n            <th colSpan=\"2\">\n              <Trans>Order</Trans>\n            </th>\n            <th>\n              <Trans>Price</Trans>\n            </th>\n            <th>\n              <Trans>Mark Price</Trans>\n            </th>\n            <th>\n              <Trans>Diff</Trans>\n            </th>\n            <th>\n              <Trans>Account</Trans>\n            </th>\n            <th>\n              <Trans>Created At</Trans>\n            </th>\n            <th>\n              <Trans>Index</Trans>\n            </th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n          {orders.map((order) => {\n            const { type } = order;\n            const key = getOrderKey(order);\n            if (type === SWAP) {\n              const fromToken = getTokenInfo(infoTokens, order.path[0], true, nativeTokenAddress);\n              const toTokenAddress = order.path[order.path.length - 1];\n              const toToken = getTokenInfo(infoTokens, toTokenAddress, order.shoudUnwrap, nativeTokenAddress);\n\n              let markExchangeRate;\n              let prefix;\n              let shouldExecute;\n              let nearExecute;\n              let diffPercent;\n              let invalidToken = false;\n              let error;\n              if (fromToken && toToken) {\n                const invert = shouldInvertTriggerRatio(fromToken, toToken);\n                markExchangeRate = getExchangeRate(fromToken, toToken);\n                prefix =\n                  (order.triggerAboveThreshold && !invert) || (!order.triggerAboveThreshold && invert) ? \"> \" : \"< \";\n                shouldExecute = markExchangeRate && markExchangeRate.lt(order.triggerRatio);\n                nearExecute = markExchangeRate && markExchangeRate.lt(order.triggerRatio.mul(100).div(NEAR_TRESHOLD));\n\n                if (markExchangeRate) {\n                  const diff = order.triggerRatio.gt(markExchangeRate)\n                    ? order.triggerRatio.sub(markExchangeRate)\n                    : markExchangeRate.sub(order.triggerRatio);\n                  diffPercent = diff.mul(10000).div(markExchangeRate);\n                }\n              } else {\n                invalidToken = true;\n                error = t`Invalid token fromToken: \"${order.path0}\" toToken: \"${toTokenAddress}\"`;\n              }\n\n              return (\n                <tr key={key}>\n                  <td>{ORDER_TYPE_LABELS[order.type]}</td>\n                  <td colSpan=\"2\">\n                    {!invalidToken && (\n                      <>\n                        {formatAmount(order.amountIn, fromToken.decimals, 4, true)} {fromToken.symbol}\n                        &nbsp;for&nbsp;\n                        {formatAmount(order.minOut, toToken.decimals, 4, true)} {toToken.symbol}\n                      </>\n                    )}\n                  </td>\n                  <td className={cx({ positive: shouldExecute, near: !shouldExecute && nearExecute })}>\n                    {!invalidToken && prefix}\n                    {getExchangeRateDisplay(order.triggerRatio, fromToken, toToken)}\n                  </td>\n                  <td className={cx({ positive: shouldExecute, near: !shouldExecute && nearExecute })}>\n                    {getExchangeRateDisplay(markExchangeRate, fromToken, toToken)}\n                  </td>\n                  <td className={cx({ positive: shouldExecute, near: !shouldExecute && nearExecute })}>\n                    {formatAmount(diffPercent, 2, 2)}%\n                  </td>\n                  <td>\n                    <NavLink to={`/actions/${order.account}`}>{shortenAddress(order.account)}</NavLink>\n                  </td>\n                  <td>{formatDateTime(order.createdTimestamp)}</td>\n                  <td>{order.index}</td>\n                  <td className=\"negative\">{error}</td>\n                  <td>\n                    <button className=\"Orders-overview-action\" onClick={(evt) => executeOrder(evt, order)}>\n                      Execute\n                    </button>\n                  </td>\n                </tr>\n              );\n            } else {\n              const indexToken = getTokenInfo(infoTokens, order.indexToken, true, nativeTokenAddress);\n              const collateralToken = getTokenInfo(infoTokens, order.collateralToken, true, nativeTokenAddress);\n              const purchaseToken = getTokenInfo(infoTokens, order.purchaseToken);\n\n              let markPrice;\n              let error;\n              if (indexToken && collateralToken && (order.type === DECREASE || purchaseToken)) {\n                markPrice = order.triggerAboveThreshold ? indexToken.minPrice : indexToken.maxPrice;\n              } else {\n                error = t`Invalid token indexToken: \"${order.indexToken}\" collateralToken: \"${order.collateralToken}\"`;\n                if (order.type === \"increase\") {\n                  error += ` purchaseToken: ${order.purchaseToken}`;\n                }\n              }\n\n              let shouldExecute;\n              let nearExecute;\n              let diffPercent;\n              if (markPrice) {\n                shouldExecute = order.triggerAboveThreshold\n                  ? markPrice.gt(order.triggerPrice)\n                  : markPrice.lt(order.triggerPrice);\n\n                nearExecute = order.triggerAboveThreshold\n                  ? markPrice.gt(order.triggerPrice.mul(NEAR_TRESHOLD).div(100))\n                  : markPrice.lt(order.triggerPrice.mul(100).div(NEAR_TRESHOLD));\n\n                const diff = markPrice.gt(order.triggerPrice)\n                  ? markPrice.sub(order.triggerPrice)\n                  : order.triggerPrice.sub(markPrice);\n                diffPercent = diff.mul(10000).div(markPrice);\n              }\n\n              if (!error && type === DECREASE) {\n                if (positionsForOrders && key in positionsForOrders) {\n                  const position = positionsForOrders[key];\n                  if (!position) {\n                    error = t`No position`;\n                  } else if (order.sizeDelta.gt(position[0])) {\n                    error = t`Order size exceeds position`;\n                  } else if (order.sizeDelta.eq(0)) {\n                    error = t`Order size is 0`;\n                  }\n                }\n              }\n              return (\n                <tr key={key}>\n                  <td>{ORDER_TYPE_LABELS[order.type]}</td>\n                  <td>\n                    {order.isLong ? t`Long` : t`Short`} {indexToken && indexToken.symbol}\n                  </td>\n                  <td>\n                    {type === INCREASE ? \"+\" : \"-\"}${formatAmount(order.sizeDelta, USD_DECIMALS, 2, true)}\n                  </td>\n                  <td className={cx({ positive: shouldExecute, near: !shouldExecute && nearExecute })}>\n                    {order.triggerAboveThreshold ? \"> \" : \"< \"}\n                    {formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)}\n                  </td>\n                  <td className={cx({ positive: shouldExecute, near: !shouldExecute && nearExecute })}>\n                    ${formatAmount(markPrice, USD_DECIMALS, 2, true)}\n                  </td>\n                  <td className={cx({ positive: shouldExecute, near: !shouldExecute && nearExecute })}>\n                    {formatAmount(diffPercent, 2, 2)}%\n                  </td>\n                  <td>\n                    <NavLink to={`/actions/${order.account}`}>{shortenAddress(order.account, 12)}</NavLink>\n                  </td>\n                  <td>{formatDateTime(order.createdTimestamp)}</td>\n                  <td>{order.index}</td>\n                  <td className=\"negative\">{error}</td>\n                  <td>\n                    <button className=\"Orders-overview-action\" onClick={(evt) => executeOrder(evt, order)}>\n                      <Trans>Execute</Trans>\n                    </button>\n                  </td>\n                </tr>\n              );\n            }\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n","import { Trans } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport cx from \"classnames\";\n\nimport { useAllPositions } from \"domain/legacy\";\nimport { USD_DECIMALS } from \"lib/legacy\";\n\nimport \"./PositionsOverview.css\";\nimport { formatAmount } from \"lib/numbers\";\nimport { useChainId } from \"lib/chains\";\nimport { getTimeRemaining } from \"lib/dates\";\n\nexport default function PositionsOverview() {\n  const { chainId } = useChainId();\n  const { library } = useWeb3React();\n\n  const positions = useAllPositions(chainId, library);\n\n  return (\n    <div className=\"Positions-overview\">\n      <p>\n        <Trans>\n          Open positions: {positions.length}\n          <br />\n          Under risk: {positions.filter((p) => p.danger).length}\n        </Trans>\n      </p>\n      <table className=\"Positions-overview-table\">\n        <thead>\n          <tr>\n            <th>\n              <Trans>account</Trans>\n            </th>\n            <th>\n              <Trans>size</Trans>\n            </th>\n            <th>\n              <Trans>collateral</Trans>\n            </th>\n            <th>\n              <Trans>fee</Trans>\n            </th>\n            <th>\n              <Trans>time to liq</Trans>\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          {positions &&\n            positions\n              .filter((p) => p.danger)\n              .map((position) => {\n                const { size, account, collateral, fee, danger } = position;\n\n                const diffToLiq = position.collateral.sub(position.fee);\n                const fundingFee = 80;\n                const feesPerHour = position.size.mul(fundingFee).div(1000000);\n                const hoursToLiq = diffToLiq.div(feesPerHour);\n                const liqTime = hoursToLiq.toNumber() * 60 * 60 + Date.now() / 1000;\n                return (\n                  <tr>\n                    <td>{account}</td>\n                    <td>${formatAmount(size, USD_DECIMALS, 2, true)}</td>\n                    <td>${formatAmount(collateral, USD_DECIMALS, 2, true)}</td>\n                    <td className={cx({ negative: danger })}>${formatAmount(fee, USD_DECIMALS, 2, true)}</td>\n                    <td>\n                      {getTimeRemaining(liqTime)} (${formatAmount(feesPerHour, USD_DECIMALS, 2, true)}/h)\n                    </td>\n                  </tr>\n                );\n              })}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n","import { useEffect, useState } from \"react\";\n\nexport function useDebounce(value: any, delay: number) {\n  // State and setters for debounced value\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(\n    () => {\n      // Update debounced value after delay\n      const handler = setTimeout(() => {\n        setDebouncedValue(value);\n      }, delay);\n      // Cancel the timeout if value changes (also on delay change or unmount)\n      // This is how we prevent debounced value from updating if value is changed ...\n      // .. within the delay period. Timeout gets cleared and restarted.\n      return () => {\n        clearTimeout(handler);\n      };\n    },\n    [value, delay] // Only re-call effect if value or delay changes\n  );\n\n  return debouncedValue;\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { setTraderReferralCodeByUser, validateReferralCodeExists } from \"domain/referrals\";\nimport { REFERRAL_CODE_REGEX } from \"./referralsHelper\";\nimport { useDebounce } from \"lib/useDebounce\";\nimport Button from \"components/Button/Button\";\n\nfunction JoinReferralCode({ setPendingTxns, pendingTxns, active, connectWallet }) {\n  return (\n    <div className=\"referral-card section-center mt-medium\">\n      <h2 className=\"title\">\n        <Trans>Enter Referral Code</Trans>\n      </h2>\n      <p className=\"sub-title\">\n        <Trans>Please input a referral code to benefit from fee discounts.</Trans>\n      </p>\n      <div className=\"card-action\">\n        {active ? (\n          <ReferralCodeForm setPendingTxns={setPendingTxns} pendingTxns={pendingTxns} />\n        ) : (\n          <Button variant=\"primary-action\" className=\"w-100\" type=\"submit\" onClick={connectWallet}>\n            <Trans>Connect Wallet</Trans>\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport function ReferralCodeForm({\n  setPendingTxns,\n  pendingTxns,\n  callAfterSuccess,\n  userReferralCodeString = \"\",\n  type = \"join\",\n}) {\n  const { account, library, chainId } = useWeb3React();\n  const [referralCode, setReferralCode] = useState(\"\");\n  const inputRef = useRef(\"\");\n  const [isValidating, setIsValidating] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [referralCodeExists, setReferralCodeExists] = useState(true);\n  const debouncedReferralCode = useDebounce(referralCode, 300);\n\n  function getPrimaryText() {\n    const isEdit = type === \"edit\";\n    if (isEdit && debouncedReferralCode === userReferralCodeString) {\n      return t`Same as current active code`;\n    }\n    if (isEdit && isSubmitting) {\n      return t`Updating...`;\n    }\n\n    if (isSubmitting) {\n      return t`Adding...`;\n    }\n    if (debouncedReferralCode === \"\") {\n      return t`Enter Referral Code`;\n    }\n    if (isValidating) {\n      return t`Checking code...`;\n    }\n    if (!referralCodeExists) {\n      return t`Referral Code does not exist`;\n    }\n\n    return isEdit ? t`Update` : t`Submit`;\n  }\n  function isPrimaryEnabled() {\n    if (\n      debouncedReferralCode === \"\" ||\n      isSubmitting ||\n      isValidating ||\n      !referralCodeExists ||\n      debouncedReferralCode === userReferralCodeString\n    ) {\n      return false;\n    }\n    return true;\n  }\n\n  async function handleSubmit(event) {\n    const isEdit = type === \"edit\";\n    event.preventDefault();\n    setIsSubmitting(true);\n\n    try {\n      const tx = await setTraderReferralCodeByUser(chainId, referralCode, library, {\n        account,\n        successMsg: isEdit ? t`Referral code updated!` : t`Referral code added!`,\n        failMsg: isEdit ? t`Referral code updated failed.` : t`Adding referral code failed.`,\n        setPendingTxns,\n        pendingTxns,\n      });\n      if (callAfterSuccess) {\n        callAfterSuccess();\n      }\n      const receipt = await tx.wait();\n      if (receipt.status === 1) {\n        setReferralCode(\"\");\n      }\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error(error);\n    } finally {\n      setIsSubmitting(false);\n      setIsValidating(false);\n    }\n  }\n\n  useEffect(() => {\n    let cancelled = false;\n    async function checkReferralCode() {\n      if (debouncedReferralCode === \"\" || !REFERRAL_CODE_REGEX.test(debouncedReferralCode)) {\n        setIsValidating(false);\n        setReferralCodeExists(false);\n        return;\n      }\n\n      setIsValidating(true);\n      const codeExists = await validateReferralCodeExists(debouncedReferralCode, chainId);\n      if (!cancelled) {\n        setReferralCodeExists(codeExists);\n        setIsValidating(false);\n      }\n    }\n    checkReferralCode();\n    return () => {\n      cancelled = true;\n    };\n  }, [debouncedReferralCode, chainId]);\n\n  useEffect(() => {\n    inputRef.current.focus();\n  }, []);\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input\n        ref={inputRef}\n        disabled={isSubmitting}\n        type=\"text\"\n        placeholder=\"Enter referral code\"\n        className=\"text-input mb-sm\"\n        value={referralCode}\n        onChange={({ target }) => {\n          const { value } = target;\n          setReferralCode(value);\n        }}\n      />\n      <Button\n        variant=\"primary-action\"\n        type=\"submit\"\n        className=\"App-cta Exchange-swap-button\"\n        disabled={!isPrimaryEnabled()}\n      >\n        {getPrimaryText()}\n      </Button>\n    </form>\n  );\n}\nexport default JoinReferralCode;\n","import Tooltip from \"../Tooltip/Tooltip\";\n\nfunction EmptyMessage({ message = \"\", tooltipText }) {\n  return (\n    <div className=\"empty-message\">\n      {tooltipText ? (\n        <Tooltip handle={<p>{message}</p>} position=\"center-bottom\" renderContent={() => tooltipText} />\n      ) : (\n        <p>{message}</p>\n      )}\n    </div>\n  );\n}\n\nexport default EmptyMessage;\n","import Tooltip from \"../Tooltip/Tooltip\";\n\nfunction InfoCard({ label, data, tooltipText, toolTipPosition = \"left-bottom\" }) {\n  return (\n    <div className=\"info-card\">\n      <div className=\"card-details\">\n        <h3 className=\"label\">\n          {tooltipText ? (\n            <Tooltip handle={label} position={toolTipPosition} renderContent={() => tooltipText} />\n          ) : (\n            label\n          )}\n        </h3>\n        <div className=\"data\">{data}</div>\n      </div>\n    </div>\n  );\n}\n\nexport default InfoCard;\n","import { useEffect, useRef, useState } from \"react\";\nimport { Trans, t } from \"@lingui/macro\";\nimport cx from \"classnames\";\nimport { getCodeError, getReferralCodeTakenStatus, getSampleReferrarStat } from \"./referralsHelper\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { ARBITRUM } from \"config/chains\";\nimport { helperToast } from \"lib/helperToast\";\nimport { useDebounce } from \"lib/useDebounce\";\nimport Button from \"components/Button/Button\";\n\nfunction AddAffiliateCode({\n  handleCreateReferralCode,\n  active,\n  connectWallet,\n  setRecentlyAddedCodes,\n  recentlyAddedCodes,\n}) {\n  return (\n    <div className=\"referral-card section-center mt-medium\">\n      <h2 className=\"title\">\n        <Trans>Generate Referral Code</Trans>\n      </h2>\n      <p className=\"sub-title\">\n        <Trans>\n          Looks like you don't have a referral code to share. <br /> Create one now and start earning rebates!\n        </Trans>\n      </p>\n      <div className=\"card-action\">\n        {active ? (\n          <AffiliateCodeForm\n            handleCreateReferralCode={handleCreateReferralCode}\n            recentlyAddedCodes={recentlyAddedCodes}\n            setRecentlyAddedCodes={setRecentlyAddedCodes}\n          />\n        ) : (\n          <Button variant=\"primary-action\" className=\"w-100\" onClick={connectWallet}>\n            <Trans>Connect Wallet</Trans>\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport function AffiliateCodeForm({\n  handleCreateReferralCode,\n  recentlyAddedCodes,\n  setRecentlyAddedCodes,\n  callAfterSuccess,\n}) {\n  const [referralCode, setReferralCode] = useState(\"\");\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [error, setError] = useState(\"\");\n  const inputRef = useRef(\"\");\n  const [referralCodeCheckStatus, setReferralCodeCheckStatus] = useState(\"ok\");\n  const debouncedReferralCode = useDebounce(referralCode, 300);\n  const { account, chainId } = useWeb3React();\n  useEffect(() => {\n    inputRef.current.focus();\n  }, []);\n\n  useEffect(() => {\n    let cancelled = false;\n    const checkCodeTakenStatus = async () => {\n      if (error) {\n        setReferralCodeCheckStatus(\"ok\");\n        return;\n      }\n      const { status: takenStatus } = await getReferralCodeTakenStatus(account, debouncedReferralCode, chainId);\n      // ignore the result if the referral code to check has changed\n      if (cancelled) {\n        return;\n      }\n      if (takenStatus === \"none\") {\n        setReferralCodeCheckStatus(\"ok\");\n      } else {\n        setReferralCodeCheckStatus(\"taken\");\n      }\n    };\n    setReferralCodeCheckStatus(\"checking\");\n    checkCodeTakenStatus();\n    return () => {\n      cancelled = true;\n    };\n  }, [account, debouncedReferralCode, error, chainId]);\n\n  function getButtonError() {\n    if (!debouncedReferralCode) {\n      return t`Enter a code`;\n    }\n    if (referralCodeCheckStatus === \"taken\") {\n      return t`Code already taken`;\n    }\n    if (referralCodeCheckStatus === \"checking\") {\n      return t`Checking code...`;\n    }\n\n    return false;\n  }\n\n  const buttonError = getButtonError();\n\n  function getPrimaryText() {\n    if (buttonError) {\n      return buttonError;\n    }\n\n    if (isProcessing) {\n      return t`Creating...`;\n    }\n\n    return t`Create`;\n  }\n  function isPrimaryEnabled() {\n    if (buttonError) {\n      return false;\n    }\n    if (error || isProcessing) {\n      return false;\n    }\n    return true;\n  }\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n    setIsProcessing(true);\n    const { status: takenStatus, info: takenInfo } = await getReferralCodeTakenStatus(account, referralCode, chainId);\n    if ([\"all\", \"current\", \"other\"].includes(takenStatus)) {\n      setIsProcessing(false);\n    }\n\n    if (takenStatus === \"none\" || takenStatus === \"other\") {\n      const ownerOnOtherNetwork = takenInfo[chainId === ARBITRUM ? \"ownerAvax\" : \"ownerArbitrum\"];\n      try {\n        const tx = await handleCreateReferralCode(referralCode);\n        if (callAfterSuccess) {\n          callAfterSuccess();\n        }\n        const receipt = await tx.wait();\n        if (receipt.status === 1) {\n          recentlyAddedCodes.push(getSampleReferrarStat(referralCode, ownerOnOtherNetwork, account));\n\n          helperToast.success(t`Referral code created!`);\n          setRecentlyAddedCodes(recentlyAddedCodes);\n          setReferralCode(\"\");\n        }\n      } catch (err) {\n        // eslint-disable-next-line no-console\n        console.error(err);\n      } finally {\n        setIsProcessing(false);\n      }\n    }\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input\n        type=\"text\"\n        ref={inputRef}\n        value={referralCode}\n        disabled={isProcessing}\n        className={cx(\"text-input\", { \"mb-sm\": !error })}\n        placeholder={t`Enter a code`}\n        onChange={({ target }) => {\n          const { value } = target;\n          setReferralCode(value);\n          setError(getCodeError(value));\n        }}\n      />\n      {error && <p className=\"error\">{error}</p>}\n      <Button variant=\"primary-action\" className=\"w-100\" type=\"submit\" disabled={!isPrimaryEnabled()}>\n        {getPrimaryText()}\n      </Button>\n    </form>\n  );\n}\n\nexport default AddAffiliateCode;\n","import Button from \"components/Button/Button\";\nimport \"./Pagination.css\";\n\ntype Props = {\n  page: number;\n  pageCount: number;\n  onPageChange: any;\n};\n\nfunction getPageNumbers(current, max = 1) {\n  if (max === 1) return [];\n  if (current === 1) {\n    return max >= 3 ? [1, 2, 3] : [1, 2];\n  } else if (current === max) {\n    return max >= 3 ? [current - 2, current - 1, current] : [current - 1, current];\n  } else {\n    return [current - 1, current, current + 1];\n  }\n}\n\nexport default function Pagination({ page, pageCount, onPageChange }: Props) {\n  if (pageCount <= 1) {\n    return <></>;\n  }\n\n  const middleButtons = getPageNumbers(page, pageCount).map((pageNumber) => {\n    return (\n      <button\n        key={pageNumber}\n        className={\"pagination-btn\" + (pageNumber === page ? \" active\" : \"\")}\n        onClick={() => onPageChange(pageNumber)}\n      >\n        {pageNumber}\n      </button>\n    );\n  });\n\n  return (\n    <div className=\"pagination\">\n      <div className=\"pagination-buttons\">\n        <Button variant=\"clear\" onClick={() => onPageChange(1)} disabled={page <= 1}>\n          {\"|<\"}\n        </Button>\n        <Button variant=\"clear\" onClick={() => onPageChange(page - 1)} disabled={page <= 1}>\n          {\"<\"}\n        </Button>\n        <div className=\"pagination-btn-middle\">{middleButtons}</div>\n        <Button variant=\"clear\" onClick={() => onPageChange(page + 1)} disabled={page >= pageCount}>\n          {\">\"}\n        </Button>\n        <Button variant=\"clear\" onClick={() => onPageChange(pageCount)} disabled={page >= pageCount}>\n          {\">|\"}\n        </Button>\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useState } from \"react\";\n\nexport const paginate = ({ total, current, size }) => {\n  const pages = Math.ceil(total / size);\n\n  if (current < 1) {\n    current = 1;\n  } else if (current > pages) {\n    current = pages;\n  }\n\n  const start = (current - 1) * size;\n  const end = Math.min(start + size - 1, total - 1);\n  return {\n    start,\n    end,\n  };\n};\n\nexport default function usePagination(items = [], size = 10) {\n  const [currentPage, setCurrentPage] = useState<number>(1);\n  const [totalPages, setTotalPages] = useState<number>(Math.ceil(items.length / size));\n\n  useEffect(() => {\n    setTotalPages(Math.ceil(items.length / size));\n  }, [items, size]);\n\n  function getCurrentData() {\n    const { start, end } = paginate({ total: items.length, current: currentPage, size });\n    return items.slice(start, end + 1);\n  }\n\n  return {\n    currentPage,\n    setCurrentPage,\n    pageCount: totalPages,\n    getCurrentData,\n  };\n}\n","import { useMemo, useRef, useState } from \"react\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { FiPlus, FiTwitter } from \"react-icons/fi\";\nimport { useCopyToClipboard } from \"react-use\";\nimport { IoWarningOutline } from \"react-icons/io5\";\nimport { BiCopy, BiErrorCircle } from \"react-icons/bi\";\nimport Card from \"../Common/Card\";\nimport Modal from \"../Modal/Modal\";\nimport { shortenAddress } from \"lib/legacy\";\nimport EmptyMessage from \"./EmptyMessage\";\nimport InfoCard from \"./InfoCard\";\nimport {\n  getReferralCodeTradeUrl,\n  getTierIdDisplay,\n  getTwitterShareUrl,\n  getUSDValue,\n  isRecentReferralCodeNotExpired,\n  tierRebateInfo,\n} from \"./referralsHelper\";\nimport { AffiliateCodeForm } from \"./AddAffiliateCode\";\nimport TooltipWithPortal from \"../Tooltip/TooltipWithPortal\";\nimport { AVALANCHE, getExplorerUrl } from \"config/chains\";\nimport { helperToast } from \"lib/helperToast\";\nimport { bigNumberify, formatAmount } from \"lib/numbers\";\nimport { getNativeToken, getToken } from \"config/tokens\";\nimport { formatDate } from \"lib/dates\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport Pagination from \"components/Pagination/Pagination\";\nimport usePagination from \"./usePagination\";\nimport Button from \"components/Button/Button\";\n\nfunction AffiliatesStats({\n  referralsData,\n  handleCreateReferralCode,\n  chainId,\n  setRecentlyAddedCodes,\n  recentlyAddedCodes,\n}) {\n  const [isAddReferralCodeModalOpen, setIsAddReferralCodeModalOpen] = useState(false);\n  const addNewModalRef = useRef(null);\n\n  const [, copyToClipboard] = useCopyToClipboard();\n  const open = () => setIsAddReferralCodeModalOpen(true);\n  const close = () => setIsAddReferralCodeModalOpen(false);\n\n  const { cumulativeStats, referrerTotalStats, rebateDistributions, referrerTierInfo } = referralsData;\n  const {\n    currentPage: currentRebatePage,\n    getCurrentData: getCurrentRebateData,\n    setCurrentPage: setCurrentRebatePage,\n    pageCount: rebatePageCount,\n  } = usePagination(rebateDistributions);\n\n  const currentRebateData = getCurrentRebateData();\n  const allReferralCodes = referrerTotalStats.map((c) => c.referralCode.trim());\n  const finalAffiliatesTotalStats = useMemo(\n    () =>\n      recentlyAddedCodes.filter(isRecentReferralCodeNotExpired).reduce((acc, cv) => {\n        if (!allReferralCodes.includes(cv.referralCode)) {\n          acc = acc.concat(cv);\n        }\n        return acc;\n      }, referrerTotalStats),\n    [allReferralCodes, referrerTotalStats, recentlyAddedCodes]\n  );\n\n  const {\n    currentPage: currentAffiliatesPage,\n    getCurrentData: getCurrentAffiliatesData,\n    setCurrentPage: setCurrentAffiliatesPage,\n    pageCount: affiliatesPageCount,\n  } = usePagination(finalAffiliatesTotalStats);\n\n  const currentAffiliatesData = getCurrentAffiliatesData();\n  const tierId = referrerTierInfo?.tierId;\n\n  let referrerRebates = bigNumberify(0);\n  if (cumulativeStats && cumulativeStats.totalRebateUsd && cumulativeStats.discountUsd) {\n    referrerRebates = cumulativeStats.totalRebateUsd.sub(cumulativeStats.discountUsd);\n  }\n  return (\n    <div className=\"referral-body-container\">\n      <div className=\"referral-stats\">\n        <InfoCard\n          label={t`Total Traders Referred`}\n          tooltipText={t`Amount of traders you referred.`}\n          data={cumulativeStats?.registeredReferralsCount || \"0\"}\n        />\n        <InfoCard\n          label={t`Total Trading Volume`}\n          tooltipText={t`Volume traded by your referred traders.`}\n          data={getUSDValue(cumulativeStats?.volume)}\n        />\n        <InfoCard\n          label={t`Total Rebates`}\n          tooltipText={t`Rebates earned by this account as an affiliate.`}\n          data={getUSDValue(referrerRebates, 4)}\n        />\n      </div>\n      <div className=\"list\">\n        <Modal\n          className=\"Connect-wallet-modal\"\n          isVisible={isAddReferralCodeModalOpen}\n          setIsVisible={close}\n          label={t`Create Referral Code`}\n          onAfterOpen={() => addNewModalRef.current?.focus()}\n        >\n          <div className=\"edit-referral-modal\">\n            <AffiliateCodeForm\n              handleCreateReferralCode={handleCreateReferralCode}\n              recentlyAddedCodes={recentlyAddedCodes}\n              setRecentlyAddedCodes={setRecentlyAddedCodes}\n              callAfterSuccess={close}\n            />\n          </div>\n        </Modal>\n        <Card\n          title={\n            <div className=\"referral-table-header\">\n              <p className=\"title\">\n                <Trans>Referral Codes</Trans>{\" \"}\n                <span className=\"sub-title\">\n                  {referrerTierInfo && t`Tier ${getTierIdDisplay(tierId)} (${tierRebateInfo[tierId]}% rebate)`}\n                </span>\n              </p>\n              <Button variant=\"clear\" onClick={open}>\n                <FiPlus />{\" \"}\n                <span className=\"ml-small\">\n                  <Trans>Create</Trans>\n                </span>\n              </Button>\n            </div>\n          }\n        >\n          <div className=\"table-wrapper\">\n            <table className=\"referral-table\">\n              <thead>\n                <tr>\n                  <th className=\"table-head\" scope=\"col\">\n                    <Trans>Referral Code</Trans>\n                  </th>\n                  <th className=\"table-head\" scope=\"col\">\n                    <Trans>Total Volume</Trans>\n                  </th>\n                  <th className=\"table-head\" scope=\"col\">\n                    <Trans>Traders Referred</Trans>\n                  </th>\n                  <th className=\"table-head\" scope=\"col\">\n                    <Trans>Total Rebates</Trans>\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                {currentAffiliatesData.map((stat, index) => {\n                  const ownerOnOtherChain = stat?.ownerOnOtherChain;\n                  let referrerRebate = bigNumberify(0);\n                  if (stat && stat.totalRebateUsd && stat.discountUsd) {\n                    referrerRebate = stat.totalRebateUsd.sub(stat.discountUsd);\n                  }\n                  return (\n                    <tr key={index}>\n                      <td data-label=\"Referral Code\">\n                        <div className=\"table-referral-code\">\n                          <span className=\"referral-text \">{stat.referralCode}</span>\n                          <div\n                            onClick={() => {\n                              copyToClipboard(getReferralCodeTradeUrl(stat.referralCode));\n                              helperToast.success(\"Referral link copied to your clipboard\");\n                            }}\n                            className=\"referral-code-icon\"\n                          >\n                            <BiCopy />\n                          </div>\n                          <a\n                            href={getTwitterShareUrl(stat.referralCode)}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            className=\"referral-code-icon\"\n                          >\n                            <FiTwitter />\n                          </a>\n                          {ownerOnOtherChain && !ownerOnOtherChain?.isTaken && (\n                            <div className=\"info\">\n                              <TooltipWithPortal\n                                position=\"right\"\n                                handle={<IoWarningOutline color=\"#ffba0e\" size={16} />}\n                                renderContent={() => (\n                                  <div>\n                                    <Trans>\n                                      This code is not yet registered on{\" \"}\n                                      {chainId === AVALANCHE ? \"Arbitrum\" : \"Avalanche\"}, you will not receive rebates\n                                      there.\n                                      <br />\n                                      <br />\n                                      Switch your network to create this code on{\" \"}\n                                      {chainId === AVALANCHE ? \"Arbitrum\" : \"Avalanche\"}.\n                                    </Trans>\n                                  </div>\n                                )}\n                              />\n                            </div>\n                          )}\n                          {ownerOnOtherChain && ownerOnOtherChain?.isTaken && !ownerOnOtherChain?.isTakenByCurrentUser && (\n                            <div className=\"info\">\n                              <TooltipWithPortal\n                                position=\"right\"\n                                handle={<BiErrorCircle color=\"#e82e56\" size={16} />}\n                                renderContent={() => (\n                                  <div>\n                                    <Trans>\n                                      This code has been taken by someone else on{\" \"}\n                                      {chainId === AVALANCHE ? \"Arbitrum\" : \"Avalanche\"}, you will not receive rebates\n                                      from traders using this code on {chainId === AVALANCHE ? \"Arbitrum\" : \"Avalanche\"}\n                                      .\n                                    </Trans>\n                                  </div>\n                                )}\n                              />\n                            </div>\n                          )}\n                        </div>\n                      </td>\n                      <td data-label=\"Total Volume\">{getUSDValue(stat.volume)}</td>\n                      <td data-label=\"Traders Referred\">{stat.registeredReferralsCount}</td>\n                      <td data-label=\"Total Rebates\">{getUSDValue(referrerRebate, 4)}</td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </table>\n          </div>\n        </Card>\n        <Pagination\n          page={currentAffiliatesPage}\n          pageCount={affiliatesPageCount}\n          onPageChange={(page) => setCurrentAffiliatesPage(page)}\n        />\n      </div>\n      {currentRebateData.length > 0 ? (\n        <div className=\"reward-history\">\n          <Card title={t`Rewards Distribution History`} tooltipText={t`Rewards are airdropped weekly.`}>\n            <div className=\"table-wrapper\">\n              <table className=\"referral-table\">\n                <thead>\n                  <tr>\n                    <th className=\"table-head\" scope=\"col\">\n                      <Trans>Date</Trans>\n                    </th>\n                    <th className=\"table-head\" scope=\"col\">\n                      <Trans>Amount</Trans>\n                    </th>\n                    <th className=\"table-head\" scope=\"col\">\n                      <Trans>Transaction</Trans>\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {currentRebateData.map((rebate, index) => {\n                    let tokenInfo;\n                    try {\n                      tokenInfo = getToken(chainId, rebate.token);\n                    } catch {\n                      tokenInfo = getNativeToken(chainId);\n                    }\n                    const explorerURL = getExplorerUrl(chainId);\n                    return (\n                      <tr key={index}>\n                        <td className=\"table-head\" data-label=\"Date\">\n                          {formatDate(rebate.timestamp)}\n                        </td>\n                        <td className=\"table-head\" data-label=\"Amount\">\n                          {formatAmount(rebate.amount, tokenInfo.decimals, 6, true)} {tokenInfo.symbol}\n                        </td>\n                        <td className=\"table-head\" data-label=\"Transaction\">\n                          <ExternalLink href={explorerURL + `tx/${rebate.transactionHash}`}>\n                            {shortenAddress(rebate.transactionHash, 13)}\n                          </ExternalLink>\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n          </Card>\n          <Pagination\n            page={currentRebatePage}\n            pageCount={rebatePageCount}\n            onPageChange={(page) => setCurrentRebatePage(page)}\n          />\n        </div>\n      ) : (\n        <EmptyMessage\n          tooltipText={t`Rebates are airdropped weekly.`}\n          message={t`No rebates distribution history yet.`}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default AffiliatesStats;\n","import { useRef, useState } from \"react\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { BiEditAlt } from \"react-icons/bi\";\nimport Card from \"../Common/Card\";\nimport Modal from \"../Modal/Modal\";\nimport Tooltip from \"../Tooltip/Tooltip\";\nimport { shortenAddress } from \"lib/legacy\";\nimport EmptyMessage from \"./EmptyMessage\";\nimport InfoCard from \"./InfoCard\";\nimport { getTierIdDisplay, getUSDValue, tierDiscountInfo } from \"./referralsHelper\";\nimport { ReferralCodeForm } from \"./JoinReferralCode\";\nimport { getExplorerUrl } from \"config/chains\";\nimport { formatAmount } from \"lib/numbers\";\nimport { getNativeToken, getToken } from \"config/tokens\";\nimport { formatDate } from \"lib/dates\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport usePagination from \"./usePagination\";\nimport Pagination from \"components/Pagination/Pagination\";\n\nfunction TradersStats({ referralsData, traderTier, chainId, userReferralCodeString, setPendingTxns, pendingTxns }) {\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n  const editModalRef = useRef(null);\n  const { getCurrentData, currentPage, setCurrentPage, pageCount } = usePagination(\n    referralsData?.discountDistributions\n  );\n\n  const currentDiscountDistributions = getCurrentData();\n\n  const open = () => setIsEditModalOpen(true);\n  const close = () => setIsEditModalOpen(false);\n  return (\n    <div className=\"rebate-container\">\n      <div className=\"referral-stats\">\n        <InfoCard\n          label={t`Total Trading Volume`}\n          tooltipText={t`Volume traded by this account with an active referral code.`}\n          data={getUSDValue(referralsData?.referralTotalStats?.volume)}\n        />\n        <InfoCard\n          label={t`Total Rebates`}\n          tooltipText={t`Rebates earned by this account as a trader.`}\n          data={getUSDValue(referralsData?.referralTotalStats?.discountUsd, 4)}\n        />\n        <InfoCard\n          label={t`Active Referral Code`}\n          data={\n            <div className=\"active-referral-code\">\n              <div className=\"edit\">\n                <span>{userReferralCodeString}</span>\n                <BiEditAlt onClick={open} />\n              </div>\n              {traderTier && (\n                <div className=\"tier\">\n                  <Tooltip\n                    handle={t`Tier ${getTierIdDisplay(traderTier)} (${tierDiscountInfo[traderTier]}% discount)`}\n                    position=\"right-bottom\"\n                    renderContent={() => (\n                      <p className=\"text-white\">\n                        <Trans>\n                          You will receive a {tierDiscountInfo[traderTier]}% discount on your opening and closing fees,\n                          this discount will be airdropped to your account every Wednesday\n                        </Trans>\n                      </p>\n                    )}\n                  />\n                </div>\n              )}\n            </div>\n          }\n        />\n        <Modal\n          className=\"Connect-wallet-modal\"\n          isVisible={isEditModalOpen}\n          setIsVisible={close}\n          label={t`Edit Referral Code`}\n          onAfterOpen={() => editModalRef.current?.focus()}\n        >\n          <div className=\"edit-referral-modal\">\n            <ReferralCodeForm\n              userReferralCodeString={userReferralCodeString}\n              setPendingTxns={setPendingTxns}\n              pendingTxns={pendingTxns}\n              type=\"edit\"\n              callAfterSuccess={() => setIsEditModalOpen(false)}\n            />\n          </div>\n        </Modal>\n      </div>\n      {currentDiscountDistributions.length > 0 ? (\n        <div className=\"reward-history\">\n          <Card title={t`Rebates Distribution History`} tooltipText={t`Rebates are airdropped weekly.`}>\n            <div className=\"table-wrapper\">\n              <table className=\"referral-table\">\n                <thead>\n                  <tr>\n                    <th className=\"table-head\" scope=\"col\">\n                      <Trans>Date</Trans>\n                    </th>\n                    <th className=\"table-head\" scope=\"col\">\n                      <Trans>Amount</Trans>\n                    </th>\n                    <th className=\"table-head\" scope=\"col\">\n                      <Trans>Transaction</Trans>\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {currentDiscountDistributions.map((rebate, index) => {\n                    let tokenInfo;\n                    try {\n                      tokenInfo = getToken(chainId, rebate.token);\n                    } catch {\n                      tokenInfo = getNativeToken(chainId);\n                    }\n                    const explorerURL = getExplorerUrl(chainId);\n                    return (\n                      <tr key={index}>\n                        <td data-label=\"Date\">{formatDate(rebate.timestamp)}</td>\n                        <td data-label=\"Amount\">\n                          {formatAmount(rebate.amount, tokenInfo.decimals, 6, true)} {tokenInfo.symbol}\n                        </td>\n                        <td data-label=\"Transaction\">\n                          <ExternalLink href={explorerURL + `tx/${rebate.transactionHash}`}>\n                            {shortenAddress(rebate.transactionHash, 20)}\n                          </ExternalLink>\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n          </Card>\n          <Pagination page={currentPage} pageCount={pageCount} onPageChange={(page) => setCurrentPage(page)} />\n        </div>\n      ) : (\n        <EmptyMessage\n          message={t`No rebates distribution history yet.`}\n          tooltipText={t`Rebates are airdropped weekly.`}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default TradersStats;\n","import \"./Referrals.css\";\nimport React from \"react\";\nimport { useLocalStorage } from \"react-use\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { useParams } from \"react-router-dom\";\nimport SEO from \"components/Common/SEO\";\nimport Tab from \"components/Tab/Tab\";\nimport Loader from \"components/Common/Loader\";\nimport Footer from \"components/Footer/Footer\";\nimport { getPageTitle, isHashZero } from \"lib/legacy\";\nimport {\n  useReferralsData,\n  registerReferralCode,\n  useCodeOwner,\n  useReferrerTier,\n  useUserReferralCode,\n} from \"domain/referrals\";\nimport JoinReferralCode from \"components/Referrals/JoinReferralCode\";\nimport AffiliatesStats from \"components/Referrals/AffiliatesStats\";\nimport TradersStats from \"components/Referrals/TradersStats\";\nimport AddAffiliateCode from \"components/Referrals/AddAffiliateCode\";\nimport { deserializeSampleStats, isRecentReferralCodeNotExpired } from \"components/Referrals/referralsHelper\";\nimport { ethers } from \"ethers\";\nimport { useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport { REFERRALS_SELECTED_TAB_KEY } from \"config/localStorage\";\nimport { useChainId } from \"lib/chains\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport { getIcon } from \"config/icons\";\n\nconst TRADERS = \"Traders\";\nconst AFFILIATES = \"Affiliates\";\nconst TAB_OPTIONS = [TRADERS, AFFILIATES];\n\nfunction Referrals({ connectWallet, setPendingTxns, pendingTxns }) {\n  const { active, account: walletAccount, library } = useWeb3React();\n  const { account: queryAccount } = useParams();\n  let account;\n  if (queryAccount && ethers.utils.isAddress(queryAccount)) {\n    account = ethers.utils.getAddress(queryAccount);\n  } else {\n    account = walletAccount;\n  }\n  const { chainId } = useChainId();\n  const [activeTab, setActiveTab] = useLocalStorage(REFERRALS_SELECTED_TAB_KEY, TRADERS);\n  const { data: referralsData, loading } = useReferralsData(chainId, account);\n  const [recentlyAddedCodes, setRecentlyAddedCodes] = useLocalStorageSerializeKey([chainId, \"REFERRAL\", account], [], {\n    deserializer: deserializeSampleStats,\n  });\n  const { userReferralCode, userReferralCodeString } = useUserReferralCode(library, chainId, account);\n  const { codeOwner } = useCodeOwner(library, chainId, account, userReferralCode);\n  const { referrerTier: traderTier } = useReferrerTier(library, chainId, codeOwner);\n  const networkIcon = getIcon(chainId, \"network\");\n\n  function handleCreateReferralCode(referralCode) {\n    return registerReferralCode(chainId, referralCode, library, {\n      sentMsg: t`Referral code submitted!`,\n      failMsg: t`Referral code creation failed.`,\n      pendingTxns,\n    });\n  }\n\n  function renderAffiliatesTab() {\n    const isReferralCodeAvailable =\n      referralsData?.codes?.length > 0 || recentlyAddedCodes?.filter(isRecentReferralCodeNotExpired).length > 0;\n    if (loading) return <Loader />;\n    if (isReferralCodeAvailable) {\n      return (\n        <AffiliatesStats\n          referralsData={referralsData}\n          handleCreateReferralCode={handleCreateReferralCode}\n          setRecentlyAddedCodes={setRecentlyAddedCodes}\n          recentlyAddedCodes={recentlyAddedCodes}\n          chainId={chainId}\n        />\n      );\n    } else {\n      return (\n        <AddAffiliateCode\n          handleCreateReferralCode={handleCreateReferralCode}\n          active={active}\n          connectWallet={connectWallet}\n          recentlyAddedCodes={recentlyAddedCodes}\n          setRecentlyAddedCodes={setRecentlyAddedCodes}\n        />\n      );\n    }\n  }\n\n  function renderTradersTab() {\n    if (loading) return <Loader />;\n    if (isHashZero(userReferralCode) || !account || !userReferralCode) {\n      return (\n        <JoinReferralCode\n          connectWallet={connectWallet}\n          active={active}\n          setPendingTxns={setPendingTxns}\n          pendingTxns={pendingTxns}\n        />\n      );\n    }\n    return (\n      <TradersStats\n        userReferralCodeString={userReferralCodeString}\n        chainId={chainId}\n        referralsData={referralsData}\n        setPendingTxns={setPendingTxns}\n        pendingTxns={pendingTxns}\n        traderTier={traderTier}\n      />\n    );\n  }\n  const TAB_OPTION_LABELS = { [TRADERS]: t`Traders`, [AFFILIATES]: t`Affiliates` };\n\n  return (\n    <SEO title={getPageTitle(\"Referrals\")}>\n      <div className=\"default-container page-layout Referrals\">\n        <div className=\"section-title-block\">\n          <div className=\"section-title-icon\" />\n          <div className=\"section-title-content\">\n            <div className=\"Page-title\">\n              <Trans>\n                Referrals <img width=\"24\" src={networkIcon} alt=\"Network Icon\" />\n              </Trans>\n            </div>\n            <div className=\"Page-description\">\n              <Trans>\n                Get fee discounts and earn rebates through the GMX referral program.\n                <br />\n                For more information, please read the{\" \"}\n                <ExternalLink href=\"https://gmxio.gitbook.io/gmx/referrals\">referral program details</ExternalLink>.\n              </Trans>\n            </div>\n          </div>\n        </div>\n        <div className=\"referral-tab-container\">\n          <Tab\n            options={TAB_OPTIONS}\n            optionLabels={TAB_OPTION_LABELS}\n            option={activeTab}\n            setOption={setActiveTab}\n            onChange={setActiveTab}\n          />\n        </div>\n        {activeTab === AFFILIATES ? renderAffiliatesTab() : renderTradersTab()}\n      </div>\n      <Footer />\n    </SEO>\n  );\n}\n\nexport default Referrals;\n","import React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport useSWR from \"swr\";\nimport { ethers } from \"ethers\";\n\nimport { USD_DECIMALS, PRECISION } from \"lib/legacy\";\n\nimport { getContract, XGMT_EXCLUDED_ACCOUNTS } from \"config/contracts\";\n\nimport Reader from \"abis/Reader.json\";\nimport Token from \"abis/Token.json\";\nimport YieldToken from \"abis/YieldToken.json\";\nimport YieldFarm from \"abis/YieldFarm.json\";\n\nimport Modal from \"components/Modal/Modal\";\nimport Footer from \"components/Footer/Footer\";\n\nimport \"./Stake.css\";\nimport { t, Trans } from \"@lingui/macro\";\nimport { CHAIN_ID, getExplorerUrl } from \"config/chains\";\nimport { contractFetcher } from \"lib/contracts\";\nimport { approveTokens } from \"domain/tokens\";\nimport { helperToast } from \"lib/helperToast\";\nimport { getInjectedHandler } from \"lib/wallets\";\nimport { bigNumberify, expandDecimals, formatAmount, formatAmountFree, formatKeyAmount, parseValue } from \"lib/numbers\";\nimport { getTokenBySymbol } from \"config/tokens\";\nimport { useChainId } from \"lib/chains\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nconst BASIS_POINTS_DIVISOR = 10000;\nconst HOURS_PER_YEAR = 8760;\n\nconst { AddressZero } = ethers.constants;\n\nfunction getBalanceAndSupplyData(balances) {\n  if (!balances || balances.length === 0) {\n    return {};\n  }\n\n  const keys = [\n    \"usdg\",\n    \"gmt\",\n    \"xgmt\",\n    \"gmtUsdg\",\n    \"xgmtUsdg\",\n    \"gmtUsdgFarm\",\n    \"xgmtUsdgFarm\",\n    \"autoUsdg\",\n    \"autoUsdgFarm\",\n  ];\n  const balanceData = {};\n  const supplyData = {};\n  const propsLength = 2;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    balanceData[key] = balances[i * propsLength];\n    supplyData[key] = balances[i * propsLength + 1];\n  }\n\n  return { balanceData, supplyData };\n}\n\nfunction getStakingData(stakingInfo) {\n  if (!stakingInfo || stakingInfo.length === 0) {\n    return;\n  }\n\n  const keys = [\n    \"usdg\",\n    \"xgmt\",\n    \"gmtUsdgFarmXgmt\",\n    \"gmtUsdgFarmNative\",\n    \"xgmtUsdgFarmXgmt\",\n    \"xgmtUsdgFarmNative\",\n    \"autoUsdgFarmXgmt\",\n    \"autoUsdgFarmNative\",\n  ];\n  const data = {};\n  const propsLength = 2;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    data[key] = {\n      claimable: stakingInfo[i * propsLength],\n      tokensPerInterval: stakingInfo[i * propsLength + 1],\n    };\n  }\n\n  return data;\n}\n\nfunction getTotalStakedData(totalStakedInfo) {\n  if (!totalStakedInfo || totalStakedInfo.length === 0) {\n    return;\n  }\n\n  const keys = [\"usdg\", \"xgmt\"];\n  const data = {};\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    data[key] = totalStakedInfo[i];\n  }\n\n  return data;\n}\n\nfunction getPairData(pairInfo) {\n  const keys = [\"gmtUsdg\", \"xgmtUsdg\", \"bnbBusd\", \"autoUsdg\"];\n  if (!pairInfo || pairInfo.length === 0 || pairInfo.length !== keys.length * 2) {\n    return;\n  }\n\n  const data = {};\n  const propsLength = 2;\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    data[key] = {\n      balance0: pairInfo[i * propsLength],\n      balance1: pairInfo[i * propsLength + 1],\n    };\n  }\n\n  return data;\n}\n\nfunction getProcessedData(balanceData, supplyData, stakingData, totalStakedData, pairData, xgmtSupply) {\n  if (!balanceData || !supplyData || !stakingData || !totalStakedData || !pairData || !xgmtSupply) {\n    return {};\n  }\n\n  if (!supplyData.gmtUsdg || !supplyData.xgmtUsdg || !supplyData.autoUsdg) {\n    return {};\n  }\n\n  // const gmtPrice = pairData.gmtUsdg.balance1.mul(PRECISION).div(pairData.gmtUsdg.balance0)\n  const xgmtPrice = pairData.xgmtUsdg.balance0.eq(0)\n    ? bigNumberify(0)\n    : pairData.xgmtUsdg.balance1.mul(PRECISION).div(pairData.xgmtUsdg.balance0);\n  const gmtUsdgPrice = supplyData.gmtUsdg.eq(0)\n    ? bigNumberify(0)\n    : pairData.gmtUsdg.balance1.mul(PRECISION).mul(2).div(supplyData.gmtUsdg);\n  const xgmtUsdgPrice = supplyData.xgmtUsdg.eq(0)\n    ? bigNumberify(0)\n    : pairData.xgmtUsdg.balance1.mul(PRECISION).mul(2).div(supplyData.xgmtUsdg);\n  const bnbPrice = pairData.bnbBusd.balance1.mul(PRECISION).div(pairData.bnbBusd.balance0);\n  const autoUsdgPrice = supplyData.autoUsdg.eq(0)\n    ? bigNumberify(0)\n    : pairData.autoUsdg.balance1.mul(PRECISION).mul(2).div(supplyData.autoUsdg);\n\n  const usdgAnnualRewardsUsd = stakingData.usdg.tokensPerInterval\n    .mul(bnbPrice)\n    .mul(HOURS_PER_YEAR)\n    .div(expandDecimals(1, 18));\n  const xgmtAnnualRewardsUsd = stakingData.xgmt.tokensPerInterval\n    .mul(bnbPrice)\n    .mul(HOURS_PER_YEAR)\n    .div(expandDecimals(1, 18));\n\n  const gmtUsdgAnnualRewardsXmgtUsd = stakingData.gmtUsdgFarmXgmt.tokensPerInterval\n    .mul(xgmtPrice)\n    .mul(HOURS_PER_YEAR)\n    .div(expandDecimals(1, 18));\n  const gmtUsdgAnnualRewardsNativeUsd = stakingData.gmtUsdgFarmNative.tokensPerInterval\n    .mul(bnbPrice)\n    .mul(HOURS_PER_YEAR)\n    .div(expandDecimals(1, 18));\n  const gmtUsdgTotalAnnualRewardsUsd = gmtUsdgAnnualRewardsXmgtUsd.add(gmtUsdgAnnualRewardsNativeUsd);\n\n  const xgmtUsdgAnnualRewardsXmgtUsd = stakingData.xgmtUsdgFarmXgmt.tokensPerInterval\n    .mul(xgmtPrice)\n    .mul(HOURS_PER_YEAR)\n    .div(expandDecimals(1, 18));\n  const xgmtUsdgAnnualRewardsNativeUsd = stakingData.xgmtUsdgFarmNative.tokensPerInterval\n    .mul(bnbPrice)\n    .mul(HOURS_PER_YEAR)\n    .div(expandDecimals(1, 18));\n  const xgmtUsdgTotalAnnualRewardsUsd = xgmtUsdgAnnualRewardsXmgtUsd.add(xgmtUsdgAnnualRewardsNativeUsd);\n\n  const autoUsdgAnnualRewardsXgmtUsd = stakingData.autoUsdgFarmXgmt.tokensPerInterval\n    .mul(xgmtPrice)\n    .mul(HOURS_PER_YEAR)\n    .div(expandDecimals(1, 18));\n  const autoUsdgAnnualRewardsNativeUsd = stakingData.autoUsdgFarmNative.tokensPerInterval\n    .mul(bnbPrice)\n    .mul(HOURS_PER_YEAR)\n    .div(expandDecimals(1, 18));\n  const autoUsdgTotalAnnualRewardsUsd = autoUsdgAnnualRewardsXgmtUsd.add(autoUsdgAnnualRewardsNativeUsd);\n\n  const data = {};\n  data.usdgBalance = balanceData.usdg;\n  data.usdgSupply = supplyData.usdg;\n  data.usdgTotalStaked = totalStakedData.usdg;\n  data.usdgTotalStakedUsd = totalStakedData.usdg.mul(PRECISION).div(expandDecimals(1, 18));\n  data.usdgSupplyUsd = supplyData.usdg.mul(PRECISION).div(expandDecimals(1, 18));\n  data.usdgApr = data.usdgTotalStaked.eq(0)\n    ? undefined\n    : usdgAnnualRewardsUsd\n        .mul(BASIS_POINTS_DIVISOR)\n        .div(totalStakedData.usdg)\n        .mul(expandDecimals(1, 18))\n        .div(PRECISION);\n  data.usdgRewards = stakingData.usdg.claimable;\n\n  data.xgmtBalance = balanceData.xgmt;\n  data.xgmtBalanceUsd = balanceData.xgmt.mul(xgmtPrice).div(expandDecimals(1, 18));\n  data.xgmtSupply = xgmtSupply;\n  data.xgmtTotalStaked = totalStakedData.xgmt;\n  data.xgmtTotalStakedUsd = totalStakedData.xgmt.mul(xgmtPrice).div(expandDecimals(1, 18));\n  data.xgmtSupplyUsd = xgmtSupply.mul(xgmtPrice).div(expandDecimals(1, 18));\n  data.xgmtApr = data.xgmtSupplyUsd.eq(0)\n    ? bigNumberify(0)\n    : xgmtAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.xgmtTotalStakedUsd);\n  data.xgmtRewards = stakingData.xgmt.claimable;\n\n  data.gmtUsdgFarmBalance = balanceData.gmtUsdgFarm;\n\n  data.gmtUsdgBalance = balanceData.gmtUsdg;\n  data.gmtUsdgBalanceUsd = balanceData.gmtUsdg.mul(gmtUsdgPrice).div(expandDecimals(1, 18));\n  data.gmtUsdgSupply = supplyData.gmtUsdg;\n  data.gmtUsdgSupplyUsd = supplyData.gmtUsdg.mul(gmtUsdgPrice).div(expandDecimals(1, 18));\n  data.gmtUsdgStaked = balanceData.gmtUsdgFarm;\n  data.gmtUsdgStakedUsd = balanceData.gmtUsdgFarm.mul(gmtUsdgPrice).div(expandDecimals(1, 18));\n  data.gmtUsdgFarmSupplyUsd = supplyData.gmtUsdgFarm.mul(gmtUsdgPrice).div(expandDecimals(1, 18));\n  data.gmtUsdgApr = data.gmtUsdgSupplyUsd.eq(0)\n    ? bigNumberify(0)\n    : data.gmtUsdgFarmSupplyUsd.eq(0)\n    ? undefined\n    : gmtUsdgTotalAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.gmtUsdgSupplyUsd);\n  data.gmtUsdgXgmtRewards = stakingData.gmtUsdgFarmXgmt.claimable;\n  data.gmtUsdgNativeRewards = stakingData.gmtUsdgFarmNative.claimable;\n  data.gmtUsdgTotalRewards = data.gmtUsdgXgmtRewards.add(data.gmtUsdgNativeRewards);\n  data.gmtUsdgTotalStaked = supplyData.gmtUsdgFarm;\n  data.gmtUsdgTotalStakedUsd = supplyData.gmtUsdgFarm.mul(gmtUsdgPrice).div(expandDecimals(1, 18));\n\n  data.xgmtUsdgBalance = balanceData.xgmtUsdg;\n  data.xgmtUsdgFarmBalance = balanceData.xgmtUsdgFarm;\n  data.xgmtUsdgBalanceUsd = balanceData.xgmtUsdg.mul(xgmtUsdgPrice).div(expandDecimals(1, 18));\n  data.xgmtUsdgSupply = supplyData.xgmtUsdg;\n  data.xgmtUsdgSupplyUsd = supplyData.xgmtUsdg.mul(xgmtUsdgPrice).div(expandDecimals(1, 18));\n  data.xgmtUsdgStaked = balanceData.xgmtUsdgFarm;\n  data.xgmtUsdgStakedUsd = balanceData.xgmtUsdgFarm.mul(xgmtUsdgPrice).div(expandDecimals(1, 18));\n  data.xgmtUsdgFarmSupplyUsd = supplyData.xgmtUsdgFarm.mul(xgmtUsdgPrice).div(expandDecimals(1, 18));\n  data.xgmtUsdgApr = data.xgmtUsdgFarmSupplyUsd.eq(0)\n    ? undefined\n    : xgmtUsdgTotalAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.xgmtUsdgFarmSupplyUsd);\n  data.xgmtUsdgXgmtRewards = stakingData.xgmtUsdgFarmXgmt.claimable;\n  data.xgmtUsdgNativeRewards = stakingData.xgmtUsdgFarmNative.claimable;\n  data.xgmtUsdgTotalRewards = data.xgmtUsdgXgmtRewards.add(data.xgmtUsdgNativeRewards);\n  data.xgmtUsdgTotalStaked = supplyData.xgmtUsdgFarm;\n  data.xgmtUsdgTotalStakedUsd = supplyData.xgmtUsdgFarm.mul(xgmtUsdgPrice).div(expandDecimals(1, 18));\n\n  data.autoUsdgBalance = balanceData.autoUsdg;\n  data.autoUsdgFarmBalance = balanceData.autoUsdgFarm;\n  data.autoUsdgBalanceUsd = balanceData.autoUsdg.mul(autoUsdgPrice).div(expandDecimals(1, 18));\n  data.autoUsdgStaked = balanceData.autoUsdgFarm;\n  data.autoUsdgStakedUsd = balanceData.autoUsdgFarm.mul(autoUsdgPrice).div(expandDecimals(1, 18));\n  data.autoUsdgFarmSupplyUsd = supplyData.autoUsdgFarm.mul(autoUsdgPrice).div(expandDecimals(1, 18));\n  data.autoUsdgApr = data.autoUsdgFarmSupplyUsd.eq(0)\n    ? bigNumberify(0)\n    : autoUsdgTotalAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.autoUsdgFarmSupplyUsd);\n  data.autoUsdgXgmtRewards = stakingData.autoUsdgFarmXgmt.claimable;\n  data.autoUsdgNativeRewards = stakingData.autoUsdgFarmNative.claimable;\n  data.autoUsdgTotalRewards = data.autoUsdgXgmtRewards.add(data.autoUsdgNativeRewards);\n  data.autoUsdgTotalStaked = supplyData.autoUsdgFarm;\n  data.autoUsdgTotalStakedUsd = supplyData.autoUsdgFarm.mul(autoUsdgPrice).div(expandDecimals(1, 18));\n\n  data.totalStakedUsd = data.usdgTotalStakedUsd\n    .add(data.xgmtTotalStakedUsd)\n    .add(data.gmtUsdgTotalStakedUsd)\n    .add(data.xgmtUsdgTotalStakedUsd)\n    .add(data.autoUsdgTotalStakedUsd);\n\n  return data;\n}\n\nfunction StakeModal(props) {\n  const {\n    isVisible,\n    setIsVisible,\n    title,\n    maxAmount,\n    value,\n    setValue,\n    active,\n    account,\n    library,\n    stakingTokenSymbol,\n    stakingTokenAddress,\n    farmAddress,\n    chainId,\n  } = props;\n  const [isStaking, setIsStaking] = useState(false);\n  const [isApproving, setIsApproving] = useState(false);\n\n  const { data: tokenAllowance, mutate: updateTokenAllowance } = useSWR(\n    [active, chainId, stakingTokenAddress, \"allowance\", account, farmAddress],\n    {\n      fetcher: contractFetcher(library, Token),\n    }\n  );\n\n  useEffect(() => {\n    if (active) {\n      library.on(\"block\", () => {\n        updateTokenAllowance(undefined, true);\n      });\n      return () => {\n        library.removeAllListeners(\"block\");\n      };\n    }\n  }, [active, library, updateTokenAllowance]);\n\n  let amount = parseValue(value, 18);\n  const needApproval = tokenAllowance && amount && amount.gt(tokenAllowance);\n\n  const getError = () => {\n    if (!amount || amount.eq(0)) {\n      return t`Enter an amount`;\n    }\n    if (maxAmount && amount.gt(maxAmount)) {\n      return t`Max amount exceeded`;\n    }\n  };\n\n  const onClickPrimary = () => {\n    if (needApproval) {\n      approveTokens({\n        setIsApproving,\n        library,\n        tokenAddress: stakingTokenAddress,\n        spender: farmAddress,\n        chainId: CHAIN_ID,\n      });\n      return;\n    }\n\n    setIsStaking(true);\n    const contract = new ethers.Contract(farmAddress, YieldFarm.abi, library.getSigner());\n    contract\n      .stake(amount)\n      .then(async (res) => {\n        const txUrl = getExplorerUrl(CHAIN_ID) + \"tx/\" + res.hash;\n        helperToast.success(\n          <div>\n            <Trans>\n              Stake submitted! <ExternalLink href={txUrl}>View status.</ExternalLink>\n            </Trans>\n            <br />\n          </div>\n        );\n        setIsVisible(false);\n      })\n      .catch((e) => {\n        // eslint-disable-next-line no-console\n        console.error(e);\n        helperToast.error(t`Stake failed`);\n      })\n      .finally(() => {\n        setIsStaking(false);\n      });\n  };\n\n  const isPrimaryEnabled = () => {\n    const error = getError();\n    if (error) {\n      return false;\n    }\n    if (isApproving) {\n      return false;\n    }\n    if (isStaking) {\n      return false;\n    }\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    const error = getError();\n    if (error) {\n      return error;\n    }\n    if (isApproving) {\n      return t`Approving ${stakingTokenSymbol}...`;\n    }\n    if (needApproval) {\n      return t`Approve ${stakingTokenSymbol}`;\n    }\n    if (isStaking) {\n      return t`Staking...`;\n    }\n    return t`Stake`;\n  };\n\n  return (\n    <div className=\"StakeModal\">\n      <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={title}>\n        <div className=\"Exchange-swap-section\">\n          <div className=\"Exchange-swap-section-top\">\n            <div className=\"muted\">\n              <div className=\"Exchange-swap-usd\">\n                <Trans>Stake</Trans>\n              </div>\n            </div>\n            <div className=\"muted align-right clickable\" onClick={() => setValue(formatAmountFree(maxAmount, 18, 18))}>\n              <Trans>Max: {formatAmount(maxAmount, 18, 4, true)}</Trans>\n            </div>\n          </div>\n          <div className=\"Exchange-swap-section-bottom\">\n            <div>\n              <input\n                type=\"number\"\n                placeholder=\"0.0\"\n                className=\"Exchange-swap-input\"\n                value={value}\n                onChange={(e) => setValue(e.target.value)}\n              />\n            </div>\n            <div className=\"PositionEditor-token-symbol\">{stakingTokenSymbol}</div>\n          </div>\n        </div>\n        <div className=\"Exchange-swap-button-container\">\n          <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n            {getPrimaryText()}\n          </button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nfunction UnstakeModal(props) {\n  const { isVisible, setIsVisible, title, maxAmount, value, setValue, library, stakingTokenSymbol, farmAddress } =\n    props;\n  const [isUnstaking, setIsUnstaking] = useState(false);\n\n  let amount = parseValue(value, 18);\n\n  const getError = () => {\n    if (!amount) {\n      return t`Enter an amount`;\n    }\n    if (amount.gt(maxAmount)) {\n      return t`Max amount exceeded`;\n    }\n  };\n\n  const onClickPrimary = () => {\n    setIsUnstaking(true);\n    const contract = new ethers.Contract(farmAddress, YieldFarm.abi, library.getSigner());\n    contract\n      .unstake(amount)\n      .then(async (res) => {\n        const txUrl = getExplorerUrl(CHAIN_ID) + \"tx/\" + res.hash;\n        helperToast.success(\n          <div>\n            <Trans>\n              Unstake submitted! <ExternalLink href={txUrl}>View status.</ExternalLink>\n            </Trans>\n            <br />\n          </div>\n        );\n        setIsVisible(false);\n      })\n      .catch((e) => {\n        // eslint-disable-next-line no-console\n        console.error(e);\n        helperToast.error(t`Unstake failed`);\n      })\n      .finally(() => {\n        setIsUnstaking(false);\n      });\n  };\n\n  const isPrimaryEnabled = () => {\n    const error = getError();\n    if (error) {\n      return false;\n    }\n    if (isUnstaking) {\n      return false;\n    }\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    const error = getError();\n    if (error) {\n      return error;\n    }\n    if (isUnstaking) {\n      return t`Unstaking...`;\n    }\n    return t`Unstake`;\n  };\n\n  return (\n    <div className=\"StakeModal\">\n      <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={title}>\n        <div className=\"Exchange-swap-section\">\n          <div className=\"Exchange-swap-section-top\">\n            <div className=\"muted\">\n              <div className=\"Exchange-swap-usd\">\n                <Trans>Unstake</Trans>\n              </div>\n            </div>\n            <div className=\"muted align-right clickable\" onClick={() => setValue(formatAmountFree(maxAmount, 18, 18))}>\n              <Trans>Max: {formatAmount(maxAmount, 18, 4, true)}</Trans>\n            </div>\n          </div>\n          <div className=\"Exchange-swap-section-bottom\">\n            <div>\n              <input\n                type=\"number\"\n                placeholder=\"0.0\"\n                className=\"Exchange-swap-input\"\n                value={value}\n                onChange={(e) => setValue(e.target.value)}\n              />\n            </div>\n            <div className=\"PositionEditor-token-symbol\">{stakingTokenSymbol}</div>\n          </div>\n        </div>\n        <div className=\"Exchange-swap-button-container\">\n          <button className=\"App-cta Exchange-swap-button\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n            {getPrimaryText()}\n          </button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nexport default function StakeV1() {\n  const { chainId } = useChainId();\n  const [isStakeModalVisible, setIsStakeModalVisible] = useState(false);\n  const [stakeModalTitle, setStakeModalTitle] = useState(\"\");\n  const [stakeModalMaxAmount, setStakeModalMaxAmount] = useState(undefined);\n  const [stakeValue, setStakeValue] = useState(\"\");\n  const [stakingTokenAddress, setStakingTokenAddress] = useState(\"\");\n  const [stakingFarmAddress, setStakingFarmAddress] = useState(\"\");\n\n  const [isUnstakeModalVisible, setIsUnstakeModalVisible] = useState(false);\n  const [unstakeModalTitle, setUnstakeModalTitle] = useState(\"\");\n  const [unstakeModalMaxAmount, setUnstakeModalMaxAmount] = useState(undefined);\n  const [unstakeValue, setUnstakeValue] = useState(\"\");\n  const [unstakingFarmAddress, setUnstakingFarmAddress] = useState(\"\");\n\n  const { activate, active, account, library, deactivate } = useWeb3React();\n  const connectWallet = getInjectedHandler(activate, deactivate);\n\n  const readerAddress = getContract(CHAIN_ID, \"Reader\");\n  const ammFactoryAddressV2 = getContract(CHAIN_ID, \"AmmFactoryV2\");\n  const usdgAddress = getContract(CHAIN_ID, \"USDG\");\n  const gmtAddress = getContract(CHAIN_ID, \"GMT\");\n  const xgmtAddress = getContract(CHAIN_ID, \"XGMT\");\n  const autoAddress = getContract(CHAIN_ID, \"AUTO\");\n  const nativeTokenAddress = getContract(CHAIN_ID, \"NATIVE_TOKEN\");\n  const busdAddress = getTokenBySymbol(CHAIN_ID, \"BUSD\").address;\n\n  const gmtUsdgPairAddress = getContract(CHAIN_ID, \"GMT_USDG_PAIR\");\n  const xgmtUsdgPairAddress = getContract(CHAIN_ID, \"XGMT_USDG_PAIR\");\n  const autoUsdgPairAddress = getContract(CHAIN_ID, \"AUTO_USDG_PAIR\");\n  const gmtUsdgFarmAddress = getContract(CHAIN_ID, \"GMT_USDG_FARM\");\n  const xgmtUsdgFarmAddress = getContract(CHAIN_ID, \"XGMT_USDG_FARM\");\n  const autoUsdgFarmAddress = getContract(CHAIN_ID, \"AUTO_USDG_FARM\");\n\n  const usdgYieldTracker = getContract(CHAIN_ID, \"USDG_YIELD_TRACKER\");\n  const xgmtYieldTracker = getContract(CHAIN_ID, \"XGMT_YIELD_TRACKER\");\n  const gmtUsdgFarmTrackerXgmt = getContract(CHAIN_ID, \"GMT_USDG_FARM_TRACKER_XGMT\");\n  const gmtUsdgFarmTrackerNative = getContract(CHAIN_ID, \"GMT_USDG_FARM_TRACKER_NATIVE\");\n  const xgmtUsdgFarmTrackerXgmt = getContract(CHAIN_ID, \"XGMT_USDG_FARM_TRACKER_XGMT\");\n  const xgmtUsdgFarmTrackerNative = getContract(CHAIN_ID, \"XGMT_USDG_FARM_TRACKER_NATIVE\");\n  const autoUsdgFarmTrackerXgmt = getContract(CHAIN_ID, \"AUTO_USDG_FARM_TRACKER_XGMT\");\n  const autoUsdgFarmTrackerNative = getContract(CHAIN_ID, \"AUTO_USDG_FARM_TRACKER_NATIVE\");\n\n  const tokens = [\n    usdgAddress,\n    gmtAddress,\n    xgmtAddress,\n    gmtUsdgPairAddress,\n    xgmtUsdgPairAddress,\n    gmtUsdgFarmAddress,\n    xgmtUsdgFarmAddress,\n    autoUsdgPairAddress,\n    autoUsdgFarmAddress,\n  ];\n\n  const yieldTrackers = [\n    usdgYieldTracker,\n    xgmtYieldTracker,\n    gmtUsdgFarmTrackerXgmt,\n    gmtUsdgFarmTrackerNative,\n    xgmtUsdgFarmTrackerXgmt,\n    xgmtUsdgFarmTrackerNative,\n    autoUsdgFarmTrackerXgmt,\n    autoUsdgFarmTrackerNative,\n  ];\n\n  const pairTokens = [\n    gmtAddress,\n    usdgAddress,\n    xgmtAddress,\n    usdgAddress,\n    nativeTokenAddress,\n    busdAddress,\n    autoAddress,\n    usdgAddress,\n  ];\n\n  const yieldTokens = [usdgAddress, xgmtAddress];\n\n  const { data: xgmtSupply, mutate: updateXgmtSupply } = useSWR(\n    [active, chainId, readerAddress, \"getTokenSupply\", xgmtAddress],\n    {\n      fetcher: contractFetcher(library, Reader, [XGMT_EXCLUDED_ACCOUNTS]),\n    }\n  );\n\n  const { data: balances, mutate: updateBalances } = useSWR(\n    [\"Stake:balances\", chainId, readerAddress, \"getTokenBalancesWithSupplies\", account || AddressZero],\n    {\n      fetcher: contractFetcher(library, Reader, [tokens]),\n    }\n  );\n\n  const { data: stakingInfo, mutate: updateStakingInfo } = useSWR(\n    [active, chainId, readerAddress, \"getStakingInfo\", account || AddressZero],\n    {\n      fetcher: contractFetcher(library, Reader, [yieldTrackers]),\n    }\n  );\n\n  const { data: totalStakedInfo, mutate: updateTotalStakedInfo } = useSWR(\n    [active, chainId, readerAddress, \"getTotalStaked\"],\n    {\n      fetcher: contractFetcher(library, Reader, [yieldTokens]),\n    }\n  );\n\n  const { data: pairInfo, mutate: updatePairInfo } = useSWR(\n    [active, chainId, readerAddress, \"getPairInfo\", ammFactoryAddressV2],\n    {\n      fetcher: contractFetcher(library, Reader, [pairTokens]),\n    }\n  );\n\n  const { balanceData, supplyData } = getBalanceAndSupplyData(balances);\n  const stakingData = getStakingData(stakingInfo);\n  const pairData = getPairData(pairInfo);\n  const totalStakedData = getTotalStakedData(totalStakedInfo);\n\n  const processedData = getProcessedData(balanceData, supplyData, stakingData, totalStakedData, pairData, xgmtSupply);\n\n  const buyXgmtUrl = `https://exchange.pancakeswap.finance/#/swap?outputCurrency=${xgmtAddress}&inputCurrency=${usdgAddress}`;\n  const buyGmtUrl = `https://exchange.pancakeswap.finance/#/swap?outputCurrency=${gmtAddress}&inputCurrency=${usdgAddress}`;\n\n  const addGmtUsdgLpUrl = `https://exchange.pancakeswap.finance/#/add/${gmtAddress}/${usdgAddress}`;\n  const addXgmtUsdgLpUrl = `https://exchange.pancakeswap.finance/#/add/${xgmtAddress}/${usdgAddress}`;\n\n  const buyAutoUrl = `https://exchange.pancakeswap.finance/#/swap?outputCurrency=${autoAddress}&inputCurrency=${nativeTokenAddress}`;\n  const addAutoUsdgLpUrl = `https://exchange.pancakeswap.finance/#/add/${autoAddress}/${usdgAddress}`;\n\n  useEffect(() => {\n    if (active) {\n      library.on(\"block\", () => {\n        updateXgmtSupply(undefined, true);\n        updateBalances(undefined, true);\n        updateStakingInfo(undefined, true);\n        updateTotalStakedInfo(undefined, true);\n        updatePairInfo(undefined, true);\n      });\n      return () => {\n        library.removeAllListeners(\"block\");\n      };\n    }\n  }, [active, library, updateXgmtSupply, updateBalances, updateStakingInfo, updateTotalStakedInfo, updatePairInfo]);\n\n  const claim = (farmAddress, rewards) => {\n    if (!active || !account) {\n      helperToast.error(t`Wallet not yet connected`);\n      return;\n    }\n    if (chainId !== CHAIN_ID) {\n      helperToast.error(t`Incorrect Network`);\n      return;\n    }\n    if (!rewards || rewards.eq(0)) {\n      helperToast.error(t`No rewards to claim yet`);\n      return;\n    }\n\n    const contract = new ethers.Contract(farmAddress, YieldToken.abi, library.getSigner());\n    contract\n      .claim(account)\n      .then(async (res) => {\n        const txUrl = getExplorerUrl(CHAIN_ID) + \"tx/\" + res.hash;\n        helperToast.success(\n          <div>\n            <Trans>\n              Claim submitted! <ExternalLink href={txUrl}>View status.</ExternalLink>\n            </Trans>\n            <br />\n          </div>\n        );\n      })\n      .catch((e) => {\n        // eslint-disable-next-line no-console\n        console.error(e);\n        helperToast.error(t`Claim failed`);\n      });\n  };\n\n  const showUnstakeGmtUsdgModal = () => {\n    setIsUnstakeModalVisible(true);\n    setUnstakeModalTitle(\"Unstake GMT-USDG\");\n    setUnstakeModalMaxAmount(processedData.gmtUsdgFarmBalance);\n    setUnstakeValue(\"\");\n    setUnstakingFarmAddress(gmtUsdgFarmAddress);\n  };\n\n  const showUnstakeXgmtUsdgModal = () => {\n    setIsUnstakeModalVisible(true);\n    setUnstakeModalTitle(\"Unstake xGMT-USDG\");\n    setUnstakeModalMaxAmount(processedData.xgmtUsdgFarmBalance);\n    setUnstakeValue(\"\");\n    setUnstakingFarmAddress(xgmtUsdgFarmAddress);\n  };\n\n  const showStakeAutoUsdgModal = () => {\n    setIsStakeModalVisible(true);\n    setStakeModalTitle(\"Stake AUTO-USDG\");\n    setStakeModalMaxAmount(processedData.autoUsdgBalance);\n    setStakeValue(\"\");\n    setStakingTokenAddress(autoUsdgPairAddress);\n    setStakingFarmAddress(autoUsdgFarmAddress);\n  };\n\n  const showUnstakeAutoUsdgModal = () => {\n    setIsUnstakeModalVisible(true);\n    setUnstakeModalTitle(\"Unstake AUTO-USDG\");\n    setUnstakeModalMaxAmount(processedData.autoUsdgFarmBalance);\n    setUnstakeValue(\"\");\n    setUnstakingFarmAddress(autoUsdgFarmAddress);\n  };\n\n  const hasFeeDistribution = true;\n\n  return (\n    <div className=\"Stake Page page-layout\">\n      <StakeModal\n        isVisible={isStakeModalVisible}\n        setIsVisible={setIsStakeModalVisible}\n        title={stakeModalTitle}\n        maxAmount={stakeModalMaxAmount}\n        value={stakeValue}\n        setValue={setStakeValue}\n        active={active}\n        account={account}\n        library={library}\n        stakingTokenAddress={stakingTokenAddress}\n        farmAddress={stakingFarmAddress}\n      />\n      <UnstakeModal\n        isVisible={isUnstakeModalVisible}\n        setIsVisible={setIsUnstakeModalVisible}\n        title={unstakeModalTitle}\n        maxAmount={unstakeModalMaxAmount}\n        value={unstakeValue}\n        setValue={setUnstakeValue}\n        active={active}\n        account={account}\n        library={library}\n        farmAddress={unstakingFarmAddress}\n      />\n      <div className=\"Stake-title App-hero\">\n        <div className=\"Stake-title-primary App-hero-primary\">\n          ${formatKeyAmount(processedData, \"totalStakedUsd\", 30, 0, true)}\n        </div>\n        <div className=\"Stake-title-secondary\">\n          <Trans>Total Assets Staked</Trans>\n        </div>\n      </div>\n      <div className=\"Stake-note\">\n        <Trans>\n          The Gambit protocol is in beta, please read the&nbsp;\n          <ExternalLink href=\"https://gambit.gitbook.io/gambit/staking\">staking details</ExternalLink>\n          &nbsp; before participating.\n        </Trans>\n      </div>\n      <div className=\"App-warning Stake-warning\">\n        <Trans>\n          The <Link to=\"/migrate\">GMX migration</Link> is in progress, please migrate your GMT, xGMT, GMT-USDG and\n          xGMT-USDG tokens.\n          <br />\n          USDG tokens will continue to function as before and do not need to be migrated.\n        </Trans>\n      </div>\n      <div className=\"Stake-cards\">\n        <div className=\"App-card primary\">\n          <div className=\"Stake-card-title App-card-title\">USDG</div>\n          <div className=\"Stake-card-bottom App-card-content\">\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>APR</Trans>\n              </div>\n              <div>\n                {!hasFeeDistribution && \"TBC\"}\n                {hasFeeDistribution && `${formatKeyAmount(processedData, \"usdgApr\", 2, 2, true)}%`}\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Staked</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"usdgBalance\", 18, 2, true)} ($\n                {formatKeyAmount(processedData, \"usdgBalance\", 18, 2, true)})\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Wallet</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"usdgBalance\", 18, 2, true)} ($\n                {formatKeyAmount(processedData, \"usdgBalance\", 18, 2, true)})\n              </div>\n            </div>\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Rewards</Trans>\n              </div>\n              <div>\n                {!hasFeeDistribution && \"TBC\"}\n                {hasFeeDistribution && `${formatKeyAmount(processedData, \"usdgRewards\", 18, 8, true)} WBNB`}\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Total Staked</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"usdgTotalStaked\", 18, 2, true)} ($\n                {formatKeyAmount(processedData, \"usdgTotalStakedUsd\", 30, 2, true)})\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Total Supply</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"usdgSupply\", 18, 2, true)} ($\n                {formatKeyAmount(processedData, \"usdgSupplyUsd\", 30, 2, true)})\n              </div>\n            </div>\n            <div className=\"App-card-options\">\n              <Link className=\"App-button-option App-card-option\" to=\"/trade\">\n                Get USDG\n              </Link>\n              {active && (\n                <button\n                  className=\"App-button-option App-card-option\"\n                  onClick={() => claim(usdgAddress, processedData.usdgRewards)}\n                >\n                  <Trans>Claim</Trans>\n                </button>\n              )}\n              {!active && (\n                <button className=\"App-button-option App-card-option\" onClick={connectWallet}>\n                  <Trans>Connect Wallet</Trans>\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n        <div className=\"App-card\">\n          <div className=\"Stake-card-title App-card-title\">xGMT</div>\n          <div className=\"Stake-card-bottom App-card-content\">\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">APR</div>\n              <div>\n                0.00% (\n                <Link to=\"/migrate\">\n                  <Trans>Migrate</Trans>\n                </Link>\n                )\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Staked</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"xgmtBalance\", 18, 2, true)} ($\n                {formatKeyAmount(processedData, \"xgmtBalanceUsd\", USD_DECIMALS, 2, true)})\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Wallet</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"xgmtBalance\", 18, 2, true)} ($\n                {formatKeyAmount(processedData, \"xgmtBalanceUsd\", USD_DECIMALS, 2, true)})\n              </div>\n            </div>\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Rewards</Trans>\n              </div>\n              <div>\n                {!hasFeeDistribution && \"TBC\"}\n                {hasFeeDistribution && `${formatKeyAmount(processedData, \"xgmtRewards\", 18, 8, true)} WBNB`}\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Total Staked</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"xgmtTotalStaked\", 18, 2, true)} ($\n                {formatKeyAmount(processedData, \"xgmtTotalStakedUsd\", USD_DECIMALS, 2, true)})\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Total Supply</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"xgmtSupply\", 18, 2, true)} ($\n                {formatKeyAmount(processedData, \"xgmtSupplyUsd\", USD_DECIMALS, 2, true)})\n              </div>\n            </div>\n            <div className=\"App-card-options\">\n              <ExternalLink className=\"App-button-option App-card-option\" href={buyXgmtUrl}>\n                Get xGMT\n              </ExternalLink>\n              {active && (\n                <button\n                  className=\"App-button-option App-card-option\"\n                  onClick={() => claim(xgmtAddress, processedData.xgmtRewards)}\n                >\n                  <Trans>Claim</Trans>\n                </button>\n              )}\n              {!active && (\n                <button className=\"App-button-option App-card-option\" onClick={connectWallet}>\n                  <Trans>Connect Wallet</Trans>\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n        <div className=\"App-card\">\n          <div className=\"Stake-card-title App-card-title\">GMT-USDG LP</div>\n          <div className=\"Stake-card-bottom App-card-content\">\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>APR</Trans>\n              </div>\n              <div>\n                0.00% (\n                <Link to=\"/migrate\">\n                  <Trans>Migrate</Trans>\n                </Link>\n                )\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Staked</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"gmtUsdgStaked\", 18, 4, true)} ($\n                {formatKeyAmount(processedData, \"gmtUsdgStakedUsd\", 30, 2, true)})\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Wallet</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"gmtUsdgBalance\", 18, 2, true)} ($\n                {formatKeyAmount(processedData, \"gmtUsdgBalanceUsd\", USD_DECIMALS, 2, true)})\n              </div>\n            </div>\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Rewards</Trans>\n              </div>\n              <div>\n                {hasFeeDistribution &&\n                  processedData.gmtUsdgNativeRewards &&\n                  processedData.gmtUsdgNativeRewards.gt(0) &&\n                  `${formatKeyAmount(processedData, \"gmtUsdgNativeRewards\", 18, 8, true)} WBNB, `}\n                {formatKeyAmount(processedData, \"gmtUsdgXgmtRewards\", 18, 4, true)} xGMT\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Total Staked</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"gmtUsdgTotalStaked\", 18, 4, true)} ($\n                {formatKeyAmount(processedData, \"gmtUsdgTotalStakedUsd\", 30, 2, true)})\n              </div>\n            </div>\n            <div className=\"App-card-options\">\n              <ExternalLink className=\"App-button-option App-card-option\" href={buyGmtUrl}>\n                Get GMT\n              </ExternalLink>\n              <ExternalLink className=\"App-button-option App-card-option\" href={addGmtUsdgLpUrl}>\n                <Trans>Create</Trans>\n              </ExternalLink>\n              {active && (\n                <button className=\"App-button-option App-card-option\" onClick={() => showUnstakeGmtUsdgModal()}>\n                  <Trans>Unstake</Trans>\n                </button>\n              )}\n              {active && (\n                <button\n                  className=\"App-button-option App-card-option\"\n                  onClick={() => claim(gmtUsdgFarmAddress, processedData.gmtUsdgTotalRewards)}\n                >\n                  <Trans>Claim</Trans>\n                </button>\n              )}\n              {!active && (\n                <button className=\"App-button-option App-card-option\" onClick={connectWallet}>\n                  <Trans>Connect Wallet</Trans>\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n        <div className=\"App-card\">\n          <div className=\"Stake-card-title App-card-title\">xGMT-USDG LP</div>\n          <div className=\"Stake-card-bottom App-card-content\">\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>APR</Trans>\n              </div>\n              <div>\n                0.00% (\n                <Link to=\"/migrate\">\n                  <Trans>Migrate</Trans>\n                </Link>\n                )\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Staked</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"xgmtUsdgStaked\", 18, 4, true)} ($\n                {formatKeyAmount(processedData, \"xgmtUsdgStakedUsd\", 30, 2, true)})\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Wallet</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"xgmtUsdgBalance\", 18, 2, true)} ($\n                {formatKeyAmount(processedData, \"xgmtUsdgBalanceUsd\", USD_DECIMALS, 2, true)})\n              </div>\n            </div>\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Rewards</Trans>\n              </div>\n              <div>\n                {hasFeeDistribution &&\n                  processedData.xgmtUsdgNativeRewards &&\n                  processedData.xgmtUsdgNativeRewards.gt(0) &&\n                  `${formatKeyAmount(processedData, \"xgmtUsdgNativeRewards\", 18, 8, true)} WBNB, `}\n                {formatKeyAmount(processedData, \"xgmtUsdgXgmtRewards\", 18, 4, true)} xGMT\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Total Staked</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"xgmtUsdgTotalStaked\", 18, 4, true)} ($\n                {formatKeyAmount(processedData, \"xgmtUsdgTotalStakedUsd\", 30, 2, true)})\n              </div>\n            </div>\n            <div className=\"App-card-options\">\n              <ExternalLink className=\"App-button-option App-card-option\" href={buyXgmtUrl}>\n                Get xGMT\n              </ExternalLink>\n              <ExternalLink className=\"App-button-option App-card-option\" href={addXgmtUsdgLpUrl}>\n                <Trans>Create</Trans>\n              </ExternalLink>\n              {active && (\n                <button className=\"App-button-option App-card-option\" onClick={() => showUnstakeXgmtUsdgModal()}>\n                  <Trans>Unstake</Trans>\n                </button>\n              )}\n              {active && (\n                <button\n                  className=\"App-button-option App-card-option\"\n                  onClick={() => claim(xgmtUsdgFarmAddress, processedData.xgmtUsdgTotalRewards)}\n                >\n                  <Trans>Claim</Trans>\n                </button>\n              )}\n              {!active && (\n                <button className=\"App-button-option App-card-option\" onClick={connectWallet}>\n                  <Trans>Connect Wallet</Trans>\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n        <div className=\"App-card\">\n          <div className=\"Stake-card-title App-card-title\">AUTO-USDG LP</div>\n          <div className=\"Stake-card-bottom App-card-content\">\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>APR</Trans>\n              </div>\n              <div>{formatKeyAmount(processedData, \"autoUsdgApr\", 2, 2, true)}%</div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Staked</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"autoUsdgStaked\", 18, 4, true)} ($\n                {formatKeyAmount(processedData, \"autoUsdgStakedUsd\", 30, 2, true)})\n              </div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Wallet</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"autoUsdgBalance\", 18, 2, true)} ($\n                {formatKeyAmount(processedData, \"autoUsdgBalanceUsd\", USD_DECIMALS, 2, true)})\n              </div>\n            </div>\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Rewards</Trans>\n              </div>\n              <div>{formatKeyAmount(processedData, \"autoUsdgXgmtRewards\", 18, 4, true)} xGMT</div>\n            </div>\n            <div className=\"Stake-info App-card-row\">\n              <div className=\"label\">\n                <Trans>Total Staked</Trans>\n              </div>\n              <div>\n                {formatKeyAmount(processedData, \"autoUsdgTotalStaked\", 18, 4, true)} ($\n                {formatKeyAmount(processedData, \"autoUsdgTotalStakedUsd\", 30, 2, true)})\n              </div>\n            </div>\n            <div className=\"App-card-options\">\n              <ExternalLink className=\"App-button-option App-card-option\" href={buyAutoUrl}>\n                Get AUTO\n              </ExternalLink>\n              <ExternalLink className=\"App-button-option App-card-option\" href={addAutoUsdgLpUrl}>\n                <Trans>Create</Trans>\n              </ExternalLink>\n              {active && (\n                <button className=\"App-button-option App-card-option\" onClick={() => showStakeAutoUsdgModal()}>\n                  <Trans>Stake</Trans>\n                </button>\n              )}\n              {active && (\n                <button className=\"App-button-option App-card-option\" onClick={() => showUnstakeAutoUsdgModal()}>\n                  <Trans>Unstake</Trans>\n                </button>\n              )}\n              {active && (\n                <button\n                  className=\"App-button-option App-card-option\"\n                  onClick={() => claim(autoUsdgFarmAddress, processedData.autoUsdgTotalRewards)}\n                >\n                  <Trans>Claim</Trans>\n                </button>\n              )}\n              {!active && (\n                <button className=\"App-button-option App-card-option\" onClick={connectWallet}>\n                  <Trans>Connect Wallet</Trans>\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n      <Footer />\n    </div>\n  );\n}\n","import { t, Trans } from \"@lingui/macro\";\nimport StatsTooltipRow from \"components/StatsTooltip/StatsTooltipRow\";\nimport { BigNumber } from \"ethers\";\nimport { formatKeyAmount } from \"lib/numbers\";\n\ntype Props = {\n  processedData: {\n    gmxAprForEsGmx: BigNumber;\n    gmxAprForNativeToken: BigNumber;\n    gmxAprForNativeTokenWithBoost: BigNumber;\n    gmxBoostAprForNativeToken?: BigNumber;\n  };\n  nativeTokenSymbol: string;\n};\n\nfunction renderEscrowedGMXApr(processedData) {\n  if (!processedData?.gmxAprForEsGmx?.gt(0)) return;\n  return (\n    <StatsTooltipRow\n      label={t`Escrowed GMX APR`}\n      showDollar={false}\n      value={`${formatKeyAmount(processedData, \"gmxAprForEsGmx\", 2, 2, true)}%`}\n    />\n  );\n}\n\nexport default function GMXAprTooltip({ processedData, nativeTokenSymbol }: Props) {\n  return (\n    <>\n      {(!processedData.gmxBoostAprForNativeToken || processedData.gmxBoostAprForNativeToken.eq(0)) && (\n        <StatsTooltipRow\n          label={t`${nativeTokenSymbol} APR`}\n          showDollar={false}\n          value={`${formatKeyAmount(processedData, \"gmxAprForNativeToken\", 2, 2, true)}%`}\n        />\n      )}\n      {processedData?.gmxBoostAprForNativeToken?.gt(0) ? (\n        <div>\n          <StatsTooltipRow\n            label={t`${nativeTokenSymbol} Base APR`}\n            showDollar={false}\n            value={`${formatKeyAmount(processedData, \"gmxAprForNativeToken\", 2, 2, true)}%`}\n          />\n          <StatsTooltipRow\n            label={t`${nativeTokenSymbol} Boosted APR`}\n            showDollar={false}\n            value={`${formatKeyAmount(processedData, \"gmxBoostAprForNativeToken\", 2, 2, true)}%`}\n          />\n          <div className=\"Tooltip-divider\" />\n          <StatsTooltipRow\n            label={t`${nativeTokenSymbol} Total APR`}\n            showDollar={false}\n            value={`${formatKeyAmount(processedData, \"gmxAprForNativeTokenWithBoost\", 2, 2, true)}%`}\n          />\n          <br />\n          {renderEscrowedGMXApr(processedData)}\n          <br />\n          <Trans>The Boosted APR is from your staked Multiplier Points.</Trans>\n        </div>\n      ) : (\n        renderEscrowedGMXApr(processedData)\n      )}\n      <div>\n        <br />\n        <Trans>APRs are updated weekly on Wednesday and will depend on the fees collected for the week.</Trans>\n      </div>\n    </>\n  );\n}\n","import { Menu } from \"@headlessui/react\";\nimport cx from \"classnames\";\nimport { FaChevronDown } from \"react-icons/fa\";\n\nimport \"./Dropdown.scss\";\n\nexport type DropdownOption = {\n  label: string;\n  value: any;\n};\n\nexport type Props = {\n  selectedOption?: DropdownOption;\n  placeholder?: string;\n  options: DropdownOption[];\n  className?: string;\n  onSelect: (option: DropdownOption) => void;\n  disabled?: boolean;\n};\n\nexport function Dropdown(p: Props) {\n  return (\n    <div className={cx(\"Dropdown-root\", { disabled: p.disabled }, p.className)}>\n      <Menu>\n        <Menu.Button as=\"div\" aria-disabled={p.disabled}>\n          <button className=\"Dropdown-current\">\n            <span className=\"Dropdown-current-label\">{p.selectedOption?.label || p.placeholder}</span>\n            <FaChevronDown className=\"Dropdown-current-arrow\" />\n          </button>\n        </Menu.Button>\n        <Menu.Items as=\"div\" className=\"Dropdown-options menu-items\">\n          {p.options.map((option) => (\n            <Menu.Item key={option.label}>\n              <div\n                className={cx(\"Dropdown-option\", { selected: p.selectedOption?.value === option.value })}\n                onClick={() => p.onSelect(option)}\n              >\n                {option.label}\n              </div>\n            </Menu.Item>\n          ))}\n        </Menu.Items>\n      </Menu>\n    </div>\n  );\n}\n","import { t, Trans } from \"@lingui/macro\";\nimport cx from \"classnames\";\nimport ExchangeInfoRow from \"components/Exchange/ExchangeInfoRow\";\nimport StatsTooltipRow from \"components/StatsTooltip/StatsTooltipRow\";\nimport Tooltip from \"components/Tooltip/Tooltip\";\nimport { ExecutionFee, FeeItem } from \"domain/synthetics/fees\";\nimport { formatDeltaUsd, formatTokenAmountWithUsd } from \"lib/numbers\";\nimport \"./GmFees.scss\";\n\ntype Props = {\n  totalFees?: FeeItem;\n  swapFee?: FeeItem;\n  swapPriceImpact?: FeeItem;\n  executionFee?: ExecutionFee;\n};\n\nexport function GmFees(p: Props) {\n  const totalFeesUsd = p.totalFees?.deltaUsd.sub(p.executionFee?.feeUsd || 0);\n\n  return (\n    <ExchangeInfoRow\n      label={<Trans>Fees and price impact</Trans>}\n      value={\n        <>\n          {!p.totalFees?.deltaUsd && \"-\"}\n          {p.totalFees?.deltaUsd && (\n            <Tooltip\n              className=\"GmFees-tooltip\"\n              handle={<span className={cx({ positive: totalFeesUsd?.gt(0) })}>{formatDeltaUsd(totalFeesUsd)}</span>}\n              position=\"right-top\"\n              renderContent={() => (\n                <div>\n                  {p.swapPriceImpact?.deltaUsd.abs().gt(0) && (\n                    <StatsTooltipRow\n                      className=\"GmFees-fee-row\"\n                      label={t`Swap price impact`}\n                      value={formatDeltaUsd(p.swapPriceImpact.deltaUsd, p.swapPriceImpact.bps)!}\n                      showDollar={false}\n                    />\n                  )}\n\n                  {p.swapFee && (\n                    <>\n                      <StatsTooltipRow\n                        className=\"GmFees-fee-row\"\n                        label={t`Swap Fee`}\n                        value={formatDeltaUsd(p.swapFee.deltaUsd, p.swapFee.bps)!}\n                        showDollar={false}\n                      />\n                    </>\n                  )}\n\n                  {p.executionFee && (\n                    <StatsTooltipRow\n                      className=\"GmFees-fee-row\"\n                      label={t`Execution Fee`}\n                      value={formatTokenAmountWithUsd(\n                        p.executionFee.feeTokenAmount,\n                        p.executionFee.feeUsd,\n                        p.executionFee.feeToken.symbol,\n                        p.executionFee.feeToken.decimals\n                      )}\n                      showDollar={false}\n                    />\n                  )}\n                </div>\n              )}\n            />\n          )}\n        </>\n      }\n    />\n  );\n}\n","import {\n  VirtualInventoryForSwapsData,\n  applySwapImpactWithCap,\n  getNextPoolAmountsParams,\n  getPriceImpactUsd,\n} from \"domain/synthetics/fees\";\nimport { MarketInfo } from \"domain/synthetics/markets\";\nimport { TokenData, convertToTokenAmount, convertToUsd, getMidPrice } from \"domain/synthetics/tokens\";\nimport { BigNumber } from \"ethers\";\nimport { applyFactor } from \"lib/numbers\";\nimport { DepositAmounts } from \"../types\";\n\nexport function getNextDepositAmountsByCollaterals(p: {\n  marketInfo: MarketInfo;\n  marketToken: TokenData;\n  longTokenAmount?: BigNumber;\n  shortTokenAmount?: BigNumber;\n  virtualInventoryForSwaps: VirtualInventoryForSwapsData;\n}): DepositAmounts | undefined {\n  const { marketToken, longTokenAmount, shortTokenAmount, marketInfo, virtualInventoryForSwaps } = p;\n  const { longToken, shortToken } = marketInfo;\n\n  if (!longToken.prices || !shortToken.prices || !marketToken.prices) {\n    return undefined;\n  }\n\n  let longTokenUsd =\n    convertToUsd(longTokenAmount, longToken.decimals, getMidPrice(longToken.prices)) || BigNumber.from(0);\n  let shortTokenUsd =\n    convertToUsd(shortTokenAmount, shortToken.decimals, getMidPrice(shortToken.prices)) || BigNumber.from(0);\n\n  const nextPoolAmountParams = getNextPoolAmountsParams({\n    marketInfo,\n    longToken,\n    shortToken,\n    longPoolAmount: marketInfo.longPoolAmount,\n    shortPoolAmount: marketInfo.shortPoolAmount,\n    longDeltaUsd: longTokenUsd,\n    shortDeltaUsd: shortTokenUsd,\n  });\n\n  let totalPriceImpactDeltaUsd = getPriceImpactUsd({\n    currentLongUsd: nextPoolAmountParams.longPoolUsd,\n    currentShortUsd: nextPoolAmountParams.shortPoolUsd,\n    nextLongUsd: nextPoolAmountParams.nextLongPoolUsd,\n    nextShortUsd: nextPoolAmountParams.nextShortPoolUsd,\n    factorPositive: marketInfo.swapImpactFactorPositive,\n    factorNegative: marketInfo.swapImpactFactorNegative,\n    exponentFactor: marketInfo.swapImpactExponentFactor,\n  });\n\n  if (!totalPriceImpactDeltaUsd) {\n    return undefined;\n  }\n\n  const virtualInventoryLong = virtualInventoryForSwaps?.[marketInfo.marketTokenAddress]?.[marketInfo.longTokenAddress];\n  const virtualInventoryShort =\n    virtualInventoryForSwaps?.[marketInfo.marketTokenAddress]?.[marketInfo.shortTokenAddress];\n\n  if (virtualInventoryLong && virtualInventoryShort) {\n    const virtualInventoryParams = getNextPoolAmountsParams({\n      marketInfo,\n      longToken,\n      shortToken,\n      longPoolAmount: virtualInventoryLong,\n      shortPoolAmount: virtualInventoryShort,\n      longDeltaUsd: longTokenUsd,\n      shortDeltaUsd: shortTokenUsd,\n    });\n\n    const virtualInventoryPriceImpactDeltaUsd = getPriceImpactUsd({\n      currentLongUsd: virtualInventoryParams.longPoolUsd,\n      currentShortUsd: virtualInventoryParams.shortPoolUsd,\n      nextLongUsd: virtualInventoryParams.nextLongPoolUsd,\n      nextShortUsd: virtualInventoryParams.nextShortPoolUsd,\n      factorPositive: marketInfo.swapImpactFactorPositive,\n      factorNegative: marketInfo.swapImpactFactorNegative,\n      exponentFactor: marketInfo.swapImpactExponentFactor,\n    });\n\n    if (virtualInventoryPriceImpactDeltaUsd && virtualInventoryPriceImpactDeltaUsd.lt(totalPriceImpactDeltaUsd)) {\n      totalPriceImpactDeltaUsd = virtualInventoryPriceImpactDeltaUsd;\n    }\n  }\n\n  if (!totalPriceImpactDeltaUsd) {\n    return undefined;\n  }\n\n  let marketTokenAmount = BigNumber.from(0);\n  let marketTokenUsd = BigNumber.from(0);\n  let swapFeeUsd = BigNumber.from(0);\n  let swapPriceImpactDeltaUsd = BigNumber.from(0);\n\n  if (longTokenAmount?.gt(0)) {\n    const amounts = getMarketTokenAmountByCollateralDeposit({\n      marketInfo,\n      marketToken,\n      tokenIn: longToken,\n      tokenOut: shortToken,\n      tokenInAmount: longTokenAmount,\n      priceImpactDeltaUsd: totalPriceImpactDeltaUsd.mul(longTokenUsd).div(longTokenUsd.add(shortTokenUsd)),\n    });\n\n    if (!amounts) {\n      return undefined;\n    }\n\n    marketTokenAmount = marketTokenAmount.add(amounts.marketTokenAmount);\n    marketTokenUsd = marketTokenUsd.add(amounts.marketTokenUsd);\n    swapFeeUsd = swapFeeUsd.add(amounts.swapFeeUsd);\n    swapPriceImpactDeltaUsd = swapPriceImpactDeltaUsd.add(amounts.cappedPriceImpactDeltaUsd);\n  }\n\n  if (shortTokenAmount?.gt(0)) {\n    const amounts = getMarketTokenAmountByCollateralDeposit({\n      marketInfo,\n      marketToken,\n      tokenIn: shortToken,\n      tokenOut: longToken,\n      tokenInAmount: shortTokenAmount,\n      priceImpactDeltaUsd: totalPriceImpactDeltaUsd.mul(shortTokenUsd).div(longTokenUsd.add(shortTokenUsd)),\n    });\n\n    if (!amounts) {\n      return undefined;\n    }\n\n    marketTokenAmount = marketTokenAmount.add(amounts.marketTokenAmount)!;\n    marketTokenUsd = marketTokenUsd.add(amounts.marketTokenUsd)!;\n    swapFeeUsd = swapFeeUsd.add(amounts.swapFeeUsd)!;\n    swapPriceImpactDeltaUsd = swapPriceImpactDeltaUsd.add(amounts.cappedPriceImpactDeltaUsd)!;\n  }\n\n  if (marketTokenAmount.lt(0)) {\n    marketTokenAmount = BigNumber.from(0);\n    marketTokenUsd = BigNumber.from(0);\n  }\n\n  return {\n    longTokenAmount,\n    longTokenUsd,\n    shortTokenAmount,\n    shortTokenUsd,\n    marketTokenAmount,\n    marketTokenUsd,\n    swapFeeUsd,\n    swapPriceImpactDeltaUsd,\n  };\n}\n\nexport function getNextDepositAmountsByMarketToken(p: {\n  marketInfo: MarketInfo;\n  virtualInventoryForSwaps: VirtualInventoryForSwapsData;\n  marketToken: TokenData;\n  marketTokenAmount: BigNumber;\n  includeLongToken?: boolean;\n  includeShortToken?: boolean;\n  previousLongTokenAmount?: BigNumber;\n  previousShortTokenAmount?: BigNumber;\n}): DepositAmounts | undefined {\n  const {\n    marketInfo,\n    marketToken,\n    marketTokenAmount,\n    previousLongTokenAmount,\n    previousShortTokenAmount,\n    includeLongToken,\n    includeShortToken,\n    virtualInventoryForSwaps,\n  } = p;\n\n  const { longToken, shortToken } = marketInfo;\n\n  if (!longToken.prices || !shortToken.prices || !marketToken.prices) {\n    return undefined;\n  }\n\n  const marketTokenUsd = convertToUsd(marketTokenAmount, marketToken.decimals, marketToken.prices.maxPrice)!;\n\n  const previousLongTokenUsd = convertToUsd(previousLongTokenAmount, longToken.decimals, getMidPrice(longToken.prices));\n  const previousShortTokenUsd = convertToUsd(\n    previousShortTokenAmount,\n    shortToken.decimals,\n    getMidPrice(shortToken.prices)\n  );\n\n  const previousSumUsd = BigNumber.from(0)\n    .add(previousLongTokenUsd || 0)\n    .add(previousShortTokenUsd || 0);\n\n  let longTokenUsd = BigNumber.from(0);\n  let shortTokenUsd = BigNumber.from(0);\n\n  if (includeLongToken && includeShortToken && previousSumUsd.gt(0)) {\n    longTokenUsd = marketTokenUsd.mul(previousLongTokenUsd || 0).div(previousSumUsd);\n    shortTokenUsd = marketTokenUsd.sub(longTokenUsd);\n  } else if (includeLongToken) {\n    longTokenUsd = marketTokenUsd;\n  } else if (includeShortToken) {\n    shortTokenUsd = marketTokenUsd;\n  }\n\n  let longTokenAmount = convertToTokenAmount(longTokenUsd, longToken.decimals, getMidPrice(longToken.prices));\n  let shortTokenAmount = convertToTokenAmount(shortTokenUsd, shortToken.decimals, getMidPrice(shortToken.prices));\n\n  const baseAmounts = getNextDepositAmountsByCollaterals({\n    marketInfo,\n    marketToken,\n    longTokenAmount,\n    shortTokenAmount,\n    virtualInventoryForSwaps,\n  })!;\n\n  longTokenUsd = marketTokenUsd.mul(baseAmounts.longTokenUsd!).div(baseAmounts.marketTokenUsd!);\n  shortTokenUsd = marketTokenUsd.mul(baseAmounts.shortTokenUsd!).div(baseAmounts.marketTokenUsd!);\n  longTokenAmount = convertToTokenAmount(longTokenUsd, longToken.decimals, getMidPrice(longToken.prices));\n  shortTokenAmount = convertToTokenAmount(shortTokenUsd, shortToken.decimals, getMidPrice(shortToken.prices));\n\n  return {\n    longTokenAmount,\n    longTokenUsd,\n    shortTokenAmount,\n    shortTokenUsd,\n    marketTokenAmount,\n    marketTokenUsd,\n    swapFeeUsd: baseAmounts.swapFeeUsd,\n    swapPriceImpactDeltaUsd: baseAmounts.swapPriceImpactDeltaUsd,\n  };\n}\n\nexport function getMarketTokenAmountByCollateralDeposit(p: {\n  marketInfo: MarketInfo;\n  marketToken: TokenData;\n  tokenIn: TokenData;\n  tokenOut: TokenData;\n  tokenInAmount: BigNumber;\n  priceImpactDeltaUsd: BigNumber;\n}) {\n  const { marketInfo } = p;\n\n  if (!p.tokenIn.prices || !p.tokenOut.prices || !p.marketToken.prices) {\n    return undefined;\n  }\n\n  let mintAmount = BigNumber.from(0);\n\n  const swapFeeAmount = applyFactor(p.tokenInAmount, marketInfo.swapFeeFactor);\n  const swapFeeUsd = convertToUsd(swapFeeAmount, p.tokenIn.decimals, p.tokenIn.prices.minPrice)!;\n\n  let amountInAfterFees = p.tokenInAmount.sub(swapFeeAmount);\n  let usdInAfterFees = convertToUsd(amountInAfterFees, p.tokenIn.decimals, p.tokenIn.prices.minPrice);\n\n  let cappedPriceImpactDeltaUsd: BigNumber | undefined;\n\n  if (p.priceImpactDeltaUsd.gt(0)) {\n    const positiveImpactAmount = applySwapImpactWithCap(p.marketInfo, p.tokenOut.address, p.priceImpactDeltaUsd)!;\n\n    cappedPriceImpactDeltaUsd = convertToUsd(positiveImpactAmount, p.tokenOut.decimals, p.tokenOut.prices.minPrice)!;\n    mintAmount = mintAmount.add(\n      convertToTokenAmount(cappedPriceImpactDeltaUsd, p.marketToken.decimals, p.marketToken.prices.minPrice)!\n    );\n  } else {\n    const negativeImpactAmount = applySwapImpactWithCap(p.marketInfo, p.tokenIn.address, p.priceImpactDeltaUsd)!;\n\n    cappedPriceImpactDeltaUsd = convertToUsd(negativeImpactAmount, p.tokenIn.decimals, p.tokenIn.prices?.minPrice);\n    amountInAfterFees = amountInAfterFees.sub(negativeImpactAmount.mul(-1));\n    usdInAfterFees = convertToUsd(amountInAfterFees, p.tokenIn.decimals, p.tokenIn.prices?.minPrice);\n  }\n\n  if (!cappedPriceImpactDeltaUsd) {\n    return undefined;\n  }\n\n  mintAmount = mintAmount.add(\n    convertToTokenAmount(usdInAfterFees, p.marketToken.decimals, p.marketToken.prices.minPrice)!\n  );\n\n  const mintUsd = convertToUsd(mintAmount, p.marketToken.decimals, p.marketToken.prices.maxPrice)!;\n\n  return {\n    marketTokenAmount: mintAmount,\n    marketTokenUsd: mintUsd,\n    cappedPriceImpactDeltaUsd,\n    swapFeeUsd,\n  };\n}\n","import { Trans } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { getWrappedToken } from \"config/tokens\";\nimport { approveTokens } from \"domain/tokens\";\nimport { isAddressZero } from \"lib/legacy\";\nimport { useState } from \"react\";\nimport { ImCheckboxUnchecked, ImSpinner2 } from \"react-icons/im\";\n\nimport \"./ApproveTokenButton.scss\";\n\ntype Props = {\n  spenderAddress: string;\n  tokenAddress: string;\n  tokenSymbol: string;\n  isApproved?: boolean;\n};\n\nexport function ApproveTokenButton(p: Props) {\n  const { library, chainId } = useWeb3React();\n  const [isApproving, setIsApproving] = useState(false);\n  const [isApproveSubmitted, setIsApproveSubmitted] = useState(false);\n\n  function onApprove() {\n    if (!chainId || isApproveSubmitted || p.isApproved) return;\n\n    const wrappedToken = getWrappedToken(chainId);\n    const tokenAddress = isAddressZero(p.tokenAddress) ? wrappedToken.address : p.tokenAddress;\n\n    approveTokens({\n      setIsApproving,\n      library,\n      tokenAddress: tokenAddress,\n      spender: p.spenderAddress,\n      pendingTxns: [],\n      setPendingTxns: () => null,\n      infoTokens: {},\n      chainId,\n      onApproveSubmitted: () => setIsApproveSubmitted(true),\n    });\n  }\n\n  const isLoading = isApproving || (isApproveSubmitted && !p.isApproved);\n\n  return (\n    <div className=\"ApproveTokenButton\" onClick={onApprove}>\n      <Trans>Allow {p.tokenSymbol} to be spent</Trans>\n\n      <div className=\"ApproveTokenButton-checkbox\">\n        {isLoading ? (\n          <ImSpinner2 className=\"spin ApproveTokenButton-spin\" />\n        ) : (\n          <ImCheckboxUnchecked className=\"App-icon Checkbox-icon inactive\" />\n        )}\n      </div>\n    </div>\n  );\n}\n","import { Trans, plural, t } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport cx from \"classnames\";\nimport { ApproveTokenButton } from \"components/ApproveTokenButton/ApproveTokenButton\";\nimport Checkbox from \"components/Checkbox/Checkbox\";\nimport Modal from \"components/Modal/Modal\";\nimport { getContract } from \"config/contracts\";\nimport { getToken } from \"config/tokens\";\nimport { ExecutionFee } from \"domain/synthetics/fees\";\nimport { useMarkets } from \"domain/synthetics/markets\";\nimport { createDepositTxn } from \"domain/synthetics/markets/createDepositTxn\";\nimport { createWithdrawalTxn } from \"domain/synthetics/markets/createWithdrawalTxn\";\nimport { getNeedTokenApprove, getTokenData, useAvailableTokensData } from \"domain/synthetics/tokens\";\nimport { TokenData } from \"domain/synthetics/tokens/types\";\nimport { useTokensAllowanceData } from \"domain/synthetics/tokens/useTokenAllowanceData\";\nimport { GmSwapFees } from \"domain/synthetics/trade\";\nimport { BigNumber } from \"ethers\";\nimport { useChainId } from \"lib/chains\";\nimport { formatTokenAmount, formatTokenAmountWithUsd } from \"lib/numbers\";\nimport { getByKey } from \"lib/objects\";\nimport { GmFees } from \"../GmFees/GmFees\";\n\nimport Button from \"components/Button/Button\";\nimport \"./GmConfirmationBox.scss\";\n\ntype Props = {\n  marketToken: TokenData;\n  longToken?: TokenData;\n  shortToken?: TokenData;\n  marketTokenAmount: BigNumber;\n  marketTokenUsd: BigNumber;\n  longTokenAmount?: BigNumber;\n  longTokenUsd?: BigNumber;\n  shortTokenAmount?: BigNumber;\n  shortTokenUsd?: BigNumber;\n  fees: GmSwapFees;\n  error?: string;\n  isDeposit: boolean;\n  executionFee?: ExecutionFee;\n  isHighPriceImpact: boolean;\n  isHighPriceImpactAccepted: boolean;\n  setIsHighPriceImpactAccepted: (value: boolean) => void;\n  onSubmitted: () => void;\n  onClose: () => void;\n  setPendingTxns: (txns: any) => void;\n};\n\nexport function GmConfirmationBox({\n  marketToken,\n  longToken,\n  shortToken,\n  marketTokenAmount,\n  marketTokenUsd,\n  longTokenAmount,\n  longTokenUsd,\n  shortTokenAmount,\n  shortTokenUsd,\n  fees,\n  error,\n  isDeposit,\n  executionFee,\n  onSubmitted,\n  onClose,\n  setPendingTxns,\n  isHighPriceImpact,\n  isHighPriceImpactAccepted,\n  setIsHighPriceImpactAccepted,\n}: Props) {\n  const { library, account } = useWeb3React();\n  const { chainId } = useChainId();\n  const { marketsData } = useMarkets(chainId);\n  const { tokensData } = useAvailableTokensData(chainId);\n\n  const market = getByKey(marketsData, marketToken?.address);\n\n  const routerAddress = getContract(chainId, \"SyntheticsRouter\");\n\n  const payTokenAddresses = (function getPayTokenAddresses() {\n    const addresses: string[] = [];\n\n    if (isDeposit) {\n      if (longTokenAmount?.gt(0) && longToken) {\n        addresses.push(longToken.address);\n      }\n      if (shortTokenAmount?.gt(0) && shortToken) {\n        addresses.push(shortToken.address);\n      }\n    }\n\n    return addresses;\n  })();\n\n  const { tokensAllowanceData } = useTokensAllowanceData(chainId, {\n    spenderAddress: routerAddress,\n    tokenAddresses: payTokenAddresses,\n  });\n\n  const tokensToApprove = (function getTokensToApprove() {\n    const addresses: string[] = [];\n\n    if (!tokensAllowanceData) {\n      return addresses;\n    }\n\n    if (isDeposit) {\n      if (\n        longTokenAmount?.gt(0) &&\n        longToken &&\n        getNeedTokenApprove(tokensAllowanceData, longToken?.address, longTokenAmount)\n      ) {\n        addresses.push(longToken.address);\n      }\n\n      if (\n        shortTokenAmount?.gt(0) &&\n        shortToken &&\n        getNeedTokenApprove(tokensAllowanceData, shortToken?.address, shortTokenAmount)\n      ) {\n        addresses.push(shortToken.address);\n      }\n    }\n\n    return addresses;\n  })();\n\n  const longSymbol = market?.isSameCollaterals ? `${longToken?.symbol} Long` : longToken?.symbol;\n  const shortSymbol = market?.isSameCollaterals ? `${shortToken?.symbol} Short` : shortToken?.symbol;\n\n  const longTokenText = longTokenAmount?.gt(0)\n    ? formatTokenAmountWithUsd(longTokenAmount, longTokenUsd, longSymbol, longToken?.decimals)\n    : undefined;\n\n  const shortTokenText = shortTokenAmount?.gt(0)\n    ? formatTokenAmountWithUsd(shortTokenAmount, shortTokenUsd, shortSymbol, shortToken?.decimals)\n    : undefined;\n\n  const marketTokenText = formatTokenAmountWithUsd(\n    marketTokenAmount,\n    marketTokenUsd,\n    marketToken.symbol,\n    marketToken.decimals\n  );\n\n  const operationText = isDeposit ? t`Deposit` : t`Withdrawal`;\n\n  const isAllowanceLoaded = Boolean(tokensAllowanceData);\n\n  const submitButtonState = (function getSubmitButtonState() {\n    if (payTokenAddresses.length > 0 && !isAllowanceLoaded) {\n      return {\n        text: t`Loading...`,\n        disabled: true,\n      };\n    }\n\n    if (error) {\n      return {\n        text: error,\n        disabled: true,\n      };\n    }\n\n    if (isHighPriceImpact && !isHighPriceImpactAccepted) {\n      return {\n        text: t`Need to accept price impact`,\n        disabled: true,\n      };\n    }\n\n    if (tokensToApprove.length > 0) {\n      const symbols = tokensToApprove.map((address) => {\n        return address === marketToken.address ? \"GM\" : getTokenData(tokensData, address)!.symbol;\n      });\n\n      const symbolsText = symbols.join(\", \");\n\n      return {\n        text: plural(symbols.length, {\n          one: `Pending ${symbolsText} approval`,\n          other: `Pending ${symbolsText} approvals`,\n        }),\n        disabled: true,\n      };\n    }\n\n    const operationText = isDeposit ? t`Buy` : `Sell`;\n    const text = t`Confirm ${operationText} ${formatTokenAmount(marketTokenAmount, marketToken.decimals)}GM`;\n\n    return {\n      text,\n      onClick: () => {\n        if (isDeposit) {\n          onCreateDeposit();\n        } else {\n          onCreateWithdrawal();\n        }\n      },\n    };\n  })();\n\n  function onCreateDeposit() {\n    if (!account || !executionFee || !marketToken || !market || !marketTokenAmount) return;\n\n    createDepositTxn(chainId, library, {\n      account,\n      initialLongTokenAddress: longToken?.address || market.longTokenAddress,\n      initialShortTokenAddress: shortToken?.address || market.shortTokenAddress,\n      longTokenAmount: longTokenAmount || BigNumber.from(0),\n      shortTokenAmount: shortTokenAmount || BigNumber.from(0),\n      marketTokenAddress: marketToken.address,\n      minMarketTokens: marketTokenAmount,\n      executionFee: executionFee.feeTokenAmount,\n      setPendingTxns,\n    }).then(onSubmitted);\n  }\n\n  function onCreateWithdrawal() {\n    if (!account || !market || !executionFee || !longTokenAmount || !shortTokenAmount) return;\n\n    createWithdrawalTxn(chainId, library, {\n      account,\n      longTokenAddress: market.longTokenAddress,\n      shortTokenAddress: market.shortTokenAddress,\n      marketTokenAmount: marketTokenAmount,\n      minLongTokenAmount: longTokenAmount,\n      minShortTokenAmount: shortTokenAmount,\n      marketTokenAddress: marketToken.address,\n      executionFee: executionFee.feeTokenAmount,\n      setPendingTxns,\n    }).then(onSubmitted);\n  }\n\n  return (\n    <div className=\"Confirmation-box GmConfirmationBox\">\n      <Modal isVisible={true} setIsVisible={onClose} label={t`Confirm ${operationText}`} allowContentTouchMove>\n        <div className={cx(\"Confirmation-box-main GmConfirmationBox-main\")}>\n          {isDeposit && (\n            <>\n              {[longTokenText, shortTokenText].filter(Boolean).map((text) => (\n                <div key={text}>\n                  <Trans>Pay</Trans>&nbsp;{text}\n                </div>\n              ))}\n              <div className=\"Confirmation-box-main-icon\"></div>\n              <div>\n                <Trans>Receive</Trans>&nbsp;{marketTokenText}\n              </div>\n            </>\n          )}\n          {!isDeposit && (\n            <>\n              <div>\n                <Trans>Pay</Trans>&nbsp;{marketTokenText}\n              </div>\n              <div className=\"Confirmation-box-main-icon\"></div>\n              {[longTokenText, shortTokenText].filter(Boolean).map((text) => (\n                <div key={text}>\n                  <Trans>Receive</Trans>&nbsp;{text}\n                </div>\n              ))}\n            </>\n          )}\n        </div>\n\n        <GmFees\n          totalFees={fees?.totalFees}\n          swapFee={fees?.swapFee}\n          swapPriceImpact={fees?.swapPriceImpact}\n          executionFee={executionFee}\n        />\n\n        {isHighPriceImpact && (\n          <div className=\"GmSwapBox-warnings\">\n            <Checkbox asRow isChecked={isHighPriceImpactAccepted} setIsChecked={setIsHighPriceImpactAccepted}>\n              <span className=\"muted font-sm\">\n                <Trans>I am aware of the high price impact</Trans>\n              </span>\n            </Checkbox>\n          </div>\n        )}\n\n        {tokensToApprove && tokensToApprove.length > 0 && (\n          <>\n            <div className=\"App-card-divider\" />\n\n            <div className=\"GmConfirmationBox-approve-tokens\">\n              {tokensToApprove.map((address) => (\n                <div className=\"GmConfirmationBox-approve-token\">\n                  <ApproveTokenButton\n                    key={address}\n                    tokenAddress={address}\n                    tokenSymbol={address === marketToken.address ? \"GM\" : getToken(chainId, address).symbol}\n                    spenderAddress={routerAddress}\n                  />\n                </div>\n              ))}\n            </div>\n\n            <div className=\"App-card-divider\" />\n          </>\n        )}\n        <div className=\"Confirmation-box-row\">\n          <Button\n            className=\"w-100\"\n            variant=\"primary-action\"\n            onClick={submitButtonState.onClick}\n            disabled={submitButtonState.disabled}\n          >\n            {submitButtonState.text}\n          </Button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n","import { Web3Provider } from \"@ethersproject/providers\";\nimport { t } from \"@lingui/macro\";\nimport { getContract } from \"config/contracts\";\nimport { BigNumber, ethers } from \"ethers\";\nimport ExchangeRouter from \"abis/ExchangeRouter.json\";\nimport { callContract } from \"lib/contracts\";\nimport { isAddressZero } from \"lib/legacy\";\n\ntype Params = {\n  account: string;\n  longTokenAddress: string;\n  shortTokenAddress: string;\n  marketTokenAddress: string;\n  marketTokenAmount: BigNumber;\n  minLongTokenAmount: BigNumber;\n  minShortTokenAmount: BigNumber;\n  executionFee: BigNumber;\n  setPendingTxns: (txns: any) => void;\n};\n\nexport function createWithdrawalTxn(chainId: number, library: Web3Provider, p: Params) {\n  const contract = new ethers.Contract(getContract(chainId, \"ExchangeRouter\"), ExchangeRouter.abi, library.getSigner());\n  const withdrawalVaultAddress = getContract(chainId, \"WithdrawalVault\");\n\n  const isNativeWithdrawal = isAddressZero(p.longTokenAddress) || isAddressZero(p.shortTokenAddress);\n\n  const wntAmount = p.executionFee;\n\n  const multicall = [\n    contract.interface.encodeFunctionData(\"sendWnt\", [withdrawalVaultAddress, wntAmount]),\n    contract.interface.encodeFunctionData(\"createWithdrawal\", [\n      {\n        receiver: p.account,\n        callbackContract: ethers.constants.AddressZero,\n        market: p.marketTokenAddress,\n        initialLongToken: p.longTokenAddress,\n        initialShortToken: p.shortTokenAddress,\n        longTokenSwapPath: [],\n        shortTokenSwapPath: [],\n        marketTokenAmount: p.marketTokenAmount,\n        minLongTokenAmount: p.minLongTokenAmount.div(2) || BigNumber.from(0),\n        minShortTokenAmount: p.minShortTokenAmount.div(2) || BigNumber.from(0),\n        shouldUnwrapNativeToken: isNativeWithdrawal,\n        executionFee: p.executionFee,\n        callbackGasLimit: BigNumber.from(0),\n      },\n    ]),\n  ];\n\n  return callContract(chainId, contract, \"multicall\", [multicall], {\n    value: wntAmount,\n    sentMsg: t`Withdrawal order sent`,\n    successMsg: t`Success withdrawal order`,\n    failMsg: t`Withdrawal order failed`,\n    hideSuccessMsg: true,\n    setPendingTxns: p.setPendingTxns,\n  });\n}\n","import ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport { getExplorerUrl } from \"config/chains\";\nimport cx from \"classnames\";\nimport { useChainId } from \"lib/chains\";\nimport { ImSpinner2 } from \"react-icons/im\";\nimport \"./RequestStatus.scss\";\n\nexport function RequestStatus(p: { isMuted?: boolean; isLoading?: boolean; text: string; txnHash?: string }) {\n  const { chainId } = useChainId();\n\n  const txnLink = `${getExplorerUrl(chainId)}tx/${p.txnHash}`;\n\n  const isWaiting = !p.isLoading && !p.txnHash;\n\n  return (\n    <div className=\"RequestStatus\">\n      <div className={cx(\"RequestStatus-title\", { muted: isWaiting })}>{p.text}</div>\n      <div className=\"RequestStatus-status\">\n        {p.isLoading && <ImSpinner2 width={60} height={60} className=\"spin RequestStatus-spin\" />}\n        {!p.isLoading && p.txnHash && <ExternalLink href={txnLink}>View</ExternalLink>}\n      </div>\n    </div>\n  );\n}\n","import { MarketInfo } from \"domain/synthetics/markets\";\nimport { BigNumber } from \"ethers\";\nimport { TokenData } from \"../tokens\";\nimport { TriggerThresholdType } from \"../trade\";\n\nexport enum OrderType {\n  // the order will be cancelled if the minOutputAmount cannot be fulfilled\n  MarketSwap = 0,\n  // @dev LimitSwap: swap token A to token B if the minOutputAmount can be fulfilled\n  LimitSwap = 1,\n  // @dev MarketIncrease: increase position at the current market price\n  // the order will be cancelled if the position cannot be increased at the acceptablePrice\n  MarketIncrease = 2,\n  // @dev LimitIncrease: increase position if the triggerPrice is reached and the acceptablePrice can be fulfilled\n  LimitIncrease = 3,\n  // @dev MarketDecrease: decrease position at the curent market price\n  // the order will be cancelled if the position cannot be decreased at the acceptablePrice\n  MarketDecrease = 4,\n  // @dev LimitDecrease: decrease position if the triggerPrice is reached and the acceptablePrice can be fulfilled\n  LimitDecrease = 5,\n  // @dev StopLossDecrease: decrease position if the triggerPrice is reached and the acceptablePrice can be fulfilled\n  StopLossDecrease = 6,\n  // @dev Liquidation: allows liquidation of positions if the criteria for liquidation are met\n  Liquidation = 7,\n}\n\nexport enum DecreasePositionSwapType {\n  NoSwap = 0,\n  SwapPnlTokenToCollateralToken = 1,\n  SwapCollateralTokenToPnlToken = 2,\n}\n\nexport type Order = {\n  key: string;\n  account: string;\n  callbackContract: string;\n  initialCollateralTokenAddress: string;\n  marketAddress: string;\n  decreasePositionSwapType: DecreasePositionSwapType;\n  receiver: string;\n  swapPath: string[];\n  contractAcceptablePrice: BigNumber;\n  contractTriggerPrice: BigNumber;\n  callbackGasLimit: BigNumber;\n  executionFee: BigNumber;\n  initialCollateralDeltaAmount: BigNumber;\n  minOutputAmount: BigNumber;\n  sizeDeltaUsd: BigNumber;\n  updatedAtBlock: BigNumber;\n  isFrozen: boolean;\n  isLong: boolean;\n  orderType: OrderType;\n  shouldUnwrapNativeToken: boolean;\n  data: string;\n};\n\nexport type SwapOrderInfo = Order & {\n  title: string;\n  initialCollateralToken: TokenData;\n  targetCollateralToken: TokenData;\n};\n\nexport type PositionOrderInfo = Order & {\n  title: string;\n  marketInfo: MarketInfo;\n  indexToken: TokenData;\n  initialCollateralToken: TokenData;\n  targetCollateralToken: TokenData;\n  triggerPrice: BigNumber;\n  triggerThresholdType: TriggerThresholdType;\n  acceptablePrice: BigNumber;\n};\n\nexport type OrderInfo = SwapOrderInfo | PositionOrderInfo;\n\nexport type OrdersData = {\n  [orderKey: string]: Order;\n};\n\nexport type OrdersInfoData = {\n  [orderKey: string]: OrderInfo;\n};\n","import { MarketInfo, getCappedPoolPnl, getPoolUsd } from \"domain/synthetics/markets\";\nimport { Token } from \"domain/tokens\";\nimport { BigNumber } from \"ethers\";\nimport { BASIS_POINTS_DIVISOR } from \"lib/legacy\";\nimport { applyFactor, expandDecimals, formatAmount } from \"lib/numbers\";\nimport { convertToUsd } from \"../tokens\";\n\nexport function getPositionKey(account: string, marketAddress: string, collateralAddress: string, isLong: boolean) {\n  return `${account}-${marketAddress}-${collateralAddress}-${isLong}`;\n}\n\nexport function parsePositionKey(positionKey: string) {\n  const [account, marketAddress, collateralAddress, isLong] = positionKey.split(\"-\");\n\n  return { account, marketAddress, collateralAddress, isLong: isLong === \"true\" };\n}\n\nexport function getEntryPrice(p: { sizeInUsd: BigNumber; sizeInTokens: BigNumber; indexToken: Token }) {\n  const { sizeInUsd, sizeInTokens, indexToken } = p;\n\n  if (!sizeInTokens.gt(0)) {\n    return undefined;\n  }\n\n  return sizeInUsd.div(sizeInTokens).mul(expandDecimals(1, indexToken.decimals));\n}\n\nexport function getPositionValueUsd(p: { indexToken: Token; sizeInTokens: BigNumber; markPrice: BigNumber }) {\n  const { indexToken, sizeInTokens, markPrice } = p;\n\n  return convertToUsd(sizeInTokens, indexToken.decimals, markPrice)!;\n}\n\nexport function getPositionPendingFeesUsd(p: { pendingFundingFeesUsd: BigNumber; pendingBorrowingFeesUsd: BigNumber }) {\n  const { pendingFundingFeesUsd, pendingBorrowingFeesUsd } = p;\n\n  if (pendingFundingFeesUsd.lt(0)) {\n    return pendingBorrowingFeesUsd.add(pendingFundingFeesUsd.abs());\n  }\n\n  return pendingBorrowingFeesUsd;\n}\n\nexport function getPositionNetValue(p: {\n  collateralUsd: BigNumber;\n  pendingFundingFeesUsd: BigNumber;\n  pendingBorrowingFeesUsd: BigNumber;\n  pnl: BigNumber;\n  closingFeeUsd: BigNumber;\n}) {\n  const { pnl, closingFeeUsd, collateralUsd } = p;\n\n  const pendingFeesUsd = getPositionPendingFeesUsd(p);\n\n  return collateralUsd.sub(pendingFeesUsd).sub(closingFeeUsd).add(pnl);\n}\n\nexport function getPositionPnlUsd(p: {\n  marketInfo: MarketInfo;\n  sizeInUsd: BigNumber;\n  sizeInTokens: BigNumber;\n  markPrice: BigNumber;\n  isLong: boolean;\n}) {\n  const { marketInfo, sizeInUsd, sizeInTokens, markPrice, isLong } = p;\n\n  const positionValueUsd = getPositionValueUsd({ indexToken: marketInfo.indexToken, sizeInTokens, markPrice });\n\n  let totalPnl = isLong ? positionValueUsd.sub(sizeInUsd) : sizeInUsd.sub(positionValueUsd);\n\n  if (totalPnl.lte(0)) {\n    return totalPnl;\n  }\n\n  const poolPnl = isLong ? p.marketInfo.pnlLongMax : p.marketInfo.pnlShortMax;\n  const poolUsd = getPoolUsd(marketInfo, isLong, \"minPrice\");\n\n  const cappedPnl = getCappedPoolPnl({\n    marketInfo,\n    poolUsd,\n    isLong,\n    maximize: true,\n    pnlFactorType: \"FOR_TRADERS\",\n  });\n\n  const WEI_PRECISION = expandDecimals(1, 18);\n\n  if (!cappedPnl.eq(poolPnl) && cappedPnl.gt(0) && poolPnl.gt(0)) {\n    totalPnl = totalPnl.mul(cappedPnl.div(WEI_PRECISION)).div(poolPnl.div(WEI_PRECISION));\n  }\n\n  return totalPnl;\n}\n\nexport function getLiquidationPrice(p: {\n  sizeInUsd: BigNumber;\n  collateralUsd: BigNumber;\n  pnl: BigNumber;\n  markPrice: BigNumber;\n  closingFeeUsd: BigNumber;\n  maxPriceImpactFactor: BigNumber | undefined;\n  pendingFundingFeesUsd: BigNumber;\n  pendingBorrowingFeesUsd: BigNumber;\n  minCollateralFactor: BigNumber;\n  minCollateralUsd: BigNumber;\n  isLong: boolean;\n}) {\n  const {\n    sizeInUsd,\n    collateralUsd,\n    pnl,\n    markPrice,\n    closingFeeUsd,\n    maxPriceImpactFactor,\n    pendingFundingFeesUsd,\n    pendingBorrowingFeesUsd,\n    minCollateralFactor,\n    minCollateralUsd,\n    isLong,\n  } = p;\n\n  if (!sizeInUsd.gt(0)) {\n    return undefined;\n  }\n\n  const totalPendingFeesUsd = getPositionPendingFeesUsd({ pendingFundingFeesUsd, pendingBorrowingFeesUsd });\n\n  const maxNegativePriceImpactUsd = maxPriceImpactFactor\n    ? applyFactor(sizeInUsd, maxPriceImpactFactor)\n    : BigNumber.from(0);\n\n  const totalFeesUsd = totalPendingFeesUsd.add(closingFeeUsd).add(maxNegativePriceImpactUsd);\n\n  const remainingCollateralUsd = collateralUsd.sub(totalFeesUsd).add(pnl);\n\n  const liqPriceForFees = getLiquidationPriceFromDelta({\n    liquidationAmountUsd: totalFeesUsd,\n    sizeInUsd,\n    collateralUsd: remainingCollateralUsd,\n    markPrice,\n    isLong,\n  });\n\n  let minCollateralUsdForMaxLeverage = applyFactor(sizeInUsd, minCollateralFactor);\n\n  if (minCollateralUsdForMaxLeverage.lt(minCollateralUsd)) {\n    minCollateralUsdForMaxLeverage = minCollateralUsd;\n  }\n\n  const liqPriceForMaxLeverage = getLiquidationPriceFromDelta({\n    liquidationAmountUsd: minCollateralUsdForMaxLeverage,\n    sizeInUsd,\n    collateralUsd: remainingCollateralUsd,\n    markPrice,\n    isLong,\n  });\n\n  let liquidationPrice: BigNumber;\n\n  if (isLong) {\n    // return the higher price\n    liquidationPrice = liqPriceForFees.gt(liqPriceForMaxLeverage) ? liqPriceForFees : liqPriceForMaxLeverage;\n  } else {\n    liquidationPrice = liqPriceForFees.lt(liqPriceForMaxLeverage) ? liqPriceForFees : liqPriceForMaxLeverage;\n  }\n\n  if (liquidationPrice.lt(0)) {\n    return BigNumber.from(0);\n  }\n\n  return liquidationPrice;\n}\n\nexport function getLiquidationPriceFromDelta(p: {\n  liquidationAmountUsd: BigNumber;\n  sizeInUsd: BigNumber;\n  collateralUsd: BigNumber;\n  markPrice: BigNumber;\n  isLong: boolean;\n}) {\n  if (p.liquidationAmountUsd.gt(p.collateralUsd)) {\n    const liquidationDelta = p.liquidationAmountUsd.sub(p.collateralUsd);\n    const priceDelta = liquidationDelta.mul(p.markPrice).div(p.sizeInUsd);\n\n    return p.isLong ? p.markPrice.add(priceDelta) : p.markPrice.sub(priceDelta);\n  }\n\n  const liquidationDelta = p.collateralUsd.sub(p.liquidationAmountUsd);\n  const priceDelta = liquidationDelta.mul(p.markPrice).div(p.sizeInUsd);\n\n  return p.isLong ? p.markPrice.sub(priceDelta) : p.markPrice.add(priceDelta);\n}\n\nexport function getLeverage(p: {\n  sizeInUsd: BigNumber;\n  collateralUsd: BigNumber;\n  pnl: BigNumber | undefined;\n  pendingFundingFeesUsd: BigNumber;\n  pendingBorrowingFeesUsd: BigNumber;\n}) {\n  const { pnl, sizeInUsd: sizeUsd, collateralUsd, pendingBorrowingFeesUsd, pendingFundingFeesUsd } = p;\n\n  const totalPendingFeesUsd = getPositionPendingFeesUsd({ pendingFundingFeesUsd, pendingBorrowingFeesUsd });\n\n  const remainingCollateralUsd = collateralUsd.add(pnl || 0).sub(totalPendingFeesUsd);\n\n  if (remainingCollateralUsd.lte(0)) {\n    return undefined;\n  }\n\n  return sizeUsd.mul(BASIS_POINTS_DIVISOR).div(remainingCollateralUsd);\n}\n\nexport function formatLeverage(leverage?: BigNumber) {\n  if (!leverage) return undefined;\n\n  return `${formatAmount(leverage, 4, 2)}x`;\n}\n","import { useWeb3React } from \"@web3-react/core\";\nimport SyntheticsReader from \"abis/SyntheticsReader.json\";\nimport { getContract } from \"config/contracts\";\nimport { accountPositionListKey, hashedPositionKey } from \"config/dataStore\";\nimport { useMulticall } from \"lib/multicall\";\nimport DataStore from \"abis/DataStore.json\";\nimport { bigNumberify } from \"lib/numbers\";\nimport { useMemo } from \"react\";\nimport { ContractMarketPrices, getContractMarketPrices, useMarkets } from \"../markets\";\nimport { useAvailableTokensData } from \"../tokens\";\nimport { PositionsData } from \"./types\";\nimport { getPositionKey } from \"./utils\";\n\ntype PositionsResult = {\n  positionsData: PositionsData;\n};\n\nconst defaultValue = {};\n\nexport function usePositions(chainId: number): PositionsResult {\n  const { account } = useWeb3React();\n  const { marketsData } = useMarkets(chainId);\n  const { tokensData } = useAvailableTokensData(chainId);\n\n  const { data: positionsKeys } = useMulticall(chainId, \"usePositionsData-keys\", {\n    key: account ? [account] : null,\n    request: () => ({\n      dataStore: {\n        contractAddress: getContract(chainId, \"DataStore\"),\n        abi: DataStore.abi,\n        calls: {\n          keys: {\n            methodName: \"getBytes32ValuesAt\",\n            params: [accountPositionListKey(account!), 0, 300],\n          },\n        },\n      },\n    }),\n    parseResponse: (res) => {\n      return res.dataStore.keys.returnValues;\n    },\n  });\n\n  const queryParams = useMemo(() => {\n    if (!account || !marketsData || !tokensData || !positionsKeys?.length) return undefined;\n\n    const markets = Object.values(marketsData);\n    const marketPricesByPositionsKeys: { [key: string]: ContractMarketPrices } = {};\n\n    for (const market of markets) {\n      const marketPrices = getContractMarketPrices(tokensData!, market);\n\n      for (const collateralAddress of [market.longTokenAddress, market.shortTokenAddress]) {\n        for (const isLong of [true, false]) {\n          const key = hashedPositionKey(account, market.marketTokenAddress, collateralAddress, isLong);\n\n          marketPricesByPositionsKeys[key] = marketPrices;\n        }\n      }\n    }\n\n    const marketPricesArray = positionsKeys.map((key) => marketPricesByPositionsKeys[key]);\n\n    if (marketPricesArray.length !== positionsKeys.length) {\n      return undefined;\n    }\n\n    return {\n      positionsKeys,\n      marketPricesArray,\n    };\n  }, [account, marketsData, positionsKeys, tokensData]);\n\n  const { data: positionsData = defaultValue } = useMulticall(chainId, \"usePositionsData\", {\n    key: queryParams?.positionsKeys.length ? [queryParams.positionsKeys.join(\"-\")] : null,\n    request: () => ({\n      reader: {\n        contractAddress: getContract(chainId, \"SyntheticsReader\"),\n        abi: SyntheticsReader.abi,\n        calls: {\n          positions: {\n            methodName: \"getAccountPositionInfoList\",\n            params: [\n              getContract(chainId, \"DataStore\"),\n              getContract(chainId, \"SyntheticsReferralStorage\"),\n              queryParams!.positionsKeys,\n              queryParams!.marketPricesArray,\n            ],\n          },\n        },\n      },\n    }),\n    parseResponse: (res) => {\n      const positions = res.reader.positions.returnValues;\n\n      return positions.reduce((positionsMap: PositionsData, positionInfo, i) => {\n        // TODO: parsing from abi?\n        const [positionProps, positionFees] = positionInfo;\n        const [addresses, numbers, flags, data] = positionProps;\n        const [account, marketAddress, collateralTokenAddress] = addresses;\n\n        const [\n          sizeInUsd,\n          sizeInTokens,\n          collateralAmount,\n          borrowingFactor,\n          longTokenFundingAmountPerSize,\n          shortTokenFundingAmountPerSize,\n          increasedAtBlock,\n          decreasedAtBlock,\n        ] = numbers.map(bigNumberify);\n\n        const [isLong] = flags;\n\n        const [\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          referral,\n          funding,\n          borrowing,\n          // collateralPrice,\n          // positionFeeFactor,\n          // protocolFeeAmount,\n          // positionFeeReceiverFactor,\n          // feeReceiverAmount,\n          // feeAmountForPool,\n          // positionFeeAmountForPool,\n          // positionFeeAmount,\n          // totalNetCostAmount,\n          // totalNetCostUsd,\n        ] = positionFees;\n\n        // const [\n        //   referralCode,\n        //   affiliate,\n        //   trader,\n        //   totalRebateFactor,\n        //   traderDiscountFactor,\n        //   totalRebateAmount,\n        //   traderDiscountAmount,\n        //   affiliateRewardAmount,\n        // ] = referral;\n\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const [borrowingFeeUsd, borrowingFeeAmount, borrowingFeeReceiverFactor, borrowingFeeAmountForFeeReceiver] =\n          borrowing.map(bigNumberify);\n\n        const [\n          fundingFeeAmount,\n          claimableLongTokenAmount,\n          claimableShortTokenAmount,\n          latestLongTokenFundingAmountPerSize,\n          latestShortTokenFundingAmountPerSize,\n        ] = funding.map(bigNumberify);\n\n        const positionKey = getPositionKey(account, marketAddress, collateralTokenAddress, isLong)!;\n        const contractPositionKey = queryParams!.positionsKeys[i];\n\n        positionsMap[positionKey] = {\n          key: positionKey,\n          contractKey: contractPositionKey,\n          account,\n          marketAddress,\n          collateralTokenAddress,\n          sizeInUsd,\n          sizeInTokens,\n          collateralAmount,\n          borrowingFactor,\n          longTokenFundingAmountPerSize,\n          shortTokenFundingAmountPerSize,\n          increasedAtBlock,\n          decreasedAtBlock,\n          isLong,\n          pendingBorrowingFeesUsd: borrowingFeeUsd,\n          fundingFeeAmount,\n          claimableLongTokenAmount,\n          claimableShortTokenAmount,\n          latestLongTokenFundingAmountPerSize,\n          latestShortTokenFundingAmountPerSize,\n          hasPendingLongTokenFundingFee: false,\n          hasPendingShortTokenFundingFee: false,\n          isOpening: false,\n          data,\n        };\n\n        return positionsMap;\n      }, {} as PositionsData);\n    },\n  });\n\n  return {\n    positionsData,\n  };\n}\n","import {\n  PendingPositionUpdate,\n  PositionDecreaseEvent,\n  PositionIncreaseEvent,\n  useSyntheticsEvents,\n} from \"context/SyntheticsEvents\";\nimport { uniq } from \"lodash\";\nimport { usePositions } from \"./usePositions\";\nimport { Position, PositionsData } from \"./types\";\nimport { BigNumber } from \"ethers\";\nimport { parsePositionKey } from \"./utils\";\nimport { useMemo } from \"react\";\nimport { hashedPositionKey } from \"config/dataStore\";\n\nconst MAX_PENDING_UPDATE_AGE = 600 * 1000;\n\nexport function useOptimisticPositions(chainId: number) {\n  const { positionsData } = usePositions(chainId);\n  const { positionDecreaseEvents, positionIncreaseEvents, pendingPositionsUpdates } = useSyntheticsEvents();\n\n  const optimisticPositionsData: PositionsData = useMemo(() => {\n    if (!positionDecreaseEvents || !positionIncreaseEvents || !pendingPositionsUpdates) {\n      return {};\n    }\n\n    const positionsKeys = uniq(\n      Object.keys(positionsData)\n        .concat(Object.keys(pendingPositionsUpdates))\n        .concat(positionIncreaseEvents.map((e) => e.positionKey))\n    );\n\n    return positionsKeys.reduce((acc, key) => {\n      const now = Date.now();\n\n      const increaseEvents = positionIncreaseEvents.filter((e) => e.positionKey === key);\n      const lastIncreaseEvent = increaseEvents[increaseEvents.length - 1];\n\n      const decreaseEvents = positionDecreaseEvents.filter((e) => e.positionKey === key);\n      const lastDecreaseEvent = decreaseEvents[decreaseEvents.length - 1];\n\n      const pendingUpdate =\n        pendingPositionsUpdates[key] && pendingPositionsUpdates[key]!.updatedAt + MAX_PENDING_UPDATE_AGE > now\n          ? pendingPositionsUpdates[key]\n          : undefined;\n\n      let position: Position;\n\n      if (positionsData[key]) {\n        position = { ...positionsData[key] };\n      } else if (pendingUpdate && pendingUpdate.isIncrease) {\n        position = getPendingPosition(pendingUpdate);\n      } else {\n        return acc;\n      }\n\n      if (\n        lastIncreaseEvent &&\n        lastIncreaseEvent.increasedAtBlock.gt(position.increasedAtBlock) &&\n        lastIncreaseEvent.increasedAtBlock.gt(lastDecreaseEvent?.decreasedAtBlock || 0)\n      ) {\n        position = applyEventChanges(position, lastIncreaseEvent);\n      } else if (\n        lastDecreaseEvent &&\n        lastDecreaseEvent.decreasedAtBlock.gt(position.decreasedAtBlock) &&\n        lastDecreaseEvent.decreasedAtBlock.gt(lastIncreaseEvent?.increasedAtBlock || 0)\n      ) {\n        position = applyEventChanges(position, lastDecreaseEvent);\n      }\n\n      if (\n        pendingUpdate &&\n        ((pendingUpdate.isIncrease && pendingUpdate.updatedAtBlock.gt(position.increasedAtBlock)) ||\n          (!pendingUpdate.isIncrease && pendingUpdate.updatedAtBlock.gt(position.decreasedAtBlock)))\n      ) {\n        position.pendingUpdate = pendingUpdate;\n      }\n\n      if (position.sizeInUsd.gt(0)) {\n        acc[key] = position;\n      }\n\n      return acc;\n    }, {} as PositionsData);\n  }, [pendingPositionsUpdates, positionDecreaseEvents, positionIncreaseEvents, positionsData]);\n\n  return {\n    optimisticPositionsData,\n  };\n}\n\nfunction applyEventChanges(position: Position, event: PositionIncreaseEvent | PositionDecreaseEvent) {\n  const nextPosition = { ...position };\n\n  nextPosition.sizeInUsd = event.sizeInUsd;\n  nextPosition.sizeInTokens = event.sizeInTokens;\n  nextPosition.collateralAmount = event.collateralAmount;\n  nextPosition.borrowingFactor = event.borrowingFactor;\n  nextPosition.longTokenFundingAmountPerSize = event.longTokenFundingAmountPerSize;\n  nextPosition.shortTokenFundingAmountPerSize = event.shortTokenFundingAmountPerSize;\n  nextPosition.pendingUpdate = undefined;\n  nextPosition.isOpening = false;\n\n  if ((event as PositionIncreaseEvent).increasedAtBlock) {\n    nextPosition.increasedAtBlock = (event as PositionIncreaseEvent).increasedAtBlock;\n  }\n\n  if ((event as PositionDecreaseEvent).decreasedAtBlock) {\n    nextPosition.decreasedAtBlock = (event as PositionDecreaseEvent).decreasedAtBlock;\n  }\n\n  return nextPosition;\n}\n\nfunction getPendingPosition(pendingUpdate: PendingPositionUpdate): Position {\n  const { account, marketAddress, collateralAddress, isLong } = parsePositionKey(pendingUpdate.positionKey);\n\n  return {\n    key: pendingUpdate.positionKey,\n    contractKey: hashedPositionKey(account, marketAddress, collateralAddress, isLong),\n    account,\n    marketAddress,\n    collateralTokenAddress: collateralAddress,\n    isLong,\n    sizeInUsd: pendingUpdate.sizeDeltaUsd || BigNumber.from(0),\n    collateralAmount: pendingUpdate.collateralDeltaAmount || BigNumber.from(0),\n    sizeInTokens: pendingUpdate.sizeDeltaInTokens || BigNumber.from(0),\n    increasedAtBlock: pendingUpdate.updatedAtBlock,\n    decreasedAtBlock: BigNumber.from(0),\n    borrowingFactor: BigNumber.from(0),\n    pendingBorrowingFeesUsd: BigNumber.from(0),\n    longTokenFundingAmountPerSize: BigNumber.from(0),\n    shortTokenFundingAmountPerSize: BigNumber.from(0),\n    data: \"0x\",\n    fundingFeeAmount: BigNumber.from(0),\n    claimableLongTokenAmount: BigNumber.from(0),\n    claimableShortTokenAmount: BigNumber.from(0),\n    latestLongTokenFundingAmountPerSize: BigNumber.from(0),\n    latestShortTokenFundingAmountPerSize: BigNumber.from(0),\n    hasPendingLongTokenFundingFee: false,\n    hasPendingShortTokenFundingFee: false,\n\n    isOpening: true,\n    pendingUpdate: pendingUpdate,\n  };\n}\n","import DataStore from \"abis/DataStore.json\";\nimport { getContract } from \"config/contracts\";\nimport { MIN_COLLATERAL_USD_KEY } from \"config/dataStore\";\nimport { BigNumber } from \"ethers\";\nimport { useMulticall } from \"lib/multicall\";\n\nexport type PositionsConstantsResult = {\n  minCollateralUsd?: BigNumber;\n};\n\nexport function usePositionsConstants(chainId: number): PositionsConstantsResult {\n  const { data } = useMulticall(chainId, \"usePositionsConstants\", {\n    key: [],\n    request: {\n      dataStore: {\n        contractAddress: getContract(chainId, \"DataStore\"),\n        abi: DataStore.abi,\n        calls: {\n          minCollateralUsd: {\n            methodName: \"getUint\",\n            params: [MIN_COLLATERAL_USD_KEY],\n          },\n        },\n      },\n    },\n    parseResponse: (res) => ({\n      minCollateralUsd: res.dataStore.minCollateralUsd.returnValues[0] as BigNumber,\n    }),\n  });\n\n  return {\n    minCollateralUsd: data?.minCollateralUsd,\n  };\n}\n","import { NATIVE_TOKEN_ADDRESS } from \"config/tokens\";\nimport {\n  MarketInfo,\n  MarketsInfoData,\n  getAvailableUsdLiquidityForCollateral,\n  getOppositeCollateral,\n  getTokenPoolType,\n} from \"domain/synthetics/markets\";\nimport { convertToTokenAmount, convertToUsd } from \"domain/synthetics/tokens\";\nimport { BigNumber, ethers } from \"ethers\";\nimport { applyFactor } from \"lib/numbers\";\nimport { applySwapImpactWithCap, getPriceImpactForSwap } from \"../../fees/utils/priceImpact\";\nimport { SwapPathStats, SwapStats } from \"../types\";\nimport { getByKey } from \"lib/objects\";\nimport { VirtualInventoryForSwapsData } from \"domain/synthetics/fees\";\n\nexport function getSwapPathOutputAddresses(p: {\n  marketsInfoData: MarketsInfoData;\n  initialCollateralAddress: string;\n  swapPath: string[];\n  wrappedNativeTokenAddress: string;\n  shouldUnwrapNativeToken: boolean;\n}) {\n  const { marketsInfoData, initialCollateralAddress, swapPath, wrappedNativeTokenAddress, shouldUnwrapNativeToken } = p;\n\n  if (swapPath.length === 0) {\n    return {\n      outTokenAddress:\n        shouldUnwrapNativeToken && initialCollateralAddress === wrappedNativeTokenAddress\n          ? NATIVE_TOKEN_ADDRESS\n          : initialCollateralAddress,\n\n      outMarketAddress: undefined,\n    };\n  }\n\n  const [firstMarketAddress, ...marketAddresses] = swapPath;\n\n  let outMarket = marketsInfoData[firstMarketAddress];\n  let outTokenType = getTokenPoolType(outMarket, initialCollateralAddress);\n  let outToken = outTokenType === \"long\" ? outMarket.shortToken : outMarket.longToken;\n\n  for (const marketAddress of marketAddresses) {\n    outMarket = marketsInfoData[marketAddress];\n    outTokenType = outMarket.longTokenAddress === outToken.address ? \"short\" : \"long\";\n    outToken = outTokenType === \"long\" ? outMarket.longToken : outMarket.shortToken;\n  }\n\n  const outTokenAddress =\n    shouldUnwrapNativeToken && outToken.address === wrappedNativeTokenAddress ? NATIVE_TOKEN_ADDRESS : outToken.address;\n\n  return {\n    outTokenAddress,\n    outMarketAddress: outMarket.marketTokenAddress,\n  };\n}\n\nexport function getMaxSwapPathLiquidity(p: {\n  marketsInfoData: MarketsInfoData;\n  swapPath: string[];\n  initialCollateralAddress: string;\n}) {\n  const { marketsInfoData, swapPath, initialCollateralAddress } = p;\n\n  if (swapPath.length === 0) {\n    return BigNumber.from(0);\n  }\n\n  let minMarketLiquidity = ethers.constants.MaxUint256;\n  let tokenInAddress = initialCollateralAddress;\n\n  for (const marketAddress of swapPath) {\n    const marketInfo = getByKey(marketsInfoData, marketAddress);\n\n    if (!marketInfo) {\n      return BigNumber.from(0);\n    }\n\n    const tokenOut = getOppositeCollateral(marketInfo, tokenInAddress);\n\n    if (!tokenOut) {\n      return BigNumber.from(0);\n    }\n\n    const isTokenOutLong = getTokenPoolType(marketInfo, tokenOut.address) === \"long\";\n    const liquidity = getAvailableUsdLiquidityForCollateral(marketInfo, isTokenOutLong);\n\n    if (liquidity.lt(minMarketLiquidity)) {\n      minMarketLiquidity = liquidity;\n    }\n\n    tokenInAddress = tokenOut.address;\n  }\n\n  if (minMarketLiquidity.eq(ethers.constants.MaxUint256)) {\n    return BigNumber.from(0);\n  }\n\n  return minMarketLiquidity;\n}\n\nexport function getSwapPathStats(p: {\n  marketsInfoData: MarketsInfoData;\n  swapPath: string[];\n  initialCollateralAddress: string;\n  wrappedNativeTokenAddress: string;\n  usdIn: BigNumber;\n  shouldUnwrapNativeToken: boolean;\n  shouldApplyPriceImpact: boolean;\n  virtualInventoryForSwaps: VirtualInventoryForSwapsData;\n}): SwapPathStats | undefined {\n  const {\n    marketsInfoData,\n    swapPath,\n    initialCollateralAddress,\n    usdIn,\n    shouldUnwrapNativeToken,\n    shouldApplyPriceImpact,\n    wrappedNativeTokenAddress,\n    virtualInventoryForSwaps,\n  } = p;\n\n  if (swapPath.length === 0) {\n    return undefined;\n  }\n\n  const swapSteps: SwapStats[] = [];\n\n  let usdOut = usdIn;\n\n  let tokenInAddress = initialCollateralAddress;\n  let tokenOutAddress = initialCollateralAddress;\n\n  let totalSwapPriceImpactDeltaUsd = BigNumber.from(0);\n  let totalSwapFeeUsd = BigNumber.from(0);\n\n  for (let i = 0; i < swapPath.length; i++) {\n    const marketAddress = swapPath[i];\n    const marketInfo = marketsInfoData[marketAddress];\n\n    tokenOutAddress = getOppositeCollateral(marketInfo, tokenInAddress)!.address;\n\n    if (i === swapPath.length - 1 && shouldUnwrapNativeToken && tokenOutAddress === wrappedNativeTokenAddress) {\n      tokenOutAddress = NATIVE_TOKEN_ADDRESS;\n    }\n\n    const swapStep = getSwapStats({\n      marketInfo,\n      tokenInAddress,\n      tokenOutAddress,\n      usdIn: usdOut,\n      shouldApplyPriceImpact,\n      virtualInventoryForSwaps,\n    });\n\n    tokenInAddress = swapStep.tokenOutAddress;\n    usdOut = swapStep.usdOut;\n\n    totalSwapPriceImpactDeltaUsd = totalSwapPriceImpactDeltaUsd.add(swapStep.priceImpactDeltaUsd);\n    totalSwapFeeUsd = totalSwapFeeUsd.add(swapStep.swapFeeUsd);\n\n    swapSteps.push(swapStep);\n  }\n\n  const lastStep = swapSteps[swapSteps.length - 1];\n  const targetMarketAddress = lastStep.marketAddress;\n  const amountOut = lastStep.amountOut;\n\n  const totalFeesDeltaUsd = BigNumber.from(0).sub(totalSwapFeeUsd).add(totalSwapPriceImpactDeltaUsd);\n\n  return {\n    swapPath,\n    tokenInAddress,\n    tokenOutAddress,\n    targetMarketAddress,\n    swapSteps,\n    usdOut,\n    amountOut,\n    totalSwapFeeUsd,\n    totalSwapPriceImpactDeltaUsd,\n    totalFeesDeltaUsd,\n  };\n}\n\nexport function getSwapStats(p: {\n  marketInfo: MarketInfo;\n  tokenInAddress: string;\n  tokenOutAddress: string;\n  usdIn: BigNumber;\n  shouldApplyPriceImpact: boolean;\n  virtualInventoryForSwaps: VirtualInventoryForSwapsData;\n}): SwapStats {\n  const { marketInfo, tokenInAddress, tokenOutAddress, usdIn, shouldApplyPriceImpact, virtualInventoryForSwaps } = p;\n\n  const isWrap = tokenInAddress === NATIVE_TOKEN_ADDRESS;\n  const isUnwrap = tokenOutAddress === NATIVE_TOKEN_ADDRESS;\n\n  const tokenIn =\n    getTokenPoolType(marketInfo, tokenInAddress) === \"long\" ? marketInfo.longToken : marketInfo.shortToken;\n\n  const tokenOut =\n    getTokenPoolType(marketInfo, tokenOutAddress) === \"long\" ? marketInfo.longToken : marketInfo.shortToken;\n\n  const priceIn = tokenIn.prices.minPrice;\n  const priceOut = tokenOut.prices.maxPrice;\n\n  const amountIn = convertToTokenAmount(usdIn, tokenIn.decimals, priceIn)!;\n\n  const swapFeeAmount = applyFactor(amountIn, marketInfo.swapFeeFactor);\n  const swapFeeUsd = applyFactor(usdIn, marketInfo.swapFeeFactor);\n\n  const amountInAfterFees = amountIn.sub(swapFeeAmount);\n  const usdInAfterFees = usdIn.sub(swapFeeUsd);\n\n  let usdOut = usdInAfterFees;\n  let amountOut = convertToTokenAmount(usdOut, tokenOut.decimals, priceOut)!;\n\n  let priceImpactDeltaUsd: BigNumber;\n\n  try {\n    priceImpactDeltaUsd = getPriceImpactForSwap(\n      marketInfo,\n      virtualInventoryForSwaps,\n      tokenIn.address,\n      amountInAfterFees,\n      amountOut.mul(-1)\n    );\n  } catch (e) {\n    return {\n      swapFeeUsd,\n      swapFeeAmount,\n      isWrap,\n      isUnwrap,\n      marketAddress: marketInfo.marketTokenAddress,\n      tokenInAddress,\n      tokenOutAddress,\n      priceImpactDeltaUsd: BigNumber.from(0),\n      amountIn,\n      amountInAfterFees,\n      amountOut,\n      usdOut,\n      isOutLiquidity: true,\n    };\n  }\n\n  let cappedImpactDeltaUsd: BigNumber;\n\n  if (priceImpactDeltaUsd.gt(0)) {\n    const positiveImpactAmount = applySwapImpactWithCap(marketInfo, tokenOut.address, priceImpactDeltaUsd);\n    cappedImpactDeltaUsd = convertToUsd(positiveImpactAmount, tokenOut.decimals, priceOut)!;\n  } else {\n    const negativeImpactAmount = applySwapImpactWithCap(marketInfo, tokenIn.address, priceImpactDeltaUsd);\n    cappedImpactDeltaUsd = convertToUsd(negativeImpactAmount, tokenIn.decimals, priceIn)!;\n  }\n\n  if (shouldApplyPriceImpact) {\n    usdOut = usdOut.add(cappedImpactDeltaUsd);\n  }\n\n  amountOut = convertToTokenAmount(usdOut, tokenOut.decimals, priceOut)!;\n\n  const liquidity = getAvailableUsdLiquidityForCollateral(\n    marketInfo,\n    getTokenPoolType(marketInfo, tokenOutAddress) === \"long\"\n  );\n\n  const isOutLiquidity = liquidity.lt(usdOut);\n\n  return {\n    swapFeeUsd,\n    swapFeeAmount,\n    isWrap,\n    isUnwrap,\n    marketAddress: marketInfo.marketTokenAddress,\n    tokenInAddress,\n    tokenOutAddress,\n    priceImpactDeltaUsd: cappedImpactDeltaUsd,\n    amountIn,\n    amountInAfterFees,\n    amountOut,\n    usdOut,\n    isOutLiquidity,\n  };\n}\n","import { Market, MarketsInfoData } from \"domain/synthetics/markets\";\nimport { MarketEdge, MarketsGraph, SwapEstimator } from \"../types\";\nimport { BigNumber } from \"ethers\";\nimport { getSwapStats } from \"./swapStats\";\nimport { VirtualInventoryForSwapsData } from \"domain/synthetics/fees\";\n\nexport function getMarketsGraph(markets: Market[]): MarketsGraph {\n  const graph: MarketsGraph = {\n    abjacencyList: {},\n    edges: [],\n  };\n\n  for (const market of markets) {\n    const { longTokenAddress, shortTokenAddress, marketTokenAddress, isSameCollaterals } = market;\n\n    if (isSameCollaterals) {\n      continue;\n    }\n\n    const longShortEdge: MarketEdge = {\n      marketAddress: marketTokenAddress,\n      from: longTokenAddress,\n      to: shortTokenAddress,\n    };\n\n    const shortLongEdge: MarketEdge = {\n      marketAddress: marketTokenAddress,\n      from: shortTokenAddress,\n      to: longTokenAddress,\n    };\n\n    graph.abjacencyList[longTokenAddress] = graph.abjacencyList[longTokenAddress] || [];\n    graph.abjacencyList[longTokenAddress].push(longShortEdge);\n    graph.abjacencyList[shortTokenAddress] = graph.abjacencyList[shortTokenAddress] || [];\n    graph.abjacencyList[shortTokenAddress].push(shortLongEdge);\n\n    graph.edges.push(longShortEdge, shortLongEdge);\n  }\n\n  return graph;\n}\n\nexport const createSwapEstimator = (\n  marketsInfoData: MarketsInfoData,\n  virtualInventoryForSwaps: VirtualInventoryForSwapsData\n): SwapEstimator => {\n  return (e: MarketEdge, usdIn: BigNumber) => {\n    const marketInfo = marketsInfoData[e.marketAddress];\n\n    const swapStats = getSwapStats({\n      marketInfo,\n      usdIn,\n      tokenInAddress: e.from,\n      tokenOutAddress: e.to,\n      shouldApplyPriceImpact: true,\n      virtualInventoryForSwaps,\n    });\n\n    const isOutLiquidity = swapStats?.isOutLiquidity;\n    const usdOut = swapStats?.usdOut;\n\n    if (!usdOut || isOutLiquidity) {\n      return {\n        usdOut: BigNumber.from(0),\n      };\n    }\n\n    return {\n      usdOut,\n    };\n  };\n};\n\nexport function getBestSwapPath(paths: MarketEdge[][], usdIn: BigNumber, estimator: SwapEstimator) {\n  if (paths.length === 0) {\n    return undefined;\n  }\n\n  let bestPath = paths[0];\n  let bestUsdOut = BigNumber.from(0);\n\n  for (const path of paths) {\n    try {\n      const pathUsdOut = path.reduce((prevUsdOut, edge) => {\n        const { usdOut } = estimator(edge, prevUsdOut);\n        return usdOut;\n      }, usdIn);\n\n      if (pathUsdOut.gt(bestUsdOut)) {\n        bestPath = path;\n        bestUsdOut = pathUsdOut;\n      }\n    } catch (e) {\n      continue;\n    }\n  }\n\n  return bestPath;\n}\n\nexport function findAllPaths(graph: MarketsGraph, from: string, to: string, maxDepth = 3) {\n  const paths: MarketEdge[][] = [];\n\n  const edges = graph.abjacencyList[from];\n\n  if (!edges?.length) {\n    return undefined;\n  }\n\n  for (const e of edges) {\n    dfs(e, [], {});\n  }\n\n  function dfs(edge: MarketEdge, path: MarketEdge[], visited: { [edgeId: string]: boolean }) {\n    // avoid too deep paths and cycles\n    if (path.length >= maxDepth || visited[edge.marketAddress]) {\n      return;\n    }\n\n    visited[edge.marketAddress] = true;\n    path.push(edge);\n\n    if (edge.to === to) {\n      paths.push(path);\n      return;\n    }\n\n    const edges = graph.abjacencyList[edge.to];\n\n    if (!edges?.length) {\n      return;\n    }\n\n    for (const e of edges) {\n      dfs(e, [...path], { ...visited });\n    }\n  }\n\n  return paths;\n}\n","import { BigNumber } from \"ethers\";\nimport { FeeItem, SwapFeeItem } from \"domain/synthetics/fees\";\nimport { DecreasePositionSwapType, OrderType } from \"domain/synthetics/orders\";\n\nexport enum TradeType {\n  Long = \"Long\",\n  Short = \"Short\",\n  Swap = \"Swap\",\n}\n\nexport enum TradeMode {\n  Market = \"Market\",\n  Limit = \"Limit\",\n  Trigger = \"Trigger\",\n}\n\nexport enum TriggerThresholdType {\n  Above = \">\",\n  Below = \"<\",\n}\n\nexport type SwapAmounts = {\n  amountIn: BigNumber;\n  usdIn: BigNumber;\n  amountOut: BigNumber;\n  usdOut: BigNumber;\n  priceIn: BigNumber;\n  priceOut: BigNumber;\n  swapPathStats: SwapPathStats | undefined;\n  minOutputAmount: BigNumber;\n};\n\nexport type IncreasePositionAmounts = {\n  initialCollateralAmount: BigNumber;\n  initialCollateralUsd: BigNumber;\n  collateralAmountAfterFees: BigNumber;\n  collateralUsdAfterFees: BigNumber;\n  sizeDeltaUsd: BigNumber;\n  sizeDeltaInTokens: BigNumber;\n  swapPathStats: SwapPathStats | undefined;\n  positionFeeUsd: BigNumber;\n  positionPriceImpactDeltaUsd: BigNumber;\n  markPrice: BigNumber;\n  entryPrice: BigNumber;\n  triggerPrice?: BigNumber;\n  initialCollateralPrice: BigNumber;\n  collateralPrice: BigNumber;\n  acceptablePrice: BigNumber | undefined;\n  acceptablePriceImpactBps: BigNumber | undefined;\n};\n\nexport type DecreasePositionAmounts = {\n  sizeDeltaUsd: BigNumber;\n  sizeDeltaInTokens: BigNumber;\n  collateralDeltaUsd: BigNumber;\n  collateralDeltaAmount: BigNumber;\n  pnlDelta: BigNumber;\n  receiveTokenAmount: BigNumber;\n  receiveUsd: BigNumber;\n  positionFeeUsd: BigNumber;\n  positionPriceImpactDeltaUsd: BigNumber;\n  // Mark price or trigger price\n  exitPrice: BigNumber;\n  // The pnl including exitPrice\n  exitPnl: BigNumber;\n  exitPnlPercentage: BigNumber;\n  triggerPrice?: BigNumber;\n  triggerOrderType?: OrderType.LimitDecrease | OrderType.StopLossDecrease;\n  triggerPricePrefix?: TriggerThresholdType;\n  decreaseSwapType: DecreasePositionSwapType;\n  acceptablePrice: BigNumber | undefined;\n  acceptablePriceImpactBps: BigNumber | undefined;\n};\n\nexport type DepositAmounts = {\n  marketTokenAmount: BigNumber;\n  marketTokenUsd: BigNumber;\n  longTokenAmount?: BigNumber;\n  longTokenUsd?: BigNumber;\n  shortTokenAmount?: BigNumber;\n  shortTokenUsd?: BigNumber;\n  swapFeeUsd: BigNumber;\n  swapPriceImpactDeltaUsd: BigNumber;\n};\n\nexport type WithdrawalAmounts = {\n  marketTokenAmount: BigNumber;\n  marketTokenUsd: BigNumber;\n  longTokenAmount: BigNumber;\n  shortTokenAmount: BigNumber;\n  longTokenUsd: BigNumber;\n  shortTokenUsd: BigNumber;\n  swapFeeUsd: BigNumber;\n};\n\nexport type NextPositionValues = {\n  nextLeverage?: BigNumber;\n  nextLiqPrice?: BigNumber;\n  nextCollateralUsd?: BigNumber;\n  nextSizeUsd?: BigNumber;\n  nextPnl?: BigNumber;\n  nextPnlPercentage?: BigNumber;\n  nextEntryPrice?: BigNumber;\n};\n\nexport type SwapStats = {\n  marketAddress: string;\n  tokenInAddress: string;\n  tokenOutAddress: string;\n  isWrap: boolean;\n  isUnwrap: boolean;\n  isOutLiquidity?: boolean;\n  swapFeeAmount: BigNumber;\n  swapFeeUsd: BigNumber;\n  priceImpactDeltaUsd: BigNumber;\n  amountIn: BigNumber;\n  amountInAfterFees: BigNumber;\n  amountOut: BigNumber;\n  usdOut: BigNumber;\n};\n\nexport type SwapPathStats = {\n  swapPath: string[];\n  swapSteps: SwapStats[];\n  targetMarketAddress?: string;\n  totalSwapPriceImpactDeltaUsd: BigNumber;\n  totalSwapFeeUsd: BigNumber;\n  totalFeesDeltaUsd: BigNumber;\n  tokenInAddress: string;\n  tokenOutAddress: string;\n  usdOut: BigNumber;\n  amountOut: BigNumber;\n};\n\nexport type MarketEdge = {\n  marketAddress: string;\n  // from token\n  from: string;\n  // to token\n  to: string;\n};\n\nexport type MarketsGraph = {\n  abjacencyList: { [token: string]: MarketEdge[] };\n  edges: MarketEdge[];\n};\n\nexport type SwapEstimator = (\n  e: MarketEdge,\n  usdIn: BigNumber\n) => {\n  usdOut: BigNumber;\n};\n\nexport type FindSwapPath = (usdIn: BigNumber, opts: { shouldApplyPriceImpact: boolean }) => SwapPathStats | undefined;\n\nexport type TradeFeesType = \"swap\" | \"increase\" | \"decrease\" | \"edit\";\n\nexport type TradeFees = {\n  totalFees?: FeeItem;\n  swapFees?: SwapFeeItem[];\n  positionFee?: FeeItem;\n  swapPriceImpact?: FeeItem;\n  positionPriceImpact?: FeeItem;\n  positionFeeFactor?: BigNumber;\n  borrowFee?: FeeItem;\n  fundingFee?: FeeItem;\n};\n\nexport type GmSwapFees = {\n  totalFees?: FeeItem;\n  swapFee?: FeeItem;\n  swapPriceImpact?: FeeItem;\n};\n","import { TokenData, TokensRatio, convertToTokenAmount, convertToUsd, getAmountByRatio } from \"domain/synthetics/tokens\";\nimport { BigNumber } from \"ethers\";\nimport { FindSwapPath, SwapAmounts } from \"../types\";\n\nexport function getSwapAmountsByFromValue(p: {\n  tokenIn: TokenData;\n  tokenOut: TokenData;\n  amountIn: BigNumber;\n  triggerRatio?: TokensRatio;\n  isLimit: boolean;\n  findSwapPath: FindSwapPath;\n}): SwapAmounts {\n  const { tokenIn, tokenOut, amountIn, triggerRatio, isLimit, findSwapPath } = p;\n\n  const priceIn = tokenIn.prices.minPrice;\n  const priceOut = tokenOut.prices.maxPrice;\n\n  const usdIn = convertToUsd(amountIn, tokenIn.decimals, priceIn)!;\n\n  let amountOut = BigNumber.from(0);\n  let usdOut = BigNumber.from(0);\n  let minOutputAmount = BigNumber.from(0);\n\n  const defaultAmounts: SwapAmounts = {\n    amountIn,\n    usdIn,\n    amountOut,\n    usdOut,\n    minOutputAmount,\n    priceIn,\n    priceOut,\n    swapPathStats: undefined,\n  };\n\n  if (amountIn.lte(0)) {\n    return defaultAmounts;\n  }\n\n  const swapPathStats = findSwapPath(defaultAmounts.usdIn, { shouldApplyPriceImpact: true });\n\n  if (!swapPathStats) {\n    return defaultAmounts;\n  }\n\n  if (isLimit) {\n    if (!triggerRatio) {\n      return defaultAmounts;\n    }\n\n    const swapFeeAmount = convertToTokenAmount(swapPathStats.totalSwapFeeUsd, tokenIn.decimals, priceIn)!;\n    const priceImpactAmount = convertToTokenAmount(\n      swapPathStats.totalSwapPriceImpactDeltaUsd,\n      tokenIn.decimals,\n      priceIn\n    )!;\n    const amountInAfterFees = amountIn.sub(swapFeeAmount).add(priceImpactAmount);\n\n    amountOut = getAmountByRatio({\n      fromToken: tokenIn,\n      toToken: tokenOut,\n      fromTokenAmount: amountInAfterFees,\n      ratio: triggerRatio.ratio,\n      shouldInvertRatio: triggerRatio.largestToken.address === tokenOut.address,\n    });\n\n    usdOut = convertToUsd(amountOut, tokenOut.decimals, priceOut)!;\n    minOutputAmount = amountOut;\n  } else {\n    usdOut = swapPathStats.usdOut;\n    amountOut = swapPathStats.amountOut;\n    minOutputAmount = amountOut;\n  }\n\n  return {\n    amountIn,\n    usdIn,\n    amountOut,\n    usdOut,\n    priceIn,\n    priceOut,\n    minOutputAmount,\n    swapPathStats,\n  };\n}\n\nexport function getSwapAmountsByToValue(p: {\n  tokenIn: TokenData;\n  tokenOut: TokenData;\n  amountOut: BigNumber;\n  triggerRatio?: TokensRatio;\n  isLimit: boolean;\n  findSwapPath: FindSwapPath;\n}): SwapAmounts {\n  const { tokenIn, tokenOut, amountOut, triggerRatio, isLimit, findSwapPath } = p;\n\n  const priceIn = tokenIn.prices.minPrice;\n  const priceOut = tokenOut.prices.maxPrice;\n\n  const usdOut = convertToUsd(amountOut, tokenOut.decimals, priceOut)!;\n  const minOutputAmount = amountOut;\n\n  let amountIn = BigNumber.from(0);\n  let usdIn = BigNumber.from(0);\n\n  const defaultAmounts: SwapAmounts = {\n    amountIn,\n    usdIn,\n    amountOut,\n    usdOut,\n    minOutputAmount,\n    priceIn,\n    priceOut,\n    swapPathStats: undefined,\n  };\n\n  if (amountOut.lte(0)) {\n    return defaultAmounts;\n  }\n\n  const baseUsdIn = usdOut;\n  const swapPathStats = findSwapPath(baseUsdIn, { shouldApplyPriceImpact: true });\n\n  if (!swapPathStats) {\n    return defaultAmounts;\n  }\n\n  if (isLimit) {\n    if (!triggerRatio) {\n      return defaultAmounts;\n    }\n\n    amountIn = getAmountByRatio({\n      fromToken: tokenOut,\n      toToken: tokenIn,\n      fromTokenAmount: amountOut,\n      ratio: triggerRatio.ratio,\n      shouldInvertRatio: triggerRatio.largestToken.address === tokenIn.address,\n    });\n\n    const swapFeeAmount = convertToTokenAmount(swapPathStats.totalSwapFeeUsd, tokenIn.decimals, priceIn)!;\n    const priceImpactAmount = convertToTokenAmount(\n      swapPathStats.totalSwapPriceImpactDeltaUsd,\n      tokenIn.decimals,\n      priceIn\n    )!;\n\n    amountIn = amountIn.add(swapFeeAmount).sub(priceImpactAmount);\n    usdIn = convertToUsd(amountIn, tokenIn.decimals, priceIn)!;\n  } else {\n    const adjustedUsdIn = swapPathStats.usdOut.gt(0)\n      ? baseUsdIn.mul(usdOut).div(swapPathStats.usdOut)\n      : BigNumber.from(0);\n\n    usdIn = adjustedUsdIn;\n    amountIn = convertToTokenAmount(usdIn, tokenIn.decimals, priceIn)!;\n  }\n\n  return {\n    amountIn,\n    usdIn,\n    amountOut,\n    usdOut,\n    minOutputAmount,\n    priceIn,\n    priceOut,\n    swapPathStats,\n  };\n}\n","import { OrderType } from \"domain/synthetics/orders\";\nimport { TokenPrices } from \"domain/synthetics/tokens\";\nimport { BigNumber } from \"ethers\";\nimport { BASIS_POINTS_DIVISOR } from \"lib/legacy\";\nimport { getBasisPoints } from \"lib/numbers\";\nimport { TriggerThresholdType } from \"../types\";\n\nexport function getMarkPrice(p: { prices: TokenPrices; isIncrease: boolean; isLong: boolean }) {\n  const { prices, isIncrease, isLong } = p;\n\n  const shouldUseMaxPrice = isIncrease ? isLong : !isLong;\n\n  return shouldUseMaxPrice ? prices.maxPrice : prices.minPrice;\n}\n\nexport function getTriggerThresholdType(orderType: OrderType, isLong: boolean) {\n  // limit order\n  if (orderType === OrderType.LimitIncrease) {\n    return isLong ? TriggerThresholdType.Below : TriggerThresholdType.Above;\n  }\n\n  if (orderType === OrderType.LimitDecrease) {\n    return isLong ? TriggerThresholdType.Above : TriggerThresholdType.Below;\n  }\n  // stop-loss order\n\n  if (orderType === OrderType.StopLossDecrease) {\n    return isLong ? TriggerThresholdType.Below : TriggerThresholdType.Above;\n  }\n\n  throw new Error(\"Invalid trigger order type\");\n}\n\nexport function getTriggerDecreaseOrderType(p: {\n  triggerPrice: BigNumber;\n  markPrice: BigNumber;\n  isLong: boolean;\n}): OrderType.LimitDecrease | OrderType.StopLossDecrease {\n  const { triggerPrice, markPrice, isLong } = p;\n\n  const isTriggerAboveMarkPrice = triggerPrice.gt(markPrice);\n\n  if (isTriggerAboveMarkPrice) {\n    return isLong ? OrderType.LimitDecrease : OrderType.StopLossDecrease;\n  } else {\n    return isLong ? OrderType.StopLossDecrease : OrderType.LimitDecrease;\n  }\n}\n\nexport function getAcceptablePrice(p: {\n  isIncrease: boolean;\n  isLong: boolean;\n  indexPrice: BigNumber;\n  priceImpactDeltaUsd?: BigNumber;\n  sizeDeltaUsd: BigNumber;\n  acceptablePriceImpactBps?: BigNumber;\n}) {\n  let acceptablePrice = p.indexPrice;\n  let acceptablePriceImpactBps = p.acceptablePriceImpactBps || BigNumber.from(0);\n\n  const shouldFlipPriceImpact = p.isIncrease ? p.isLong : !p.isLong;\n\n  if (acceptablePriceImpactBps.abs().gt(0)) {\n    let priceDelta = p.indexPrice.mul(acceptablePriceImpactBps).div(BASIS_POINTS_DIVISOR);\n    priceDelta = shouldFlipPriceImpact ? priceDelta?.mul(-1) : priceDelta;\n\n    acceptablePrice = p.indexPrice.sub(priceDelta);\n  } else if (p.sizeDeltaUsd?.gt(0) && p.priceImpactDeltaUsd?.abs().gt(0)) {\n    const priceImpactForPriceAdjustment = shouldFlipPriceImpact ? p.priceImpactDeltaUsd.mul(-1) : p.priceImpactDeltaUsd;\n    acceptablePrice = p.indexPrice.mul(p.sizeDeltaUsd.add(priceImpactForPriceAdjustment)).div(p.sizeDeltaUsd);\n\n    const priceDelta = p.indexPrice\n      .sub(acceptablePrice)\n      .abs()\n      .mul(p.priceImpactDeltaUsd.isNegative() ? -1 : 1);\n\n    acceptablePriceImpactBps = getBasisPoints(priceDelta, p.indexPrice);\n  }\n\n  return {\n    acceptablePrice,\n    acceptablePriceImpactBps,\n  };\n}\n\nexport function applySlippage(allowedSlippage: number, price: BigNumber, isIncrease: boolean, isLong: boolean) {\n  let slippageBasisPoints: number;\n\n  if (isIncrease) {\n    slippageBasisPoints = isLong ? BASIS_POINTS_DIVISOR + allowedSlippage : BASIS_POINTS_DIVISOR - allowedSlippage;\n  } else {\n    slippageBasisPoints = isLong ? BASIS_POINTS_DIVISOR - allowedSlippage : BASIS_POINTS_DIVISOR + allowedSlippage;\n  }\n\n  return price.mul(slippageBasisPoints).div(BASIS_POINTS_DIVISOR);\n}\n","import { VirtualInventoryForPositionsData, getPositionFee, getPriceImpactForPosition } from \"domain/synthetics/fees\";\nimport { Market, MarketInfo } from \"domain/synthetics/markets\";\nimport { DecreasePositionSwapType, OrderType } from \"domain/synthetics/orders\";\nimport { PositionInfo, getLeverage, getLiquidationPrice, getPositionPnlUsd } from \"domain/synthetics/positions\";\nimport { TokenData, convertToTokenAmount } from \"domain/synthetics/tokens\";\nimport { BigNumber } from \"ethers\";\nimport { DUST_USD } from \"lib/legacy\";\nimport { getBasisPoints } from \"lib/numbers\";\nimport { DecreasePositionAmounts, NextPositionValues, TriggerThresholdType } from \"../types\";\nimport { getAcceptablePrice, getMarkPrice, getTriggerDecreaseOrderType, getTriggerThresholdType } from \"./prices\";\n\nexport function getDecreasePositionAmounts(p: {\n  marketInfo: MarketInfo;\n  collateralToken: TokenData;\n  virtualInventoryForPositions: VirtualInventoryForPositionsData;\n  isLong: boolean;\n  existingPosition?: PositionInfo;\n  receiveToken: TokenData;\n  closeSizeUsd: BigNumber;\n  keepLeverage: boolean;\n  isTrigger?: boolean;\n  triggerPrice?: BigNumber;\n  savedAcceptablePriceImpactBps?: BigNumber;\n}): DecreasePositionAmounts {\n  const {\n    marketInfo,\n    collateralToken,\n    receiveToken,\n    isLong,\n    existingPosition,\n    closeSizeUsd,\n    keepLeverage,\n    isTrigger,\n    triggerPrice,\n    savedAcceptablePriceImpactBps,\n    virtualInventoryForPositions,\n  } = p;\n\n  const { indexToken } = p.marketInfo;\n  const markPrice = getMarkPrice({ prices: indexToken.prices, isIncrease: false, isLong });\n  const exitPrice = isTrigger && triggerPrice ? triggerPrice : markPrice;\n\n  const decreaseSwapType = getDecreaseSwapType({\n    market: marketInfo,\n    collateralTokenAddress: collateralToken.address,\n    isLong,\n  });\n\n  let triggerPricePrefix: TriggerThresholdType | undefined = undefined;\n  let triggerOrderType: OrderType | undefined = undefined;\n\n  if (isTrigger && triggerPrice) {\n    triggerOrderType = getTriggerDecreaseOrderType({\n      markPrice,\n      triggerPrice,\n      isLong,\n    });\n    triggerPricePrefix = getTriggerThresholdType(triggerOrderType, isLong);\n  }\n\n  let sizeDeltaUsd = closeSizeUsd;\n\n  const isClosing = existingPosition?.sizeInUsd.sub(sizeDeltaUsd).lt(DUST_USD) || false;\n\n  if (isClosing) {\n    sizeDeltaUsd = existingPosition!.sizeInUsd;\n  }\n\n  const sizeDeltaInTokens = convertToTokenAmount(sizeDeltaUsd, indexToken.decimals, exitPrice)!;\n\n  const positionFeeUsd = getPositionFee(marketInfo, sizeDeltaUsd);\n  const positionPriceImpactDeltaUsd = getPriceImpactForPosition(\n    marketInfo,\n    virtualInventoryForPositions,\n    sizeDeltaUsd,\n    isLong\n  );\n\n  const { acceptablePrice, acceptablePriceImpactBps } = getAcceptablePrice({\n    isIncrease: false,\n    isLong,\n    indexPrice: exitPrice,\n    sizeDeltaUsd,\n    priceImpactDeltaUsd: !isTrigger ? positionPriceImpactDeltaUsd : undefined,\n    acceptablePriceImpactBps: isTrigger ? savedAcceptablePriceImpactBps : undefined,\n  });\n\n  let collateralDeltaUsd = BigNumber.from(0);\n  let collateralDeltaAmount = BigNumber.from(0);\n  let receiveUsd = BigNumber.from(0);\n  let receiveTokenAmount = BigNumber.from(0);\n  let exitPnl = BigNumber.from(0);\n  let exitPnlPercentage = BigNumber.from(0);\n  let pnlDelta = BigNumber.from(0);\n\n  if (existingPosition && existingPosition.sizeInUsd.gt(0) && existingPosition.initialCollateralUsd.gt(0)) {\n    const collateralDeltaInfo = getCollateralDeltaForDecreaseOrder({\n      position: existingPosition,\n      sizeDeltaUsd,\n      keepLeverage,\n      collateralPrice: collateralToken.prices.maxPrice,\n    });\n\n    collateralDeltaUsd = collateralDeltaInfo.collateralDeltaUsd;\n    collateralDeltaAmount = collateralDeltaInfo.collateralDeltaAmount;\n\n    exitPnl = getPositionPnlUsd({\n      marketInfo,\n      sizeInUsd: existingPosition.sizeInUsd,\n      sizeInTokens: existingPosition.sizeInTokens,\n      isLong,\n      markPrice: exitPrice,\n    });\n    exitPnlPercentage = !existingPosition.initialCollateralUsd.eq(0)\n      ? getBasisPoints(exitPnl, existingPosition.initialCollateralUsd)\n      : BigNumber.from(0);\n\n    pnlDelta = getPnlDeltaForDecreaseOrder({\n      sizeInUsd: existingPosition.sizeInUsd,\n      sizeInTokens: existingPosition.sizeInTokens,\n      isLong,\n      pnl: exitPnl,\n      sizeDeltaUsd,\n    });\n\n    receiveUsd = collateralDeltaUsd\n      .add(pnlDelta)\n      .sub(positionFeeUsd)\n      .sub(existingPosition.pendingBorrowingFeesUsd)\n      .add(positionPriceImpactDeltaUsd)\n      .sub(existingPosition.pendingFundingFeesUsd);\n\n    if (receiveUsd.lt(0)) {\n      receiveUsd = BigNumber.from(0);\n    }\n\n    receiveTokenAmount = convertToTokenAmount(receiveUsd, receiveToken.decimals, receiveToken.prices.minPrice)!;\n  }\n\n  return {\n    sizeDeltaUsd,\n    sizeDeltaInTokens,\n    collateralDeltaUsd,\n    collateralDeltaAmount,\n    pnlDelta,\n    receiveUsd,\n    receiveTokenAmount,\n    exitPrice: exitPrice,\n    exitPnl,\n    exitPnlPercentage,\n    acceptablePrice,\n    positionFeeUsd,\n    triggerPrice,\n    triggerPricePrefix,\n    triggerOrderType,\n    decreaseSwapType,\n    positionPriceImpactDeltaUsd,\n    acceptablePriceImpactBps,\n  };\n}\n\nexport function getNextPositionValuesForDecreaseTrade(p: {\n  existingPosition?: PositionInfo;\n  marketInfo: MarketInfo;\n  sizeDeltaUsd: BigNumber;\n  pnlDelta: BigNumber;\n  exitPnl: BigNumber;\n  collateralDeltaUsd: BigNumber;\n  executionPrice: BigNumber;\n  showPnlInLeverage: boolean;\n  isLong: boolean;\n  minCollateralUsd: BigNumber;\n}): NextPositionValues {\n  const {\n    existingPosition,\n    marketInfo,\n    sizeDeltaUsd,\n    pnlDelta,\n    exitPnl,\n    collateralDeltaUsd,\n    executionPrice,\n    showPnlInLeverage,\n    isLong,\n    minCollateralUsd,\n  } = p;\n\n  const nextSizeUsd = existingPosition ? existingPosition.sizeInUsd.sub(sizeDeltaUsd) : BigNumber.from(0);\n\n  const nextCollateralUsd = existingPosition\n    ? existingPosition.initialCollateralUsd.sub(collateralDeltaUsd)\n    : BigNumber.from(0);\n\n  const nextPnl = exitPnl.gt(0) ? exitPnl.sub(pnlDelta) : BigNumber.from(0);\n  const nextPnlPercentage = !nextCollateralUsd.eq(0) ? getBasisPoints(nextPnl, nextCollateralUsd) : BigNumber.from(0);\n\n  const nextLeverage = getLeverage({\n    sizeInUsd: nextSizeUsd,\n    collateralUsd: nextCollateralUsd,\n    pnl: showPnlInLeverage ? nextPnl : undefined,\n    pendingBorrowingFeesUsd: BigNumber.from(0), // deducted on order\n    pendingFundingFeesUsd: BigNumber.from(0), // deducted on order\n  });\n\n  const nextLiqPrice = getLiquidationPrice({\n    sizeInUsd: nextSizeUsd,\n    collateralUsd: nextCollateralUsd,\n    markPrice: executionPrice,\n    minCollateralFactor: marketInfo.minCollateralFactor,\n    minCollateralUsd,\n    closingFeeUsd: getPositionFee(marketInfo, sizeDeltaUsd),\n    maxPriceImpactFactor: marketInfo?.maxPositionImpactFactorForLiquidations,\n    pendingBorrowingFeesUsd: BigNumber.from(0), // deducted on order\n    pendingFundingFeesUsd: BigNumber.from(0), // deducted on order\n    pnl: pnlDelta,\n    isLong: isLong,\n  });\n\n  return {\n    nextSizeUsd,\n    nextCollateralUsd,\n    nextLiqPrice,\n    nextPnl,\n    nextPnlPercentage,\n    nextLeverage,\n  };\n}\n\nexport function getCollateralDeltaForDecreaseOrder(p: {\n  position: {\n    sizeInUsd: BigNumber;\n    initialCollateralUsd: BigNumber;\n    collateralToken: TokenData;\n  };\n  sizeDeltaUsd: BigNumber;\n  collateralPrice: BigNumber;\n  keepLeverage: boolean;\n}) {\n  const { position, sizeDeltaUsd, collateralPrice, keepLeverage } = p;\n\n  let collateralDeltaUsd = BigNumber.from(0);\n\n  if (position.sizeInUsd.eq(sizeDeltaUsd)) {\n    collateralDeltaUsd = position.initialCollateralUsd;\n  } else if (keepLeverage) {\n    collateralDeltaUsd = sizeDeltaUsd.mul(position.initialCollateralUsd).div(position.sizeInUsd);\n  }\n\n  const collateralDeltaAmount = convertToTokenAmount(\n    collateralDeltaUsd,\n    position.collateralToken.decimals,\n    collateralPrice\n  )!;\n\n  return { collateralDeltaUsd, collateralDeltaAmount };\n}\n\nexport function getPnlDeltaForDecreaseOrder(p: {\n  pnl: BigNumber;\n  sizeInUsd: BigNumber;\n  sizeInTokens: BigNumber;\n  isLong: boolean;\n  sizeDeltaUsd: BigNumber;\n}) {\n  const { pnl, sizeInTokens, sizeInUsd, isLong, sizeDeltaUsd } = p;\n\n  let sizeDeltaInTokens: BigNumber;\n\n  if (sizeInUsd.eq(sizeDeltaUsd)) {\n    sizeDeltaInTokens = sizeInTokens;\n  } else {\n    if (isLong) {\n      // roudUpDivision\n      sizeDeltaInTokens = sizeDeltaUsd.mul(sizeInTokens).div(sizeInUsd);\n    } else {\n      sizeDeltaInTokens = sizeDeltaUsd.mul(sizeInTokens).div(sizeInUsd);\n    }\n  }\n\n  const pnlDelta = pnl.mul(sizeDeltaInTokens).div(sizeInTokens);\n\n  return pnlDelta;\n}\n\nexport function getDecreaseSwapType(p: { market: Market; collateralTokenAddress: string; isLong: boolean }) {\n  const { market, collateralTokenAddress, isLong } = p;\n\n  const pnlTokenAddress = isLong ? market.longTokenAddress : market.shortTokenAddress;\n\n  if (pnlTokenAddress !== collateralTokenAddress) {\n    return DecreasePositionSwapType.SwapPnlTokenToCollateralToken;\n  }\n\n  return DecreasePositionSwapType.NoSwap;\n}\n","import { SwapFeeItem, getFeeItem, getTotalFeeItem } from \"domain/synthetics/fees\";\nimport { BigNumber } from \"ethers\";\nimport { getBasisPoints } from \"lib/numbers\";\nimport { SwapStats, TradeFees, TradeMode, TradeType } from \"../types\";\n\nexport function getTradeFlags(tradeType: TradeType, tradeMode: TradeMode) {\n  const isLong = tradeType === TradeType.Long;\n  const isShort = tradeType === TradeType.Short;\n  const isSwap = tradeType === TradeType.Swap;\n  const isPosition = isLong || isShort;\n  const isMarket = tradeMode === TradeMode.Market;\n  const isLimit = tradeMode === TradeMode.Limit;\n  const isTrigger = tradeMode === TradeMode.Trigger;\n  const isIncrease = isPosition && (isMarket || isLimit);\n\n  return {\n    isLong,\n    isShort,\n    isSwap,\n    isPosition,\n    isIncrease,\n    isTrigger,\n    isMarket,\n    isLimit,\n  };\n}\n\nexport function getTradeFees(p: {\n  initialCollateralUsd: BigNumber;\n  sizeDeltaUsd: BigNumber;\n  swapSteps: SwapStats[];\n  positionFeeUsd: BigNumber;\n  swapPriceImpactDeltaUsd: BigNumber;\n  positionPriceImpactDeltaUsd: BigNumber;\n  borrowingFeeUsd: BigNumber;\n  fundingFeeDeltaUsd: BigNumber;\n}): TradeFees {\n  const {\n    initialCollateralUsd,\n    sizeDeltaUsd,\n    swapSteps,\n    positionFeeUsd,\n    swapPriceImpactDeltaUsd,\n    positionPriceImpactDeltaUsd,\n    borrowingFeeUsd,\n    fundingFeeDeltaUsd,\n  } = p;\n\n  const swapBasis = initialCollateralUsd;\n  const positionBasis = sizeDeltaUsd;\n\n  const swapFees: SwapFeeItem[] | undefined = swapBasis.gt(0)\n    ? swapSteps.map((step) => ({\n        tokenInAddress: step.tokenInAddress,\n        tokenOutAddress: step.tokenOutAddress,\n        marketAddress: step.marketAddress,\n        deltaUsd: step.swapFeeUsd.mul(-1),\n        bps: getBasisPoints(step.swapFeeUsd.mul(-1), swapBasis),\n      }))\n    : undefined;\n\n  const swapPriceImpactFee = getFeeItem(swapPriceImpactDeltaUsd, swapBasis);\n\n  const positionFee = getFeeItem(positionFeeUsd.mul(-1), positionBasis);\n\n  const borrowFee = getFeeItem(borrowingFeeUsd.mul(-1), initialCollateralUsd);\n\n  const fundingFee = fundingFeeDeltaUsd.lt(0) ? getFeeItem(fundingFeeDeltaUsd, initialCollateralUsd) : undefined;\n\n  const positionPriceImpactFee = getFeeItem(positionPriceImpactDeltaUsd, positionBasis);\n\n  const totalFees = getTotalFeeItem([\n    ...(swapFees || []),\n    swapPriceImpactFee,\n    positionFee,\n    positionPriceImpactFee,\n    borrowFee,\n    fundingFee,\n  ]);\n\n  return {\n    totalFees,\n    swapFees,\n    swapPriceImpact: swapPriceImpactFee,\n    positionFee,\n    positionPriceImpact: positionPriceImpactFee,\n    borrowFee,\n    fundingFee,\n  };\n}\n","import DataStore from \"abis/DataStore.json\";\nimport { getContract } from \"config/contracts\";\nimport {\n  virtualInventoryForPositionsKey,\n  virtualInventoryForSwapsKey,\n  virtualMarketIdKey,\n  virtualTokenIdKey,\n} from \"config/dataStore\";\nimport { getAvailableTradeTokens } from \"config/tokens\";\nimport { MulticallRequestConfig, useMulticall } from \"lib/multicall\";\nimport { useMemo } from \"react\";\nimport { VirtualInventoryForPositionsData, VirtualInventoryForSwapsData } from \"./types\";\nimport { useMarkets } from \"../markets\";\n\nexport type VirtualInventoryResult = {\n  virtualInventoryForSwaps?: VirtualInventoryForSwapsData;\n  virtualInventoryForPositions?: VirtualInventoryForPositionsData;\n};\n\nconst ZERO_VIRTUAL_ID = \"0x0000000000000000000000000000000000000000000000000000000000000000\";\n\nexport function useVirtualInventory(chainId: number): VirtualInventoryResult {\n  const { marketsData, marketsAddresses } = useMarkets(chainId);\n\n  const tokens = useMemo(() => getAvailableTradeTokens(chainId, { includeSynthetic: true }), [chainId]);\n\n  const { data: virtualIds } = useMulticall(chainId, \"useVirtualInventory-ids\", {\n    key: marketsAddresses?.length ? [chainId, marketsAddresses?.join(\"-\")] : null,\n    request: () => {\n      const req: MulticallRequestConfig<any> = {\n        dataStore: {\n          contractAddress: getContract(chainId, \"DataStore\"),\n          abi: DataStore.abi,\n          calls: {},\n        },\n      };\n\n      tokens.forEach((token) => {\n        if (!token.isNative) {\n          req.dataStore.calls[`token-${token.address}`] = {\n            methodName: \"getBytes32\",\n            params: [virtualTokenIdKey(token.address)],\n          };\n        }\n      });\n\n      marketsAddresses!.forEach((marketAddress) => {\n        req.dataStore.calls[`market-${marketAddress}`] = {\n          methodName: \"getBytes32\",\n          params: [virtualMarketIdKey(marketAddress)],\n        };\n      });\n\n      return req;\n    },\n    parseResponse: (res) => {\n      const response = {\n        virtualMarketsIds: {},\n        virtualTokensIds: {},\n      };\n\n      tokens.forEach((token) => {\n        if (!token.isNative) {\n          response.virtualTokensIds[token.address] = res.dataStore[`token-${token.address}`].returnValues[0];\n        }\n      });\n\n      marketsAddresses!.forEach((marketAddress) => {\n        response.virtualMarketsIds[marketAddress] = res.dataStore[`market-${marketAddress}`].returnValues[0];\n      });\n\n      return response;\n    },\n  });\n\n  const { data: virtualInventory } = useMulticall(chainId, \"useVirtualInventory\", {\n    key: virtualIds\n      ? [Object.keys(virtualIds.virtualMarketsIds).join(\"-\"), Object.keys(virtualIds.virtualTokensIds).join(\"-\")]\n      : null,\n    request: () => {\n      const req: MulticallRequestConfig<any> = {\n        dataStore: {\n          contractAddress: getContract(chainId, \"DataStore\"),\n          abi: DataStore.abi,\n          calls: {},\n        },\n      };\n\n      Object.keys(virtualIds!.virtualTokensIds).forEach((tokenAddress) => {\n        if (virtualIds!.virtualTokensIds[tokenAddress] !== ZERO_VIRTUAL_ID) {\n          req.dataStore.calls[`forPositions-${tokenAddress}`] = {\n            methodName: \"getInt\",\n            params: [virtualInventoryForPositionsKey(virtualIds!.virtualTokensIds[tokenAddress])],\n          };\n        }\n      });\n\n      Object.keys(virtualIds!.virtualMarketsIds).forEach((marketAddress) => {\n        const market = marketsData![marketAddress];\n\n        if (virtualIds!.virtualMarketsIds[marketAddress] !== ZERO_VIRTUAL_ID) {\n          req.dataStore.calls[`forSwaps-${marketAddress}-${market.longTokenAddress}`] = {\n            methodName: \"getUint\",\n            params: [\n              virtualInventoryForSwapsKey(virtualIds!.virtualMarketsIds[marketAddress], market.longTokenAddress),\n            ],\n          };\n\n          req.dataStore.calls[`forSwaps-${marketAddress}-${market.shortTokenAddress}`] = {\n            methodName: \"getUint\",\n            params: [\n              virtualInventoryForSwapsKey(virtualIds!.virtualMarketsIds[marketAddress], market.shortTokenAddress),\n            ],\n          };\n        }\n      });\n\n      return req;\n    },\n\n    parseResponse: (res) => {\n      const virtualInventoryForSwaps: VirtualInventoryForSwapsData = {};\n      const virtualInventoryForPositions: VirtualInventoryForPositionsData = {};\n\n      Object.keys(virtualIds!.virtualTokensIds).forEach((tokenAddress) => {\n        if (virtualIds!.virtualTokensIds[tokenAddress] !== ZERO_VIRTUAL_ID) {\n          virtualInventoryForPositions[tokenAddress] = res.dataStore[`forPositions-${tokenAddress}`].returnValues[0];\n        }\n      });\n\n      Object.keys(virtualIds!.virtualMarketsIds).forEach((marketAddress) => {\n        const market = marketsData![marketAddress];\n\n        if (virtualIds!.virtualMarketsIds[marketAddress] !== ZERO_VIRTUAL_ID) {\n          virtualInventoryForSwaps[marketAddress] = {\n            [market.longTokenAddress]:\n              res.dataStore[`forSwaps-${marketAddress}-${market.longTokenAddress}`].returnValues[0],\n            [market.shortTokenAddress]:\n              res.dataStore[`forSwaps-${marketAddress}-${market.shortTokenAddress}`].returnValues[0],\n          };\n        }\n      });\n\n      return {\n        virtualInventoryForSwaps,\n        virtualInventoryForPositions,\n      };\n    },\n  });\n\n  return {\n    virtualInventoryForPositions: virtualInventory?.virtualInventoryForPositions,\n    virtualInventoryForSwaps: virtualInventory?.virtualInventoryForSwaps,\n  };\n}\n","import { NATIVE_TOKEN_ADDRESS, convertTokenAddress, getWrappedToken } from \"config/tokens\";\nimport { useMarketsInfo } from \"domain/synthetics/markets\";\nimport { useChainId } from \"lib/chains\";\nimport { useCallback, useMemo } from \"react\";\nimport { FindSwapPath, MarketEdge } from \"./types\";\nimport {\n  createSwapEstimator,\n  findAllPaths,\n  getBestSwapPath,\n  getMarketsGraph,\n  getMaxSwapPathLiquidity,\n  getSwapPathStats,\n} from \"./utils\";\nimport { BigNumber } from \"ethers\";\nimport { useVirtualInventory } from \"../fees/useVirtualInventory\";\n\nexport type SwapRoutesResult = {\n  allPaths?: MarketEdge[][];\n  maxSwapLiquidity: BigNumber;\n  maxLiquiditySwapPath?: string[];\n  findSwapPath: FindSwapPath;\n};\n\nexport function useSwapRoutes(p: { fromTokenAddress?: string; toTokenAddress?: string }): SwapRoutesResult {\n  const { fromTokenAddress, toTokenAddress } = p;\n  const { chainId } = useChainId();\n  const { marketsInfoData } = useMarketsInfo(chainId);\n  const { virtualInventoryForSwaps } = useVirtualInventory(chainId);\n\n  const wrappedToken = getWrappedToken(chainId);\n\n  const isWrap = fromTokenAddress === NATIVE_TOKEN_ADDRESS && toTokenAddress === wrappedToken.address;\n  const isUnwrap = fromTokenAddress === wrappedToken.address && toTokenAddress === NATIVE_TOKEN_ADDRESS;\n  const isSameToken = fromTokenAddress === toTokenAddress;\n\n  const wrappedFromAddress = fromTokenAddress ? convertTokenAddress(chainId, fromTokenAddress, \"wrapped\") : undefined;\n  const wrappedToAddress = toTokenAddress ? convertTokenAddress(chainId, toTokenAddress, \"wrapped\") : undefined;\n\n  const { graph, estimator } = useMemo(() => {\n    if (!marketsInfoData || !virtualInventoryForSwaps) {\n      return {};\n    }\n\n    return {\n      graph: getMarketsGraph(Object.values(marketsInfoData)),\n      estimator: createSwapEstimator(marketsInfoData, virtualInventoryForSwaps),\n    };\n  }, [marketsInfoData, virtualInventoryForSwaps]);\n\n  const allPaths = useMemo(() => {\n    if (!graph || !wrappedFromAddress || !wrappedToAddress || isWrap || isUnwrap || isSameToken) {\n      return undefined;\n    }\n\n    const p = findAllPaths(graph, wrappedFromAddress, wrappedToAddress);\n\n    return p;\n  }, [graph, isSameToken, isUnwrap, isWrap, wrappedFromAddress, wrappedToAddress]);\n\n  const { maxLiquidity, maxLiquidityPath } = useMemo(() => {\n    let maxLiquidity = BigNumber.from(0);\n    let maxLiquidityPath: string[] | undefined = undefined;\n\n    if (!allPaths || !marketsInfoData || !wrappedFromAddress) {\n      return { maxLiquidity, maxLiquidityPath };\n    }\n\n    for (const path of allPaths) {\n      const swapPath = path.map((edge) => edge.marketAddress);\n\n      const liquidity = getMaxSwapPathLiquidity({\n        marketsInfoData,\n        swapPath,\n        initialCollateralAddress: wrappedFromAddress,\n      });\n\n      if (liquidity.gt(maxLiquidity)) {\n        maxLiquidity = liquidity;\n        maxLiquidityPath = swapPath;\n      }\n    }\n\n    return { maxLiquidity, maxLiquidityPath };\n  }, [allPaths, marketsInfoData, wrappedFromAddress]);\n\n  const findSwapPath = useCallback(\n    (usdIn: BigNumber, opts: { shouldApplyPriceImpact: boolean }) => {\n      if (!allPaths || !estimator || !marketsInfoData || !fromTokenAddress || !virtualInventoryForSwaps) {\n        return undefined;\n      }\n\n      const bestSwapPathEdges = getBestSwapPath(allPaths, usdIn, estimator);\n\n      const swapPath = bestSwapPathEdges?.map((edge) => edge.marketAddress);\n\n      if (!swapPath) {\n        return undefined;\n      }\n\n      const swapPathStats = getSwapPathStats({\n        marketsInfoData,\n        swapPath,\n        initialCollateralAddress: fromTokenAddress,\n        wrappedNativeTokenAddress: wrappedToken.address,\n        shouldUnwrapNativeToken: toTokenAddress === NATIVE_TOKEN_ADDRESS,\n        shouldApplyPriceImpact: opts.shouldApplyPriceImpact,\n        usdIn,\n        virtualInventoryForSwaps,\n      });\n\n      if (!swapPathStats) {\n        return undefined;\n      }\n\n      return swapPathStats;\n    },\n    [\n      allPaths,\n      estimator,\n      fromTokenAddress,\n      marketsInfoData,\n      toTokenAddress,\n      virtualInventoryForSwaps,\n      wrappedToken.address,\n    ]\n  );\n\n  return {\n    maxSwapLiquidity: maxLiquidity,\n    maxLiquiditySwapPath: maxLiquidityPath,\n    allPaths,\n    findSwapPath,\n  };\n}\n","import { BigNumber } from \"ethers\";\nimport { BASIS_POINTS_DIVISOR, MAX_ALLOWED_LEVERAGE } from \"lib/legacy\";\nimport { getByKey } from \"lib/objects\";\nimport { useMemo } from \"react\";\nimport { getPositionFee } from \"../fees\";\nimport { useMarketsInfo } from \"../markets\";\nimport { convertToTokenAmount, convertToUsd, useAvailableTokensData } from \"../tokens\";\nimport { PositionsInfoData } from \"./types\";\nimport { useOptimisticPositions } from \"./useOptimisticPositions\";\nimport { usePositionsConstants } from \"./usePositionsConstants\";\nimport {\n  getEntryPrice,\n  getLeverage,\n  getLiquidationPrice,\n  getPositionNetValue,\n  getPositionPendingFeesUsd,\n  getPositionPnlUsd,\n} from \"./utils\";\nimport { getMarkPrice } from \"../trade\";\nimport { getBasisPoints } from \"lib/numbers\";\n\ntype PositionsInfoResult = {\n  positionsInfoData?: PositionsInfoData;\n  isLoading: boolean;\n};\n\nexport function usePositionsInfo(chainId: number, p: { showPnlInLeverage: boolean }): PositionsInfoResult {\n  const { showPnlInLeverage } = p;\n\n  const { marketsInfoData } = useMarketsInfo(chainId);\n  const { tokensData } = useAvailableTokensData(chainId);\n  const { optimisticPositionsData } = useOptimisticPositions(chainId);\n  const { minCollateralUsd } = usePositionsConstants(chainId);\n\n  return useMemo(() => {\n    if (!marketsInfoData || !tokensData || !optimisticPositionsData || !minCollateralUsd) {\n      return {\n        isLoading: true,\n      };\n    }\n\n    const positionsInfoData = Object.keys(optimisticPositionsData).reduce(\n      (acc: PositionsInfoData, positionKey: string) => {\n        const position = getByKey(optimisticPositionsData, positionKey)!;\n\n        const marketInfo = getByKey(marketsInfoData, position.marketAddress);\n        const indexToken = marketInfo?.indexToken;\n        const pnlToken = position.isLong ? marketInfo?.longToken : marketInfo?.shortToken;\n        const collateralToken = getByKey(tokensData, position.collateralTokenAddress);\n\n        if (!marketInfo || !indexToken || !pnlToken || !collateralToken) {\n          return acc;\n        }\n\n        const markPrice = getMarkPrice({ prices: indexToken.prices, isLong: position.isLong, isIncrease: false });\n        const collateralMarkPrice = getMarkPrice({\n          prices: collateralToken.prices,\n          isLong: position.isLong,\n          isIncrease: false,\n        });\n        const entryPrice = getEntryPrice({\n          sizeInTokens: position.sizeInTokens,\n          sizeInUsd: position.sizeInUsd,\n          indexToken,\n        });\n\n        const pendingFundingFeesUsd = convertToUsd(\n          position.fundingFeeAmount,\n          collateralToken.decimals,\n          collateralMarkPrice\n        )!;\n\n        const totalPendingFeesUsd = getPositionPendingFeesUsd({\n          pendingBorrowingFeesUsd: position.pendingBorrowingFeesUsd,\n          pendingFundingFeesUsd,\n        });\n\n        const closingFeeUsd = getPositionFee(marketInfo, position.sizeInUsd);\n\n        const initialCollateralUsd = convertToUsd(\n          position.collateralAmount,\n          collateralToken.decimals,\n          collateralMarkPrice\n        )!;\n        const remainingCollateralUsd = initialCollateralUsd.sub(totalPendingFeesUsd);\n        const remainingCollateralAmount = convertToTokenAmount(\n          remainingCollateralUsd,\n          collateralToken.decimals,\n          collateralMarkPrice\n        )!;\n\n        const pnl = getPositionPnlUsd({\n          marketInfo: marketInfo,\n          sizeInUsd: position.sizeInUsd,\n          sizeInTokens: position.sizeInTokens,\n          markPrice,\n          isLong: position.isLong,\n        });\n\n        const pnlPercentage =\n          initialCollateralUsd && !initialCollateralUsd.eq(0)\n            ? getBasisPoints(pnl, initialCollateralUsd)\n            : BigNumber.from(0);\n\n        const netValue = getPositionNetValue({\n          collateralUsd: initialCollateralUsd,\n          pnl,\n          pendingBorrowingFeesUsd: position.pendingBorrowingFeesUsd,\n          pendingFundingFeesUsd: pendingFundingFeesUsd,\n          closingFeeUsd,\n        });\n\n        const pnlAfterFees = pnl.sub(totalPendingFeesUsd).sub(closingFeeUsd);\n\n        const pnlAfterFeesPercentage =\n          // while calculating delta percentage after fees, we need to add opening fee (which is equal to closing fee) to collateral\n          !initialCollateralUsd.eq(0)\n            ? pnlAfterFees.mul(BASIS_POINTS_DIVISOR).div(initialCollateralUsd.add(closingFeeUsd))\n            : BigNumber.from(0);\n\n        const leverage = getLeverage({\n          sizeInUsd: position.sizeInUsd,\n          collateralUsd: initialCollateralUsd,\n          pnl: showPnlInLeverage ? pnl : undefined,\n          pendingBorrowingFeesUsd: position.pendingBorrowingFeesUsd,\n          pendingFundingFeesUsd: pendingFundingFeesUsd,\n        });\n\n        const hasLowCollateral = leverage?.gt(MAX_ALLOWED_LEVERAGE) || false;\n\n        const liquidationPrice = getLiquidationPrice({\n          sizeInUsd: position.sizeInUsd,\n          collateralUsd: initialCollateralUsd,\n          pnl,\n          markPrice,\n          closingFeeUsd,\n          maxPriceImpactFactor: marketInfo.maxPositionImpactFactorForLiquidations,\n          minCollateralFactor: marketInfo.minCollateralFactor,\n          minCollateralUsd,\n          pendingBorrowingFeesUsd: position.pendingBorrowingFeesUsd,\n          pendingFundingFeesUsd,\n          isLong: position.isLong,\n        });\n\n        acc[positionKey] = {\n          ...position,\n          marketInfo,\n          indexToken,\n          collateralToken,\n          pnlToken,\n          markPrice,\n          collateralMarkPrice,\n          entryPrice,\n          liquidationPrice,\n          initialCollateralUsd,\n          remainingCollateralUsd,\n          remainingCollateralAmount,\n          hasLowCollateral,\n          leverage,\n          pnl,\n          pnlPercentage,\n          pnlAfterFees,\n          pnlAfterFeesPercentage,\n          netValue,\n          closingFeeUsd,\n          pendingFundingFeesUsd,\n        };\n\n        return acc;\n      },\n      {} as PositionsInfoData\n    );\n\n    return {\n      positionsInfoData,\n      isLoading: false,\n    };\n  }, [marketsInfoData, minCollateralUsd, optimisticPositionsData, showPnlInLeverage, tokensData]);\n}\n","import { t } from \"@lingui/macro\";\nimport { Token } from \"domain/tokens\";\nimport { BigNumber } from \"ethers\";\nimport { formatTokenAmount, formatUsd } from \"lib/numbers\";\nimport { OrderInfo, OrderType, PositionOrderInfo } from \"./types\";\nimport { parsePositionKey } from \"../positions\";\n\nexport function isVisibleOrder(orderType: OrderType) {\n  return isLimitOrderType(orderType) || isTriggerDecreaseOrderType(orderType) || isLimitSwapOrderType(orderType);\n}\n\nexport function isOrderForPosition(order: OrderInfo, positionKey: string): order is PositionOrderInfo {\n  const { account, marketAddress, collateralAddress, isLong } = parsePositionKey(positionKey);\n\n  let isMatch =\n    !isSwapOrderType(order.orderType) &&\n    order.account === account &&\n    order.marketAddress === marketAddress &&\n    order.isLong === isLong;\n\n  // For limit orders, we need to check the target collateral token\n  if (isLimitOrderType(order.orderType)) {\n    isMatch = isMatch && order.targetCollateralToken.address === collateralAddress;\n  } else if (isTriggerDecreaseOrderType(order.orderType)) {\n    isMatch = isMatch && order.initialCollateralTokenAddress === collateralAddress;\n  }\n\n  return isMatch;\n}\n\nexport function isMarketOrderType(orderType: OrderType) {\n  return [OrderType.MarketDecrease, OrderType.MarketIncrease, OrderType.MarketSwap].includes(orderType);\n}\n\nexport function isLimitOrderType(orderType: OrderType) {\n  return [OrderType.LimitIncrease, OrderType.LimitSwap].includes(orderType);\n}\n\nexport function isTriggerDecreaseOrderType(orderType: OrderType) {\n  return [OrderType.LimitDecrease, OrderType.StopLossDecrease].includes(orderType);\n}\n\nexport function isDecreaseOrderType(orderType: OrderType) {\n  return [OrderType.MarketDecrease, OrderType.LimitDecrease, OrderType.StopLossDecrease].includes(orderType);\n}\n\nexport function isIncreaseOrderType(orderType: OrderType) {\n  return [OrderType.MarketIncrease, OrderType.LimitIncrease].includes(orderType);\n}\n\nexport function isSwapOrderType(orderType: OrderType) {\n  return [OrderType.MarketSwap, OrderType.LimitSwap].includes(orderType);\n}\n\nexport function isLimitSwapOrderType(orderType: OrderType) {\n  return orderType === OrderType.LimitSwap;\n}\n\nexport function isLiquidationOrderType(orderType: OrderType) {\n  return orderType === OrderType.Liquidation;\n}\n\nexport function getSwapOrderTitle(p: {\n  initialCollateralToken: Token;\n  targetCollateralToken: Token;\n  initialCollateralAmount: BigNumber;\n  minOutputAmount: BigNumber;\n}) {\n  const { initialCollateralToken, initialCollateralAmount, targetCollateralToken, minOutputAmount } = p;\n\n  const fromTokenText = formatTokenAmount(\n    initialCollateralAmount,\n    initialCollateralToken.decimals,\n    initialCollateralToken.symbol\n  );\n\n  const toTokenText = formatTokenAmount(minOutputAmount, targetCollateralToken.decimals, targetCollateralToken.symbol);\n\n  return t`Swap ${fromTokenText} for ${toTokenText}`;\n}\n\nexport function getPositionOrderTitle(p: {\n  orderType: OrderType;\n  isLong: boolean;\n  indexToken: Token;\n  sizeDeltaUsd: BigNumber;\n}) {\n  const { orderType, isLong, indexToken, sizeDeltaUsd } = p;\n\n  const longShortText = isLong ? t`Long` : t`Short`;\n  const tokenText = `${indexToken.symbol} ${longShortText}`;\n  const sizeText = formatUsd(sizeDeltaUsd);\n  const increaseOrDecreaseText = isIncreaseOrderType(orderType) ? t`Increase` : t`Decrease`;\n\n  return t`${increaseOrDecreaseText} ${tokenText} by ${sizeText}`;\n}\n\nexport function getOrderTypeLabel(orderType: OrderType) {\n  const orderTypeLabels = {\n    [OrderType.MarketSwap]: t`Market Swap`,\n    [OrderType.LimitSwap]: t`Limit Swap`,\n    [OrderType.MarketIncrease]: t`Market Increase`,\n    [OrderType.LimitIncrease]: t`Limit Increase`,\n    [OrderType.MarketDecrease]: t`Market Decrease`,\n    [OrderType.LimitDecrease]: t`Limit Decrease`,\n    [OrderType.StopLossDecrease]: t`Stop Loss Decrease`,\n  };\n\n  return orderTypeLabels[orderType];\n}\n","import { Web3Provider } from \"@ethersproject/providers\";\nimport { Trans } from \"@lingui/macro\";\nimport CustomErrors from \"abis/CustomErrors.json\";\nimport DataStore from \"abis/DataStore.json\";\nimport ExchangeRouter from \"abis/ExchangeRouter.json\";\nimport { ToastifyDebug } from \"components/ToastifyDebug/ToastifyDebug\";\nimport { getContract } from \"config/contracts\";\nimport { NONCE_KEY, orderKey } from \"config/dataStore\";\nimport { isDevelopment } from \"config/env\";\nimport { convertTokenAddress } from \"config/tokens\";\nimport { TokenPrices, TokensData, convertToContractPrice, getTokenData } from \"domain/synthetics/tokens\";\nimport { BigNumber, ethers } from \"ethers\";\nimport { callContract } from \"lib/contracts\";\nimport { helperToast } from \"lib/helperToast\";\nimport { expandDecimals, formatUsd } from \"lib/numbers\";\nimport _ from \"lodash\";\n\nexport type MulticallRequest = { method: string; params: any[] }[];\n\nexport type PriceOverrides = {\n  [address: string]: TokenPrices | undefined;\n};\n\ntype SimulateExecuteOrderParams = {\n  createOrderMulticallPayload: string[];\n  secondaryPriceOverrides: PriceOverrides;\n  primaryPriceOverrides: PriceOverrides;\n  tokensData: TokensData;\n  value: BigNumber;\n};\n\n// only for debugging empty reverts\nconst SHOULD_MINE = false;\n\nexport async function simulateExecuteOrderTxn(chainId: number, library: Web3Provider, p: SimulateExecuteOrderParams) {\n  const dataStoreAddress = getContract(chainId, \"DataStore\");\n\n  const dataStore = new ethers.Contract(dataStoreAddress, DataStore.abi, library.getSigner());\n\n  const exchangeRouter = new ethers.Contract(\n    getContract(chainId, \"ExchangeRouter\"),\n    ExchangeRouter.abi,\n    library.getSigner()\n  );\n\n  const blockNumber = await library.getBlockNumber();\n  const nonce = await dataStore.getUint(NONCE_KEY, { blockTag: blockNumber });\n  const nextNonce = nonce.add(1);\n  const nextKey = orderKey(dataStoreAddress, nextNonce);\n\n  const { primaryTokens, primaryPrices, secondaryTokens, secondaryPrices } = getSimulationPrices(\n    chainId,\n    p.tokensData,\n    p.primaryPriceOverrides,\n    p.secondaryPriceOverrides\n  );\n\n  const simulationPayload = [\n    ...p.createOrderMulticallPayload,\n    exchangeRouter.interface.encodeFunctionData(\"simulateExecuteOrder\", [\n      nextKey,\n      {\n        primaryTokens: primaryTokens,\n        primaryPrices: primaryPrices,\n        secondaryTokens: secondaryTokens,\n        secondaryPrices: secondaryPrices,\n      },\n    ]),\n  ];\n\n  try {\n    if (SHOULD_MINE && isDevelopment()) {\n      const txn = await callContract(chainId, exchangeRouter, \"multicall\", [simulationPayload], {\n        value: p.value,\n        gasLimit: 13 ** 6,\n      });\n\n      throw new Error(`debug simulation ended ${txn.hash}`);\n    } else {\n      await exchangeRouter.callStatic.multicall(simulationPayload, { value: p.value, blockTag: blockNumber });\n    }\n  } catch (e) {\n    const customErrors = new ethers.Contract(ethers.constants.AddressZero, CustomErrors.abi);\n    const parsedError = customErrors.interface.parseError(e.data?.data);\n\n    if (parsedError.name === \"EndOfOracleSimulation\") {\n      return undefined;\n    } else {\n      helperToast.error(\n        <div>\n          <Trans>Execute order simulation failed.</Trans>\n          <br />\n          <ToastifyDebug>{parsedError.name}</ToastifyDebug>\n        </div>\n      );\n    }\n\n    throw e;\n  }\n}\n\nfunction getSimulationPrices(\n  chainId: number,\n  tokensData: TokensData,\n  primaryPricesMap: PriceOverrides,\n  secondaryPricesMap: PriceOverrides\n) {\n  const tokenAddresses = Object.keys(tokensData);\n\n  const primaryTokens: string[] = [];\n  const primaryPrices: { min: BigNumber; max: BigNumber }[] = [];\n  const secondaryPrices: { min: BigNumber; max: BigNumber }[] = [];\n\n  for (const address of tokenAddresses) {\n    const token = getTokenData(tokensData, address);\n\n    if (!token?.prices) {\n      continue;\n    }\n\n    const convertedAddress = convertTokenAddress(chainId, address, \"wrapped\");\n\n    primaryTokens.push(convertedAddress);\n\n    const currentPrice = {\n      min: convertToContractPrice(token.prices.minPrice, token.decimals),\n      max: convertToContractPrice(token.prices.maxPrice, token.decimals),\n    };\n\n    const primaryOverridedPrice = primaryPricesMap[address];\n\n    if (primaryOverridedPrice) {\n      primaryPrices.push({\n        min: convertToContractPrice(primaryOverridedPrice.minPrice, token.decimals),\n        max: convertToContractPrice(primaryOverridedPrice.maxPrice, token.decimals),\n      });\n    } else {\n      primaryPrices.push(currentPrice);\n    }\n\n    const secondaryOverridedPrice = secondaryPricesMap[address];\n\n    if (secondaryOverridedPrice) {\n      secondaryPrices.push({\n        min: convertToContractPrice(secondaryOverridedPrice.minPrice, token.decimals),\n        max: convertToContractPrice(secondaryOverridedPrice.maxPrice, token.decimals),\n      });\n    } else {\n      secondaryPrices.push(currentPrice);\n    }\n  }\n\n  if (isDevelopment()) {\n    // eslint-disable-next-line no-console\n    console.log(\"simulation prices\", {\n      primaryPricesMap: _.mapValues(primaryPricesMap, (v) => ({\n        min: formatUsd(v?.minPrice),\n        max: formatUsd(v?.maxPrice),\n      })),\n      secondaryPricesMap: _.mapValues(secondaryPricesMap, (v) => ({\n        min: formatUsd(v?.minPrice),\n        max: formatUsd(v?.maxPrice),\n      })),\n      primaryPrices: primaryPrices.map((v) => ({\n        min: formatUsd(v.min.mul(expandDecimals(1, 18))),\n        max: formatUsd(v.max.mul(expandDecimals(1, 18))),\n      })),\n      secondaryPrices: secondaryPrices.map((v) => ({\n        min: formatUsd(v.min.mul(expandDecimals(1, 18))),\n        max: formatUsd(v.max.mul(expandDecimals(1, 18))),\n      })),\n    });\n  }\n\n  return {\n    primaryTokens,\n    secondaryTokens: primaryTokens,\n    primaryPrices,\n    secondaryPrices,\n  };\n}\n","import { Web3Provider } from \"@ethersproject/providers\";\nimport { t } from \"@lingui/macro\";\nimport ExchangeRouter from \"abis/ExchangeRouter.json\";\nimport { getContract } from \"config/contracts\";\nimport { isDevelopment } from \"config/env\";\nimport { NATIVE_TOKEN_ADDRESS, convertTokenAddress } from \"config/tokens\";\nimport { encodeReferralCode } from \"domain/referrals\";\nimport { TokensData, convertToContractPrice, getTokenData } from \"domain/synthetics/tokens\";\nimport { BigNumber, ethers } from \"ethers\";\nimport { callContract } from \"lib/contracts\";\nimport { formatUsd } from \"lib/numbers\";\nimport { DecreasePositionSwapType, OrderType } from \"./types\";\nimport { PriceOverrides, simulateExecuteOrderTxn } from \"./simulateExecuteOrderTxn\";\n\nconst { AddressZero } = ethers.constants;\n\nexport type DecreaseOrderParams = {\n  account: string;\n  executionFee: BigNumber;\n  referralCode?: string;\n  tokensData: TokensData;\n  marketAddress: string;\n  swapPath: string[];\n  initialCollateralAddress: string;\n  initialCollateralDeltaAmount: BigNumber;\n  indexTokenAddress: string;\n  receiveTokenAddress: string;\n  triggerPrice?: BigNumber;\n  sizeDeltaUsd: BigNumber;\n  minOutputUsd: BigNumber;\n  isLong: boolean;\n  acceptablePrice: BigNumber;\n  decreasePositionSwapType: DecreasePositionSwapType;\n  orderType: OrderType.MarketDecrease | OrderType.LimitDecrease | OrderType.StopLossDecrease;\n  setPendingTxns: (txns: any) => void;\n};\n\nexport async function createDecreaseOrderTxn(chainId: number, library: Web3Provider, p: DecreaseOrderParams) {\n  const exchangeRouter = new ethers.Contract(\n    getContract(chainId, \"ExchangeRouter\"),\n    ExchangeRouter.abi,\n    library.getSigner()\n  );\n\n  const orderVaultAddress = getContract(chainId, \"OrderVault\");\n\n  const isNativeReceive = p.receiveTokenAddress === NATIVE_TOKEN_ADDRESS;\n\n  const indexToken = getTokenData(p.tokensData, p.indexTokenAddress);\n\n  if (!indexToken?.prices) throw new Error(\"Index token prices are not available\");\n\n  const wntAmount = p.executionFee;\n\n  const multicall = [\n    { method: \"sendWnt\", params: [orderVaultAddress, wntAmount] },\n\n    {\n      method: \"createOrder\",\n      params: [\n        {\n          addresses: {\n            receiver: p.account,\n            initialCollateralToken: convertTokenAddress(chainId, p.initialCollateralAddress, \"wrapped\"),\n            callbackContract: AddressZero,\n            market: p.marketAddress,\n            swapPath: p.swapPath,\n          },\n          numbers: {\n            sizeDeltaUsd: p.sizeDeltaUsd,\n            initialCollateralDeltaAmount: p.initialCollateralDeltaAmount,\n            triggerPrice: convertToContractPrice(p.triggerPrice || BigNumber.from(0), indexToken.decimals),\n            acceptablePrice: convertToContractPrice(p.acceptablePrice, indexToken.decimals),\n            executionFee: p.executionFee,\n            callbackGasLimit: BigNumber.from(0),\n            minOutputAmount: p.minOutputUsd,\n          },\n          orderType: p.orderType,\n          decreasePositionSwapType: p.decreasePositionSwapType,\n          isLong: p.isLong,\n          shouldUnwrapNativeToken: isNativeReceive,\n          referralCode: encodeReferralCode(p.referralCode || \"\"),\n        },\n      ],\n    },\n  ];\n\n  if (isDevelopment()) {\n    // eslint-disable-next-line no-console\n    console.debug(\"positionDecreaseTxn multicall\", multicall);\n  }\n\n  const encodedPayload = multicall\n    .filter(Boolean)\n    .map((call) => exchangeRouter.interface.encodeFunctionData(call!.method, call!.params));\n\n  const primaryPriceOverrides: PriceOverrides = {};\n  const secondaryPriceOverrides: PriceOverrides = {};\n\n  if (p.triggerPrice) {\n    primaryPriceOverrides[p.indexTokenAddress] = {\n      minPrice: p.triggerPrice,\n      maxPrice: p.triggerPrice,\n    };\n    secondaryPriceOverrides[p.indexTokenAddress] = {\n      minPrice: p.triggerPrice,\n      maxPrice: p.triggerPrice,\n    };\n  }\n\n  await simulateExecuteOrderTxn(chainId, library, {\n    primaryPriceOverrides,\n    secondaryPriceOverrides,\n    createOrderMulticallPayload: encodedPayload,\n    value: wntAmount,\n    tokensData: p.tokensData,\n  });\n\n  const longText = p.isLong ? t`Long` : t`Short`;\n\n  const orderLabel = t`Decrease ${longText} ${indexToken.symbol} by ${formatUsd(p.sizeDeltaUsd)}`;\n\n  const txn = await callContract(chainId, exchangeRouter, \"multicall\", [encodedPayload], {\n    value: wntAmount,\n    sentMsg: t`${orderLabel} order sent`,\n    successMsg: t`${orderLabel} order created`,\n    failMsg: t`${orderLabel} order failed`,\n    hideSuccessMsg: true,\n    setPendingTxns: p.setPendingTxns,\n  });\n\n  return txn;\n}\n","import { Web3Provider } from \"@ethersproject/providers\";\nimport { t } from \"@lingui/macro\";\nimport ExchangeRouter from \"abis/ExchangeRouter.json\";\nimport { getContract } from \"config/contracts\";\nimport { isDevelopment } from \"config/env\";\nimport { NATIVE_TOKEN_ADDRESS, convertTokenAddress } from \"config/tokens\";\nimport { encodeReferralCode } from \"domain/referrals\";\nimport { TokensData, convertToContractPrice, getTokenData } from \"domain/synthetics/tokens\";\nimport { BigNumber, ethers } from \"ethers\";\nimport { callContract } from \"lib/contracts\";\nimport { formatUsd } from \"lib/numbers\";\nimport { PriceOverrides, simulateExecuteOrderTxn } from \"./simulateExecuteOrderTxn\";\nimport { DecreasePositionSwapType, OrderType } from \"./types\";\n\nconst { AddressZero } = ethers.constants;\n\n// TODO: validate spot only\ntype IncreaseOrderParams = {\n  account: string;\n  executionFee: BigNumber;\n  referralCode?: string;\n  marketAddress: string;\n  swapPath: string[];\n  initialCollateralAddress: string;\n  initialCollateralAmount: BigNumber;\n  targetCollateralAddress?: string;\n  indexTokenAddress: string;\n  triggerPrice?: BigNumber;\n  sizeDeltaUsd: BigNumber;\n  acceptablePrice: BigNumber;\n  isLong: boolean;\n  orderType: OrderType.MarketIncrease | OrderType.LimitIncrease;\n  tokensData: TokensData;\n  setPendingTxns: (txns: any) => void;\n};\n\nexport async function createIncreaseOrderTxn(chainId: number, library: Web3Provider, p: IncreaseOrderParams) {\n  const exchangeRouter = new ethers.Contract(\n    getContract(chainId, \"ExchangeRouter\"),\n    ExchangeRouter.abi,\n    library.getSigner()\n  );\n\n  const orderVaultAddress = getContract(chainId, \"OrderVault\");\n\n  const isNativePayment = p.initialCollateralAddress === NATIVE_TOKEN_ADDRESS;\n\n  const wntCollateralAmount = isNativePayment ? p.initialCollateralAmount : BigNumber.from(0);\n\n  const wntAmount = wntCollateralAmount.add(p.executionFee);\n\n  const indexToken = getTokenData(p.tokensData, p.indexTokenAddress);\n\n  if (!indexToken?.prices) throw new Error(\"Index token prices are not available\");\n\n  const multicall = [\n    { method: \"sendWnt\", params: [orderVaultAddress, wntAmount] },\n\n    !isNativePayment\n      ? { method: \"sendTokens\", params: [p.initialCollateralAddress, orderVaultAddress, p.initialCollateralAmount] }\n      : undefined,\n\n    {\n      method: \"createOrder\",\n      params: [\n        {\n          addresses: {\n            receiver: p.account,\n            initialCollateralToken: convertTokenAddress(chainId, p.initialCollateralAddress, \"wrapped\"),\n            callbackContract: AddressZero,\n            market: p.marketAddress,\n            swapPath: p.swapPath,\n          },\n          numbers: {\n            sizeDeltaUsd: p.sizeDeltaUsd,\n            initialCollateralDeltaAmount: BigNumber.from(0),\n            triggerPrice: convertToContractPrice(p.triggerPrice || BigNumber.from(0), indexToken!.decimals),\n            acceptablePrice: convertToContractPrice(p.acceptablePrice, indexToken!.decimals),\n            executionFee: p.executionFee,\n            callbackGasLimit: BigNumber.from(0),\n            minOutputAmount: BigNumber.from(0),\n          },\n          orderType: p.orderType,\n          decreasePositionSwapType: DecreasePositionSwapType.NoSwap,\n          isLong: p.isLong,\n          shouldUnwrapNativeToken: isNativePayment,\n          referralCode: encodeReferralCode(p.referralCode || \"\"),\n        },\n      ],\n    },\n  ];\n\n  if (isDevelopment()) {\n    // eslint-disable-next-line no-console\n    console.debug(\"positionIncreaseTxn multicall\", multicall, {\n      acceptablePrice: formatUsd(p.acceptablePrice),\n      triggerPrice: formatUsd(p.triggerPrice),\n    });\n  }\n\n  const encodedPayload = multicall\n    .filter(Boolean)\n    .map((call) => exchangeRouter.interface.encodeFunctionData(call!.method, call!.params));\n\n  const secondaryPriceOverrides: PriceOverrides = {};\n  const primaryPriceOverrides: PriceOverrides = {};\n\n  if (p.triggerPrice) {\n    primaryPriceOverrides[p.indexTokenAddress] = {\n      minPrice: p.triggerPrice,\n      maxPrice: p.triggerPrice,\n    };\n    secondaryPriceOverrides[p.indexTokenAddress] = {\n      minPrice: p.triggerPrice,\n      maxPrice: p.triggerPrice,\n    };\n  }\n\n  await simulateExecuteOrderTxn(chainId, library, {\n    tokensData: p.tokensData,\n    primaryPriceOverrides,\n    secondaryPriceOverrides,\n    createOrderMulticallPayload: encodedPayload,\n    value: wntAmount,\n  });\n\n  const longText = p.isLong ? t`Long` : t`Short`;\n  const orderLabel = t`Increase ${longText} ${indexToken.symbol} by ${formatUsd(p.sizeDeltaUsd)}`;\n\n  const txn = await callContract(chainId, exchangeRouter, \"multicall\", [encodedPayload], {\n    value: wntAmount,\n    sentMsg: t`${orderLabel} order sent`,\n    successMsg: t`${orderLabel} order created`,\n    failMsg: t`${orderLabel} order failed`,\n    hideSuccessMsg: true,\n    setPendingTxns: p.setPendingTxns,\n  });\n\n  return txn;\n}\n","import { Web3Provider } from \"@ethersproject/providers\";\nimport { t } from \"@lingui/macro\";\nimport ExchangeRouter from \"abis/ExchangeRouter.json\";\nimport { getContract } from \"config/contracts\";\nimport { isDevelopment } from \"config/env\";\nimport { NATIVE_TOKEN_ADDRESS, convertTokenAddress } from \"config/tokens\";\nimport { encodeReferralCode } from \"domain/referrals\";\nimport { BigNumber, ethers } from \"ethers\";\nimport { callContract } from \"lib/contracts\";\nimport { formatTokenAmount } from \"lib/numbers\";\nimport { TokensData, getTokenData } from \"../tokens\";\nimport { DecreasePositionSwapType, OrderType } from \"./types\";\nimport { simulateExecuteOrderTxn } from \"./simulateExecuteOrderTxn\";\n\nconst { AddressZero } = ethers.constants;\n\n// TODO: validate same collaterals markets\nexport type SwapOrderParams = {\n  account: string;\n  executionFee: BigNumber;\n  referralCode?: string;\n  tokensData: TokensData;\n  fromTokenAddress: string;\n  fromTokenAmount: BigNumber;\n  toTokenAddress: string;\n  swapPath: string[];\n  minOutputAmount: BigNumber;\n  orderType: OrderType.MarketSwap | OrderType.LimitSwap;\n  setPendingTxns: (txns: any) => void;\n};\n\nexport async function createSwapOrderTxn(chainId: number, library: Web3Provider, p: SwapOrderParams) {\n  const exchangeRouter = new ethers.Contract(\n    getContract(chainId, \"ExchangeRouter\"),\n    ExchangeRouter.abi,\n    library.getSigner()\n  );\n\n  const orderVaultAddress = getContract(chainId, \"OrderVault\");\n\n  const isNativePayment = p.fromTokenAddress === NATIVE_TOKEN_ADDRESS;\n  const isNativeReceive = p.toTokenAddress === NATIVE_TOKEN_ADDRESS;\n\n  const wntSwapAmount = isNativePayment ? p.fromTokenAmount : BigNumber.from(0);\n\n  const wntAmount = wntSwapAmount.add(p.executionFee);\n\n  const fromToken = getTokenData(p.tokensData, p.fromTokenAddress);\n  const toToken = getTokenData(p.tokensData, p.toTokenAddress);\n\n  if (!fromToken?.prices || !toToken?.prices) {\n    throw new Error(\"Token prices not available\");\n  }\n\n  const multicall = [\n    { method: \"sendWnt\", params: [orderVaultAddress, wntAmount] },\n\n    !isNativePayment\n      ? { method: \"sendTokens\", params: [p.fromTokenAddress, orderVaultAddress, p.fromTokenAmount] }\n      : undefined,\n\n    {\n      method: \"createOrder\",\n      params: [\n        {\n          addresses: {\n            receiver: p.account,\n            initialCollateralToken: convertTokenAddress(chainId, p.fromTokenAddress, \"wrapped\"),\n            callbackContract: AddressZero,\n            market: AddressZero,\n            swapPath: p.swapPath,\n          },\n          numbers: {\n            sizeDeltaUsd: BigNumber.from(0),\n            initialCollateralDeltaAmount: BigNumber.from(0),\n            triggerPrice: BigNumber.from(0),\n            acceptablePrice: BigNumber.from(0),\n            executionFee: p.executionFee,\n            callbackGasLimit: BigNumber.from(0),\n            minOutputAmount: p.minOutputAmount,\n          },\n          orderType: p.orderType,\n          decreasePositionSwapType: DecreasePositionSwapType.NoSwap,\n          isLong: false,\n          shouldUnwrapNativeToken: isNativeReceive,\n          referralCode: encodeReferralCode(p.referralCode || \"\"),\n        },\n      ],\n    },\n  ];\n\n  if (isDevelopment()) {\n    // eslint-disable-next-line no-console\n    console.debug(\"swapTxn multicall\", {\n      sendWnt: formatTokenAmount(wntAmount, 18, \"WNT\"),\n      sendTokens: !isNativePayment\n        ? formatTokenAmount(p.fromTokenAmount, fromToken.decimals, fromToken.symbol)\n        : undefined,\n      createOrder: {\n        addresses: {\n          receiver: p.account,\n          initialCollateralToken: convertTokenAddress(chainId, p.fromTokenAddress, \"wrapped\"),\n          callbackContract: AddressZero,\n          market: AddressZero,\n          swapPath: p.swapPath,\n        },\n        numbers: {\n          sizeDeltaUsd: BigNumber.from(0),\n          initialCollateralDeltaAmount: BigNumber.from(0),\n          triggerPrice: BigNumber.from(0),\n          acceptablePrice: BigNumber.from(0),\n          executionFee: p.executionFee,\n          callbackGasLimit: BigNumber.from(0),\n          minOutputAmount: formatTokenAmount(p.minOutputAmount, toToken.decimals, toToken.symbol),\n        },\n      },\n    });\n  }\n\n  const encodedPayload = multicall\n    .filter(Boolean)\n    .map((call) => exchangeRouter.interface.encodeFunctionData(call!.method, call!.params));\n\n  // TODO: simulation for limit swaps\n  if (p.orderType !== OrderType.LimitSwap) {\n    await simulateExecuteOrderTxn(chainId, library, {\n      primaryPriceOverrides: {},\n      secondaryPriceOverrides: {},\n      createOrderMulticallPayload: encodedPayload,\n      value: wntAmount,\n      tokensData: p.tokensData,\n    });\n  }\n\n  const fromText = formatTokenAmount(p.fromTokenAmount, fromToken.decimals, fromToken.symbol);\n  const toText = formatTokenAmount(p.minOutputAmount, toToken.decimals, toToken.symbol);\n\n  const orderLabel = t`Swap ${fromText} for ${toText}`;\n\n  return callContract(chainId, exchangeRouter, \"multicall\", [encodedPayload], {\n    value: wntAmount,\n    sentMsg: t`${orderLabel} order sent`,\n    successMsg: t`${orderLabel} order created`,\n    failMsg: t`${orderLabel} order failed`,\n    hideSuccessMsg: true,\n    setPendingTxns: p.setPendingTxns,\n  });\n}\n","import { EventLogData } from \"./types\";\n\nexport function parseEventLogData(eventData): EventLogData {\n  const ret: any = {};\n  for (const typeKey of [\n    \"addressItems\",\n    \"uintItems\",\n    \"intItems\",\n    \"boolItems\",\n    \"bytes32Items\",\n    \"bytesItems\",\n    \"stringItems\",\n  ]) {\n    ret[typeKey] = {};\n\n    for (const listKey of [\"items\", \"arrayItems\"]) {\n      ret[typeKey][listKey] = {};\n\n      for (const item of eventData[typeKey][listKey]) {\n        ret[typeKey][listKey][item.key] = item.value;\n      }\n    }\n  }\n\n  return ret as EventLogData;\n}\n","import { StaticJsonRpcProvider } from \"@ethersproject/providers\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport EventEmitter from \"abis/EventEmitter.json\";\nimport { getContract } from \"config/contracts\";\nimport { isDevelopment } from \"config/env\";\nimport { useMarketsInfo } from \"domain/synthetics/markets\";\nimport { getOrderTypeLabel } from \"domain/synthetics/orders\";\nimport { getPositionKey } from \"domain/synthetics/positions\";\nimport { BigNumber, ethers } from \"ethers\";\nimport { useChainId } from \"lib/chains\";\nimport { pushErrorNotification, pushSuccessNotification } from \"lib/contracts\";\nimport { setByKey, updateByKey } from \"lib/objects\";\nimport { getProvider, getWsProvider } from \"lib/rpc\";\nimport { ReactNode, createContext, useEffect, useImperativeHandle, useMemo, useRef, useState } from \"react\";\nimport {\n  ContractEventsContextType,\n  DepositCreatedEvent,\n  DepositStatuses,\n  EventLogData,\n  EventTxnParams,\n  OrderCreatedEvent,\n  OrderStatuses,\n  PendingPositionUpdate,\n  PendingPositionsUpdates,\n  PositionDecreaseEvent,\n  PositionIncreaseEvent,\n  WithdrawalCreatedEvent,\n  WithdrawalStatuses,\n} from \"./types\";\nimport { parseEventLogData } from \"./utils\";\nimport { getSwapPathOutputAddresses } from \"domain/synthetics/trade\";\nimport { getWrappedToken } from \"config/tokens\";\n\nexport const SyntheticsEventsContext = createContext({});\n\nexport function SyntheticsEventsProvider({ children }: { children: ReactNode }) {\n  const { chainId } = useChainId();\n  const { active, account: currentAccount } = useWeb3React();\n\n  const { marketsInfoData } = useMarketsInfo(chainId);\n\n  const [orderStatuses, setOrderStatuses] = useState<OrderStatuses>({});\n  const [depositStatuses, setDepositStatuses] = useState<DepositStatuses>({});\n  const [withdrawalStatuses, setWithdrawalStatuses] = useState<WithdrawalStatuses>({});\n  const [pendingPositionsUpdates, setPendingPositionsUpdates] = useState<PendingPositionsUpdates>({});\n  const [positionIncreaseEvents, setPositionIncreaseEvents] = useState<PositionIncreaseEvent[]>([]);\n  const [positionDecreaseEvents, setPositionDecreaseEvents] = useState<PositionDecreaseEvent[]>([]);\n\n  const eventLogHandlers = useRef({});\n\n  useImperativeHandle(eventLogHandlers, () => ({\n    PositionIncrease: (eventData: EventLogData, txnParams: EventTxnParams) => {\n      const data: PositionIncreaseEvent = {\n        positionKey: getPositionKey(\n          eventData.addressItems.items.account,\n          eventData.addressItems.items.market,\n          eventData.addressItems.items.collateralToken,\n          eventData.boolItems.items.isLong\n        )!,\n        contractPositionKey: eventData.bytes32Items.items.positionKey,\n        account: eventData.addressItems.items.account,\n        marketAddress: eventData.addressItems.items.market,\n        collateralTokenAddress: eventData.addressItems.items.collateralToken,\n        sizeInUsd: eventData.uintItems.items.sizeInUsd,\n        sizeInTokens: eventData.uintItems.items.sizeInTokens,\n        collateralAmount: eventData.uintItems.items.collateralAmount,\n        borrowingFactor: eventData.uintItems.items.borrowingFactor,\n        executionPrice: eventData.uintItems.items.executionPrice,\n        sizeDeltaUsd: eventData.uintItems.items.sizeDeltaUsd,\n        sizeDeltaInTokens: eventData.uintItems.items.sizeDeltaInTokens,\n        orderType: Number(eventData.uintItems.items.orderType),\n        longTokenFundingAmountPerSize: eventData.intItems.items.longTokenFundingAmountPerSize,\n        shortTokenFundingAmountPerSize: eventData.intItems.items.shortTokenFundingAmountPerSize,\n        collateralDeltaAmount: eventData.intItems.items.collateralDeltaAmount,\n        isLong: eventData.boolItems.items.isLong,\n        increasedAtBlock: BigNumber.from(txnParams.blockNumber),\n      };\n\n      if (data.account !== currentAccount) return;\n\n      setPositionIncreaseEvents((old) => [...old, data]);\n    },\n\n    PositionDecrease: (eventData: EventLogData, txnParams: EventTxnParams) => {\n      const data: PositionDecreaseEvent = {\n        positionKey: getPositionKey(\n          eventData.addressItems.items.account,\n          eventData.addressItems.items.market,\n          eventData.addressItems.items.collateralToken,\n          eventData.boolItems.items.isLong\n        )!,\n        account: eventData.addressItems.items.account,\n        marketAddress: eventData.addressItems.items.market,\n        collateralTokenAddress: eventData.addressItems.items.collateralToken,\n        sizeInUsd: eventData.uintItems.items.sizeInUsd,\n        sizeInTokens: eventData.uintItems.items.sizeInTokens,\n        collateralAmount: eventData.uintItems.items.collateralAmount,\n        borrowingFactor: eventData.uintItems.items.borrowingFactor,\n        longTokenFundingAmountPerSize: eventData.intItems.items.longTokenFundingAmountPerSize,\n        shortTokenFundingAmountPerSize: eventData.intItems.items.shortTokenFundingAmountPerSize,\n        pnlUsd: eventData.intItems.items.pnlUsd,\n        isLong: eventData.boolItems.items.isLong,\n        contractPositionKey: eventData.bytes32Items.items.positionKey,\n        decreasedAtBlock: BigNumber.from(txnParams.blockNumber),\n      };\n\n      if (data.account !== currentAccount) return;\n\n      setPositionDecreaseEvents((old) => [...old, data]);\n    },\n\n    OrderCreated: (eventData: EventLogData, txnParams: EventTxnParams) => {\n      const data: OrderCreatedEvent = {\n        account: eventData.addressItems.items.account,\n        receiver: eventData.addressItems.items.receiver,\n        callbackContract: eventData.addressItems.items.callbackContract,\n        marketAddress: eventData.addressItems.items.market,\n        initialCollateralTokenAddress: eventData.addressItems.items.initialCollateralToken,\n        swapPath: eventData.addressItems.arrayItems.swapPath,\n        sizeDeltaUsd: eventData.uintItems.items.sizeDeltaUsd,\n        initialCollateralDeltaAmount: eventData.uintItems.items.initialCollateralDeltaAmount,\n        contractTriggerPrice: eventData.uintItems.items.triggerPrice,\n        contractAcceptablePrice: eventData.uintItems.items.acceptablePrice,\n        executionFee: eventData.uintItems.items.executionFee,\n        callbackGasLimit: eventData.uintItems.items.callbackGasLimit,\n        minOutputAmount: eventData.uintItems.items.minOutputAmount,\n        updatedAtBlock: eventData.uintItems.items.updatedAtBlock,\n        orderType: Number(eventData.uintItems.items.orderType),\n        isLong: eventData.boolItems.items.isLong,\n        shouldUnwrapNativeToken: eventData.boolItems.items.shouldUnwrapNativeToken,\n        isFrozen: eventData.boolItems.items.isFrozen,\n        key: eventData.bytes32Items.items.key,\n      };\n\n      if (data.account !== currentAccount) return;\n\n      setOrderStatuses((old) =>\n        setByKey(old, data.key, { key: data.key, data, createdTxnHash: txnParams.transactionHash })\n      );\n    },\n\n    OrderExecuted: (eventData: EventLogData, txnParams: EventTxnParams) => {\n      const key = eventData.bytes32Items.items.key;\n\n      setOrderStatuses((old) => updateByKey(old, key, { executedTxnHash: txnParams.transactionHash }));\n\n      const order = orderStatuses[key]?.data;\n      if (order) {\n        const orderLabel = getOrderTypeLabel(order.orderType);\n\n        pushSuccessNotification(chainId, `${orderLabel} order executed`, txnParams);\n      }\n    },\n\n    OrderCancelled: (eventData: EventLogData, txnParams: EventTxnParams) => {\n      const key = eventData.bytes32Items.items.key;\n      setOrderStatuses((old) => updateByKey(old, key, { cancelledTxnHash: txnParams.transactionHash }));\n\n      const order = orderStatuses[key]?.data;\n\n      if (order && marketsInfoData) {\n        const wrappedToken = getWrappedToken(chainId);\n        const orderLabel = getOrderTypeLabel(order.orderType);\n        const { outTokenAddress } = getSwapPathOutputAddresses({\n          marketsInfoData: marketsInfoData,\n          initialCollateralAddress: order.initialCollateralTokenAddress,\n          swapPath: order.swapPath,\n          wrappedNativeTokenAddress: wrappedToken.address,\n          shouldUnwrapNativeToken: order.shouldUnwrapNativeToken,\n        });\n\n        pushErrorNotification(chainId, `${orderLabel} order cancelled`, txnParams);\n\n        const positionKey = getPositionKey(order.account, order.marketAddress, outTokenAddress, order.isLong);\n\n        if (positionKey) {\n          setPendingPositionsUpdates((old) => setByKey(old, positionKey, undefined));\n        }\n      }\n    },\n\n    DepositCreated: (eventData: EventLogData, txnParams: EventTxnParams) => {\n      const depositData: DepositCreatedEvent = {\n        account: eventData.addressItems.items.account,\n        receiver: eventData.addressItems.items.receiver,\n        callbackContract: eventData.addressItems.items.callbackContract,\n        market: eventData.addressItems.items.market,\n        initialLongToken: eventData.addressItems.items.initialLongToken,\n        initialShortToken: eventData.addressItems.items.initialShortToken,\n        longTokenSwapPath: eventData.addressItems.arrayItems.longTokenSwapPath,\n        shortTokenSwapPath: eventData.addressItems.arrayItems.shortTokenSwapPath,\n        initialLongTokenAmount: eventData.uintItems.items.initialLongTokenAmount,\n        initialShortTokenAmount: eventData.uintItems.items.initialShortTokenAmount,\n        minMarketTokens: eventData.uintItems.items.minMarketTokens,\n        updatedAtBlock: eventData.uintItems.items.updatedAtBlock,\n        executionFee: eventData.uintItems.items.executionFee,\n        callbackGasLimit: eventData.uintItems.items.callbackGasLimit,\n        shouldUnwrapNativeToken: eventData.boolItems.items.shouldUnwrapNativeToken,\n        key: eventData.bytes32Items.items.key,\n      };\n\n      if (depositData.account !== currentAccount) return;\n\n      setDepositStatuses((old) =>\n        setByKey(old, depositData.key, {\n          key: depositData.key,\n          data: depositData,\n          createdTxnHash: txnParams.transactionHash,\n        })\n      );\n    },\n\n    DepositExecuted: (eventData: EventLogData, txnParams: EventTxnParams) => {\n      const key = eventData.bytes32Items.items.key;\n      setDepositStatuses((old) => updateByKey(old, key, { executedTxnHash: txnParams.transactionHash }));\n      pushSuccessNotification(chainId, \"Deposit executed\", txnParams);\n    },\n\n    DepositCancelled: (eventData: EventLogData, txnParams: EventTxnParams) => {\n      const key = eventData.bytes32Items.items.key;\n      setDepositStatuses((old) => updateByKey(old, key, { cancelledTxnHash: txnParams.transactionHash }));\n      pushErrorNotification(chainId, \"Deposit cancelled\", txnParams);\n    },\n\n    WithdrawalCreated: (eventData: EventLogData, txnParams: EventTxnParams) => {\n      const data: WithdrawalCreatedEvent = {\n        account: eventData.addressItems.items.account,\n        receiver: eventData.addressItems.items.receiver,\n        callbackContract: eventData.addressItems.items.callbackContract,\n        market: eventData.addressItems.items.market,\n        marketTokenAmount: eventData.uintItems.items.marketTokenAmount,\n        minLongTokenAmount: eventData.uintItems.items.minLongTokenAmount,\n        minShortTokenAmount: eventData.uintItems.items.minShortTokenAmount,\n        updatedAtBlock: eventData.uintItems.items.updatedAtBlock,\n        executionFee: eventData.uintItems.items.executionFee,\n        callbackGasLimit: eventData.uintItems.items.callbackGasLimit,\n        shouldUnwrapNativeToken: eventData.boolItems.items.shouldUnwrapNativeToken,\n        key: eventData.bytes32Items.items.key,\n      };\n\n      if (data.account !== currentAccount) return;\n\n      setWithdrawalStatuses((old) =>\n        setByKey(old, data.key, { key: data.key, data, createdTxnHash: txnParams.transactionHash })\n      );\n    },\n\n    WithdrawalExecuted: (eventData: EventLogData, txnParams: EventTxnParams) => {\n      const key = eventData.bytes32Items.items.key;\n      setWithdrawalStatuses((old) => updateByKey(old, key, { executedTxnHash: txnParams.transactionHash }));\n      pushSuccessNotification(chainId, \"Withdrawal executed\", txnParams);\n    },\n\n    WithdrawalCancelled: (eventData: EventLogData, txnParams: EventTxnParams) => {\n      const key = eventData.bytes32Items.items.key;\n      setWithdrawalStatuses((old) => updateByKey(old, key, { cancelledTxnHash: txnParams.transactionHash }));\n      pushErrorNotification(chainId, \"Withdrawal cancelled\", txnParams);\n    },\n  }));\n\n  useEffect(\n    function subscribe() {\n      const wsProvider = getWsProvider(active, chainId);\n\n      if (!wsProvider) return;\n\n      const contracts: { [name: string]: ethers.Contract } = {};\n\n      try {\n        contracts.EventEmitter = new ethers.Contract(\n          getContract(chainId, \"EventEmitter\"),\n          EventEmitter.abi,\n          wsProvider\n        );\n      } catch (e) {\n        // ...ignore on unsupported chains\n      }\n\n      function handleEventLog(sender, eventName, eventNameHash, eventData, txnOpts) {\n        if (isDevelopment()) {\n          // eslint-disable-next-line no-console\n          console.log(\"handleEventLog\", sender, eventName, eventNameHash, eventData, txnOpts);\n        }\n        eventLogHandlers.current[eventName]?.(parseEventLogData(eventData), txnOpts);\n      }\n\n      function handleEventLog1(sender, eventName, eventNameHash, topic1, eventData, txnOpts) {\n        if (isDevelopment()) {\n          // eslint-disable-next-line no-console\n          console.log(\"handleEventLog1\", sender, eventName, eventNameHash, topic1, eventData, txnOpts);\n        }\n\n        eventLogHandlers.current[eventName]?.(parseEventLogData(eventData), txnOpts);\n      }\n\n      function handleEventLog2(msgSender, eventName, eventNameHash, topic1, topic2, eventData, txnOpts) {\n        if (isDevelopment()) {\n          // eslint-disable-next-line no-console\n          console.log(\"handleEventLog2\", msgSender, eventNameHash, eventName, topic1, topic2, eventData, txnOpts);\n        }\n        eventLogHandlers.current[eventName]?.(parseEventLogData(eventData), txnOpts);\n      }\n\n      contracts.EventEmitter.on(\"EventLog\", handleEventLog);\n      contracts.EventEmitter.on(\"EventLog1\", handleEventLog1);\n      contracts.EventEmitter.on(\"EventLog2\", handleEventLog2);\n\n      return () => {\n        contracts.EventEmitter.off(\"EventLog\", handleEventLog);\n        contracts.EventEmitter.off(\"EventLog1\", handleEventLog1);\n        contracts.EventEmitter.off(\"EventLog2\", handleEventLog2);\n      };\n    },\n    [active, chainId]\n  );\n\n  const contextState: ContractEventsContextType = useMemo(() => {\n    if (isDevelopment()) {\n      // eslint-disable-next-line no-console\n      console.debug(\"events\", {\n        orderStatuses,\n        depositStatuses,\n        withdrawalStatuses,\n        increasePositionEvents: positionIncreaseEvents,\n        decreasePositionEvents: positionDecreaseEvents,\n        pendingPositionsUpdates,\n      });\n    }\n\n    return {\n      orderStatuses,\n      depositStatuses,\n      withdrawalStatuses,\n      pendingPositionsUpdates,\n      positionIncreaseEvents,\n      positionDecreaseEvents,\n      touchOrderStatus: (key: string) => {\n        setOrderStatuses((old) => updateByKey(old, key, { isTouched: true }));\n      },\n      touchDepositStatus: (key: string) => {\n        setDepositStatuses((old) => updateByKey(old, key, { isTouched: true }));\n      },\n      touchWithdrawalStatus: (key: string) => {\n        setWithdrawalStatuses((old) => updateByKey(old, key, { isTouched: true }));\n      },\n      async setPendingPositionUpdate(update: Omit<PendingPositionUpdate, \"updatedAt\" | \"updatedAtBlock\">) {\n        const provider = getProvider(undefined, chainId) as StaticJsonRpcProvider;\n\n        const currentBlock = await provider.getBlockNumber();\n\n        setPendingPositionsUpdates((old) =>\n          setByKey(old, update.positionKey, {\n            ...update,\n            updatedAt: Date.now(),\n            updatedAtBlock: BigNumber.from(currentBlock),\n          })\n        );\n      },\n    };\n  }, [\n    chainId,\n    depositStatuses,\n    orderStatuses,\n    pendingPositionsUpdates,\n    positionDecreaseEvents,\n    positionIncreaseEvents,\n    withdrawalStatuses,\n  ]);\n\n  return <SyntheticsEventsContext.Provider value={contextState}>{children}</SyntheticsEventsContext.Provider>;\n}\n","import { useContext } from \"react\";\nimport { SyntheticsEventsContext } from \"./SyntheticsEventsProvider\";\nimport { ContractEventsContextType } from \"./types\";\n\nexport function useSyntheticsEvents(): ContractEventsContextType {\n  return useContext(SyntheticsEventsContext) as ContractEventsContextType;\n}\n","import { Trans, t } from \"@lingui/macro\";\nimport cx from \"classnames\";\nimport Button from \"components/Button/Button\";\nimport Modal from \"components/Modal/Modal\";\nimport { RequestStatus } from \"components/RequestStatus/RequestStatus\";\nimport { useSyntheticsEvents } from \"context/SyntheticsEvents\";\nimport { useMarketsInfo } from \"domain/synthetics/markets\";\nimport { getTokenData, useAvailableTokensData } from \"domain/synthetics/tokens\";\nimport { useChainId } from \"lib/chains\";\nimport { getByKey } from \"lib/objects\";\nimport { useEffect, useState } from \"react\";\nimport \"./GmOrderStatus.scss\";\n\ntype Props = {\n  isDeposit: boolean;\n  firstToken: string;\n  secondToken?: string;\n  market: string;\n  onClose: () => void;\n};\n\nexport function GmOrderStatus(p: Props) {\n  const { chainId } = useChainId();\n  const { depositStatuses, withdrawalStatuses, touchDepositStatus, touchWithdrawalStatus } = useSyntheticsEvents();\n  const [orderKey, setOrderKey] = useState<string>();\n  const { tokensData } = useAvailableTokensData(chainId);\n  const { marketsInfoData } = useMarketsInfo(chainId);\n\n  const ordersEvents = p.isDeposit ? depositStatuses : withdrawalStatuses;\n  const orderStatus = orderKey ? ordersEvents[orderKey] : undefined;\n\n  const marketInfo = getByKey(marketsInfoData, p.market);\n\n  const marketName = marketInfo?.name || \"...\";\n  const firstToken = getTokenData(tokensData, p.firstToken);\n  const secondToken = getTokenData(tokensData, p.secondToken);\n\n  const isProcessing = !orderStatus?.cancelledTxnHash && !orderStatus?.executedTxnHash;\n\n  const tokensText = [firstToken, secondToken]\n    .filter(Boolean)\n    .map((t) => t!.symbol)\n    .join(\" and \");\n\n  const orderTypeText = p.isDeposit ? t`Deposit` : t`Withdrawal`;\n\n  function renderCreationStatus() {\n    let text = t`Sending ${orderTypeText.toLocaleLowerCase()} ${tokensText} request`;\n    let isLoading = true;\n\n    if (orderStatus?.createdTxnHash) {\n      isLoading = false;\n      text = t`${orderTypeText} ${tokensText} request sent`;\n    }\n\n    return <RequestStatus isLoading={isLoading} txnHash={orderStatus?.createdTxnHash} text={text} />;\n  }\n\n  function renderExecutionStatus() {\n    let text = t`Fulfilling ${orderTypeText.toLowerCase()} ${tokensText} request`;\n    let isLoading = false;\n    let txnHash: string | undefined;\n\n    if (orderStatus?.createdTxnHash) {\n      isLoading = true;\n    }\n\n    if (orderStatus?.cancelledTxnHash) {\n      text = t`${orderTypeText} cancelled`;\n      isLoading = false;\n      txnHash = orderStatus.cancelledTxnHash;\n    }\n\n    if (orderStatus?.executedTxnHash) {\n      text = t`Executed ${orderTypeText.toLowerCase()} ${tokensText}`;\n      isLoading = false;\n      txnHash = orderStatus.executedTxnHash;\n    }\n\n    return <RequestStatus isLoading={isLoading} txnHash={txnHash} text={text} />;\n  }\n\n  useEffect(() => {\n    if (orderKey) return;\n\n    if (p.isDeposit) {\n      const pendingOrder = Object.values(depositStatuses).find(\n        (depositStatus) => !depositStatus.isTouched && depositStatus.data.market === p.market\n      );\n\n      if (pendingOrder) {\n        touchDepositStatus(pendingOrder.key);\n        setOrderKey(pendingOrder.key);\n      }\n    } else {\n      const pendingOrder = Object.values(withdrawalStatuses).find(\n        (withdrawalStatus) => !withdrawalStatus.isTouched && withdrawalStatus.data.market === p.market\n      );\n\n      if (pendingOrder) {\n        touchWithdrawalStatus(pendingOrder.key);\n        setOrderKey(pendingOrder.key);\n      }\n    }\n  }, [depositStatuses, orderKey, p.isDeposit, p.market, touchDepositStatus, touchWithdrawalStatus, withdrawalStatuses]);\n\n  return (\n    <div className=\"Confirmation-box GmOrderStatus\">\n      <Modal isVisible={true} setIsVisible={p.onClose} label={t`${orderTypeText} status`} allowContentTouchMove>\n        <div className={cx(\"Confirmation-box-main\")}>\n          {p.isDeposit && <Trans>Depositing to {marketName}</Trans>}\n          {!p.isDeposit && <Trans>Withdrawal from {marketName}</Trans>}\n        </div>\n\n        {renderCreationStatus()}\n        {renderExecutionStatus()}\n\n        <div className=\"App-card-divider\" />\n\n        <Button className=\"w-100\" variant=\"primary-action\" onClick={p.onClose} disabled={isProcessing}>\n          {isProcessing ? t`Processing...` : t`Close`}\n        </Button>\n      </Modal>\n    </div>\n  );\n}\n","import { Dispatch, SetStateAction, useCallback, useState } from \"react\";\n\n// Safe update the state\nexport function useSafeState<S>(\n  inititalValue?: S | (() => S),\n  shouldUpdateFn: (prev: S, next: S) => boolean = (a, b) => a !== b\n): [S, Dispatch<SetStateAction<S>>] {\n  const [state, _setState] = useState<any>(inititalValue);\n\n  const setState = useCallback(\n    (value: S | ((prevState: S) => S)) => {\n      if (typeof value === \"function\") {\n        _setState(value);\n      } else if (shouldUpdateFn(state, value)) {\n        _setState(value);\n      }\n    },\n    [shouldUpdateFn, state]\n  );\n\n  return [state, setState];\n}\n","import { t } from \"@lingui/macro\";\nimport cx from \"classnames\";\nimport BuyInputSection from \"components/BuyInputSection/BuyInputSection\";\nimport { Dropdown, DropdownOption } from \"components/Dropdown/Dropdown\";\nimport { GmFees } from \"components/Synthetics/GmSwap/GmFees/GmFees\";\nimport Tab from \"components/Tab/Tab\";\nimport TokenSelector from \"components/TokenSelector/TokenSelector\";\nimport { HIGH_PRICE_IMPACT_BPS } from \"config/factors\";\nimport { SYNTHETICS_MARKET_DEPOSIT_TOKEN_KEY } from \"config/localStorage\";\nimport { NATIVE_TOKEN_ADDRESS, convertTokenAddress } from \"config/tokens\";\nimport {\n  FeeItem,\n  estimateExecuteDepositGasLimit,\n  estimateExecuteWithdrawalGasLimit,\n  getExecutionFee,\n  getFeeItem,\n  getTotalFeeItem,\n  useGasLimits,\n  useGasPrice,\n} from \"domain/synthetics/fees\";\nimport { useMarketTokensData, useMarketsInfo } from \"domain/synthetics/markets\";\nimport { Market } from \"domain/synthetics/markets/types\";\nimport { getAvailableUsdLiquidityForCollateral, getPoolUsd } from \"domain/synthetics/markets/utils\";\nimport { adaptToV1InfoTokens, convertToUsd, getTokenData, useAvailableTokensData } from \"domain/synthetics/tokens\";\nimport { GmSwapFees } from \"domain/synthetics/trade\";\nimport {\n  getNextDepositAmountsByCollaterals,\n  getNextDepositAmountsByMarketToken,\n} from \"domain/synthetics/trade/utils/deposit\";\nimport {\n  getNextWithdrawalAmountsByCollaterals,\n  getNextWithdrawalAmountsByMarketToken,\n} from \"domain/synthetics/trade/utils/withdrawal\";\nimport { Token } from \"domain/tokens\";\nimport { BigNumber } from \"ethers\";\nimport { useChainId } from \"lib/chains\";\nimport { useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport { formatAmountFree, formatTokenAmount, formatUsd, parseValue } from \"lib/numbers\";\nimport { getByKey } from \"lib/objects\";\nimport { usePrevious } from \"lib/usePrevious\";\nimport { Dispatch, SetStateAction, useEffect, useMemo, useState } from \"react\";\nimport { IoMdSwap } from \"react-icons/io\";\nimport { GmConfirmationBox } from \"../GmConfirmationBox/GmConfirmationBox\";\nimport { GmOrderStatus } from \"../GmOrderStatus/GmOrderStatus\";\n\nimport { useWeb3React } from \"@web3-react/core\";\nimport Button from \"components/Button/Button\";\nimport { useVirtualInventory } from \"domain/synthetics/fees/useVirtualInventory\";\nimport { useSafeState } from \"lib/useSafeState\";\nimport \"./GmSwapBox.scss\";\n\nexport enum Operation {\n  Deposit = \"Deposit\",\n  Withdrawal = \"Withdrawal\",\n}\n\nexport enum Mode {\n  Single = \"Single\",\n  Pair = \"Pair\",\n}\n\ntype Props = {\n  selectedMarketAddress?: string;\n  markets: Market[];\n  onSelectMarket: (marketAddress: string) => void;\n  onConnectWallet: () => void;\n  setPendingTxns: (txns: any) => void;\n  operation: Operation;\n  mode: Mode;\n  setMode: Dispatch<SetStateAction<Mode>>;\n  setOperation: Dispatch<SetStateAction<Operation>>;\n};\n\nconst getAvailableModes = (operation: Operation, market?: Market) => {\n  if (operation === Operation.Deposit) {\n    if (!market?.isSameCollaterals) {\n      return [Mode.Single, Mode.Pair];\n    }\n\n    return [Mode.Single];\n  }\n\n  return [Mode.Pair];\n};\n\nexport function GmSwapBox(p: Props) {\n  const { operation, mode, setMode, setOperation } = p;\n\n  const marketAddress = p.selectedMarketAddress;\n\n  const { chainId } = useChainId();\n  const { account } = useWeb3React();\n  const { marketsInfoData } = useMarketsInfo(chainId);\n  const { tokensData } = useAvailableTokensData(chainId);\n  const { virtualInventoryForSwaps } = useVirtualInventory(chainId);\n\n  const infoTokens = adaptToV1InfoTokens(tokensData || {});\n\n  const { gasLimits } = useGasLimits(chainId);\n  const { gasPrice } = useGasPrice(chainId);\n\n  const { marketTokensData: depositMarketTokensData } = useMarketTokensData(chainId, { isDeposit: true });\n  const { marketTokensData: withdrawalMarketTokensData } = useMarketTokensData(chainId, { isDeposit: false });\n\n  const [focusedInput, setFocusedInput] = useState<\"longCollateral\" | \"shortCollateral\" | \"market\">();\n  const [stage, setStage] = useState<\"swap\" | \"confirmation\" | \"processing\">();\n  const [isHighPriceImpactAccepted, setIsHighPriceImpactAccepted] = useState(false);\n\n  const operationLabels = {\n    [Operation.Deposit]: t`Buy GM`,\n    [Operation.Withdrawal]: t`Sell GM`,\n  };\n\n  const modeLabels = {\n    [Mode.Single]: t`Single`,\n    [Mode.Pair]: t`Pair`,\n  };\n\n  const isDeposit = operation === Operation.Deposit;\n  const isWithdrawal = operation === Operation.Withdrawal;\n  const isSingle = mode === Mode.Single;\n  const isPair = mode === Mode.Pair;\n\n  const marketInfo = getByKey(marketsInfoData, marketAddress);\n\n  const availableModes = getAvailableModes(operation, marketInfo);\n\n  const marketsOptions: DropdownOption[] = Object.values(marketsInfoData || {}).map((marketInfo) => ({\n    label: `GM: ${marketInfo.name}`,\n    value: marketInfo.marketTokenAddress,\n  }));\n\n  const [firstTokenAddress, setFirstTokenAddress] = useLocalStorageSerializeKey<string | undefined>(\n    [chainId, SYNTHETICS_MARKET_DEPOSIT_TOKEN_KEY, isDeposit, marketAddress, \"first\"],\n    undefined\n  );\n\n  const firstToken = getTokenData(tokensData, firstTokenAddress);\n  const [firstTokenInputValue, setFirstTokenInputValue] = useSafeState<string>(\"\");\n  const firstTokenAmount = parseValue(firstTokenInputValue, firstToken?.decimals || 0);\n  const firstTokenUsd = convertToUsd(\n    firstTokenAmount,\n    firstToken?.decimals,\n    isDeposit ? firstToken?.prices?.minPrice : firstToken?.prices?.maxPrice\n  );\n\n  const [secondTokenAddress, setSecondTokenAddress] = useLocalStorageSerializeKey<string | undefined>(\n    [chainId, SYNTHETICS_MARKET_DEPOSIT_TOKEN_KEY, isDeposit, marketAddress, \"second\"],\n    undefined\n  );\n  const secondToken = getTokenData(tokensData, secondTokenAddress);\n  const [secondTokenInputValue, setSecondTokenInputValue] = useSafeState<string>(\"\");\n  const secondTokenAmount = parseValue(secondTokenInputValue, secondToken?.decimals || 0);\n  const secondTokenUsd = convertToUsd(\n    secondTokenAmount,\n    secondToken?.decimals,\n    isDeposit ? secondToken?.prices?.minPrice : secondToken?.prices?.maxPrice\n  );\n\n  const longTokenInputState = getInputStateByCollateralType(\"long\");\n  const shortTokenInputState = getInputStateByCollateralType(\"short\");\n\n  const { longTokenAmount, longTokenUsd, shortTokenAmount, shortTokenUsd } = useMemo(() => {\n    let longTokenAmount = longTokenInputState?.amount;\n    let longTokenUsd = longTokenInputState?.usd;\n    let shortTokenAmount = shortTokenInputState?.amount;\n    let shortTokenUsd = shortTokenInputState?.usd;\n\n    if (isDeposit && marketInfo?.isSameCollaterals) {\n      longTokenAmount = longTokenAmount?.div(2);\n      longTokenUsd = longTokenUsd?.div(2);\n      shortTokenAmount = shortTokenAmount?.div(2);\n      shortTokenUsd = shortTokenUsd?.div(2);\n    }\n\n    return {\n      longTokenAmount,\n      longTokenUsd,\n      shortTokenAmount,\n      shortTokenUsd,\n    };\n  }, [\n    isDeposit,\n    longTokenInputState?.amount,\n    longTokenInputState?.usd,\n    marketInfo?.isSameCollaterals,\n    shortTokenInputState?.amount,\n    shortTokenInputState?.usd,\n  ]);\n\n  const tokenOptions: Token[] = (function getTokenOptions() {\n    const longToken = getTokenData(tokensData, marketInfo?.longTokenAddress);\n    const shortToken = getTokenData(tokensData, marketInfo?.shortTokenAddress);\n\n    if (!longToken || !shortToken) return [];\n\n    const result = [longToken];\n\n    if (longToken.address !== shortToken.address) {\n      result.push(shortToken);\n    }\n\n    if (result.some((token) => token.isWrapped)) {\n      result.unshift(getTokenData(tokensData, NATIVE_TOKEN_ADDRESS)!);\n    }\n\n    return result;\n  })();\n\n  const [marketTokenInputValue, setMarketTokenInputValue] = useSafeState<string>();\n  const marketToken = getTokenData(\n    isDeposit ? depositMarketTokensData : withdrawalMarketTokensData,\n    marketInfo?.marketTokenAddress\n  );\n  const marketTokenAmount = parseValue(marketTokenInputValue || \"0\", marketToken?.decimals || 0);\n  const prevMarketTokenAmount = usePrevious(marketTokenAmount);\n  const marketTokenUsd = convertToUsd(\n    marketTokenAmount,\n    marketToken?.decimals,\n    isDeposit ? marketToken?.prices?.maxPrice : marketToken?.prices?.minPrice\n  );\n\n  const [swapFeeUsd, setSwapFeeUsd] = useSafeState<BigNumber | undefined>(\n    undefined,\n    (a, b) => Boolean(a) !== Boolean(b) || a?.toString() !== b?.toString()\n  );\n\n  const [swapPriceImpactDeltaUsd, setSwapPriceImpactDeltaUsd] = useSafeState<BigNumber | undefined>(\n    undefined,\n    (a, b) => Boolean(a) !== Boolean(b) || a?.toString() !== b?.toString()\n  );\n\n  const { longCollateralLiquidityUsd, shortCollateralLiquidityUsd, longPoolUsd, shortPoolUsd } = useMemo(() => {\n    if (!marketInfo) return {};\n\n    return {\n      longCollateralLiquidityUsd: getAvailableUsdLiquidityForCollateral(marketInfo, true),\n      shortCollateralLiquidityUsd: getAvailableUsdLiquidityForCollateral(marketInfo, false),\n      longPoolUsd: getPoolUsd(marketInfo, true, \"midPrice\"),\n      shortPoolUsd: getPoolUsd(marketInfo, false, \"midPrice\"),\n    };\n  }, [marketInfo]);\n\n  const fees: GmSwapFees | undefined = useMemo(() => {\n    const basisUsd = isDeposit\n      ? BigNumber.from(0)\n          .add(longTokenUsd || 0)\n          .add(shortTokenUsd || 0)\n      : marketTokenUsd;\n\n    const swapFee = getFeeItem(swapFeeUsd?.mul(-1), basisUsd);\n    const swapPriceImpact = getFeeItem(swapPriceImpactDeltaUsd, basisUsd);\n    const totalFees = getTotalFeeItem([swapPriceImpact, swapFee].filter(Boolean) as FeeItem[]);\n\n    return {\n      totalFees,\n      swapFee,\n      swapPriceImpact,\n    };\n  }, [isDeposit, longTokenUsd, marketTokenUsd, shortTokenUsd, swapFeeUsd, swapPriceImpactDeltaUsd]);\n\n  const isHighPriceImpact =\n    fees?.swapPriceImpact?.deltaUsd.lt(0) && fees.swapPriceImpact.bps.abs().gte(HIGH_PRICE_IMPACT_BPS);\n\n  const executionFee = useMemo(() => {\n    if (!gasLimits || !gasPrice || !tokensData) return undefined;\n\n    if (isDeposit) {\n      const estimatedGasLimit = estimateExecuteDepositGasLimit(gasLimits, {\n        initialLongTokenAmount: longTokenAmount,\n        initialShortTokenAmount: shortTokenAmount,\n      });\n\n      return getExecutionFee(chainId, gasLimits, tokensData, estimatedGasLimit, gasPrice);\n    } else {\n      const estimatedGasLimit = estimateExecuteWithdrawalGasLimit(gasLimits, {});\n\n      return getExecutionFee(chainId, gasLimits, tokensData, estimatedGasLimit, gasPrice);\n    }\n  }, [chainId, gasLimits, gasPrice, isDeposit, longTokenAmount, shortTokenAmount, tokensData]);\n\n  const error = (function getError() {\n    if (!marketInfo) {\n      return t`Loading...`;\n    }\n\n    if (isDeposit) {\n      const totalCollateralUsd = BigNumber.from(0)\n        .add(longTokenUsd || 0)\n        .add(shortTokenUsd || 0);\n\n      if (fees.totalFees?.deltaUsd.lt(0) && fees.totalFees.deltaUsd.abs().gt(totalCollateralUsd)) {\n        return t`Fees exceed Pay amount`;\n      }\n    } else if (\n      fees.totalFees?.deltaUsd.lt(0) &&\n      fees.totalFees.deltaUsd.abs().gt(marketTokenUsd || BigNumber.from(0))\n    ) {\n      return t`Fees exceed Pay amount`;\n    }\n\n    if (longTokenAmount?.lt(0) || shortTokenAmount?.lt(0) || marketTokenAmount?.lt(0)) {\n      return t`Amount should be greater than zero`;\n    }\n\n    if (!marketTokenAmount?.gt(0)) {\n      return t`Enter an amount`;\n    }\n\n    if (isDeposit) {\n      if (longTokenInputState?.amount?.gt(longTokenInputState.token?.balance || 0)) {\n        return t`Insufficient ${longTokenInputState.token?.symbol} balance`;\n      }\n\n      if (shortTokenInputState?.amount?.gt(shortTokenInputState.token?.balance || 0)) {\n        return t`Insufficient ${shortTokenInputState.token?.symbol} balance`;\n      }\n    } else {\n      if (marketTokenAmount.gt(marketToken?.balance || BigNumber.from(0))) {\n        return t`Insufficient ${marketToken?.symbol} balance`;\n      }\n\n      if (longTokenUsd?.gt(longCollateralLiquidityUsd || BigNumber.from(0))) {\n        return t`Insufficient ${longTokenInputState?.token?.symbol} liquidity`;\n      }\n\n      if (shortTokenUsd?.gt(shortCollateralLiquidityUsd || BigNumber.from(0))) {\n        return t`Insufficient ${shortTokenInputState?.token?.symbol} liquidity`;\n      }\n    }\n  })();\n\n  const submitButtonState = (function getSubmitButtonState() {\n    if (error) {\n      return {\n        text: error,\n        disabled: true,\n      };\n    }\n\n    if (!account) {\n      return {\n        text: t`Connect wallet`,\n        disabled: false,\n        onClick: p.onConnectWallet,\n      };\n    }\n\n    return {\n      text: isDeposit ? t`Buy GM` : t`Sell GM`,\n      disabled: false,\n      onClick: () => {\n        setStage(\"confirmation\");\n      },\n    };\n  })();\n\n  function getInputStateByCollateralType(type: \"long\" | \"short\") {\n    if (!marketInfo) return undefined;\n\n    const inputs = [\n      {\n        address: firstTokenAddress,\n        value: firstTokenInputValue,\n        setValue: setFirstTokenInputValue,\n        amount: firstTokenAmount,\n        usd: firstTokenUsd,\n        token: firstToken,\n      },\n      {\n        address: secondTokenAddress,\n        value: secondTokenInputValue,\n        setValue: setSecondTokenInputValue,\n        amount: secondTokenAmount,\n        usd: secondTokenUsd,\n        token: secondToken,\n      },\n    ];\n\n    return inputs.find((input) => {\n      return (\n        input.address &&\n        convertTokenAddress(chainId, input.address, \"wrapped\") ===\n          (type === \"long\" ? marketInfo.longTokenAddress : marketInfo.shortTokenAddress)\n      );\n    });\n  }\n\n  function onFocusedCollateralInputChange(tokenAddress: string) {\n    if (marketInfo?.isSameCollaterals) {\n      setFocusedInput(\"shortCollateral\");\n      return;\n    }\n\n    if (convertTokenAddress(chainId, tokenAddress, \"wrapped\") === marketInfo?.longTokenAddress) {\n      setFocusedInput(\"longCollateral\");\n    } else if (convertTokenAddress(chainId, tokenAddress, \"wrapped\") === marketInfo?.shortTokenAddress) {\n      setFocusedInput(\"shortCollateral\");\n    }\n  }\n\n  useEffect(\n    function updateAmounts() {\n      const longToken = getTokenData(tokensData, marketInfo?.longTokenAddress);\n      const shortToken = getTokenData(tokensData, marketInfo?.shortTokenAddress);\n\n      if (\n        !marketInfo ||\n        !longToken?.prices ||\n        !shortToken?.prices ||\n        !marketToken?.prices ||\n        !longPoolUsd ||\n        !shortPoolUsd ||\n        !focusedInput ||\n        !virtualInventoryForSwaps\n      ) {\n        return;\n      }\n\n      if (isDeposit) {\n        if ([\"longCollateral\", \"shortCollateral\"].includes(focusedInput)) {\n          if (!longTokenUsd?.gt(0) && !shortTokenUsd?.gt(0)) {\n            setMarketTokenInputValue(\"\");\n            return;\n          }\n\n          const amounts = getNextDepositAmountsByCollaterals({\n            marketInfo,\n            marketToken,\n            longTokenAmount,\n            shortTokenAmount,\n            virtualInventoryForSwaps,\n          });\n\n          if (amounts) {\n            setMarketTokenInputValue(\n              amounts.marketTokenAmount.gt(0) ? formatAmountFree(amounts.marketTokenAmount, marketToken.decimals) : \"\"\n            );\n            setSwapFeeUsd(amounts.swapFeeUsd);\n            setSwapPriceImpactDeltaUsd(amounts.swapPriceImpactDeltaUsd);\n          }\n        }\n\n        if (focusedInput === \"market\" && !marketTokenAmount?.eq(prevMarketTokenAmount || 0)) {\n          if (!marketTokenAmount?.gt(0)) {\n            longTokenInputState?.setValue(\"\");\n            shortTokenInputState?.setValue(\"\");\n            return;\n          }\n\n          const amounts = getNextDepositAmountsByMarketToken({\n            marketInfo,\n            marketToken,\n            marketTokenAmount,\n            includeLongToken: Boolean(longTokenInputState?.address),\n            includeShortToken: Boolean(shortTokenInputState?.address),\n            previousLongTokenAmount: longTokenAmount,\n            previousShortTokenAmount: shortTokenAmount,\n            virtualInventoryForSwaps,\n          });\n\n          if (amounts) {\n            longTokenInputState?.setValue(\n              amounts.longTokenAmount?.gt(0) ? formatAmountFree(amounts.longTokenAmount, longToken.decimals) : \"\"\n            );\n            shortTokenInputState?.setValue(\n              amounts.shortTokenAmount?.gt(0) ? formatAmountFree(amounts.shortTokenAmount, shortToken.decimals) : \"\"\n            );\n            setSwapFeeUsd(amounts.swapFeeUsd);\n            setSwapPriceImpactDeltaUsd(amounts.swapPriceImpactDeltaUsd);\n          }\n        }\n      }\n\n      if (isWithdrawal) {\n        if (focusedInput === \"market\") {\n          if (!marketTokenAmount?.gt(0)) {\n            longTokenInputState?.setValue(\"\");\n            shortTokenInputState?.setValue(\"\");\n            return;\n          }\n\n          if (!longPoolUsd.gt(0) || !shortPoolUsd.gt(0)) {\n            return;\n          }\n\n          const amounts = getNextWithdrawalAmountsByMarketToken({\n            marketInfo,\n            marketToken,\n            marketTokenAmount,\n          });\n\n          if (amounts) {\n            if (marketInfo.isSameCollaterals) {\n              setFirstTokenInputValue(\n                amounts.longTokenAmount?.gt(0) ? formatAmountFree(amounts.longTokenAmount, longToken.decimals) : \"\"\n              );\n              setSecondTokenInputValue(\n                amounts.shortTokenAmount?.gt(0) ? formatAmountFree(amounts.shortTokenAmount, shortToken.decimals) : \"\"\n              );\n            } else {\n              longTokenInputState?.setValue(\n                amounts.longTokenAmount?.gt(0) ? formatAmountFree(amounts.longTokenAmount, longToken.decimals) : \"\"\n              );\n              shortTokenInputState?.setValue(\n                amounts.shortTokenAmount?.gt(0) ? formatAmountFree(amounts.shortTokenAmount, shortToken.decimals) : \"\"\n              );\n            }\n\n            setSwapFeeUsd(amounts.swapFeeUsd);\n            setSwapPriceImpactDeltaUsd(undefined);\n          }\n        }\n\n        if ([\"longCollateral\", \"shortCollateral\"].includes(focusedInput)) {\n          if (focusedInput === \"longCollateral\" && !longTokenAmount?.gt(0)) {\n            shortTokenInputState?.setValue(\"\");\n            setMarketTokenInputValue(\"\");\n            return;\n          }\n\n          if (focusedInput === \"shortCollateral\" && !shortTokenAmount?.gt(0)) {\n            longTokenInputState?.setValue(\"\");\n            setMarketTokenInputValue(\"\");\n            return;\n          }\n\n          if (!longPoolUsd.gt(0) || !shortPoolUsd.gt(0)) {\n            return;\n          }\n\n          const amounts = getNextWithdrawalAmountsByCollaterals({\n            marketInfo,\n            marketToken,\n            longTokenAmount: focusedInput === \"longCollateral\" ? longTokenAmount : undefined,\n            shortTokenAmount: focusedInput === \"shortCollateral\" ? shortTokenAmount : undefined,\n          });\n\n          if (amounts) {\n            setMarketTokenInputValue(\n              amounts.marketTokenAmount.gt(0) ? formatAmountFree(amounts.marketTokenAmount, marketToken.decimals) : \"\"\n            );\n\n            if (amounts.longTokenAmount) {\n              if (marketInfo.isSameCollaterals) {\n                setFirstTokenInputValue(\n                  amounts.longTokenAmount.gt(0) ? formatAmountFree(amounts.longTokenAmount, longToken.decimals) : \"\"\n                );\n              } else {\n                longTokenInputState?.setValue(\n                  amounts.longTokenAmount.gt(0) ? formatAmountFree(amounts.longTokenAmount, longToken.decimals) : \"\"\n                );\n              }\n            }\n            if (amounts.shortTokenAmount) {\n              if (marketInfo.isSameCollaterals) {\n                setSecondTokenInputValue(\n                  amounts.shortTokenAmount.gt(0) ? formatAmountFree(amounts.shortTokenAmount, shortToken.decimals) : \"\"\n                );\n              } else {\n                shortTokenInputState?.setValue(\n                  amounts.shortTokenAmount.gt(0) ? formatAmountFree(amounts.shortTokenAmount, shortToken.decimals) : \"\"\n                );\n              }\n            }\n            setSwapFeeUsd(amounts.swapFeeUsd);\n            setSwapPriceImpactDeltaUsd(undefined);\n          }\n        }\n      }\n    },\n    [\n      focusedInput,\n      isDeposit,\n      isWithdrawal,\n      longPoolUsd,\n      longTokenAmount,\n      longTokenInputState,\n      longTokenUsd,\n      marketInfo,\n      marketToken,\n      marketTokenAmount,\n      prevMarketTokenAmount,\n      setFirstTokenInputValue,\n      setMarketTokenInputValue,\n      setSecondTokenInputValue,\n      setSwapFeeUsd,\n      setSwapPriceImpactDeltaUsd,\n      shortPoolUsd,\n      shortTokenAmount,\n      shortTokenInputState,\n      shortTokenUsd,\n      tokensData,\n      virtualInventoryForSwaps,\n    ]\n  );\n\n  useEffect(\n    function updateMode() {\n      if (!availableModes.includes(mode)) {\n        setMode(availableModes[0]);\n      }\n    },\n    [availableModes, mode, operation, setMode]\n  );\n\n  useEffect(\n    function updateTokens() {\n      if (!tokenOptions.length) return;\n\n      if (!tokenOptions.find((token) => token.address === firstTokenAddress)) {\n        setFirstTokenAddress(tokenOptions[0].address);\n      }\n\n      if (isSingle && secondTokenAddress) {\n        setSecondTokenAddress(undefined);\n        setSecondTokenInputValue(\"\");\n      }\n\n      if (isPair && firstTokenAddress) {\n        if (marketInfo?.isSameCollaterals) {\n          if (!secondTokenAddress || firstTokenAddress !== secondTokenAddress) {\n            setSecondTokenAddress(firstTokenAddress);\n          }\n\n          return;\n        }\n\n        if (\n          !secondTokenAddress ||\n          !tokenOptions.find((token) => token.address === secondTokenAddress) ||\n          convertTokenAddress(chainId, firstTokenAddress, \"wrapped\") ===\n            convertTokenAddress(chainId, secondTokenAddress, \"wrapped\")\n        ) {\n          const secondToken = tokenOptions.find((token) => {\n            return (\n              convertTokenAddress(chainId, token.address, \"wrapped\") !==\n              convertTokenAddress(chainId, firstTokenAddress, \"wrapped\")\n            );\n          });\n          setSecondTokenAddress(secondToken?.address);\n        }\n      }\n    },\n    [\n      chainId,\n      firstTokenAddress,\n      isPair,\n      isSingle,\n      marketInfo?.isSameCollaterals,\n      secondTokenAddress,\n      setFirstTokenAddress,\n      setSecondTokenAddress,\n      setSecondTokenInputValue,\n      tokenOptions,\n    ]\n  );\n\n  return (\n    <div className={`App-box GmSwapBox`}>\n      <Dropdown\n        className=\"GmSwapBox-market-dropdown\"\n        selectedOption={marketsOptions.find((o) => o.value === p.selectedMarketAddress)}\n        options={marketsOptions}\n        onSelect={(o) => p.onSelectMarket(o.value)}\n      />\n\n      <Tab\n        options={Object.values(Operation)}\n        optionLabels={operationLabels}\n        option={operation}\n        onChange={setOperation}\n        className=\"Exchange-swap-option-tabs\"\n      />\n\n      <Tab\n        options={availableModes}\n        optionLabels={modeLabels}\n        className=\"GmSwapBox-asset-options-tabs\"\n        type=\"inline\"\n        option={mode}\n        onChange={setMode}\n      />\n\n      <div className={cx(\"GmSwapBox-form-layout\", { reverse: isWithdrawal })}>\n        <BuyInputSection\n          topLeftLabel={isDeposit ? t`Pay` : t`Receive`}\n          topLeftValue={formatUsd(firstTokenUsd)}\n          topRightLabel={t`Balance:`}\n          topRightValue={formatTokenAmount(firstToken?.balance, firstToken?.decimals)}\n          showMaxButton={isDeposit && firstToken?.balance?.gt(0) && !firstTokenAmount?.eq(firstToken.balance)}\n          inputValue={firstTokenInputValue}\n          onInputValueChange={(e) => {\n            if (firstToken) {\n              setFirstTokenInputValue(e.target.value);\n              onFocusedCollateralInputChange(firstToken.address);\n            }\n          }}\n          onClickMax={() => {\n            if (firstToken?.balance) {\n              setFirstTokenInputValue(formatAmountFree(firstToken.balance, firstToken.decimals));\n              onFocusedCollateralInputChange(firstToken.address);\n            }\n          }}\n        >\n          {firstTokenAddress && isSingle ? (\n            <TokenSelector\n              label={t`Pay`}\n              chainId={chainId}\n              tokenAddress={firstTokenAddress}\n              onSelectToken={(token) => setFirstTokenAddress(token.address)}\n              tokens={tokenOptions}\n              infoTokens={infoTokens}\n              className=\"GlpSwap-from-token\"\n              showSymbolImage={true}\n              showTokenImgInDropdown={true}\n            />\n          ) : (\n            <div className=\"selected-token\">{firstToken?.symbol}</div>\n          )}\n        </BuyInputSection>\n\n        {isPair && secondTokenAddress && (\n          <BuyInputSection\n            topLeftLabel={isDeposit ? t`Pay` : t`Receive`}\n            topLeftValue={formatUsd(secondTokenUsd)}\n            topRightLabel={t`Balance:`}\n            topRightValue={formatTokenAmount(secondToken?.balance, secondToken?.decimals)}\n            inputValue={secondTokenInputValue}\n            showMaxButton={isDeposit && secondToken?.balance?.gt(0) && !secondTokenAmount?.eq(secondToken.balance)}\n            onInputValueChange={(e) => {\n              if (secondToken) {\n                setSecondTokenInputValue(e.target.value);\n                onFocusedCollateralInputChange(secondToken.address);\n              }\n            }}\n            onClickMax={() => {\n              if (secondToken?.balance) {\n                setSecondTokenInputValue(formatAmountFree(secondToken.balance, secondToken.decimals));\n                onFocusedCollateralInputChange(secondToken.address);\n              }\n            }}\n          >\n            <div className=\"selected-token\">{secondToken?.symbol}</div>\n          </BuyInputSection>\n        )}\n\n        <div\n          className=\"AppOrder-ball-container\"\n          onClick={() => {\n            setOperation((prev) => (prev === Operation.Deposit ? Operation.Withdrawal : Operation.Deposit));\n          }}\n        >\n          <div className=\"AppOrder-ball\">\n            <IoMdSwap className=\"Exchange-swap-ball-icon\" />\n          </div>\n        </div>\n\n        <BuyInputSection\n          topLeftLabel={isWithdrawal ? t`Pay` : t`Receive`}\n          topLeftValue={formatUsd(marketTokenUsd)}\n          topRightLabel={t`Balance:`}\n          topRightValue={formatTokenAmount(marketToken?.balance, marketToken?.decimals)}\n          showMaxButton={isWithdrawal && marketToken?.balance?.gt(0) && !marketTokenAmount?.eq(marketToken.balance)}\n          inputValue={marketTokenInputValue}\n          onInputValueChange={(e) => {\n            setMarketTokenInputValue(e.target.value);\n            setFocusedInput(\"market\");\n          }}\n          onClickMax={() => {\n            if (marketToken?.balance) {\n              setMarketTokenInputValue(formatAmountFree(marketToken.balance, marketToken.decimals));\n              setFocusedInput(\"market\");\n            }\n          }}\n        >\n          <div className=\"selected-token\">GM</div>\n        </BuyInputSection>\n      </div>\n\n      <div className=\"GmSwapBox-info-section\">\n        <GmFees\n          totalFees={fees?.totalFees}\n          swapFee={fees?.swapFee}\n          swapPriceImpact={fees?.swapPriceImpact}\n          executionFee={executionFee}\n        />\n      </div>\n\n      <div className=\"Exchange-swap-button-container\">\n        <Button\n          className=\"w-100\"\n          variant=\"primary-action\"\n          onClick={submitButtonState.onClick}\n          disabled={submitButtonState.disabled}\n        >\n          {submitButtonState.text}\n        </Button>\n      </div>\n\n      {stage === \"confirmation\" && (\n        <GmConfirmationBox\n          marketToken={marketToken!}\n          longToken={longTokenInputState?.token}\n          shortToken={shortTokenInputState?.token}\n          marketTokenAmount={marketTokenAmount!}\n          marketTokenUsd={marketTokenUsd!}\n          longTokenAmount={longTokenAmount}\n          longTokenUsd={longTokenUsd}\n          shortTokenAmount={shortTokenAmount}\n          shortTokenUsd={shortTokenUsd}\n          fees={fees!}\n          error={error}\n          isDeposit={isDeposit}\n          executionFee={executionFee}\n          setPendingTxns={p.setPendingTxns}\n          onSubmitted={() => {\n            setStage(\"processing\");\n          }}\n          onClose={() => {\n            setStage(\"swap\");\n          }}\n          isHighPriceImpact={isHighPriceImpact!}\n          isHighPriceImpactAccepted={isHighPriceImpactAccepted}\n          setIsHighPriceImpactAccepted={setIsHighPriceImpactAccepted}\n        />\n      )}\n\n      {stage === \"processing\" && (\n        <GmOrderStatus\n          firstToken={firstTokenAddress!}\n          secondToken={secondTokenAmount?.gt(0) ? secondTokenAddress : undefined}\n          market={marketInfo?.marketTokenAddress!}\n          isDeposit={isDeposit}\n          onClose={() => {\n            setStage(\"swap\");\n          }}\n        />\n      )}\n    </div>\n  );\n}\n","import { MarketInfo, getPoolUsd } from \"domain/synthetics/markets\";\nimport { TokenData, convertToTokenAmount, convertToUsd } from \"domain/synthetics/tokens\";\nimport { BigNumber } from \"ethers\";\nimport { applyFactor } from \"lib/numbers\";\nimport { WithdrawalAmounts } from \"../types\";\n\nexport function getNextWithdrawalAmountsByMarketToken(p: {\n  marketInfo: MarketInfo;\n  marketToken: TokenData;\n  marketTokenAmount: BigNumber;\n}): WithdrawalAmounts | undefined {\n  const longPoolUsd = getPoolUsd(p.marketInfo, true, \"maxPrice\");\n  const shortPoolUsd = getPoolUsd(p.marketInfo, false, \"maxPrice\");\n  const { longToken, shortToken } = p.marketInfo;\n\n  if (!longPoolUsd || !shortPoolUsd || !p.marketToken.prices || !longToken.prices || !shortToken.prices) {\n    return undefined;\n  }\n\n  const totalPoolsUsd = longPoolUsd.add(shortPoolUsd);\n\n  if (!totalPoolsUsd.gt(0)) {\n    return undefined;\n  }\n\n  const marketTokenAmount = p.marketTokenAmount;\n  const marketTokenUsd = convertToUsd(marketTokenAmount, p.marketToken.decimals, p.marketToken.prices.minPrice)!;\n\n  let longTokenUsd = marketTokenUsd.mul(longPoolUsd).div(totalPoolsUsd);\n  let shortTokenUsd = marketTokenUsd.mul(shortPoolUsd).div(totalPoolsUsd);\n\n  const longSwapFeeUsd = applyFactor(longTokenUsd, p.marketInfo.swapFeeFactor);\n  const shortSwapFeeUsd = applyFactor(shortTokenUsd, p.marketInfo.swapFeeFactor);\n  const swapFeeUsd = longSwapFeeUsd.add(shortSwapFeeUsd);\n\n  longTokenUsd = longTokenUsd.sub(longSwapFeeUsd);\n  shortTokenUsd = shortTokenUsd.sub(shortSwapFeeUsd);\n\n  const longTokenAmount = convertToTokenAmount(longTokenUsd, longToken.decimals, longToken.prices.maxPrice)!;\n  const shortTokenAmount = convertToTokenAmount(shortTokenUsd, shortToken.decimals, shortToken.prices.maxPrice)!;\n\n  return {\n    marketTokenAmount,\n    marketTokenUsd,\n    longTokenAmount,\n    longTokenUsd,\n    shortTokenAmount,\n    shortTokenUsd,\n    swapFeeUsd,\n  };\n}\n\nexport function getNextWithdrawalAmountsByCollaterals(p: {\n  marketInfo: MarketInfo;\n  marketToken: TokenData;\n  longTokenAmount?: BigNumber;\n  shortTokenAmount?: BigNumber;\n}): WithdrawalAmounts | undefined {\n  const longPoolUsd = getPoolUsd(p.marketInfo, true, \"maxPrice\");\n\n  const shortPoolUsd = getPoolUsd(p.marketInfo, false, \"maxPrice\");\n\n  const { longToken, shortToken } = p.marketInfo;\n\n  if (\n    !longPoolUsd ||\n    !shortPoolUsd ||\n    !p.marketToken.prices ||\n    !longToken.prices ||\n    !shortToken.prices ||\n    (!p.longTokenAmount && !p.shortTokenAmount)\n  ) {\n    return undefined;\n  }\n\n  let longTokenAmount: BigNumber;\n  let shortTokenAmount: BigNumber;\n  let longTokenUsd: BigNumber;\n  let shortTokenUsd: BigNumber;\n\n  if (p.longTokenAmount) {\n    longTokenAmount = p.longTokenAmount;\n    longTokenUsd = convertToUsd(longTokenAmount, longToken.decimals, longToken.prices.maxPrice)!;\n    shortTokenUsd = longTokenUsd.mul(shortPoolUsd).div(longPoolUsd);\n    shortTokenAmount = convertToTokenAmount(shortTokenUsd, shortToken.decimals, shortToken.prices.maxPrice)!;\n  } else {\n    shortTokenAmount = p.shortTokenAmount!;\n    shortTokenUsd = convertToUsd(p.shortTokenAmount, shortToken.decimals, shortToken.prices.maxPrice)!;\n    longTokenUsd = shortTokenUsd.mul(longPoolUsd).div(shortPoolUsd);\n    longTokenAmount = convertToTokenAmount(longTokenUsd, longToken.decimals, longToken.prices.maxPrice)!;\n  }\n\n  let marketTokenUsd = longTokenUsd.add(shortTokenUsd);\n\n  const swapFeeUsd = applyFactor(marketTokenUsd, p.marketInfo.swapFeeFactor);\n\n  marketTokenUsd = marketTokenUsd.sub(swapFeeUsd);\n\n  const marketTokenAmount = convertToTokenAmount(\n    marketTokenUsd,\n    p.marketToken.decimals,\n    p.marketToken.prices.minPrice\n  )!;\n\n  return {\n    marketTokenAmount,\n    marketTokenUsd,\n    longTokenAmount,\n    longTokenUsd,\n    shortTokenAmount,\n    shortTokenUsd,\n    swapFeeUsd,\n  };\n}\n","import { Trans } from \"@lingui/macro\";\nimport Button from \"components/Button/Button\";\nimport { getChainName } from \"config/chains\";\nimport { getMarketIndexName, getMarketPoolName, useMarketTokensData, useMarkets } from \"domain/synthetics/markets\";\nimport { useMarketTokensAPR } from \"domain/synthetics/markets/useMarketTokensAPR\";\nimport { convertToUsd, getTokenData, useAvailableTokensData } from \"domain/synthetics/tokens\";\nimport { useChainId } from \"lib/chains\";\nimport { formatAmount, formatTokenAmount, formatUsd } from \"lib/numbers\";\nimport { useMemo } from \"react\";\nimport { useMedia } from \"react-use\";\nimport { Operation } from \"../GmSwap/GmSwapBox/GmSwapBox\";\nimport \"./GmList.scss\";\nimport { getByKey } from \"lib/objects\";\n\nexport function GmList() {\n  const { chainId } = useChainId();\n\n  const { marketTokensData } = useMarketTokensData(chainId, { isDeposit: false });\n  const { marketsData } = useMarkets(chainId);\n  const { tokensData } = useAvailableTokensData(chainId);\n  const { marketsTokensAPRData } = useMarketTokensAPR(chainId);\n\n  const marketTokens = useMemo(() => {\n    if (!marketTokensData || !marketsData) {\n      return [];\n    }\n\n    return Object.values(marketTokensData).sort((a, b) => {\n      const market1 = getByKey(marketsData, a.address)!;\n      const market2 = getByKey(marketsData, b.address)!;\n      const indexToken1 = getTokenData(tokensData, market1.indexTokenAddress, \"native\")!;\n      const indexToken2 = getTokenData(tokensData, market2.indexTokenAddress, \"native\")!;\n\n      return indexToken1.symbol.localeCompare(indexToken2.symbol);\n    });\n  }, [marketTokensData, marketsData, tokensData]);\n\n  const isMobile = useMedia(\"(max-width: 1100px)\");\n\n  return (\n    <div className=\"GMList\">\n      {!isMobile && (\n        <div className=\"token-table-wrapper App-card\">\n          <div className=\"App-card-title\">\n            <Trans>GM ({getChainName(chainId)})</Trans>\n          </div>\n          <div className=\"App-card-divider\"></div>\n          <table className=\"token-table\">\n            <thead>\n              <tr>\n                <th>\n                  <Trans>MARKET</Trans>\n                </th>\n                <th>\n                  <Trans>PRICE</Trans>\n                </th>\n                <th>\n                  <Trans>WALLET</Trans>\n                </th>\n                <th>\n                  <Trans>APR</Trans>\n                </th>\n                <th>\n                  <Trans>TOTAL SUPPLY</Trans>\n                </th>\n                <th></th>\n              </tr>\n            </thead>\n            <tbody>\n              {marketTokens.map((token) => {\n                const market = getByKey(marketsData, token.address)!;\n\n                const indexToken = getTokenData(tokensData, market?.indexTokenAddress, \"native\")!;\n                const longToken = getTokenData(tokensData, market?.longTokenAddress)!;\n                const shortToken = getTokenData(tokensData, market?.shortTokenAddress)!;\n\n                const apr = marketsTokensAPRData?.[token.address];\n\n                const totalSupply = token.totalSupply;\n                const totalSupplyUsd = convertToUsd(totalSupply, token.decimals, token.prices?.minPrice);\n\n                return (\n                  <tr key={token.address}>\n                    <td>\n                      <div className=\"App-card-title-info\">\n                        <div className=\"App-card-title-info-text\">\n                          <div className=\"App-card-info-title\">\n                            {getMarketIndexName({ indexToken, isSpotOnly: market?.isSpotOnly })}\n                          </div>\n                          <div className=\"App-card-info-subtitle\">{getMarketPoolName({ longToken, shortToken })}</div>\n                        </div>\n                      </div>\n                    </td>\n                    <td>{formatUsd(token.prices?.minPrice)}</td>\n\n                    <td>\n                      {formatTokenAmount(token.balance, token.decimals, \"GM\")}\n                      <br />\n                      {formatUsd(convertToUsd(token.balance, token.decimals, token.prices?.minPrice))}\n                    </td>\n\n                    <td>{apr ? `${formatAmount(apr, 2, 2)}%` : \"...\"}</td>\n\n                    <td>\n                      {formatTokenAmount(totalSupply, token.decimals, \"GM\")}\n                      <br />\n                      {formatUsd(totalSupplyUsd)}\n                    </td>\n\n                    <td>\n                      <Button variant=\"semi-clear\" to={`/pools?operation=${Operation.Deposit}&market=${token.address}`}>\n                        <Trans>Buy GM</Trans>\n                      </Button>\n                    </td>\n                    <td>\n                      <Button\n                        variant=\"semi-clear\"\n                        to={`/pools?operation=${Operation.Withdrawal}&market=${token.address}`}\n                      >\n                        <Trans>Sell GM</Trans>\n                      </Button>\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      )}\n\n      {isMobile && (\n        <>\n          <div className=\"App-card-title\">\n            <span>\n              <Trans>GM ({getChainName(chainId)})</Trans>\n            </span>\n          </div>\n\n          <div className=\"token-grid\">\n            {marketTokens.map((token) => {\n              const apr = marketsTokensAPRData?.[token.address];\n\n              const totalSupply = token.totalSupply;\n              const totalSupplyUsd = convertToUsd(totalSupply, token.decimals, token.prices?.minPrice);\n              const market = getByKey(marketsData, token.address);\n\n              return (\n                <div className=\"App-card\" key={token.address}>\n                  <div className=\"App-card-title\">\n                    <div className=\"mobile-token-card\">\n                      <div className=\"token-symbol-text\">GM: {market?.name}</div>\n                    </div>\n                  </div>\n                  <div className=\"App-card-divider\"></div>\n                  <div className=\"App-card-content\">\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Price</Trans>\n                      </div>\n                      <div>{formatUsd(token.prices?.minPrice)}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Wallet</Trans>\n                      </div>\n                      <div>\n                        {formatTokenAmount(token.balance, token.decimals, \"GM\")} (\n                        {formatUsd(convertToUsd(token.balance, token.decimals, token.prices?.minPrice))})\n                      </div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>APR</Trans>\n                      </div>\n                      <div>{apr ? `${formatAmount(apr, 2, 2)}%` : \"...\"}</div>\n                    </div>\n                    <div className=\"App-card-row\">\n                      <div className=\"label\">\n                        <Trans>Total Supply</Trans>\n                      </div>\n                      <div>\n                        {\" \"}\n                        {formatTokenAmount(totalSupply, token.decimals, \"GM\")} ({formatUsd(totalSupplyUsd)})\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n","import React, { useState, useCallback } from \"react\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\n\nimport Modal from \"components/Modal/Modal\";\nimport Checkbox from \"components/Checkbox/Checkbox\";\nimport Tooltip from \"components/Tooltip/Tooltip\";\nimport Footer from \"components/Footer/Footer\";\n\nimport Vault from \"abis/Vault.json\";\nimport ReaderV2 from \"abis/ReaderV2.json\";\nimport Vester from \"abis/Vester.json\";\nimport RewardRouter from \"abis/RewardRouter.json\";\nimport RewardReader from \"abis/RewardReader.json\";\nimport Token from \"abis/Token.json\";\nimport GlpManager from \"abis/GlpManager.json\";\n\nimport { ethers } from \"ethers\";\nimport {\n  GLP_DECIMALS,\n  USD_DECIMALS,\n  BASIS_POINTS_DIVISOR,\n  PLACEHOLDER_ACCOUNT,\n  getBalanceAndSupplyData,\n  getDepositBalanceData,\n  getVestingData,\n  getStakingData,\n  getProcessedData,\n  getPageTitle,\n} from \"lib/legacy\";\nimport { useGmxPrice, useTotalGmxStaked, useTotalGmxSupply } from \"domain/legacy\";\nimport { ARBITRUM, getChainName, getConstant } from \"config/chains\";\n\nimport useSWR from \"swr\";\n\nimport { getContract } from \"config/contracts\";\n\nimport \"./StakeV2.css\";\nimport SEO from \"components/Common/SEO\";\nimport StatsTooltip from \"components/StatsTooltip/StatsTooltip\";\nimport StatsTooltipRow from \"components/StatsTooltip/StatsTooltipRow\";\nimport { getServerUrl } from \"config/backend\";\nimport { callContract, contractFetcher } from \"lib/contracts\";\nimport { useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport { helperToast } from \"lib/helperToast\";\nimport { approveTokens } from \"domain/tokens\";\nimport { bigNumberify, expandDecimals, formatAmount, formatAmountFree, formatKeyAmount, parseValue } from \"lib/numbers\";\nimport { useChainId } from \"lib/chains\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport GMXAprTooltip from \"components/Stake/GMXAprTooltip\";\nimport Button from \"components/Button/Button\";\nimport { GmList } from \"components/Synthetics/GmList/GmList\";\nimport { getIsSyntheticsSupported } from \"config/features\";\n\nconst { AddressZero } = ethers.constants;\n\nfunction StakeModal(props) {\n  const {\n    isVisible,\n    setIsVisible,\n    chainId,\n    title,\n    maxAmount,\n    value,\n    setValue,\n    active,\n    account,\n    library,\n    stakingTokenSymbol,\n    stakingTokenAddress,\n    farmAddress,\n    rewardRouterAddress,\n    stakeMethodName,\n    setPendingTxns,\n  } = props;\n  const [isStaking, setIsStaking] = useState(false);\n  const [isApproving, setIsApproving] = useState(false);\n\n  const { data: tokenAllowance } = useSWR(\n    active && stakingTokenAddress && [active, chainId, stakingTokenAddress, \"allowance\", account, farmAddress],\n    {\n      fetcher: contractFetcher(library, Token),\n    }\n  );\n\n  let amount = parseValue(value, 18);\n  const needApproval = farmAddress !== AddressZero && tokenAllowance && amount && amount.gt(tokenAllowance);\n\n  const getError = () => {\n    if (!amount || amount.eq(0)) {\n      return t`Enter an amount`;\n    }\n    if (maxAmount && amount.gt(maxAmount)) {\n      return t`Max amount exceeded`;\n    }\n  };\n\n  const onClickPrimary = () => {\n    if (needApproval) {\n      approveTokens({\n        setIsApproving,\n        library,\n        tokenAddress: stakingTokenAddress,\n        spender: farmAddress,\n        chainId,\n      });\n      return;\n    }\n\n    setIsStaking(true);\n    const contract = new ethers.Contract(rewardRouterAddress, RewardRouter.abi, library.getSigner());\n\n    callContract(chainId, contract, stakeMethodName, [amount], {\n      sentMsg: t`Stake submitted!`,\n      failMsg: t`Stake failed.`,\n      setPendingTxns,\n    })\n      .then(async (res) => {\n        setIsVisible(false);\n      })\n      .finally(() => {\n        setIsStaking(false);\n      });\n  };\n\n  const isPrimaryEnabled = () => {\n    const error = getError();\n    if (error) {\n      return false;\n    }\n    if (isApproving) {\n      return false;\n    }\n    if (isStaking) {\n      return false;\n    }\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    const error = getError();\n    if (error) {\n      return error;\n    }\n    if (isApproving) {\n      return t`Approving ${stakingTokenSymbol}...`;\n    }\n    if (needApproval) {\n      return t`Approve ${stakingTokenSymbol}`;\n    }\n    if (isStaking) {\n      return t`Staking...`;\n    }\n    return t`Stake`;\n  };\n\n  return (\n    <div className=\"StakeModal\">\n      <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={title}>\n        <div className=\"Exchange-swap-section\">\n          <div className=\"Exchange-swap-section-top\">\n            <div className=\"muted\">\n              <div className=\"Exchange-swap-usd\">\n                <Trans>Stake</Trans>\n              </div>\n            </div>\n            <div className=\"muted align-right clickable\" onClick={() => setValue(formatAmountFree(maxAmount, 18, 18))}>\n              <Trans>Max: {formatAmount(maxAmount, 18, 4, true)}</Trans>\n            </div>\n          </div>\n          <div className=\"Exchange-swap-section-bottom\">\n            <div>\n              <input\n                type=\"number\"\n                placeholder=\"0.0\"\n                className=\"Exchange-swap-input\"\n                value={value}\n                onChange={(e) => setValue(e.target.value)}\n              />\n            </div>\n            <div className=\"PositionEditor-token-symbol\">{stakingTokenSymbol}</div>\n          </div>\n        </div>\n        <div className=\"Exchange-swap-button-container\">\n          <Button variant=\"primary-action\" className=\"w-100\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n            {getPrimaryText()}\n          </Button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nfunction UnstakeModal(props) {\n  const {\n    isVisible,\n    setIsVisible,\n    chainId,\n    title,\n    maxAmount,\n    value,\n    setValue,\n    library,\n    unstakingTokenSymbol,\n    rewardRouterAddress,\n    unstakeMethodName,\n    multiplierPointsAmount,\n    reservedAmount,\n    bonusGmxInFeeGmx,\n    setPendingTxns,\n  } = props;\n  const [isUnstaking, setIsUnstaking] = useState(false);\n\n  let amount = parseValue(value, 18);\n  let burnAmount;\n\n  if (\n    multiplierPointsAmount &&\n    multiplierPointsAmount.gt(0) &&\n    amount &&\n    amount.gt(0) &&\n    bonusGmxInFeeGmx &&\n    bonusGmxInFeeGmx.gt(0)\n  ) {\n    burnAmount = multiplierPointsAmount.mul(amount).div(bonusGmxInFeeGmx);\n  }\n\n  const shouldShowReductionAmount = true;\n  let rewardReductionBasisPoints;\n  if (burnAmount && bonusGmxInFeeGmx) {\n    rewardReductionBasisPoints = burnAmount.mul(BASIS_POINTS_DIVISOR).div(bonusGmxInFeeGmx);\n  }\n\n  const getError = () => {\n    if (!amount) {\n      return t`Enter an amount`;\n    }\n    if (amount.gt(maxAmount)) {\n      return t`Max amount exceeded`;\n    }\n  };\n\n  const onClickPrimary = () => {\n    setIsUnstaking(true);\n    const contract = new ethers.Contract(rewardRouterAddress, RewardRouter.abi, library.getSigner());\n    callContract(chainId, contract, unstakeMethodName, [amount], {\n      sentMsg: t`Unstake submitted!`,\n      failMsg: t`Unstake failed.`,\n      successMsg: t`Unstake completed!`,\n      setPendingTxns,\n    })\n      .then(async (res) => {\n        setIsVisible(false);\n      })\n      .finally(() => {\n        setIsUnstaking(false);\n      });\n  };\n\n  const isPrimaryEnabled = () => {\n    const error = getError();\n    if (error) {\n      return false;\n    }\n    if (isUnstaking) {\n      return false;\n    }\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    const error = getError();\n    if (error) {\n      return error;\n    }\n    if (isUnstaking) {\n      return t`Unstaking...`;\n    }\n    return t`Unstake`;\n  };\n\n  return (\n    <div className=\"StakeModal\">\n      <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={title}>\n        <div className=\"Exchange-swap-section\">\n          <div className=\"Exchange-swap-section-top\">\n            <div className=\"muted\">\n              <div className=\"Exchange-swap-usd\">\n                <Trans>Unstake</Trans>\n              </div>\n            </div>\n            <div className=\"muted align-right clickable\" onClick={() => setValue(formatAmountFree(maxAmount, 18, 18))}>\n              <Trans>Max: {formatAmount(maxAmount, 18, 4, true)}</Trans>\n            </div>\n          </div>\n          <div className=\"Exchange-swap-section-bottom\">\n            <div>\n              <input\n                type=\"number\"\n                placeholder=\"0.0\"\n                className=\"Exchange-swap-input\"\n                value={value}\n                onChange={(e) => setValue(e.target.value)}\n              />\n            </div>\n            <div className=\"PositionEditor-token-symbol\">{unstakingTokenSymbol}</div>\n          </div>\n        </div>\n        {reservedAmount && reservedAmount.gt(0) && (\n          <div className=\"Modal-note\">\n            You have {formatAmount(reservedAmount, 18, 2, true)} tokens reserved for vesting.\n          </div>\n        )}\n        {burnAmount && burnAmount.gt(0) && rewardReductionBasisPoints && rewardReductionBasisPoints.gt(0) && (\n          <div className=\"Modal-note\">\n            <Trans>\n              Unstaking will burn&nbsp;\n              <ExternalLink className=\"display-inline\" href=\"https://gmxio.gitbook.io/gmx/rewards\">\n                {formatAmount(burnAmount, 18, 4, true)} Multiplier Points\n              </ExternalLink>\n              .&nbsp;\n              {shouldShowReductionAmount && (\n                <span>Boost Percentage: -{formatAmount(rewardReductionBasisPoints, 2, 2)}%.</span>\n              )}\n            </Trans>\n          </div>\n        )}\n        <div className=\"Exchange-swap-button-container\">\n          <Button variant=\"primary-action\" className=\"w-100\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n            {getPrimaryText()}\n          </Button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nfunction VesterDepositModal(props) {\n  const {\n    isVisible,\n    setIsVisible,\n    chainId,\n    title,\n    maxAmount,\n    value,\n    setValue,\n    balance,\n    vestedAmount,\n    averageStakedAmount,\n    maxVestableAmount,\n    library,\n    stakeTokenLabel,\n    reserveAmount,\n    maxReserveAmount,\n    vesterAddress,\n    setPendingTxns,\n  } = props;\n  const [isDepositing, setIsDepositing] = useState(false);\n\n  let amount = parseValue(value, 18);\n\n  let nextReserveAmount = reserveAmount;\n\n  let nextDepositAmount = vestedAmount;\n  if (amount) {\n    nextDepositAmount = vestedAmount.add(amount);\n  }\n\n  let additionalReserveAmount = bigNumberify(0);\n  if (amount && averageStakedAmount && maxVestableAmount && maxVestableAmount.gt(0)) {\n    nextReserveAmount = nextDepositAmount.mul(averageStakedAmount).div(maxVestableAmount);\n    if (nextReserveAmount.gt(reserveAmount)) {\n      additionalReserveAmount = nextReserveAmount.sub(reserveAmount);\n    }\n  }\n\n  const getError = () => {\n    if (!amount || amount.eq(0)) {\n      return t`Enter an amount`;\n    }\n    if (maxAmount && amount.gt(maxAmount)) {\n      return t`Max amount exceeded`;\n    }\n    if (nextReserveAmount.gt(maxReserveAmount)) {\n      return t`Insufficient staked tokens`;\n    }\n  };\n\n  const onClickPrimary = () => {\n    setIsDepositing(true);\n    const contract = new ethers.Contract(vesterAddress, Vester.abi, library.getSigner());\n\n    callContract(chainId, contract, \"deposit\", [amount], {\n      sentMsg: t`Deposit submitted!`,\n      failMsg: t`Deposit failed!`,\n      successMsg: t`Deposited!`,\n      setPendingTxns,\n    })\n      .then(async (res) => {\n        setIsVisible(false);\n      })\n      .finally(() => {\n        setIsDepositing(false);\n      });\n  };\n\n  const isPrimaryEnabled = () => {\n    const error = getError();\n    if (error) {\n      return false;\n    }\n    if (isDepositing) {\n      return false;\n    }\n    return true;\n  };\n\n  const getPrimaryText = () => {\n    const error = getError();\n    if (error) {\n      return error;\n    }\n    if (isDepositing) {\n      return t`Depositing...`;\n    }\n    return t`Deposit`;\n  };\n\n  return (\n    <SEO title={getPageTitle(\"Earn\")}>\n      <div className=\"StakeModal\">\n        <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={title} className=\"non-scrollable\">\n          <div className=\"Exchange-swap-section\">\n            <div className=\"Exchange-swap-section-top\">\n              <div className=\"muted\">\n                <div className=\"Exchange-swap-usd\">\n                  <Trans>Deposit</Trans>\n                </div>\n              </div>\n              <div\n                className=\"muted align-right clickable\"\n                onClick={() => setValue(formatAmountFree(maxAmount, 18, 18))}\n              >\n                <Trans>Max: {formatAmount(maxAmount, 18, 4, true)}</Trans>\n              </div>\n            </div>\n            <div className=\"Exchange-swap-section-bottom\">\n              <div>\n                <input\n                  type=\"number\"\n                  placeholder=\"0.0\"\n                  className=\"Exchange-swap-input\"\n                  value={value}\n                  onChange={(e) => setValue(e.target.value)}\n                />\n              </div>\n              <div className=\"PositionEditor-token-symbol\">esGMX</div>\n            </div>\n          </div>\n          <div className=\"VesterDepositModal-info-rows\">\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Wallet</Trans>\n              </div>\n              <div className=\"align-right\">{formatAmount(balance, 18, 2, true)} esGMX</div>\n            </div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Vault Capacity</Trans>\n              </div>\n              <div className=\"align-right\">\n                <Tooltip\n                  handle={`${formatAmount(nextDepositAmount, 18, 2, true)} / ${formatAmount(\n                    maxVestableAmount,\n                    18,\n                    2,\n                    true\n                  )}`}\n                  position=\"right-bottom\"\n                  renderContent={() => {\n                    return (\n                      <div>\n                        <p className=\"text-white\">\n                          <Trans>Vault Capacity for your Account:</Trans>\n                        </p>\n                        <StatsTooltipRow\n                          showDollar={false}\n                          label={t`Deposited`}\n                          value={`${formatAmount(vestedAmount, 18, 2, true)} esGMX`}\n                        />\n                        <StatsTooltipRow\n                          showDollar={false}\n                          label={t`Max Capacity`}\n                          value={`${formatAmount(maxVestableAmount, 18, 2, true)} esGMX`}\n                        />\n                      </div>\n                    );\n                  }}\n                />\n              </div>\n            </div>\n            <div className=\"Exchange-info-row\">\n              <div className=\"Exchange-info-label\">\n                <Trans>Reserve Amount</Trans>\n              </div>\n              <div className=\"align-right\">\n                <Tooltip\n                  handle={`${formatAmount(\n                    reserveAmount && reserveAmount.gte(additionalReserveAmount)\n                      ? reserveAmount\n                      : additionalReserveAmount,\n                    18,\n                    2,\n                    true\n                  )} / ${formatAmount(maxReserveAmount, 18, 2, true)}`}\n                  position=\"right-bottom\"\n                  renderContent={() => {\n                    return (\n                      <>\n                        <StatsTooltipRow\n                          label={t`Current Reserved`}\n                          value={formatAmount(reserveAmount, 18, 2, true)}\n                          showDollar={false}\n                        />\n                        <StatsTooltipRow\n                          label={t`Additional reserve required`}\n                          value={formatAmount(additionalReserveAmount, 18, 2, true)}\n                          showDollar={false}\n                        />\n                        {amount && nextReserveAmount.gt(maxReserveAmount) && (\n                          <>\n                            <br />\n                            <Trans>\n                              You need a total of at least {formatAmount(nextReserveAmount, 18, 2, true)}{\" \"}\n                              {stakeTokenLabel} to vest {formatAmount(amount, 18, 2, true)} esGMX.\n                            </Trans>\n                          </>\n                        )}\n                      </>\n                    );\n                  }}\n                />\n              </div>\n            </div>\n          </div>\n          <div className=\"Exchange-swap-button-container\">\n            <Button variant=\"primary-action\" className=\"w-100\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n              {getPrimaryText()}\n            </Button>\n          </div>\n        </Modal>\n      </div>\n    </SEO>\n  );\n}\n\nfunction VesterWithdrawModal(props) {\n  const { isVisible, setIsVisible, chainId, title, library, vesterAddress, setPendingTxns } = props;\n  const [isWithdrawing, setIsWithdrawing] = useState(false);\n\n  const onClickPrimary = () => {\n    setIsWithdrawing(true);\n    const contract = new ethers.Contract(vesterAddress, Vester.abi, library.getSigner());\n\n    callContract(chainId, contract, \"withdraw\", [], {\n      sentMsg: t`Withdraw submitted.`,\n      failMsg: t`Withdraw failed.`,\n      successMsg: t`Withdrawn!`,\n      setPendingTxns,\n    })\n      .then(async (res) => {\n        setIsVisible(false);\n      })\n      .finally(() => {\n        setIsWithdrawing(false);\n      });\n  };\n\n  return (\n    <div className=\"StakeModal\">\n      <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={title}>\n        <Trans>\n          <div>\n            This will withdraw and unreserve all tokens as well as pause vesting.\n            <br />\n            <br />\n            esGMX tokens that have been converted to GMX will remain as GMX tokens.\n            <br />\n            <br />\n            To claim GMX tokens without withdrawing, use the \"Claim\" button under the Total Rewards section.\n            <br />\n            <br />\n          </div>\n        </Trans>\n        <div className=\"Exchange-swap-button-container\">\n          <Button variant=\"primary-action\" className=\"w-100\" onClick={onClickPrimary} disabled={isWithdrawing}>\n            {!isWithdrawing && \"Confirm Withdraw\"}\n            {isWithdrawing && \"Confirming...\"}\n          </Button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nfunction CompoundModal(props) {\n  const {\n    isVisible,\n    setIsVisible,\n    rewardRouterAddress,\n    active,\n    account,\n    library,\n    chainId,\n    setPendingTxns,\n    totalVesterRewards,\n    nativeTokenSymbol,\n    wrappedTokenSymbol,\n  } = props;\n  const [isCompounding, setIsCompounding] = useState(false);\n  const [shouldClaimGmx, setShouldClaimGmx] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-compound-should-claim-gmx\"],\n    true\n  );\n  const [shouldStakeGmx, setShouldStakeGmx] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-compound-should-stake-gmx\"],\n    true\n  );\n  const [shouldClaimEsGmx, setShouldClaimEsGmx] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-compound-should-claim-es-gmx\"],\n    true\n  );\n  const [shouldStakeEsGmx, setShouldStakeEsGmx] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-compound-should-stake-es-gmx\"],\n    true\n  );\n  const [shouldStakeMultiplierPoints, setShouldStakeMultiplierPoints] = useState(true);\n  const [shouldClaimWeth, setShouldClaimWeth] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-compound-should-claim-weth\"],\n    true\n  );\n  const [shouldConvertWeth, setShouldConvertWeth] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-compound-should-convert-weth\"],\n    true\n  );\n\n  const gmxAddress = getContract(chainId, \"GMX\");\n  const stakedGmxTrackerAddress = getContract(chainId, \"StakedGmxTracker\");\n\n  const [isApproving, setIsApproving] = useState(false);\n\n  const { data: tokenAllowance } = useSWR(\n    active && [active, chainId, gmxAddress, \"allowance\", account, stakedGmxTrackerAddress],\n    {\n      fetcher: contractFetcher(library, Token),\n    }\n  );\n\n  const needApproval = shouldStakeGmx && tokenAllowance && totalVesterRewards && totalVesterRewards.gt(tokenAllowance);\n\n  const isPrimaryEnabled = () => {\n    return !isCompounding && !isApproving && !isCompounding;\n  };\n\n  const getPrimaryText = () => {\n    if (isApproving) {\n      return t`Approving GMX...`;\n    }\n    if (needApproval) {\n      return t`Approve GMX`;\n    }\n    if (isCompounding) {\n      return t`Compounding...`;\n    }\n    return t`Compound`;\n  };\n\n  const onClickPrimary = () => {\n    if (needApproval) {\n      approveTokens({\n        setIsApproving,\n        library,\n        tokenAddress: gmxAddress,\n        spender: stakedGmxTrackerAddress,\n        chainId,\n      });\n      return;\n    }\n\n    setIsCompounding(true);\n\n    const contract = new ethers.Contract(rewardRouterAddress, RewardRouter.abi, library.getSigner());\n    callContract(\n      chainId,\n      contract,\n      \"handleRewards\",\n      [\n        shouldClaimGmx || shouldStakeGmx,\n        shouldStakeGmx,\n        shouldClaimEsGmx || shouldStakeEsGmx,\n        shouldStakeEsGmx,\n        shouldStakeMultiplierPoints,\n        shouldClaimWeth || shouldConvertWeth,\n        shouldConvertWeth,\n      ],\n      {\n        sentMsg: t`Compound submitted!`,\n        failMsg: t`Compound failed.`,\n        successMsg: t`Compound completed!`,\n        setPendingTxns,\n      }\n    )\n      .then(async (res) => {\n        setIsVisible(false);\n      })\n      .finally(() => {\n        setIsCompounding(false);\n      });\n  };\n\n  const toggleShouldStakeGmx = (value) => {\n    if (value) {\n      setShouldClaimGmx(true);\n    }\n    setShouldStakeGmx(value);\n  };\n\n  const toggleShouldStakeEsGmx = (value) => {\n    if (value) {\n      setShouldClaimEsGmx(true);\n    }\n    setShouldStakeEsGmx(value);\n  };\n\n  const toggleConvertWeth = (value) => {\n    if (value) {\n      setShouldClaimWeth(true);\n    }\n    setShouldConvertWeth(value);\n  };\n\n  return (\n    <div className=\"StakeModal\">\n      <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={t`Compound Rewards`}>\n        <div className=\"CompoundModal-menu\">\n          <div>\n            <Checkbox\n              isChecked={shouldStakeMultiplierPoints}\n              setIsChecked={setShouldStakeMultiplierPoints}\n              disabled={true}\n            >\n              <Trans>Stake Multiplier Points</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldClaimGmx} setIsChecked={setShouldClaimGmx} disabled={shouldStakeGmx}>\n              <Trans>Claim GMX Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldStakeGmx} setIsChecked={toggleShouldStakeGmx}>\n              <Trans>Stake GMX Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldClaimEsGmx} setIsChecked={setShouldClaimEsGmx} disabled={shouldStakeEsGmx}>\n              <Trans>Claim esGMX Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldStakeEsGmx} setIsChecked={toggleShouldStakeEsGmx}>\n              <Trans>Stake esGMX Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldClaimWeth} setIsChecked={setShouldClaimWeth} disabled={shouldConvertWeth}>\n              <Trans>Claim {wrappedTokenSymbol} Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldConvertWeth} setIsChecked={toggleConvertWeth}>\n              <Trans>\n                Convert {wrappedTokenSymbol} to {nativeTokenSymbol}\n              </Trans>\n            </Checkbox>\n          </div>\n        </div>\n        <div className=\"Exchange-swap-button-container\">\n          <Button variant=\"primary-action\" className=\"w-100\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n            {getPrimaryText()}\n          </Button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nfunction ClaimModal(props) {\n  const {\n    isVisible,\n    setIsVisible,\n    rewardRouterAddress,\n    library,\n    chainId,\n    setPendingTxns,\n    nativeTokenSymbol,\n    wrappedTokenSymbol,\n  } = props;\n  const [isClaiming, setIsClaiming] = useState(false);\n  const [shouldClaimGmx, setShouldClaimGmx] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-claim-should-claim-gmx\"],\n    true\n  );\n  const [shouldClaimEsGmx, setShouldClaimEsGmx] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-claim-should-claim-es-gmx\"],\n    true\n  );\n  const [shouldClaimWeth, setShouldClaimWeth] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-claim-should-claim-weth\"],\n    true\n  );\n  const [shouldConvertWeth, setShouldConvertWeth] = useLocalStorageSerializeKey(\n    [chainId, \"StakeV2-claim-should-convert-weth\"],\n    true\n  );\n\n  const isPrimaryEnabled = () => {\n    return !isClaiming;\n  };\n\n  const getPrimaryText = () => {\n    if (isClaiming) {\n      return t`Claiming...`;\n    }\n    return t`Claim`;\n  };\n\n  const onClickPrimary = () => {\n    setIsClaiming(true);\n\n    const contract = new ethers.Contract(rewardRouterAddress, RewardRouter.abi, library.getSigner());\n    callContract(\n      chainId,\n      contract,\n      \"handleRewards\",\n      [\n        shouldClaimGmx,\n        false, // shouldStakeGmx\n        shouldClaimEsGmx,\n        false, // shouldStakeEsGmx\n        false, // shouldStakeMultiplierPoints\n        shouldClaimWeth,\n        shouldConvertWeth,\n      ],\n      {\n        sentMsg: t`Claim submitted.`,\n        failMsg: t`Claim failed.`,\n        successMsg: t`Claim completed!`,\n        setPendingTxns,\n      }\n    )\n      .then(async (res) => {\n        setIsVisible(false);\n      })\n      .finally(() => {\n        setIsClaiming(false);\n      });\n  };\n\n  const toggleConvertWeth = (value) => {\n    if (value) {\n      setShouldClaimWeth(true);\n    }\n    setShouldConvertWeth(value);\n  };\n\n  return (\n    <div className=\"StakeModal\">\n      <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={t`Claim Rewards`}>\n        <div className=\"CompoundModal-menu\">\n          <div>\n            <Checkbox isChecked={shouldClaimGmx} setIsChecked={setShouldClaimGmx}>\n              <Trans>Claim GMX Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldClaimEsGmx} setIsChecked={setShouldClaimEsGmx}>\n              <Trans>Claim esGMX Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldClaimWeth} setIsChecked={setShouldClaimWeth} disabled={shouldConvertWeth}>\n              <Trans>Claim {wrappedTokenSymbol} Rewards</Trans>\n            </Checkbox>\n          </div>\n          <div>\n            <Checkbox isChecked={shouldConvertWeth} setIsChecked={toggleConvertWeth}>\n              <Trans>\n                Convert {wrappedTokenSymbol} to {nativeTokenSymbol}\n              </Trans>\n            </Checkbox>\n          </div>\n        </div>\n        <div className=\"Exchange-swap-button-container\">\n          <Button variant=\"primary-action\" className=\"w-100\" onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\n            {getPrimaryText()}\n          </Button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nexport default function StakeV2({ setPendingTxns, connectWallet }) {\n  const { active, library, account } = useWeb3React();\n  const { chainId } = useChainId();\n\n  const chainName = getChainName(chainId);\n\n  const hasInsurance = true;\n\n  const [isStakeModalVisible, setIsStakeModalVisible] = useState(false);\n  const [stakeModalTitle, setStakeModalTitle] = useState(\"\");\n  const [stakeModalMaxAmount, setStakeModalMaxAmount] = useState(undefined);\n  const [stakeValue, setStakeValue] = useState(\"\");\n  const [stakingTokenSymbol, setStakingTokenSymbol] = useState(\"\");\n  const [stakingTokenAddress, setStakingTokenAddress] = useState(\"\");\n  const [stakingFarmAddress, setStakingFarmAddress] = useState(\"\");\n  const [stakeMethodName, setStakeMethodName] = useState(\"\");\n\n  const [isUnstakeModalVisible, setIsUnstakeModalVisible] = useState(false);\n  const [unstakeModalTitle, setUnstakeModalTitle] = useState(\"\");\n  const [unstakeModalMaxAmount, setUnstakeModalMaxAmount] = useState(undefined);\n  const [unstakeModalReservedAmount, setUnstakeModalReservedAmount] = useState(undefined);\n  const [unstakeValue, setUnstakeValue] = useState(\"\");\n  const [unstakingTokenSymbol, setUnstakingTokenSymbol] = useState(\"\");\n  const [unstakeMethodName, setUnstakeMethodName] = useState(\"\");\n\n  const [isVesterDepositModalVisible, setIsVesterDepositModalVisible] = useState(false);\n  const [vesterDepositTitle, setVesterDepositTitle] = useState(\"\");\n  const [vesterDepositStakeTokenLabel, setVesterDepositStakeTokenLabel] = useState(\"\");\n  const [vesterDepositMaxAmount, setVesterDepositMaxAmount] = useState(\"\");\n  const [vesterDepositBalance, setVesterDepositBalance] = useState(\"\");\n  const [vesterDepositEscrowedBalance, setVesterDepositEscrowedBalance] = useState(\"\");\n  const [vesterDepositVestedAmount, setVesterDepositVestedAmount] = useState(\"\");\n  const [vesterDepositAverageStakedAmount, setVesterDepositAverageStakedAmount] = useState(\"\");\n  const [vesterDepositMaxVestableAmount, setVesterDepositMaxVestableAmount] = useState(\"\");\n  const [vesterDepositValue, setVesterDepositValue] = useState(\"\");\n  const [vesterDepositReserveAmount, setVesterDepositReserveAmount] = useState(\"\");\n  const [vesterDepositMaxReserveAmount, setVesterDepositMaxReserveAmount] = useState(\"\");\n  const [vesterDepositAddress, setVesterDepositAddress] = useState(\"\");\n\n  const [isVesterWithdrawModalVisible, setIsVesterWithdrawModalVisible] = useState(false);\n  const [vesterWithdrawTitle, setVesterWithdrawTitle] = useState(false);\n  const [vesterWithdrawAddress, setVesterWithdrawAddress] = useState(\"\");\n\n  const [isCompoundModalVisible, setIsCompoundModalVisible] = useState(false);\n  const [isClaimModalVisible, setIsClaimModalVisible] = useState(false);\n\n  const rewardRouterAddress = getContract(chainId, \"RewardRouter\");\n  const rewardReaderAddress = getContract(chainId, \"RewardReader\");\n  const readerAddress = getContract(chainId, \"Reader\");\n\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\n  const gmxAddress = getContract(chainId, \"GMX\");\n  const esGmxAddress = getContract(chainId, \"ES_GMX\");\n  const bnGmxAddress = getContract(chainId, \"BN_GMX\");\n  const glpAddress = getContract(chainId, \"GLP\");\n\n  const stakedGmxTrackerAddress = getContract(chainId, \"StakedGmxTracker\");\n  const bonusGmxTrackerAddress = getContract(chainId, \"BonusGmxTracker\");\n  const feeGmxTrackerAddress = getContract(chainId, \"FeeGmxTracker\");\n\n  const stakedGlpTrackerAddress = getContract(chainId, \"StakedGlpTracker\");\n  const feeGlpTrackerAddress = getContract(chainId, \"FeeGlpTracker\");\n\n  const glpManagerAddress = getContract(chainId, \"GlpManager\");\n\n  const stakedGmxDistributorAddress = getContract(chainId, \"StakedGmxDistributor\");\n  const stakedGlpDistributorAddress = getContract(chainId, \"StakedGlpDistributor\");\n\n  const gmxVesterAddress = getContract(chainId, \"GmxVester\");\n  const glpVesterAddress = getContract(chainId, \"GlpVester\");\n\n  const vesterAddresses = [gmxVesterAddress, glpVesterAddress];\n\n  const excludedEsGmxAccounts = [stakedGmxDistributorAddress, stakedGlpDistributorAddress];\n\n  const nativeTokenSymbol = getConstant(chainId, \"nativeTokenSymbol\");\n  const wrappedTokenSymbol = getConstant(chainId, \"wrappedTokenSymbol\");\n\n  const walletTokens = [gmxAddress, esGmxAddress, glpAddress, stakedGmxTrackerAddress];\n  const depositTokens = [\n    gmxAddress,\n    esGmxAddress,\n    stakedGmxTrackerAddress,\n    bonusGmxTrackerAddress,\n    bnGmxAddress,\n    glpAddress,\n  ];\n  const rewardTrackersForDepositBalances = [\n    stakedGmxTrackerAddress,\n    stakedGmxTrackerAddress,\n    bonusGmxTrackerAddress,\n    feeGmxTrackerAddress,\n    feeGmxTrackerAddress,\n    feeGlpTrackerAddress,\n  ];\n  const rewardTrackersForStakingInfo = [\n    stakedGmxTrackerAddress,\n    bonusGmxTrackerAddress,\n    feeGmxTrackerAddress,\n    stakedGlpTrackerAddress,\n    feeGlpTrackerAddress,\n  ];\n\n  const { data: walletBalances } = useSWR(\n    [\n      `StakeV2:walletBalances:${active}`,\n      chainId,\n      readerAddress,\n      \"getTokenBalancesWithSupplies\",\n      account || PLACEHOLDER_ACCOUNT,\n    ],\n    {\n      fetcher: contractFetcher(library, ReaderV2, [walletTokens]),\n    }\n  );\n\n  const { data: depositBalances } = useSWR(\n    [\n      `StakeV2:depositBalances:${active}`,\n      chainId,\n      rewardReaderAddress,\n      \"getDepositBalances\",\n      account || PLACEHOLDER_ACCOUNT,\n    ],\n    {\n      fetcher: contractFetcher(library, RewardReader, [depositTokens, rewardTrackersForDepositBalances]),\n    }\n  );\n\n  const { data: stakingInfo } = useSWR(\n    [`StakeV2:stakingInfo:${active}`, chainId, rewardReaderAddress, \"getStakingInfo\", account || PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: contractFetcher(library, RewardReader, [rewardTrackersForStakingInfo]),\n    }\n  );\n\n  const { data: stakedGmxSupply } = useSWR(\n    [`StakeV2:stakedGmxSupply:${active}`, chainId, gmxAddress, \"balanceOf\", stakedGmxTrackerAddress],\n    {\n      fetcher: contractFetcher(library, Token),\n    }\n  );\n\n  const { data: aums } = useSWR([`StakeV2:getAums:${active}`, chainId, glpManagerAddress, \"getAums\"], {\n    fetcher: contractFetcher(library, GlpManager),\n  });\n\n  const { data: nativeTokenPrice } = useSWR(\n    [`StakeV2:nativeTokenPrice:${active}`, chainId, vaultAddress, \"getMinPrice\", nativeTokenAddress],\n    {\n      fetcher: contractFetcher(library, Vault),\n    }\n  );\n\n  const { data: esGmxSupply } = useSWR(\n    [`StakeV2:esGmxSupply:${active}`, chainId, readerAddress, \"getTokenSupply\", esGmxAddress],\n    {\n      fetcher: contractFetcher(library, ReaderV2, [excludedEsGmxAccounts]),\n    }\n  );\n\n  const { data: vestingInfo } = useSWR(\n    [`StakeV2:vestingInfo:${active}`, chainId, readerAddress, \"getVestingInfo\", account || PLACEHOLDER_ACCOUNT],\n    {\n      fetcher: contractFetcher(library, ReaderV2, [vesterAddresses]),\n    }\n  );\n\n  const { gmxPrice, gmxPriceFromArbitrum, gmxPriceFromAvalanche } = useGmxPrice(\n    chainId,\n    { arbitrum: chainId === ARBITRUM ? library : undefined },\n    active\n  );\n\n  let { total: totalGmxSupply } = useTotalGmxSupply();\n\n  let { avax: avaxGmxStaked, arbitrum: arbitrumGmxStaked, total: totalGmxStaked } = useTotalGmxStaked();\n\n  const gmxSupplyUrl = getServerUrl(chainId, \"/gmx_supply\");\n  const { data: gmxSupply } = useSWR([gmxSupplyUrl], {\n    fetcher: (...args) => fetch(...args).then((res) => res.text()),\n  });\n\n  const isGmxTransferEnabled = true;\n\n  let esGmxSupplyUsd;\n  if (esGmxSupply && gmxPrice) {\n    esGmxSupplyUsd = esGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\n  }\n\n  let aum;\n  if (aums && aums.length > 0) {\n    aum = aums[0].add(aums[1]).div(2);\n  }\n\n  const { balanceData, supplyData } = getBalanceAndSupplyData(walletBalances);\n  const depositBalanceData = getDepositBalanceData(depositBalances);\n  const stakingData = getStakingData(stakingInfo);\n  const vestingData = getVestingData(vestingInfo);\n\n  const processedData = getProcessedData(\n    balanceData,\n    supplyData,\n    depositBalanceData,\n    stakingData,\n    vestingData,\n    aum,\n    nativeTokenPrice,\n    stakedGmxSupply,\n    gmxPrice,\n    gmxSupply\n  );\n\n  let hasMultiplierPoints = false;\n  let multiplierPointsAmount;\n  if (processedData && processedData.bonusGmxTrackerRewards && processedData.bnGmxInFeeGmx) {\n    multiplierPointsAmount = processedData.bonusGmxTrackerRewards.add(processedData.bnGmxInFeeGmx);\n    if (multiplierPointsAmount.gt(0)) {\n      hasMultiplierPoints = true;\n    }\n  }\n  let totalRewardTokens;\n  if (processedData && processedData.bnGmxInFeeGmx && processedData.bonusGmxInFeeGmx) {\n    totalRewardTokens = processedData.bnGmxInFeeGmx.add(processedData.bonusGmxInFeeGmx);\n  }\n\n  let totalRewardTokensAndGlp;\n  if (totalRewardTokens && processedData && processedData.glpBalance) {\n    totalRewardTokensAndGlp = totalRewardTokens.add(processedData.glpBalance);\n  }\n\n  const bonusGmxInFeeGmx = processedData ? processedData.bonusGmxInFeeGmx : undefined;\n\n  let stakedGmxSupplyUsd;\n  if (!totalGmxStaked.isZero() && gmxPrice) {\n    stakedGmxSupplyUsd = totalGmxStaked.mul(gmxPrice).div(expandDecimals(1, 18));\n  }\n\n  let totalSupplyUsd;\n  if (totalGmxSupply && !totalGmxSupply.isZero() && gmxPrice) {\n    totalSupplyUsd = totalGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\n  }\n\n  let maxUnstakeableGmx = bigNumberify(0);\n  if (\n    totalRewardTokens &&\n    vestingData &&\n    vestingData.gmxVesterPairAmount &&\n    multiplierPointsAmount &&\n    processedData.bonusGmxInFeeGmx\n  ) {\n    const availableTokens = totalRewardTokens.sub(vestingData.gmxVesterPairAmount);\n    const stakedTokens = processedData.bonusGmxInFeeGmx;\n    const divisor = multiplierPointsAmount.add(stakedTokens);\n    if (divisor.gt(0)) {\n      maxUnstakeableGmx = availableTokens.mul(stakedTokens).div(divisor);\n    }\n  }\n\n  const showStakeGmxModal = () => {\n    if (!isGmxTransferEnabled) {\n      helperToast.error(t`GMX transfers not yet enabled`);\n      return;\n    }\n\n    setIsStakeModalVisible(true);\n    setStakeModalTitle(t`Stake GMX`);\n    setStakeModalMaxAmount(processedData.gmxBalance);\n    setStakeValue(\"\");\n    setStakingTokenSymbol(\"GMX\");\n    setStakingTokenAddress(gmxAddress);\n    setStakingFarmAddress(stakedGmxTrackerAddress);\n    setStakeMethodName(\"stakeGmx\");\n  };\n\n  const showStakeEsGmxModal = () => {\n    setIsStakeModalVisible(true);\n    setStakeModalTitle(t`Stake esGMX`);\n    setStakeModalMaxAmount(processedData.esGmxBalance);\n    setStakeValue(\"\");\n    setStakingTokenSymbol(\"esGMX\");\n    setStakingTokenAddress(esGmxAddress);\n    setStakingFarmAddress(AddressZero);\n    setStakeMethodName(\"stakeEsGmx\");\n  };\n\n  const showGmxVesterDepositModal = () => {\n    let remainingVestableAmount = vestingData.gmxVester.maxVestableAmount.sub(vestingData.gmxVester.vestedAmount);\n    if (processedData.esGmxBalance.lt(remainingVestableAmount)) {\n      remainingVestableAmount = processedData.esGmxBalance;\n    }\n\n    setIsVesterDepositModalVisible(true);\n    setVesterDepositTitle(t`GMX Vault`);\n    setVesterDepositStakeTokenLabel(\"staked GMX + esGMX + Multiplier Points\");\n    setVesterDepositMaxAmount(remainingVestableAmount);\n    setVesterDepositBalance(processedData.esGmxBalance);\n    setVesterDepositEscrowedBalance(vestingData.gmxVester.escrowedBalance);\n    setVesterDepositVestedAmount(vestingData.gmxVester.vestedAmount);\n    setVesterDepositMaxVestableAmount(vestingData.gmxVester.maxVestableAmount);\n    setVesterDepositAverageStakedAmount(vestingData.gmxVester.averageStakedAmount);\n    setVesterDepositReserveAmount(vestingData.gmxVester.pairAmount);\n    setVesterDepositMaxReserveAmount(totalRewardTokens);\n    setVesterDepositValue(\"\");\n    setVesterDepositAddress(gmxVesterAddress);\n  };\n\n  const showGlpVesterDepositModal = () => {\n    let remainingVestableAmount = vestingData.glpVester.maxVestableAmount.sub(vestingData.glpVester.vestedAmount);\n    if (processedData.esGmxBalance.lt(remainingVestableAmount)) {\n      remainingVestableAmount = processedData.esGmxBalance;\n    }\n\n    setIsVesterDepositModalVisible(true);\n    setVesterDepositTitle(t`GLP Vault`);\n    setVesterDepositStakeTokenLabel(\"staked GLP\");\n    setVesterDepositMaxAmount(remainingVestableAmount);\n    setVesterDepositBalance(processedData.esGmxBalance);\n    setVesterDepositEscrowedBalance(vestingData.glpVester.escrowedBalance);\n    setVesterDepositVestedAmount(vestingData.glpVester.vestedAmount);\n    setVesterDepositMaxVestableAmount(vestingData.glpVester.maxVestableAmount);\n    setVesterDepositAverageStakedAmount(vestingData.glpVester.averageStakedAmount);\n    setVesterDepositReserveAmount(vestingData.glpVester.pairAmount);\n    setVesterDepositMaxReserveAmount(processedData.glpBalance);\n    setVesterDepositValue(\"\");\n    setVesterDepositAddress(glpVesterAddress);\n  };\n\n  const showGmxVesterWithdrawModal = () => {\n    if (!vestingData || !vestingData.gmxVesterVestedAmount || vestingData.gmxVesterVestedAmount.eq(0)) {\n      helperToast.error(t`You have not deposited any tokens for vesting.`);\n      return;\n    }\n\n    setIsVesterWithdrawModalVisible(true);\n    setVesterWithdrawTitle(t`Withdraw from GMX Vault`);\n    setVesterWithdrawAddress(gmxVesterAddress);\n  };\n\n  const showGlpVesterWithdrawModal = () => {\n    if (!vestingData || !vestingData.glpVesterVestedAmount || vestingData.glpVesterVestedAmount.eq(0)) {\n      helperToast.error(t`You have not deposited any tokens for vesting.`);\n      return;\n    }\n\n    setIsVesterWithdrawModalVisible(true);\n    setVesterWithdrawTitle(t`Withdraw from GLP Vault`);\n    setVesterWithdrawAddress(glpVesterAddress);\n  };\n\n  const showUnstakeGmxModal = () => {\n    if (!isGmxTransferEnabled) {\n      helperToast.error(t`GMX transfers not yet enabled`);\n      return;\n    }\n    setIsUnstakeModalVisible(true);\n    setUnstakeModalTitle(t`Unstake GMX`);\n    let maxAmount = processedData.gmxInStakedGmx;\n    if (\n      processedData.gmxInStakedGmx &&\n      vestingData &&\n      vestingData.gmxVesterPairAmount.gt(0) &&\n      maxUnstakeableGmx &&\n      maxUnstakeableGmx.lt(processedData.gmxInStakedGmx)\n    ) {\n      maxAmount = maxUnstakeableGmx;\n    }\n    setUnstakeModalMaxAmount(maxAmount);\n    setUnstakeModalReservedAmount(vestingData.gmxVesterPairAmount);\n    setUnstakeValue(\"\");\n    setUnstakingTokenSymbol(\"GMX\");\n    setUnstakeMethodName(\"unstakeGmx\");\n  };\n\n  const showUnstakeEsGmxModal = () => {\n    setIsUnstakeModalVisible(true);\n    setUnstakeModalTitle(t`Unstake esGMX`);\n    let maxAmount = processedData.esGmxInStakedGmx;\n    if (\n      processedData.esGmxInStakedGmx &&\n      vestingData &&\n      vestingData.gmxVesterPairAmount.gt(0) &&\n      maxUnstakeableGmx &&\n      maxUnstakeableGmx.lt(processedData.esGmxInStakedGmx)\n    ) {\n      maxAmount = maxUnstakeableGmx;\n    }\n    setUnstakeModalMaxAmount(maxAmount);\n    setUnstakeModalReservedAmount(vestingData.gmxVesterPairAmount);\n    setUnstakeValue(\"\");\n    setUnstakingTokenSymbol(\"esGMX\");\n    setUnstakeMethodName(\"unstakeEsGmx\");\n  };\n\n  const renderMultiplierPointsLabel = useCallback(() => {\n    return t`Multiplier Points APR`;\n  }, []);\n\n  const renderMultiplierPointsValue = useCallback(() => {\n    return (\n      <Tooltip\n        handle={`100.00%`}\n        position=\"right-bottom\"\n        renderContent={() => {\n          return (\n            <Trans>\n              Boost your rewards with Multiplier Points.&nbsp;\n              <ExternalLink href=\"https://gmxio.gitbook.io/gmx/rewards#multiplier-points\">More info</ExternalLink>.\n            </Trans>\n          );\n        }}\n      />\n    );\n  }, []);\n\n  let earnMsg;\n  if (totalRewardTokensAndGlp && totalRewardTokensAndGlp.gt(0)) {\n    let gmxAmountStr;\n    if (processedData.gmxInStakedGmx && processedData.gmxInStakedGmx.gt(0)) {\n      gmxAmountStr = formatAmount(processedData.gmxInStakedGmx, 18, 2, true) + \" GMX\";\n    }\n    let esGmxAmountStr;\n    if (processedData.esGmxInStakedGmx && processedData.esGmxInStakedGmx.gt(0)) {\n      esGmxAmountStr = formatAmount(processedData.esGmxInStakedGmx, 18, 2, true) + \" esGMX\";\n    }\n    let mpAmountStr;\n    if (processedData.bonusGmxInFeeGmx && processedData.bnGmxInFeeGmx.gt(0)) {\n      mpAmountStr = formatAmount(processedData.bnGmxInFeeGmx, 18, 2, true) + \" MP\";\n    }\n    let glpStr;\n    if (processedData.glpBalance && processedData.glpBalance.gt(0)) {\n      glpStr = formatAmount(processedData.glpBalance, 18, 2, true) + \" GLP\";\n    }\n    const amountStr = [gmxAmountStr, esGmxAmountStr, mpAmountStr, glpStr].filter((s) => s).join(\", \");\n    earnMsg = (\n      <div>\n        <Trans>\n          You are earning {nativeTokenSymbol} rewards with {formatAmount(totalRewardTokensAndGlp, 18, 2, true)} tokens.\n          <br />\n          Tokens: {amountStr}.\n        </Trans>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"default-container page-layout\">\n      <StakeModal\n        isVisible={isStakeModalVisible}\n        setIsVisible={setIsStakeModalVisible}\n        chainId={chainId}\n        title={stakeModalTitle}\n        maxAmount={stakeModalMaxAmount}\n        value={stakeValue}\n        setValue={setStakeValue}\n        active={active}\n        account={account}\n        library={library}\n        stakingTokenSymbol={stakingTokenSymbol}\n        stakingTokenAddress={stakingTokenAddress}\n        farmAddress={stakingFarmAddress}\n        rewardRouterAddress={rewardRouterAddress}\n        stakeMethodName={stakeMethodName}\n        hasMultiplierPoints={hasMultiplierPoints}\n        setPendingTxns={setPendingTxns}\n        nativeTokenSymbol={nativeTokenSymbol}\n        wrappedTokenSymbol={wrappedTokenSymbol}\n      />\n      <UnstakeModal\n        setPendingTxns={setPendingTxns}\n        isVisible={isUnstakeModalVisible}\n        setIsVisible={setIsUnstakeModalVisible}\n        chainId={chainId}\n        title={unstakeModalTitle}\n        maxAmount={unstakeModalMaxAmount}\n        reservedAmount={unstakeModalReservedAmount}\n        value={unstakeValue}\n        setValue={setUnstakeValue}\n        library={library}\n        unstakingTokenSymbol={unstakingTokenSymbol}\n        rewardRouterAddress={rewardRouterAddress}\n        unstakeMethodName={unstakeMethodName}\n        multiplierPointsAmount={multiplierPointsAmount}\n        bonusGmxInFeeGmx={bonusGmxInFeeGmx}\n      />\n      <VesterDepositModal\n        isVisible={isVesterDepositModalVisible}\n        setIsVisible={setIsVesterDepositModalVisible}\n        chainId={chainId}\n        title={vesterDepositTitle}\n        stakeTokenLabel={vesterDepositStakeTokenLabel}\n        maxAmount={vesterDepositMaxAmount}\n        balance={vesterDepositBalance}\n        escrowedBalance={vesterDepositEscrowedBalance}\n        vestedAmount={vesterDepositVestedAmount}\n        averageStakedAmount={vesterDepositAverageStakedAmount}\n        maxVestableAmount={vesterDepositMaxVestableAmount}\n        reserveAmount={vesterDepositReserveAmount}\n        maxReserveAmount={vesterDepositMaxReserveAmount}\n        value={vesterDepositValue}\n        setValue={setVesterDepositValue}\n        library={library}\n        vesterAddress={vesterDepositAddress}\n        setPendingTxns={setPendingTxns}\n      />\n      <VesterWithdrawModal\n        isVisible={isVesterWithdrawModalVisible}\n        setIsVisible={setIsVesterWithdrawModalVisible}\n        vesterAddress={vesterWithdrawAddress}\n        chainId={chainId}\n        title={vesterWithdrawTitle}\n        library={library}\n        setPendingTxns={setPendingTxns}\n      />\n      <CompoundModal\n        active={active}\n        account={account}\n        setPendingTxns={setPendingTxns}\n        isVisible={isCompoundModalVisible}\n        setIsVisible={setIsCompoundModalVisible}\n        rewardRouterAddress={rewardRouterAddress}\n        totalVesterRewards={processedData.totalVesterRewards}\n        wrappedTokenSymbol={wrappedTokenSymbol}\n        nativeTokenSymbol={nativeTokenSymbol}\n        library={library}\n        chainId={chainId}\n      />\n      <ClaimModal\n        active={active}\n        account={account}\n        setPendingTxns={setPendingTxns}\n        isVisible={isClaimModalVisible}\n        setIsVisible={setIsClaimModalVisible}\n        rewardRouterAddress={rewardRouterAddress}\n        totalVesterRewards={processedData.totalVesterRewards}\n        wrappedTokenSymbol={wrappedTokenSymbol}\n        nativeTokenSymbol={nativeTokenSymbol}\n        library={library}\n        chainId={chainId}\n      />\n      <div className=\"section-title-block\">\n        <div className=\"section-title-icon\"></div>\n        <div className=\"section-title-content\">\n          <div className=\"Page-title\">\n            <Trans>Earn</Trans>\n          </div>\n          <div className=\"Page-description\">\n            <Trans>\n              Stake <ExternalLink href=\"https://gmxio.gitbook.io/gmx/tokenomics\">GMX</ExternalLink> and{\" \"}\n              <ExternalLink href=\"https://gmxio.gitbook.io/gmx/glp\">GLP</ExternalLink> to earn rewards.\n            </Trans>\n          </div>\n          {earnMsg && <div className=\"Page-description\">{earnMsg}</div>}\n        </div>\n      </div>\n      <div className=\"StakeV2-content\">\n        <div className=\"StakeV2-cards\">\n          <div className=\"App-card StakeV2-gmx-card\">\n            <div className=\"App-card-title\">GMX</div>\n            <div className=\"App-card-divider\"></div>\n            <div className=\"App-card-content\">\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Price</Trans>\n                </div>\n                <div>\n                  {!gmxPrice && \"...\"}\n                  {gmxPrice && (\n                    <Tooltip\n                      position=\"right-bottom\"\n                      className=\"nowrap\"\n                      handle={\"$\" + formatAmount(gmxPrice, USD_DECIMALS, 2, true)}\n                      renderContent={() => (\n                        <>\n                          <StatsTooltipRow\n                            label={t`Price on Avalanche`}\n                            value={formatAmount(gmxPriceFromAvalanche, USD_DECIMALS, 2, true)}\n                          />\n                          <StatsTooltipRow\n                            label={t`Price on Arbitrum`}\n                            value={formatAmount(gmxPriceFromArbitrum, USD_DECIMALS, 2, true)}\n                          />\n                        </>\n                      )}\n                    />\n                  )}\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Wallet</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"gmxBalance\", 18, 2, true)} GMX ($\n                  {formatKeyAmount(processedData, \"gmxBalanceUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Staked</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"gmxInStakedGmx\", 18, 2, true)} GMX ($\n                  {formatKeyAmount(processedData, \"gmxInStakedGmxUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>APR</Trans>\n                </div>\n                <div>\n                  <Tooltip\n                    handle={`${formatKeyAmount(processedData, \"gmxAprTotalWithBoost\", 2, 2, true)}%`}\n                    position=\"right-bottom\"\n                    renderContent={() => (\n                      <GMXAprTooltip processedData={processedData} nativeTokenSymbol={nativeTokenSymbol} />\n                    )}\n                  />\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Rewards</Trans>\n                </div>\n                <div>\n                  <Tooltip\n                    handle={`$${formatKeyAmount(processedData, \"totalGmxRewardsUsd\", USD_DECIMALS, 2, true)}`}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      return (\n                        <>\n                          <StatsTooltipRow\n                            label={`${nativeTokenSymbol} (${wrappedTokenSymbol})`}\n                            value={`${formatKeyAmount(\n                              processedData,\n                              \"feeGmxTrackerRewards\",\n                              18,\n                              4\n                            )} ($${formatKeyAmount(processedData, \"feeGmxTrackerRewardsUsd\", USD_DECIMALS, 2, true)})`}\n                            showDollar={false}\n                          />\n                          <StatsTooltipRow\n                            label=\"Escrowed GMX\"\n                            value={`${formatKeyAmount(\n                              processedData,\n                              \"stakedGmxTrackerRewards\",\n                              18,\n                              4\n                            )} ($${formatKeyAmount(\n                              processedData,\n                              \"stakedGmxTrackerRewardsUsd\",\n                              USD_DECIMALS,\n                              2,\n                              true\n                            )})`}\n                            showDollar={false}\n                          />\n                        </>\n                      );\n                    }}\n                  />\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">{renderMultiplierPointsLabel()}</div>\n                <div>{renderMultiplierPointsValue()}</div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Boost Percentage</Trans>\n                </div>\n                <div>\n                  <Tooltip\n                    handle={`${formatAmount(processedData.boostBasisPoints, 2, 2, false)}%`}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      return (\n                        <div>\n                          <Trans>\n                            You are earning {formatAmount(processedData.boostBasisPoints, 2, 2, false)}% more{\" \"}\n                            {nativeTokenSymbol} rewards using{\" \"}\n                            {formatAmount(processedData.bnGmxInFeeGmx, 18, 4, 2, true)} Staked Multiplier Points.\n                          </Trans>\n                          <br />\n                          <br />\n                          <Trans>Use the \"Compound\" button to stake your Multiplier Points.</Trans>\n                        </div>\n                      );\n                    }}\n                  />\n                </div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Total Staked</Trans>\n                </div>\n                <div>\n                  {!totalGmxStaked && \"...\"}\n                  {totalGmxStaked && (\n                    <Tooltip\n                      position=\"right-bottom\"\n                      className=\"nowrap\"\n                      handle={\n                        formatAmount(totalGmxStaked, 18, 0, true) +\n                        \" GMX\" +\n                        ` ($${formatAmount(stakedGmxSupplyUsd, USD_DECIMALS, 0, true)})`\n                      }\n                      renderContent={() => (\n                        <StatsTooltip\n                          showDollar={false}\n                          title={t`Staked`}\n                          avaxValue={avaxGmxStaked}\n                          arbitrumValue={arbitrumGmxStaked}\n                          total={totalGmxStaked}\n                          decimalsForConversion={18}\n                          symbol=\"GMX\"\n                        />\n                      )}\n                    />\n                  )}\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Total Supply</Trans>\n                </div>\n                {!totalGmxSupply && \"...\"}\n                {totalGmxSupply && (\n                  <div>\n                    {formatAmount(totalGmxSupply, 18, 0, true)} GMX ($\n                    {formatAmount(totalSupplyUsd, USD_DECIMALS, 0, true)})\n                  </div>\n                )}\n              </div>\n              <div className=\"App-card-divider\" />\n              <div className=\"App-card-buttons m-0\">\n                <Button variant=\"semi-clear\" to=\"/buy_gmx\">\n                  <Trans>Buy GMX</Trans>\n                </Button>\n                {active && (\n                  <Button variant=\"semi-clear\" onClick={() => showStakeGmxModal()}>\n                    <Trans>Stake</Trans>\n                  </Button>\n                )}\n                {active && (\n                  <Button variant=\"semi-clear\" onClick={() => showUnstakeGmxModal()}>\n                    <Trans>Unstake</Trans>\n                  </Button>\n                )}\n                {active && (\n                  <Button variant=\"semi-clear\" to=\"/begin_account_transfer\">\n                    <Trans>Transfer Account</Trans>\n                  </Button>\n                )}\n              </div>\n            </div>\n          </div>\n          <div className=\"App-card primary StakeV2-total-rewards-card\">\n            <div className=\"App-card-title\">\n              <Trans>Total Rewards</Trans>\n            </div>\n            <div className=\"App-card-divider\"></div>\n            <div className=\"App-card-content\">\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  {nativeTokenSymbol} ({wrappedTokenSymbol})\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"totalNativeTokenRewards\", 18, 4, true)} ($\n                  {formatKeyAmount(processedData, \"totalNativeTokenRewardsUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">GMX</div>\n                <div>\n                  {formatKeyAmount(processedData, \"totalVesterRewards\", 18, 4, true)} ($\n                  {formatKeyAmount(processedData, \"totalVesterRewardsUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Escrowed GMX</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"totalEsGmxRewards\", 18, 4, true)} ($\n                  {formatKeyAmount(processedData, \"totalEsGmxRewardsUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Multiplier Points</Trans>\n                </div>\n                <div>{formatKeyAmount(processedData, \"bonusGmxTrackerRewards\", 18, 4, true)}</div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Staked Multiplier Points</Trans>\n                </div>\n                <div>{formatKeyAmount(processedData, \"bnGmxInFeeGmx\", 18, 4, true)}</div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Total</Trans>\n                </div>\n                <div>${formatKeyAmount(processedData, \"totalRewardsUsd\", USD_DECIMALS, 2, true)}</div>\n              </div>\n              <div className=\"App-card-footer\">\n                <div className=\"App-card-divider\"></div>\n                <div className=\"App-card-buttons m-0\">\n                  {active && (\n                    <Button variant=\"semi-clear\" onClick={() => setIsCompoundModalVisible(true)}>\n                      <Trans>Compound</Trans>\n                    </Button>\n                  )}\n                  {active && (\n                    <Button variant=\"semi-clear\" onClick={() => setIsClaimModalVisible(true)}>\n                      <Trans>Claim</Trans>\n                    </Button>\n                  )}\n                  {!active && (\n                    <Button variant=\"semi-clear\" onClick={() => connectWallet()}>\n                      <Trans>Connect Wallet</Trans>\n                    </Button>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"App-card\">\n            <div className=\"App-card-title\">GLP ({chainName})</div>\n            <div className=\"App-card-divider\"></div>\n            <div className=\"App-card-content\">\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Price</Trans>\n                </div>\n                <div>${formatKeyAmount(processedData, \"glpPrice\", USD_DECIMALS, 3, true)}</div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Wallet</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"glpBalance\", GLP_DECIMALS, 2, true)} GLP ($\n                  {formatKeyAmount(processedData, \"glpBalanceUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Staked</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"glpBalance\", GLP_DECIMALS, 2, true)} GLP ($\n                  {formatKeyAmount(processedData, \"glpBalanceUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>APR</Trans>\n                </div>\n                <div>\n                  <Tooltip\n                    handle={`${formatKeyAmount(processedData, \"glpAprTotal\", 2, 2, true)}%`}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      return (\n                        <>\n                          <StatsTooltipRow\n                            label={`${nativeTokenSymbol} (${wrappedTokenSymbol}) APR`}\n                            value={`${formatKeyAmount(processedData, \"glpAprForNativeToken\", 2, 2, true)}%`}\n                            showDollar={false}\n                          />\n\n                          {processedData?.glpAprForEsGmx.gt(0) && (\n                            <StatsTooltipRow\n                              label=\"Escrowed GMX APR\"\n                              value={`${formatKeyAmount(processedData, \"glpAprForEsGmx\", 2, 2, true)}%`}\n                              showDollar={false}\n                            />\n                          )}\n\n                          <br />\n\n                          <Trans>\n                            APRs are updated weekly on Wednesday and will depend on the fees collected for the week.{\" \"}\n                            <br />\n                            <br />\n                            Historical GLP APRs can be checked in this{\" \"}\n                            <ExternalLink href=\"https://dune.com/saulius/gmx-analytics\">\n                              community dashboard\n                            </ExternalLink>\n                            .\n                          </Trans>\n                        </>\n                      );\n                    }}\n                  />\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Rewards</Trans>\n                </div>\n                <div>\n                  <Tooltip\n                    handle={`$${formatKeyAmount(processedData, \"totalGlpRewardsUsd\", USD_DECIMALS, 2, true)}`}\n                    position=\"right-bottom\"\n                    renderContent={() => {\n                      return (\n                        <>\n                          <StatsTooltipRow\n                            label={`${nativeTokenSymbol} (${wrappedTokenSymbol})`}\n                            value={`${formatKeyAmount(\n                              processedData,\n                              \"feeGlpTrackerRewards\",\n                              18,\n                              4\n                            )} ($${formatKeyAmount(processedData, \"feeGlpTrackerRewardsUsd\", USD_DECIMALS, 2, true)})`}\n                            showDollar={false}\n                          />\n                          <StatsTooltipRow\n                            label=\"Escrowed GMX\"\n                            value={`${formatKeyAmount(\n                              processedData,\n                              \"stakedGlpTrackerRewards\",\n                              18,\n                              4\n                            )} ($${formatKeyAmount(\n                              processedData,\n                              \"stakedGlpTrackerRewardsUsd\",\n                              USD_DECIMALS,\n                              2,\n                              true\n                            )})`}\n                            showDollar={false}\n                          />\n                        </>\n                      );\n                    }}\n                  />\n                </div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Total Staked</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"glpSupply\", 18, 2, true)} GLP ($\n                  {formatKeyAmount(processedData, \"glpSupplyUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Total Supply</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"glpSupply\", 18, 2, true)} GLP ($\n                  {formatKeyAmount(processedData, \"glpSupplyUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-buttons m-0\">\n                <Button variant=\"semi-clear\" to=\"/buy_glp\">\n                  <Trans>Buy GLP</Trans>\n                </Button>\n                <Button variant=\"semi-clear\" to=\"/buy_glp#redeem\">\n                  <Trans>Sell GLP</Trans>\n                </Button>\n                {hasInsurance && (\n                  <Button\n                    variant=\"semi-clear\"\n                    to=\"https://app.insurace.io/Insurance/Cart?id=124&referrer=545066382753150189457177837072918687520318754040\"\n                  >\n                    <Trans>Purchase Insurance</Trans>\n                  </Button>\n                )}\n              </div>\n            </div>\n          </div>\n          <div className=\"App-card\">\n            <div className=\"App-card-title\">\n              <Trans>Escrowed GMX</Trans>\n            </div>\n            <div className=\"App-card-divider\"></div>\n            <div className=\"App-card-content\">\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Price</Trans>\n                </div>\n                <div>${formatAmount(gmxPrice, USD_DECIMALS, 2, true)}</div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Wallet</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"esGmxBalance\", 18, 2, true)} esGMX ($\n                  {formatKeyAmount(processedData, \"esGmxBalanceUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Staked</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"esGmxInStakedGmx\", 18, 2, true)} esGMX ($\n                  {formatKeyAmount(processedData, \"esGmxInStakedGmxUsd\", USD_DECIMALS, 2, true)})\n                </div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>APR</Trans>\n                </div>\n                <div>\n                  <Tooltip\n                    handle={`${formatKeyAmount(processedData, \"gmxAprTotalWithBoost\", 2, 2, true)}%`}\n                    position=\"right-bottom\"\n                    renderContent={() => (\n                      <GMXAprTooltip processedData={processedData} nativeTokenSymbol={nativeTokenSymbol} />\n                    )}\n                  />\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">{renderMultiplierPointsLabel()}</div>\n                <div>{renderMultiplierPointsValue()}</div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Total Staked</Trans>\n                </div>\n                <div>\n                  {formatKeyAmount(processedData, \"stakedEsGmxSupply\", 18, 0, true)} esGMX ($\n                  {formatKeyAmount(processedData, \"stakedEsGmxSupplyUsd\", USD_DECIMALS, 0, true)})\n                </div>\n              </div>\n              <div className=\"App-card-row\">\n                <div className=\"label\">\n                  <Trans>Total Supply</Trans>\n                </div>\n                <div>\n                  {formatAmount(esGmxSupply, 18, 0, true)} esGMX (${formatAmount(esGmxSupplyUsd, USD_DECIMALS, 0, true)}\n                  )\n                </div>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-buttons m-0\">\n                {active && (\n                  <Button variant=\"semi-clear\" onClick={() => showStakeEsGmxModal()}>\n                    <Trans>Stake</Trans>\n                  </Button>\n                )}\n                {active && (\n                  <Button variant=\"semi-clear\" onClick={() => showUnstakeEsGmxModal()}>\n                    <Trans>Unstake</Trans>\n                  </Button>\n                )}\n                {!active && (\n                  <Button variant=\"semi-clear\" onClick={() => connectWallet()}>\n                    <Trans> Connect Wallet</Trans>\n                  </Button>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {getIsSyntheticsSupported(chainId) && (\n        <div className=\"StakeV2-section\">\n          <GmList />\n        </div>\n      )}\n\n      <div>\n        <div className=\"Tab-title-section\">\n          <div className=\"Page-title\">\n            <Trans>Vest</Trans>\n          </div>\n          <div className=\"Page-description\">\n            <Trans>\n              Convert esGMX tokens to GMX tokens.\n              <br />\n              Please read the{\" \"}\n              <ExternalLink href=\"https://gmxio.gitbook.io/gmx/rewards#vesting\">vesting details</ExternalLink> before\n              using the vaults.\n            </Trans>\n          </div>\n        </div>\n        <div>\n          <div className=\"StakeV2-cards\">\n            <div className=\"App-card StakeV2-gmx-card\">\n              <div className=\"App-card-title\">\n                <Trans>GMX Vault</Trans>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-content\">\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Staked Tokens</Trans>\n                  </div>\n                  <div>\n                    <Tooltip\n                      handle={formatAmount(totalRewardTokens, 18, 2, true)}\n                      position=\"right-bottom\"\n                      renderContent={() => {\n                        return (\n                          <>\n                            <StatsTooltipRow\n                              showDollar={false}\n                              label=\"GMX\"\n                              value={formatAmount(processedData.gmxInStakedGmx, 18, 2, true)}\n                            />\n\n                            <StatsTooltipRow\n                              showDollar={false}\n                              label=\"esGMX\"\n                              value={formatAmount(processedData.esGmxInStakedGmx, 18, 2, true)}\n                            />\n                            <StatsTooltipRow\n                              showDollar={false}\n                              label=\"Multiplier Points\"\n                              value={formatAmount(processedData.bnGmxInFeeGmx, 18, 2, true)}\n                            />\n                          </>\n                        );\n                      }}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Reserved for Vesting</Trans>\n                  </div>\n                  <div>\n                    {formatKeyAmount(vestingData, \"gmxVesterPairAmount\", 18, 2, true)} /{\" \"}\n                    {formatAmount(totalRewardTokens, 18, 2, true)}\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Vesting Status</Trans>\n                  </div>\n                  <div>\n                    <Tooltip\n                      handle={`${formatKeyAmount(vestingData, \"gmxVesterClaimSum\", 18, 4, true)} / ${formatKeyAmount(\n                        vestingData,\n                        \"gmxVesterVestedAmount\",\n                        18,\n                        4,\n                        true\n                      )}`}\n                      position=\"right-bottom\"\n                      renderContent={() => {\n                        return (\n                          <div>\n                            <Trans>\n                              {formatKeyAmount(vestingData, \"gmxVesterClaimSum\", 18, 4, true)} tokens have been\n                              converted to GMX from the{\" \"}\n                              {formatKeyAmount(vestingData, \"gmxVesterVestedAmount\", 18, 4, true)} esGMX deposited for\n                              vesting.\n                            </Trans>\n                          </div>\n                        );\n                      }}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Claimable</Trans>\n                  </div>\n                  <div>\n                    <Tooltip\n                      handle={`${formatKeyAmount(vestingData, \"gmxVesterClaimable\", 18, 4, true)} GMX`}\n                      position=\"right-bottom\"\n                      renderContent={() => (\n                        <Trans>\n                          {formatKeyAmount(vestingData, \"gmxVesterClaimable\", 18, 4, true)} GMX tokens can be claimed,\n                          use the options under the Total Rewards section to claim them.\n                        </Trans>\n                      )}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-divider\"></div>\n                <div className=\"App-card-buttons m-0\">\n                  {!active && (\n                    <Button variant=\"semi-clear\" onClick={() => connectWallet()}>\n                      <Trans>Connect Wallet</Trans>\n                    </Button>\n                  )}\n                  {active && (\n                    <Button variant=\"semi-clear\" onClick={() => showGmxVesterDepositModal()}>\n                      <Trans>Deposit</Trans>\n                    </Button>\n                  )}\n                  {active && (\n                    <Button variant=\"semi-clear\" onClick={() => showGmxVesterWithdrawModal()}>\n                      <Trans>Withdraw</Trans>\n                    </Button>\n                  )}\n                </div>\n              </div>\n            </div>\n            <div className=\"App-card StakeV2-gmx-card\">\n              <div className=\"App-card-title\">\n                <Trans>GLP Vault</Trans>\n              </div>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-content\">\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Staked Tokens</Trans>\n                  </div>\n                  <div>{formatAmount(processedData.glpBalance, 18, 2, true)} GLP</div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Reserved for Vesting</Trans>\n                  </div>\n                  <div>\n                    {formatKeyAmount(vestingData, \"glpVesterPairAmount\", 18, 2, true)} /{\" \"}\n                    {formatAmount(processedData.glpBalance, 18, 2, true)}\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Vesting Status</Trans>\n                  </div>\n                  <div>\n                    <Tooltip\n                      handle={`${formatKeyAmount(vestingData, \"glpVesterClaimSum\", 18, 4, true)} / ${formatKeyAmount(\n                        vestingData,\n                        \"glpVesterVestedAmount\",\n                        18,\n                        4,\n                        true\n                      )}`}\n                      position=\"right-bottom\"\n                      renderContent={() => {\n                        return (\n                          <div>\n                            <Trans>\n                              {formatKeyAmount(vestingData, \"glpVesterClaimSum\", 18, 4, true)} tokens have been\n                              converted to GMX from the{\" \"}\n                              {formatKeyAmount(vestingData, \"glpVesterVestedAmount\", 18, 4, true)} esGMX deposited for\n                              vesting.\n                            </Trans>\n                          </div>\n                        );\n                      }}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-row\">\n                  <div className=\"label\">\n                    <Trans>Claimable</Trans>\n                  </div>\n                  <div>\n                    <Tooltip\n                      handle={`${formatKeyAmount(vestingData, \"glpVesterClaimable\", 18, 4, true)} GMX`}\n                      position=\"right-bottom\"\n                      renderContent={() => (\n                        <Trans>\n                          {formatKeyAmount(vestingData, \"glpVesterClaimable\", 18, 4, true)} GMX tokens can be claimed,\n                          use the options under the Total Rewards section to claim them.\n                        </Trans>\n                      )}\n                    />\n                  </div>\n                </div>\n                <div className=\"App-card-divider\"></div>\n                <div className=\"App-card-buttons m-0\">\n                  {!active && (\n                    <Button variant=\"semi-clear\" onClick={() => connectWallet()}>\n                      <Trans>Connect Wallet</Trans>\n                    </Button>\n                  )}\n                  {active && (\n                    <Button variant=\"semi-clear\" onClick={() => showGlpVesterDepositModal()}>\n                      <Trans>Deposit</Trans>\n                    </Button>\n                  )}\n                  {active && (\n                    <Button variant=\"semi-clear\" onClick={() => showGlpVesterWithdrawModal()}>\n                      <Trans>Withdraw</Trans>\n                    </Button>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <Footer />\n    </div>\n  );\n}\n","import React from \"react\";\n\nimport { AVALANCHE, getConstant } from \"config/chains\";\n\nimport StakeV1 from \"./StakeV1\";\nimport StakeV2 from \"./StakeV2\";\n\nexport default function Stake(props) {\n  const chainId = AVALANCHE;\n  const isV2 = getConstant(chainId, \"v2\");\n  return isV2 ? <StakeV2 {...props} /> : <StakeV1 {...props} />;\n}\n","import { Toaster } from \"react-hot-toast\";\nimport { useWindowScroll, createBreakpoint } from \"react-use\";\n\nfunction EventToastContainer() {\n  let { y: scrollY } = useWindowScroll();\n  const useBreakpoint = createBreakpoint({ XL: 1033, L: 768, S: 350 });\n  const breakpoint = useBreakpoint();\n  return (\n    <Toaster\n      position=\"top-right\"\n      reverseOrder={true}\n      gutter={30}\n      containerClassName=\"event-toast-container\"\n      containerStyle={{\n        zIndex: 2,\n        transition: \"all 200ms\",\n        top: scrollY > 60 ? \"30px\" : `${93 - scrollY}px`,\n        right: breakpoint === \"XL\" ? \"30px\" : \"1rem\",\n      }}\n      toastOptions={{\n        duration: Infinity,\n      }}\n    />\n  );\n}\nexport default EventToastContainer;\n","// date format: d MMM yyyy, H:mm, time should be specifed based on UTC time\n\nexport type EventData = {\n  id: string;\n  title: string;\n  isActive?: boolean;\n  validTill: string;\n  bodyText: string | string[];\n  buttons: {\n    text: string;\n    link: string;\n    newTab: boolean;\n  }[];\n};\n\nexport const homeEventsData: EventData[] = [\n  // {\n  //   id: \"avax-norush-contest\",\n  //   title: \"GMXRUSH Trading Contest\",\n  //   isActive: true,\n  //   validTill: \"23 Nov 2022, 12:00\",\n  //   bodyText: [\n  //     \"The #GMXRUSH Trading Contest is active on #Avalanche from November 16 12:00 UTC to November 23 12:00 UTC.\",\n  //     \"Showcase your trading abilities transparently on-chain, and win big prizes.\",\n  //   ],\n  //   buttons: [\n  //     {\n  //       text: \"Learn More\",\n  //       link: \"https://medium.com/@gmx.io/sign-up-for-the-gmxrush-avalanche-trading-contest-win-100-000-usd-in-prizes-546b1ab2e416\",\n  //       newTab: true,\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"app-gmx-io-launch\",\n  //   title: \"Frontend Updates\",\n  //   isActive: true,\n  //   validTill: \"10 Jul 2022, 12:00\",\n  //   bodyText:\n  //     \"Updates have been applied to the GMX frontend to inform users of the separation between gmx.io and app.gmx.io\",\n  //   buttons: [\n  //     {\n  //       text: \"Read More\",\n  //       link: \"https://medium.com/@gmx.io/gmx-frontend-updates-8d13f2346e1e\",\n  //       newTab: true,\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"arbitrum-nitro-upgrade\",\n  //   title: \"Arbitrum Nitro Upgrade\",\n  //   isActive: true,\n  //   validTill: \"31 Aug 2022, 20:00\",\n  //   bodyText: \"The Arbitrum Nitro upgrade has been completed.\",\n  //   buttons: [\n  //     {\n  //       text: \"Read More\",\n  //       link: \"https://medium.com/@gmx.io/arbitrum-nitro-5f88c03a46fe\",\n  //       newTab: true,\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"usdc-depeg\",\n  //   title: \"USDC has currently lost its peg to USD\",\n  //   isActive: true,\n  //   validTill: \"18 Dec 2023, 12:00\",\n  //   bodyText:\n  //     \"There is a high spread for USDC on GMX, reflecting its current market-wide trading price. These spreads may impact your leverage short positions using USDC as collateral, swaps into and out of USDC, and any other transactions involving USDC, including minting/burning GLP.\",\n  //   buttons: [],\n  // },\n];\n\nexport const appEventsData: EventData[] = [\n  // {\n  //   id: \"avax-norush-contest\",\n  //   title: \"GMXRUSH Trading Contest\",\n  //   isActive: true,\n  //   validTill: \"23 Nov 2022, 12:00\",\n  //   bodyText: [\n  //     \"The #GMXRUSH Trading Contest is active on #Avalanche from November 16 12:00 UTC to November 23 12:00 UTC.\",\n  //     \"Showcase your trading abilities transparently on-chain, and win big prizes.\",\n  //   ],\n  //   buttons: [\n  //     {\n  //       text: \"Learn More\",\n  //       link: \"https://medium.com/@gmx.io/sign-up-for-the-gmxrush-avalanche-trading-contest-win-100-000-usd-in-prizes-546b1ab2e416\",\n  //       newTab: true,\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"removal-of-min-profit-rule\",\n  //   title: \"Trading improvements\",\n  //   isActive: true,\n  //   validTill: \"1 Apr 2022, 12:00\",\n  //   bodyText: \"The 1.5% minimum profit rule has been removed\",\n  //   buttons: [\n  //     {\n  //       text: \"Read more\",\n  //       link: \"https://gmxio.gitbook.io/gmx/roadmap#30-march-2022\",\n  //       newTab: true,\n  //     },\n  //     {\n  //       text: \"Trade Now\",\n  //       link: \"https://gmx.io/trade\",\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"shorting-of-link-uni-re-enabled\",\n  //   title: \"Shorting of LINK and UNI\",\n  //   isActive: true,\n  //   validTill: \"20 Apr 2022, 12:00\",\n  //   bodyText: \"Shorting has been re-enabled for LINK and UNI.\",\n  //   buttons: [\n  //     {\n  //       text: \"Trade Now\",\n  //       link: \"https://gmx.io/trade\",\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"speed-up-page-loading\",\n  //   title: \"Speed Up Page Loading\",\n  //   isActive: true,\n  //   validTill: \"4 May 2022, 12:00\",\n  //   bodyText: \"If you experience data loading issues, please use a free RPC URL from Alchemy.\",\n  //   buttons: [\n  //     {\n  //       text: \"Learn More\",\n  //       link: \"https://gmxio.gitbook.io/gmx/trading#backup-rpc-urls\",\n  //       newTab: true,\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"referral-program-launch\",\n  //   title: \"Referral Program Launch\",\n  //   isActive: true,\n  //   validTill: \"4 May 2022, 12:00\",\n  //   bodyText: \"The GMX referral program is now live! Get fee discounts and refer traders to earn rewards.\",\n  //   buttons: [\n  //     {\n  //       text: \"Read More\",\n  //       link: \"https://gmx.io/referrals\",\n  //     },\n  //     {\n  //       text: \"Join Now\",\n  //       link: \"https://gmx.io/referrals\",\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"gmx-arbitrum-odyssey\",\n  //   title: \"GMX Arbitrum Odyssey\",\n  //   isActive: true,\n  //   validTill: \"3 Jul 2022, 12:00\",\n  //   bodyText:\n  //     \"The GMX Arbitrum Odyssey is taking place this week, all participants will receive prizes. Read on to find out more.\",\n  //   buttons: [\n  //     {\n  //       text: \"Read More\",\n  //       link: \"https://medium.com/@gmx.io/gmx-arbitrum-odyssey-fc12cba2d10d\",\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"fix-arbitrum-transaction-issues\",\n  //   title: \"Fix Arbitrum Transactions\",\n  //   isActive: true,\n  //   validTill: \"30 Jun 2022, 12:00\",\n  //   bodyText:\n  //     \"If you experience transaction errors on Arbitrum or data loading issues, please use a free RPC URL from Alchemy.\",\n  //   buttons: [\n  //     {\n  //       text: \"Learn More\",\n  //       link: \"https://gmxio.gitbook.io/gmx/trading#backup-rpc-urls\",\n  //       newTab: true,\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"gmx-arbitrum-odyssey-paused\",\n  //   title: \"GMX Arbitrum Odyssey Paused\",\n  //   isActive: true,\n  //   validTill: \"3 Jul 2022, 12:00\",\n  //   bodyText: \"The GMX Arbitrum Odyssey has been paused. Please read the linked post for more information.\",\n  //   buttons: [\n  //     {\n  //       text: \"Read More\",\n  //       link: \"https://twitter.com/GMX_IO/status/1542163585111150592\",\n  //       newTab: true,\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"app-gmx-io\",\n  //   title: \"Frontend Updates\",\n  //   isActive: true,\n  //   validTill: \"6 Jul 2022, 12:00\",\n  //   bodyText:\n  //     \"On 6 Jul 2022, updates will be applied to the GMX frontend to inform users of the separation between gmx.io and app.gmx.io\",\n  //   buttons: [\n  //     {\n  //       text: \"Read More\",\n  //       link: \"https://medium.com/@gmx.io/gmx-frontend-updates-8d13f2346e1e\",\n  //       newTab: true,\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"degraded-alchemy-performance\",\n  //   title: \"Alchemy RPC\",\n  //   isActive: true,\n  //   validTill: \"3 Jul 2022, 12:00\",\n  //   bodyText:\n  //     \"There are ongoing syncing issues on Alchemy for Arbitrum at the moment, please check their status page and use the public Arbitrum RPC in the meantime\",\n  //   buttons: [\n  //     {\n  //       text: \"Check Status\",\n  //       link: \"https://status.alchemy.com/\",\n  //       newTab: true,\n  //     },\n  //     {\n  //       text: \"Public RPC URL\",\n  //       link: \"https://metamask.zendesk.com/hc/en-us/articles/4415758358299-Network-profile-Arbitrum\",\n  //       newTab: true,\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"app-gmx-io-settings\",\n  //   title: \"Frontend Updates\",\n  //   isActive: true,\n  //   validTill: \"10 Jul 2022, 12:00\",\n  //   bodyText:\n  //     \"You are currently using app.gmx.io. Customized settings have been reset, you may need to adjust your settings by clicking on the menu in the top right after connecting your wallet.\",\n  //   buttons: [\n  //     {\n  //       text: \"Read More\",\n  //       link: \"https://medium.com/@gmx.io/gmx-frontend-updates-8d13f2346e1e\",\n  //       newTab: true,\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"use-alchemy-rpc-url\",\n  //   title: \"Use Alchemy RPC URL\",\n  //   isActive: true,\n  //   validTill: \"10 Jul 2022, 12:00\",\n  //   bodyText:\n  //     \"If you experience data loading or transaction issues on Arbitrum, please use a free RPC URL from Alchemy.\",\n  //   buttons: [\n  //     {\n  //       text: \"Learn More\",\n  //       link: \"https://gmxio.gitbook.io/gmx/trading#backup-rpc-urls\",\n  //       newTab: true,\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"arbitrum-nitro-upgrade\",\n  //   title: \"Arbitrum Nitro Upgrade\",\n  //   isActive: true,\n  //   validTill: \"31 Aug 2022, 20:00\",\n  //   bodyText: \"The Arbitrum Nitro upgrade has been completed.\",\n  //   buttons: [\n  //     {\n  //       text: \"Read More\",\n  //       link: \"https://medium.com/@gmx.io/arbitrum-nitro-5f88c03a46fe\",\n  //       newTab: true,\n  //     },\n  //   ],\n  // },\n  // {\n  //   id: \"position-router-updates\",\n  //   title: \"Position Router Updates\",\n  //   isActive: true,\n  //   validTill: \"19 Oct 2022, 20:00\",\n  //   bodyText: \"Position routers have been updated, existing users may have to re-enable leverage.\",\n  //   buttons: [\n  //     {\n  //       text: \"Read More\",\n  //       link: \"https://medium.com/@gmx.io/gmx-deployment-updates-a6a470df445f\",\n  //       newTab: true,\n  //     },\n  //   ],\n  // },\n  {\n    id: \"glp-manager-updates\",\n    title: \"GLP Manager Updates\",\n    isActive: true,\n    validTill: \"18 Dec 2022, 12:00\",\n    bodyText:\n      \"The GLP Manager address has been updated based on the linked post, existing users will need to approve the new GLP Manager to buy GLP tokens.\",\n    buttons: [\n      {\n        text: \"Read More\",\n        link: \"https://medium.com/@gmx.io/gmx-deployment-updates-nov-2022-16572314874d\",\n        newTab: true,\n      },\n    ],\n  },\n  // {\n  //   id: \"usdc-depeg\",\n  //   title: \"USDC has currently lost its peg to USD\",\n  //   isActive: true,\n  //   validTill: \"18 Dec 2023, 12:00\",\n  //   bodyText:\n  //     \"There is a high spread for USDC on GMX, reflecting its current market-wide trading price. These spreads may impact your leverage short positions using USDC as collateral, swaps into and out of USDC, and any other transactions involving USDC, including minting/burning GLP.\",\n  //   buttons: [],\n  // },\n];\n","function Icon({ className }) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      aria-hidden=\"true\"\n      className={className}\n      viewBox=\"0 0 24 24\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        d=\"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z\"\n      ></path>\n    </svg>\n  );\n}\n\nexport default Icon;\n","import \"./EventToast.css\";\nimport Icon from \"./AnnouncementIcon\";\nimport { MdOutlineClose } from \"react-icons/md\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nexport default function EventToast({ event, id, onClick, t }) {\n  return (\n    <div className={`single-toast ${t.visible ? \"zoomIn\" : \"zoomOut\"}`} key={id}>\n      <header>\n        <div className=\"toast-title\">\n          <Icon className=\"announcement-icon\" />\n          <p>{event.title}</p>\n        </div>\n        <MdOutlineClose onClick={onClick} className=\"cross-icon\" color=\"white\" />\n      </header>\n      {Array.isArray(event.bodyText) ? (\n        event.bodyText.map((text, i) => (\n          <p key={i} className=\"toast-body\">\n            {text}\n          </p>\n        ))\n      ) : (\n        <p className=\"toast-body\">{event.bodyText}</p>\n      )}\n      <div className=\"toast-links\">\n        {event.buttons.map((button) => {\n          if (button.newTab) {\n            return (\n              <ExternalLink key={event.id + button.text} href={button.link}>\n                {button.text}\n              </ExternalLink>\n            );\n          } else {\n            return (\n              <a key={event.id + button.text} href={button.link}>\n                {button.text}\n              </a>\n            );\n          }\n        })}\n      </div>\n    </div>\n  );\n}\n","import { useLocalStorage } from \"react-use\";\nimport toast from \"react-hot-toast\";\nimport { homeEventsData, appEventsData } from \"config/events\";\nimport { useEffect } from \"react\";\nimport EventToast from \"./EventToast\";\nimport { isFuture, parse } from \"date-fns\";\nimport { isHomeSite } from \"lib/legacy\";\n\nfunction useEventToast() {\n  const isHome = isHomeSite();\n  const [visited, setVisited] = useLocalStorage(\"visited-announcements\", []);\n\n  useEffect(() => {\n    const eventsData = isHome ? homeEventsData : appEventsData;\n\n    eventsData\n      .filter((event) => event.isActive)\n      .filter((event) => isFuture(parse(event.validTill + \", +00\", \"d MMM yyyy, H:mm, x\", new Date())))\n      .filter((event) => Array.isArray(visited) && !visited.includes(event.id))\n      .forEach((event) => {\n        toast.custom(\n          (t) => (\n            <EventToast\n              event={event}\n              id={event.id}\n              t={t}\n              onClick={() => {\n                toast.dismiss(event.id);\n                visited.push(event.id);\n                setVisited(visited);\n              }}\n            />\n          ),\n          {\n            id: event.id,\n            style: {},\n          }\n        );\n      });\n  }, [visited, setVisited, isHome]);\n}\n\nexport default useEventToast;\n","import \"./RedirectModal.css\";\nimport Modal from \"../Modal/Modal\";\nimport Checkbox from \"../Checkbox/Checkbox\";\nimport { t, Trans } from \"@lingui/macro\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport Button from \"components/Button/Button\";\n\nexport function RedirectPopupModal({\n  redirectModalVisible,\n  setRedirectModalVisible,\n  appRedirectUrl,\n  setRedirectPopupTimestamp,\n  setShouldHideRedirectModal,\n  shouldHideRedirectModal,\n}) {\n  const onClickAgree = () => {\n    if (shouldHideRedirectModal) {\n      setRedirectPopupTimestamp(Date.now());\n    }\n  };\n\n  return (\n    <Modal\n      className=\"RedirectModal\"\n      isVisible={redirectModalVisible}\n      setIsVisible={setRedirectModalVisible}\n      label={t`Launch App`}\n    >\n      <Trans>You are leaving GMX.io and will be redirected to a third party, independent website.</Trans>\n      <br />\n      <br />\n      <Trans>\n        The website is a community deployed and maintained instance of the open source{\" \"}\n        <ExternalLink href=\"https://github.com/gmx-io/gmx-interface\">GMX front end</ExternalLink>, hosted and served on\n        the distributed, peer-to-peer <ExternalLink href=\"https://ipfs.io/\">IPFS network</ExternalLink>.\n      </Trans>\n      <br />\n      <br />\n      <Trans>\n        Alternative links can be found in the{\" \"}\n        <ExternalLink href=\"https://gmxio.gitbook.io/gmx/app-links\">docs</ExternalLink>.\n        <br />\n        <br />\n        By clicking Agree you accept the <ExternalLink href=\"https://gmx.io/#/terms-and-conditions\">\n          T&Cs\n        </ExternalLink>{\" \"}\n        and <ExternalLink href=\"https://gmx.io/#/referral-terms\">Referral T&Cs</ExternalLink>.\n        <br />\n        <br />\n      </Trans>\n      <div className=\"mb-sm\">\n        <Checkbox isChecked={shouldHideRedirectModal} setIsChecked={setShouldHideRedirectModal}>\n          <Trans>Don't show this message again for 30 days.</Trans>\n        </Checkbox>\n      </div>\n      <Button variant=\"primary-action\" className=\"w-100\" to={appRedirectUrl} onClick={onClickAgree}>\n        <Trans>Agree</Trans>\n      </Button>\n    </Modal>\n  );\n}\n","import React from \"react\";\nimport \"./Jobs.css\";\nimport SEO from \"components/Common/SEO\";\nimport Footer from \"components/Footer/Footer\";\nimport { getPageTitle } from \"lib/legacy\";\nimport Card from \"components/Common/Card\";\nimport { t, Trans } from \"@lingui/macro\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nfunction Jobs() {\n  return (\n    <SEO title={getPageTitle(\"Job Openings\")}>\n      <div className=\"default-container page-layout Referrals\">\n        <div className=\"section-title-block\">\n          <div className=\"section-title-icon\" />\n          <div className=\"section-title-content\">\n            <div className=\"Page-title\">\n              <Trans>Jobs</Trans>\n            </div>\n            <div className=\"Page-description\">\n              <Trans>Job openings at GMX.</Trans>\n            </div>\n          </div>\n        </div>\n        <div className=\"jobs-page-body\">\n          <NoJob />\n        </div>\n      </div>\n      <Footer />\n    </SEO>\n  );\n}\n\nfunction NoJob() {\n  return (\n    <Card title={t`No open positions at GMX currently`}>\n      <div className=\"body-para\">\n        <p className=\"subheading\">\n          <Trans>\n            GMX is not actively looking for new hires at the moment. However, if you think you can contribute to the\n            project, please email <ExternalLink href=\"mailto:jobs@gmx.io\">jobs@gmx.io</ExternalLink>.\n          </Trans>\n        </p>\n      </div>\n    </Card>\n  );\n}\n\n// function JobCard() {\n//   return (\n// <Card title=\"Senior front-end developer (Full-time position)\">\n//   <div className=\"body-para\">\n//     <p className=\"subheading\">What you will do:</p>\n//     <ul>\n//       <li>Work closely with the GMX team on the GMX front-end website.</li>\n//       <li>Collaborate and discuss features to be worked on.</li>\n//       <li>Remote full-time position, flexible working hours.</li>\n//     </ul>\n//     <div className=\"mt-lg\">\n//       <p className=\"subheading\">What we are looking for:</p>\n//       <ul>\n//         <li>Required skills: HTML5, CSS3, React, Ethers, Web3 JS.</li>\n//         <li>Bonus skills: Node JS.</li>\n//         <li>5+ years of experience.</li>\n//         <li>Previous DeFi experience and knowledge.</li>\n//         <li>Must speak fluent English and available to start right away.</li>\n//         <li>Comfortable making changes to the interface following our current design guidelines.</li>\n//       </ul>\n//       <p>The salary is 60,000 to 120,000 USD + 1,000 to 3,000 GMX a year.</p>\n//       <p className=\"jobs-contact\">\n//         If the job suits you, please get in touch with{\" \"}\n//         <a target=\"_blank\" href=\"mailto:jobs@gmx.io\" rel=\"noopener noreferrer\">\n//           jobs@gmx.io\n//         </a>{\" \"}\n//         using the following email subject: Application for Senior front-end developer: [Your name]\n//       </p>\n//     </div>\n//   </div>\n// </Card>\n//   );\n// }\n\nexport default Jobs;\n","import SEO from \"components/Common/SEO\";\nimport Footer from \"components/Footer/Footer\";\nimport { getPageTitle } from \"lib/legacy\";\nimport \"./PageNotFound.css\";\nimport { Trans } from \"@lingui/macro\";\nimport { getHomeUrl, getTradePageUrl } from \"lib/legacy\";\n\nfunction PageNotFound() {\n  const homeUrl = getHomeUrl();\n  const tradePageUrl = getTradePageUrl();\n\n  return (\n    <SEO title={getPageTitle(\"Page not found\")}>\n      <div className=\"page-layout\">\n        <div className=\"page-not-found-container\">\n          <div className=\"page-not-found\">\n            <h2>\n              <Trans>Page not found</Trans>\n            </h2>\n            <p className=\"go-back\">\n              <Trans>\n                <span>Return to </span>\n                <a href={homeUrl}>Homepage</a> <span>or </span> <a href={tradePageUrl}>Trade</a>\n              </Trans>\n            </p>\n          </div>\n        </div>\n        <Footer />\n      </div>\n    </SEO>\n  );\n}\n\nexport default PageNotFound;\n","import React from \"react\";\nimport Footer from \"components/Footer/Footer\";\nimport SEO from \"components/Common/SEO\";\nimport { getPageTitle } from \"lib/legacy\";\nimport \"./ReferralTerms.css\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\nexport default function ReferralTerms() {\n  return (\n    <SEO title={getPageTitle(\"Referral Terms\")}>\n      <div className=\"default-container Page page-layout\">\n        <div>\n          <div className=\"Page-title-section center\">\n            <div className=\"Page-title\">GMX Referral Program</div>\n            <div className=\"Page-subtitle\">Terms and Conditions</div>\n            <div className=\"Page-description\">Last modified: August 1st, 2022</div>\n          </div>\n          <div className=\"content\">\n            <div className=\"section\">\n              <p className=\"body-text\">\n                Welcome to GMX.io (\"we,\" \"us,\" or \"our\"), the informational resource for GMX Protocol, as defined below.\n              </p>\n              <p className=\"body-text\">\n                GMX.io provides information and resources about the fundamentals of the decentralized non-custodial\n                protocol called the GMX Protocol (the \"GMX Protocol,\" \"Protocol,\" or \"GMX DApp\"). GMX.io is not an\n                available access point to the GMX Protocol.\n              </p>\n              <p className=\"body-text\">\n                These Terms and Conditions and any other documents incorporated herein by reference (collectively, these\n                \"Terms\") to you or the company or other legal entity you represent (\"you,\" \"your,\" \"the Referrer,\" \"the\n                Affiliate\"), explains the terms and conditions by which you may use the GMX Referral Program (\"Referral\n                Program\") as defined below.\n              </p>\n              <p className=\"body-text\">\n                Please do not use the Referral Program if you disagree with any of these Terms.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">1. USE OF THE REFERRAL PROGRAM</h3>\n              <p className=\"body-text\">All this content is for informational purposes only.</p>\n              <p className=\"body-text\">\n                The Referral Program allows you to advertise the GMX DApp, thereby driving traffic to it, whereby you\n                may earn a portion of the fees generated (\"Rebates\") if a person that is not you (\"Trader,\" \"Referred\n                User\") trades in the GMX DApp after being referred to it from a hyperlink (\"Link\") or manually input\n                code (\"Referral Code\"). The Trader will benefit from a fee discount (\"Discount\") associated with the\n                Referrer's tier.\n              </p>\n              <p className=\"body-text\">\n                After being referred to the GMX DApp from a Link, the Trader's browser will save your Referral Code,\n                which will be assigned to the Trader on his first trade.\n              </p>\n              <p className=\"body-text\">\n                A Trader can also manually enter your Referral Code in the Traders section and change it at any time.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">2. OBLIGATIONS</h3>\n              <p className=\"body-text\">\n                2.1 As an Affiliate, GMX DApp provides you with the Links and Referral Codes necessary to promote the\n                GMX Protocol. You acknowledge and agree it is your sole responsibility to indicate your correct Referral\n                Code. You may promote the GMX Protocol offers in any manner you choose unless it misleads someone about\n                the GMX Protocol.\n              </p>\n              <p className=\"body-text\">\n                2.2 GMX.io is not responsible for (i) lost sales or lost opportunity to earn Rebates due to any cause,\n                such as technical difficulties or over-capacity, including system overload in the Arbitrum or Avalanche\n                blockchains; (ii) tracking Rebates, Discounts, or any other data, as this is handled by independent,\n                smart contracts.\n              </p>\n              <p className=\"body-text\">\n                2.3 You will be excluded from the Referral Program, following the directives of the GMX tokenholders:\n                (i) if you use any language libelous, defamatory, profane, obscene, pornographic, sexually explicit,\n                indecent, lewd, vulgar, suggestive, harassing, stalking, hateful, threatening, offensive,\n                discriminatory, bigoted, abusive, inflammatory, fraudulent, deceptive, or otherwise objectionable or\n                likely or intended to incite, threaten, facilitate, promote, or encourage hate, racial intolerance, or\n                violent acts against others; (ii) if you try any form of gaming through self-referrals.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">3. REBATES AND DISCOUNTS</h3>\n              <p className=\"body-text\">\n                Referrers will receive rebates based on a sliding percentage of fees paid by Referred Users. Rebates\n                will never be retroactive.\n              </p>\n              <p className=\"body-text\">\n                GMX.io is under no obligation for Rebates or Discounts to any Referrer or Trader. Rebates and Discounts\n                are handled following the directives of the GMX tokenholders.\n              </p>\n              <p className=\"body-text\">\n                The Rebates and Discounts percentages for the default tier Tier 1, and instructions to upgrade to Tier 2\n                and Tier 3, are contained in{\" \"}\n                <ExternalLink href=\"https://gmxio.gitbook.io/gmx/referrals\">\n                  https://gmxio.gitbook.io/gmx/referrals.\n                </ExternalLink>\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">4. LIMITATION OF LIABILITY</h3>\n              <p className=\"body-text\">\n                Under no circumstances shall GMX.io be liable for any direct, indirect, incidental, punitive, special,\n                consequential damages, or similar damages or liabilities whatsoever for any reason whatsoever related to\n                these Terms, your use or inability to use our web site(s), or the materials and content of the web\n                site(s) or any other web sites linked to such web site(s) or your provision of any personally\n                identifiable information to a backend service provider or any third party. This limitation applies\n                regardless of whether the alleged liability is based on contract, tort, warranty, negligence, strict\n                liability, or any other basis, even if we have been advised of the possibility of such damages or such\n                damages were reasonably foreseeable.\n              </p>\n              <p className=\"body-text\">\n                In no event shall GMX.io's aggregate liability arising out of or in connection with the Site exceed five\n                hundred Singapore Dollars (500 SGD).\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">5. INDEMNIFICATION</h3>\n              <p className=\"body-text\">\n                You will defend, indemnify, and hold harmless GMX.io, its affiliates, members, member, managers,\n                employees, attorneys, representatives, suppliers, and contractors from any claim, demand, lawsuit,\n                action, proceeding, investigation, liability, damage, loss, cost or expense, including without\n                limitation reasonable attorneys' fees, arising out of or relating to arising under these Terms, the\n                service(s) provided by GMX.io, or your use of the service(s) provided by GMX.io, including, without\n                limitation, an infringement by you, or by anyone else using such service(s) we provide to you, of any\n                intellectual property or other proprietary rights of any person or entity, or from the violation of any\n                of our operating rules or policies relating to the service(s) provided. When we may be involved in a\n                suit involving a third party and which is related to our service(s) to you under these Terms, we may\n                seek written assurances from you in which you promise to defend, indemnify and hold us harmless from the\n                costs and liabilities described in this paragraph. Such written assurances may include, in our sole\n                discretion, the posting of a performance bond(s) or other guarantees reasonably calculated to guarantee\n                payment. We may consider your failure to provide such assurances a breach of these Terms by you. The\n                terms of this paragraph will survive any termination or cancellation of the Terms.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">6. MODIFICATION, SUSPENSION, AND TERMINATION</h3>\n              <p className=\"body-text\">\n                The Referral Program runs independently from GMX.io, which the token holders of GMX determine. Due to\n                this, from time to time and with or without prior notice to you, the Referral Program could be subject\n                to modifications, suspensions, or disabilities, in whole or in part, for any reason whatsoever.\n              </p>\n              <p className=\"body-text\">\n                GMX.io will not be liable for any losses suffered by you resulting from any modification to the Referral\n                Program or from any modification, suspension, or termination, for any reason, of your access to all or\n                any portion of the Interface or the Protocol.\n              </p>\n              <p className=\"body-text\">\n                GMX.io may revise these Terms from time to time. We will notify you by updating the date at the top of\n                the Terms and maintaining a current version. The most current version of the Terms will always be at\n                https://gmx.io/referral-terms. All modifications will be effective when they are posted. By using the\n                Referral Program after those revisions become effective, you agree to be bound by the revised Terms.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">7. GOVERNING LAW</h3>\n              <p className=\"body-text\">\n                The interpretation and enforcement of these Terms, and any dispute related to these Terms, the Site, or\n                the Interface, will be governed by and construed and enforced under the laws of the Bahamas, as\n                applicable.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">8. GENERAL</h3>\n              <p className=\"body-text\">\n                8.1 These Terms, including other policies or agreements incorporated herein, constitute the entire and\n                only agreement between you and GMX.io concerning the subject matter of these Terms and supersede all\n                prior or contemporaneous agreements, representations, warranties, and understandings, written or oral,\n                concerning the subject matter of these Terms. Any failure by us to exercise or enforce any right or\n                provision of the Terms shall not constitute a waiver of such right or provision.\n              </p>\n              <p className=\"body-text\">\n                8.2 You must legally be able to enter into the Terms. Using the Referral Program, you represent and\n                warrant that you meet the eligibility requirement. If you do not meet the requirement, you must not\n                access the Referral Program.\n              </p>\n              <p className=\"body-text\">\n                8.3 Nothing contained herein will be construed to create the relationship of principal and agent,\n                employer and employee, partners or joint venturers. Each party shall ensure that the foregoing persons\n                shall not represent to the contrary, either expressly, implicitly, by appearance, or otherwise.\n              </p>\n              <p className=\"body-text\">\n                8.4 If any provision of these Terms shall be unenforceable or invalid under any applicable law or be\n                held by any applicable court decision, such unenforceability or invalidity shall not render these Terms\n                unenforceable or invalid as a whole. GMX.io will amend or replace such provision with one that is valid\n                and enforceable and which achieves, to the extent possible, our original objectives and intent as\n                reflected in the original provision.\n              </p>\n              <p className=\"body-text\">\n                8.5 You may not assign or transfer any right to use the Referral Program, or any of your rights or\n                obligations under these Terms, without our express prior written consent, including by operation of law\n                or in connection with any change of control. GMX.io may assign or transfer any or all of our rights or\n                obligations under these Terms, in whole or part, without notice or obtaining your consent or approval.\n              </p>\n              <p className=\"body-text\">\n                8.6 GMX.io will have no responsibility or liability for any failure or delay in performance of the Site,\n                or any loss or damage that you may incur, due to any circumstance or event beyond our control, including\n                without limitation any flood, extraordinary weather conditions, earthquake, or other act of God, fire,\n                war, insurrection, riot, labor dispute, accident, any law, order regulation, direction, action or\n                request of the government, communications, power failure, or equipment or software malfunction.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">9. CONTACT INFORMATION</h3>\n              <p className=\"body-text\">\n                If you have any questions about these Terms, the Site, or the Interface, please get in touch with GMX.io\n                on any of our official channels.\n              </p>\n            </div>\n          </div>\n        </div>\n        <Footer />\n      </div>\n    </SEO>\n  );\n}\n","import React from \"react\";\nimport Footer from \"components/Footer/Footer\";\nimport SEO from \"components/Common/SEO\";\nimport { getPageTitle } from \"lib/legacy\";\nimport \"./TermsAndConditions.css\";\n\nexport default function TermsAndConditions() {\n  return (\n    <SEO title={getPageTitle(\"Terms and Conditions\")}>\n      <div className=\"default-container Page page-layout\">\n        <div>\n          <div className=\"Page-title-section center\">\n            <div className=\"Page-title\">GMX</div>\n            <div className=\"Page-subtitle\">Terms and Conditions</div>\n            <div className=\"Page-description\">Last modified: August 1st, 2022</div>\n          </div>\n          <div className=\"content\">\n            <div className=\"section\">\n              <p className=\"body-text\">\n                Welcome to GMX.io (\"we,\" \"us,\" or \"our\"), the informational resource for GMX Protocol, as defined below.\n              </p>\n              <p className=\"body-text\">\n                GMX.io provides information and resources about the fundamentals of the decentralized non-custodial\n                protocol called the GMX Protocol (the \"GMX Protocol,\" \"Protocol,\" or \"GMX DApp\"). GMX.io is not an\n                available access point to the GMX Protocol.\n              </p>\n              <p className=\"body-text\">\n                These Terms and Conditions and any other documents incorporated herein by reference (collectively, these\n                \"Terms\") to you or the company or other legal entity you represent (\"you\" or \"your\") explains the terms\n                and conditions by which you may access GMX.io (\"the Site\") and app.GMX.io (\"the Interface\"). Please do\n                not use the Site or Interface if you disagree with any of these Terms.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">1. USE OF THE SITE AND THE INTERFACE</h3>\n              <p className=\"body-text\">The GMX.io site is for informational purposes only.</p>\n              <p className=\"body-text\">\n                GMX.io is not part of any transaction on the blockchain networks underlying the GMX Protocol; we do not\n                have possession, custody, or control over any crypto assets appearing on the Interface; and we do not\n                have possession, custody, or control over any user's funds. Further, we do not store, send, or receive\n                any crypto assets. You understand that when you interact with any GMX Protocol smart contracts, you\n                always retain control over your crypto assets. We do not have access to your private keys.\n              </p>\n              <ul className=\"list-style-none\">\n                <li>\n                  <p className=\"body-text\">\n                    1.1. As a condition to accessing or using the Site or Interface, you represent and warrant to GMX.io\n                    the following:\n                  </p>\n                  <ul className=\"list-style-none\">\n                    <li>\n                      <p className=\"body-text\">\n                        1.1.1. If you are an individual person, then you are of legal age in the jurisdiction in which\n                        you reside, and you have the legal capacity to enter into these Terms and be bound by them;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.1.2. If you are an entity, then you must have the legal authority to accept these Terms on\n                        that entity's behalf, in which case \"you\" (except as used in this paragraph) will mean that\n                        entity;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">1.1.3. You are not a U.S. Person;</p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.1.4. You are not a resident, national, or agent of any country to which the United States, the\n                        United Kingdom, or the European Union embargoes goods or imposes similar sanctions\n                        (collectively, \"Restricted Territories\");\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.1.5. You are not subject to economic or trade sanctions administered or enforced by any\n                        governmental authority; or otherwise, you are not a member of any sanctions list or equivalent\n                        maintained by the United States government, the United Kingdom government, the European Union,\n                        or the United Nations, including without limitation the U.S. Office of Foreign Asset Control\n                        Specifically Designated Nationals and Blocked Person List (collectively, \"Sanctions Lists\n                        Persons\");\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.1.6. You do intend to transact with any Restricted Person or Sanctions List Person;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.1.7. You do not, and will not, use VPN software or any other privacy or anonymization tools or\n                        techniques, or other means, to circumvent, or attempt to circumvent, any restrictions that\n                        apply; and\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.1.8. Your access is not (a) prohibited by and does not otherwise violate or assist you in\n                        violating any domestic or foreign law, rule, statute, regulation, by-law, order, protocol, code,\n                        decree, letter, or another directive, requirement, guidance, or guideline, published or in force\n                        that applies to or is otherwise intended to govern or regulate any person, property,\n                        transaction, activity, event or other matter, including any rule, letter, order, judgment,\n                        directive or other requirements, guidance, or guideline issued by any domestic or foreign\n                        federal, provincial or state, municipal, local or other governmental, regulatory, judicial or\n                        administrative authority having jurisdiction over GMX.io or you as otherwise duly enacted,\n                        enforceable by law, the common law or equity (collectively, \"Applicable Laws\"); or (b)\n                        contribute to or facilitate any illegal activity.\n                      </p>\n                    </li>\n                  </ul>\n                </li>\n              </ul>\n              <ul className=\"list-style-none\">\n                <li>\n                  <p className=\"body-text\">\n                    1.2. As a condition to accessing or using the Site or the Interface, you acknowledge, understand,\n                    and agree to the following:\n                  </p>\n                  <ul className=\"list-style-none\">\n                    <li>\n                      <p className=\"body-text\">\n                        1.2.1. From time to time, the Site or the Interface may be inaccessible or inoperable for any\n                        reason, including, but not limited to: (a) equipment malfunctions; (b) periodic maintenance\n                        procedures or repairs that GMX.io or any of its suppliers or contractors may undertake from time\n                        to time; (c) causes beyond GMX.io's control or that GMX.io could not reasonably foresee; (d)\n                        disruptions and temporary or permanent unavailability of underlying blockchain infrastructure;\n                        or (e) unavailability of third-party service providers or external partners for any reason;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.2.2. We reserve the right to disable or modify access to the Site at any time in the event of\n                        any breach of these Terms, including, without limitation, if we reasonably believe any of your\n                        representations and warranties may be untrue or inaccurate, and we will not be liable to you for\n                        any losses or damages you may suffer as a result of or in connection with the Site or the\n                        Interface being inaccessible to you at any time or for any reason;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.2.3. The Interface may evolve, which means third parties may apply changes, replace, or\n                        discontinue (temporarily or permanently) the access at any time in their sole discretion;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.2.4. The pricing information provided on the Site or the Interface does not represent an\n                        offer, a solicitation of an offer, or any advice regarding, or recommendation to enter into, a\n                        transaction with GMX.io;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">1.2.5. GMX.io does not act as a broker or advisor for you;</p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.2.6. You are solely responsible for your use of the Site or the Interface, including all of\n                        your transfers of digital assets;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.2.7. To the fullest not prohibited by Applicable Law, we owe no fiduciary duties or\n                        liabilities to you or any other party, and that to the extent any such duties or liabilities may\n                        exist at law or in equity, you hereby irrevocably disclaim, waive, and eliminate those duties\n                        and liabilities;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.2.8. You are solely responsible for reporting and paying any taxes applicable to your use of\n                        the Interface; and\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        1.2.9. We have no control over, or liability for, the delivery, quality, safety, legality, or\n                        any other aspect of any digital assets that you may transfer to or from a third party, and we\n                        are not responsible for ensuring that an entity with whom you transact completes the transaction\n                        or is authorized to do so. If you experience a problem with any transactions in digital assets\n                        using the Site or the Interface, you bear the entire risk.\n                      </p>\n                    </li>\n                  </ul>\n                </li>\n              </ul>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">2. FEES</h3>\n              <p className=\"body-text\">\n                You are required to pay all fees for transactions involving certain blockchain networks. These fees may\n                include gas costs and all other fees reflected on the Interface at your use, including trading-related\n                fees. GMX.io does not receive fees for any blockchain transactions or using the Site or the Interface.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">3. NO PROFESSIONAL ADVICE OR FIDUCIARY DUTIES</h3>\n              <p className=\"body-text\">\n                Nothing herein constitutes legal, financial, business, or tax advice, and you are strongly advised to\n                consult an advisor(s) before engaging in any activity in connection herewith. All information provided\n                by the Site is for informational purposes only and should not be construed as professional advice. You\n                should not take, or refrain from taking, any action based on any information contained on the Site or\n                any other information that we make available at any time, including, without limitation, blog posts,\n                articles, links to third-party content, discord content, news feeds, tutorials, tweets, and videos. The\n                Terms are not intended to, and do not, create or impose any fiduciary duties on us.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">4. PROPRIETARY RIGHT</h3>\n              <ul className=\"list-style-none\">\n                <li>\n                  <p className=\"body-text\">\n                    4.1. GMX.io own all rights, names, logos, and other marks used on the Site and the Interface,\n                    including, without limitation, any copyrights in and to any content, code, data, or other materials\n                    that you may access or use on or through the Site or the Interface; however, the code for the GMX\n                    Protocol and the Interface (app.GMX.io) deployed on IPFS is open-sourced. Except as expressly set\n                    forth herein, your use of or access to the Site or the Interface does not grant you any ownership or\n                    other rights therein.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    4.2. GMX.io may use and share your comments, bug reports, ideas, or other feedback that you may\n                    provide, including suggestions about how we might improve. You agree that GMX.io is free to use or\n                    not use any feedback we receive from you as we see fit, including copying and sharing such feedback\n                    with third parties, without any obligation to you.\n                  </p>\n                </li>\n              </ul>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">5. MODIFICATION, SUSPENSION, AND TERMINATION</h3>\n              <ul className=\"list-style-none\">\n                <li>\n                  <p className=\"body-text\">\n                    5.1. GMX.io reserve the right, at our sole discretion, from time to time and with or without prior\n                    notice to you, to modify, suspend or disable (temporarily or permanently) the Site or our subdomain\n                    to the Interface, in whole or in part, for any reason whatsoever, including, without limitation.\n                    Upon termination of your access, your right to use the Site or the Interface from our subdomain will\n                    immediately cease. However, it would still be accessible via a third party since we do not host or\n                    own its code. GMX.io will not be liable for any losses suffered by you resulting from any\n                    modification to the Site or the Interface or from any modification, suspension, or termination, for\n                    any reason, of your access to all or any portion of the Site or the Interface.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    5.2. GMX.io may revise these Terms from time to time. We will notify you by updating the date at the\n                    top of the Terms and maintaining a current version. The most current version of the Terms will\n                    always be at https://gmx.io/#/terms-and-conditions. All modifications will be effective when they\n                    are posted. By continuing to access or use the Site or the Interface after those revisions become\n                    effective, you agree to be bound by the revised Terms.\n                  </p>\n                </li>\n              </ul>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">6. RISKS</h3>\n              <ul className=\"list-style-none\">\n                <li>\n                  <p className=\"body-text\">\n                    6.1. The use of technology related to blockchain, smart contracts, and cryptocurrencies, among\n                    others, entails a risk that by accessing transactions, you are assuming. GMX.io does not own or\n                    control any underlying software through which blockchain networks are formed. The software\n                    underlying blockchain networks are open-source so anyone can use, copy, modify, and distribute it.\n                    By using the Interface, you acknowledge and agree:\n                  </p>\n                  <ul className=\"list-style-none\">\n                    <li>\n                      <p className=\"body-text\">\n                        6.1.1. That GMX.io is not responsible for the operation of the open-source software and networks\n                        underlying the Interface;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        6.1.2. That there exists no guarantee of the functionality, security, or availability of that\n                        software and networks; and\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        6.1.3. That the underlying networks are subject to sudden changes in operating rules, such as\n                        those commonly referred to as \"forks,\" which may materially affect the Interface. You are\n                        responsible for securing your private key(s). We do not have access to your private key(s);\n                        losing control of your private key(s) will permanently and irreversibly deny you access to any\n                        blockchain-based network. Neither GMX.io nor any other person or entity will be able to retrieve\n                        or protect your digital assets. If your private key(s) are lost, you will not be able to\n                        transfer your digital assets to any blockchain address or wallet. If this occurs, you will not\n                        be able to realize any value or utility from the digital assets you may hold.\n                      </p>\n                    </li>\n                  </ul>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    6.2. GMX.io is not responsible for the content of any third party, including, but not limited to,\n                    information, materials, products, or services that GMX.io does not own or control. In addition,\n                    third parties may offer promotions related to your access and use of the Interface. GMX.io does not\n                    endorse or assume any responsibility for such resources or promotions. Suppose you access any such\n                    resources or participate in any such promotions. In that case, you do so at your own risk and\n                    understand that these Terms do not apply to your dealings or relationships with any third parties.\n                    You expressly relieve GMX.io of all liability arising from using such resources or participating in\n                    such promotions.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    6.3. You understand that the Arbitrum and Avalanche blockchain remains under development, which\n                    creates technological and security risks when using the Interface, in addition to uncertainty\n                    relating to digital assets and transactions therein. You acknowledge that the cost of transacting on\n                    the Arbitrum and Avalanche blockchain is variable and may increase at any time, causing an impact on\n                    any activities taking place on these blockchains, which may result in price fluctuations or\n                    increased costs when using the Interface.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    6.4. Transactions entered into in connection with the Interface are irreversible and final, and\n                    there are no refunds. You acknowledge and agree that you will access and use the Interface at your\n                    own risk.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    6.5. We must comply with Applicable Law, which may require us to, upon request by government\n                    agencies, take certain actions or provide information that may not be in your best interests.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    6.6. You hereby assume and agree that GMX.io will have no responsibility or liability for the risks\n                    in Section 9. You hereby irrevocably waive, release and discharge all claims, whether known or\n                    unknown to you, against GMX.io, its affiliates, and their respective shareholders, members,\n                    directors, officers, employees, agents, representatives, suppliers, and contractors related to any\n                    of the risks set forth in this Section 6.\n                  </p>\n                </li>\n              </ul>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">7. PROHIBITED USES</h3>\n              <ul className=\"list-style-none\">\n                <li>\n                  <p className=\"body-text\">\n                    7.1 You agree not to engage in the prohibited uses set forth below. The specific activities set\n                    forth below are representative but not exhaustive. By using the Site or the Interface, you confirm\n                    that you will not do any of the following:\n                  </p>\n                  <ul className=\"list-style-none\">\n                    <li>\n                      <p className=\"body-text\">\n                        7.1.1. Promote or facilitate illegal activities, including but not limited to money laundering,\n                        terrorist financing, tax evasion, buying or selling illegal drugs, contraband, counterfeit\n                        goods, or illegal weapons;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        7.1.2. Engage in transactions involving items that infringe or violate any copyright, trademark,\n                        right of publicity, privacy, or any other proprietary right of GMX.io;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        7.1.3. Engage in improper or abusive trading practices, including but not limited to (a) any\n                        fraudulent act or scheme to defraud, deceive, trick, or mislead; (b) trading ahead of another\n                        user of the Site or the Interface or front-running; (c) fraudulent trading; (d) accommodation\n                        trading; (e) fictitious transactions; (f) pre-arranged or non-competitive transactions; or (g)\n                        cornering;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        7.1.4. Uploading or transmitting viruses, worms, Trojan horses, time bombs, cancelbots, spiders,\n                        malware, or any other type of malicious code that will or may be used in any way that will\n                        affect the functionality or operation of the Site or the Interface;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        7.1.5. Use the Site or Interface in any way that is, in our sole discretion, libelous,\n                        defamatory, profane, obscene, pornographic, sexually explicit, indecent, lewd, vulgar,\n                        suggestive, harassing, stalking, hateful, threatening, offensive, discriminatory, bigoted,\n                        abusive, inflammatory, fraudulent, deceptive, or otherwise objectionable or likely or intended\n                        to incite, threaten, facilitate, promote, or encourage hate, racial intolerance, or violent acts\n                        against others;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        7.1.6. Harass, abuse, or harm another person or entity, including GMX.io's collaborator and\n                        service providers;\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        7.1.7. Impersonate another user of the Site or the Interface or otherwise misrepresent yourself;\n                        or\n                      </p>\n                    </li>\n                    <li>\n                      <p className=\"body-text\">\n                        7.1.8. Engage or attempt to engage or encourage, induce or assist any third party, or yourself\n                        attempt, to engage in any of the activities prohibited under this Section 4 or any other\n                        provision of these Terms.\n                      </p>\n                    </li>\n                  </ul>\n                </li>\n              </ul>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">8. DISCLOSURES; DISCLAIMERS</h3>\n              <p className=\"body-text\">\n                GMX.io is an informational site for the GMX Protocol. GMX.io does not operate an exchange platform or\n                offer trade execution or clearing services and has no oversight, involvement, or control concerning your\n                transactions using the Interface. All transactions between users of the Interface are executed\n                peer-to-peer directly between the users' blockchain addresses through a third-party developed\n                open-source smart contract.\n              </p>\n              <p className=\"body-text\">\n                You are responsible for complying with all Applicable Laws that govern your Perpetual Contracts. As a\n                result of restrictions under the Commodity Exchange Act and the regulations promulgated thereunder by\n                the U.S. Commodity Futures Trading Commission (\"CFTC\"), no U.S. Person may enter into Perpetual\n                Contracts using the Interface.\n              </p>\n              <p className=\"body-text\">\n                You understand that GMX.io is not registered or licensed by any regulatory agency or authority. No such\n                agency or authority has reviewed or approved the use of the Site or the Interface.\n              </p>\n              <p className=\"body-text\">\n                You agree that the Site and the Interface are provided on an \"AS IS\" and \"AS AVAILABLE\" basis. GMX.io\n                makes no guarantees of any kind or connection with the Site or the Interface.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">9. LIMITATION OF LIABILITY</h3>\n              <p className=\"body-text\">\n                In no event shall GMX.io, its affiliates, its suppliers and contractors, and its affiliates', suppliers'\n                and contractors' respective stockholders, members, directors, officers, managers, employees, attorneys,\n                agents, representatives, suppliers, and contractors shall be liable for any direct, indirect,\n                incidental, special, punitive, consequential or similar damages or liabilities whatsoever (including,\n                without limitation, damages for loss of fiat, assets, data, information, revenue, opportunities, use,\n                goodwill, profits or other business or financial benefit) arising out of or in connection with the Site\n                or the Interface, or other item provided by or on behalf of GMX.io, whether under contract, tort\n                (including negligence), civil liability, statute, strict liability, breach of warranties, or under any\n                other theory of liability, and whether or not we have been advised of, knew of or should have known of\n                the possibility of such damages and notwithstanding any failure of the essential purpose of these Terms\n                or any limited remedy hereunder nor is GMX.io in any way responsible for the execution or settlement of\n                transactions between users of the Interface.\n              </p>\n              <p className=\"body-text\">\n                In no event shall GMX.io's aggregate liability arising out of or in connection with the Site or\n                Interface exceed one thousand Singapore Dollars (1,000.00 SGD).\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">10. INDEMNIFICATION</h3>\n              <p className=\"body-text\">\n                You will defend, indemnify, and hold harmless GMX.io, its affiliates, members, member, managers,\n                employees, attorneys, representatives, suppliers, and contractors from any claim, demand, lawsuit,\n                action, proceeding, investigation, liability, damage, loss, cost or expense, including without\n                limitation reasonable attorneys' fees, arising out of or relating to (a) your use of or conduct in\n                connection with the Site or the Interface (b) your violation of these Terms; or (c) your misuse of the\n                Site or the Interface, or any smart contract and/or script related thereto; (d) your violation of any\n                laws, rules, regulations, codes, statutes, ordinances, or orders of any governmental or\n                quasi-governmental authorities; (e) your violation of the rights of any third party, including any\n                intellectual property right, publicity, confidentiality, property, or privacy right; (f) your use of a\n                third-party product, service, and/or website; or (g) any misrepresentation made by you. We reserve the\n                right to assume, at your expense, the exclusive defense, and control of any matter subject to\n                indemnification by you. You agree to cooperate with our defense of any claim. You will not, in any\n                event, settle any claim without.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">11. DISPUTE RESOLUTION & ARBITRATION</h3>\n              <p className=\"body-text\">\n                GMX.io will use its best efforts to resolve potential disputes through informal, good faith\n                negotiations. If a potential dispute arises, you must contact us by sending a written notice of your\n                claim (\"Notice\") to GMX.io on any of our official channels. The notice must (a) describe the nature and\n                basis of the claim and (b) set forth the specific relief sought. Our notice to you will be similar in\n                form to that described above. If you and GMX.io cannot reach an agreement to resolve the claim within\n                sixty (60) days of your email, then you and GMX.io agree to resolve the potential dispute according to\n                the process set forth below.\n              </p>\n              <p className=\"body-text\">\n                Any claim or controversy arising out of or relating to the Site, the Interface, or these Terms, or any\n                other acts or omissions for which you may contend that we are liable, including (but not limited to) any\n                claim or controversy as to arbitrability (\"Dispute\"), shall be finally and exclusively settled by\n                arbitration under the Corte Civil y Mercantil de Arbitraje (CIMA). You understand that you are required\n                to resolve all Disputes by binding arbitration. The arbitration shall be confidential before a single\n                arbitrator, who shall be selected pursuant to the CIMA rules. The arbitration will be held in Madrid,\n                Spain, unless you and we both agree to hold it elsewhere. Unless we agree otherwise, the arbitrator may\n                not consolidate your claims with those of any other party. Any judgment on the award rendered by the\n                arbitrator may be entered in any court of competent jurisdiction.\n              </p>\n              <p className=\"body-text\">\n                Any claim arising out of or related to these Terms or the Site or the Interface must be filed within one\n                year after such claim arose; otherwise, the claim is permanently barred, which means that you and GMX.io\n                will not have the right to assert the claim.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">12. GOVERNING LAW</h3>\n              <p className=\"body-text\">\n                The interpretation and enforcement of these Terms, and any dispute related to these Terms, the Site, or\n                the Interface, will be governed by and construed and enforced under the laws of the Bahamas, as\n                applicable.\n              </p>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">13. GENERAL INFORMATION</h3>\n              <ul className=\"list-style-none\">\n                <li>\n                  <p className=\"body-text\">\n                    13.1. Any right or remedy of GMX.io set forth in these Terms is in addition to, and not in lieu of,\n                    any other right or remedy whether described in these Terms, under Applicable Law, at law, or in\n                    equity. The failure or delay of GMX.io in exercising any right, power, or privilege under these\n                    Terms shall not operate as a waiver thereof.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    13.2. The following sections of these Terms will survive any termination of your access to the Site\n                    or the Interface, regardless of the reasons for its expiration or termination, in addition to any\n                    other provision which by law or by its nature should survive: Sections 3 through 12.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    13.3. The invalidity or unenforceability of any of these Terms shall not affect the validity or\n                    enforceability of any other of these Terms, all of which shall remain in full force and effect.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    13.4. GMX.io will have no responsibility or liability for any failure or delay in performance of the\n                    Site or the Interface, or any loss or damage that you may incur, due to any circumstance or event\n                    beyond our control, including without limitation any flood, extraordinary weather conditions,\n                    earthquake, or other act of God, fire, war, insurrection, riot, labor dispute, accident, any law,\n                    order regulation, direction, action or request of the government, communications, power failure, or\n                    equipment or software malfunction.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    13.5. You may not assign or transfer any right to use the Site, the Interface, or any of your rights\n                    or obligations under these Terms, without our express prior written consent, including by operation\n                    of law or in connection with any change of control. We may assign or transfer any or all of our\n                    rights or obligations under these Terms, in whole or part, without notice or obtaining your consent\n                    or approval.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    13.6. These Terms contain the entire agreement between you and GMX.io and supersede all prior and\n                    contemporaneous understandings between the parties regarding the Interface and the Site or the\n                    Interface.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    13.7. In the event of any conflict between these Terms and any other agreement you may have with us,\n                    these Terms will control unless the other agreement specifically identifies these Terms and declares\n                    that the other agreement supersedes these Terms.\n                  </p>\n                </li>\n                <li>\n                  <p className=\"body-text\">\n                    13.8. You agree that, except as otherwise expressly provided in these Terms, there shall be no\n                    third-party beneficiaries to the Terms other than the Indemnified Parties.\n                  </p>\n                </li>\n              </ul>\n            </div>\n            <div className=\"section\">\n              <h3 className=\"body-title\">CONTACT INFORMATION</h3>\n              <p className=\"body-text\">\n                If you have any questions about these Terms, the Site, or the Interface, please get in touch with GMX.io\n                on any of our official channels.\n              </p>\n            </div>\n          </div>\n        </div>\n        <Footer />\n      </div>\n    </SEO>\n  );\n}\n","import Davatar from \"@davatar/react\";\nimport { Menu } from \"@headlessui/react\";\nimport { t, Trans } from \"@lingui/macro\";\nimport { ETH_MAINNET } from \"config/chains\";\nimport copy from \"img/ic_copy_16.svg\";\nimport externalLink from \"img/ic_new_link_16.svg\";\nimport disconnect from \"img/ic_sign_out_16.svg\";\nimport { helperToast } from \"lib/helperToast\";\nimport { shortenAddress, useENS } from \"lib/legacy\";\nimport { useJsonRpcProvider } from \"lib/rpc\";\nimport { FaChevronDown } from \"react-icons/fa\";\nimport { createBreakpoint, useCopyToClipboard } from \"react-use\";\nimport \"./AddressDropdown.css\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\n\ntype Props = {\n  account: string;\n  accountUrl: string;\n  disconnectAccountAndCloseSettings: () => void;\n};\n\nfunction AddressDropdown({ account, accountUrl, disconnectAccountAndCloseSettings }: Props) {\n  const useBreakpoint = createBreakpoint({ L: 600, M: 550, S: 400 });\n  const breakpoint = useBreakpoint();\n  const [, copyToClipboard] = useCopyToClipboard();\n  const { ensName } = useENS(account);\n  const { provider: ethereumProvider } = useJsonRpcProvider(ETH_MAINNET);\n\n  return (\n    <Menu>\n      <Menu.Button as=\"div\">\n        <button className=\"App-cta small transparent address-btn\">\n          <div className=\"user-avatar\">\n            {ethereumProvider && <Davatar size={20} address={account} provider={ethereumProvider} />}\n          </div>\n          <span className=\"user-address\">{ensName || shortenAddress(account, breakpoint === \"S\" ? 9 : 13)}</span>\n          <FaChevronDown />\n        </button>\n      </Menu.Button>\n      <div>\n        <Menu.Items as=\"div\" className=\"menu-items\">\n          <Menu.Item>\n            <div\n              className=\"menu-item\"\n              onClick={() => {\n                copyToClipboard(account);\n                helperToast.success(t`Address copied to your clipboard`);\n              }}\n            >\n              <img src={copy} alt=\"Copy user address\" />\n              <p>\n                <Trans>Copy Address</Trans>\n              </p>\n            </div>\n          </Menu.Item>\n          <Menu.Item>\n            <ExternalLink href={accountUrl} className=\"menu-item\">\n              <img src={externalLink} alt=\"Open address in explorer\" />\n              <p>\n                <Trans>View in Explorer</Trans>\n              </p>\n            </ExternalLink>\n          </Menu.Item>\n          <Menu.Item>\n            <div className=\"menu-item\" onClick={disconnectAccountAndCloseSettings}>\n              <img src={disconnect} alt=\"Disconnect the wallet\" />\n              <p>\n                <Trans>Disconnect</Trans>\n              </p>\n            </div>\n          </Menu.Item>\n        </Menu.Items>\n      </div>\n    </Menu>\n  );\n}\n\nexport default AddressDropdown;\n","import { ReactNode } from \"react\";\nimport \"./ConnectWalletButton.scss\";\n\ntype Props = {\n  imgSrc: string;\n  children: ReactNode;\n  onClick: () => void;\n  className?: string;\n};\n\nexport default function ConnectWalletButton({ imgSrc, children, onClick, className }: Props) {\n  return (\n    <button className=\"connect-wallet-btn\" onClick={onClick}>\n      {imgSrc && <img className=\"btn-icon\" src={imgSrc} alt=\"Connect Wallet\" />}\n      <span className=\"btn-label\">{children}</span>\n    </button>\n  );\n}\n","import Portal from \"../Common/Portal\";\nimport Modal from \"./Modal\";\n\nexport default function ModalWithPortal(props) {\n  return (\n    <Portal>\n      <Modal {...props} />\n    </Portal>\n  );\n}\n","import { i18n } from \"@lingui/core\";\nimport { en, es, zh, ko, ru, ja, fr, de } from \"make-plural/plurals\";\nimport { LANGUAGE_LOCALSTORAGE_KEY } from \"config/localStorage\";\nimport { isDevelopment } from \"config/env\";\n\n// uses BCP-47 codes from https://unicode-org.github.io/cldr-staging/charts/latest/supplemental/language_plural_rules.html\nexport const locales = {\n  en: \"English\",\n  es: \"Spanish\",\n  zh: \"Chinese\",\n  ko: \"Korean\",\n  ru: \"Russian\",\n  ja: \"Japanese\",\n  fr: \"French\",\n  de: \"German\",\n  ...(isDevelopment() && { pseudo: \"Test\" }),\n};\n\nexport const defaultLocale = \"en\";\n\ni18n.loadLocaleData({\n  en: { plurals: en },\n  es: { plurals: es },\n  zh: { plurals: zh },\n  ko: { plurals: ko },\n  ru: { plurals: ru },\n  ja: { plurals: ja },\n  fr: { plurals: fr },\n  de: { plurals: de },\n  ...(isDevelopment() && { pseudo: { plurals: en } }),\n});\n\nexport function isTestLanguage(locale: string) {\n  return locale === \"pseudo\";\n}\n\nexport async function dynamicActivate(locale: string) {\n  const { messages } = await import(`@lingui/loader!locales/${locale}/messages.po`);\n  if (!isTestLanguage(locale)) {\n    localStorage.setItem(LANGUAGE_LOCALSTORAGE_KEY, locale);\n  }\n  i18n.load(locale, messages);\n  i18n.activate(locale);\n}\n","import { dynamicActivate, isTestLanguage, locales } from \"lib/i18n\";\nimport { importImage } from \"lib/legacy\";\nimport cx from \"classnames\";\nimport { LANGUAGE_LOCALSTORAGE_KEY } from \"config/localStorage\";\nimport checkedIcon from \"img/ic_checked.svg\";\n\nexport default function LanguageModalContent({ currentLanguage }) {\n  return Object.keys(locales).map((item) => {\n    const image = !isTestLanguage(item) && importImage(`flag_${item}.svg`);\n    return (\n      <div\n        key={item}\n        className={cx(\"network-dropdown-menu-item  menu-item language-modal-item\", {\n          active: currentLanguage.current === item,\n        })}\n        onClick={() => {\n          if (!isTestLanguage(item)) {\n            localStorage.setItem(LANGUAGE_LOCALSTORAGE_KEY, item);\n          }\n          dynamicActivate(item);\n        }}\n      >\n        <div className=\"menu-item-group\">\n          <div className=\"menu-item-icon\">\n            {isTestLanguage(item) ? \"\" : <img className=\"network-dropdown-icon\" src={image} alt={locales[item]} />}\n          </div>\n          <span className=\"network-dropdown-item-label menu-item-label\">{locales[item]}</span>\n        </div>\n        <div className=\"network-dropdown-menu-item-img\">\n          {currentLanguage.current === item && <img src={checkedIcon} alt={locales[item]} />}\n        </div>\n      </div>\n    );\n  });\n}\n","import React, { useRef, useState } from \"react\";\nimport { Menu } from \"@headlessui/react\";\nimport ModalWithPortal from \"../Modal/ModalWithPortal\";\nimport { t, Trans } from \"@lingui/macro\";\nimport cx from \"classnames\";\nimport { HiDotsVertical } from \"react-icons/hi\";\nimport \"./NetworkDropdown.css\";\nimport language24Icon from \"img/ic_language24.svg\";\nimport settingsIcon from \"img/ic_settings_16.svg\";\nimport { defaultLocale } from \"lib/i18n\";\nimport { LANGUAGE_LOCALSTORAGE_KEY } from \"config/localStorage\";\nimport LanguageModalContent from \"./LanguageModalContent\";\nimport { useChainId } from \"lib/chains\";\nimport { getIcon } from \"config/icons\";\n\nconst LANGUAGE_MODAL_KEY: string = \"LANGUAGE\";\nconst NETWORK_MODAL_KEY: string = \"NETWORK\";\n\nexport default function NetworkDropdown(props) {\n  const currentLanguage = useRef(localStorage.getItem(LANGUAGE_LOCALSTORAGE_KEY) || defaultLocale);\n  const [activeModal, setActiveModal] = useState<string | null>(null);\n\n  function getModalContent(modalName) {\n    switch (modalName) {\n      case LANGUAGE_MODAL_KEY:\n        return <LanguageModalContent currentLanguage={currentLanguage} />;\n      case NETWORK_MODAL_KEY:\n        return (\n          <NetworkModalContent\n            setActiveModal={setActiveModal}\n            networkOptions={props.networkOptions}\n            onNetworkSelect={props.onNetworkSelect}\n            selectorLabel={props.selectorLabel}\n            openSettings={props.openSettings}\n          />\n        );\n      default:\n        return;\n    }\n  }\n\n  function getModalProps(modalName) {\n    switch (modalName) {\n      case LANGUAGE_MODAL_KEY:\n        return {\n          className: \"language-popup\",\n          isVisible: activeModal === LANGUAGE_MODAL_KEY,\n          setIsVisible: () => setActiveModal(null),\n          label: t`Select Language`,\n        };\n      case NETWORK_MODAL_KEY:\n        return {\n          className: \"network-popup\",\n          isVisible: activeModal === NETWORK_MODAL_KEY,\n          setIsVisible: () => setActiveModal(null),\n          label: t`Networks and Settings`,\n        };\n      default:\n        return {};\n    }\n  }\n\n  return (\n    <>\n      {props.small ? (\n        <div className=\"App-header-network\" onClick={() => setActiveModal(NETWORK_MODAL_KEY)}>\n          <div className=\"network-dropdown\">\n            <NavIcons selectorLabel={props.selectorLabel} />\n          </div>\n        </div>\n      ) : (\n        <DesktopDropdown\n          currentLanguage={currentLanguage}\n          activeModal={activeModal}\n          setActiveModal={setActiveModal}\n          {...props}\n        />\n      )}\n      <ModalWithPortal {...getModalProps(activeModal)}>{getModalContent(activeModal)}</ModalWithPortal>\n    </>\n  );\n}\nfunction NavIcons({ selectorLabel }) {\n  const { chainId } = useChainId();\n  const icon = getIcon(chainId, \"network\");\n\n  return (\n    <>\n      <button className=\"transparent\">\n        <img className=\"network-dropdown-icon\" src={icon} alt={selectorLabel} />\n      </button>\n      <div className=\"network-dropdown-seperator\" />\n      <button className=\"transparent\">\n        <HiDotsVertical color=\"white\" size={20} />\n      </button>\n    </>\n  );\n}\n\nfunction DesktopDropdown({ setActiveModal, selectorLabel, networkOptions, onNetworkSelect, openSettings }) {\n  return (\n    <div className=\"App-header-network\">\n      <Menu>\n        <Menu.Button as=\"div\" className=\"network-dropdown\">\n          <NavIcons selectorLabel={selectorLabel} />\n        </Menu.Button>\n        <Menu.Items as=\"div\" className=\"menu-items network-dropdown-items\">\n          <div className=\"dropdown-label\">\n            <Trans>Networks</Trans>\n          </div>\n          <div className=\"network-dropdown-list\">\n            <NetworkMenuItems\n              networkOptions={networkOptions}\n              selectorLabel={selectorLabel}\n              onNetworkSelect={onNetworkSelect}\n            />\n          </div>\n          <div className=\"network-dropdown-divider\" />\n          <Menu.Item>\n            <div className=\"network-dropdown-menu-item menu-item\" onClick={openSettings}>\n              <div className=\"menu-item-group\">\n                <div className=\"menu-item-icon\">\n                  <img className=\"network-dropdown-icon\" src={settingsIcon} alt=\"\" />\n                </div>\n                <span className=\"network-dropdown-item-label\">\n                  <Trans>Settings</Trans>\n                </span>\n              </div>\n            </div>\n          </Menu.Item>\n          <Menu.Item>\n            <div\n              className=\"network-dropdown-menu-item menu-item last-dropdown-menu\"\n              onClick={() => setActiveModal(LANGUAGE_MODAL_KEY)}\n            >\n              <div className=\"menu-item-group\">\n                <div className=\"menu-item-icon\">\n                  <img className=\"network-dropdown-icon\" src={language24Icon} alt=\"\" />\n                </div>\n                <span className=\"network-dropdown-item-label\">\n                  <Trans>Language</Trans>\n                </span>\n              </div>\n            </div>\n          </Menu.Item>\n        </Menu.Items>\n      </Menu>\n    </div>\n  );\n}\n\nfunction NetworkMenuItems({ networkOptions, selectorLabel, onNetworkSelect }) {\n  async function handleNetworkSelect(option) {\n    await onNetworkSelect(option);\n  }\n  return networkOptions.map((network) => {\n    return (\n      <Menu.Item key={network.value}>\n        <div\n          className=\"network-dropdown-menu-item menu-item\"\n          onClick={() => handleNetworkSelect({ value: network.value })}\n        >\n          <div className=\"menu-item-group\">\n            <div className=\"menu-item-icon\">\n              <img className=\"network-dropdown-icon\" src={network.icon} alt={network.label} />\n            </div>\n            <span className=\"network-dropdown-item-label\">{network.label}</span>\n          </div>\n          <div className=\"network-dropdown-menu-item-img\">\n            <div className={cx(\"active-dot\", { [selectorLabel]: selectorLabel === network.label })} />\n          </div>\n        </div>\n      </Menu.Item>\n    );\n  });\n}\n\nfunction NetworkModalContent({ networkOptions, onNetworkSelect, selectorLabel, setActiveModal, openSettings }) {\n  async function handleNetworkSelect(option) {\n    await onNetworkSelect(option);\n  }\n  return (\n    <div className=\"network-dropdown-items\">\n      <div className=\"network-dropdown-list\">\n        <span className=\"network-dropdown-label\">\n          <Trans>Networks</Trans>\n        </span>\n\n        {networkOptions.map((network) => {\n          return (\n            <div\n              className=\"network-option\"\n              onClick={() => handleNetworkSelect({ value: network.value })}\n              key={network.value}\n            >\n              <div className=\"menu-item-group\">\n                <img src={network.icon} alt={network.label} />\n                <span>{network.label}</span>\n              </div>\n              <div className={cx(\"active-dot\", { [selectorLabel]: selectorLabel === network.label })} />\n            </div>\n          );\n        })}\n        <span className=\"network-dropdown-label more-options\">\n          <Trans>More Options</Trans>\n        </span>\n        <div\n          className=\"network-option\"\n          onClick={() => {\n            setActiveModal(LANGUAGE_MODAL_KEY);\n          }}\n        >\n          <div className=\"menu-item-group\">\n            <img className=\"network-option-img\" src={language24Icon} alt=\"Select Language\" />\n            <span className=\"network-option-img-label\">Language</span>\n          </div>\n        </div>\n        <div\n          className=\"network-option\"\n          onClick={() => {\n            openSettings();\n            setActiveModal(null);\n          }}\n        >\n          <div className=\"menu-item-group\">\n            <img className=\"network-option-img\" src={settingsIcon} alt=\"\" />\n            <span className=\"network-option-img-label\">\n              <Trans>Settings</Trans>\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useRef, useState } from \"react\";\nimport ModalWithPortal from \"../Modal/ModalWithPortal\";\nimport { t } from \"@lingui/macro\";\nimport cx from \"classnames\";\nimport \"./NetworkDropdown.css\";\nimport language24Icon from \"img/ic_language24.svg\";\nimport { isHomeSite } from \"lib/legacy\";\nimport { defaultLocale } from \"lib/i18n\";\nimport { LANGUAGE_LOCALSTORAGE_KEY } from \"config/localStorage\";\nimport LanguageModalContent from \"./LanguageModalContent\";\n\nexport default function LanguagePopupHome() {\n  const currentLanguage = useRef(localStorage.getItem(LANGUAGE_LOCALSTORAGE_KEY) || defaultLocale);\n  const [isLanguageModalOpen, setIsLanguageModalOpen] = useState(false);\n\n  return (\n    <>\n      <div className=\"App-header-network App-header-language\" onClick={() => setIsLanguageModalOpen(true)}>\n        <div className={cx(\"network-dropdown\", { \"homepage-header\": isHomeSite() })}>\n          <button className=\"transparent\">\n            <img className=\"network-dropdown-icon\" src={language24Icon} alt=\"Select Language\" />\n          </button>\n        </div>\n      </div>\n\n      <ModalWithPortal\n        className=\"language-popup\"\n        isVisible={isLanguageModalOpen}\n        setIsVisible={setIsLanguageModalOpen}\n        label={t`Select Language`}\n      >\n        <LanguageModalContent currentLanguage={currentLanguage} />\n      </ModalWithPortal>\n    </>\n  );\n}\n","import { Menu } from \"@headlessui/react\";\nimport { HeaderLink } from \"components/Header/HeaderLink\";\nimport { ReactNode } from \"react\";\n\nimport { getIcon } from \"config/icons\";\nimport \"./TradeDropdown.scss\";\n\ntype Props = {\n  redirectPopupTimestamp: number;\n  showRedirectModal: (to: string) => void;\n  buttonLabel: ReactNode;\n};\n\nexport function TradeDropdown(p: Props) {\n  const { redirectPopupTimestamp, showRedirectModal, buttonLabel } = p;\n\n  return (\n    <div className=\"TradeDropdown-root\">\n      <Menu>\n        <Menu.Button as=\"div\">\n          <div className=\"TradeDropdown-button default-btn\">\n            <span>{buttonLabel}</span>\n          </div>\n        </Menu.Button>\n\n        <Menu.Items as=\"div\" className=\"TradeDropdown-options  menu-items\">\n          <Menu.Item>\n            <HeaderLink\n              className=\"TradeDropdown-option\"\n              to=\"/trade\"\n              redirectPopupTimestamp={redirectPopupTimestamp}\n              showRedirectModal={showRedirectModal}\n            >\n              <img src={getIcon(\"common\", \"gmxOutline\")} alt=\"GMX V1\" className=\"TradeDropdown-option-icon\" />\n              <div className=\"TradeDropdown-option-label\">GMX V1</div>\n            </HeaderLink>\n          </Menu.Item>\n\n          <Menu.Item>\n            <HeaderLink\n              className=\"TradeDropdown-option\"\n              to=\"/v2\"\n              redirectPopupTimestamp={redirectPopupTimestamp}\n              showRedirectModal={showRedirectModal}\n            >\n              <img src={getIcon(\"common\", \"gmxOutline\")} alt=\"GMX V2\" className=\"TradeDropdown-option-icon\" />\n              <div className=\"TradeDropdown-option-label\">GMX V2</div>\n            </HeaderLink>\n          </Menu.Item>\n        </Menu.Items>\n      </Menu>\n    </div>\n  );\n}\n","import { useWeb3React } from \"@web3-react/core\";\nimport AddressDropdown from \"../AddressDropdown/AddressDropdown\";\nimport ConnectWalletButton from \"../Common/ConnectWalletButton\";\nimport React, { useCallback, useEffect } from \"react\";\nimport connectWalletImg from \"img/ic_wallet_24.svg\";\n\nimport \"./Header.css\";\nimport { isHomeSite, getAccountUrl } from \"lib/legacy\";\nimport cx from \"classnames\";\nimport { Trans } from \"@lingui/macro\";\nimport NetworkDropdown from \"../NetworkDropdown/NetworkDropdown\";\nimport LanguagePopupHome from \"../NetworkDropdown/LanguagePopupHome\";\nimport { ARBITRUM, ARBITRUM_TESTNET, AVALANCHE, AVALANCHE_FUJI, getChainName } from \"config/chains\";\nimport { switchNetwork } from \"lib/wallets\";\nimport { useChainId } from \"lib/chains\";\nimport { isDevelopment } from \"config/env\";\nimport { getIcon } from \"config/icons\";\nimport { TradeDropdown } from \"components/TradeDropdown/TradeDropdown\";\n\ntype Props = {\n  openSettings: () => void;\n  small?: boolean;\n  setWalletModalVisible: (visible: boolean) => void;\n  disconnectAccountAndCloseSettings: () => void;\n  redirectPopupTimestamp: number;\n  showRedirectModal: (to: string) => void;\n};\n\nconst NETWORK_OPTIONS = [\n  {\n    label: getChainName(ARBITRUM),\n    value: ARBITRUM,\n    icon: getIcon(ARBITRUM, \"network\"),\n    color: \"#264f79\",\n  },\n  {\n    label: getChainName(AVALANCHE),\n    value: AVALANCHE,\n    icon: getIcon(AVALANCHE, \"network\"),\n    color: \"#E841424D\",\n  },\n];\n\nif (isDevelopment()) {\n  NETWORK_OPTIONS.push({\n    label: getChainName(ARBITRUM_TESTNET),\n    value: ARBITRUM_TESTNET,\n    icon: getIcon(ARBITRUM_TESTNET, \"network\"),\n    color: \"#264f79\",\n  });\n  NETWORK_OPTIONS.push({\n    label: getChainName(AVALANCHE_FUJI),\n    value: AVALANCHE_FUJI,\n    icon: getIcon(AVALANCHE_FUJI, \"network\"),\n    color: \"#E841424D\",\n  });\n}\n\nexport function AppHeaderUser({\n  openSettings,\n  small,\n  setWalletModalVisible,\n  disconnectAccountAndCloseSettings,\n  redirectPopupTimestamp,\n  showRedirectModal,\n}: Props) {\n  const { chainId } = useChainId();\n  const { active, account } = useWeb3React();\n  const showConnectionOptions = !isHomeSite();\n\n  useEffect(() => {\n    if (active) {\n      setWalletModalVisible(false);\n    }\n  }, [active, setWalletModalVisible]);\n\n  const onNetworkSelect = useCallback(\n    (option) => {\n      if (option.value === chainId) {\n        return;\n      }\n      return switchNetwork(option.value, active);\n    },\n    [chainId, active]\n  );\n\n  const selectorLabel = getChainName(chainId);\n\n  if (!active || !account) {\n    return (\n      <div className=\"App-header-user\">\n        <div className={cx(\"App-header-trade-link\", { \"homepage-header\": isHomeSite() })}>\n          <TradeDropdown\n            redirectPopupTimestamp={redirectPopupTimestamp}\n            showRedirectModal={showRedirectModal}\n            buttonLabel={isHomeSite() ? <Trans>Launch App</Trans> : <Trans>Trade</Trans>}\n          />\n        </div>\n\n        {showConnectionOptions ? (\n          <>\n            <ConnectWalletButton onClick={() => setWalletModalVisible(true)} imgSrc={connectWalletImg}>\n              {small ? <Trans>Connect</Trans> : <Trans>Connect Wallet</Trans>}\n            </ConnectWalletButton>\n            <NetworkDropdown\n              small={small}\n              networkOptions={NETWORK_OPTIONS}\n              selectorLabel={selectorLabel}\n              onNetworkSelect={onNetworkSelect}\n              openSettings={openSettings}\n            />\n          </>\n        ) : (\n          <LanguagePopupHome />\n        )}\n      </div>\n    );\n  }\n\n  const accountUrl = getAccountUrl(chainId, account);\n\n  return (\n    <div className=\"App-header-user\">\n      <div className={cx(\"App-header-trade-link\")}>\n        <TradeDropdown\n          redirectPopupTimestamp={redirectPopupTimestamp}\n          showRedirectModal={showRedirectModal}\n          buttonLabel={isHomeSite() ? <Trans>Launch App</Trans> : <Trans>Trade</Trans>}\n        />\n      </div>\n\n      {showConnectionOptions ? (\n        <>\n          <div className=\"App-header-user-address\">\n            <AddressDropdown\n              account={account}\n              accountUrl={accountUrl}\n              disconnectAccountAndCloseSettings={disconnectAccountAndCloseSettings}\n            />\n          </div>\n          <NetworkDropdown\n            small={small}\n            networkOptions={NETWORK_OPTIONS}\n            selectorLabel={selectorLabel}\n            onNetworkSelect={onNetworkSelect}\n            openSettings={openSettings}\n          />\n        </>\n      ) : (\n        <LanguagePopupHome />\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport { FiX } from \"react-icons/fi\";\nimport { Trans } from \"@lingui/macro\";\nimport { Link } from \"react-router-dom\";\n\nimport { HeaderLink } from \"./HeaderLink\";\nimport \"./Header.css\";\nimport { isHomeSite } from \"lib/legacy\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport logoImg from \"img/logo_GMX.svg\";\n\ntype Props = {\n  small?: boolean;\n  clickCloseIcon?: () => void;\n  openSettings?: () => void;\n  redirectPopupTimestamp: number;\n  showRedirectModal: (to: string) => void;\n};\n\nexport function AppHeaderLinks({\n  small,\n  openSettings,\n  clickCloseIcon,\n  redirectPopupTimestamp,\n  showRedirectModal,\n}: Props) {\n  return (\n    <div className=\"App-header-links\">\n      {small && (\n        <div className=\"App-header-links-header\">\n          <Link className=\"App-header-link-main\" to=\"/\">\n            <img src={logoImg} alt=\"GMX Logo\" />\n          </Link>\n          <div\n            className=\"App-header-menu-icon-block mobile-cross-menu\"\n            onClick={() => clickCloseIcon && clickCloseIcon()}\n          >\n            <FiX className=\"App-header-menu-icon\" />\n          </div>\n        </div>\n      )}\n      <div className=\"App-header-link-container\">\n        <HeaderLink\n          to=\"/dashboard\"\n          redirectPopupTimestamp={redirectPopupTimestamp}\n          showRedirectModal={showRedirectModal}\n        >\n          <Trans>Dashboard</Trans>\n        </HeaderLink>\n      </div>\n      <div className=\"App-header-link-container\">\n        <HeaderLink to=\"/earn\" redirectPopupTimestamp={redirectPopupTimestamp} showRedirectModal={showRedirectModal}>\n          <Trans>Earn</Trans>\n        </HeaderLink>\n      </div>\n      <div className=\"App-header-link-container\">\n        <HeaderLink to=\"/buy\" redirectPopupTimestamp={redirectPopupTimestamp} showRedirectModal={showRedirectModal}>\n          <Trans>Buy</Trans>\n        </HeaderLink>\n      </div>\n      <div className=\"App-header-link-container\">\n        <HeaderLink\n          to=\"/referrals\"\n          redirectPopupTimestamp={redirectPopupTimestamp}\n          showRedirectModal={showRedirectModal}\n        >\n          <Trans>Referrals</Trans>\n        </HeaderLink>\n      </div>\n      <div className=\"App-header-link-container\">\n        <HeaderLink\n          to=\"/ecosystem\"\n          redirectPopupTimestamp={redirectPopupTimestamp}\n          showRedirectModal={showRedirectModal}\n        >\n          <Trans>Ecosystem</Trans>\n        </HeaderLink>\n      </div>\n      <div className=\"App-header-link-container\">\n        <ExternalLink href=\"https://gmxio.gitbook.io/gmx/\">\n          <Trans>Docs</Trans>\n        </ExternalLink>\n      </div>\n      {small && !isHomeSite() && (\n        <div className=\"App-header-link-container\">\n          {/* eslint-disable-next-line */}\n          <a href=\"#\" onClick={openSettings}>\n            <Trans>Settings</Trans>\n          </a>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { FiX } from \"react-icons/fi\";\nimport logoImg from \"img/logo_GMX.svg\";\nimport { t } from \"@lingui/macro\";\n\nimport \"./Header.css\";\nimport { Link } from \"react-router-dom\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport { HeaderLink } from \"./HeaderLink\";\n\ntype Props = {\n  small?: boolean;\n  clickCloseIcon?: () => void;\n  redirectPopupTimestamp: number;\n  showRedirectModal: (to: string) => void;\n};\n\ntype HomeLink = { label: string; link: string; isHomeLink?: boolean | false };\n\nconst HOME_MENUS: HomeLink[] = [\n  {\n    label: t`App`,\n    isHomeLink: true,\n    link: \"/trade\",\n  },\n  {\n    label: t`Protocol`,\n    link: \"https://github.com/gmx-io\",\n  },\n  {\n    label: t`Governance`,\n    link: \"https://gov.gmx.io/\",\n  },\n  {\n    label: t`Voting`,\n    link: \"https://snapshot.org/#/gmx.eth\",\n  },\n  {\n    label: t`Docs`,\n    link: \"https://gmxio.gitbook.io/gmx/\",\n  },\n];\n\nexport function HomeHeaderLinks({ small, clickCloseIcon, redirectPopupTimestamp, showRedirectModal }: Props) {\n  return (\n    <div className=\"App-header-links\">\n      {small && (\n        <div className=\"App-header-links-header\">\n          <Link className=\"App-header-link-main\" to=\"/\">\n            <img src={logoImg} alt=\"GMX Logo\" />\n          </Link>\n          <div\n            className=\"App-header-menu-icon-block mobile-cross-menu\"\n            onClick={() => clickCloseIcon && clickCloseIcon()}\n          >\n            <FiX className=\"App-header-menu-icon\" />\n          </div>\n        </div>\n      )}\n      {HOME_MENUS.map(({ link, label, isHomeLink = false }) => {\n        return (\n          <div key={label} className=\"App-header-link-container\">\n            {isHomeLink ? (\n              <HeaderLink\n                to={link}\n                redirectPopupTimestamp={redirectPopupTimestamp}\n                showRedirectModal={showRedirectModal}\n              >\n                {label}\n              </HeaderLink>\n            ) : (\n              <ExternalLink href={link}>{label}</ExternalLink>\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import React, { ReactNode, useEffect, useState } from \"react\";\nimport cx from \"classnames\";\n\nimport { AppHeaderUser } from \"./AppHeaderUser\";\nimport { AppHeaderLinks } from \"./AppHeaderLinks\";\n\nimport logoImg from \"img/logo_GMX.svg\";\nimport logoSmallImg from \"img/logo_GMX_small.svg\";\nimport { RiMenuLine } from \"react-icons/ri\";\nimport { FaTimes } from \"react-icons/fa\";\nimport { AnimatePresence as FramerAnimatePresence, motion } from \"framer-motion\";\n\nimport \"./Header.css\";\nimport { Link } from \"react-router-dom\";\nimport { isHomeSite } from \"lib/legacy\";\nimport { HomeHeaderLinks } from \"./HomeHeaderLinks\";\n\n// Fix framer-motion old React FC type (solved in react 18)\nconst AnimatePresence = (props: React.ComponentProps<typeof FramerAnimatePresence> & { children: ReactNode }) => (\n  <FramerAnimatePresence {...props} />\n);\n\nconst fadeVariants = {\n  hidden: { opacity: 0 },\n  visible: { opacity: 1 },\n};\n\nconst slideVariants = {\n  hidden: { x: \"-100%\" },\n  visible: { x: 0 },\n};\n\ntype Props = {\n  disconnectAccountAndCloseSettings: () => void;\n  openSettings: () => void;\n  setWalletModalVisible: (visible: boolean) => void;\n  redirectPopupTimestamp: number;\n  showRedirectModal: (to: string) => void;\n};\n\nexport function Header({\n  disconnectAccountAndCloseSettings,\n  openSettings,\n  setWalletModalVisible,\n  redirectPopupTimestamp,\n  showRedirectModal,\n}: Props) {\n  const [isDrawerVisible, setIsDrawerVisible] = useState(false);\n  const [isNativeSelectorModalVisible, setIsNativeSelectorModalVisible] = useState(false);\n\n  useEffect(() => {\n    if (isDrawerVisible) {\n      document.body.style.overflow = \"hidden\";\n    } else {\n      document.body.style.overflow = \"unset\";\n    }\n\n    return () => {\n      document.body.style.overflow = \"unset\";\n    };\n  }, [isDrawerVisible]);\n\n  return (\n    <>\n      {isDrawerVisible && (\n        <AnimatePresence>\n          {isDrawerVisible && (\n            <motion.div\n              className=\"App-header-backdrop\"\n              initial=\"hidden\"\n              animate=\"visible\"\n              exit=\"hidden\"\n              variants={fadeVariants}\n              transition={{ duration: 0.2 }}\n              onClick={() => setIsDrawerVisible(!isDrawerVisible)}\n            ></motion.div>\n          )}\n        </AnimatePresence>\n      )}\n      {isNativeSelectorModalVisible && (\n        <AnimatePresence>\n          {isNativeSelectorModalVisible && (\n            <motion.div\n              className=\"selector-backdrop\"\n              initial=\"hidden\"\n              animate=\"visible\"\n              exit=\"hidden\"\n              variants={fadeVariants}\n              transition={{ duration: 0.2 }}\n              onClick={() => setIsNativeSelectorModalVisible(!isNativeSelectorModalVisible)}\n            ></motion.div>\n          )}\n        </AnimatePresence>\n      )}\n      <header>\n        <div className=\"App-header large\">\n          <div className=\"App-header-container-left\">\n            <Link className=\"App-header-link-main\" to=\"/\">\n              <img src={logoImg} className=\"big\" alt=\"GMX Logo\" />\n              <img src={logoSmallImg} className=\"small\" alt=\"GMX Logo\" />\n            </Link>\n            {isHomeSite() ? (\n              <HomeHeaderLinks redirectPopupTimestamp={redirectPopupTimestamp} showRedirectModal={showRedirectModal} />\n            ) : (\n              <AppHeaderLinks redirectPopupTimestamp={redirectPopupTimestamp} showRedirectModal={showRedirectModal} />\n            )}\n          </div>\n          <div className=\"App-header-container-right\">\n            <AppHeaderUser\n              disconnectAccountAndCloseSettings={disconnectAccountAndCloseSettings}\n              openSettings={openSettings}\n              setWalletModalVisible={setWalletModalVisible}\n              redirectPopupTimestamp={redirectPopupTimestamp}\n              showRedirectModal={showRedirectModal}\n            />\n          </div>\n        </div>\n        <div className={cx(\"App-header\", \"small\", { active: isDrawerVisible })}>\n          <div\n            className={cx(\"App-header-link-container\", \"App-header-top\", {\n              active: isDrawerVisible,\n            })}\n          >\n            <div className=\"App-header-container-left\">\n              <div className=\"App-header-menu-icon-block\" onClick={() => setIsDrawerVisible(!isDrawerVisible)}>\n                {!isDrawerVisible && <RiMenuLine className=\"App-header-menu-icon\" />}\n                {isDrawerVisible && <FaTimes className=\"App-header-menu-icon\" />}\n              </div>\n              <div className=\"App-header-link-main clickable\" onClick={() => setIsDrawerVisible(!isDrawerVisible)}>\n                <img src={logoImg} className=\"big\" alt=\"GMX Logo\" />\n                <img src={logoSmallImg} className=\"small\" alt=\"GMX Logo\" />\n              </div>\n            </div>\n            <div className=\"App-header-container-right\">\n              <AppHeaderUser\n                disconnectAccountAndCloseSettings={disconnectAccountAndCloseSettings}\n                openSettings={openSettings}\n                small\n                setWalletModalVisible={setWalletModalVisible}\n                redirectPopupTimestamp={redirectPopupTimestamp}\n                showRedirectModal={showRedirectModal}\n              />\n            </div>\n          </div>\n        </div>\n      </header>\n      <AnimatePresence>\n        {isDrawerVisible && (\n          <motion.div\n            onClick={() => setIsDrawerVisible(false)}\n            className=\"App-header-links-container App-header-drawer\"\n            initial=\"hidden\"\n            animate=\"visible\"\n            exit=\"hidden\"\n            variants={slideVariants}\n            transition={{ duration: 0.2 }}\n          >\n            {isHomeSite() ? (\n              <HomeHeaderLinks\n                small\n                clickCloseIcon={() => setIsDrawerVisible(false)}\n                redirectPopupTimestamp={redirectPopupTimestamp}\n                showRedirectModal={showRedirectModal}\n              />\n            ) : (\n              <AppHeaderLinks\n                small\n                openSettings={openSettings}\n                clickCloseIcon={() => setIsDrawerVisible(false)}\n                redirectPopupTimestamp={redirectPopupTimestamp}\n                showRedirectModal={showRedirectModal}\n              />\n            )}\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </>\n  );\n}\n","import { ReactNode } from \"react\";\n\ntype Props = {\n  label: ReactNode;\n  value: ReactNode;\n};\n\nexport function CardRow(p: Props) {\n  return (\n    <div className=\"App-card-row\">\n      <div className=\"label\">{p.label}</div>\n      <div className=\"value\">{p.value}</div>\n    </div>\n  );\n}\n","import { t } from \"@lingui/macro\";\nimport { CardRow } from \"components/CardRow/CardRow\";\nimport { getIcon } from \"config/icons\";\nimport { MarketInfo, getPoolUsd } from \"domain/synthetics/markets\";\nimport { TokenData, convertToUsd } from \"domain/synthetics/tokens\";\nimport { useChainId } from \"lib/chains\";\nimport { formatAmount, formatTokenAmountWithUsd, formatUsd } from \"lib/numbers\";\nimport { useMarketTokensAPR } from \"domain/synthetics/markets/useMarketTokensAPR\";\nimport \"./MarketStats.scss\";\n\ntype Props = {\n  marketInfo?: MarketInfo;\n  marketToken?: TokenData;\n};\n\nexport function MarketStats(p: Props) {\n  const { marketInfo, marketToken } = p;\n  const { chainId } = useChainId();\n\n  const { marketsTokensAPRData } = useMarketTokensAPR(chainId);\n\n  const marketName = `GM: ${marketInfo?.name || \"---/--- [-------]\"}`;\n\n  const marketPrice = marketToken?.prices?.maxPrice;\n  const marketBalance = marketToken?.balance;\n  const marketBalanceUsd =\n    marketBalance && marketPrice ? convertToUsd(marketBalance, marketToken.decimals, marketPrice) : undefined;\n\n  const marketTotalSupply = marketToken?.totalSupply;\n  const marketTotalSupplyUsd =\n    marketTotalSupply && marketPrice ? convertToUsd(marketTotalSupply, marketToken.decimals, marketPrice) : undefined;\n\n  const { longToken, shortToken, longPoolAmount, shortPoolAmount } = marketInfo || {};\n\n  const longPoolAmountUsd = marketInfo ? getPoolUsd(marketInfo, true, \"midPrice\") : undefined;\n  const shortPoolAmountUsd = marketInfo ? getPoolUsd(marketInfo, false, \"midPrice\") : undefined;\n\n  const apr = marketsTokensAPRData?.[marketInfo?.marketTokenAddress || \"\"];\n\n  return (\n    <div className=\"App-card MarketStats-card\">\n      <div className=\"MarketStats-title\">\n        <div className=\"App-card-title-mark\">\n          <div className=\"App-card-title-mark-icon\">\n            <img className=\"MarketStats-gm-icon\" src={getIcon(chainId, \"gm\")} alt=\"GM\" />\n            {/* TODO: change to unified */}\n            {/* <img\n              src={getIcon(chainId, \"network\")}\n              width={20}\n              alt=\"arbitrum16Icon\"\n              className=\"selected-network-symbol\"\n            /> */}\n          </div>\n          <div className=\"App-card-title-mark-info\">\n            <div className=\"App-card-title-mark-title\">{marketName}</div>\n            <div className=\"App-card-title-mark-subtitle\">GMX Market tokens</div>\n          </div>\n          {/* TODO */}\n          {/* <div>\n            <AssetDropdown assetSymbol=\"GM\" />\n          </div> */}\n        </div>\n      </div>\n      <div className=\"App-card-divider\" />\n      <div className=\"App-card-content\">\n        {/* <CardRow label={t`Market`} value={marketName} /> */}\n        <CardRow label={t`Price`} value={formatUsd(marketPrice) || \"...\"} />\n        <CardRow\n          label={t`Wallet`}\n          value={\n            marketBalance && marketBalanceUsd\n              ? formatTokenAmountWithUsd(marketBalance, marketBalanceUsd, \"GM\", marketToken.decimals)\n              : \"...\"\n          }\n        />\n\n        {/* TODO */}\n        {/* <CardRow label={t`Market worth`} value={formatUsd(bigNumberify(0))} /> */}\n\n        <CardRow label={t`APR`} value={apr ? `${formatAmount(apr, 2, 2)}%` : \"...\"} />\n\n        <CardRow\n          label={t`Total Supply`}\n          value={\n            marketTotalSupply && marketTotalSupplyUsd\n              ? formatTokenAmountWithUsd(marketTotalSupply, marketTotalSupplyUsd, \"GM\", marketToken.decimals)\n              : \"...\"\n          }\n        />\n\n        <div className=\"App-card-divider\" />\n\n        <CardRow label={t`Long Collateral`} value={longToken?.symbol || \"...\"} />\n        <CardRow\n          label={t`Pool amount`}\n          value={formatTokenAmountWithUsd(longPoolAmount, longPoolAmountUsd, longToken?.symbol, longToken?.decimals)}\n        />\n\n        <div className=\"App-card-divider\" />\n\n        <CardRow label={t`Short Collateral`} value={shortToken?.symbol || \"...\"} />\n        <CardRow\n          label={t`Pool amount`}\n          value={formatTokenAmountWithUsd(\n            shortPoolAmount,\n            shortPoolAmountUsd,\n            shortToken?.symbol,\n            shortToken?.decimals\n          )}\n        />\n      </div>\n    </div>\n  );\n}\n","import { BigNumber } from \"ethers\";\nimport { MarketInfo } from \"../markets\";\n\nexport enum ClaimType {\n  ClaimPriceImpact = \"ClaimPriceImpact\",\n  ClaimFunding = \"ClaimFunding\",\n}\n\nexport type ClaimMarketItem = {\n  marketInfo: MarketInfo;\n  longTokenAmount: BigNumber;\n  shortTokenAmount: BigNumber;\n};\n\nexport type ClaimCollateralAction = {\n  id: string;\n  eventName: ClaimType;\n  account: string;\n  claimItems: ClaimMarketItem[];\n  timestamp: number;\n  transactionHash: string;\n};\n","import { Trans } from \"@lingui/macro\";\nimport SEO from \"components/Common/SEO\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport { GmSwapBox, Mode, Operation } from \"components/Synthetics/GmSwap/GmSwapBox/GmSwapBox\";\nimport { MarketStats } from \"components/Synthetics/MarketStats/MarketStats\";\nimport { SYNTHETICS_MARKET_DEPOSIT_MARKET_KEY } from \"config/localStorage\";\nimport { useMarketTokensData, useMarketsInfo } from \"domain/synthetics/markets\";\nimport { useChainId } from \"lib/chains\";\nimport { getPageTitle } from \"lib/legacy\";\nimport { useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport { useEffect, useState } from \"react\";\n\nimport { getTokenData } from \"domain/synthetics/tokens\";\nimport { getByKey } from \"lib/objects\";\nimport { useMemo } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport \"./MarketPoolsPage.scss\";\n\ntype Props = {\n  connectWallet: () => void;\n  setPendingTxns: (txns: any) => void;\n};\n\nexport function MarketPoolsPage(p: Props) {\n  const { chainId } = useChainId();\n  const { search } = useLocation();\n  const history = useHistory();\n\n  const queryParams = useMemo(() => new URLSearchParams(search), [search]);\n\n  const { marketsInfoData = {} } = useMarketsInfo(chainId);\n  const markets = Object.values(marketsInfoData);\n\n  const { marketTokensData: depositMarketTokensData } = useMarketTokensData(chainId, { isDeposit: true });\n  const { marketTokensData: withdrawalMarketTokensData } = useMarketTokensData(chainId, { isDeposit: false });\n\n  const [operation, setOperation] = useState<Operation>(Operation.Deposit);\n  const [mode, setMode] = useState<Mode>(Mode.Single);\n\n  const [selectedMarketKey, setSelectedMarketKey] = useLocalStorageSerializeKey<string | undefined>(\n    [chainId, SYNTHETICS_MARKET_DEPOSIT_MARKET_KEY],\n    undefined\n  );\n  const marketInfo = getByKey(marketsInfoData, selectedMarketKey);\n\n  const marketToken = getTokenData(\n    operation === Operation.Deposit ? depositMarketTokensData : withdrawalMarketTokensData,\n    selectedMarketKey\n  );\n\n  useEffect(\n    function updateByQueryParams() {\n      if (queryParams.get(\"operation\") === Operation.Withdrawal) {\n        setOperation(Operation.Withdrawal);\n      } else if (queryParams.get(\"operation\") === Operation.Deposit) {\n        setOperation(Operation.Deposit);\n      }\n\n      if (queryParams.get(\"market\")) {\n        setSelectedMarketKey(queryParams.get(\"market\")!);\n      }\n\n      history.replace({ search: \"\" });\n    },\n    [history, queryParams, setSelectedMarketKey]\n  );\n\n  useEffect(\n    function updateMarket() {\n      if (!markets.length) return;\n\n      if (\n        (markets.length > 0 && !selectedMarketKey) ||\n        !markets.find((m) => m.marketTokenAddress === selectedMarketKey)\n      ) {\n        setSelectedMarketKey(markets[0].marketTokenAddress);\n      }\n    },\n    [selectedMarketKey, markets, setSelectedMarketKey]\n  );\n\n  return (\n    <SEO title={getPageTitle(\"Synthetics pools\")}>\n      <div className=\"default-container page-layout\">\n        <div className=\"section-title-block\">\n          <div className=\"section-title-content\">\n            <div className=\"Page-title\">\n              <Trans>Synthetics Pools</Trans>\n            </div>\n            <div className=\"Page-description\">\n              <Trans>\n                Purchase <ExternalLink href=\"https://gmxio.gitbook.io/gmx/gd\">GM tokens</ExternalLink>\n              </Trans>\n              <br />\n            </div>\n          </div>\n        </div>\n\n        <div className=\"MarketPoolsPage-content\">\n          <MarketStats marketInfo={marketInfo} marketToken={marketToken} />\n\n          <div className=\"MarketPoolsPage-swap-box\">\n            <GmSwapBox\n              onConnectWallet={p.connectWallet}\n              selectedMarketAddress={selectedMarketKey}\n              markets={markets}\n              onSelectMarket={setSelectedMarketKey}\n              setPendingTxns={p.setPendingTxns}\n              operation={operation}\n              mode={mode}\n              setMode={setMode}\n              setOperation={setOperation}\n            />\n          </div>\n        </div>\n      </div>\n    </SEO>\n  );\n}\n","import { Trans, t } from \"@lingui/macro\";\nimport Button from \"components/Button/Button\";\nimport Modal from \"components/Modal/Modal\";\nimport { helperToast } from \"lib/helperToast\";\nimport { BASIS_POINTS_DIVISOR } from \"lib/legacy\";\nimport { useState } from \"react\";\n\ntype Props = {\n  onClose: () => void;\n  savedAcceptablePriceImpactBps: number;\n  saveAcceptablePriceImpactBps: (acceptablePriceImpactBps: number) => void;\n};\n\nexport function AcceptbablePriceImpactEditor(p: Props) {\n  const parsedSavedValue = (parseInt(p.savedAcceptablePriceImpactBps!.toString()) / BASIS_POINTS_DIVISOR) * 100;\n\n  const [inputValue, setInputValue] = useState(parsedSavedValue.toString());\n\n  function onSubmit() {\n    const parsed = parseFloat(inputValue);\n    if (isNaN(parsed)) {\n      helperToast.error(t`Invalid acceptable price impact value`);\n      return;\n    }\n\n    const bps = (parsed * BASIS_POINTS_DIVISOR) / 100;\n    if (parseInt(bps.toString()) !== parseFloat(bps.toString())) {\n      helperToast.error(t`Max acceptable price impact precision is 0.01%`);\n      return;\n    }\n\n    p.saveAcceptablePriceImpactBps(bps);\n    p.onClose();\n  }\n\n  return (\n    <Modal className=\"App-settings\" isVisible={true} setIsVisible={p.onClose} label={t`Edit`}>\n      <div className=\"App-settings-row\">\n        <div>\n          <Trans>Acceptable Price Impact</Trans>\n        </div>\n        <div className=\"App-slippage-tolerance-input-container\">\n          <input\n            type=\"number\"\n            className=\"App-slippage-tolerance-input\"\n            min=\"0\"\n            value={inputValue}\n            onChange={(e) => setInputValue(e.target.value)}\n          />\n          <div className=\"App-slippage-tolerance-input-percent\">%</div>\n        </div>\n      </div>\n\n      <Button className=\"w-100\" variant=\"primary-action\" onClick={onSubmit}>{t`Save`}</Button>\n    </Modal>\n  );\n}\n","import { useMemo } from \"react\";\nimport { TokensData } from \"domain/synthetics/tokens\";\nimport { MarketsData } from \"domain/synthetics/markets\";\n\nexport function useFixedAddreseses(marketsData: MarketsData | undefined, tokensData: TokensData | undefined) {\n  return useMemo(() => {\n    return Object.keys(marketsData || {})\n      .concat(Object.keys(tokensData || {}))\n      .reduce((acc, address) => {\n        acc[address.toLowerCase()] = address;\n\n        return acc;\n      }, {} as { [lowerAddress: string]: string });\n  }, [marketsData, tokensData]);\n}\n","import { plural, t } from \"@lingui/macro\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport StatsTooltipRow from \"components/StatsTooltip/StatsTooltipRow\";\nimport Tooltip from \"components/Tooltip/Tooltip\";\nimport { getExplorerUrl } from \"config/chains\";\nimport { getToken } from \"config/tokens\";\nimport { ClaimCollateralAction, ClaimType } from \"domain/synthetics/claimHistory\";\nimport { BigNumber } from \"ethers\";\nimport { useChainId } from \"lib/chains\";\nimport { formatDateTime } from \"lib/dates\";\nimport { formatTokenAmount } from \"lib/numbers\";\nimport { useMemo } from \"react\";\n\ntype Props = {\n  claimAction: ClaimCollateralAction;\n};\n\nexport function ClaimHistoryRow(p: Props) {\n  const { chainId } = useChainId();\n  const { claimAction } = p;\n\n  const marketsCount = claimAction.claimItems.length;\n\n  const eventTitle = {\n    [ClaimType.ClaimFunding]: t`Claim Funding Fees`,\n    [ClaimType.ClaimPriceImpact]: t`Claim Price Impact`,\n  }[claimAction.eventName];\n\n  const tokensMsg = useMemo(() => {\n    const amountByToken = claimAction.claimItems.reduce((acc, { marketInfo, longTokenAmount, shortTokenAmount }) => {\n      if (longTokenAmount.gt(0)) {\n        acc[marketInfo.longTokenAddress] = acc[marketInfo.longTokenAddress] || BigNumber.from(0);\n        acc[marketInfo.longTokenAddress] = acc[marketInfo.longTokenAddress].add(longTokenAmount);\n      }\n      if (shortTokenAmount.gt(0)) {\n        acc[marketInfo.shortTokenAddress] = acc[marketInfo.shortTokenAddress] || BigNumber.from(0);\n        acc[marketInfo.shortTokenAddress] = acc[marketInfo.shortTokenAddress].add(shortTokenAmount);\n      }\n\n      return acc;\n    }, {} as { [tokenAddress: string]: BigNumber });\n\n    const tokensMsg = Object.entries(amountByToken)\n      .map(([tokenAddress, amount]) => {\n        const token = getToken(chainId, tokenAddress);\n\n        return formatTokenAmount(amount, token.decimals, token.symbol);\n      })\n      .join(\", \");\n\n    return tokensMsg;\n  }, [chainId, claimAction.claimItems]);\n\n  return (\n    <div className=\"TradeHistoryRow App-box App-box-border\">\n      <div className=\"muted TradeHistoryRow-time\">{formatDateTime(claimAction.timestamp)}</div>\n      <ExternalLink className=\"plain\" href={`${getExplorerUrl(chainId)}tx/${claimAction.transactionHash}`}>\n        {eventTitle}: {tokensMsg} from&nbsp;{\" \"}\n        <Tooltip\n          handle={plural(marketsCount, { one: \"# Market\", other: \"# Markets\" })}\n          renderContent={() => (\n            <>\n              {claimAction.claimItems.map(({ marketInfo: market, longTokenAmount, shortTokenAmount }, index) => {\n                return (\n                  <>\n                    <StatsTooltipRow\n                      className=\"ClaimHistoryRow-tooltip-row\"\n                      key={market.marketTokenAddress}\n                      label={market.name}\n                      showDollar={false}\n                      value={\n                        <>\n                          {longTokenAmount.gt(0) && (\n                            <div>\n                              {formatTokenAmount(longTokenAmount, market.longToken.decimals, market.longToken.symbol)}\n                            </div>\n                          )}\n\n                          {shortTokenAmount.gt(0) && (\n                            <div>\n                              {formatTokenAmount(\n                                shortTokenAmount,\n                                market.shortToken.decimals,\n                                market.shortToken.symbol\n                              )}\n                            </div>\n                          )}\n                        </>\n                      }\n                    />\n                    {index < marketsCount - 1 && <br />}\n                  </>\n                );\n              })}\n            </>\n          )}\n        />\n      </ExternalLink>\n    </div>\n  );\n}\n","import { Trans } from \"@lingui/macro\";\nimport { useChainId } from \"lib/chains\";\nimport { useState } from \"react\";\nimport { useClaimCollateralHistory } from \"domain/synthetics/claimHistory\";\nimport { ClaimHistoryRow } from \"../ClaimHistoryRow/ClaimHistoryRow\";\n\nconst PAGE_SIZE = 100;\n\ntype Props = {\n  shouldShowPaginationButtons: boolean;\n};\n\nexport function ClaimHistory(p: Props) {\n  const { shouldShowPaginationButtons } = p;\n  const { chainId } = useChainId();\n  const [pageIndex, setPageIndex] = useState(0);\n\n  const { claimActions, isLoading } = useClaimCollateralHistory(chainId, { pageIndex, pageSize: PAGE_SIZE });\n\n  const isEmpty = claimActions?.length === 0;\n\n  return (\n    <div className=\"TradeHistory\">\n      {isLoading && (\n        <div className=\"TradeHistoryRow App-box\">\n          <Trans>Loading...</Trans>\n        </div>\n      )}\n      {isEmpty && (\n        <div className=\"TradeHistoryRow App-box\">\n          <Trans>No claims yet</Trans>\n        </div>\n      )}\n      {claimActions?.map((claimAction) => (\n        <ClaimHistoryRow key={claimAction.id} claimAction={claimAction} />\n      ))}\n      {shouldShowPaginationButtons && (\n        <div>\n          {pageIndex > 0 && (\n            <button className=\"App-button-option App-card-option\" onClick={() => setPageIndex((old) => old - 1)}>\n              <Trans>Prev</Trans>\n            </button>\n          )}\n          {claimActions && claimActions.length >= PAGE_SIZE && (\n            <button className=\"App-button-option App-card-option\" onClick={() => setPageIndex((old) => old + 1)}>\n              <Trans>Next</Trans>\n            </button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import { gql } from \"@apollo/client\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { useMarketsInfo } from \"domain/synthetics/markets\";\nimport { useAvailableTokensData } from \"domain/synthetics/tokens\";\nimport { BigNumber } from \"ethers\";\nimport { bigNumberify } from \"lib/numbers\";\nimport { getByKey } from \"lib/objects\";\nimport { getSyntheticsGraphClient } from \"lib/subgraph\";\nimport { useMemo } from \"react\";\nimport useSWR from \"swr\";\nimport { ClaimCollateralAction, ClaimMarketItem, ClaimType } from \"./types\";\nimport { useFixedAddreseses } from \"../common/useFixedAddresses\";\n\nexport type ClaimCollateralHistoryResult = {\n  claimActions?: ClaimCollateralAction[];\n  isLoading: boolean;\n};\n\ntype RawClaimCollateralAction = {\n  id: string;\n  eventName: ClaimType;\n  account: string;\n  marketAddresses: string[];\n  tokenAddresses: string[];\n  amounts: string[];\n\n  transaction: {\n    timestamp: number;\n    hash: string;\n  };\n};\n\nexport function useClaimCollateralHistory(\n  chainId: number,\n  p: { pageIndex: number; pageSize: number }\n): ClaimCollateralHistoryResult {\n  const { pageIndex, pageSize } = p;\n\n  const { account } = useWeb3React();\n  const { marketsInfoData } = useMarketsInfo(chainId);\n  const { tokensData } = useAvailableTokensData(chainId);\n  const fixedAddresses = useFixedAddreseses(marketsInfoData, tokensData);\n  const client = getSyntheticsGraphClient(chainId);\n\n  const key = chainId && client && account ? [chainId, \"useClaimHistory\", account, pageIndex, pageSize] : null;\n\n  const { data, error } = useSWR<RawClaimCollateralAction[]>(key, {\n    fetcher: async () => {\n      const skip = pageIndex * pageSize;\n      const first = pageSize;\n\n      const query = gql(`{\n        claimCollateralActions(\n            skip: ${skip},\n            first: ${first},\n            orderBy: transaction__timestamp,\n            orderDirection: desc,\n            where: { account: \"${account!.toLowerCase()}\" }\n        ) {\n            account\n            eventName\n            marketAddresses\n            tokenAddresses\n            amounts\n            transaction {\n                timestamp\n                hash\n            }\n        }\n      }`);\n\n      const { data } = await client!.query({ query });\n\n      return data?.claimCollateralActions;\n    },\n  });\n\n  const isLoading = (!error && !data) || !marketsInfoData || !tokensData;\n\n  const claimActions = useMemo(() => {\n    if (!data || !tokensData || !marketsInfoData) {\n      return undefined;\n    }\n\n    return data\n      .map((rawAction) => {\n        const claimItemsMap: { [marketAddress: string]: ClaimMarketItem } = {};\n\n        const claimAction: ClaimCollateralAction = {\n          id: rawAction.id,\n          eventName: rawAction.eventName,\n          account: rawAction.account,\n          claimItems: [],\n          timestamp: rawAction.transaction.timestamp,\n          transactionHash: rawAction.transaction.hash,\n        };\n\n        for (let i = 0; i < rawAction.marketAddresses.length; i++) {\n          const marketAddress = fixedAddresses[rawAction.marketAddresses[i]];\n          const tokenAddress = fixedAddresses[rawAction.tokenAddresses[i]];\n          const amount = bigNumberify(rawAction.amounts[i])!;\n          const marketInfo = getByKey(marketsInfoData, marketAddress);\n\n          if (!marketInfo) {\n            return undefined;\n          }\n\n          if (!claimItemsMap[marketInfo.marketTokenAddress]) {\n            claimItemsMap[marketInfo.marketTokenAddress] = {\n              marketInfo: marketInfo,\n              longTokenAmount: BigNumber.from(0),\n              shortTokenAmount: BigNumber.from(0),\n            };\n          }\n\n          if (tokenAddress === marketInfo.longTokenAddress) {\n            claimItemsMap[marketAddress].longTokenAmount = claimItemsMap[marketAddress].longTokenAmount.add(amount);\n          } else {\n            claimItemsMap[marketAddress].shortTokenAmount = claimItemsMap[marketAddress].shortTokenAmount.add(amount);\n          }\n        }\n\n        claimAction.claimItems = Object.values(claimItemsMap);\n\n        return claimAction;\n      })\n      .filter(Boolean) as ClaimCollateralAction[];\n  }, [data, fixedAddresses, marketsInfoData, tokensData]);\n\n  return {\n    claimActions,\n    isLoading,\n  };\n}\n","import { t } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport Modal from \"components/Modal/Modal\";\nimport { MarketInfo, getTotalClaimableFundingUsd, useMarketsInfo } from \"domain/synthetics/markets\";\nimport { convertToUsd } from \"domain/synthetics/tokens\";\nimport { BigNumber } from \"ethers\";\nimport { useChainId } from \"lib/chains\";\nimport { formatTokenAmount, formatUsd } from \"lib/numbers\";\n\nimport ExchangeInfoRow from \"components/Exchange/ExchangeInfoRow\";\nimport Tooltip from \"components/Tooltip/Tooltip\";\nimport { claimCollateralTxn } from \"domain/synthetics/markets/claimCollateralTxn\";\n\nimport Button from \"components/Button/Button\";\nimport \"./ClaimModal.scss\";\n\ntype Props = {\n  onClose: () => void;\n  setPendingTxns: (txns: any) => void;\n};\n\nexport function ClaimModal(p: Props) {\n  const { onClose, setPendingTxns } = p;\n  const { account, library } = useWeb3React();\n  const { chainId } = useChainId();\n  const { marketsInfoData } = useMarketsInfo(chainId);\n\n  const markets = Object.values(marketsInfoData || {});\n\n  const totalClaimableFundingUsd = getTotalClaimableFundingUsd(markets);\n\n  function renderMarketSection(market: MarketInfo) {\n    const marketName = market.name;\n    const longToken = market.longToken;\n    const shortToken = market.shortToken;\n\n    const fundingLongAmount = market.claimableFundingAmountLong;\n    const fundingShortAmount = market.claimableFundingAmountShort;\n\n    const fundingLongUsd = convertToUsd(fundingLongAmount, longToken?.decimals, longToken?.prices?.minPrice);\n    const fundingShortUsd = convertToUsd(fundingShortAmount, shortToken?.decimals, shortToken?.prices?.minPrice);\n\n    const totalFundingUsd = BigNumber.from(0)\n      .add(fundingLongUsd || 0)\n      ?.add(fundingShortUsd || 0);\n\n    if (!totalFundingUsd?.gt(0)) return null;\n\n    const claimableAmountsItems: string[] = [];\n\n    if (fundingLongAmount?.gt(0)) {\n      claimableAmountsItems.push(formatTokenAmount(fundingLongAmount, longToken.decimals, longToken.symbol)!);\n    }\n\n    if (fundingShortAmount?.gt(0)) {\n      claimableAmountsItems.push(formatTokenAmount(fundingShortAmount, shortToken.decimals, shortToken.symbol)!);\n    }\n\n    return (\n      <div key={market.marketTokenAddress} className=\"App-card-content\">\n        <ExchangeInfoRow className=\"ClaimModal-row\" label={t`Market`} value={marketName} />\n        <ExchangeInfoRow\n          className=\"ClaimModal-row\"\n          label={t`Funding fee`}\n          value={\n            <Tooltip\n              className=\"ClaimModal-row-tooltip\"\n              handle={formatUsd(totalFundingUsd)}\n              position=\"right-top\"\n              renderContent={() => (\n                <>\n                  {claimableAmountsItems.map((item, index) => (\n                    <div key={item}>{item}</div>\n                  ))}\n                </>\n              )}\n            />\n          }\n        />\n\n        <div className=\"App-card-divider ClaimModal-divider\" />\n      </div>\n    );\n  }\n\n  function onSubmit() {\n    if (!account || !library) return;\n\n    const fundingMarketAddresses: string[] = [];\n    const fundingTokenAddresses: string[] = [];\n\n    for (const market of markets) {\n      if (market.claimableFundingAmountLong?.gt(0)) {\n        fundingMarketAddresses.push(market.marketTokenAddress);\n        fundingTokenAddresses.push(market.longTokenAddress);\n      }\n\n      if (market.claimableFundingAmountShort?.gt(0)) {\n        fundingMarketAddresses.push(market.marketTokenAddress);\n        fundingTokenAddresses.push(market.shortTokenAddress);\n      }\n    }\n\n    claimCollateralTxn(chainId, library, {\n      account,\n      fundingFees: {\n        marketAddresses: fundingMarketAddresses,\n        tokenAddresses: fundingTokenAddresses,\n      },\n      setPendingTxns,\n    }).then(onClose);\n  }\n\n  return (\n    <Modal className=\"Confirmation-box ClaimableModal\" isVisible={true} setIsVisible={onClose} label={t`Confirm Claim`}>\n      <div className=\"ConfirmationBox-main text-center\">Claim {formatUsd(totalClaimableFundingUsd)}</div>\n      <div className=\"ClaimModal-content\">{markets.map(renderMarketSection)}</div>\n      <Button className=\"w-100\" variant=\"primary-action\" onClick={onSubmit}>{t`Claim`}</Button>\n    </Modal>\n  );\n}\n","import { t } from \"@lingui/macro\";\nimport { getContract } from \"config/contracts\";\nimport ExchangeRouter from \"abis/ExchangeRouter.json\";\nimport { ethers } from \"ethers\";\nimport { callContract } from \"lib/contracts\";\nimport { Web3Provider } from \"@ethersproject/providers\";\n\ntype Params = {\n  account: string;\n  fundingFees: {\n    marketAddresses: string[];\n    tokenAddresses: string[];\n  };\n  setPendingTxns: (txns: any) => void;\n};\n\nexport function claimCollateralTxn(chainId: number, library: Web3Provider, p: Params) {\n  const { setPendingTxns, fundingFees, account } = p;\n\n  const contract = new ethers.Contract(getContract(chainId, \"ExchangeRouter\"), ExchangeRouter.abi, library.getSigner());\n\n  return callContract(\n    chainId,\n    contract,\n    \"claimFundingFees\",\n    [fundingFees.marketAddresses, fundingFees.tokenAddresses, account],\n    {\n      sentMsg: t`Claim request sent`,\n      successMsg: t`Success claimings`,\n      failMsg: t`Claiming failed`,\n      hideSuccessMsg: true,\n      setPendingTxns,\n    }\n  );\n}\n","import { Web3Provider } from \"@ethersproject/providers\";\nimport { plural, t } from \"@lingui/macro\";\nimport ExchangeRouter from \"abis/ExchangeRouter.json\";\nimport { getContract } from \"config/contracts\";\nimport { ethers } from \"ethers\";\nimport { callContract } from \"lib/contracts\";\n\nexport type CancelOrderParams = {\n  orderKeys: string[];\n  setPendingTxns: (txns: any) => void;\n};\n\nexport async function cancelOrdersTxn(chainId: number, library: Web3Provider, p: CancelOrderParams) {\n  const exchangeRouter = new ethers.Contract(\n    getContract(chainId, \"ExchangeRouter\"),\n    ExchangeRouter.abi,\n    library.getSigner()\n  );\n\n  const multicall = p.orderKeys.map((key) => exchangeRouter.interface.encodeFunctionData(\"cancelOrder\", [key]));\n\n  const count = p.orderKeys.length;\n\n  const ordersText = plural(count, {\n    one: \"Order\",\n    other: \"# Orders\",\n  });\n\n  return callContract(chainId, exchangeRouter, \"multicall\", [multicall], {\n    sentMsg: t`Canceling ${ordersText}`,\n    successMsg: t`${ordersText} canceled`,\n    failMsg: t`Failed to cancel ${ordersText}`,\n    setPendingTxns: p.setPendingTxns,\n  });\n}\n","import { Trans, t } from \"@lingui/macro\";\nimport BuyInputSection from \"components/BuyInputSection/BuyInputSection\";\nimport Modal from \"components/Modal/Modal\";\nimport { useMarketsInfo } from \"domain/synthetics/markets\";\nimport {\n  OrderInfo,\n  OrderType,\n  PositionOrderInfo,\n  isDecreaseOrderType,\n  isIncreaseOrderType,\n  isLimitOrderType,\n  isSwapOrderType,\n  isTriggerDecreaseOrderType,\n} from \"domain/synthetics/orders\";\nimport { PositionsInfoData, getPositionKey } from \"domain/synthetics/positions\";\nimport {\n  TokensRatio,\n  getAmountByRatio,\n  getTokenData,\n  getTokensRatioByAmounts,\n  getTokensRatioByPrice,\n  useAvailableTokensData,\n} from \"domain/synthetics/tokens\";\nimport { useChainId } from \"lib/chains\";\nimport { USD_DECIMALS } from \"lib/legacy\";\nimport { bigNumberify, formatAmount, formatAmountFree, formatTokenAmount, formatUsd, parseValue } from \"lib/numbers\";\nimport { useEffect, useMemo, useState } from \"react\";\n\nimport { useWeb3React } from \"@web3-react/core\";\nimport ExchangeInfoRow from \"components/Exchange/ExchangeInfoRow\";\nimport { DEFAULT_ACCEPABLE_PRICE_IMPACT_BPS } from \"config/factors\";\nimport { SYNTHETICS_ACCEPTABLE_PRICE_IMPACT_BPS_KEY } from \"config/localStorage\";\nimport { getWrappedToken } from \"config/tokens\";\nimport {\n  estimateExecuteDecreaseOrderGasLimit,\n  estimateExecuteIncreaseOrderGasLimit,\n  estimateExecuteSwapOrderGasLimit,\n  getExecutionFee,\n  useGasLimits,\n  useGasPrice,\n} from \"domain/synthetics/fees\";\nimport { updateOrderTxn } from \"domain/synthetics/orders/updateOrderTxn\";\nimport { getAcceptablePrice, getSwapPathOutputAddresses } from \"domain/synthetics/trade\";\nimport { BigNumber } from \"ethers\";\nimport { useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport { getByKey } from \"lib/objects\";\n\nimport Button from \"components/Button/Button\";\nimport \"./OrderEditor.scss\";\n\ntype Props = {\n  positionsData: PositionsInfoData;\n  order: OrderInfo;\n  onClose: () => void;\n  setPendingTxns: (txns: any) => void;\n};\n\nexport function OrderEditor(p: Props) {\n  const { chainId } = useChainId();\n  const { library } = useWeb3React();\n\n  const { gasPrice } = useGasPrice(chainId);\n  const { gasLimits } = useGasLimits(chainId);\n  const { tokensData } = useAvailableTokensData(chainId);\n  const { marketsInfoData } = useMarketsInfo(chainId);\n  const [savedAcceptablePriceImpactBps] = useLocalStorageSerializeKey(\n    [chainId, SYNTHETICS_ACCEPTABLE_PRICE_IMPACT_BPS_KEY],\n    DEFAULT_ACCEPABLE_PRICE_IMPACT_BPS\n  );\n  const acceptablePriceImpactBps = bigNumberify(savedAcceptablePriceImpactBps!);\n\n  const [isInited, setIsInited] = useState(false);\n\n  const [sizeInputValue, setSizeInputValue] = useState(\"\");\n  const sizeDeltaUsd = parseValue(sizeInputValue || \"0\", USD_DECIMALS);\n\n  const [triggerPirceInputValue, setTriggerPriceInputValue] = useState(\"\");\n  const triggerPrice = parseValue(triggerPirceInputValue || \"0\", USD_DECIMALS)!;\n\n  const { acceptablePrice } = getAcceptablePrice({\n    isIncrease: isIncreaseOrderType(p.order.orderType),\n    isLong: p.order.isLong,\n    indexPrice: triggerPrice,\n    acceptablePriceImpactBps: acceptablePriceImpactBps,\n    sizeDeltaUsd: p.order.sizeDeltaUsd,\n  });\n\n  // Swaps\n  const fromToken = getTokenData(tokensData, p.order.initialCollateralTokenAddress);\n\n  const { outTokenAddress: toTokenAddress } = getSwapPathOutputAddresses({\n    marketsInfoData: marketsInfoData!,\n    initialCollateralAddress: p.order.initialCollateralTokenAddress,\n    swapPath: p.order.swapPath,\n    wrappedNativeTokenAddress: getWrappedToken(chainId).address,\n    shouldUnwrapNativeToken: p.order.shouldUnwrapNativeToken,\n  });\n\n  const toToken = getTokenData(tokensData, toTokenAddress);\n  const fromTokenPrice = fromToken?.prices?.maxPrice;\n  const toTokenPrice = toToken?.prices?.minPrice;\n  const [triggerRatioInputValue, setTriggerRatioInputValue] = useState<string>(\"\");\n\n  const markRatio =\n    fromToken &&\n    toToken &&\n    fromTokenPrice &&\n    toTokenPrice &&\n    getTokensRatioByPrice({\n      fromToken,\n      toToken,\n      fromPrice: fromTokenPrice,\n      toPrice: toTokenPrice,\n    });\n\n  const isRatioInverted = markRatio?.largestToken.address === fromToken?.address;\n\n  const triggerRatio = useMemo(() => {\n    if (!markRatio) return undefined;\n\n    const ratio = parseValue(triggerRatioInputValue, USD_DECIMALS);\n\n    return {\n      ratio: ratio?.gt(0) ? ratio : markRatio.ratio,\n      largestToken: markRatio.largestToken,\n      smallestToken: markRatio.smallestToken,\n    } as TokensRatio;\n  }, [markRatio, triggerRatioInputValue]);\n\n  // TODO: fix\n  const minOutputAmount =\n    fromToken && toToken && triggerRatio\n      ? getAmountByRatio({\n          fromToken,\n          toToken,\n          fromTokenAmount: p.order.initialCollateralDeltaAmount,\n          ratio: triggerRatio?.ratio,\n          shouldInvertRatio: isRatioInverted,\n        })\n      : p.order.minOutputAmount;\n\n  const market = getByKey(marketsInfoData, p.order.marketAddress);\n  const indexToken = getTokenData(tokensData, market?.indexTokenAddress);\n  const markPrice = p.order.isLong ? indexToken?.prices?.minPrice : indexToken?.prices?.maxPrice;\n\n  const positionKey = getPositionKey(\n    p.order.account,\n    p.order.marketAddress,\n    p.order.initialCollateralTokenAddress,\n    p.order.isLong\n  );\n\n  const existingPosition = getByKey(p.positionsData, positionKey);\n\n  const executionFee = useMemo(() => {\n    if (!p.order.isFrozen || !gasLimits || !gasPrice || !tokensData) return undefined;\n\n    let estimatedGas: BigNumber | undefined;\n\n    if (isSwapOrderType(p.order.orderType)) {\n      estimatedGas = estimateExecuteSwapOrderGasLimit(gasLimits, {\n        swapPath: p.order.swapPath,\n      });\n    }\n\n    if (isIncreaseOrderType(p.order.orderType)) {\n      estimatedGas = estimateExecuteIncreaseOrderGasLimit(gasLimits, {\n        swapPath: p.order.swapPath,\n      });\n    }\n\n    if (isDecreaseOrderType(p.order.orderType)) {\n      estimatedGas = estimateExecuteDecreaseOrderGasLimit(gasLimits, {\n        swapPath: p.order.swapPath,\n      });\n    }\n\n    if (!estimatedGas) return undefined;\n\n    return getExecutionFee(chainId, gasLimits, tokensData, estimatedGas, gasPrice);\n  }, [chainId, gasLimits, gasPrice, p.order.isFrozen, p.order.orderType, p.order.swapPath, tokensData]);\n\n  function getError() {\n    if (isSwapOrderType(p.order.orderType)) {\n      if (!triggerRatio?.ratio?.gt(0) || !minOutputAmount.gt(0)) {\n        return t`Enter a ratio`;\n      }\n\n      if (minOutputAmount.eq(p.order.minOutputAmount)) {\n        return t`Enter a new ratio`;\n      }\n\n      if (triggerRatio && !isRatioInverted && markRatio?.ratio.lt(triggerRatio.ratio)) {\n        return t`Price above Mark Price`;\n      }\n\n      if (triggerRatio && isRatioInverted && markRatio?.ratio.gt(triggerRatio.ratio)) {\n        return t`Price below Mark Price`;\n      }\n\n      return;\n    }\n\n    const positionOrder = p.order as PositionOrderInfo;\n\n    if (!markPrice) {\n      return t`Loading...`;\n    }\n\n    if (!sizeDeltaUsd?.gt(0)) {\n      return t`Enter a size`;\n    }\n\n    if (!triggerPrice?.gt(0)) {\n      return t`Enter a price`;\n    }\n\n    if (sizeDeltaUsd?.eq(positionOrder.sizeDeltaUsd) && triggerPrice?.eq(positionOrder.triggerPrice!)) {\n      return t`Enter a new size or price`;\n    }\n\n    if (isLimitOrderType(p.order.orderType)) {\n      if (p.order.isLong) {\n        if (triggerPrice?.gte(markPrice)) {\n          return t`Price above Mark Price`;\n        }\n      } else {\n        if (triggerPrice?.lte(markPrice)) {\n          return t`Price below Mark Price`;\n        }\n      }\n    }\n\n    if (isTriggerDecreaseOrderType(p.order.orderType)) {\n      if (!markPrice) {\n        return t`Loading...`;\n      }\n\n      if (sizeDeltaUsd?.eq(p.order.sizeDeltaUsd || 0) && triggerPrice?.eq(positionOrder.triggerPrice || 0)) {\n        return t`Enter a new size or price`;\n      }\n\n      if (existingPosition?.liquidationPrice) {\n        if (existingPosition.isLong && triggerPrice?.lte(existingPosition?.liquidationPrice)) {\n          return t`Price below Liq. Price`;\n        }\n\n        if (!existingPosition.isLong && triggerPrice?.gte(existingPosition?.liquidationPrice)) {\n          return t`Price above Liq. Price`;\n        }\n      }\n\n      if (p.order.isLong) {\n        if (p.order.orderType === OrderType.LimitDecrease && triggerPrice?.lte(markPrice)) {\n          return t`Price below Mark Price`;\n        }\n\n        if (p.order.orderType === OrderType.StopLossDecrease && triggerPrice?.gte(markPrice)) {\n          return t`Price above Mark Price`;\n        }\n      } else {\n        if (p.order.orderType === OrderType.LimitDecrease && triggerPrice?.gte(markPrice)) {\n          return t`Price above Mark Price`;\n        }\n\n        if (p.order.orderType === OrderType.StopLossDecrease && triggerPrice?.lte(markPrice)) {\n          return t`Price below Mark Price`;\n        }\n      }\n    }\n  }\n\n  function getSubmitButtonState(): { text: string; disabled?: boolean; onClick?: () => void } {\n    const error = getError();\n\n    if (error) {\n      return {\n        text: error,\n        disabled: true,\n      };\n    }\n\n    return {\n      text: \"Update Order\",\n      disabled: false,\n      onClick: onSubmit,\n    };\n  }\n\n  function onSubmit() {\n    const positionOrder = p.order as PositionOrderInfo;\n\n    updateOrderTxn(chainId, library, {\n      orderKey: p.order.key,\n      sizeDeltaUsd: sizeDeltaUsd || positionOrder.sizeDeltaUsd,\n      triggerPrice: triggerPrice || positionOrder.triggerPrice!,\n      acceptablePrice: acceptablePrice || positionOrder.acceptablePrice!,\n      minOutputAmount: minOutputAmount || p.order.minOutputAmount,\n      executionFee: executionFee?.feeTokenAmount,\n      indexToken: indexToken,\n      setPendingTxns: p.setPendingTxns,\n    }).then(() => p.onClose());\n  }\n\n  const submitButtonState = getSubmitButtonState();\n\n  useEffect(\n    function initValues() {\n      if (isInited) return;\n\n      if (isSwapOrderType(p.order.orderType)) {\n        const ratio =\n          fromToken &&\n          toToken &&\n          getTokensRatioByAmounts({\n            fromToken,\n            toToken,\n            fromTokenAmount: p.order.initialCollateralDeltaAmount,\n            toTokenAmount: p.order.minOutputAmount,\n          });\n\n        if (ratio) {\n          setTriggerRatioInputValue(formatAmount(ratio.ratio, USD_DECIMALS, 2));\n        }\n      } else {\n        const positionOrder = p.order as PositionOrderInfo;\n\n        setSizeInputValue(formatAmountFree(positionOrder.sizeDeltaUsd || 0, USD_DECIMALS));\n        setTriggerPriceInputValue(formatAmount(positionOrder.triggerPrice || 0, USD_DECIMALS, 2));\n      }\n\n      setIsInited(true);\n    },\n    [fromToken, isInited, p.order, sizeInputValue, toToken]\n  );\n\n  return (\n    <div className=\"PositionEditor\">\n      <Modal\n        className=\"PositionSeller-modal\"\n        isVisible={true}\n        setIsVisible={p.onClose}\n        label={<Trans>Edit {p.order.title}</Trans>}\n        allowContentTouchMove\n      >\n        {!isSwapOrderType(p.order.orderType) && (\n          <>\n            <BuyInputSection\n              topLeftLabel={isTriggerDecreaseOrderType(p.order.orderType) ? t`Close` : t`Size`}\n              inputValue={sizeInputValue}\n              onInputValueChange={(e) => setSizeInputValue(e.target.value)}\n            >\n              USD\n            </BuyInputSection>\n\n            <BuyInputSection\n              topLeftLabel={t`Price`}\n              topRightLabel={t`Mark:`}\n              topRightValue={formatUsd(markPrice)}\n              onClickTopRightLabel={() => setTriggerPriceInputValue(formatAmount(markPrice, USD_DECIMALS, 2))}\n              inputValue={triggerPirceInputValue}\n              onInputValueChange={(e) => setTriggerPriceInputValue(e.target.value)}\n            >\n              USD\n            </BuyInputSection>\n          </>\n        )}\n\n        {isSwapOrderType(p.order.orderType) && (\n          <>\n            {triggerRatio && (\n              <BuyInputSection\n                topLeftLabel={t`Price`}\n                topRightValue={formatAmount(markRatio?.ratio, USD_DECIMALS, 4)}\n                onClickTopRightLabel={() => {\n                  setTriggerRatioInputValue(formatAmount(markRatio?.ratio, USD_DECIMALS, 10));\n                }}\n                inputValue={triggerRatioInputValue}\n                onInputValueChange={(e) => {\n                  setTriggerRatioInputValue(e.target.value);\n                }}\n              >\n                {`${triggerRatio.smallestToken.symbol}per${triggerRatio.largestToken.symbol}`}\n              </BuyInputSection>\n            )}\n          </>\n        )}\n\n        <div className=\"PositionEditor-info-box\">\n          {!isSwapOrderType(p.order.orderType) && (\n            <>\n              <ExchangeInfoRow label={t`Acceptable Price`} value={formatUsd(acceptablePrice)} />\n              {existingPosition?.liquidationPrice && (\n                <ExchangeInfoRow label={t`Liq. Price`} value={formatUsd(existingPosition.liquidationPrice)} />\n              )}\n            </>\n          )}\n\n          {executionFee?.feeTokenAmount.gt(0) && (\n            <ExchangeInfoRow label={t`Execution Fee`}>\n              {formatTokenAmount(\n                executionFee?.feeTokenAmount,\n                executionFee?.feeToken.decimals,\n                executionFee?.feeToken.symbol,\n                { displayDecimals: 5 }\n              )}\n            </ExchangeInfoRow>\n          )}\n        </div>\n\n        <div className=\"Exchange-swap-button-container\">\n          <Button\n            className=\"w-100\"\n            variant=\"primary-action\"\n            onClick={submitButtonState.onClick}\n            disabled={submitButtonState.disabled}\n          >\n            {submitButtonState.text}\n          </Button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n","import { Web3Provider } from \"@ethersproject/providers\";\nimport { t } from \"@lingui/macro\";\nimport ExchangeRouter from \"abis/ExchangeRouter.json\";\nimport { getContract } from \"config/contracts\";\nimport { BigNumber, ethers } from \"ethers\";\nimport { callContract } from \"lib/contracts\";\nimport { convertToContractPrice } from \"../tokens\";\nimport { Token } from \"domain/tokens\";\n\nexport type UpdateOrderParams = {\n  orderKey: string;\n  indexToken?: Token;\n  sizeDeltaUsd: BigNumber;\n  triggerPrice: BigNumber;\n  acceptablePrice: BigNumber;\n  minOutputAmount: BigNumber;\n  // used to top up execution fee for frozen orders\n  executionFee?: BigNumber;\n  setPendingTxns: (txns: any) => void;\n};\n\nexport function updateOrderTxn(chainId: number, library: Web3Provider, p: UpdateOrderParams) {\n  const {\n    orderKey,\n    sizeDeltaUsd,\n    triggerPrice,\n    acceptablePrice,\n    minOutputAmount,\n    executionFee,\n    setPendingTxns,\n    indexToken,\n  } = p;\n\n  const exchangeRouter = new ethers.Contract(\n    getContract(chainId, \"ExchangeRouter\"),\n    ExchangeRouter.abi,\n    library.getSigner()\n  );\n\n  const orderVaultAddress = getContract(chainId, \"OrderVault\");\n\n  const multicall: { method: string; params: any[] }[] = [];\n  if (p.executionFee?.gt(0)) {\n    multicall.push({ method: \"sendWnt\", params: [orderVaultAddress, executionFee] });\n  }\n  multicall.push({\n    method: \"updateOrder\",\n    params: [\n      orderKey,\n      sizeDeltaUsd,\n      convertToContractPrice(triggerPrice, indexToken?.decimals || 0),\n      convertToContractPrice(acceptablePrice, indexToken?.decimals || 0),\n      minOutputAmount,\n    ],\n  });\n\n  const encodedPayload = multicall\n    .filter(Boolean)\n    .map((call) => exchangeRouter.interface.encodeFunctionData(call!.method, call!.params));\n\n  return callContract(chainId, exchangeRouter, \"multicall\", [encodedPayload], {\n    value: p.executionFee?.gt(0) ? p.executionFee : undefined,\n    sentMsg: t`Updating order`,\n    successMsg: t`Update order executed`,\n    failMsg: t`Failed to update order`,\n    setPendingTxns,\n  });\n}\n","import { Trans, t } from \"@lingui/macro\";\nimport Checkbox from \"components/Checkbox/Checkbox\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport StatsTooltipRow from \"components/StatsTooltip/StatsTooltipRow\";\nimport Tooltip from \"components/Tooltip/Tooltip\";\nimport {\n  OrderInfo,\n  PositionOrderInfo,\n  isDecreaseOrderType,\n  isIncreaseOrderType,\n  isSwapOrderType,\n} from \"domain/synthetics/orders\";\nimport { adaptToV1TokenInfo, convertToUsd, getTokensRatioByAmounts } from \"domain/synthetics/tokens\";\nimport { getMarkPrice } from \"domain/synthetics/trade\";\nimport { getExchangeRate, getExchangeRateDisplay } from \"lib/legacy\";\nimport { formatTokenAmount, formatUsd } from \"lib/numbers\";\n\ntype Props = {\n  order: OrderInfo;\n  onSelectOrder?: () => void;\n  onEditOrder?: () => void;\n  onCancelOrder?: () => void;\n  isSelected?: boolean;\n  isCanceling?: boolean;\n  hideActions?: boolean;\n  error?: string;\n  isLarge: boolean;\n};\n\nexport function OrderItem(p: Props) {\n  function getCollateralText() {\n    const collateralAmount = p.order.initialCollateralDeltaAmount;\n    const collateralToken = p.order.initialCollateralToken;\n\n    const collateralUsd = collateralToken?.prices\n      ? convertToUsd(collateralAmount, collateralToken.decimals, collateralToken.prices.maxPrice)\n      : undefined;\n\n    const usdText = formatUsd(collateralUsd);\n\n    const tokenAmountText = formatTokenAmount(collateralAmount, collateralToken?.decimals, collateralToken?.symbol);\n\n    return `${usdText} (${tokenAmountText})`;\n  }\n\n  function getSwapRatioText() {\n    if (!isSwapOrderType(p.order.orderType)) return {};\n\n    const fromToken = p.order.initialCollateralToken;\n    const fromAmount = p.order.initialCollateralDeltaAmount;\n    const toAmount = p.order.minOutputAmount;\n    const toToken = p.order.targetCollateralToken;\n\n    const fromTokenInfo = fromToken ? adaptToV1TokenInfo(fromToken) : undefined;\n    const toTokenInfo = toToken ? adaptToV1TokenInfo(toToken) : undefined;\n\n    const tokensRatio =\n      fromToken &&\n      toToken &&\n      getTokensRatioByAmounts({\n        fromToken,\n        toToken,\n        fromTokenAmount: fromAmount,\n        toTokenAmount: toAmount,\n      });\n\n    const markExchangeRate =\n      fromToken && toToken\n        ? getExchangeRate(adaptToV1TokenInfo(fromToken), adaptToV1TokenInfo(toToken), false)\n        : undefined;\n\n    const [largest, smallest] =\n      tokensRatio?.largestToken.address === fromToken?.address\n        ? [fromTokenInfo, toTokenInfo]\n        : [toTokenInfo, fromTokenInfo];\n\n    const swapRatioText = tokensRatio.ratio.gt(0) ? getExchangeRateDisplay(tokensRatio?.ratio, largest, smallest) : \"0\";\n    const markSwapRatioText = getExchangeRateDisplay(markExchangeRate, fromTokenInfo, toTokenInfo);\n\n    return { swapRatioText, markSwapRatioText };\n  }\n\n  function renderTitle() {\n    if (p.error) {\n      return (\n        <Tooltip\n          className=\"order-error\"\n          handle={p.order.title}\n          position=\"right-bottom\"\n          handleClassName=\"plain\"\n          renderContent={() => <span className=\"negative\">{p.error}</span>}\n        />\n      );\n    }\n\n    if (p.isLarge) {\n      if (isSwapOrderType(p.order.orderType)) {\n        return p.order.title;\n      }\n\n      const positionOrder = p.order as PositionOrderInfo;\n\n      return (\n        <Tooltip\n          handle={positionOrder.title}\n          position=\"left-bottom\"\n          renderContent={() => {\n            return (\n              <>\n                <StatsTooltipRow label={t`Market`} value={positionOrder.marketInfo.name} showDollar={false} />\n                <StatsTooltipRow label={t`Collateral`} value={getCollateralText()} showDollar={false} />\n              </>\n            );\n          }}\n        />\n      );\n    } else {\n      return p.order.title;\n    }\n  }\n\n  function renderTriggerPrice() {\n    if (isSwapOrderType(p.order.orderType)) {\n      const toAmount = p.order.minOutputAmount;\n      const toToken = p.order.targetCollateralToken;\n      const toAmountText = formatTokenAmount(toAmount, toToken?.decimals, toToken?.symbol);\n\n      const { swapRatioText } = getSwapRatioText();\n\n      return (\n        <>\n          {!p.hideActions ? (\n            <Tooltip\n              handle={swapRatioText}\n              renderContent={() =>\n                t`You will receive at least ${toAmountText} if this order is executed. The execution price may vary depending on swap fees at the time the order is executed.`\n              }\n            />\n          ) : (\n            swapRatioText\n          )}\n        </>\n      );\n    } else {\n      const positionOrder = p.order as PositionOrderInfo;\n      return `${positionOrder.triggerThresholdType} ${formatUsd(positionOrder.triggerPrice)}`;\n    }\n  }\n\n  function renderMarkPrice() {\n    if (isSwapOrderType(p.order.orderType)) {\n      const { markSwapRatioText } = getSwapRatioText();\n\n      return markSwapRatioText;\n    } else {\n      const positionOrder = p.order as PositionOrderInfo;\n\n      const markPrice = getMarkPrice({\n        prices: positionOrder.indexToken.prices,\n        isIncrease: isIncreaseOrderType(positionOrder.orderType),\n        isLong: positionOrder.isLong,\n      });\n\n      return (\n        <Tooltip\n          handle={formatUsd(markPrice)}\n          position=\"right-bottom\"\n          renderContent={() => {\n            return (\n              <Trans>\n                <p>\n                  The price that orders can be executed at may differ slightly from the chart price, as market orders\n                  update oracle prices, while limit/trigger orders do not.\n                </p>\n                <p>\n                  This can also cause limit/triggers to not be executed if the price is not reached for long enough.{\" \"}\n                  <ExternalLink href=\"https://gmxio.gitbook.io/gmx/trading#stop-loss-take-profit-orders\">\n                    Read more\n                  </ExternalLink>\n                  .\n                </p>\n              </Trans>\n            );\n          }}\n        />\n      );\n    }\n  }\n\n  function renderLarge() {\n    return (\n      <tr className=\"Exchange-list-item\">\n        {!p.hideActions && p.onSelectOrder && (\n          <td className=\"Exchange-list-item-type\">\n            <div>\n              <Checkbox isChecked={p.isSelected} setIsChecked={p.onSelectOrder} />\n            </div>\n          </td>\n        )}\n        <td className=\"Exchange-list-item-type\">{isDecreaseOrderType(p.order.orderType) ? t`Trigger` : t`Limit`}</td>\n        <td>{renderTitle()}</td>\n        <td>{renderTriggerPrice()}</td>\n        <td>{renderMarkPrice()}</td>\n        {!p.hideActions && (\n          <>\n            {p.onEditOrder && (\n              <td>\n                <button className=\"Exchange-list-action\" onClick={p.onEditOrder}>\n                  <Trans>Edit</Trans>\n                </button>\n              </td>\n            )}\n            {p.onCancelOrder && (\n              <td>\n                <button className=\"Exchange-list-action\" onClick={p.onCancelOrder} disabled={p.isCanceling}>\n                  <Trans>Cancel</Trans>\n                </button>\n              </td>\n            )}\n          </>\n        )}\n      </tr>\n    );\n  }\n\n  function renderSmall() {\n    return (\n      <div className=\"App-card\">\n        <div className=\"App-card-title-small\">{renderTitle()}</div>\n        <div className=\"App-card-divider\" />\n        <div className=\"App-card-content\">\n          <div className=\"App-card-row\">\n            <div className=\"label\">\n              <Trans>Price</Trans>\n            </div>\n            <div>{renderTriggerPrice()}</div>\n          </div>\n\n          <div className=\"App-card-row\">\n            <div className=\"label\">\n              <Trans>Mark Price</Trans>\n            </div>\n            <div>{renderMarkPrice()}</div>\n          </div>\n\n          {isIncreaseOrderType(p.order.orderType) && (\n            <div className=\"App-card-row\">\n              <div className=\"label\">\n                <Trans>Collateral</Trans>\n              </div>\n              <div>{getCollateralText()}</div>\n            </div>\n          )}\n\n          {!p.hideActions && (\n            <>\n              <div className=\"App-card-divider\"></div>\n              <div className=\"App-card-options\">\n                {p.onEditOrder && (\n                  <button className=\"App-button-option App-card-option\" onClick={p.onEditOrder}>\n                    <Trans>Edit</Trans>\n                  </button>\n                )}\n\n                {p.onCancelOrder && (\n                  <button className=\"App-button-option App-card-option\" onClick={p.onCancelOrder}>\n                    <Trans>Cancel</Trans>\n                  </button>\n                )}\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  return p.isLarge ? renderLarge() : renderSmall();\n}\n","import { Trans, t } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport Checkbox from \"components/Checkbox/Checkbox\";\nimport { OrdersInfoData, isLimitOrderType, isTriggerDecreaseOrderType } from \"domain/synthetics/orders\";\nimport { cancelOrdersTxn } from \"domain/synthetics/orders/cancelOrdersTxn\";\nimport { PositionsInfoData } from \"domain/synthetics/positions\";\nimport { useChainId } from \"lib/chains\";\nimport { Dispatch, SetStateAction, useState } from \"react\";\nimport { OrderEditor } from \"../OrderEditor/OrderEditor\";\nimport { OrderItem } from \"../OrderItem/OrderItem\";\n\ntype Props = {\n  hideActions?: boolean;\n  ordersData?: OrdersInfoData;\n  positionsData?: PositionsInfoData;\n  setSelectedOrdersKeys?: Dispatch<SetStateAction<{ [key: string]: boolean }>>;\n  selectedOrdersKeys?: { [key: string]: boolean };\n  isLoading: boolean;\n  setPendingTxns: (txns: any) => void;\n};\n\nexport function OrderList(p: Props) {\n  const { chainId } = useChainId();\n  const { library } = useWeb3React();\n\n  const [canellingOrdersKeys, setCanellingOrdersKeys] = useState<string[]>([]);\n  const [editingOrderKey, setEditingOrderKey] = useState<string>();\n\n  const orders = Object.values(p.ordersData || {}).filter(\n    (order) => isLimitOrderType(order.orderType) || isTriggerDecreaseOrderType(order.orderType)\n  );\n\n  const isAllOrdersSelected = orders.length > 0 && orders.every((o) => p.selectedOrdersKeys?.[o.key]);\n  const editingOrder = orders.find((o) => o.key === editingOrderKey);\n\n  function onSelectOrder(key: string) {\n    p.setSelectedOrdersKeys?.((prev) => ({ ...prev, [key]: !prev[key] }));\n  }\n\n  function onSelectAllOrders() {\n    if (isAllOrdersSelected) {\n      p.setSelectedOrdersKeys?.({});\n      return;\n    }\n\n    const allSelectedOrders = orders.reduce((acc, order) => ({ ...acc, [order.key]: true }), {});\n\n    p.setSelectedOrdersKeys?.(allSelectedOrders);\n  }\n\n  function onCancelOrder(key: string) {\n    setCanellingOrdersKeys((prev) => [...prev, key]);\n\n    cancelOrdersTxn(chainId, library, { orderKeys: [key], setPendingTxns: p.setPendingTxns }).finally(() =>\n      setCanellingOrdersKeys((prev) => prev.filter((k) => k !== key))\n    );\n  }\n\n  return (\n    <>\n      <div className=\"Exchange-list Orders small\">\n        {orders.length === 0 && (\n          <div className=\"Exchange-empty-positions-list-note App-card\">\n            {p.isLoading ? t`Loading...` : t`No open orders`}\n          </div>\n        )}\n        {!p.isLoading && orders.map((order) => <OrderItem key={order.key} order={order} isLarge={false} />)}\n      </div>\n\n      <table className=\"Exchange-list Orders large App-box\">\n        <tbody>\n          <tr className=\"Exchange-list-header\">\n            {!p.hideActions && orders.length > 0 && (\n              <th>\n                <div className=\"checkbox-inline \">\n                  <Checkbox isChecked={isAllOrdersSelected} setIsChecked={onSelectAllOrders} />\n                </div>\n              </th>\n            )}\n\n            <th>\n              <div>\n                <Trans>Type</Trans>\n              </div>\n            </th>\n            <th>\n              <div>\n                <Trans>Order</Trans>\n              </div>\n            </th>\n            <th>\n              <div>\n                <Trans>Price</Trans>\n              </div>\n            </th>\n            <th>\n              <div>\n                <Trans>Mark Price</Trans>\n              </div>\n            </th>\n          </tr>\n          {orders.length === 0 && (\n            <tr>\n              <td colSpan={5}>{p.isLoading ? t`Loading...` : t`No open orders`}</td>\n            </tr>\n          )}\n          {!p.isLoading &&\n            orders.map((order) => (\n              <OrderItem\n                isSelected={p.selectedOrdersKeys?.[order.key]}\n                key={order.key}\n                order={order}\n                isLarge={true}\n                onSelectOrder={() => onSelectOrder(order.key)}\n                isCanceling={canellingOrdersKeys.includes(order.key)}\n                onCancelOrder={() => onCancelOrder(order.key)}\n                onEditOrder={() => setEditingOrderKey(order.key)}\n              />\n            ))}\n        </tbody>\n      </table>\n\n      {editingOrder && (\n        <OrderEditor\n          positionsData={p.positionsData || {}}\n          order={editingOrder}\n          onClose={() => setEditingOrderKey(undefined)}\n          setPendingTxns={p.setPendingTxns}\n        />\n      )}\n    </>\n  );\n}\n","import { Trans, t } from \"@lingui/macro\";\nimport cx from \"classnames\";\nimport PositionDropdown from \"components/Exchange/PositionDropdown\";\nimport StatsTooltipRow from \"components/StatsTooltip/StatsTooltipRow\";\nimport Tooltip from \"components/Tooltip/Tooltip\";\nimport { PositionOrderInfo, isIncreaseOrderType } from \"domain/synthetics/orders\";\nimport { PositionInfo, formatLeverage } from \"domain/synthetics/positions\";\nimport { formatDeltaUsd, formatTokenAmount, formatUsd } from \"lib/numbers\";\nimport { AiOutlineEdit } from \"react-icons/ai\";\nimport { ImSpinner2 } from \"react-icons/im\";\n\nimport { getBorrowingFeeRateUsd, getFundingFeeRateUsd } from \"domain/synthetics/fees\";\nimport \"./PositionItem.scss\";\nimport { getTriggerThresholdType } from \"domain/synthetics/trade\";\n\nexport type Props = {\n  position: PositionInfo;\n  positionOrders: PositionOrderInfo[];\n  hideActions?: boolean;\n  showPnlAfterFees: boolean;\n  onClosePositionClick?: () => void;\n  onEditCollateralClick?: () => void;\n  onShareClick?: () => void;\n  onSelectPositionClick?: () => void;\n  onOrdersClick?: () => void;\n  isLarge: boolean;\n};\n\nexport function PositionItem(p: Props) {\n  const { positionOrders } = p;\n  const displayedPnl = p.showPnlAfterFees ? p.position.pnlAfterFees : p.position.pnl;\n  const displayedPnlPercentage = p.showPnlAfterFees ? p.position.pnlAfterFeesPercentage : p.position.pnlPercentage;\n\n  function renderNetValue() {\n    return (\n      <Tooltip\n        handle={formatUsd(p.position.netValue)}\n        position={p.isLarge ? \"left-bottom\" : \"right-bottom\"}\n        handleClassName=\"plain\"\n        renderContent={() => (\n          <div>\n            {t`Net Value: Initial Collateral + PnL - Borrow Fee - Funding Fee - Close Fee`}\n            <br />\n            <br />\n            <StatsTooltipRow\n              label={t`Initial Collateral`}\n              value={formatUsd(p.position.initialCollateralUsd) || \"...\"}\n              showDollar={false}\n            />\n            <StatsTooltipRow label={t`PnL`} value={formatDeltaUsd(p.position?.pnl) || \"...\"} showDollar={false} />\n            <StatsTooltipRow\n              label={t`Borrow fee`}\n              value={formatUsd(p.position.pendingBorrowingFeesUsd?.mul(-1)) || \"...\"}\n              showDollar={false}\n            />\n            <StatsTooltipRow\n              label={t`Funding fee`}\n              value={formatDeltaUsd(p.position.pendingFundingFeesUsd) || \"...\"}\n              showDollar={false}\n            />\n            <StatsTooltipRow\n              label={t`Close fee`}\n              showDollar={false}\n              value={formatUsd(p.position.closingFeeUsd?.mul(-1)) || \"...\"}\n            />\n            <br />\n            <StatsTooltipRow\n              label={t`PnL After Fees`}\n              value={formatDeltaUsd(p.position.pnlAfterFees, p.position.pnlAfterFeesPercentage)}\n              showDollar={false}\n            />\n          </div>\n        )}\n      />\n    );\n  }\n\n  function renderCollateral() {\n    return (\n      <>\n        <div className=\"position-list-collateral\">\n          <Tooltip\n            handle={`${formatUsd(p.position.remainingCollateralUsd)}`}\n            position={p.isLarge ? \"left-bottom\" : \"right-bottom\"}\n            handleClassName={cx(\"plain\", { negative: p.position.hasLowCollateral })}\n            renderContent={() => {\n              return (\n                <>\n                  {p.position.hasLowCollateral && (\n                    <div>\n                      <Trans>\n                        WARNING: This position has a low amount of collateral after deducting fees, deposit more\n                        collateral to reduce the position's liquidation risk.\n                      </Trans>\n                      <br />\n                      <br />\n                    </div>\n                  )}\n                  <StatsTooltipRow\n                    label={t`Initial Collateral`}\n                    value={\n                      <>\n                        <div>\n                          {formatTokenAmount(\n                            p.position.collateralAmount,\n                            p.position.collateralToken?.decimals,\n                            p.position.collateralToken?.symbol\n                          )}\n                          <br />({formatUsd(p.position.initialCollateralUsd)})\n                        </div>\n                      </>\n                    }\n                    showDollar={false}\n                  />\n                  <br />\n                  <StatsTooltipRow\n                    label={t`Borrow Fee`}\n                    showDollar={false}\n                    value={formatUsd(p.position.pendingBorrowingFeesUsd.mul(-1)) || \"...\"}\n                  />\n                  <StatsTooltipRow\n                    label={t`Funding Fee`}\n                    showDollar={false}\n                    value={formatDeltaUsd(p.position.pendingFundingFeesUsd) || \"...\"}\n                  />\n                  <br />\n                  <StatsTooltipRow\n                    showDollar={false}\n                    label={t`Borrow Fee / Day`}\n                    value={formatUsd(\n                      getBorrowingFeeRateUsd(\n                        p.position.marketInfo,\n                        p.position.isLong,\n                        p.position.sizeInUsd,\n                        60 * 60 * 24\n                      ).mul(-1)\n                    )}\n                  />\n                  <StatsTooltipRow\n                    showDollar={false}\n                    label={t`Funding Fee / Day`}\n                    value={formatDeltaUsd(\n                      getFundingFeeRateUsd(p.position.marketInfo, p.position.isLong, p.position.sizeInUsd, 60 * 60 * 24)\n                    )}\n                  />\n                  <br />\n                  <Trans>Use the Edit Collateral icon to deposit or withdraw collateral.</Trans>\n                </>\n              );\n            }}\n          />\n          {p.isLarge && (\n            <>\n              {!p.position.isOpening && !p.hideActions && p.onEditCollateralClick && (\n                <span className=\"edit-icon\" onClick={p.onEditCollateralClick}>\n                  <AiOutlineEdit fontSize={16} />\n                </span>\n              )}\n            </>\n          )}\n        </div>\n\n        <div className=\"Exchange-list-info-label Position-collateral-amount  muted\">\n          {formatTokenAmount(\n            p.position.remainingCollateralAmount,\n            p.position.collateralToken?.decimals,\n            p.position.collateralToken?.symbol\n          )}\n        </div>\n\n        {!p.isLarge && (\n          <>\n            {!p.position.isOpening && !p.hideActions && p.onEditCollateralClick && (\n              <span className=\"edit-icon\" onClick={p.onEditCollateralClick}>\n                <AiOutlineEdit fontSize={16} />\n              </span>\n            )}\n          </>\n        )}\n      </>\n    );\n  }\n\n  function renderPositionOrders() {\n    if (positionOrders.length === 0) return null;\n\n    return (\n      <div onClick={p.onOrdersClick}>\n        <Tooltip\n          handle={t`Orders (${positionOrders.length})`}\n          position=\"left-bottom\"\n          handleClassName={cx([\n            \"Exchange-list-info-label\",\n            \"Exchange-position-list-orders\",\n            \"plain\",\n            \"clickable\",\n            \"muted\",\n          ])}\n          renderContent={() => {\n            return (\n              <>\n                <strong>\n                  <Trans>Active Orders</Trans>\n                </strong>\n                {positionOrders.map((order) => {\n                  return (\n                    <div key={order.key} className=\"Position-list-order active-order-tooltip\">\n                      {getTriggerThresholdType(order.orderType, order.isLong)} {formatUsd(order.triggerPrice)}:\n                      {isIncreaseOrderType(order.orderType) ? \"+\" : \"-\"}\n                      {formatUsd(order.sizeDeltaUsd)}\n                    </div>\n                  );\n                })}\n              </>\n            );\n          }}\n        />\n      </div>\n    );\n  }\n\n  function renderLarge() {\n    return (\n      <tr className=\"Exhange-list-item\">\n        <td className=\"clickable\" onClick={p.onSelectPositionClick}>\n          {/* title */}\n          <div className=\"Exchange-list-title\">\n            <Tooltip\n              handle={p.position.indexToken?.symbol}\n              position=\"left-bottom\"\n              handleClassName=\"plain\"\n              renderContent={() => (\n                <div>\n                  <StatsTooltipRow label={t`Market`} value={p.position.marketInfo.name} showDollar={false} />\n\n                  <br />\n\n                  <div>\n                    <Trans>\n                      Click on a row to select the position's market, then use the swap box to increase your position\n                      size, or to set stop-loss / take-profit orders. if needed.\n                    </Trans>\n                    <br />\n                    <br />\n                    <Trans>Use the \"Close\" button to reduce your position size</Trans>\n                  </div>\n                </div>\n              )}\n            />\n            {p.position.pendingUpdate && <ImSpinner2 className=\"spin position-loading-icon\" />}\n          </div>\n          <div className=\"Exchange-list-info-label\" onClick={p.onSelectPositionClick}>\n            <span className=\"muted\">{formatLeverage(p.position.leverage)}&nbsp;</span>\n            <span className={cx({ positive: p.position.isLong, negative: !p.position.isLong })}>\n              {p.position.isLong ? t`Long` : t`Short`}\n            </span>\n          </div>\n        </td>\n        <td>\n          {/* netValue */}\n          {p.position.isOpening ? (\n            t`Opening...`\n          ) : (\n            <>\n              {renderNetValue()}\n              {displayedPnl && (\n                <div\n                  className={cx(\"Exchange-list-info-label\", {\n                    positive: displayedPnl.gt(0),\n                    negative: displayedPnl.lt(0),\n                    muted: displayedPnl.eq(0),\n                  })}\n                >\n                  {formatDeltaUsd(displayedPnl, displayedPnlPercentage)}\n                </div>\n              )}\n            </>\n          )}\n        </td>\n        <td>\n          {formatUsd(p.position.sizeInUsd)}\n          {renderPositionOrders()}\n        </td>\n        <td>\n          {/* collateral */}\n          <div>{renderCollateral()}</div>\n        </td>\n        <td>\n          {/* entryPrice */}\n          {p.position.isOpening ? t`Opening...` : formatUsd(p.position.entryPrice)}\n        </td>\n        <td className=\"clickable\" onClick={p.onSelectPositionClick}>\n          {/* markPrice */}\n          {formatUsd(p.position.markPrice)}\n        </td>\n        <td>\n          {/* liqPrice */}\n          {p.position.isOpening ? formatUsd(p.position.liquidationPrice) : formatUsd(p.position.liquidationPrice)}\n        </td>\n        <td>\n          {/* Close */}\n          {!p.position.isOpening && !p.hideActions && (\n            <button\n              className=\"Exchange-list-action\"\n              onClick={p.onClosePositionClick}\n              disabled={p.position.sizeInUsd.eq(0)}\n            >\n              <Trans>Close</Trans>\n            </button>\n          )}\n        </td>\n        <td>\n          {!p.position.isOpening && !p.hideActions && (\n            <PositionDropdown\n              handleEditCollateral={p.onEditCollateralClick}\n              handleMarketSelect={p.onSelectPositionClick}\n            />\n          )}\n        </td>\n      </tr>\n    );\n  }\n\n  function renderSmall() {\n    return (\n      <div className=\"App-card\">\n        <div className=\"App-card-title\">\n          <span className=\"Exchange-list-title\">{p.position.indexToken?.symbol}</span>\n          {p.position.pendingUpdate && <ImSpinner2 className=\"spin position-loading-icon\" />}\n        </div>\n        <div className=\"App-card-divider\" />\n        <div className=\"App-card-content\">\n          <div className=\"App-card-row\">\n            <div className=\"label\">\n              <Trans>Market</Trans>\n            </div>\n            <div>{p.position.marketInfo.name}</div>\n          </div>\n          <div className=\"App-card-row\">\n            <div className=\"label\">\n              <Trans>Leverage</Trans>\n            </div>\n            <div>\n              {formatLeverage(p.position.leverage)}&nbsp;\n              <span\n                className={cx(\"Exchange-list-side\", {\n                  positive: p.position.isLong,\n                  negative: !p.position.isLong,\n                })}\n              >\n                {p.position.isLong ? t`Long` : t`Short`}\n              </span>\n            </div>\n          </div>\n          <div className=\"App-card-row\">\n            <div className=\"label\">\n              <Trans>Size</Trans>\n            </div>\n            <div>{formatUsd(p.position.sizeInUsd)}</div>\n          </div>\n          <div className=\"App-card-row\">\n            <div className=\"label\">\n              <Trans>Collateral</Trans>\n            </div>\n            <div className=\"position-list-collateral\">{renderCollateral()}</div>\n          </div>\n          <div className=\"App-card-row\">\n            <div className=\"label\">\n              <Trans>PnL</Trans>\n            </div>\n            <div>\n              <span\n                className={cx(\"Exchange-list-info-label\", {\n                  positive: displayedPnl?.gt(0),\n                  negative: displayedPnl?.lt(0),\n                  muted: displayedPnl?.eq(0),\n                })}\n              >\n                {formatDeltaUsd(displayedPnl, displayedPnlPercentage)}\n              </span>\n            </div>\n          </div>\n          <div className=\"App-card-row\">\n            <div className=\"label\">\n              <Trans>Net Value</Trans>\n            </div>\n            <div>{renderNetValue()}</div>\n          </div>\n          <div className=\"App-card-row\">\n            <div className=\"label\">\n              <Trans>Orders</Trans>\n            </div>\n            <div>\n              {!p.positionOrders?.length && \"None\"}\n              {renderPositionOrders()}\n            </div>\n          </div>\n        </div>\n        <div className=\"App-card-divider\" />\n        <div className=\"App-card-content\">\n          <div className=\"App-card-row\">\n            <div className=\"label\">\n              <Trans>Entry Price</Trans>\n            </div>\n            <div>{formatUsd(p.position.entryPrice)}</div>\n          </div>\n          <div className=\"App-card-row\">\n            <div className=\"label\">\n              <Trans>Mark Price</Trans>\n            </div>\n            <div>{formatUsd(p.position.markPrice)}</div>\n          </div>\n          <div className=\"App-card-row\">\n            <div className=\"label\">\n              <Trans>Liq. Price</Trans>\n            </div>\n            <div>{formatUsd(p.position.liquidationPrice)}</div>\n          </div>\n        </div>\n        {!p.hideActions && (\n          <>\n            <div className=\"App-card-divider\"></div>\n            <div className=\"App-card-options Position-buttons-container\">\n              <button\n                className=\"App-button-option App-card-option\"\n                disabled={p.position.sizeInUsd.eq(0)}\n                onClick={p.onClosePositionClick}\n              >\n                <Trans>Close</Trans>\n              </button>\n              <button\n                className=\"App-button-option App-card-option\"\n                disabled={p.position.sizeInUsd.eq(0)}\n                onClick={p.onEditCollateralClick}\n              >\n                <Trans>Edit Collateral</Trans>\n              </button>\n              {/* <button\n                  className=\"Exchange-list-action App-button-option App-card-option\"\n                  onClick={p.onShareClick}\n                  disabled={p.position.sizeInUsd.eq(0)}\n                >\n                  <Trans>Share</Trans>\n                </button> */}\n            </div>\n          </>\n        )}\n      </div>\n    );\n  }\n\n  return p.isLarge ? renderLarge() : renderSmall();\n}\n","import { Trans, t } from \"@lingui/macro\";\nimport { PositionItem } from \"components/Synthetics/PositionItem/PositionItem\";\nimport { OrdersInfoData, PositionOrderInfo, isOrderForPosition } from \"domain/synthetics/orders\";\nimport { PositionsInfoData } from \"domain/synthetics/positions\";\n\ntype Props = {\n  onSelectPositionClick: (key: string) => void;\n  onClosePositionClick: (key: string) => void;\n  onEditCollateralClick: (key: string) => void;\n  positionsData?: PositionsInfoData;\n  ordersData?: OrdersInfoData;\n  savedIsPnlInLeverage: boolean;\n  isLoading: boolean;\n  onOrdersClick: () => void;\n  showPnlAfterFees: boolean;\n};\n\nexport function PositionList(p: Props) {\n  const positions = Object.values(p.positionsData || {});\n  const orders = Object.values(p.ordersData || {});\n  const isDataLoading = p.isLoading;\n\n  return (\n    <div>\n      <div className=\"Exchange-list small\">\n        {positions.length === 0 && (\n          <div className=\"Exchange-empty-positions-list-note App-card\">\n            {isDataLoading ? t`Loading...` : t`No open positions`}\n          </div>\n        )}\n        {!isDataLoading &&\n          positions.map((position) => (\n            <PositionItem\n              key={position.key}\n              positionOrders={orders.filter((order) => isOrderForPosition(order, position.key)) as PositionOrderInfo[]}\n              position={position}\n              onEditCollateralClick={() => p.onEditCollateralClick(position.key)}\n              onClosePositionClick={() => p.onClosePositionClick(position.key)}\n              onOrdersClick={p.onOrdersClick}\n              onSelectPositionClick={() => p.onSelectPositionClick(position.key)}\n              showPnlAfterFees={p.showPnlAfterFees}\n              isLarge={false}\n            />\n          ))}\n      </div>\n\n      <table className=\"Exchange-list large App-box\">\n        <tbody>\n          <tr className=\"Exchange-list-header\">\n            <th>\n              <Trans>Position</Trans>\n            </th>\n            <th>\n              <Trans>Net Value</Trans>\n            </th>\n            <th>\n              <Trans>Size</Trans>\n            </th>\n            <th>\n              <Trans>Collateral</Trans>\n            </th>\n            <th>\n              <Trans>Entry Price</Trans>\n            </th>\n            <th>\n              <Trans>Mark Price</Trans>\n            </th>\n            <th>\n              <Trans>Liq Price</Trans>\n            </th>\n          </tr>\n          {positions.length === 0 && (\n            <tr>\n              <td colSpan={15}>\n                <div className=\"Exchange-empty-positions-list-note\">\n                  {isDataLoading ? t`Loading...` : t`No open positions`}\n                </div>\n              </td>\n            </tr>\n          )}\n          {!isDataLoading &&\n            positions.map((position) => (\n              <PositionItem\n                key={position.key}\n                positionOrders={\n                  orders.filter((order) => isOrderForPosition(order, position.key)) as PositionOrderInfo[]\n                }\n                position={position}\n                onEditCollateralClick={() => p.onEditCollateralClick(position.key)}\n                onClosePositionClick={() => p.onClosePositionClick(position.key)}\n                onOrdersClick={p.onOrdersClick}\n                onSelectPositionClick={() => p.onSelectPositionClick(position.key)}\n                showPnlAfterFees={p.showPnlAfterFees}\n                isLarge={true}\n              />\n            ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n","import { getOracleKeeperUrl } from \"config/oracleKeeper\";\nimport { getNormalizedTokenSymbol, getTokenBySymbol } from \"config/tokens\";\nimport { Bar } from \"domain/tradingview/types\";\nimport { CHART_PERIODS } from \"lib/legacy\";\nimport { parseOraclePrice } from \"./utils\";\nimport { timezoneOffset } from \"domain/prices\";\nimport { TokenPrices } from \"./types\";\n\nexport async function fetchOracleRecentPrice(chainId: number, tokenSymbol: string): Promise<TokenPrices> {\n  const url = getOracleKeeperUrl(chainId, \"/prices/tickers\");\n\n  tokenSymbol = getNormalizedTokenSymbol(tokenSymbol);\n\n  const token = getTokenBySymbol(chainId, tokenSymbol);\n\n  const res = await fetch(url).then((res) => res.json());\n\n  const priceItem = res.find((item) => item.tokenSymbol === tokenSymbol);\n\n  if (!priceItem) {\n    throw new Error(`no price for ${tokenSymbol} found`);\n  }\n\n  const minPrice = parseOraclePrice(priceItem.minPrice, token.decimals, priceItem.oracleDecimals);\n  const maxPrice = parseOraclePrice(priceItem.maxPrice, token.decimals, priceItem.oracleDecimals);\n\n  return { minPrice, maxPrice };\n}\n\nexport async function fetchLastOracleCandles(\n  chainId: number,\n  tokenSymbol: string,\n  period: string,\n  limit: number\n): Promise<Bar[]> {\n  tokenSymbol = getNormalizedTokenSymbol(tokenSymbol);\n\n  const url = getOracleKeeperUrl(chainId, \"/prices/candles\", { tokenSymbol, limit, period });\n\n  const res = await fetch(url).then((res) => res.json());\n\n  const result = res.candles.map(parseOracleCandle);\n\n  return result;\n}\n\nexport async function fetchOracleCandles(chainId: number, tokenSymbol: string, period: string): Promise<Bar[]> {\n  tokenSymbol = getNormalizedTokenSymbol(tokenSymbol);\n\n  const limit = 5000;\n\n  const timeDiff = CHART_PERIODS[period] * limit;\n  const after = Math.floor(Date.now() / 1000 - timeDiff);\n\n  const url = getOracleKeeperUrl(chainId, \"/prices/candles\", { tokenSymbol, period, asc: true, after, limit });\n\n  const res = await fetch(url).then((res) => res.json());\n\n  const result = res.candles.map(parseOracleCandle);\n\n  return result;\n}\n\nfunction parseOracleCandle(rawCandle: number[]): Bar {\n  const [timestamp, open, high, low, close] = rawCandle;\n\n  return {\n    time: timestamp + timezoneOffset,\n    open,\n    high,\n    low,\n    close,\n  };\n}\n","import { TVDataProvider } from \"domain/tradingview/TVDataProvider\";\nimport { fetchLastOracleCandles, fetchOracleCandles, fetchOracleRecentPrice } from \"../tokens/requests\";\nimport { getChainlinkChartPricesFromGraph } from \"domain/prices\";\nimport { sleep } from \"lib/sleep\";\nimport { Bar } from \"domain/tradingview/types\";\nimport { getMidPrice } from \"../tokens\";\nimport { BigNumber } from \"ethers\";\n\nexport class SyntheticsTVDataProvider extends TVDataProvider {\n  candlesTimeout = 5000;\n\n  override async getCurrentPriceOfToken(chainId: number, ticker: string) {\n    return fetchOracleRecentPrice(chainId, ticker)\n      .then((prices) => getMidPrice(prices))\n      .catch(() => BigNumber.from(0));\n  }\n\n  override async getTokenChartPrice(chainId: number, ticker: string, period: string): Promise<Bar[]> {\n    return Promise.race([\n      fetchOracleCandles(chainId, ticker, period),\n      sleep(this.candlesTimeout).then(() => Promise.reject(`Oracle candles timeout`)),\n    ])\n      .catch((ex) => {\n        // eslint-disable-next-line no-console\n        console.warn(ex, \"Switching to graph chainlink data\");\n        return Promise.race([\n          getChainlinkChartPricesFromGraph(ticker, period) as Promise<Bar[]>,\n          sleep(this.candlesTimeout).then(() => Promise.reject(`Chainlink candles timeout`)),\n        ]);\n      })\n      .catch((ex) => {\n        // eslint-disable-next-line no-console\n        console.warn(\"Load history candles failed\", ex);\n        return [] as Bar[];\n      });\n  }\n\n  override getTokenLastBars(chainId: number, ticker: string, period: string, limit: number) {\n    return fetchLastOracleCandles(chainId, ticker, period, limit);\n  }\n}\n","import { t } from \"@lingui/macro\";\nimport cx from \"classnames\";\nimport { Dropdown, DropdownOption } from \"components/Dropdown/Dropdown\";\nimport TVChartContainer, { ChartLine } from \"components/TVChartContainer/TVChartContainer\";\nimport { convertTokenAddress, isChartAvailabeForToken } from \"config/tokens\";\nimport { OrdersInfoData, PositionOrderInfo, isIncreaseOrderType, isSwapOrderType } from \"domain/synthetics/orders\";\nimport { PositionsInfoData } from \"domain/synthetics/positions\";\nimport { getCandlesDelta, getMidPrice, getTokenData, useAvailableTokensData } from \"domain/synthetics/tokens\";\nimport { useLastCandles } from \"domain/synthetics/tokens/useLastCandles\";\nimport { Token } from \"domain/tokens\";\nimport { TVDataProvider } from \"domain/tradingview/TVDataProvider\";\nimport { useChainId } from \"lib/chains\";\nimport { CHART_PERIODS, USD_DECIMALS } from \"lib/legacy\";\nimport { useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport { formatAmount, formatUsd, numberWithCommas } from \"lib/numbers\";\nimport { useEffect, useMemo, useRef } from \"react\";\nimport { SyntheticsTVDataProvider } from \"domain/synthetics/tradingview/SyntheticsTVDataProvider\";\n\nimport \"./TVChart.scss\";\n\nexport type Props = {\n  ordersInfo?: OrdersInfoData;\n  positionsInfo?: PositionsInfoData;\n  savedShouldShowPositionLines: boolean;\n  chartTokenAddress?: string;\n  onSelectChartTokenAddress: (tokenAddress: string) => void;\n  availableTokens?: Token[];\n  disableSelectToken?: boolean;\n};\n\nconst DEFAULT_PERIOD = \"5m\";\n\nexport function TVChart({\n  ordersInfo,\n  positionsInfo,\n  savedShouldShowPositionLines,\n  chartTokenAddress,\n  onSelectChartTokenAddress,\n  availableTokens,\n  disableSelectToken,\n}: Props) {\n  const { chainId } = useChainId();\n  const { tokensData } = useAvailableTokensData(chainId);\n\n  const dataProvider = useRef<TVDataProvider>();\n  const [period, setPeriod] = useLocalStorageSerializeKey([chainId, \"Chart-period\"], DEFAULT_PERIOD);\n  const chartToken = getTokenData(tokensData, chartTokenAddress);\n\n  const tokenOptions: DropdownOption[] =\n    availableTokens\n      ?.filter((token) => isChartAvailabeForToken(chainId, token.symbol))\n      .map((token) => ({\n        label: `${token.symbol} / USD`,\n        value: token.address,\n      })) || [];\n\n  const selectedTokenOption = tokenOptions.find((option) => option.value === chartTokenAddress);\n  const currentAveragePrice = chartToken?.prices ? getMidPrice(chartToken.prices) : undefined;\n\n  const { candles } = useLastCandles(chainId, chartToken?.symbol, period);\n\n  const period24Hours = 24 * 60 * 60;\n\n  const candlesDelta = useMemo(() => {\n    if (!candles || !currentAveragePrice) {\n      return undefined;\n    }\n\n    return getCandlesDelta(candles, currentAveragePrice, period24Hours);\n  }, [candles, currentAveragePrice, period24Hours]);\n\n  const chartLines = useMemo(() => {\n    if (!chartTokenAddress) {\n      return [];\n    }\n\n    const orderLines: ChartLine[] = Object.values(ordersInfo || {})\n      .filter((order) => {\n        if (isSwapOrderType(order.orderType)) {\n          return false;\n        }\n\n        const positionOrder = order as PositionOrderInfo;\n\n        return (\n          positionOrder.marketInfo &&\n          positionOrder.triggerPrice &&\n          convertTokenAddress(chainId, positionOrder.marketInfo.indexTokenAddress, \"wrapped\") ===\n            convertTokenAddress(chainId, chartTokenAddress, \"wrapped\")\n        );\n      })\n      .map((order) => {\n        const positionOrder = order as PositionOrderInfo;\n\n        const longOrShortText = order.isLong ? t`Long` : t`Short`;\n        const orderTypeText = isIncreaseOrderType(order.orderType) ? t`Inc.` : t`Dec.`;\n        const tokenSymbol = getTokenData(tokensData, positionOrder.marketInfo.indexTokenAddress, \"native\")?.symbol;\n\n        return {\n          title: `${longOrShortText} ${orderTypeText} ${tokenSymbol}`,\n          price: parseFloat(formatAmount(positionOrder.triggerPrice, USD_DECIMALS, 2)),\n        };\n      });\n\n    const positionLines = Object.values(positionsInfo || {}).reduce((acc, position) => {\n      if (\n        position.marketInfo &&\n        convertTokenAddress(chainId, position.marketInfo.indexTokenAddress, \"wrapped\") ===\n          convertTokenAddress(chainId, chartTokenAddress, \"wrapped\")\n      ) {\n        const longOrShortText = position.isLong ? t`Long` : t`Short`;\n        const tokenSymbol = getTokenData(tokensData, position.marketInfo?.indexTokenAddress, \"native\")?.symbol;\n\n        acc.push({\n          title: t`Open ${longOrShortText} ${tokenSymbol}`,\n          price: parseFloat(formatAmount(position.entryPrice, USD_DECIMALS, 2)),\n        });\n\n        acc.push({\n          title: t`Liq. ${longOrShortText} ${tokenSymbol}`,\n          price: parseFloat(formatAmount(position.liquidationPrice, USD_DECIMALS, 2)),\n        });\n      }\n\n      return acc;\n    }, [] as ChartLine[]);\n\n    return orderLines.concat(positionLines);\n  }, [chainId, chartTokenAddress, ordersInfo, positionsInfo, tokensData]);\n\n  function onSelectTokenOption(option: DropdownOption) {\n    onSelectChartTokenAddress(option.value);\n  }\n\n  function onSelectChartToken(token: Token) {\n    onSelectChartTokenAddress(token.address);\n  }\n\n  useEffect(() => {\n    dataProvider.current = new SyntheticsTVDataProvider();\n  }, []);\n\n  useEffect(\n    function updatePeriod() {\n      if (!period || !(period in CHART_PERIODS)) {\n        setPeriod(DEFAULT_PERIOD);\n      }\n    },\n    [period, setPeriod]\n  );\n\n  return (\n    <div className=\"ExchangeChart tv\">\n      <div className=\"ExchangeChart-top App-box App-box-border\">\n        <div className=\"ExchangeChart-top-inner\">\n          <div>\n            <Dropdown\n              className=\"chart-token-selector\"\n              options={tokenOptions}\n              selectedOption={selectedTokenOption}\n              onSelect={onSelectTokenOption}\n              disabled={disableSelectToken}\n            />\n          </div>\n          <div>\n            <div className=\"ExchangeChart-main-price\">{formatUsd(chartToken?.prices?.maxPrice) || \"...\"}</div>\n            <div className=\"ExchangeChart-info-label\">{formatUsd(chartToken?.prices?.minPrice) || \"...\"}</div>\n          </div>\n          <div>\n            <div className=\"ExchangeChart-info-label\">24h Change</div>\n            <div\n              className={cx({\n                positive: candlesDelta?.deltaPercentage && candlesDelta?.deltaPercentage > 0,\n                negative: candlesDelta?.deltaPercentage && candlesDelta?.deltaPercentage < 0,\n              })}\n            >\n              {candlesDelta?.deltaPercentageStr || \"-\"}\n            </div>\n          </div>\n          <div className=\"ExchangeChart-additional-info\">\n            <div className=\"ExchangeChart-info-label\">24h High</div>\n            <div>{candlesDelta?.high ? numberWithCommas(candlesDelta.high.toFixed(2)) : \"-\"}</div>\n          </div>\n          <div className=\"ExchangeChart-additional-info\">\n            <div className=\"ExchangeChart-info-label\">24h Low</div>\n            <div>{candlesDelta?.low ? numberWithCommas(candlesDelta?.low.toFixed(2)) : \"-\"}</div>\n          </div>\n        </div>\n      </div>\n      <div className=\"ExchangeChart-bottom App-box App-box-border\">\n        {chartToken && (\n          <TVChartContainer\n            chartLines={chartLines}\n            savedShouldShowPositionLines={savedShouldShowPositionLines}\n            symbol={chartToken.symbol}\n            chainId={chainId}\n            onSelectToken={onSelectChartToken}\n            dataProvider={dataProvider.current}\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n","import useSWR from \"swr\";\nimport { fetchLastOracleCandles } from \"./requests\";\n\nexport function useLastCandles(chainId: number, tokenSymbol?: string, period?: string, limit = 1000) {\n  const { data } = useSWR(tokenSymbol && period ? [chainId, \"useLastCandles\", tokenSymbol, period, limit] : null, {\n    fetcher: () => fetchLastOracleCandles(chainId, tokenSymbol!, period!, limit),\n  });\n\n  return {\n    candles: data,\n  };\n}\n","import { ReactNode } from \"react\";\nimport { BsArrowRight } from \"react-icons/bs\";\n\ntype Props = {\n  from?: ReactNode;\n  to?: ReactNode;\n};\n\nexport function ValueTransition(p: Props) {\n  if (!p.to || p.to === p.from) return <>{p.from}</>;\n  if (!p.from) return <>{p.to}</>;\n\n  return (\n    <>\n      <div className=\"inline-block muted\">\n        {p.from}\n        <BsArrowRight className=\"transition-arrow\" />\n      </div>\n      {p.to}\n    </>\n  );\n}\n","import { Trans, t } from \"@lingui/macro\";\nimport cx from \"classnames\";\nimport ExchangeInfoRow from \"components/Exchange/ExchangeInfoRow\";\nimport StatsTooltipRow from \"components/StatsTooltip/StatsTooltipRow\";\nimport Tooltip from \"components/Tooltip/Tooltip\";\nimport { getToken } from \"config/tokens\";\nimport { ExecutionFee, FeeItem, SwapFeeItem } from \"domain/synthetics/fees\";\nimport { useChainId } from \"lib/chains\";\nimport { formatDeltaUsd, formatPercentage, formatTokenAmountWithUsd } from \"lib/numbers\";\nimport { ReactNode, useMemo } from \"react\";\nimport { TradeFeesType } from \"domain/synthetics/trade\";\nimport \"./TradeFeesRow.scss\";\n\ntype Props = {\n  totalTradeFees?: FeeItem;\n  swapFees?: SwapFeeItem[];\n  swapPriceImpact?: FeeItem;\n  positionFee?: FeeItem;\n  positionPriceImpact?: FeeItem;\n  executionFee?: ExecutionFee;\n  borrowFee?: FeeItem;\n  fundingFee?: FeeItem;\n  borrowFeeRateStr?: string;\n  fundingFeeRateStr?: string;\n  isTop?: boolean;\n  showOnZeroTradeFee?: boolean;\n  feesType: TradeFeesType;\n};\n\ntype FeeRow = {\n  id: string;\n  label: ReactNode;\n  value: ReactNode;\n};\n\nexport function TradeFeesRow(p: Props) {\n  const { chainId } = useChainId();\n\n  const feeRows: FeeRow[] = useMemo(() => {\n    const positionPriceImpactRow = p.positionPriceImpact?.deltaUsd.abs().gt(0)\n      ? {\n          id: \"positionPriceImpact\",\n          label: (\n            <>\n              <div>{t`Position Price impact`}:</div>\n              <div>({formatPercentage(p.positionPriceImpact.bps.abs())} of position size)</div>\n            </>\n          ),\n          value: formatDeltaUsd(p.positionPriceImpact.deltaUsd),\n        }\n      : undefined;\n\n    const swapPriceImpactRow = p.swapPriceImpact?.deltaUsd.abs().gt(0)\n      ? {\n          id: \"swapPriceImpact\",\n          label: (\n            <>\n              <div>{t`Swap Price impact`}:</div>\n              <div>({formatPercentage(p.swapPriceImpact.bps.abs())} of swap amount)</div>\n            </>\n          ),\n          value: formatDeltaUsd(p.swapPriceImpact.deltaUsd),\n        }\n      : undefined;\n\n    const swapFeeRows: FeeRow[] =\n      p.swapFees?.map((swap) => ({\n        id: `swap-${swap.tokenInAddress}-${swap.tokenOutAddress}`,\n        label: (\n          <>\n            <div>\n              {t`Swap ${getToken(chainId, swap.tokenInAddress).symbol} to ${\n                getToken(chainId, swap.tokenOutAddress).symbol\n              }`}\n              :\n            </div>\n            <div>({formatPercentage(swap.bps.abs())} of swap amount)</div>\n          </>\n        ),\n        value: formatDeltaUsd(swap.deltaUsd),\n      })) || [];\n\n    const positionFeeRow = p.positionFee\n      ? {\n          id: \"positionFee\",\n          label: (\n            <>\n              <div>{p.feesType === \"increase\" ? t`Open Fee` : t`Close Fee`}:</div>\n              <div>({formatPercentage(p.positionFee.bps.abs())} of position size)</div>\n            </>\n          ),\n          value: formatDeltaUsd(p.positionFee.deltaUsd),\n        }\n      : undefined;\n\n    const borrowFeeRow = p.borrowFee?.deltaUsd?.abs().gt(0)\n      ? {\n          id: \"borrowFee\",\n          label: (\n            <>\n              <div>{t`Borrow Fee`}:</div>\n              <div>({formatPercentage(p.borrowFee.bps.abs())} of collateral)</div>\n            </>\n          ),\n          value: formatDeltaUsd(p.borrowFee.deltaUsd),\n        }\n      : undefined;\n\n    const fundingFeeRow = p.fundingFee?.deltaUsd?.lt(0)\n      ? {\n          id: \"fundingFee\",\n          label: (\n            <>\n              <div>{t`Funding Fee`}:</div>\n              <div>({formatPercentage(p.fundingFee.bps.abs())} of collateral)</div>\n            </>\n          ),\n          value: formatDeltaUsd(p.fundingFee.deltaUsd),\n        }\n      : undefined;\n\n    const borrowFeeRateRow = p.borrowFeeRateStr\n      ? { id: \"borrowFeeRate\", label: t`Borrow Fee Rate`, value: p.borrowFeeRateStr }\n      : undefined;\n\n    const fundingFeeRateRow = p.fundingFeeRateStr\n      ? { id: \"fundingFeeRate\", label: t`Funding Fee Rate`, value: p.fundingFeeRateStr }\n      : undefined;\n\n    const executionFeeRow = p.executionFee?.feeTokenAmount.gt(0)\n      ? {\n          label: t`Execution Fee`,\n          value: formatTokenAmountWithUsd(\n            p.executionFee.feeTokenAmount.mul(-1),\n            p.executionFee.feeUsd.mul(-1),\n            p.executionFee.feeToken.symbol,\n            p.executionFee.feeToken.decimals\n          ),\n        }\n      : undefined;\n\n    if (p.feesType === \"swap\") {\n      return [swapPriceImpactRow, ...swapFeeRows, executionFeeRow].filter(Boolean) as FeeRow[];\n    }\n\n    if (p.feesType === \"increase\") {\n      return [\n        positionPriceImpactRow,\n        swapPriceImpactRow,\n        ...swapFeeRows,\n        positionFeeRow,\n        borrowFeeRow,\n        fundingFeeRow,\n        borrowFeeRateRow,\n        fundingFeeRateRow,\n        executionFeeRow,\n      ].filter(Boolean) as FeeRow[];\n    }\n\n    if (p.feesType === \"decrease\") {\n      return [\n        positionPriceImpactRow,\n        swapPriceImpactRow,\n        borrowFeeRow,\n        fundingFeeRow,\n        positionFeeRow,\n        ...swapFeeRows,\n        executionFeeRow,\n      ].filter(Boolean) as FeeRow[];\n    }\n\n    if (p.feesType === \"edit\") {\n      return [borrowFeeRow, fundingFeeRow, executionFeeRow].filter(Boolean) as FeeRow[];\n    }\n\n    return [];\n  }, [\n    p.positionPriceImpact?.deltaUsd,\n    p.positionPriceImpact?.bps,\n    p.swapPriceImpact?.deltaUsd,\n    p.swapPriceImpact?.bps,\n    p.swapFees,\n    p.positionFee,\n    p.feesType,\n    p.borrowFee?.deltaUsd,\n    p.borrowFee?.bps,\n    p.fundingFee?.deltaUsd,\n    p.fundingFee?.bps,\n    p.borrowFeeRateStr,\n    p.fundingFeeRateStr,\n    p.executionFee?.feeTokenAmount,\n    p.executionFee?.feeUsd,\n    p.executionFee?.feeToken.symbol,\n    p.executionFee?.feeToken.decimals,\n    chainId,\n  ]);\n\n  const totalFeeUsd = useMemo(() => {\n    return p.totalTradeFees?.deltaUsd.sub(p.executionFee?.feeUsd || 0);\n  }, [p.executionFee, p.totalTradeFees]);\n\n  return (\n    <ExchangeInfoRow\n      isTop={p.isTop}\n      label={p.feesType === \"edit\" ? <Trans>Fees</Trans> : <Trans>Fees and price impact</Trans>}\n      value={\n        <>\n          {!totalFeeUsd || totalFeeUsd.eq(0) ? (\n            \"-\"\n          ) : (\n            <Tooltip\n              className=\"TradeFeesRow-tooltip\"\n              handle={<span className={cx({ positive: totalFeeUsd.gt(0) })}>{formatDeltaUsd(totalFeeUsd)}</span>}\n              position=\"right-top\"\n              renderContent={() => (\n                <div>\n                  {feeRows.map((feeRow, i) => (\n                    <StatsTooltipRow\n                      key={feeRow.id}\n                      label={feeRow.label}\n                      value={feeRow.value}\n                      showDollar={false}\n                      className=\"TradeFeesRow-fee-row\"\n                    />\n                  ))}\n                </div>\n              )}\n            />\n          )}\n        </>\n      }\n    />\n  );\n}\n","import { Plural, Trans, t } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport cx from \"classnames\";\nimport { ApproveTokenButton } from \"components/ApproveTokenButton/ApproveTokenButton\";\nimport Button from \"components/Button/Button\";\nimport Checkbox from \"components/Checkbox/Checkbox\";\nimport ExchangeInfoRow from \"components/Exchange/ExchangeInfoRow\";\nimport Modal from \"components/Modal/Modal\";\nimport StatsTooltipRow from \"components/StatsTooltip/StatsTooltipRow\";\nimport Tooltip from \"components/Tooltip/Tooltip\";\nimport { ValueTransition } from \"components/ValueTransition/ValueTransition\";\nimport { getContract } from \"config/contracts\";\nimport { HIGH_SPREAD_THRESHOLD } from \"config/factors\";\nimport { useSyntheticsEvents } from \"context/SyntheticsEvents\";\nimport { useUserReferralCode } from \"domain/referrals\";\nimport { ExecutionFee, getBorrowingFeeFactor, getFundingFeeFactor, getIsHighPriceImpact } from \"domain/synthetics/fees\";\nimport { MarketInfo } from \"domain/synthetics/markets\";\nimport {\n  OrderType,\n  OrdersInfoData,\n  PositionOrderInfo,\n  createDecreaseOrderTxn,\n  createIncreaseOrderTxn,\n  createSwapOrderTxn,\n  isLimitOrderType,\n  isOrderForPosition,\n  isTriggerDecreaseOrderType,\n} from \"domain/synthetics/orders\";\nimport { cancelOrdersTxn } from \"domain/synthetics/orders/cancelOrdersTxn\";\nimport { createWrapOrUnwrapTxn } from \"domain/synthetics/orders/createWrapOrUnwrapTxn\";\nimport { PositionInfo, formatLeverage, getPositionKey } from \"domain/synthetics/positions\";\nimport {\n  TokenData,\n  TokensRatio,\n  convertToTokenAmount,\n  formatTokensRatio,\n  getNeedTokenApprove,\n  useAvailableTokensData,\n  useTokensAllowanceData,\n} from \"domain/synthetics/tokens\";\nimport {\n  DecreasePositionAmounts,\n  IncreasePositionAmounts,\n  NextPositionValues,\n  SwapAmounts,\n  TradeFees,\n  TriggerThresholdType,\n  applySlippage,\n} from \"domain/synthetics/trade\";\nimport { TradeFlags } from \"domain/synthetics/trade/useTradeFlags\";\nimport { getIsEquivalentTokens, getSpread } from \"domain/tokens\";\nimport { BigNumber } from \"ethers\";\nimport { useChainId } from \"lib/chains\";\nimport { BASIS_POINTS_DIVISOR, USD_DECIMALS } from \"lib/legacy\";\nimport {\n  formatAmount,\n  formatDeltaUsd,\n  formatPercentage,\n  formatTokenAmount,\n  formatTokenAmountWithUsd,\n  formatUsd,\n} from \"lib/numbers\";\nimport { useCallback, useMemo, useState } from \"react\";\nimport { TradeFeesRow } from \"../TradeFeesRow/TradeFeesRow\";\nimport \"./ConfirmationBox.scss\";\n\nexport type Props = {\n  tradeFlags: TradeFlags;\n  isWrapOrUnwrap: boolean;\n  fromToken?: TokenData;\n  toToken?: TokenData;\n  markPrice?: BigNumber;\n  markRatio?: TokensRatio;\n  triggerPrice?: BigNumber;\n  triggerRatio?: TokensRatio;\n  marketInfo?: MarketInfo;\n  collateralToken?: TokenData;\n  swapAmounts?: SwapAmounts;\n  increaseAmounts?: IncreasePositionAmounts;\n  decreaseAmounts?: DecreasePositionAmounts;\n  nextPositionValues?: NextPositionValues;\n  keepLeverage?: boolean;\n  swapLiquidityUsd?: BigNumber;\n  longLiquidityUsd?: BigNumber;\n  shortLiquidityUsd?: BigNumber;\n  fees?: TradeFees;\n  executionFee?: ExecutionFee;\n  error?: string;\n  existingPosition?: PositionInfo;\n  shouldDisableValidation: boolean;\n  allowedSlippage?: number;\n  isHigherSlippageAllowed?: boolean;\n  ordersData?: OrdersInfoData;\n  setIsHigherSlippageAllowed: (isHigherSlippageAllowed: boolean) => void;\n  setKeepLeverage: (keepLeverage: boolean) => void;\n  onClose: () => void;\n  onSubmitted: () => void;\n  setPendingTxns: (txns: any) => void;\n  onConnectWallet: () => void;\n};\n\nexport function ConfirmationBox(p: Props) {\n  const {\n    tradeFlags,\n    isWrapOrUnwrap,\n    fromToken,\n    toToken,\n    markPrice,\n    markRatio,\n    triggerPrice,\n    triggerRatio,\n    marketInfo,\n    collateralToken,\n    swapAmounts,\n    increaseAmounts,\n    decreaseAmounts,\n    nextPositionValues,\n    swapLiquidityUsd,\n    longLiquidityUsd,\n    shortLiquidityUsd,\n    keepLeverage,\n    fees,\n    executionFee,\n    error,\n    existingPosition,\n    shouldDisableValidation,\n    allowedSlippage,\n    isHigherSlippageAllowed,\n    ordersData,\n    setIsHigherSlippageAllowed,\n    setKeepLeverage,\n    onClose,\n    onSubmitted,\n    setPendingTxns,\n    onConnectWallet,\n  } = p;\n\n  const { isLong, isSwap, isMarket, isLimit, isTrigger, isIncrease } = tradeFlags;\n  const { indexToken } = marketInfo || {};\n\n  const { library, account } = useWeb3React();\n  const { chainId } = useChainId();\n  const { tokensData } = useAvailableTokensData(chainId);\n  const { setPendingPositionUpdate } = useSyntheticsEvents();\n\n  const referralCodeData = useUserReferralCode(library, chainId, account);\n\n  const [isTriggerWarningAccepted, setIsTriggerWarningAccepted] = useState(false);\n  const [isHighPriceImpactAccepted, setIsHighPriceImpactAccepted] = useState(false);\n  const [isLimitOrdersVisible, setIsLimitOrdersVisible] = useState(false);\n\n  const payAmount = useMemo(() => {\n    if (isSwap && !isWrapOrUnwrap) {\n      return swapAmounts?.amountIn;\n    }\n    if (isIncrease) {\n      return increaseAmounts?.initialCollateralAmount;\n    }\n  }, [increaseAmounts?.initialCollateralAmount, isIncrease, isSwap, isWrapOrUnwrap, swapAmounts?.amountIn]);\n\n  const { tokensAllowanceData } = useTokensAllowanceData(chainId, {\n    spenderAddress: getContract(chainId, \"SyntheticsRouter\"),\n    tokenAddresses: fromToken ? [fromToken.address] : [],\n  });\n\n  const needPayTokenApproval =\n    !isWrapOrUnwrap &&\n    tokensAllowanceData &&\n    fromToken &&\n    payAmount &&\n    getNeedTokenApprove(tokensAllowanceData, fromToken.address, payAmount);\n\n  const isHighPriceImpact =\n    getIsHighPriceImpact(fees?.swapPriceImpact) || getIsHighPriceImpact(fees?.positionPriceImpact);\n\n  const positionKey = useMemo(() => {\n    if (!account || !marketInfo || !collateralToken) {\n      return undefined;\n    }\n\n    return getPositionKey(account, marketInfo.marketTokenAddress, collateralToken.address, isLong);\n  }, [account, collateralToken, isLong, marketInfo]);\n\n  const positionOrders = useMemo(() => {\n    if (!positionKey || !ordersData) {\n      return [];\n    }\n\n    return Object.values(ordersData).filter((order) => isOrderForPosition(order, positionKey)) as PositionOrderInfo[];\n  }, [ordersData, positionKey]);\n\n  const existingLimitOrders = useMemo(\n    () => positionOrders.filter((order) => isLimitOrderType(order.orderType)),\n    [positionOrders]\n  );\n\n  const existingTriggerOrders = useMemo(\n    () => positionOrders.filter((order) => isTriggerDecreaseOrderType(order.orderType)),\n    [positionOrders]\n  );\n\n  const decreaseOrdersThatWillBeExecuted = useMemo(() => {\n    if (!existingPosition || !markPrice) {\n      return [];\n    }\n\n    return existingTriggerOrders.filter((order) => {\n      return order.triggerThresholdType === TriggerThresholdType.Above\n        ? markPrice.gt(order.triggerPrice)\n        : markPrice.lt(order.triggerPrice);\n    });\n  }, [existingPosition, existingTriggerOrders, markPrice]);\n\n  const swapSpreadInfo = useMemo(() => {\n    let spread = BigNumber.from(0);\n\n    if (isSwap && fromToken && toToken) {\n      const fromSpread = getSpread(fromToken.prices);\n      const toSpread = getSpread(toToken.prices);\n\n      spread = fromSpread.add(toSpread);\n    } else if (isIncrease && fromToken && indexToken) {\n      const fromSpread = getSpread(fromToken.prices);\n      const toSpread = getSpread(indexToken.prices);\n\n      spread = fromSpread.add(toSpread);\n\n      if (isLong) {\n        spread = fromSpread;\n      }\n    }\n\n    const isHigh = spread.gt(HIGH_SPREAD_THRESHOLD);\n\n    const showSpread = isMarket;\n\n    return { spread, showSpread, isHigh };\n  }, [isSwap, fromToken, toToken, isIncrease, indexToken, isMarket, isLong]);\n\n  const collateralSpreadInfo = useMemo(() => {\n    if (!indexToken || !collateralToken) {\n      return undefined;\n    }\n\n    let totalSpread = getSpread(indexToken.prices);\n\n    // TODO: convert addresses\n    if (getIsEquivalentTokens(collateralToken, indexToken)) {\n      return {\n        spread: totalSpread,\n        isHigh: totalSpread.gt(HIGH_SPREAD_THRESHOLD),\n      };\n    }\n\n    totalSpread = totalSpread.add(getSpread(collateralToken!.prices!));\n\n    return {\n      spread: totalSpread,\n      isHigh: totalSpread.gt(HIGH_SPREAD_THRESHOLD),\n    };\n  }, [collateralToken, indexToken]);\n\n  const title = useMemo(() => {\n    if (isMarket) {\n      if (isSwap) {\n        return t`Confirm Swap`;\n      }\n\n      return isLong ? t`Confirm Long` : t`Confirm Short`;\n    }\n\n    if (isLimit) {\n      return t`Confirm Limit Order`;\n    }\n\n    return t`Confirm Trigger Order`;\n  }, [isLimit, isLong, isMarket, isSwap]);\n\n  const confirmationError = useMemo(() => {\n    if (error) {\n      return error;\n    }\n\n    if (needPayTokenApproval) {\n      return t`Pending ${fromToken?.symbol} approval`;\n    }\n\n    if (isHighPriceImpact && !isHighPriceImpactAccepted) {\n      return t`Need to accept price impact`;\n    }\n  }, [error, fromToken?.symbol, isHighPriceImpact, isHighPriceImpactAccepted, needPayTokenApproval]);\n\n  const submitText = useMemo(() => {\n    if (isMarket) {\n      if (isSwap) {\n        return t`Swap`;\n      } else {\n        return isLong ? t`Long` : t`Short`;\n      }\n    } else if (isLimit) {\n      return t`Confirm Limit Order`;\n    } else {\n      return t`Confirm Trigger Order`;\n    }\n  }, [isLimit, isLong, isMarket, isSwap]);\n\n  function onCancelOrderClick(key: string): void {\n    cancelOrdersTxn(chainId, library, { orderKeys: [key], setPendingTxns: p.setPendingTxns });\n  }\n\n  function onSubmitWrapOrUnwrap() {\n    if (!account || !swapAmounts || !fromToken) {\n      return;\n    }\n\n    createWrapOrUnwrapTxn(chainId, library, {\n      amount: swapAmounts.amountIn,\n      isWrap: Boolean(fromToken.isNative),\n      setPendingTxns,\n    }).then(onSubmitted);\n  }\n\n  function onSubmitSwap() {\n    if (!account || !tokensData || !swapAmounts?.swapPathStats || !fromToken || !toToken || !executionFee) {\n      return;\n    }\n\n    createSwapOrderTxn(chainId, library, {\n      account,\n      fromTokenAddress: fromToken.address,\n      fromTokenAmount: swapAmounts.amountIn,\n      swapPath: swapAmounts.swapPathStats?.swapPath,\n      toTokenAddress: toToken.address,\n      executionFee: executionFee.feeTokenAmount,\n      orderType: isLimit ? OrderType.LimitSwap : OrderType.MarketSwap,\n      minOutputAmount: swapAmounts.minOutputAmount,\n      referralCode: referralCodeData.userReferralCodeString,\n      tokensData,\n      setPendingTxns,\n    }).then(onSubmitted);\n  }\n\n  function onSubmitIncreaseOrder() {\n    if (\n      !tokensData ||\n      !account ||\n      !fromToken ||\n      !collateralToken ||\n      !increaseAmounts?.acceptablePrice ||\n      !executionFee ||\n      !marketInfo ||\n      !allowedSlippage\n    ) {\n      return;\n    }\n\n    const acceptablePrice = isMarket\n      ? applySlippage(allowedSlippage, increaseAmounts.acceptablePrice, true, isLong)\n      : increaseAmounts.acceptablePrice;\n\n    createIncreaseOrderTxn(chainId, library, {\n      account,\n      marketAddress: marketInfo.marketTokenAddress,\n      initialCollateralAddress: fromToken?.address,\n      initialCollateralAmount: increaseAmounts.initialCollateralAmount,\n      targetCollateralAddress: collateralToken.address,\n      swapPath: increaseAmounts.swapPathStats?.swapPath || [],\n      indexTokenAddress: marketInfo.indexTokenAddress,\n      sizeDeltaUsd: increaseAmounts.sizeDeltaUsd,\n      triggerPrice: isLimit ? triggerPrice : undefined,\n      acceptablePrice,\n      executionFee: executionFee.feeTokenAmount,\n      isLong,\n      orderType: isLimit ? OrderType.LimitIncrease : OrderType.MarketIncrease,\n      referralCode: referralCodeData?.userReferralCodeString,\n      tokensData,\n      setPendingTxns: p.setPendingTxns,\n    }).then(() => {\n      if (isMarket) {\n        setPendingPositionUpdate({\n          isIncrease: true,\n          positionKey: positionKey!,\n          collateralDeltaAmount: increaseAmounts.collateralAmountAfterFees,\n          sizeDeltaUsd: increaseAmounts.sizeDeltaUsd,\n          sizeDeltaInTokens: increaseAmounts.sizeDeltaInTokens,\n        });\n      }\n\n      onSubmitted();\n    });\n  }\n\n  function onSubmitDecreaseOrder() {\n    if (\n      !account ||\n      !marketInfo ||\n      !collateralToken ||\n      !decreaseAmounts?.acceptablePrice ||\n      decreaseAmounts.triggerOrderType === undefined ||\n      !decreaseAmounts.triggerPrice ||\n      !executionFee ||\n      !tokensData\n    ) {\n      return;\n    }\n\n    createDecreaseOrderTxn(chainId, library, {\n      account,\n      marketAddress: marketInfo.marketTokenAddress,\n      indexTokenAddress: marketInfo.indexTokenAddress,\n      swapPath: [],\n      initialCollateralDeltaAmount: decreaseAmounts.collateralDeltaAmount,\n      initialCollateralAddress: collateralToken.address,\n      receiveTokenAddress: collateralToken.address,\n      triggerPrice: decreaseAmounts.triggerPrice,\n      acceptablePrice: decreaseAmounts.acceptablePrice,\n      sizeDeltaUsd: decreaseAmounts.sizeDeltaUsd,\n      orderType: decreaseAmounts.triggerOrderType,\n      isLong,\n      executionFee: executionFee.feeTokenAmount,\n      decreasePositionSwapType: decreaseAmounts.decreaseSwapType,\n      minOutputUsd: decreaseAmounts.receiveUsd,\n      tokensData,\n      setPendingTxns,\n    }).then(onSubmitted);\n  }\n\n  function onSubmit() {\n    if (!account) {\n      onConnectWallet();\n      return;\n    }\n    if (isWrapOrUnwrap) {\n      onSubmitWrapOrUnwrap();\n      return;\n    }\n    if (isSwap) {\n      onSubmitSwap();\n      return;\n    }\n    if (isIncrease) {\n      onSubmitIncreaseOrder();\n      return;\n    }\n    if (isTrigger) {\n      onSubmitDecreaseOrder();\n      return;\n    }\n  }\n\n  function renderMain() {\n    if (isSwap) {\n      return (\n        <div className=\"Confirmation-box-main\">\n          <div>\n            <Trans>Pay</Trans>&nbsp;\n            {formatTokenAmountWithUsd(\n              swapAmounts?.amountIn,\n              swapAmounts?.usdIn,\n              fromToken?.symbol,\n              fromToken?.decimals\n            )}\n          </div>\n          <div className=\"Confirmation-box-main-icon\"></div>\n          <div>\n            <Trans>Receive</Trans>&nbsp;\n            {formatTokenAmountWithUsd(swapAmounts?.amountOut, swapAmounts?.usdOut, toToken?.symbol, toToken?.decimals)}\n          </div>\n        </div>\n      );\n    }\n\n    if (isIncrease) {\n      return (\n        <div className=\"Confirmation-box-main\">\n          <span>\n            <Trans>Pay</Trans>&nbsp;\n            {formatTokenAmountWithUsd(\n              increaseAmounts?.initialCollateralAmount,\n              increaseAmounts?.initialCollateralUsd,\n              fromToken?.symbol,\n              fromToken?.decimals\n            )}\n          </span>\n          <div className=\"Confirmation-box-main-icon\"></div>\n          <div>\n            {isLong ? t`Long` : t`Short`}&nbsp;\n            {formatTokenAmountWithUsd(\n              increaseAmounts?.sizeDeltaInTokens,\n              increaseAmounts?.sizeDeltaUsd,\n              toToken?.symbol,\n              toToken?.decimals\n            )}\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className={cx(\"Confirmation-box-main ConfirmationBox-main\")}>\n        <Trans>Decrease</Trans>&nbsp;{indexToken?.symbol} {isLong ? t`Long` : t`Short`}\n      </div>\n    );\n  }\n\n  function renderFeeWarning() {\n    if (!fees?.totalFees) {\n      return null;\n    }\n\n    const shouldShowWarning = fees.totalFees.deltaUsd.lt(0) && fees.totalFees.bps.abs().gt(600);\n\n    if (!shouldShowWarning) {\n      return null;\n    }\n\n    return (\n      <div className=\"Confirmation-box-warning\">\n        <Trans>Fees are high</Trans>\n      </div>\n    );\n  }\n\n  function renderOrderItem(order: PositionOrderInfo) {\n    return (\n      <li key={order.key} className=\"font-sm\">\n        <p>\n          {isLimitOrderType(order.orderType) ? t`Increase` : t`Decrease`} {order.indexToken?.symbol}{\" \"}\n          {formatUsd(order.sizeDeltaUsd)} {order.isLong ? t`Long` : t`Short`} &nbsp;\n          {order.triggerThresholdType}\n          {formatUsd(order.triggerPrice)}{\" \"}\n        </p>\n        <button onClick={() => onCancelOrderClick(order.key)}>\n          <Trans>Cancel</Trans>\n        </button>\n      </li>\n    );\n  }\n\n  const longShortText = isLong ? t`Long` : t`Short`;\n\n  function renderExistingLimitOrdersWarning() {\n    if (!existingLimitOrders?.length || !toToken) {\n      return;\n    }\n\n    if (existingLimitOrders.length === 1) {\n      const order = existingLimitOrders[0];\n\n      const sizeText = formatUsd(order.sizeDeltaUsd);\n\n      return (\n        <div className=\"Confirmation-box-info\">\n          <Trans>\n            You have an active Limit Order to Increase {longShortText} {order.indexToken?.symbol} {sizeText} at price{\" \"}\n            {formatUsd(order.triggerPrice)}.\n          </Trans>\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          <div className=\"Confirmation-box-info\">\n            <span>\n              <Trans>\n                You have multiple existing Increase {longShortText} {toToken.symbol} limit orders{\" \"}\n              </Trans>\n            </span>\n            <span onClick={() => setIsLimitOrdersVisible((p) => !p)} className=\"view-orders\">\n              ({isLimitOrdersVisible ? t`hide` : t`view`})\n            </span>\n          </div>\n          <ul className=\"order-list\">{existingLimitOrders.map(renderOrderItem)}</ul>\n        </div>\n      );\n    }\n  }\n\n  function renderExistingTriggerErrors() {\n    if (!decreaseOrdersThatWillBeExecuted?.length) {\n      return;\n    }\n\n    const existingTriggerOrderLength = decreaseOrdersThatWillBeExecuted.length;\n    return (\n      <>\n        <div className=\"Confirmation-box-warning\">\n          <Plural\n            value={existingTriggerOrderLength}\n            one=\"You have an active trigger order that might execute immediately after you open this position. Please cancel the order or accept the confirmation to continue.\"\n            other=\"You have # active trigger orders that might execute immediately after you open this position. Please cancel the orders or accept the confirmation to continue.\"\n          />\n        </div>\n        <ul className=\"order-list\">{decreaseOrdersThatWillBeExecuted.map(renderOrderItem)}</ul>\n      </>\n    );\n  }\n\n  function renderExistingTriggerWarning() {\n    if (\n      !existingTriggerOrders?.length ||\n      decreaseOrdersThatWillBeExecuted.length > 0 ||\n      renderExistingLimitOrdersWarning()\n    ) {\n      return;\n    }\n\n    const existingTriggerOrderLength = existingTriggerOrders.length;\n\n    return (\n      <div className=\"Confirmation-box-info\">\n        <Plural\n          value={existingTriggerOrderLength}\n          one=\"You have an active trigger order that could impact this position.\"\n          other=\"You have # active trigger orders that could impact this position.\"\n        />\n      </div>\n    );\n  }\n\n  function renderAvailableLiquidity() {\n    const riskThresholdBps = 5000;\n    let availableLiquidityUsd: BigNumber | undefined = undefined;\n    let availableLiquidityAmount: BigNumber | undefined = undefined;\n    let isLiquidityRisk = false;\n\n    if (isSwap && swapAmounts) {\n      availableLiquidityUsd = swapLiquidityUsd;\n\n      availableLiquidityAmount = convertToTokenAmount(\n        availableLiquidityUsd,\n        toToken?.decimals,\n        toToken?.prices.maxPrice\n      );\n\n      isLiquidityRisk = availableLiquidityUsd!.mul(riskThresholdBps).div(BASIS_POINTS_DIVISOR).lt(swapAmounts.usdOut);\n    }\n\n    if (isIncrease && increaseAmounts) {\n      availableLiquidityUsd = isLong ? longLiquidityUsd : shortLiquidityUsd;\n\n      isLiquidityRisk = availableLiquidityUsd!\n        .mul(riskThresholdBps)\n        .div(BASIS_POINTS_DIVISOR)\n        .lt(increaseAmounts.sizeDeltaUsd);\n    }\n\n    return (\n      <ExchangeInfoRow label={t`Available Liquidity`}>\n        <Tooltip\n          position=\"right-bottom\"\n          handleClassName={isLiquidityRisk ? \"negative\" : \"\"}\n          handle={\n            isSwap\n              ? formatTokenAmount(availableLiquidityAmount, toToken?.decimals, toToken?.symbol)\n              : formatUsd(availableLiquidityUsd)\n          }\n          renderContent={() =>\n            isLiquidityRisk\n              ? t`There may not be sufficient liquidity to execute your order when the price conditions are met`\n              : t`The order will only execute if the price conditions are met and there is sufficient liquidity`\n          }\n        />\n      </ExchangeInfoRow>\n    );\n  }\n\n  function renderSwapSpreadWarining() {\n    if (!isMarket) {\n      return null;\n    }\n\n    if (swapSpreadInfo.spread && swapSpreadInfo.isHigh) {\n      return (\n        <div className=\"Confirmation-box-warning\">\n          <Trans>The spread is {`>`} 1%, please ensure the trade details are acceptable before comfirming</Trans>\n        </div>\n      );\n    }\n  }\n\n  const renderCollateralSpreadWarning = useCallback(() => {\n    if (collateralSpreadInfo && collateralSpreadInfo.isHigh) {\n      return (\n        <div className=\"Confirmation-box-warning\">\n          <Trans>\n            Transacting with a depegged stable coin is subject to spreads reflecting the worse of current market price\n            or $1.00, with transactions involving multiple stablecoins may have multiple spreads.\n          </Trans>\n        </div>\n      );\n    }\n  }, [collateralSpreadInfo]);\n\n  function renderAllowedSlippage(allowedSlippage) {\n    return (\n      <ExchangeInfoRow label={t`Allowed Slippage`}>\n        <Tooltip\n          handle={`${formatAmount(allowedSlippage, 2, 2)}%`}\n          position=\"right-bottom\"\n          renderContent={() => {\n            return (\n              <Trans>\n                You can change this in the settings menu on the top right of the page.\n                <br />\n                <br />\n                Note that a low allowed slippage, e.g. less than 0.5%, may result in failed orders if prices are\n                volatile.\n              </Trans>\n            );\n          }}\n        />\n      </ExchangeInfoRow>\n    );\n  }\n\n  function renderIncreaseOrderSection() {\n    const borrowingRate = getBorrowingFeeFactor(marketInfo!, isLong, 60 * 60)?.mul(100);\n    const fundigRate = getFundingFeeFactor(marketInfo!, isLong, 60 * 60)?.mul(100);\n\n    return (\n      <>\n        <div>\n          {renderMain()}\n          {renderCollateralSpreadWarning()}\n          {isMarket && renderFeeWarning()}\n          {renderExistingLimitOrdersWarning()}\n          {renderExistingTriggerErrors()}\n          {renderExistingTriggerWarning()}\n          {p.executionFee?.warning && <div className=\"Confirmation-box-warning\">{p.executionFee.warning}</div>}\n          {isLimit && renderAvailableLiquidity()}\n\n          <ExchangeInfoRow\n            className=\"SwapBox-info-row\"\n            label={t`Leverage`}\n            value={\n              <ValueTransition\n                from={formatLeverage(existingPosition?.leverage)}\n                to={formatLeverage(nextPositionValues?.nextLeverage) || \"-\"}\n              />\n            }\n          />\n          {isMarket && (\n            <div className=\"PositionEditor-allow-higher-slippage\">\n              <Checkbox isChecked={isHigherSlippageAllowed} setIsChecked={setIsHigherSlippageAllowed}>\n                <span className=\"muted font-sm\">\n                  <Trans>Allow up to 1% slippage</Trans>\n                </span>\n              </Checkbox>\n            </div>\n          )}\n\n          {renderAllowedSlippage(allowedSlippage)}\n\n          {isMarket && collateralSpreadInfo?.spread && (\n            <ExchangeInfoRow label={t`Collateral Spread`} isWarning={swapSpreadInfo.isHigh} isTop={true}>\n              {formatAmount(collateralSpreadInfo.spread.mul(100), USD_DECIMALS, 2, true)}%\n            </ExchangeInfoRow>\n          )}\n\n          {isMarket && (\n            <ExchangeInfoRow\n              className=\"SwapBox-info-row\"\n              label={t`Entry Price`}\n              value={\n                <ValueTransition\n                  from={formatUsd(p.existingPosition?.entryPrice)}\n                  to={formatUsd(nextPositionValues?.nextEntryPrice)}\n                />\n              }\n            />\n          )}\n\n          {isLimit && (\n            <ExchangeInfoRow\n              isTop\n              className=\"SwapBox-info-row\"\n              label={t`Mark Price`}\n              value={formatUsd(markPrice) || \"-\"}\n            />\n          )}\n\n          {isLimit && (\n            <ExchangeInfoRow\n              className=\"SwapBox-info-row\"\n              label={t`Limit Price`}\n              value={formatUsd(triggerPrice) || \"-\"}\n            />\n          )}\n\n          <ExchangeInfoRow\n            className=\"SwapBox-info-row\"\n            label={isMarket ? t`Price Impact` : t`Acceptable Price Impact`}\n            value={\n              <span className={cx({ positive: isMarket && increaseAmounts?.acceptablePriceImpactBps?.gt(0) })}>\n                {formatPercentage(increaseAmounts?.acceptablePriceImpactBps?.mul(isMarket ? 1 : -1)) || \"-\"}\n              </span>\n            }\n          />\n\n          <ExchangeInfoRow\n            className=\"SwapBox-info-row\"\n            label={t`Acceptable Price`}\n            value={formatUsd(increaseAmounts?.acceptablePrice) || \"-\"}\n          />\n\n          <ExchangeInfoRow\n            className=\"SwapBox-info-row\"\n            label={t`Liq. Price`}\n            value={\n              <ValueTransition\n                from={formatUsd(p.existingPosition?.liquidationPrice)}\n                to={formatUsd(nextPositionValues?.nextLiqPrice) || \"-\"}\n              />\n            }\n          />\n\n          <ExchangeInfoRow label={t`Collateral (${collateralToken?.symbol})`} isTop>\n            <Tooltip\n              handle={formatUsd(increaseAmounts?.collateralUsdAfterFees)}\n              position=\"right-top\"\n              renderContent={() => {\n                return (\n                  <>\n                    <Trans>Your position's collateral after deducting fees.</Trans>\n                    <br />\n                    <br />\n                    <StatsTooltipRow\n                      label={t`Pay Amount`}\n                      value={formatUsd(increaseAmounts?.initialCollateralUsd) || \"-\"}\n                      showDollar={false}\n                    />\n                    <StatsTooltipRow\n                      label={t`Fees`}\n                      value={\n                        fees?.totalFees?.deltaUsd && !fees.totalFees.deltaUsd.eq(0)\n                          ? `${fees.totalFees.deltaUsd.gt(0) ? \"+\" : \"-\"}${formatUsd(fees.totalFees.deltaUsd.abs())}`\n                          : \"0.00$\"\n                      }\n                      showDollar={false}\n                    />\n                    <div className=\"Tooltip-divider\" />\n                    <StatsTooltipRow\n                      label={t`Collateral`}\n                      value={formatUsd(increaseAmounts?.collateralUsdAfterFees) || \"-\"}\n                      showDollar={false}\n                    />\n                  </>\n                );\n              }}\n            />\n          </ExchangeInfoRow>\n\n          <TradeFeesRow\n            totalTradeFees={fees?.totalFees}\n            swapFees={fees?.swapFees}\n            positionFee={fees?.positionFee}\n            positionPriceImpact={fees?.positionPriceImpact}\n            swapPriceImpact={fees?.swapPriceImpact}\n            fundingFeeRateStr={\n              fundigRate && `${fundigRate.gt(0) ? \"+\" : \"-\"}${formatAmount(fundigRate.abs(), 30, 4)}% / 1h`\n            }\n            borrowFeeRateStr={borrowingRate && `-${formatAmount(borrowingRate, 30, 4)}% / 1h`}\n            executionFee={p.executionFee}\n            feesType=\"increase\"\n          />\n\n          {decreaseOrdersThatWillBeExecuted?.length > 0 && (\n            <div className=\"PositionEditor-allow-higher-slippage\">\n              <Checkbox isChecked={isTriggerWarningAccepted} setIsChecked={setIsTriggerWarningAccepted}>\n                <span className=\"muted font-sm\">\n                  <Trans>I am aware of the trigger orders</Trans>\n                </span>\n              </Checkbox>\n            </div>\n          )}\n\n          {isHighPriceImpact && (\n            <div className=\"PositionEditor-allow-higher-slippage\">\n              <Checkbox asRow isChecked={isHighPriceImpactAccepted} setIsChecked={setIsHighPriceImpactAccepted}>\n                <span className=\"muted font-sm\">\n                  <Trans>I am aware of the high price impact</Trans>\n                </span>\n              </Checkbox>\n            </div>\n          )}\n        </div>\n      </>\n    );\n  }\n\n  function renderSwapSection() {\n    return (\n      <>\n        <div>\n          {renderMain()}\n          {renderFeeWarning()}\n          {renderSwapSpreadWarining()}\n          {swapSpreadInfo.showSpread && swapSpreadInfo.spread && (\n            <ExchangeInfoRow label={t`Spread`} isWarning={swapSpreadInfo.isHigh}>\n              {formatAmount(swapSpreadInfo.spread.mul(100), USD_DECIMALS, 2, true)}%\n            </ExchangeInfoRow>\n          )}\n          {isLimit && renderAvailableLiquidity()}\n          {renderAllowedSlippage(allowedSlippage)}\n          <ExchangeInfoRow label={t`Mark Price`} isTop>\n            {formatTokensRatio(fromToken, toToken, markRatio)}\n          </ExchangeInfoRow>\n          {isLimit && (\n            <ExchangeInfoRow label={t`Limit Price`}>\n              {formatTokensRatio(fromToken, toToken, triggerRatio)}\n            </ExchangeInfoRow>\n          )}\n\n          <ExchangeInfoRow label={t`${fromToken?.symbol} Price`}>{formatUsd(swapAmounts?.priceIn)}</ExchangeInfoRow>\n\n          <ExchangeInfoRow label={t`${toToken?.symbol} Price`}>{formatUsd(swapAmounts?.priceOut)}</ExchangeInfoRow>\n\n          {!p.isWrapOrUnwrap && (\n            <TradeFeesRow\n              isTop\n              totalTradeFees={fees?.totalFees}\n              swapFees={fees?.swapFees}\n              swapPriceImpact={fees?.swapPriceImpact}\n              executionFee={p.executionFee}\n              feesType=\"swap\"\n            />\n          )}\n          <ExchangeInfoRow label={t`Min. Receive`} isTop>\n            {formatTokenAmount(swapAmounts?.minOutputAmount, toToken?.decimals, toToken?.symbol)}\n          </ExchangeInfoRow>\n\n          {isHighPriceImpact && (\n            <div className=\"PositionEditor-allow-higher-slippage\">\n              <Checkbox asRow isChecked={isHighPriceImpactAccepted} setIsChecked={setIsHighPriceImpactAccepted}>\n                <span className=\"muted font-sm\">\n                  <Trans>I am aware of the high price impact</Trans>\n                </span>\n              </Checkbox>\n            </div>\n          )}\n        </div>\n      </>\n    );\n  }\n\n  function renderTriggerDecreaseSection() {\n    return (\n      <>\n        <div>\n          {renderMain()}\n\n          {isTrigger && existingPosition?.leverage && (\n            <div className=\"Exchange-leverage-slider-settings\">\n              <Checkbox isChecked={keepLeverage} setIsChecked={setKeepLeverage}>\n                <span className=\"muted font-sm\">\n                  <Trans>Keep leverage at {formatLeverage(existingPosition.leverage)} </Trans>\n                </span>\n              </Checkbox>\n            </div>\n          )}\n\n          <ExchangeInfoRow\n            label={p.existingPosition?.sizeInUsd ? t`Size` : t`Decrease size`}\n            value={\n              p.existingPosition?.sizeInUsd ? (\n                <ValueTransition\n                  from={formatUsd(p.existingPosition.sizeInUsd)!}\n                  to={formatUsd(nextPositionValues?.nextSizeUsd)}\n                />\n              ) : decreaseAmounts?.sizeDeltaUsd ? (\n                formatUsd(decreaseAmounts.sizeDeltaUsd)\n              ) : (\n                \"-\"\n              )\n            }\n          />\n\n          {p.existingPosition && (\n            <ExchangeInfoRow\n              label={t`Collateral (${p.existingPosition?.collateralToken?.symbol})`}\n              value={\n                <ValueTransition\n                  from={formatUsd(existingPosition?.remainingCollateralUsd)!}\n                  to={formatUsd(nextPositionValues?.nextCollateralUsd)}\n                />\n              }\n            />\n          )}\n\n          {!p.keepLeverage && p.existingPosition?.leverage && (\n            <ExchangeInfoRow\n              label={t`Leverage`}\n              value={\n                nextPositionValues?.nextSizeUsd?.gt(0) ? (\n                  <ValueTransition\n                    from={formatLeverage(p.existingPosition?.leverage)}\n                    to={formatLeverage(nextPositionValues.nextLeverage) || \"-\"}\n                  />\n                ) : (\n                  \"-\"\n                )\n              }\n            />\n          )}\n\n          <ExchangeInfoRow isTop label={t`Mark Price`} value={p.markPrice ? formatUsd(p.markPrice) : \"...\"} />\n\n          <ExchangeInfoRow\n            label={t`Trigger Price`}\n            value={triggerPrice ? `${decreaseAmounts?.triggerPricePrefix} ${formatUsd(triggerPrice)}` : \"...\"}\n          />\n\n          <ExchangeInfoRow\n            className=\"SwapBox-info-row\"\n            label={t`Acceptable Price Impact`}\n            value={formatPercentage(decreaseAmounts?.acceptablePriceImpactBps?.mul(-1)) || \"-\"}\n          />\n\n          <ExchangeInfoRow\n            className=\"SwapBox-info-row\"\n            label={t`Acceptable Price`}\n            value={formatUsd(decreaseAmounts?.acceptablePrice) || \"-\"}\n          />\n\n          {p.existingPosition && (\n            <ExchangeInfoRow\n              label={t`Liq. Price`}\n              value={\n                nextPositionValues?.nextSizeUsd?.gt(0) ? (\n                  <ValueTransition\n                    from={formatUsd(existingPosition?.liquidationPrice)!}\n                    to={formatUsd(nextPositionValues.nextLiqPrice)}\n                  />\n                ) : (\n                  \"-\"\n                )\n              }\n            />\n          )}\n\n          {existingPosition && (\n            <ExchangeInfoRow\n              label={t`PnL`}\n              value={\n                <ValueTransition\n                  from={\n                    <>\n                      {formatDeltaUsd(decreaseAmounts?.exitPnl)} (\n                      {formatPercentage(decreaseAmounts?.exitPnlPercentage, { signed: true })})\n                    </>\n                  }\n                  to={\n                    <>\n                      {formatDeltaUsd(nextPositionValues?.nextPnl)} (\n                      {formatPercentage(nextPositionValues?.nextPnlPercentage, { signed: true })})\n                    </>\n                  }\n                />\n              }\n            />\n          )}\n\n          <TradeFeesRow\n            isTop\n            totalTradeFees={fees?.totalFees}\n            positionPriceImpact={fees?.positionPriceImpact}\n            swapPriceImpact={fees?.swapPriceImpact}\n            swapFees={fees?.swapFees}\n            positionFee={fees?.positionFee}\n            borrowFee={fees?.borrowFee}\n            fundingFee={fees?.fundingFee}\n            executionFee={p.executionFee}\n            feesType=\"decrease\"\n          />\n\n          {decreaseAmounts?.receiveUsd && (\n            <ExchangeInfoRow\n              label={t`Receive`}\n              value={formatTokenAmountWithUsd(\n                decreaseAmounts.receiveTokenAmount,\n                decreaseAmounts.receiveUsd,\n                collateralToken?.symbol,\n                collateralToken?.decimals\n              )}\n            />\n          )}\n\n          {isHighPriceImpact && (\n            <div className=\"PositionEditor-allow-higher-slippage\">\n              <Checkbox asRow isChecked={isHighPriceImpactAccepted} setIsChecked={setIsHighPriceImpactAccepted}>\n                <span className=\"muted font-sm\">\n                  <Trans>I am aware of the high price impact</Trans>\n                </span>\n              </Checkbox>\n            </div>\n          )}\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <div className=\"Confirmation-box\">\n      <Modal isVisible={true} setIsVisible={onClose} label={title} allowContentTouchMove>\n        {isSwap && renderSwapSection()}\n        {isIncrease && renderIncreaseOrderSection()}\n        {isTrigger && renderTriggerDecreaseSection()}\n\n        {needPayTokenApproval && fromToken && (\n          <>\n            <div className=\"App-card-divider\" />\n\n            <div className=\"ConfirmationBox-approve-tokens\">\n              <div className=\"ConfirmationBox-approve-token\">\n                <ApproveTokenButton\n                  tokenAddress={fromToken.address}\n                  tokenSymbol={fromToken.symbol}\n                  spenderAddress={getContract(chainId, \"SyntheticsRouter\")}\n                />\n              </div>\n            </div>\n\n            <div className=\"App-card-divider\" />\n          </>\n        )}\n\n        <div className=\"Confirmation-box-row\">\n          <Button\n            variant=\"primary-action\"\n            className=\"w-100\"\n            onClick={onSubmit}\n            disabled={Boolean(confirmationError) && !shouldDisableValidation}\n          >\n            {confirmationError || submitText}\n          </Button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n","import { Web3Provider } from \"@ethersproject/providers\";\nimport { NATIVE_TOKEN_ADDRESS, getToken, getWrappedToken } from \"config/tokens\";\nimport { callContract } from \"lib/contracts\";\nimport WETH from \"abis/WETH.json\";\nimport { BigNumber, ethers } from \"ethers\";\nimport { t } from \"@lingui/macro\";\nimport { formatTokenAmount } from \"lib/numbers\";\n\ntype WrapOrUnwrapParams = {\n  amount: BigNumber;\n  isWrap: boolean;\n  setPendingTxns: (txns: any) => void;\n};\n\nexport function createWrapOrUnwrapTxn(chainId: number, library: Web3Provider, p: WrapOrUnwrapParams) {\n  const wrappedToken = getWrappedToken(chainId);\n  const nativeToken = getToken(chainId, NATIVE_TOKEN_ADDRESS);\n\n  const contract = new ethers.Contract(wrappedToken.address, WETH.abi, library.getSigner());\n\n  if (p.isWrap) {\n    return callContract(chainId, contract, \"deposit\", [], {\n      value: p.amount,\n      sentMsg: t`Swap submitted.`,\n      successMsg: t`Swapped ${formatTokenAmount(\n        p.amount,\n        nativeToken.decimals,\n        nativeToken.symbol\n      )} for ${formatTokenAmount(p.amount, wrappedToken.decimals, wrappedToken.symbol)}`,\n      failMsg: t`Swap failed.`,\n      setPendingTxns: p.setPendingTxns,\n    });\n  } else {\n    return callContract(chainId, contract, \"withdraw\", [p.amount], {\n      sentMsg: t`Swap submitted.`,\n      successMsg: t`Swapped ${formatTokenAmount(\n        p.amount,\n        wrappedToken.decimals,\n        wrappedToken.symbol\n      )} for ${formatTokenAmount(p.amount, nativeToken.decimals, nativeToken.symbol)}`,\n      failMsg: t`Swap failed.`,\n      setPendingTxns: p.setPendingTxns,\n    });\n  }\n}\n","import cx from \"classnames\";\nimport { BASIS_POINTS_DIVISOR, MAX_ALLOWED_LEVERAGE } from \"lib/legacy\";\nimport Slider, { SliderTooltip, Handle } from \"rc-slider\";\nimport \"./LeverageSlider.scss\";\n\nconst leverageMarks = {\n  2: \"2x\",\n  5: \"5x\",\n  10: \"10x\",\n  15: \"15x\",\n  20: \"20x\",\n  25: \"25x\",\n  30: \"30x\",\n  35: \"35x\",\n  40: \"40x\",\n  45: \"45x\",\n  50: \"50x\",\n};\n\ntype Props = {\n  isPositive?: boolean;\n  value?: number;\n  onChange: (value: number) => void;\n};\n\nexport function LeverageSlider(p: Props) {\n  return (\n    <div\n      className={cx(\"LeverageSlider\", {\n        positive: p.isPositive,\n        negative: !p.isPositive,\n      })}\n    >\n      <Slider\n        min={1.1}\n        max={MAX_ALLOWED_LEVERAGE / BASIS_POINTS_DIVISOR}\n        step={0.1}\n        marks={leverageMarks}\n        handle={LeverageSliderHandle}\n        onChange={p.onChange}\n        defaultValue={p.value}\n      />\n    </div>\n  );\n}\n\nfunction LeverageSliderHandle({ value, dragging, index, ...restProps }: any) {\n  return (\n    <SliderTooltip\n      prefixCls=\"rc-slider-tooltip\"\n      overlay={`${parseFloat(value).toFixed(2)}x`}\n      visible={dragging}\n      placement=\"top\"\n      key={index}\n    >\n      <Handle value={value} {...restProps} />\n    </SliderTooltip>\n  );\n}\n","import { BigNumber } from \"ethers\";\nimport { USD_DECIMALS } from \"lib/legacy\";\nimport { expandDecimals } from \"lib/numbers\";\nimport { getByKey } from \"lib/objects\";\nimport { useMemo } from \"react\";\nimport {\n  MarketInfo,\n  getAvailableUsdLiquidityForPosition,\n  getMinPriceImpactMarket,\n  getMostLiquidMarketForPosition,\n  isMarketIndexToken,\n  useMarketsInfo,\n} from \"domain/synthetics/markets\";\nimport { OrdersInfoData, PositionOrderInfo, isIncreaseOrderType } from \"../orders\";\nimport { PositionsInfoData } from \"domain/synthetics/positions\";\nimport { TokenData } from \"domain/synthetics/tokens\";\nimport { getAcceptablePrice, getMarkPrice } from \"./utils\";\nimport { useVirtualInventory } from \"../fees/useVirtualInventory\";\n\nexport type AvailableMarketsOptions = {\n  availableMarkets?: MarketInfo[];\n  marketWithPosition?: MarketInfo;\n  collateralWithPosition?: TokenData;\n  marketWithOrder?: MarketInfo;\n  collateralWithOrder?: TokenData;\n  maxLiquidityMarket?: MarketInfo;\n  minPriceImpactMarket?: MarketInfo;\n  minPriceImpactBps?: BigNumber;\n  isNoSufficientLiquidityInAnyMarket?: boolean;\n};\n\nexport function useAvailableMarketsOptions(\n  chainId: number,\n  p: {\n    isIncrease: boolean;\n    disable?: boolean;\n    indexToken: TokenData | undefined;\n    isLong: boolean;\n    increaseSizeUsd: BigNumber | undefined;\n    positionsInfo: PositionsInfoData | undefined;\n    ordersInfo: OrdersInfoData | undefined;\n    hasExistingPosition: boolean;\n    hasExistingOrder: boolean;\n  }\n): AvailableMarketsOptions {\n  const {\n    disable,\n    positionsInfo,\n    ordersInfo,\n    hasExistingPosition,\n    hasExistingOrder,\n    isIncrease,\n    indexToken,\n    increaseSizeUsd,\n    isLong,\n  } = p;\n\n  const { marketsInfoData } = useMarketsInfo(chainId);\n  const { virtualInventoryForPositions } = useVirtualInventory(chainId);\n\n  return useMemo(() => {\n    if (disable || !indexToken || isLong === undefined || !virtualInventoryForPositions) {\n      return {};\n    }\n\n    const availableMarkets = Object.values(marketsInfoData || {}).filter((market) =>\n      isMarketIndexToken(market, indexToken.address)\n    );\n\n    const liquidMarkets = increaseSizeUsd\n      ? availableMarkets.filter((marketInfo) => {\n          const liquidity = getAvailableUsdLiquidityForPosition(marketInfo, isLong);\n\n          return liquidity.gt(increaseSizeUsd);\n        })\n      : availableMarkets;\n\n    const result: AvailableMarketsOptions = { availableMarkets };\n\n    if (isIncrease && liquidMarkets.length === 0) {\n      result.isNoSufficientLiquidityInAnyMarket = true;\n\n      return result;\n    }\n\n    if (isIncrease) {\n      result.maxLiquidityMarket = getMostLiquidMarketForPosition(liquidMarkets, indexToken.address, undefined, isLong);\n    }\n\n    if (!hasExistingPosition) {\n      const positions = Object.values(positionsInfo || {});\n      const availablePosition = positions.find(\n        (pos) =>\n          pos.isLong === isLong && availableMarkets.some((market) => market.marketTokenAddress === pos.marketAddress)\n      );\n\n      if (availablePosition) {\n        result.marketWithPosition = getByKey(marketsInfoData, availablePosition.marketAddress);\n        result.collateralWithPosition = availablePosition.collateralToken;\n      }\n    }\n\n    if (!result.marketWithPosition && !hasExistingOrder) {\n      const orders = Object.values(ordersInfo || {});\n      const availableOrder = orders.find(\n        (order) =>\n          isIncreaseOrderType(order.orderType) &&\n          order.isLong === isLong &&\n          availableMarkets.some((market) => market.marketTokenAddress === order.marketAddress)\n      ) as PositionOrderInfo;\n\n      if (availableOrder) {\n        result.marketWithOrder = getByKey(marketsInfoData, availableOrder.marketAddress);\n        result.collateralWithOrder = availableOrder.targetCollateralToken;\n      }\n    }\n\n    if (\n      isIncrease &&\n      increaseSizeUsd &&\n      !hasExistingPosition &&\n      !hasExistingOrder &&\n      !result.marketWithPosition &&\n      !result.marketWithOrder\n    ) {\n      const { bestMarket, bestImpactDeltaUsd } = getMinPriceImpactMarket(\n        liquidMarkets,\n        virtualInventoryForPositions,\n        indexToken.address,\n        isLong,\n        increaseSizeUsd.gt(0) ? increaseSizeUsd : expandDecimals(1000, USD_DECIMALS)\n      );\n\n      const { acceptablePriceImpactBps } = getAcceptablePrice({\n        isIncrease: true,\n        isLong,\n        indexPrice: getMarkPrice({ prices: indexToken.prices, isLong, isIncrease: true }),\n        priceImpactDeltaUsd: bestImpactDeltaUsd,\n        sizeDeltaUsd: increaseSizeUsd,\n      });\n\n      result.minPriceImpactMarket = bestMarket;\n      result.minPriceImpactBps = acceptablePriceImpactBps;\n    }\n\n    return result;\n  }, [\n    disable,\n    indexToken,\n    increaseSizeUsd,\n    isLong,\n    virtualInventoryForPositions,\n    marketsInfoData,\n    isIncrease,\n    hasExistingPosition,\n    hasExistingOrder,\n    positionsInfo,\n    ordersInfo,\n  ]);\n}\n","import { t } from \"@lingui/macro\";\nimport { IS_NETWORK_DISABLED, getChainName } from \"config/chains\";\nimport { MarketInfo } from \"domain/synthetics/markets\";\nimport { PositionInfo } from \"domain/synthetics/positions\";\nimport { TokenData, TokensRatio } from \"domain/synthetics/tokens\";\nimport { getIsEquivalentTokens } from \"domain/tokens\";\nimport { BigNumber } from \"ethers\";\nimport { BASIS_POINTS_DIVISOR, MAX_ALLOWED_LEVERAGE, USD_DECIMALS, isAddressZero } from \"lib/legacy\";\nimport { expandDecimals, formatAmount, formatUsd } from \"lib/numbers\";\nimport { NextPositionValues, SwapPathStats, TradeFees } from \"../types\";\n\nexport function getCommonError(p: { chainId: number; isConnected: boolean; hasOutdatedUi: boolean }) {\n  const { chainId, isConnected, hasOutdatedUi } = p;\n\n  if (IS_NETWORK_DISABLED[chainId]) {\n    return [t`App disabled, pending ${getChainName(chainId)} upgrade`];\n  }\n\n  if (hasOutdatedUi) {\n    return [t`Page outdated, please refresh`];\n  }\n\n  if (!isConnected) {\n    return [t`Connect wallet`];\n  }\n\n  return [undefined];\n}\n\nexport function getSwapError(p: {\n  fromToken: TokenData | undefined;\n  toToken: TokenData | undefined;\n  fromTokenAmount: BigNumber | undefined;\n  fromUsd: BigNumber | undefined;\n  toTokenAmount: BigNumber | undefined;\n  toUsd: BigNumber | undefined;\n  isLimit: boolean;\n  triggerRatio: TokensRatio | undefined;\n  markRatio: TokensRatio | undefined;\n  fees: TradeFees | undefined;\n  swapPathStats: SwapPathStats | undefined;\n  isWrapOrUnwrap: boolean;\n  swapLiquidity: BigNumber | undefined;\n}) {\n  const {\n    fromToken,\n    toToken,\n    fromTokenAmount,\n    fromUsd,\n    toUsd,\n    isLimit,\n    triggerRatio,\n    markRatio,\n    fees,\n    isWrapOrUnwrap,\n    swapLiquidity,\n    swapPathStats,\n  } = p;\n\n  if (!fromToken || !toToken) {\n    return [t`Select a token`];\n  }\n\n  if (fromToken.address === toToken.address) {\n    return [t`Select different tokens`];\n  }\n\n  if (!fromTokenAmount?.gt(0) || !fromUsd?.gt(0)) {\n    return [t`Enter an amount`];\n  }\n\n  if (fromTokenAmount.gt(fromToken.balance || BigNumber.from(0))) {\n    return [t`Insufficient ${fromToken?.symbol} balance`];\n  }\n\n  if (isWrapOrUnwrap) {\n    return [undefined];\n  }\n\n  if (!isLimit && (!toUsd || !swapLiquidity || swapLiquidity?.lt(toUsd))) {\n    return [t`Insufficient liquidity`];\n  }\n\n  if (!swapPathStats?.swapPath || (!isLimit && swapPathStats.swapSteps.some((step) => step.isOutLiquidity))) {\n    return [t`Couldn't find a swap path with enough liquidity`];\n  }\n\n  if (!fees?.totalFees || (fees.totalFees.deltaUsd.lt(0) && fees.totalFees.deltaUsd.abs().gt(fromUsd || 0))) {\n    return [t`Fees exceed Pay amount`];\n  }\n\n  if (isLimit) {\n    if (!triggerRatio?.ratio.gt(0)) {\n      return [t`Enter a  price`];\n    }\n\n    const isRatioInverted = [fromToken.wrappedAddress, fromToken.address].includes(triggerRatio.largestToken.address);\n\n    if (triggerRatio && !isRatioInverted && markRatio?.ratio.lt(triggerRatio.ratio)) {\n      return [t`Price above Mark Price`];\n    }\n\n    if (triggerRatio && isRatioInverted && markRatio?.ratio.gt(triggerRatio.ratio)) {\n      return [t`Price below Mark Price`];\n    }\n  }\n\n  return [undefined];\n}\n\nexport function getIncreaseError(p: {\n  marketInfo: MarketInfo | undefined;\n  indexToken: TokenData | undefined;\n  initialCollateralToken: TokenData | undefined;\n  initialCollateralAmount: BigNumber | undefined;\n  initialCollateralUsd: BigNumber | undefined;\n  targetCollateralToken: TokenData | undefined;\n  collateralUsd: BigNumber | undefined;\n  sizeDeltaUsd: BigNumber | undefined;\n  nextPositionValues: NextPositionValues | undefined;\n  existingPosition: PositionInfo | undefined;\n  fees: TradeFees | undefined;\n  markPrice: BigNumber | undefined;\n  triggerPrice: BigNumber | undefined;\n  swapPathStats: SwapPathStats | undefined;\n  collateralLiquidity: BigNumber | undefined;\n  longLiquidity: BigNumber | undefined;\n  shortLiquidity: BigNumber | undefined;\n  minCollateralUsd: BigNumber | undefined;\n  isLong: boolean;\n  isLimit: boolean;\n}) {\n  const {\n    marketInfo,\n    indexToken,\n    initialCollateralToken,\n    initialCollateralAmount,\n    initialCollateralUsd,\n    targetCollateralToken,\n    collateralUsd,\n    sizeDeltaUsd,\n    existingPosition,\n    fees,\n    swapPathStats,\n    collateralLiquidity,\n    minCollateralUsd,\n    longLiquidity,\n    shortLiquidity,\n    isLong,\n    markPrice,\n    triggerPrice,\n    isLimit,\n    nextPositionValues,\n  } = p;\n\n  if (!marketInfo || !indexToken) {\n    return [t`Select a market`];\n  }\n\n  if (!initialCollateralToken) {\n    return [t`Select a Pay token`];\n  }\n\n  if (!targetCollateralToken) {\n    return [t`Select a collateral`];\n  }\n\n  if (!initialCollateralAmount?.gt(0) || !initialCollateralUsd?.gt(0) || !sizeDeltaUsd || !fees?.totalFees) {\n    return [t`Enter an amount`];\n  }\n\n  if (initialCollateralAmount.gt(initialCollateralToken.balance || BigNumber.from(0))) {\n    return [t`Insufficient ${initialCollateralToken?.symbol} balance`];\n  }\n\n  const isNeedSwap = !getIsEquivalentTokens(initialCollateralToken, targetCollateralToken);\n\n  if (isNeedSwap) {\n    if (!swapPathStats?.swapPath?.length) {\n      return [t`Couldn't find a swap route with enough liquidity`];\n    }\n\n    if (!collateralLiquidity || collateralLiquidity?.lt(initialCollateralUsd || BigNumber.from(0))) {\n      return [t`Insufficient liquidity to swap collateral`];\n    }\n  }\n\n  if (fees.totalFees.deltaUsd.lt(0) && fees?.totalFees?.deltaUsd.abs().gt(initialCollateralUsd || 0)) {\n    return [t`Fees exceed amount`];\n  }\n\n  const _minCollateralUsd = minCollateralUsd || expandDecimals(10, USD_DECIMALS);\n\n  if (!existingPosition && collateralUsd?.lt(_minCollateralUsd)) {\n    return [t`Min order: ${formatUsd(_minCollateralUsd)}`];\n  }\n\n  if (isLong && (!longLiquidity || longLiquidity.lt(sizeDeltaUsd))) {\n    return [t`Max ${indexToken.symbol} long exceeded`];\n  }\n\n  if (!isLong && (!shortLiquidity || shortLiquidity.lt(sizeDeltaUsd))) {\n    return [t`Max ${indexToken.symbol} short exceeded`];\n  }\n\n  if (isLimit) {\n    if (!markPrice) {\n      return [t`Loading...`];\n    }\n\n    if (!triggerPrice?.gt(0)) {\n      return [t`Enter a price`];\n    }\n\n    if (isLong && markPrice.lt(triggerPrice)) {\n      return [t`Price above Mark Price`];\n    }\n\n    if (!isLong && markPrice.gt(triggerPrice)) {\n      return [t`Price below Mark Price`];\n    }\n  }\n\n  if (!nextPositionValues?.nextLeverage || nextPositionValues?.nextLeverage.gt(MAX_ALLOWED_LEVERAGE)) {\n    return [t`Max leverage: ${(MAX_ALLOWED_LEVERAGE / BASIS_POINTS_DIVISOR).toFixed(1)}x`];\n  }\n\n  return [undefined];\n}\n\nexport function getDecreaseError(p: {\n  marketInfo: MarketInfo | undefined;\n  sizeDeltaUsd: BigNumber | undefined;\n  receiveToken: TokenData | undefined;\n  isTrigger: boolean;\n  triggerPrice: BigNumber | undefined;\n  existingPosition: PositionInfo | undefined;\n  nextPositionValues: NextPositionValues | undefined;\n  isLong: boolean;\n  isContractAccount: boolean;\n  minCollateralUsd: BigNumber | undefined;\n  isNotEnoughReceiveTokenLiquidity: boolean;\n}) {\n  const {\n    marketInfo,\n    sizeDeltaUsd,\n    isTrigger,\n    triggerPrice,\n    existingPosition,\n    isContractAccount,\n    receiveToken,\n    nextPositionValues,\n    isLong,\n    minCollateralUsd,\n    isNotEnoughReceiveTokenLiquidity,\n  } = p;\n\n  if (isContractAccount && isAddressZero(receiveToken?.address)) {\n    return [t`${receiveToken?.symbol} can not be sent to smart contract addresses. Select another token.`];\n  }\n\n  if (!marketInfo) {\n    return [t`Select a market`];\n  }\n\n  if (!sizeDeltaUsd?.gt(0)) {\n    return [t`Enter a size`];\n  }\n\n  if (isTrigger) {\n    if (!triggerPrice?.gt(0)) {\n      return [t`Enter a trigger price`];\n    }\n\n    if (existingPosition?.liquidationPrice) {\n      if (isLong && triggerPrice.lte(existingPosition.liquidationPrice)) {\n        return [t`Price below Liq. Price`];\n      }\n\n      if (!isLong && triggerPrice?.gte(existingPosition.liquidationPrice)) {\n        return [t`Price above Liq. Price`];\n      }\n    }\n  }\n\n  if (nextPositionValues?.nextLeverage && nextPositionValues?.nextLeverage.gt(MAX_ALLOWED_LEVERAGE)) {\n    return [t`Max leverage: ${(MAX_ALLOWED_LEVERAGE / BASIS_POINTS_DIVISOR).toFixed(1)}x`];\n  }\n\n  if (existingPosition) {\n    if (sizeDeltaUsd.gt(existingPosition.sizeInUsd)) {\n      return [t`Max close amount exceeded`];\n    }\n\n    if (\n      !existingPosition.sizeInUsd.eq(sizeDeltaUsd) &&\n      nextPositionValues?.nextCollateralUsd?.lt(minCollateralUsd || 0)\n    ) {\n      return [t`Leftover collateral below ${formatAmount(minCollateralUsd, USD_DECIMALS, 2)} USD`];\n    }\n  }\n\n  if (isNotEnoughReceiveTokenLiquidity) {\n    return [t`Insufficient receive token liquidity`];\n  }\n\n  return [undefined];\n}\n\nexport function getEditCollateralError(p: {\n  collateralDeltaAmount: BigNumber | undefined;\n  collateralDeltaUsd: BigNumber | undefined;\n  nextCollateralUsd: BigNumber | undefined;\n  minCollateralUsd: BigNumber | undefined;\n  nextLiqPrice: BigNumber | undefined;\n  nextLeverage: BigNumber | undefined;\n  position: PositionInfo | undefined;\n  isDeposit: boolean;\n}) {\n  const {\n    collateralDeltaAmount,\n    collateralDeltaUsd,\n    minCollateralUsd,\n    nextCollateralUsd,\n    nextLeverage,\n    nextLiqPrice,\n    position,\n    isDeposit,\n  } = p;\n\n  if (!collateralDeltaAmount || collateralDeltaAmount.eq(0)) {\n    return [t`Enter an amount`];\n  }\n\n  if (collateralDeltaAmount.lte(0)) {\n    return [t`Amount should be greater than zero`];\n  }\n\n  if (!isDeposit && nextCollateralUsd && minCollateralUsd) {\n    if (nextCollateralUsd.lt(minCollateralUsd)) {\n      return [t`Min residual collateral: ${formatAmount(minCollateralUsd, USD_DECIMALS, 2)} USD`];\n    }\n  }\n\n  if (!isDeposit && collateralDeltaUsd && nextLiqPrice && position?.markPrice) {\n    if (position?.isLong && position?.markPrice.lt(nextLiqPrice)) {\n      return [t`Invalid liq. price`];\n    }\n    if (!position.isLong && position.markPrice.gt(nextLiqPrice)) {\n      return [t`Invalid liq. price`];\n    }\n  }\n\n  if (nextLeverage && nextLeverage.gt(MAX_ALLOWED_LEVERAGE)) {\n    return [t`Max leverage: ${(MAX_ALLOWED_LEVERAGE / BASIS_POINTS_DIVISOR).toFixed(1)}x`];\n  }\n\n  return [false];\n}\n","import { Trans, t } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport ExchangeInfoRow from \"components/Exchange/ExchangeInfoRow\";\nimport { getTotalClaimableFundingUsd, useMarketsInfo } from \"domain/synthetics/markets\";\nimport { useChainId } from \"lib/chains\";\nimport { formatUsd } from \"lib/numbers\";\n\nimport \"./ClaimableCard.scss\";\n\ntype Props = {\n  onClaimClick: () => void;\n};\n\nexport function ClaimableCard(p: Props) {\n  const { onClaimClick } = p;\n  const { account } = useWeb3React();\n  const { chainId } = useChainId();\n  const { marketsInfoData } = useMarketsInfo(chainId);\n\n  const markets = Object.values(marketsInfoData || {});\n\n  const totalClaimableFundingUsd = getTotalClaimableFundingUsd(markets);\n\n  return (\n    <div className=\"Exchange-swap-market-box App-box App-box-border\">\n      <div className=\"App-card-title\">\n        <Trans>Claimable funding</Trans>\n      </div>\n      <div className=\"App-card-divider\" />\n\n      <ExchangeInfoRow label={t`Funding Fees`} value={formatUsd(totalClaimableFundingUsd)} />\n      <ExchangeInfoRow label={t`Total Claimable`} value={formatUsd(totalClaimableFundingUsd)} />\n\n      <div className=\"App-card-options ClaimableCard-actions\">\n        {account && totalClaimableFundingUsd.gt(0) && (\n          <button className=\"App-button-option App-card-option\" onClick={onClaimClick}>\n            <Trans>Claim</Trans>\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { BigNumberish } from \"ethers\";\nimport cx from \"classnames\";\nimport { bigNumberify } from \"lib/numbers\";\nimport \"./ShareBar.scss\";\n\nexport type Props = {\n  share?: BigNumberish;\n  total?: BigNumberish;\n  className?: string;\n};\n\nexport function ShareBar(p: Props) {\n  const { share, total, className } = p;\n\n  if (!share || !total || bigNumberify(total)!.eq(0)) {\n    return null;\n  }\n\n  let progress = bigNumberify(share)!.mul(100).div(total).toNumber();\n  progress = Math.min(progress, 100);\n\n  return (\n    <div className={cx(\"ShareBar\", className)}>\n      <div className=\"ShareBar-fill\" style={{ width: `${progress}%` }} />\n    </div>\n  );\n}\n","import { Trans, t } from \"@lingui/macro\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport StatsTooltipRow from \"components/StatsTooltip/StatsTooltipRow\";\nimport Tooltip from \"components/Tooltip/Tooltip\";\nimport { SLIPPAGE_BPS_KEY } from \"config/localStorage\";\nimport {\n  getAvailableUsdLiquidityForPosition,\n  getMaxReservedUsd,\n  getReservedUsd,\n  useMarketsInfo,\n} from \"domain/synthetics/markets\";\nimport { getTokenData, useAvailableTokensData } from \"domain/synthetics/tokens\";\nimport { useChainId } from \"lib/chains\";\nimport { DEFAULT_SLIPPAGE_AMOUNT } from \"lib/legacy\";\nimport { useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport { formatAmount, formatPercentage, formatUsd, getBasisPoints } from \"lib/numbers\";\n\nimport ExchangeInfoRow from \"components/Exchange/ExchangeInfoRow\";\nimport { getBorrowingFeeFactor, getFundingFeeFactor } from \"domain/synthetics/fees\";\nimport { getByKey } from \"lib/objects\";\nimport { useMemo } from \"react\";\nimport \"./MarketCard.scss\";\nimport { ShareBar } from \"components/ShareBar/ShareBar\";\n\nexport type Props = {\n  marketAddress?: string;\n  isLong: boolean;\n};\n\nexport function MarketCard(p: Props) {\n  const { chainId } = useChainId();\n\n  const [savedSlippageAmount] = useLocalStorageSerializeKey([chainId, SLIPPAGE_BPS_KEY], DEFAULT_SLIPPAGE_AMOUNT);\n\n  const { marketsInfoData } = useMarketsInfo(chainId);\n  const { tokensData } = useAvailableTokensData(chainId);\n\n  const market = getByKey(marketsInfoData, p.marketAddress);\n  const marketName = market?.name || \"...\";\n\n  const indexToken = getTokenData(tokensData, market?.indexTokenAddress, \"native\");\n\n  const entryPrice = p.isLong ? indexToken?.prices?.maxPrice : indexToken?.prices?.minPrice;\n  const exitPrice = p.isLong ? indexToken?.prices?.minPrice : indexToken?.prices?.maxPrice;\n\n  const longShortText = p.isLong ? t`Long` : t`Short`;\n\n  const { liquidity, maxReservedUsd, reservedUsd, borrowingRate, fundingRate } = useMemo(() => {\n    if (!market) return {};\n\n    return {\n      liquidity: getAvailableUsdLiquidityForPosition(market, p.isLong),\n      maxReservedUsd: getMaxReservedUsd(market, p.isLong),\n      reservedUsd: getReservedUsd(market, p.isLong),\n      borrowingRate: getBorrowingFeeFactor(market, p.isLong, 60 * 60),\n      fundingRate: getFundingFeeFactor(market, p.isLong, 60 * 60),\n    };\n  }, [market, p.isLong]);\n\n  const totalInterestUsd = market?.longInterestUsd.add(market.shortInterestUsd);\n\n  return (\n    <div className=\"Exchange-swap-market-box App-box App-box-border\">\n      <div className=\"App-card-title\">\n        {longShortText}&nbsp;{indexToken?.symbol}\n      </div>\n      <div className=\"App-card-divider\" />\n      <div>\n        <ExchangeInfoRow label={t`Market`} value={marketName || \"...\"} />\n        <ExchangeInfoRow\n          label={t`Entry Price`}\n          value={\n            <Tooltip\n              handle={formatUsd(entryPrice) || \"...\"}\n              position=\"right-bottom\"\n              renderContent={() => (\n                <Trans>\n                  The position will be opened at {formatUsd(entryPrice)} with a max slippage of{\" \"}\n                  {(savedSlippageAmount! / 100.0).toFixed(2)}%.\n                  <br />\n                  <br />\n                  The slippage amount can be configured under Settings, found by clicking on your address at the top\n                  right of the page after connecting your wallet.\n                  <br />\n                  <br />\n                  <ExternalLink href=\"https://gmxio.gitbook.io/gmx/trading#opening-a-position\">More Info</ExternalLink>\n                </Trans>\n              )}\n            />\n          }\n        />\n\n        <ExchangeInfoRow\n          label={t`Exit Price`}\n          value={\n            <Tooltip\n              handle={formatUsd(exitPrice) || \"...\"}\n              position=\"right-bottom\"\n              renderContent={() => (\n                <Trans>\n                  If you have an existing position, the position will be closed at {formatUsd(entryPrice)}.\n                  <br />\n                  <br />\n                  This exit price will change with the price of the asset.\n                  <br />\n                  <br />\n                  <ExternalLink href=\"https://gmxio.gitbook.io/gmx/trading#opening-a-position\">More Info</ExternalLink>\n                </Trans>\n              )}\n            />\n          }\n        />\n\n        <ExchangeInfoRow\n          label={t`Borrow Fee`}\n          value={\n            borrowingRate ? `-${formatAmount(borrowingRate, 30, 4)}% / 1h` : \"...\"\n            // <Tooltip\n            //   handle={borrowingRate ? `${formatAmount(borrowingRate, 30, 4)}% / 1h` : \"...\"}\n            //   position=\"right-bottom\"\n            //   renderContent={() => (\n            //     <Trans>\n            //       The borrow fee is calculated as:\n            //       <br />\n            //       <br />\n            //       {p.isLong\n            //         ? \"a * (open interest in usd + pending pnl) ^ exp / (pool usd)\"\n            //         : \"a * (open interest in usd) ^ exp / (pool usd)\"}\n            //       <br />\n            //       <br />\n            //       a - borrowing fee factor\n            //       <br />\n            //       exp - exponent factor\n            //       {/* <ExternalLink href=\"https://gmxio.gitbook.io/gmx/trading#opening-a-position\">More Info</ExternalLink> */}\n            //     </Trans>\n            //   )}\n            // />\n          }\n        />\n\n        <ExchangeInfoRow\n          label={t`Funding Fee`}\n          value={\n            fundingRate ? `${fundingRate.gt(0) ? \"+\" : \"-\"}${formatAmount(fundingRate.abs(), 30, 4)}% / 1h` : \"...\"\n            // <Tooltip\n            //   handle={borrowingRate ? `${formatAmount(borrowingRate, 30, 4)}% / 1h` : \"...\"}\n            //   position=\"right-bottom\"\n            //   renderContent={() => (\n            //     <Trans>\n            //       The borrow fee is calculated as:\n            //       <br />\n            //       <br />\n            //       {p.isLong\n            //         ? \"a * (open interest in usd + pending pnl) ^ exp / (pool usd)\"\n            //         : \"a * (open interest in usd) ^ exp / (pool usd)\"}\n            //       <br />\n            //       <br />\n            //       a - borrowing fee factor\n            //       <br />\n            //       exp - exponent factor\n            //       {/* <ExternalLink href=\"https://gmxio.gitbook.io/gmx/trading#opening-a-position\">More Info</ExternalLink> */}\n            //     </Trans>\n            //   )}\n            // />\n          }\n        />\n\n        <ExchangeInfoRow\n          label={t`Available liquidity`}\n          value={\n            <Tooltip\n              className=\"al-swap\"\n              handle={formatUsd(liquidity) || \"...\"}\n              position=\"right-bottom\"\n              renderContent={() => (\n                <div>\n                  <StatsTooltipRow\n                    label={t`Max ${indexToken?.symbol} ${longShortText.toLocaleLowerCase()} capacity`}\n                    value={formatUsd(maxReservedUsd, { displayDecimals: 0 }) || \"...\"}\n                    showDollar={false}\n                  />\n\n                  <StatsTooltipRow\n                    label={t`Current ${indexToken?.symbol} ${longShortText.toLocaleLowerCase()}`}\n                    value={formatUsd(reservedUsd, { displayDecimals: 0 }) || \"...\"}\n                    showDollar={false}\n                  />\n                </div>\n              )}\n            />\n          }\n        />\n\n        <ExchangeInfoRow\n          label={t`Open Interest Balance`}\n          value={\n            <div className=\"MarketCard-pool-balance\">\n              <Tooltip\n                position=\"right-bottom\"\n                handle={\n                  totalInterestUsd?.gt(0) ? (\n                    <ShareBar\n                      className=\"MarketCard-pool-balance-bar\"\n                      share={market?.longInterestUsd}\n                      total={totalInterestUsd}\n                    />\n                  ) : (\n                    \"...\"\n                  )\n                }\n                renderContent={() => (\n                  <div>\n                    {market && totalInterestUsd && (\n                      <>\n                        <StatsTooltipRow\n                          label={t`Long Open Interest`}\n                          value={\n                            <span>\n                              {formatUsd(market.longInterestUsd, { displayDecimals: 0 })} <br />\n                              {totalInterestUsd.gt(0) &&\n                                `(${formatPercentage(getBasisPoints(market.longInterestUsd, totalInterestUsd))})`}\n                            </span>\n                          }\n                          showDollar={false}\n                        />\n                        <br />\n                        <StatsTooltipRow\n                          label={t`Short Open Interest`}\n                          value={\n                            <span>\n                              {formatUsd(market.shortInterestUsd, { displayDecimals: 0 })} <br />\n                              {totalInterestUsd.gt(0) &&\n                                `(${formatPercentage(getBasisPoints(market.shortInterestUsd, totalInterestUsd))})`}\n                            </span>\n                          }\n                          showDollar={false}\n                        />\n                      </>\n                    )}\n                  </div>\n                )}\n              />\n            </div>\n          }\n        />\n      </div>\n    </div>\n  );\n}\n","import { Trans, t } from \"@lingui/macro\";\n\nimport ExchangeInfoRow from \"components/Exchange/ExchangeInfoRow\";\nimport StatsTooltipRow from \"components/StatsTooltip/StatsTooltipRow\";\nimport Tooltip from \"components/Tooltip/Tooltip\";\nimport { TokenData, TokensRatio, convertToTokenAmount, getTokensRatioByPrice } from \"domain/synthetics/tokens\";\nimport { BigNumber } from \"ethers\";\n\nimport { USD_DECIMALS } from \"lib/legacy\";\nimport { formatAmount, formatTokenAmount, formatUsd } from \"lib/numbers\";\nimport { useMemo } from \"react\";\n\nexport type Props = {\n  maxLiquidityUsd?: BigNumber;\n  fromToken?: TokenData;\n  toToken?: TokenData;\n  markRatio?: TokensRatio;\n};\n\nexport function SwapCard(p: Props) {\n  const { fromToken, toToken, maxLiquidityUsd } = p;\n\n  const maxLiquidityAmount = convertToTokenAmount(maxLiquidityUsd, toToken?.decimals, toToken?.prices?.maxPrice);\n\n  const ratioStr = useMemo(() => {\n    if (!fromToken || !toToken) return \"...\";\n\n    const markRatio = getTokensRatioByPrice({\n      fromToken,\n      toToken,\n      fromPrice: fromToken.prices.minPrice,\n      toPrice: toToken.prices.maxPrice,\n    });\n\n    const smallest = markRatio.smallestToken;\n    const largest = markRatio.largestToken;\n\n    return `${formatAmount(markRatio.ratio, USD_DECIMALS, 4)} ${smallest?.symbol} / ${largest?.symbol}`;\n  }, [fromToken, toToken]);\n\n  return (\n    <div className=\"Exchange-swap-market-box App-box App-box-border\">\n      <div className=\"App-card-title\">\n        <Trans>Swap</Trans>\n      </div>\n      <div className=\"App-card-divider\" />\n\n      <div>\n        <ExchangeInfoRow\n          label={t`${fromToken?.symbol} Price`}\n          value={formatUsd(fromToken?.prices?.minPrice) || \"...\"}\n        />\n\n        <ExchangeInfoRow label={t`${toToken?.symbol} Price`} value={formatUsd(toToken?.prices?.maxPrice) || \"...\"} />\n\n        <ExchangeInfoRow\n          label={t`Available liquidity`}\n          value={\n            <Tooltip\n              handle={formatUsd(maxLiquidityUsd) || \"...\"}\n              position=\"right-bottom\"\n              renderContent={() => (\n                <div>\n                  <StatsTooltipRow\n                    className=\"al-swap\"\n                    label={t`Max ${toToken?.symbol} out`}\n                    value={[\n                      formatTokenAmount(maxLiquidityAmount, toToken?.decimals, toToken?.symbol, {\n                        useCommas: true,\n                        displayDecimals: 0,\n                      }),\n                      `(${formatUsd(maxLiquidityUsd, { displayDecimals: 0 })})`,\n                    ]}\n                    showDollar={false}\n                  />\n                </div>\n              )}\n            />\n          }\n        />\n\n        <ExchangeInfoRow label={t`Price`} value={ratioStr} />\n      </div>\n    </div>\n  );\n}\n","import { Trans, t } from \"@lingui/macro\";\nimport ExchangeInfoRow from \"components/Exchange/ExchangeInfoRow\";\nimport TokenSelector from \"components/TokenSelector/TokenSelector\";\nimport Tooltip from \"components/Tooltip/Tooltip\";\nimport { AvailableMarketsOptions } from \"domain/synthetics/trade/useAvailableMarketsOptions\";\nimport { Token } from \"domain/tokens\";\nimport { useChainId } from \"lib/chains\";\nimport { useMemo } from \"react\";\n\nexport type Props = {\n  selectedCollateralAddress?: string;\n  selectedMarketAddress?: string;\n  marketsOptions?: AvailableMarketsOptions;\n  availableCollaterals?: Token[];\n  hasExistingPosition?: boolean;\n  hasExistingOrder?: boolean;\n  onSelectCollateralAddress: (address?: string) => void;\n};\n\nexport function CollateralSelectorRow(p: Props) {\n  const {\n    selectedCollateralAddress,\n    selectedMarketAddress,\n    marketsOptions,\n    hasExistingOrder,\n    hasExistingPosition,\n    availableCollaterals,\n    onSelectCollateralAddress,\n  } = p;\n\n  const { collateralWithOrder, marketWithOrder, marketWithPosition, collateralWithPosition } = marketsOptions || {};\n\n  const { chainId } = useChainId();\n\n  const message = useMemo(() => {\n    if (\n      !hasExistingPosition &&\n      collateralWithPosition &&\n      selectedMarketAddress === marketWithPosition?.marketTokenAddress &&\n      collateralWithPosition?.address !== selectedCollateralAddress\n    ) {\n      return (\n        <div className=\"MarketSelector-tooltip-row\">\n          <Trans>\n            You have an existing position with {collateralWithPosition.symbol} as collateral.{\" \"}\n            <div\n              className=\"MarketSelector-tooltip-row-action clickable underline muted\"\n              onClick={() => {\n                onSelectCollateralAddress(collateralWithPosition.address);\n              }}\n            >\n              Switch to {collateralWithPosition.symbol} collateral.\n            </div>{\" \"}\n          </Trans>\n        </div>\n      );\n    }\n\n    if (\n      !hasExistingOrder &&\n      !collateralWithPosition &&\n      marketWithOrder &&\n      selectedMarketAddress === marketWithOrder?.marketTokenAddress &&\n      collateralWithOrder &&\n      collateralWithOrder.address !== selectedCollateralAddress\n    ) {\n      return (\n        <div className=\"MarketSelector-tooltip-row\">\n          <Trans>\n            You have an existing order with {collateralWithOrder.symbol} as collateral.{\" \"}\n            <div\n              className=\"MarketSelector-tooltip-row-action clickable underline muted\"\n              onClick={() => {\n                onSelectCollateralAddress(collateralWithOrder.address);\n              }}\n            >\n              Switch to {collateralWithOrder.symbol} collateral.\n            </div>{\" \"}\n          </Trans>\n        </div>\n      );\n    }\n\n    return null;\n  }, [\n    hasExistingPosition,\n    collateralWithPosition,\n    selectedMarketAddress,\n    marketWithPosition?.marketTokenAddress,\n    selectedCollateralAddress,\n    hasExistingOrder,\n    marketWithOrder,\n    collateralWithOrder,\n    onSelectCollateralAddress,\n  ]);\n\n  return (\n    <ExchangeInfoRow\n      label={\n        message ? (\n          <Tooltip\n            handle={t`Collateral In`}\n            position=\"left-bottom\"\n            className=\"MarketSelector-tooltip\"\n            renderContent={() => <div className=\"MarketSelector-tooltip-content\">{message}</div>}\n          />\n        ) : (\n          t`Collateral In`\n        )\n      }\n      className=\"SwapBox-info-row\"\n      value={\n        selectedCollateralAddress &&\n        availableCollaterals && (\n          <TokenSelector\n            label={t`Collateral In`}\n            className=\"GlpSwap-from-token\"\n            chainId={chainId}\n            tokenAddress={selectedCollateralAddress}\n            onSelectToken={(token) => {\n              onSelectCollateralAddress(token.address);\n            }}\n            tokens={availableCollaterals}\n            showTokenImgInDropdown={true}\n          />\n        )\n      }\n    />\n  );\n}\n","import { Trans, t } from \"@lingui/macro\";\nimport { Dropdown, DropdownOption } from \"components/Dropdown/Dropdown\";\nimport ExchangeInfoRow from \"components/Exchange/ExchangeInfoRow\";\nimport Tooltip from \"components/Tooltip/Tooltip\";\nimport { AvailableMarketsOptions } from \"domain/synthetics/trade/useAvailableMarketsOptions\";\nimport { Market } from \"domain/synthetics/markets\";\nimport { Token } from \"domain/tokens\";\nimport { BigNumber } from \"ethers\";\nimport { formatPercentage } from \"lib/numbers\";\nimport { useCallback, useMemo } from \"react\";\n\nexport type Props = {\n  indexToken?: Token;\n  selectedMarket?: Market;\n  marketsOptions?: AvailableMarketsOptions;\n  hasExistingPosition?: boolean;\n  hasExistingOrder?: boolean;\n  isOutPositionLiquidity?: boolean;\n  currentPriceImpactBps?: BigNumber;\n  onSelectMarketAddress: (marketAddress?: string) => void;\n};\n\nexport function MarketPoolSelectorRow(p: Props) {\n  const {\n    selectedMarket,\n    indexToken,\n    marketsOptions,\n    hasExistingOrder,\n    hasExistingPosition,\n    isOutPositionLiquidity,\n    currentPriceImpactBps,\n    onSelectMarketAddress,\n  } = p;\n\n  const {\n    isNoSufficientLiquidityInAnyMarket,\n    marketWithOrder,\n    marketWithPosition,\n    maxLiquidityMarket,\n    availableMarkets,\n    minPriceImpactMarket,\n    minPriceImpactBps,\n  } = marketsOptions || {};\n\n  const isSelectedMarket = useCallback(\n    (market: Market) => {\n      return selectedMarket && market.marketTokenAddress === selectedMarket.marketTokenAddress;\n    },\n    [selectedMarket]\n  );\n\n  const message = useMemo(() => {\n    if (isNoSufficientLiquidityInAnyMarket) {\n      return (\n        <div className=\"MarketSelector-tooltip-row\">\n          <Trans>Insufficient liquidity in any {indexToken?.symbol}/USD market pools for your order.</Trans>\n        </div>\n      );\n    }\n\n    if (isOutPositionLiquidity && maxLiquidityMarket && !isSelectedMarket(maxLiquidityMarket)) {\n      return (\n        <div className=\"MarketSelector-tooltip-row\">\n          <Trans>\n            Insufficient liquidity in {selectedMarket?.name} market pool. <br />\n            <div\n              className=\"MarketSelector-tooltip-row-action clickable underline muted \"\n              onClick={() => onSelectMarketAddress(maxLiquidityMarket!.marketTokenAddress)}\n            >\n              Switch to {maxLiquidityMarket!.name} market pool.\n            </div>\n          </Trans>\n        </div>\n      );\n    }\n\n    if (!hasExistingPosition && marketWithPosition && !isSelectedMarket(marketWithPosition)) {\n      return (\n        <div className=\"MarketSelector-tooltip-row\">\n          <Trans>\n            You have an existing position in the {marketWithPosition.name} market pool.{\" \"}\n            <div\n              className=\"MarketSelector-tooltip-row-action clickable underline muted\"\n              onClick={() => {\n                onSelectMarketAddress(marketWithPosition.marketTokenAddress);\n              }}\n            >\n              Switch to {marketWithPosition.name} market pool.\n            </div>{\" \"}\n          </Trans>\n        </div>\n      );\n    }\n\n    if (!marketWithPosition && !hasExistingOrder && marketWithOrder && !isSelectedMarket(marketWithOrder)) {\n      return (\n        <div className=\"MarketSelector-tooltip-row\">\n          <Trans>\n            You have an existing order in the {marketWithOrder.name} market pool.{\" \"}\n            <div\n              className=\"MarketSelector-tooltip-row-action clickable underline muted\"\n              onClick={() => {\n                onSelectMarketAddress(marketWithOrder.marketTokenAddress);\n              }}\n            >\n              Switch to {marketWithOrder.name} market pool.\n            </div>{\" \"}\n          </Trans>\n        </div>\n      );\n    }\n\n    if (\n      !marketWithPosition &&\n      !marketWithOrder &&\n      minPriceImpactMarket &&\n      minPriceImpactBps &&\n      !isSelectedMarket(minPriceImpactMarket)\n    ) {\n      return (\n        <div className=\"MarketSelector-tooltip-row\">\n          <Trans>\n            You can get a {formatPercentage(currentPriceImpactBps?.sub(minPriceImpactBps))} better execution price in\n            the {minPriceImpactMarket.name} market pool.\n            <div\n              className=\"MarketSelector-tooltip-row-action clickable underline muted\"\n              onClick={() => onSelectMarketAddress(minPriceImpactMarket.marketTokenAddress)}\n            >\n              Switch to {minPriceImpactMarket.name} market pool.\n            </div>\n          </Trans>\n        </div>\n      );\n    }\n\n    return null;\n  }, [\n    currentPriceImpactBps,\n    hasExistingOrder,\n    hasExistingPosition,\n    indexToken?.symbol,\n    isNoSufficientLiquidityInAnyMarket,\n    isOutPositionLiquidity,\n    isSelectedMarket,\n    marketWithOrder,\n    marketWithPosition,\n    maxLiquidityMarket,\n    minPriceImpactBps,\n    minPriceImpactMarket,\n    onSelectMarketAddress,\n    selectedMarket?.name,\n  ]);\n\n  const dropdownOptions: DropdownOption[] =\n    availableMarkets?.map((market) => ({\n      value: market.marketTokenAddress,\n      label: market.name,\n    })) || [];\n\n  return (\n    <ExchangeInfoRow\n      className=\"SwapBox-info-row\"\n      label={\n        message ? (\n          <Tooltip\n            handle={t`Pool`}\n            position=\"left-bottom\"\n            className=\"MarketSelector-tooltip\"\n            renderContent={() => <div className=\"MarketSelector-tooltip-content\">{message}</div>}\n          />\n        ) : (\n          t`Pool`\n        )\n      }\n      value={\n        <>\n          <Dropdown\n            className=\"SwapBox-market-selector-dropdown\"\n            selectedOption={dropdownOptions.find((o) => o.value === selectedMarket?.marketTokenAddress)}\n            placeholder={\"-\"}\n            options={dropdownOptions}\n            onSelect={(option) => {\n              onSelectMarketAddress(option.value);\n            }}\n          />\n        </>\n      }\n    />\n  );\n}\n","import { t } from \"@lingui/macro\";\nimport Button from \"components/Button/Button\";\nimport Modal from \"components/Modal/Modal\";\nimport { RequestStatus } from \"components/RequestStatus/RequestStatus\";\nimport { useSyntheticsEvents } from \"context/SyntheticsEvents\";\nimport { useMarkets } from \"domain/synthetics/markets\";\nimport { OrderType, isIncreaseOrderType, isSwapOrderType } from \"domain/synthetics/orders\";\nimport { getTokenData, useAvailableTokensData } from \"domain/synthetics/tokens\";\nimport { BigNumber } from \"ethers\";\nimport { useChainId } from \"lib/chains\";\nimport { formatTokenAmount, formatUsd } from \"lib/numbers\";\nimport { getByKey } from \"lib/objects\";\nimport { useEffect, useState } from \"react\";\nimport \"./OrderStatus.scss\";\n\ntype Props = {\n  orderType: OrderType;\n  marketAddress?: string;\n  isLong?: boolean;\n  initialCollateralAddress?: string;\n  initialCollateralAmount?: BigNumber;\n  toSwapTokenAddress?: string;\n  sizeDeltaUsd?: BigNumber;\n  isVisible: boolean;\n  onClose: () => void;\n};\n\nexport function OrderStatus(p: Props) {\n  const [orderKey, setOrderKey] = useState<string>();\n  const { chainId } = useChainId();\n  const { tokensData } = useAvailableTokensData(chainId);\n  const { marketsData } = useMarkets(chainId);\n  const { orderStatuses, touchOrderStatus } = useSyntheticsEvents();\n\n  const orderStatus = orderKey ? orderStatuses[orderKey] : undefined;\n\n  const market = getByKey(marketsData, p.marketAddress);\n  const indexToken = getTokenData(tokensData, market?.indexTokenAddress, \"native\");\n  const initialCollateralToken = getTokenData(tokensData, p.initialCollateralAddress);\n  const toSwapToken = getTokenData(tokensData, p.toSwapTokenAddress);\n\n  const longText = p.isLong ? t`Long` : t`Short`;\n\n  const isProcessing = !orderStatus?.cancelledTxnHash && !orderStatus?.executedTxnHash;\n\n  function renderTitle() {\n    if (isSwapOrderType(p.orderType)) {\n      if (!initialCollateralToken || !toSwapToken || !p.initialCollateralAmount) return t`Unknown order`;\n\n      return t`Swap ${formatTokenAmount(\n        p.initialCollateralAmount,\n        initialCollateralToken.decimals,\n        initialCollateralToken.symbol\n      )} for ${toSwapToken.symbol}`;\n    }\n\n    if (!indexToken) return t`Unknown order`;\n\n    const orderTypeText = isIncreaseOrderType(p.orderType) ? t`Increasing` : t`Decreasing`;\n\n    return t`${orderTypeText} ${indexToken?.symbol} ${longText} by ${formatUsd(p.sizeDeltaUsd)}`;\n  }\n\n  function renderCreationStatus() {\n    let text = \"\";\n    let isLoading = true;\n\n    if (isSwapOrderType(p.orderType)) {\n      if (!initialCollateralToken || !toSwapToken) return null;\n\n      text = t`Sending swap ${initialCollateralToken.symbol} for ${toSwapToken.symbol} request`;\n\n      if (orderStatus?.createdTxnHash) {\n        isLoading = false;\n        text = t`Swap ${initialCollateralToken.symbol} for ${toSwapToken.symbol} request sent`;\n      }\n    } else {\n      if (!indexToken) return null;\n\n      const orderTypeText = isIncreaseOrderType(p.orderType) ? t`Increase` : t`Decrease`;\n\n      text = t`Sending ${orderTypeText.toLowerCase()} ${indexToken.symbol} ${longText} request`;\n\n      if (orderStatus?.createdTxnHash) {\n        isLoading = false;\n        text = t`${orderTypeText} ${indexToken.symbol} ${longText} request sent`;\n      }\n    }\n\n    return <RequestStatus isLoading={isLoading} txnHash={orderStatus?.createdTxnHash} text={text} />;\n  }\n\n  function renderExecutionStatus() {\n    let text = \"\";\n    let isLoading = false;\n    let txnHash: string | undefined;\n\n    if (orderStatus?.createdTxnHash) {\n      isLoading = true;\n    }\n\n    if (orderStatus?.executedTxnHash || orderStatus?.cancelledTxnHash) {\n      isLoading = false;\n      txnHash = orderStatus?.executedTxnHash || orderStatus?.cancelledTxnHash;\n    }\n\n    if (isSwapOrderType(p.orderType)) {\n      if (!initialCollateralToken || !toSwapToken) return null;\n\n      text = t`Fulfilling swap ${initialCollateralToken.symbol} for ${toSwapToken.symbol} request`;\n\n      if (orderStatus?.cancelledTxnHash) {\n        text = t`Swap ${initialCollateralToken.symbol} for ${toSwapToken.symbol} cancelled`;\n      }\n\n      if (orderStatus?.executedTxnHash) {\n        text = t`Swapped ${initialCollateralToken.symbol} for ${toSwapToken.symbol}`;\n      }\n    } else {\n      if (!indexToken) return null;\n\n      const orderTypeText = isIncreaseOrderType(p.orderType) ? t`Increase` : t`Decrease`;\n\n      text = t`Fulfilling ${orderTypeText.toLowerCase()} ${indexToken.symbol} ${longText} request`;\n\n      if (orderStatus?.cancelledTxnHash) {\n        text = t`${orderTypeText} ${indexToken.symbol} ${longText} cancelled`;\n      }\n\n      if (orderStatus?.executedTxnHash) {\n        const orderTypeText = isIncreaseOrderType(p.orderType) ? t`Increased` : t`Decreased`;\n        text = t`${orderTypeText} ${indexToken.symbol} ${longText}`;\n      }\n    }\n\n    return <RequestStatus isLoading={isLoading} txnHash={txnHash} text={text} />;\n  }\n\n  useEffect(\n    function resetOrderKey() {\n      if (!p.isVisible && orderKey) setOrderKey(undefined);\n    },\n    [orderKey, p.isVisible]\n  );\n\n  useEffect(\n    function initOrderKey() {\n      if (!p.isVisible || orderKey) return;\n\n      const matchedPendingOrderStatus = Object.values(orderStatuses).find((orderStatus) => {\n        if (\n          !orderStatus.isTouched &&\n          !orderStatus.cancelledTxnHash &&\n          !orderStatus.executedTxnHash &&\n          orderStatus.data.orderType === p.orderType &&\n          (!p.marketAddress || orderStatus.data.marketAddress === p.marketAddress) &&\n          (typeof p.isLong === \"undefined\" || orderStatus.data.isLong === p.isLong)\n        ) {\n          return true;\n        }\n\n        return false;\n      });\n\n      if (matchedPendingOrderStatus) {\n        touchOrderStatus(matchedPendingOrderStatus.key);\n        setOrderKey(matchedPendingOrderStatus.key);\n      }\n    },\n    [\n      orderKey,\n      orderStatuses,\n      p.initialCollateralAddress,\n      p.initialCollateralAmount,\n      p.isLong,\n      p.isVisible,\n      p.marketAddress,\n      p.orderType,\n      p.sizeDeltaUsd,\n      touchOrderStatus,\n    ]\n  );\n\n  return (\n    <div className=\"Confirmation-box OrderStatus\">\n      <Modal isVisible={p.isVisible} setIsVisible={p.onClose} label={t`Order status`} allowContentTouchMove>\n        {p.isVisible && (\n          <>\n            <div className=\"Confirmation-box-main\">{renderTitle()}</div>\n            {renderCreationStatus()}\n            {renderExecutionStatus()}\n\n            <div className=\"App-card-divider\" />\n            <Button className=\"w-100\" variant=\"primary-action\" onClick={p.onClose} disabled={isProcessing}>\n              {isProcessing ? t`Processing...` : t`Close`}\n            </Button>\n          </>\n        )}\n      </Modal>\n    </div>\n  );\n}\n","import { Trans, t } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport cx from \"classnames\";\nimport Button from \"components/Button/Button\";\nimport BuyInputSection from \"components/BuyInputSection/BuyInputSection\";\nimport Checkbox from \"components/Checkbox/Checkbox\";\nimport { Dropdown } from \"components/Dropdown/Dropdown\";\nimport { ConfirmationBox } from \"components/Synthetics/ConfirmationBox/ConfirmationBox\";\nimport ExchangeInfoRow from \"components/Exchange/ExchangeInfoRow\";\nimport { LeverageSlider } from \"components/LeverageSlider/LeverageSlider\";\nimport Tab from \"components/Tab/Tab\";\nimport TokenSelector from \"components/TokenSelector/TokenSelector\";\nimport { ValueTransition } from \"components/ValueTransition/ValueTransition\";\nimport { getKeepLeverageKey, getLeverageEnabledKey, getLeverageKey } from \"config/localStorage\";\nimport {\n  AvailableTokenOptions,\n  SwapAmounts,\n  TradeFeesType,\n  TradeMode,\n  TradeType,\n  getDecreasePositionAmounts,\n  getIncreasePositionAmountsByCollateral,\n  getIncreasePositionAmountsBySizeDelta,\n  getMarkPrice,\n  getNextPositionValuesForDecreaseTrade,\n  getNextPositionValuesForIncreaseTrade,\n  getSwapAmountsByFromValue,\n  getSwapAmountsByToValue,\n  getTradeFees,\n  useSwapRoutes,\n} from \"domain/synthetics/trade\";\nimport { useAvailableMarketsOptions } from \"domain/synthetics/trade/useAvailableMarketsOptions\";\nimport { TradeFlags } from \"domain/synthetics/trade/useTradeFlags\";\nimport {\n  getCommonError,\n  getDecreaseError,\n  getIncreaseError,\n  getSwapError,\n} from \"domain/synthetics/trade/utils/validation\";\nimport {\n  VirtualInventoryForPositionsData,\n  estimateExecuteDecreaseOrderGasLimit,\n  estimateExecuteIncreaseOrderGasLimit,\n  estimateExecuteSwapOrderGasLimit,\n  getExecutionFee,\n  useGasLimits,\n  useGasPrice,\n} from \"domain/synthetics/fees\";\nimport { MarketInfo, getAvailableUsdLiquidityForPosition } from \"domain/synthetics/markets\";\nimport { OrderInfo, OrderType, OrdersInfoData } from \"domain/synthetics/orders\";\nimport { PositionInfo, PositionsInfoData, formatLeverage, usePositionsConstants } from \"domain/synthetics/positions\";\nimport { TokenData, TokensData, TokensRatio, convertToUsd, getTokensRatioByPrice } from \"domain/synthetics/tokens\";\nimport { BigNumber } from \"ethers\";\nimport longImg from \"img/long.svg\";\nimport shortImg from \"img/short.svg\";\nimport swapImg from \"img/swap.svg\";\nimport { useChainId } from \"lib/chains\";\nimport { BASIS_POINTS_DIVISOR, USD_DECIMALS } from \"lib/legacy\";\nimport { useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport {\n  formatAmount,\n  formatAmountFree,\n  formatPercentage,\n  formatTokenAmount,\n  formatUsd,\n  parseValue,\n} from \"lib/numbers\";\nimport { useSafeState } from \"lib/useSafeState\";\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { AiOutlineEdit } from \"react-icons/ai\";\nimport { IoMdSwap } from \"react-icons/io\";\nimport { usePrevious } from \"react-use\";\nimport { ClaimableCard } from \"../ClaimableCard/ClaimableCard\";\nimport { MarketCard } from \"../MarketCard/MarketCard\";\nimport { SwapCard } from \"../SwapCard/SwapCard\";\nimport { TradeFeesRow } from \"../TradeFeesRow/TradeFeesRow\";\nimport { CollateralSelectorRow } from \"./CollateralSelectorRow\";\nimport { MarketPoolSelectorRow } from \"./MarketPoolSelectorRow\";\nimport \"./TradeBox.scss\";\nimport { OrderStatus } from \"../OrderStatus/OrderStatus\";\n\nexport type Props = {\n  tradeType: TradeType;\n  tradeMode: TradeMode;\n  tradeFlags: TradeFlags;\n  isWrapOrUnwrap: boolean;\n  tokensData?: TokensData;\n  fromTokenAddress?: string;\n  fromToken?: TokenData;\n  toTokenAddress?: string;\n  toToken?: TokenData;\n  marketAddress?: string;\n  marketInfo?: MarketInfo;\n  collateralAddress?: string;\n  collateralToken?: TokenData;\n  avaialbleTokenOptions: AvailableTokenOptions;\n  existingPosition?: PositionInfo;\n  existingOrder?: OrderInfo;\n  positionsInfo?: PositionsInfoData;\n  ordersInfo?: OrdersInfoData;\n  virtualInventoryForPositions?: VirtualInventoryForPositionsData;\n  allowedSlippage: number;\n  acceptablePriceImpactBpsForLimitOrders: BigNumber;\n  savedIsPnlInLeverage: boolean;\n  isHigherSlippageAllowed: boolean;\n  shouldDisableValidation?: boolean;\n  setIsHigherSlippageAllowed: (value: boolean) => void;\n  onSelectFromTokenAddress: (fromTokenAddress?: string) => void;\n  onSelectToTokenAddress: (toTokenAddress?: string) => void;\n  onSelectTradeType: (tradeType: TradeType) => void;\n  onSelectTradeMode: (tradeMode: TradeMode) => void;\n  setPendingTxns: (txns: any) => void;\n  onSelectMarketAddress: (marketAddress?: string) => void;\n  onSelectCollateralAddress: (collateralAddress?: string) => void;\n  onConnectWallet: () => void;\n  setIsEditingAcceptablePriceImpact: (val: boolean) => void;\n  setIsClaiming: (val: boolean) => void;\n};\n\nconst tradeTypeIcons = {\n  [TradeType.Long]: longImg,\n  [TradeType.Short]: shortImg,\n  [TradeType.Swap]: swapImg,\n};\n\nconst avaialbleModes = {\n  [TradeType.Long]: [TradeMode.Market, TradeMode.Limit, TradeMode.Trigger],\n  [TradeType.Short]: [TradeMode.Market, TradeMode.Limit, TradeMode.Trigger],\n  [TradeType.Swap]: [TradeMode.Market, TradeMode.Limit],\n};\n\nexport function TradeBox(p: Props) {\n  const {\n    tradeMode,\n    tradeType,\n    tradeFlags,\n    isWrapOrUnwrap,\n    tokensData,\n    fromTokenAddress,\n    fromToken,\n    toTokenAddress,\n    toToken,\n    marketAddress,\n    marketInfo,\n    collateralAddress,\n    collateralToken,\n    avaialbleTokenOptions,\n    savedIsPnlInLeverage,\n    positionsInfo,\n    existingPosition,\n    existingOrder,\n    ordersInfo,\n    shouldDisableValidation,\n    acceptablePriceImpactBpsForLimitOrders,\n    allowedSlippage,\n    virtualInventoryForPositions,\n    isHigherSlippageAllowed,\n    setIsHigherSlippageAllowed,\n    onSelectMarketAddress,\n    onSelectCollateralAddress,\n    onSelectFromTokenAddress,\n    onSelectToTokenAddress,\n    onSelectTradeMode,\n    onSelectTradeType,\n    onConnectWallet,\n    setIsEditingAcceptablePriceImpact,\n    setIsClaiming,\n    setPendingTxns,\n  } = p;\n  const { isLong, isSwap, isIncrease, isPosition, isLimit, isTrigger, isMarket } = tradeFlags;\n  const { swapTokens, indexTokens, infoTokens } = avaialbleTokenOptions;\n\n  const tradeTypeLabels = useMemo(() => {\n    return {\n      [TradeType.Long]: t`Long`,\n      [TradeType.Short]: t`Short`,\n      [TradeType.Swap]: t`Swap`,\n    };\n  }, []);\n\n  const tradeModeLabels = {\n    [TradeMode.Market]: t`Market`,\n    [TradeMode.Limit]: t`Limit`,\n    [TradeMode.Trigger]: t`Trigger`,\n  };\n\n  const { chainId } = useChainId();\n  const { account } = useWeb3React();\n  const { gasPrice } = useGasPrice(chainId);\n  const { gasLimits } = useGasLimits(chainId);\n  const { minCollateralUsd } = usePositionsConstants(chainId);\n\n  const [stage, setStage] = useState<\"trade\" | \"confirmation\" | \"processing\">(\"trade\");\n  const [focusedInput, setFocusedInput] = useState<\"from\" | \"to\">();\n\n  const [fromTokenInputValue, setFromTokenInputValue] = useSafeState(\"\");\n  const fromTokenAmount = fromToken ? parseValue(fromTokenInputValue || \"0\", fromToken.decimals)! : BigNumber.from(0);\n  const fromTokenPrice = fromToken?.prices.minPrice;\n  const fromUsd = convertToUsd(fromTokenAmount, fromToken?.decimals, fromTokenPrice);\n  const isNotMatchAvailableBalance = fromToken?.balance?.gt(0) && !fromToken.balance.eq(fromTokenAmount);\n\n  const [toTokenInputValue, setToTokenInputValue] = useSafeState(\"\");\n  const toTokenAmount = toToken ? parseValue(toTokenInputValue || \"0\", toToken.decimals)! : BigNumber.from(0);\n\n  const markPrice = useMemo(() => {\n    if (!toToken) {\n      return undefined;\n    }\n\n    if (isSwap) {\n      return toToken.prices.minPrice;\n    }\n\n    return getMarkPrice({ prices: toToken.prices, isIncrease, isLong });\n  }, [isIncrease, isLong, isSwap, toToken]);\n\n  const [closeSizeInputValue, setCloseSizeInputValue] = useState(\"\");\n  const closeSizeUsd = parseValue(closeSizeInputValue || \"0\", USD_DECIMALS)!;\n\n  const [triggerPriceInputValue, setTriggerPriceInputValue] = useState<string>(\"\");\n  const triggerPrice = parseValue(triggerPriceInputValue, USD_DECIMALS);\n\n  const [triggerRatioInputValue, setTriggerRatioInputValue] = useState<string>(\"\");\n  const { markRatio, triggerRatio } = useMemo(() => {\n    if (!isSwap || !fromToken || !toToken || !fromTokenPrice || !markPrice) {\n      return {};\n    }\n\n    const markRatio = getTokensRatioByPrice({\n      fromToken,\n      toToken,\n      fromPrice: fromTokenPrice,\n      toPrice: markPrice,\n    });\n\n    const triggerRatioValue = parseValue(triggerRatioInputValue, USD_DECIMALS);\n\n    const triggerRatio: TokensRatio = {\n      ratio: triggerRatioValue?.gt(0) ? triggerRatioValue : markRatio.ratio,\n      largestToken: markRatio.largestToken,\n      smallestToken: markRatio.smallestToken,\n    };\n\n    return {\n      markRatio,\n      triggerRatio,\n    };\n  }, [fromToken, fromTokenPrice, isSwap, markPrice, toToken, triggerRatioInputValue]);\n\n  const [leverageOption, setLeverageOption] = useLocalStorageSerializeKey(getLeverageKey(chainId), 2);\n  const leverage = BigNumber.from(parseInt(String(Number(leverageOption!) * BASIS_POINTS_DIVISOR)));\n\n  const [isLeverageEnabled, setIsLeverageEnabled] = useLocalStorageSerializeKey(getLeverageEnabledKey(chainId), true);\n  const [keepLeverage, setKeepLeverage] = useLocalStorageSerializeKey(getKeepLeverageKey(chainId), true);\n\n  const swapRoute = useSwapRoutes({\n    fromTokenAddress,\n    toTokenAddress: isPosition ? collateralAddress : toTokenAddress,\n  });\n\n  const swapAmounts = useMemo(() => {\n    if (!isSwap || !fromToken || !toToken || !fromTokenPrice) {\n      return undefined;\n    }\n\n    if (isWrapOrUnwrap) {\n      const tokenAmount = focusedInput === \"from\" ? fromTokenAmount : toTokenAmount;\n      const usdAmount = convertToUsd(tokenAmount, fromToken.decimals, fromTokenPrice)!;\n      const price = fromTokenPrice;\n\n      const swapAmounts: SwapAmounts = {\n        amountIn: tokenAmount,\n        usdIn: usdAmount!,\n        amountOut: tokenAmount,\n        usdOut: usdAmount!,\n        swapPathStats: undefined,\n        priceIn: price,\n        priceOut: price,\n        minOutputAmount: tokenAmount,\n      };\n\n      return swapAmounts;\n    } else if (focusedInput === \"from\") {\n      return getSwapAmountsByFromValue({\n        tokenIn: fromToken,\n        tokenOut: toToken,\n        amountIn: fromTokenAmount,\n        triggerRatio: triggerRatio,\n        isLimit,\n        findSwapPath: swapRoute.findSwapPath,\n      });\n    } else {\n      return getSwapAmountsByToValue({\n        tokenIn: fromToken,\n        tokenOut: toToken,\n        amountOut: toTokenAmount,\n        triggerRatio: triggerRatio,\n        isLimit,\n        findSwapPath: swapRoute.findSwapPath,\n      });\n    }\n  }, [\n    focusedInput,\n    fromToken,\n    fromTokenAmount,\n    fromTokenPrice,\n    isLimit,\n    isSwap,\n    isWrapOrUnwrap,\n    swapRoute.findSwapPath,\n    toToken,\n    toTokenAmount,\n    triggerRatio,\n  ]);\n\n  const increaseAmounts = useMemo(() => {\n    if (!isIncrease || !toToken || !fromToken || !collateralToken || !marketInfo || !virtualInventoryForPositions) {\n      return undefined;\n    }\n\n    if (focusedInput === \"from\") {\n      return getIncreasePositionAmountsByCollateral({\n        marketInfo,\n        initialCollateralToken: fromToken,\n        collateralToken,\n        isLong,\n        initialCollateralAmount: fromTokenAmount,\n        leverage,\n        isLimit,\n        triggerPrice,\n        savedAcceptablePriceImpactBps: acceptablePriceImpactBpsForLimitOrders,\n        findSwapPath: swapRoute.findSwapPath,\n        virtualInventoryForPositions,\n      });\n    } else {\n      return getIncreasePositionAmountsBySizeDelta({\n        marketInfo,\n        initialCollateralToken: fromToken,\n        collateralToken,\n        isLong,\n        sizeDeltaInTokens: toTokenAmount,\n        leverage,\n        isLimit,\n        triggerPrice,\n        savedAcceptablePriceImpactBps: acceptablePriceImpactBpsForLimitOrders,\n        findSwapPath: swapRoute.findSwapPath,\n        virtualInventoryForPositions,\n      });\n    }\n  }, [\n    acceptablePriceImpactBpsForLimitOrders,\n    collateralToken,\n    focusedInput,\n    fromToken,\n    fromTokenAmount,\n    isIncrease,\n    isLimit,\n    isLong,\n    leverage,\n    marketInfo,\n    swapRoute.findSwapPath,\n    toToken,\n    toTokenAmount,\n    triggerPrice,\n    virtualInventoryForPositions,\n  ]);\n\n  const decreaseAmounts = useMemo(() => {\n    if (!isTrigger || !closeSizeUsd || !marketInfo || !collateralToken || !virtualInventoryForPositions) {\n      return undefined;\n    }\n\n    return getDecreasePositionAmounts({\n      marketInfo,\n      collateralToken,\n      isLong,\n      existingPosition,\n      receiveToken: collateralToken,\n      closeSizeUsd: closeSizeUsd,\n      keepLeverage: keepLeverage!,\n      isTrigger: true,\n      triggerPrice,\n      savedAcceptablePriceImpactBps: acceptablePriceImpactBpsForLimitOrders,\n      virtualInventoryForPositions,\n    });\n  }, [\n    acceptablePriceImpactBpsForLimitOrders,\n    closeSizeUsd,\n    collateralToken,\n    existingPosition,\n    isLong,\n    isTrigger,\n    keepLeverage,\n    marketInfo,\n    triggerPrice,\n    virtualInventoryForPositions,\n  ]);\n\n  const nextPositionValues = useMemo(() => {\n    if (!isPosition || !minCollateralUsd || !marketInfo) {\n      return undefined;\n    }\n\n    if (isIncrease && increaseAmounts?.acceptablePrice && fromTokenAmount.gt(0)) {\n      return getNextPositionValuesForIncreaseTrade({\n        marketInfo,\n        existingPosition,\n        sizeDeltaUsd: increaseAmounts.sizeDeltaUsd,\n        collateralDeltaUsd: increaseAmounts.collateralUsdAfterFees,\n        isLong,\n        entryPrice: increaseAmounts.acceptablePrice,\n        minCollateralUsd,\n        showPnlInLeverage: savedIsPnlInLeverage,\n      });\n    }\n\n    if (isTrigger && decreaseAmounts?.acceptablePrice && closeSizeUsd.gt(0)) {\n      return getNextPositionValuesForDecreaseTrade({\n        existingPosition,\n        marketInfo,\n        sizeDeltaUsd: decreaseAmounts.sizeDeltaUsd,\n        exitPnl: decreaseAmounts.exitPnl,\n        pnlDelta: decreaseAmounts.pnlDelta,\n        collateralDeltaUsd: decreaseAmounts.collateralDeltaUsd,\n        executionPrice: decreaseAmounts.acceptablePrice,\n        showPnlInLeverage: savedIsPnlInLeverage,\n        isLong,\n        minCollateralUsd,\n      });\n    }\n  }, [\n    closeSizeUsd,\n    decreaseAmounts,\n    existingPosition,\n    fromTokenAmount,\n    increaseAmounts,\n    isIncrease,\n    isLong,\n    isPosition,\n    isTrigger,\n    marketInfo,\n    minCollateralUsd,\n    savedIsPnlInLeverage,\n  ]);\n\n  const { fees, feesType, executionFee } = useMemo(() => {\n    if (!gasLimits || !gasPrice || !tokensData) {\n      return {};\n    }\n\n    if (isSwap && swapAmounts?.swapPathStats) {\n      const estimatedGas = estimateExecuteSwapOrderGasLimit(gasLimits, {\n        swapPath: swapAmounts.swapPathStats.swapPath,\n      });\n\n      return {\n        fees: getTradeFees({\n          initialCollateralUsd: swapAmounts.usdIn,\n          sizeDeltaUsd: BigNumber.from(0),\n          swapSteps: swapAmounts.swapPathStats.swapSteps,\n          positionFeeUsd: BigNumber.from(0),\n          swapPriceImpactDeltaUsd: swapAmounts.swapPathStats.totalSwapPriceImpactDeltaUsd,\n          positionPriceImpactDeltaUsd: BigNumber.from(0),\n          borrowingFeeUsd: BigNumber.from(0),\n          fundingFeeDeltaUsd: BigNumber.from(0),\n        }),\n        executionFee: getExecutionFee(chainId, gasLimits, tokensData, estimatedGas, gasPrice),\n        feesType: \"swap\" as TradeFeesType,\n      };\n    }\n\n    if (isIncrease && increaseAmounts) {\n      const estimatedGas = estimateExecuteIncreaseOrderGasLimit(gasLimits, {\n        swapPath: increaseAmounts.swapPathStats?.swapPath || [],\n      });\n\n      return {\n        fees: getTradeFees({\n          initialCollateralUsd: increaseAmounts.initialCollateralUsd,\n          sizeDeltaUsd: increaseAmounts.sizeDeltaUsd,\n          swapSteps: increaseAmounts.swapPathStats?.swapSteps || [],\n          positionFeeUsd: increaseAmounts.positionFeeUsd,\n          swapPriceImpactDeltaUsd: increaseAmounts.swapPathStats?.totalSwapPriceImpactDeltaUsd || BigNumber.from(0),\n          positionPriceImpactDeltaUsd: increaseAmounts.positionPriceImpactDeltaUsd,\n          borrowingFeeUsd: existingPosition?.pendingBorrowingFeesUsd || BigNumber.from(0),\n          fundingFeeDeltaUsd: existingPosition?.pendingFundingFeesUsd || BigNumber.from(0),\n        }),\n        executionFee: getExecutionFee(chainId, gasLimits, tokensData, estimatedGas, gasPrice),\n        feesType: \"increase\" as TradeFeesType,\n      };\n    }\n\n    if (isTrigger && decreaseAmounts) {\n      const estimatedGas = estimateExecuteDecreaseOrderGasLimit(gasLimits, {});\n\n      return {\n        fees: getTradeFees({\n          initialCollateralUsd: decreaseAmounts.receiveUsd,\n          sizeDeltaUsd: decreaseAmounts.sizeDeltaUsd,\n          swapSteps: [],\n          positionFeeUsd: decreaseAmounts.positionFeeUsd,\n          swapPriceImpactDeltaUsd: BigNumber.from(0),\n          positionPriceImpactDeltaUsd: decreaseAmounts.positionPriceImpactDeltaUsd,\n          borrowingFeeUsd: existingPosition?.pendingBorrowingFeesUsd || BigNumber.from(0),\n          fundingFeeDeltaUsd: existingPosition?.pendingFundingFeesUsd || BigNumber.from(0),\n        }),\n        executionFee: getExecutionFee(chainId, gasLimits, tokensData, estimatedGas, gasPrice),\n        feesType: \"decrease\" as TradeFeesType,\n      };\n    }\n\n    return {};\n  }, [\n    chainId,\n    decreaseAmounts,\n    existingPosition,\n    gasLimits,\n    gasPrice,\n    increaseAmounts,\n    isIncrease,\n    isSwap,\n    isTrigger,\n    swapAmounts,\n    tokensData,\n  ]);\n\n  const marketsOptions = useAvailableMarketsOptions(chainId, {\n    isIncrease,\n    disable: !isPosition,\n    indexToken: toToken,\n    isLong,\n    increaseSizeUsd: increaseAmounts?.sizeDeltaUsd,\n    positionsInfo,\n    ordersInfo,\n    hasExistingOrder: Boolean(existingOrder),\n    hasExistingPosition: Boolean(existingPosition),\n  });\n  const { availableMarkets } = marketsOptions;\n\n  const availableCollaterals = useMemo(() => {\n    if (!marketInfo) {\n      return [];\n    }\n\n    if (marketInfo.isSameCollaterals) {\n      return [marketInfo.longToken];\n    }\n\n    return [marketInfo.longToken, marketInfo.shortToken];\n  }, [marketInfo]);\n\n  const swapOutLiquidity = swapRoute.maxSwapLiquidity;\n\n  const { longLiquidity, shortLiquidity, isOutPositionLiquidity } = useMemo(() => {\n    if (!marketInfo || !isIncrease) {\n      return {};\n    }\n    const longLiquidity = getAvailableUsdLiquidityForPosition(marketInfo, true);\n    const shortLiquidity = getAvailableUsdLiquidityForPosition(marketInfo, false);\n\n    const isOutPositionLiquidity = isLong\n      ? longLiquidity.lt(increaseAmounts?.sizeDeltaUsd || 0)\n      : shortLiquidity.lt(increaseAmounts?.sizeDeltaUsd || 0);\n\n    return {\n      longLiquidity,\n      shortLiquidity,\n      isOutPositionLiquidity,\n    };\n  }, [increaseAmounts, isIncrease, isLong, marketInfo]);\n\n  const error = useMemo(() => {\n    const commonError = getCommonError({\n      chainId,\n      isConnected: Boolean(account),\n      hasOutdatedUi: false,\n    });\n\n    let tradeError: string[] | undefined[] = [undefined];\n\n    if (isSwap) {\n      tradeError = getSwapError({\n        fromToken,\n        toToken,\n        fromTokenAmount,\n        fromUsd: swapAmounts?.usdIn,\n        toTokenAmount,\n        toUsd: swapAmounts?.usdOut,\n        swapPathStats: swapAmounts?.swapPathStats,\n        swapLiquidity: swapOutLiquidity,\n        isLimit,\n        isWrapOrUnwrap,\n        triggerRatio,\n        markRatio,\n        fees,\n      });\n    } else if (isIncrease) {\n      tradeError = getIncreaseError({\n        marketInfo,\n        indexToken: toToken,\n        initialCollateralToken: fromToken,\n        initialCollateralAmount: fromTokenAmount,\n        initialCollateralUsd: increaseAmounts?.initialCollateralUsd,\n        targetCollateralToken: collateralToken,\n        collateralUsd: increaseAmounts?.collateralUsdAfterFees,\n        sizeDeltaUsd: increaseAmounts?.sizeDeltaUsd,\n        existingPosition,\n        fees,\n        swapPathStats: increaseAmounts?.swapPathStats,\n        collateralLiquidity: swapOutLiquidity,\n        minCollateralUsd,\n        longLiquidity,\n        shortLiquidity,\n        isLong,\n        markPrice,\n        triggerPrice,\n        isLimit,\n        nextPositionValues,\n      });\n    } else if (isTrigger) {\n      tradeError = getDecreaseError({\n        marketInfo,\n        sizeDeltaUsd: closeSizeUsd,\n        triggerPrice,\n        existingPosition,\n        isContractAccount: false,\n        receiveToken: existingPosition?.collateralToken,\n        nextPositionValues,\n        isLong,\n        isTrigger: true,\n        minCollateralUsd,\n        isNotEnoughReceiveTokenLiquidity: false,\n      });\n    }\n\n    return commonError[0] || tradeError[0];\n  }, [\n    account,\n    chainId,\n    closeSizeUsd,\n    collateralToken,\n    existingPosition,\n    fees,\n    fromToken,\n    fromTokenAmount,\n    increaseAmounts,\n    isIncrease,\n    isLimit,\n    isLong,\n    isSwap,\n    isTrigger,\n    isWrapOrUnwrap,\n    longLiquidity,\n    markPrice,\n    markRatio,\n    marketInfo,\n    minCollateralUsd,\n    nextPositionValues,\n    shortLiquidity,\n    swapAmounts,\n    swapOutLiquidity,\n    toToken,\n    toTokenAmount,\n    triggerPrice,\n    triggerRatio,\n  ]);\n\n  const submitButtonText = useMemo(() => {\n    if (error) {\n      return error;\n    }\n\n    if (isMarket) {\n      if (isSwap) {\n        return t`Swap ${fromToken?.symbol}`;\n      } else {\n        return `${tradeTypeLabels[tradeType!]} ${toToken?.symbol}`;\n      }\n    } else if (isLimit) {\n      return t`Create Limit order`;\n    } else {\n      return t`Create Trigger order`;\n    }\n  }, [error, fromToken?.symbol, isLimit, isMarket, isSwap, toToken?.symbol, tradeType, tradeTypeLabels]);\n\n  function onSubmit() {\n    if (!account) {\n      onConnectWallet();\n      return;\n    }\n\n    setStage(\"confirmation\");\n  }\n\n  const prevIsISwap = usePrevious(isSwap);\n\n  useEffect(\n    function updateInputAmounts() {\n      if (!fromToken || !toToken || (!isSwap && !isIncrease)) {\n        return;\n      }\n\n      // reset input values when switching between swap and position tabs\n      if (isSwap !== prevIsISwap) {\n        setFocusedInput(\"from\");\n        setFromTokenInputValue(\"\");\n        return;\n      }\n\n      if (isSwap && swapAmounts) {\n        if (focusedInput === \"from\") {\n          setToTokenInputValue(\n            swapAmounts.amountOut.gt(0) ? formatAmountFree(swapAmounts.amountOut, toToken.decimals) : \"\"\n          );\n        } else {\n          setFromTokenInputValue(\n            swapAmounts.amountIn.gt(0) ? formatAmountFree(swapAmounts.amountIn, fromToken.decimals) : \"\"\n          );\n        }\n      }\n\n      if (isIncrease && increaseAmounts) {\n        if (focusedInput === \"from\") {\n          setToTokenInputValue(\n            increaseAmounts.sizeDeltaInTokens.gt(0)\n              ? formatAmountFree(increaseAmounts.sizeDeltaInTokens, toToken.decimals)\n              : \"\"\n          );\n        } else {\n          setFromTokenInputValue(\n            increaseAmounts.initialCollateralAmount.gt(0)\n              ? formatAmountFree(increaseAmounts.initialCollateralAmount, fromToken.decimals)\n              : \"\"\n          );\n        }\n      }\n    },\n    [\n      focusedInput,\n      fromToken,\n      increaseAmounts,\n      isIncrease,\n      isSwap,\n      prevIsISwap,\n      setFromTokenInputValue,\n      setToTokenInputValue,\n      swapAmounts,\n      toToken,\n    ]\n  );\n\n  useEffect(\n    function updateMode() {\n      if (tradeType && tradeMode && !avaialbleModes[tradeType].includes(tradeMode)) {\n        onSelectTradeMode(avaialbleModes[tradeType][0]);\n      }\n    },\n    [tradeType, onSelectTradeMode, tradeMode]\n  );\n\n  useEffect(\n    function updateSwapTokens() {\n      if (!isSwap) return;\n\n      const needFromUpdate = !swapTokens.find((t) => t.address === fromTokenAddress);\n\n      if (needFromUpdate && swapTokens.length) {\n        onSelectFromTokenAddress(swapTokens[0].address);\n      }\n\n      const needToUpdate = !swapTokens.find((t) => t.address === toTokenAddress);\n\n      if (needToUpdate && swapTokens.length) {\n        onSelectToTokenAddress(swapTokens[0].address);\n      }\n    },\n    [fromTokenAddress, isSwap, onSelectFromTokenAddress, onSelectToTokenAddress, swapTokens, toTokenAddress]\n  );\n\n  useEffect(\n    function updatePositionTokens() {\n      if (!isPosition) return;\n\n      const needFromUpdate = !swapTokens.find((t) => t.address === fromTokenAddress);\n\n      if (needFromUpdate && swapTokens.length) {\n        onSelectFromTokenAddress(swapTokens[0].address);\n      }\n\n      const needIndexUpdateByAvailableTokens = !indexTokens.find((t) => t.address === toTokenAddress);\n\n      if (needIndexUpdateByAvailableTokens && indexTokens.length) {\n        onSelectToTokenAddress(indexTokens[0].address);\n      }\n\n      const needCollateralUpdate =\n        !collateralAddress ||\n        (marketInfo && ![marketInfo.longTokenAddress, marketInfo.shortTokenAddress].includes(collateralAddress));\n\n      if (needCollateralUpdate && marketInfo) {\n        onSelectCollateralAddress(isLong ? marketInfo.longTokenAddress : marketInfo.shortTokenAddress);\n      }\n    },\n    [\n      collateralAddress,\n      fromTokenAddress,\n      indexTokens,\n      isLong,\n      isPosition,\n      marketInfo,\n      onSelectCollateralAddress,\n      onSelectFromTokenAddress,\n      onSelectToTokenAddress,\n      swapTokens,\n      toTokenAddress,\n    ]\n  );\n\n  useEffect(\n    function updatePositionMarket() {\n      if (!isPosition || !marketsOptions.availableMarkets) {\n        return;\n      }\n\n      const needUpdateMarket =\n        !marketAddress || !marketsOptions.availableMarkets.find((m) => m.marketTokenAddress === marketAddress);\n\n      const optimalMarket = marketsOptions.minPriceImpactMarket || marketsOptions.maxLiquidityMarket;\n\n      if (needUpdateMarket && optimalMarket) {\n        onSelectMarketAddress(optimalMarket.marketTokenAddress);\n      }\n    },\n    [\n      availableMarkets,\n      chainId,\n      isLong,\n      isPosition,\n      marketAddress,\n      marketsOptions.availableMarkets,\n      marketsOptions.maxLiquidityMarket,\n      marketsOptions.minPriceImpactMarket,\n      onSelectMarketAddress,\n    ]\n  );\n\n  function onSwitchTokens() {\n    onSelectFromTokenAddress(toTokenAddress);\n    setFromTokenInputValue(toTokenInputValue || \"\");\n\n    onSelectToTokenAddress(fromTokenAddress);\n    setToTokenInputValue(fromTokenInputValue || \"\");\n\n    setFocusedInput((old) => (old === \"from\" ? \"to\" : \"from\"));\n  }\n\n  const onConfirmationClose = useCallback(() => {\n    setStage(\"trade\");\n  }, []);\n\n  const onConfirmed = useCallback(() => {\n    if (isMarket) {\n      setStage(\"processing\");\n      return;\n    }\n    setStage(\"trade\");\n  }, [isMarket]);\n\n  function renderTokenInputs() {\n    return (\n      <>\n        <BuyInputSection\n          topLeftLabel={t`Pay:`}\n          topLeftValue={formatUsd(fromUsd)}\n          topRightLabel={t`Balance:`}\n          topRightValue={formatTokenAmount(fromToken?.balance, fromToken?.decimals)}\n          inputValue={fromTokenInputValue}\n          onInputValueChange={(e) => {\n            setFocusedInput(\"from\");\n            setFromTokenInputValue(e.target.value);\n          }}\n          showMaxButton={isNotMatchAvailableBalance}\n          onClickMax={() => {\n            if (fromToken?.balance) {\n              setFocusedInput(\"from\");\n              setFromTokenInputValue(formatAmountFree(fromToken.balance, fromToken.decimals));\n            }\n          }}\n        >\n          {fromTokenAddress && (\n            <TokenSelector\n              label={t`Pay`}\n              chainId={chainId}\n              tokenAddress={fromTokenAddress}\n              onSelectToken={(token) => onSelectFromTokenAddress(token.address)}\n              tokens={swapTokens}\n              infoTokens={infoTokens}\n              className=\"GlpSwap-from-token\"\n              showSymbolImage={true}\n              showTokenImgInDropdown={true}\n            />\n          )}\n        </BuyInputSection>\n\n        <div className=\"AppOrder-ball-container\" onClick={onSwitchTokens}>\n          <div className=\"AppOrder-ball\">\n            <IoMdSwap className=\"Exchange-swap-ball-icon\" />\n          </div>\n        </div>\n\n        {isSwap && (\n          <BuyInputSection\n            topLeftLabel={t`Receive:`}\n            topLeftValue={formatUsd(swapAmounts?.usdOut)}\n            topRightLabel={t`Balance:`}\n            topRightValue={formatTokenAmount(toToken?.balance, toToken?.decimals)}\n            inputValue={toTokenInputValue}\n            onInputValueChange={(e) => {\n              setFocusedInput(\"to\");\n              setToTokenInputValue(e.target.value);\n            }}\n            showMaxButton={false}\n          >\n            {toTokenAddress && (\n              <TokenSelector\n                label={t`Receive:`}\n                chainId={chainId}\n                tokenAddress={toTokenAddress}\n                onSelectToken={(token) => onSelectToTokenAddress(token.address)}\n                tokens={swapTokens}\n                infoTokens={infoTokens}\n                className=\"GlpSwap-from-token\"\n                showSymbolImage={true}\n                showBalances={true}\n                showTokenImgInDropdown={true}\n              />\n            )}\n          </BuyInputSection>\n        )}\n\n        {isIncrease && (\n          <BuyInputSection\n            topLeftLabel={`${tradeTypeLabels[tradeType!]}:`}\n            topLeftValue={formatUsd(increaseAmounts?.sizeDeltaUsd, { fallbackToZero: true })}\n            topRightLabel={t`Leverage:`}\n            topRightValue={formatLeverage(leverage)}\n            inputValue={toTokenInputValue}\n            onInputValueChange={(e) => {\n              setFocusedInput(\"to\");\n              setToTokenInputValue(e.target.value);\n            }}\n            showMaxButton={false}\n          >\n            {toTokenAddress && (\n              <TokenSelector\n                label={tradeTypeLabels[tradeType!]}\n                chainId={chainId}\n                tokenAddress={toTokenAddress}\n                onSelectToken={(token) => onSelectToTokenAddress(token.address)}\n                tokens={indexTokens}\n                infoTokens={infoTokens}\n                className=\"GlpSwap-from-token\"\n                showSymbolImage={true}\n                showBalances={false}\n                showTokenImgInDropdown={true}\n              />\n            )}\n          </BuyInputSection>\n        )}\n      </>\n    );\n  }\n\n  function renderDecreaseSizeInput() {\n    return (\n      <BuyInputSection\n        topLeftLabel={t`Close`}\n        topRightLabel={existingPosition?.sizeInUsd ? `Max:` : undefined}\n        topRightValue={existingPosition?.sizeInUsd ? formatUsd(existingPosition.sizeInUsd) : undefined}\n        inputValue={closeSizeInputValue}\n        onInputValueChange={(e) => setCloseSizeInputValue(e.target.value)}\n        showMaxButton={existingPosition?.sizeInUsd.gt(0) && !closeSizeUsd?.eq(existingPosition.sizeInUsd)}\n        onClickMax={() => setCloseSizeInputValue(formatAmount(existingPosition?.sizeInUsd, USD_DECIMALS, 2))}\n      >\n        USD\n      </BuyInputSection>\n    );\n  }\n\n  function renderTriggerPriceInput() {\n    return (\n      <BuyInputSection\n        topLeftLabel={t`Price`}\n        topRightLabel={t`Mark:`}\n        topRightValue={formatUsd(markPrice)}\n        onClickTopRightLabel={() => {\n          setTriggerPriceInputValue(formatAmount(markPrice, USD_DECIMALS, 2));\n        }}\n        inputValue={triggerPriceInputValue}\n        onInputValueChange={(e) => {\n          setTriggerPriceInputValue(e.target.value);\n        }}\n      >\n        USD\n      </BuyInputSection>\n    );\n  }\n\n  function renderTriggerRatioInput() {\n    return (\n      <BuyInputSection\n        topLeftLabel={t`Price`}\n        topRightValue={formatAmount(markRatio?.ratio, USD_DECIMALS, 4)}\n        onClickTopRightLabel={() => {\n          setTriggerRatioInputValue(formatAmount(markRatio?.ratio, USD_DECIMALS, 10));\n        }}\n        inputValue={triggerRatioInputValue}\n        onInputValueChange={(e) => {\n          setTriggerRatioInputValue(e.target.value);\n        }}\n      >\n        {markRatio && (\n          <>\n            {markRatio.smallestToken.symbol}per\n            {markRatio.largestToken.symbol}\n          </>\n        )}\n      </BuyInputSection>\n    );\n  }\n\n  function renderPositionControls() {\n    return (\n      <>\n        {isIncrease && (\n          <>\n            <div className=\"Exchange-leverage-slider-settings\">\n              <Checkbox isChecked={isLeverageEnabled} setIsChecked={setIsLeverageEnabled}>\n                <span className=\"muted\">\n                  <Trans>Leverage slider</Trans>\n                </span>\n              </Checkbox>\n            </div>\n            {isLeverageEnabled && (\n              <LeverageSlider value={leverageOption} onChange={setLeverageOption} isPositive={isLong} />\n            )}\n          </>\n        )}\n        <ExchangeInfoRow\n          className=\"SwapBox-info-row\"\n          label={t`Market`}\n          value={\n            isIncrease ? (\n              `${toToken?.symbol}/USD`\n            ) : (\n              <Dropdown\n                className=\"SwapBox-market-selector-dropdown\"\n                selectedOption={{\n                  label: `${marketInfo?.indexToken.symbol}/USD`,\n                  value: marketInfo?.indexToken.address,\n                }}\n                placeholder={\"-\"}\n                options={indexTokens.map((token) => ({ label: `${token.symbol}/USD`, value: token.address }))}\n                onSelect={(option) => {\n                  onSelectToTokenAddress(option.value);\n                }}\n              />\n            )\n          }\n        />\n\n        <MarketPoolSelectorRow\n          selectedMarket={marketInfo}\n          indexToken={marketInfo?.indexToken}\n          marketsOptions={marketsOptions}\n          hasExistingOrder={Boolean(existingOrder)}\n          hasExistingPosition={Boolean(existingPosition)}\n          isOutPositionLiquidity={isOutPositionLiquidity}\n          currentPriceImpactBps={increaseAmounts?.acceptablePriceImpactBps}\n          onSelectMarketAddress={onSelectMarketAddress}\n        />\n\n        <CollateralSelectorRow\n          selectedMarketAddress={marketInfo?.marketTokenAddress}\n          selectedCollateralAddress={collateralAddress}\n          availableCollaterals={availableCollaterals}\n          marketsOptions={marketsOptions}\n          hasExistingOrder={Boolean(existingOrder)}\n          hasExistingPosition={Boolean(existingPosition)}\n          onSelectCollateralAddress={onSelectCollateralAddress}\n        />\n\n        {isTrigger && existingPosition?.leverage && (\n          <div className=\"Exchange-leverage-slider-settings\">\n            <Checkbox isChecked={keepLeverage} setIsChecked={setKeepLeverage}>\n              <span className=\"muted font-sm\">\n                <Trans>Keep leverage at {formatLeverage(existingPosition.leverage)} </Trans>\n              </span>\n            </Checkbox>\n          </div>\n        )}\n        <div className=\"App-card-divider\" />\n      </>\n    );\n  }\n\n  function renderIncreaseOrderInfo() {\n    return (\n      <>\n        <ExchangeInfoRow\n          className=\"SwapBox-info-row\"\n          label={t`Leverage`}\n          value={\n            nextPositionValues?.nextLeverage && increaseAmounts?.sizeDeltaUsd.gt(0) ? (\n              <ValueTransition\n                from={formatLeverage(existingPosition?.leverage)}\n                to={formatLeverage(nextPositionValues?.nextLeverage) || \"-\"}\n              />\n            ) : (\n              formatLeverage(leverage)\n            )\n          }\n        />\n\n        <ExchangeInfoRow\n          className=\"SwapBox-info-row\"\n          label={t`Entry Price`}\n          value={formatUsd(increaseAmounts?.entryPrice) || \"-\"}\n        />\n\n        {isMarket && (\n          <ExchangeInfoRow\n            className=\"SwapBox-info-row\"\n            label={t`Price Impact`}\n            value={\n              <span className={cx({ positive: increaseAmounts?.acceptablePriceImpactBps?.gt(0) })}>\n                {formatPercentage(increaseAmounts?.acceptablePriceImpactBps) || \"-\"}\n              </span>\n            }\n          />\n        )}\n\n        {isLimit && (\n          <ExchangeInfoRow\n            className=\"SwapBox-info-row\"\n            label={t`Acceptable Price Impact`}\n            value={\n              <span\n                className=\"TradeBox-acceptable-price-impact\"\n                onClick={() => setIsEditingAcceptablePriceImpact(true)}\n              >\n                {formatPercentage(acceptablePriceImpactBpsForLimitOrders.mul(-1))}\n                <span className=\"edit-icon\" onClick={() => null}>\n                  <AiOutlineEdit fontSize={16} />\n                </span>\n              </span>\n            }\n          />\n        )}\n\n        <ExchangeInfoRow\n          className=\"SwapBox-info-row\"\n          label={t`Acceptable Price`}\n          value={formatUsd(increaseAmounts?.acceptablePrice) || \"-\"}\n        />\n\n        <ExchangeInfoRow\n          className=\"SwapBox-info-row\"\n          label={t`Liq. Price`}\n          value={\n            <ValueTransition\n              from={nextPositionValues?.nextLiqPrice ? formatUsd(existingPosition?.liquidationPrice) : undefined}\n              to={formatUsd(nextPositionValues?.nextLiqPrice) || \"-\"}\n            />\n          }\n        />\n\n        <div className=\"App-card-divider\" />\n      </>\n    );\n  }\n\n  function renderTriggerOrderInfo() {\n    return (\n      <>\n        {existingPosition && (\n          <ExchangeInfoRow\n            className=\"SwapBox-info-row\"\n            label={t`Leverage`}\n            value={\n              existingPosition.sizeInUsd.eq(decreaseAmounts?.sizeDeltaUsd || 0) ? (\n                \"-\"\n              ) : (\n                <ValueTransition\n                  from={formatLeverage(existingPosition.leverage)}\n                  to={formatLeverage(nextPositionValues?.nextLeverage)}\n                />\n              )\n            }\n          />\n        )}\n\n        {existingPosition?.sizeInUsd.gt(0) && (\n          <ExchangeInfoRow\n            className=\"SwapBox-info-row\"\n            label={t`Size`}\n            value={\n              <ValueTransition\n                from={formatUsd(existingPosition.sizeInUsd)!}\n                to={formatUsd(nextPositionValues?.nextSizeUsd)}\n              />\n            }\n          />\n        )}\n\n        {existingPosition && (\n          <ExchangeInfoRow\n            className=\"SwapBox-info-row\"\n            label={t`Collateral (${existingPosition?.collateralToken?.symbol})`}\n            value={\n              <ValueTransition\n                from={formatUsd(existingPosition.initialCollateralUsd)}\n                to={formatUsd(nextPositionValues?.nextCollateralUsd)}\n              />\n            }\n          />\n        )}\n\n        <ExchangeInfoRow className=\"SwapBox-info-row\" label={t`Mark Price`} value={formatUsd(markPrice) || \"-\"} />\n\n        <ExchangeInfoRow\n          className=\"SwapBox-info-row\"\n          label={t`Trigger Price`}\n          value={`${decreaseAmounts?.triggerPricePrefix || \"\"} ${formatUsd(decreaseAmounts?.triggerPrice) || \"-\"}`}\n        />\n\n        <ExchangeInfoRow\n          className=\"SwapBox-info-row\"\n          label={t`Acceptable Price Impact`}\n          value={\n            <span className=\"TradeBox-acceptable-price-impact\" onClick={() => setIsEditingAcceptablePriceImpact(true)}>\n              {formatPercentage(acceptablePriceImpactBpsForLimitOrders.mul(-1))}\n              <span className=\"edit-icon\" onClick={() => null}>\n                <AiOutlineEdit fontSize={16} />\n              </span>\n            </span>\n          }\n        />\n\n        <ExchangeInfoRow\n          className=\"SwapBox-info-row\"\n          label={t`Acceptable Price`}\n          value={formatUsd(decreaseAmounts?.acceptablePrice) || \"-\"}\n        />\n\n        {existingPosition && (\n          <ExchangeInfoRow\n            className=\"SwapBox-info-row\"\n            label={t`Liq. Price`}\n            value={\n              existingPosition.sizeInUsd.eq(decreaseAmounts?.sizeDeltaUsd || 0) ? (\n                \"-\"\n              ) : (\n                <ValueTransition\n                  from={formatUsd(existingPosition.liquidationPrice)!}\n                  to={formatUsd(nextPositionValues?.nextLiqPrice)}\n                />\n              )\n            }\n          />\n        )}\n\n        <div className=\"App-card-divider\" />\n      </>\n    );\n  }\n\n  return (\n    <>\n      <div className={`App-box SwapBox`}>\n        <Tab\n          icons={tradeTypeIcons}\n          options={Object.values(TradeType)}\n          optionLabels={tradeTypeLabels}\n          option={tradeType}\n          onChange={onSelectTradeType}\n          className=\"SwapBox-option-tabs\"\n        />\n\n        <Tab\n          options={avaialbleModes[tradeType!]}\n          optionLabels={tradeModeLabels}\n          className=\"SwapBox-asset-options-tabs\"\n          type=\"inline\"\n          option={tradeMode}\n          onChange={onSelectTradeMode}\n        />\n\n        {(isSwap || isIncrease) && renderTokenInputs()}\n        {isTrigger && renderDecreaseSizeInput()}\n\n        {isSwap && isLimit && renderTriggerRatioInput()}\n        {isPosition && (isLimit || isTrigger) && renderTriggerPriceInput()}\n\n        <div className=\"SwapBox-info-section\">\n          {isPosition && renderPositionControls()}\n          {isIncrease && renderIncreaseOrderInfo()}\n          {isTrigger && renderTriggerOrderInfo()}\n\n          {feesType && (\n            <TradeFeesRow\n              totalTradeFees={fees?.totalFees}\n              swapFees={fees?.swapFees}\n              positionFee={fees?.positionFee}\n              swapPriceImpact={fees?.swapPriceImpact}\n              positionPriceImpact={fees?.positionPriceImpact}\n              borrowFee={fees?.borrowFee}\n              fundingFee={fees?.fundingFee}\n              executionFee={executionFee}\n              feesType={feesType}\n            />\n          )}\n        </div>\n\n        <div className=\"Exchange-swap-button-container\">\n          <Button\n            variant=\"primary-action\"\n            className=\"w-100\"\n            onClick={onSubmit}\n            disabled={Boolean(error) && !shouldDisableValidation}\n          >\n            {error || submitButtonText}\n          </Button>\n        </div>\n      </div>\n\n      {isSwap && <SwapCard maxLiquidityUsd={swapOutLiquidity} fromToken={fromToken} toToken={toToken} />}\n      {isPosition && <MarketCard isLong={isLong} marketAddress={marketAddress} />}\n      {account && <ClaimableCard onClaimClick={() => setIsClaiming(true)} />}\n\n      {stage === \"confirmation\" && (\n        <ConfirmationBox\n          tradeFlags={tradeFlags}\n          isWrapOrUnwrap={isWrapOrUnwrap}\n          fromToken={fromToken}\n          toToken={toToken}\n          markPrice={markPrice}\n          markRatio={markRatio}\n          triggerPrice={triggerPrice}\n          triggerRatio={triggerRatio}\n          marketInfo={marketInfo}\n          collateralToken={collateralToken}\n          swapAmounts={swapAmounts}\n          increaseAmounts={increaseAmounts}\n          decreaseAmounts={decreaseAmounts}\n          nextPositionValues={nextPositionValues}\n          swapLiquidityUsd={swapOutLiquidity}\n          longLiquidityUsd={longLiquidity}\n          shortLiquidityUsd={shortLiquidity}\n          keepLeverage={keepLeverage}\n          fees={fees}\n          executionFee={executionFee}\n          error={error}\n          existingPosition={existingPosition}\n          shouldDisableValidation={shouldDisableValidation!}\n          allowedSlippage={allowedSlippage}\n          isHigherSlippageAllowed={isHigherSlippageAllowed}\n          ordersData={ordersInfo}\n          setIsHigherSlippageAllowed={setIsHigherSlippageAllowed}\n          setKeepLeverage={setKeepLeverage}\n          onClose={onConfirmationClose}\n          onSubmitted={onConfirmed}\n          setPendingTxns={setPendingTxns}\n          onConnectWallet={onConnectWallet}\n        />\n      )}\n\n      <OrderStatus\n        isVisible={stage === \"processing\"}\n        orderType={isSwap ? OrderType.MarketSwap : OrderType.MarketIncrease}\n        marketAddress={isPosition ? p.marketAddress : undefined}\n        initialCollateralAddress={isSwap ? fromTokenAddress : undefined}\n        initialCollateralAmount={isSwap ? fromTokenAmount : undefined}\n        toSwapTokenAddress={isSwap ? toTokenAddress : undefined}\n        sizeDeltaUsd={increaseAmounts?.sizeDeltaUsd}\n        isLong={isSwap ? undefined : isLong}\n        onClose={() => setStage(\"trade\")}\n      />\n    </>\n  );\n}\n","import { MarketInfo } from \"domain/synthetics/markets\";\nimport { OrderType } from \"domain/synthetics/orders\";\nimport { BigNumber } from \"ethers\";\nimport { TokenData } from \"../tokens\";\n\nexport enum TradeActionType {\n  OrderCreated = \"OrderCreated\",\n  OrderExecuted = \"OrderExecuted\",\n  OrderCancelled = \"OrderCancelled\",\n  OrderUpdated = \"OrderUpdated\",\n  OrderFrozen = \"OrderFrozen\",\n}\n\nexport type RawTradeAction = {\n  id: string;\n  eventName: TradeActionType;\n\n  account: string;\n  marketAddress?: string;\n  swapPath?: string[];\n  initialCollateralTokenAddress?: string;\n\n  initialCollateralDeltaAmount?: string;\n  sizeDeltaUsd?: string;\n  triggerPrice?: string;\n  acceptablePrice?: string;\n  executionPrice?: string;\n  minOutputAmount?: string;\n  executionAmountOut?: string;\n\n  priceImpactDiffUsd?: string;\n  positionFeeAmount?: string;\n  borrowingFeeAmount?: string;\n  fundingFeeAmount?: string;\n  pnlUsd?: string;\n\n  collateralTokenPriceMax?: string;\n  collateralTokenPriceMin?: string;\n\n  orderType: OrderType;\n  isLong?: boolean;\n  shouldUnwrapNativeToken?: boolean;\n\n  reason?: string;\n\n  transaction: {\n    timestamp: number;\n    hash: string;\n  };\n};\n\nexport type PositionTradeAction = {\n  id: string;\n  eventName: TradeActionType;\n  marketInfo: MarketInfo;\n  marketAddress: string;\n  account: string;\n  initialCollateralTokenAddress: string;\n  initialCollateralToken: TokenData;\n  targetCollateralToken: TokenData;\n  indexToken: TokenData;\n  swapPath: string[];\n  initialCollateralDeltaAmount: BigNumber;\n  sizeDeltaUsd: BigNumber;\n  triggerPrice?: BigNumber;\n  acceptablePrice: BigNumber;\n  executionPrice?: BigNumber;\n  collateralTokenPriceMin?: BigNumber;\n  collateralTokenPriceMax?: BigNumber;\n  minOutputAmount: BigNumber;\n  priceImpactDiffUsd?: BigNumber;\n  positionFeeAmount?: BigNumber;\n  borrowingFeeAmount?: BigNumber;\n  fundingFeeAmount?: BigNumber;\n  pnlUsd?: BigNumber;\n  orderType: OrderType;\n  isLong: boolean;\n  reason?: string;\n\n  transaction: {\n    timestamp: number;\n    hash: string;\n  };\n};\n\nexport type SwapTradeAction = {\n  id: string;\n  account: string;\n  eventName: TradeActionType;\n  initialCollateralTokenAddress: string;\n  initialCollateralToken: TokenData;\n  targetCollateralToken: TokenData;\n  shouldUnwrapNativeToken: boolean;\n  swapPath: string[];\n  initialCollateralDeltaAmount: BigNumber;\n  minOutputAmount: BigNumber;\n  executionAmountOut?: BigNumber;\n  orderType: OrderType;\n\n  reason?: string;\n\n  transaction: {\n    timestamp: number;\n    hash: string;\n  };\n};\n\nexport type TradeAction = PositionTradeAction | SwapTradeAction;\n","import { VirtualInventoryForPositionsData, getPositionFee, getPriceImpactForPosition } from \"domain/synthetics/fees\";\nimport { MarketInfo } from \"domain/synthetics/markets\";\nimport { PositionInfo, getLeverage, getLiquidationPrice } from \"domain/synthetics/positions\";\nimport { TokenData, convertToTokenAmount, convertToUsd } from \"domain/synthetics/tokens\";\nimport { getIsEquivalentTokens } from \"domain/tokens\";\nimport { BigNumber } from \"ethers\";\nimport { BASIS_POINTS_DIVISOR } from \"lib/legacy\";\nimport { FindSwapPath, IncreasePositionAmounts, NextPositionValues, SwapAmounts } from \"../types\";\nimport { applySlippage, getAcceptablePrice, getMarkPrice } from \"./prices\";\nimport { getSwapAmountsByFromValue, getSwapAmountsByToValue } from \"./swap\";\n\nexport function getIncreasePositionAmountsByCollateral(p: {\n  marketInfo: MarketInfo;\n  initialCollateralToken: TokenData;\n  collateralToken: TokenData;\n  isLong: boolean;\n  initialCollateralAmount: BigNumber;\n  leverage?: BigNumber;\n  isLimit?: boolean;\n  triggerPrice?: BigNumber;\n  savedAcceptablePriceImpactBps?: BigNumber;\n  allowedSlippage?: number;\n  findSwapPath: FindSwapPath;\n  virtualInventoryForPositions: VirtualInventoryForPositionsData;\n}) {\n  const {\n    marketInfo,\n    initialCollateralToken,\n    collateralToken,\n    initialCollateralAmount,\n    isLong,\n    leverage,\n    triggerPrice,\n    isLimit,\n    savedAcceptablePriceImpactBps,\n    allowedSlippage,\n    findSwapPath,\n    virtualInventoryForPositions,\n  } = p;\n  const { indexToken } = marketInfo;\n\n  const markPrice = getMarkPrice({ prices: indexToken.prices, isIncrease: true, isLong })!;\n  const entryPrice = isLimit && triggerPrice ? triggerPrice : markPrice;\n\n  const initialCollateralPrice = initialCollateralToken.prices.minPrice;\n  const collateralPrice = collateralToken.prices.maxPrice;\n\n  const initialCollateralUsd = convertToUsd(\n    initialCollateralAmount,\n    initialCollateralToken.decimals,\n    initialCollateralPrice\n  )!;\n\n  let collateralUsdAfterFees = BigNumber.from(0);\n  let collateralAmountAfterFees = BigNumber.from(0);\n\n  let sizeDeltaUsd = BigNumber.from(0);\n  let sizeDeltaInTokens = BigNumber.from(0);\n\n  let positionFeeUsd = BigNumber.from(0);\n  let positionPriceImpactDeltaUsd = BigNumber.from(0);\n\n  let acceptablePrice: BigNumber | undefined = undefined;\n  let acceptablePriceImpactBps: BigNumber | undefined = undefined;\n  let acceptablePriceAfterSlippage: BigNumber | undefined = undefined;\n\n  let swapAmounts: SwapAmounts | undefined = undefined;\n\n  const defaultAmounts: IncreasePositionAmounts = {\n    initialCollateralAmount,\n    initialCollateralUsd,\n    collateralUsdAfterFees,\n    collateralAmountAfterFees,\n    sizeDeltaUsd,\n    sizeDeltaInTokens,\n    positionFeeUsd,\n    positionPriceImpactDeltaUsd,\n    swapPathStats: undefined,\n    entryPrice,\n    markPrice,\n    triggerPrice,\n    initialCollateralPrice,\n    collateralPrice,\n    acceptablePrice,\n    acceptablePriceImpactBps,\n  };\n\n  if (initialCollateralAmount.lte(0)) {\n    return defaultAmounts;\n  }\n\n  if (getIsEquivalentTokens(initialCollateralToken, collateralToken)) {\n    collateralAmountAfterFees = initialCollateralAmount;\n    collateralUsdAfterFees = initialCollateralUsd;\n  } else {\n    swapAmounts = getSwapAmountsByFromValue({\n      tokenIn: initialCollateralToken,\n      tokenOut: collateralToken,\n      amountIn: initialCollateralAmount,\n      isLimit: false,\n      findSwapPath,\n    });\n\n    if (!swapAmounts) {\n      return defaultAmounts;\n    }\n\n    collateralAmountAfterFees = swapAmounts.amountOut;\n    collateralUsdAfterFees = swapAmounts.usdOut;\n  }\n\n  sizeDeltaUsd = collateralUsdAfterFees.mul(leverage || BASIS_POINTS_DIVISOR).div(BASIS_POINTS_DIVISOR);\n  positionFeeUsd = getPositionFee(marketInfo, sizeDeltaUsd);\n\n  collateralUsdAfterFees = collateralUsdAfterFees.sub(positionFeeUsd);\n  sizeDeltaUsd = collateralUsdAfterFees.mul(leverage || BASIS_POINTS_DIVISOR).div(BASIS_POINTS_DIVISOR);\n\n  if (leverage) {\n  } else {\n    sizeDeltaUsd = collateralUsdAfterFees;\n  }\n\n  positionFeeUsd = getPositionFee(marketInfo, sizeDeltaUsd);\n\n  positionPriceImpactDeltaUsd =\n    getPriceImpactForPosition(marketInfo, virtualInventoryForPositions, sizeDeltaUsd, p.isLong) || BigNumber.from(0);\n\n  const acceptablePriceInfo = getAcceptablePrice({\n    isIncrease: true,\n    isLong,\n    indexPrice: entryPrice,\n    sizeDeltaUsd: sizeDeltaUsd,\n    priceImpactDeltaUsd: !isLimit ? positionPriceImpactDeltaUsd : undefined,\n    // TODO separate to 2 functions?\n    acceptablePriceImpactBps: isLimit ? savedAcceptablePriceImpactBps : undefined,\n  });\n\n  acceptablePrice = acceptablePriceInfo?.acceptablePrice;\n  acceptablePriceImpactBps = acceptablePriceInfo?.acceptablePriceImpactBps;\n\n  acceptablePriceAfterSlippage = applySlippage(allowedSlippage || 0, acceptablePrice, true, p.isLong);\n\n  sizeDeltaInTokens = convertToTokenAmount(sizeDeltaUsd, indexToken.decimals, entryPrice)!;\n\n  return {\n    initialCollateralAmount,\n    initialCollateralUsd,\n    collateralUsdAfterFees,\n    collateralAmountAfterFees,\n    sizeDeltaUsd,\n    sizeDeltaInTokens,\n    positionFeeUsd,\n    positionPriceImpactDeltaUsd,\n    swapPathStats: swapAmounts?.swapPathStats,\n    entryPrice,\n    markPrice,\n    triggerPrice,\n    initialCollateralPrice,\n    collateralPrice,\n    acceptablePrice,\n    acceptablePriceImpactBps,\n    acceptablePriceAfterSlippage,\n  };\n}\n\nexport function getIncreasePositionAmountsBySizeDelta(p: {\n  marketInfo: MarketInfo;\n  initialCollateralToken: TokenData;\n  collateralToken: TokenData;\n  isLong: boolean;\n  sizeDeltaInTokens: BigNumber;\n  leverage?: BigNumber;\n  isLimit?: boolean;\n  triggerPrice?: BigNumber;\n  savedAcceptablePriceImpactBps?: BigNumber;\n  findSwapPath: FindSwapPath;\n  virtualInventoryForPositions: VirtualInventoryForPositionsData;\n}): IncreasePositionAmounts {\n  const {\n    marketInfo,\n    initialCollateralToken,\n    collateralToken,\n    sizeDeltaInTokens,\n    isLong,\n    leverage,\n    triggerPrice,\n    isLimit,\n    savedAcceptablePriceImpactBps,\n    findSwapPath,\n    virtualInventoryForPositions,\n  } = p;\n  const { indexToken } = marketInfo;\n\n  const markPrice = getMarkPrice({ prices: indexToken.prices, isIncrease: true, isLong })!;\n  const entryPrice = isLimit && triggerPrice ? triggerPrice : markPrice;\n\n  const initialCollateralPrice = initialCollateralToken.prices.minPrice;\n  const collateralPrice = collateralToken.prices.maxPrice;\n\n  const sizeDeltaUsd = convertToUsd(sizeDeltaInTokens, indexToken.decimals, entryPrice)!;\n\n  let positionFeeUsd = getPositionFee(marketInfo, sizeDeltaUsd)!;\n  let positionPriceImpactDeltaUsd = getPriceImpactForPosition(\n    marketInfo,\n    virtualInventoryForPositions,\n    sizeDeltaUsd,\n    isLong\n  );\n\n  const { acceptablePrice, acceptablePriceImpactBps } = getAcceptablePrice({\n    isIncrease: true,\n    isLong,\n    indexPrice: entryPrice,\n    sizeDeltaUsd: sizeDeltaUsd,\n    priceImpactDeltaUsd: !isLimit ? positionPriceImpactDeltaUsd : undefined,\n    // TODO separate to 2 functions?\n    acceptablePriceImpactBps: isLimit ? savedAcceptablePriceImpactBps : undefined,\n  });\n\n  let initialCollateralAmount = BigNumber.from(0);\n  let initialCollateralUsd = BigNumber.from(0);\n\n  let collateralUsdAfterFees = BigNumber.from(0);\n  let collateralAmountAfterFees = BigNumber.from(0);\n\n  let swapAmounts: SwapAmounts | undefined = undefined;\n\n  const defaultAmounts: IncreasePositionAmounts = {\n    initialCollateralAmount,\n    initialCollateralUsd,\n    collateralUsdAfterFees,\n    collateralAmountAfterFees,\n    sizeDeltaUsd,\n    sizeDeltaInTokens,\n    positionFeeUsd,\n    positionPriceImpactDeltaUsd,\n    swapPathStats: undefined,\n    markPrice,\n    entryPrice,\n    triggerPrice,\n    initialCollateralPrice,\n    collateralPrice,\n    acceptablePrice,\n    acceptablePriceImpactBps,\n  };\n\n  if (sizeDeltaInTokens.lte(0)) {\n    return defaultAmounts;\n  }\n\n  collateralUsdAfterFees = sizeDeltaUsd;\n\n  if (leverage) {\n    collateralUsdAfterFees = collateralUsdAfterFees.mul(BASIS_POINTS_DIVISOR).div(leverage);\n  }\n\n  collateralAmountAfterFees = convertToTokenAmount(collateralUsdAfterFees, collateralToken.decimals, collateralPrice)!;\n\n  const collateralUsd = collateralUsdAfterFees.add(positionFeeUsd);\n  const collateralAmount = convertToTokenAmount(collateralUsd, collateralToken.decimals, collateralPrice)!;\n\n  if (getIsEquivalentTokens(initialCollateralToken, collateralToken)) {\n    initialCollateralAmount = collateralAmount;\n    initialCollateralUsd = collateralUsd;\n  } else {\n    swapAmounts = getSwapAmountsByToValue({\n      tokenIn: initialCollateralToken,\n      tokenOut: collateralToken,\n      amountOut: collateralAmount,\n      findSwapPath,\n      isLimit: false,\n    });\n\n    initialCollateralAmount = swapAmounts.amountIn;\n    initialCollateralUsd = swapAmounts.usdIn;\n  }\n\n  return {\n    initialCollateralAmount,\n    initialCollateralUsd,\n    collateralUsdAfterFees,\n    collateralAmountAfterFees,\n    sizeDeltaUsd,\n    sizeDeltaInTokens,\n    positionFeeUsd,\n    positionPriceImpactDeltaUsd,\n    swapPathStats: swapAmounts?.swapPathStats,\n    entryPrice,\n    markPrice,\n    triggerPrice,\n    initialCollateralPrice,\n    collateralPrice,\n    acceptablePrice,\n    acceptablePriceImpactBps,\n  };\n}\n\nexport function getNextPositionValuesForIncreaseTrade(p: {\n  existingPosition?: PositionInfo;\n  marketInfo: MarketInfo;\n  sizeDeltaUsd: BigNumber;\n  collateralDeltaUsd: BigNumber;\n  entryPrice: BigNumber;\n  isLong: boolean;\n  showPnlInLeverage: boolean;\n  minCollateralUsd: BigNumber;\n}): NextPositionValues {\n  const {\n    existingPosition,\n    marketInfo,\n    sizeDeltaUsd,\n    collateralDeltaUsd,\n    entryPrice,\n    isLong,\n    showPnlInLeverage,\n    minCollateralUsd,\n  } = p;\n\n  const nextSizeUsd = existingPosition ? existingPosition.sizeInUsd.add(sizeDeltaUsd) : sizeDeltaUsd;\n\n  // TODO: initialCollateralInstread?\n  const nextCollateralUsd = existingPosition\n    ? existingPosition.remainingCollateralUsd.add(collateralDeltaUsd)\n    : collateralDeltaUsd;\n\n  const nextLeverage = getLeverage({\n    sizeInUsd: nextSizeUsd,\n    collateralUsd: nextCollateralUsd,\n    pnl: showPnlInLeverage ? existingPosition?.pnl : undefined,\n    pendingBorrowingFeesUsd: BigNumber.from(0), // deducted on order\n    pendingFundingFeesUsd: BigNumber.from(0), // deducted on order\n  });\n\n  const nextLiqPrice = getLiquidationPrice({\n    sizeInUsd: nextSizeUsd,\n    collateralUsd: nextCollateralUsd,\n    markPrice: entryPrice,\n    minCollateralFactor: marketInfo.minCollateralFactor,\n    minCollateralUsd,\n    closingFeeUsd: getPositionFee(marketInfo, sizeDeltaUsd),\n    maxPriceImpactFactor: marketInfo?.maxPositionImpactFactorForLiquidations,\n    pendingBorrowingFeesUsd: BigNumber.from(0), // deducted on order\n    pendingFundingFeesUsd: BigNumber.from(0), // deducted on order\n    pnl: existingPosition?.pnl || BigNumber.from(0),\n    isLong: isLong,\n  });\n\n  return {\n    nextSizeUsd,\n    nextCollateralUsd,\n    nextLeverage,\n    nextLiqPrice,\n    nextEntryPrice: entryPrice,\n  };\n}\n","import { Trans, t } from \"@lingui/macro\";\nimport StatsTooltipRow from \"components/StatsTooltip/StatsTooltipRow\";\nimport Tooltip from \"components/Tooltip/Tooltip\";\nimport { convertToUsd } from \"domain/synthetics/tokens\";\nimport { PositionTradeAction } from \"domain/synthetics/tradeHistory\";\nimport { BigNumber } from \"ethers\";\nimport { BASIS_POINTS_DIVISOR, PRECISION } from \"lib/legacy\";\nimport { formatTokenAmountWithUsd, formatUsd } from \"lib/numbers\";\n\ntype Props = {\n  tradeAction: PositionTradeAction;\n  minCollateralUsd: BigNumber;\n};\n\nexport function LiquidationTooltip(p: Props) {\n  const { tradeAction, minCollateralUsd } = p;\n\n  const maxLeverage = PRECISION.div(tradeAction.marketInfo.minCollateralFactor);\n\n  const {\n    initialCollateralToken,\n    initialCollateralDeltaAmount,\n    collateralTokenPriceMin,\n    borrowingFeeAmount,\n    fundingFeeAmount,\n    positionFeeAmount,\n    priceImpactDiffUsd,\n    pnlUsd,\n  } = tradeAction;\n\n  const initialCollateralUsd = convertToUsd(\n    initialCollateralDeltaAmount,\n    initialCollateralToken?.decimals,\n    collateralTokenPriceMin\n  );\n\n  const positionFeeUsd = convertToUsd(positionFeeAmount, initialCollateralToken?.decimals, collateralTokenPriceMin);\n  const borrowingFeeUsd = convertToUsd(borrowingFeeAmount, initialCollateralToken?.decimals, collateralTokenPriceMin);\n  const fundingFeeUsd = convertToUsd(fundingFeeAmount, initialCollateralToken?.decimals, collateralTokenPriceMin);\n\n  const maxLeverageText = (Number(maxLeverage) / BASIS_POINTS_DIVISOR).toFixed(1) + \"x\";\n\n  return (\n    <Tooltip\n      position=\"left-top\"\n      handle={t`Liquidated`}\n      renderContent={() => (\n        <>\n          <Trans>This position was liquidated as the max leverage of {maxLeverageText} was exceeded.`</Trans>\n          <br />\n          <br />\n          <StatsTooltipRow\n            label={t`Initial collateral`}\n            showDollar={false}\n            value={formatTokenAmountWithUsd(\n              initialCollateralDeltaAmount,\n              initialCollateralUsd,\n              initialCollateralToken?.symbol,\n              initialCollateralToken?.decimals\n            )}\n          />\n          <StatsTooltipRow label={t`Min required collateral`} showDollar={false} value={formatUsd(minCollateralUsd)} />\n          <StatsTooltipRow label={t`Borrow Fee`} showDollar={false} value={formatUsd(borrowingFeeUsd)} />\n          <StatsTooltipRow label={t`Funding Fee`} showDollar={false} value={formatUsd(fundingFeeUsd)} />\n          <StatsTooltipRow label={t`Position Fee`} showDollar={false} value={formatUsd(positionFeeUsd)} />\n          <StatsTooltipRow label={t`Price Impact`} showDollar={false} value={formatUsd(priceImpactDiffUsd)} />\n          <StatsTooltipRow label={t`PnL`} showDollar={false} value={formatUsd(pnlUsd)} />\n        </>\n      )}\n    />\n  );\n}\n","import { useMemo } from \"react\";\nimport { Trans, t } from \"@lingui/macro\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport { getExplorerUrl } from \"config/chains\";\nimport {\n  isIncreaseOrderType,\n  isLimitOrderType,\n  isLiquidationOrderType,\n  isMarketOrderType,\n  isSwapOrderType,\n  isTriggerDecreaseOrderType,\n} from \"domain/synthetics/orders\";\nimport { adaptToV1TokenInfo, getTokensRatioByAmounts } from \"domain/synthetics/tokens\";\nimport { PositionTradeAction, SwapTradeAction, TradeAction, TradeActionType } from \"domain/synthetics/tradeHistory\";\nimport { useChainId } from \"lib/chains\";\nimport { formatDateTime } from \"lib/dates\";\nimport { getExchangeRateDisplay } from \"lib/legacy\";\nimport { formatTokenAmount, formatUsd } from \"lib/numbers\";\nimport { BigNumber } from \"ethers\";\nimport { LiquidationTooltip } from \"./LiquidationTooltip\";\nimport \"./TradeHistoryRow.scss\";\nimport { getTriggerThresholdType } from \"domain/synthetics/trade\";\n\ntype Props = {\n  tradeAction: TradeAction;\n  minCollateralUsd: BigNumber;\n};\n\nfunction getOrderActionText(tradeAction: TradeAction) {\n  let actionText = \"\";\n\n  if (tradeAction.eventName === TradeActionType.OrderCreated) {\n    actionText = t`Create`;\n  }\n\n  if (tradeAction.eventName === TradeActionType.OrderCancelled) {\n    actionText = t`Cancel`;\n  }\n\n  if (tradeAction.eventName === TradeActionType.OrderExecuted) {\n    actionText = t`Execute`;\n  }\n\n  if (tradeAction.eventName === TradeActionType.OrderUpdated) {\n    actionText = t`Update`;\n  }\n\n  if (tradeAction.eventName === TradeActionType.OrderFrozen) {\n    actionText = t`Freeze`;\n  }\n\n  return actionText;\n}\n\nfunction getSwapOrderMessage(tradeAction: SwapTradeAction) {\n  const tokenIn = tradeAction.initialCollateralToken!;\n  const tokenOut = tradeAction.targetCollateralToken!;\n  const amountIn = tradeAction.initialCollateralDeltaAmount!;\n\n  const amountOut =\n    tradeAction.eventName === TradeActionType.OrderExecuted\n      ? tradeAction.executionAmountOut!\n      : tradeAction.minOutputAmount!;\n\n  const fromText = formatTokenAmount(amountIn, tokenIn?.decimals, tokenIn?.symbol);\n  const toText = formatTokenAmount(amountOut, tokenOut?.decimals, tokenOut?.symbol);\n\n  if (isLimitOrderType(tradeAction.orderType!)) {\n    const actionText = getOrderActionText(tradeAction);\n\n    const tokensRatio = getTokensRatioByAmounts({\n      fromToken: tokenIn,\n      toToken: tokenOut,\n      fromTokenAmount: amountIn,\n      toTokenAmount: amountOut,\n    });\n\n    const fromTokenInfo = tokenIn ? adaptToV1TokenInfo(tokenIn) : undefined;\n    const toTokenInfo = tokenOut ? adaptToV1TokenInfo(tokenOut) : undefined;\n\n    const [largest, smallest] =\n      tokensRatio?.largestToken.address === tokenIn?.address\n        ? [fromTokenInfo, toTokenInfo]\n        : [toTokenInfo, fromTokenInfo];\n\n    const ratioText = tokensRatio.ratio.gt(0) ? getExchangeRateDisplay(tokensRatio?.ratio, largest, smallest) : \"0\";\n\n    return t`${actionText} Order: Swap ${fromText} for ${toText}, Price: ${ratioText}`;\n  }\n\n  const actionText =\n    tradeAction.eventName === TradeActionType.OrderCreated ? t`Request` : getOrderActionText(tradeAction);\n\n  return t`${actionText} Swap ${fromText} for ${toText}`;\n}\n\nfunction getPositionOrderMessage(tradeAction: PositionTradeAction, minCollateralUsd: BigNumber) {\n  const indexToken = tradeAction.indexToken;\n  const collateralToken = tradeAction.initialCollateralToken;\n  const sizeDeltaUsd = tradeAction.sizeDeltaUsd;\n  const collateralDeltaAmount = tradeAction.initialCollateralDeltaAmount;\n\n  const increaseText = isIncreaseOrderType(tradeAction.orderType!) ? t`Increase` : t`Decrease`;\n  const longText = tradeAction.isLong ? t`Long` : t`Short`;\n  const positionText = `${longText} ${indexToken.symbol}`;\n  const sizeDeltaText = `${isIncreaseOrderType(tradeAction.orderType!) ? \"+\" : \"-\"}${formatUsd(sizeDeltaUsd)}`;\n\n  if (isLimitOrderType(tradeAction.orderType!) || isTriggerDecreaseOrderType(tradeAction.orderType!)) {\n    const acceptablePrice = tradeAction.acceptablePrice;\n    const executionPrice = tradeAction.executionPrice;\n    const pricePrefix = getTriggerThresholdType(tradeAction.orderType!, tradeAction.isLong!);\n    const actionText = getOrderActionText(tradeAction);\n\n    if (tradeAction.eventName === TradeActionType.OrderExecuted) {\n      return t`Execute Order: ${increaseText} ${positionText} ${sizeDeltaText}, ${indexToken.symbol} Price: ${formatUsd(\n        executionPrice\n      )}, Market: ${tradeAction.marketInfo.name}`;\n    }\n\n    return t`${actionText} Order: ${increaseText} ${positionText} ${sizeDeltaText}, ${\n      indexToken.symbol\n    } Price: ${pricePrefix} ${formatUsd(acceptablePrice)}, Market: ${tradeAction.marketInfo.name}`;\n  }\n\n  if (isMarketOrderType(tradeAction.orderType!)) {\n    let actionText = {\n      [TradeActionType.OrderCreated]: t`Request`,\n      [TradeActionType.OrderExecuted]: \"\",\n      [TradeActionType.OrderCancelled]: t`Cancel`,\n      [TradeActionType.OrderUpdated]: t`Update`,\n      [TradeActionType.OrderFrozen]: t`Freeze`,\n    }[tradeAction.eventName!];\n\n    if (sizeDeltaUsd?.gt(0)) {\n      const pricePrefix = tradeAction.eventName === TradeActionType.OrderExecuted ? t`Price` : t`Acceptable Price`;\n      const price =\n        tradeAction.eventName === TradeActionType.OrderExecuted\n          ? tradeAction.executionPrice\n          : tradeAction.acceptablePrice;\n\n      return t`${actionText} ${increaseText} ${positionText} ${sizeDeltaText}, ${pricePrefix}: ${formatUsd(\n        price\n      )},  Market: ${tradeAction.marketInfo.name}`;\n    } else {\n      const collateralText = formatTokenAmount(collateralDeltaAmount, collateralToken.decimals, collateralToken.symbol);\n\n      if (isIncreaseOrderType(tradeAction.orderType!)) {\n        return t`${actionText} Deposit ${collateralText} into ${positionText},  Market: ${tradeAction.marketInfo.name}`;\n      } else {\n        return t`${actionText} Withdraw ${collateralText} from ${positionText},  Market: ${tradeAction.marketInfo.name}`;\n      }\n    }\n  }\n\n  if (isLiquidationOrderType(tradeAction.orderType!) && tradeAction.eventName === TradeActionType.OrderExecuted) {\n    const executionPrice = tradeAction.executionPrice;\n\n    return (\n      <>\n        <LiquidationTooltip tradeAction={tradeAction} minCollateralUsd={minCollateralUsd} />\n        {\"\"}\n        <Trans>\n          {positionText} {sizeDeltaText}, Price: {formatUsd(executionPrice)}, Market: {tradeAction.marketInfo.name}\n        </Trans>\n      </>\n    );\n  }\n\n  return undefined;\n}\n\nexport function TradeHistoryRow(p: Props) {\n  const { chainId } = useChainId();\n  const { tradeAction, minCollateralUsd } = p;\n\n  const msg = useMemo(() => {\n    if (isSwapOrderType(tradeAction.orderType!)) {\n      return getSwapOrderMessage(tradeAction as SwapTradeAction);\n    } else {\n      return getPositionOrderMessage(tradeAction as PositionTradeAction, minCollateralUsd);\n    }\n  }, [minCollateralUsd, tradeAction]);\n\n  if (!msg) return null;\n\n  return (\n    <div className=\"TradeHistoryRow App-box App-box-border\">\n      <div className=\"muted TradeHistoryRow-time\">{formatDateTime(tradeAction.transaction.timestamp)}</div>\n      <ExternalLink className=\"plain\" href={`${getExplorerUrl(chainId)}tx/${tradeAction.transaction.hash}`}>\n        {msg}\n      </ExternalLink>\n    </div>\n  );\n}\n","import { Trans } from \"@lingui/macro\";\nimport { useTradeHistory } from \"domain/synthetics/tradeHistory\";\nimport { useChainId } from \"lib/chains\";\nimport { TradeHistoryRow } from \"../TradeHistoryRow/TradeHistoryRow\";\nimport { useState } from \"react\";\nimport { usePositionsConstants } from \"domain/synthetics/positions/usePositionsConstants\";\n\nconst PAGE_SIZE = 100;\n\ntype Props = {\n  shouldShowPaginationButtons: boolean;\n};\n\nexport function TradeHistory(p: Props) {\n  const { shouldShowPaginationButtons } = p;\n  const { chainId } = useChainId();\n  const [pageIndex, setPageIndex] = useState(0);\n\n  const { minCollateralUsd } = usePositionsConstants(chainId);\n  const { tradeActions, isLoading: isHistoryLoading } = useTradeHistory(chainId, { pageIndex, pageSize: PAGE_SIZE });\n\n  const isLoading = !minCollateralUsd || isHistoryLoading;\n\n  const isEmpty = !isLoading && !tradeActions?.length;\n\n  return (\n    <div className=\"TradeHistory\">\n      {isLoading && (\n        <div className=\"TradeHistoryRow App-box\">\n          <Trans>Loading...</Trans>\n        </div>\n      )}\n      {isEmpty && (\n        <div className=\"TradeHistoryRow App-box\">\n          <Trans>No trades yet</Trans>\n        </div>\n      )}\n      {!isLoading &&\n        tradeActions?.map((tradeAction) => (\n          <TradeHistoryRow key={tradeAction.id} tradeAction={tradeAction} minCollateralUsd={minCollateralUsd!} />\n        ))}\n      {shouldShowPaginationButtons && (\n        <div>\n          {pageIndex > 0 && (\n            <button className=\"App-button-option App-card-option\" onClick={() => setPageIndex((old) => old - 1)}>\n              <Trans>Prev</Trans>\n            </button>\n          )}\n          {tradeActions && tradeActions.length >= PAGE_SIZE && (\n            <button className=\"App-button-option App-card-option\" onClick={() => setPageIndex((old) => old + 1)}>\n              <Trans>Next</Trans>\n            </button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import { gql } from \"@apollo/client\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { getWrappedToken } from \"config/tokens\";\nimport { useMarketsInfo } from \"domain/synthetics/markets\";\nimport { parseContractPrice, useAvailableTokensData } from \"domain/synthetics/tokens\";\nimport { bigNumberify } from \"lib/numbers\";\nimport { getByKey } from \"lib/objects\";\nimport { getSyntheticsGraphClient } from \"lib/subgraph\";\nimport { useMemo } from \"react\";\nimport useSWR from \"swr\";\nimport { useFixedAddreseses } from \"../common/useFixedAddresses\";\nimport { isSwapOrderType } from \"../orders\";\nimport { getSwapPathOutputAddresses } from \"../trade/utils\";\nimport { PositionTradeAction, RawTradeAction, SwapTradeAction, TradeAction } from \"./types\";\n\nexport type TradeHistoryResult = {\n  tradeActions?: TradeAction[];\n  isLoading: boolean;\n};\n\nexport function useTradeHistory(chainId: number, p: { pageIndex: number; pageSize: number }) {\n  const { pageIndex, pageSize } = p;\n  const { account } = useWeb3React();\n  const { marketsInfoData } = useMarketsInfo(chainId);\n  const { tokensData } = useAvailableTokensData(chainId);\n  const fixedAddresses = useFixedAddreseses(marketsInfoData, tokensData);\n\n  const client = getSyntheticsGraphClient(chainId);\n\n  const key = chainId && client && account ? [chainId, \"useTradeHistory\", account, pageIndex, pageSize] : null;\n\n  const { data, error } = useSWR<RawTradeAction[]>(key, {\n    fetcher: async () => {\n      const skip = pageIndex * pageSize;\n      const first = pageSize;\n\n      const query = gql(`{\n        tradeActions(\n            skip: ${skip},\n            first: ${first},\n            orderBy: transaction__timestamp,\n            orderDirection: desc,\n            where: { account: \"${account!.toLowerCase()}\" }\n        ) {\n            id\n            eventName\n            \n            account\n            marketAddress\n            swapPath\n            initialCollateralTokenAddress\n            \n            initialCollateralDeltaAmount\n            sizeDeltaUsd\n            triggerPrice\n            acceptablePrice\n            executionPrice\n            minOutputAmount\n            executionAmountOut\n\n            priceImpactDiffUsd\n            positionFeeAmount\n            borrowingFeeAmount\n            fundingFeeAmount\n            pnlUsd\n\n            collateralTokenPriceMax\n            collateralTokenPriceMin\n            \n            orderType\n            isLong\n            shouldUnwrapNativeToken\n            \n            reason\n            \n            transaction {\n                timestamp\n                hash\n            }\n        }\n      }`);\n\n      const { data } = await client!.query({ query });\n\n      return data?.tradeActions;\n    },\n  });\n\n  const isLoading = (!error && !data) || !marketsInfoData || !tokensData || !fixedAddresses;\n\n  const tradeActions = useMemo(() => {\n    if (!data || !marketsInfoData || !tokensData || !fixedAddresses) {\n      return undefined;\n    }\n\n    const wrappedToken = getWrappedToken(chainId);\n\n    return data\n      .map((rawAction) => {\n        const orderType = Number(rawAction.orderType);\n\n        if (isSwapOrderType(orderType)) {\n          const initialCollateralTokenAddress = fixedAddresses[rawAction.initialCollateralTokenAddress!];\n          const swapPath = rawAction.swapPath!.map((address) => fixedAddresses[address]);\n          const swapPathOutputAddresses = getSwapPathOutputAddresses({\n            marketsInfoData,\n            swapPath,\n            initialCollateralAddress: initialCollateralTokenAddress,\n            wrappedNativeTokenAddress: wrappedToken.address,\n            shouldUnwrapNativeToken: rawAction.shouldUnwrapNativeToken!,\n          });\n\n          const initialCollateralToken = getByKey(tokensData, initialCollateralTokenAddress)!;\n          const targetCollateralToken = getByKey(tokensData, swapPathOutputAddresses.outTokenAddress)!;\n\n          if (!initialCollateralToken || !targetCollateralToken) {\n            return undefined;\n          }\n\n          const tradeAction: SwapTradeAction = {\n            id: rawAction.id,\n            eventName: rawAction.eventName,\n            account: rawAction.account,\n            swapPath,\n            orderType,\n            initialCollateralTokenAddress: rawAction.initialCollateralTokenAddress!,\n            initialCollateralDeltaAmount: bigNumberify(rawAction.initialCollateralDeltaAmount)!,\n            minOutputAmount: bigNumberify(rawAction.minOutputAmount)!,\n            executionAmountOut: rawAction.executionAmountOut ? bigNumberify(rawAction.executionAmountOut) : undefined,\n            shouldUnwrapNativeToken: rawAction.shouldUnwrapNativeToken!,\n            targetCollateralToken,\n            initialCollateralToken,\n            transaction: rawAction.transaction,\n          };\n\n          return tradeAction;\n        } else {\n          const marketAddress = fixedAddresses[rawAction.marketAddress!];\n          const marketInfo = getByKey(marketsInfoData, marketAddress);\n          const indexToken = marketInfo?.indexToken;\n          const initialCollateralTokenAddress = fixedAddresses[rawAction.initialCollateralTokenAddress!];\n          const swapPath = rawAction.swapPath!.map((address) => fixedAddresses[address]);\n          const swapPathOutputAddresses = getSwapPathOutputAddresses({\n            marketsInfoData,\n            swapPath,\n            initialCollateralAddress: initialCollateralTokenAddress,\n            wrappedNativeTokenAddress: wrappedToken.address,\n            shouldUnwrapNativeToken: rawAction.shouldUnwrapNativeToken!,\n          });\n          const initialCollateralToken = getByKey(tokensData, initialCollateralTokenAddress);\n          const targetCollateralToken = getByKey(tokensData, swapPathOutputAddresses.outTokenAddress);\n\n          if (!marketInfo || !indexToken || !initialCollateralToken || !targetCollateralToken) {\n            return undefined;\n          }\n\n          const tradeAction: PositionTradeAction = {\n            id: rawAction.id,\n            eventName: rawAction.eventName,\n            account: rawAction.account,\n            marketAddress,\n            marketInfo,\n            indexToken,\n            swapPath,\n            initialCollateralTokenAddress,\n            initialCollateralToken,\n            targetCollateralToken,\n            initialCollateralDeltaAmount: bigNumberify(rawAction.initialCollateralDeltaAmount)!,\n            sizeDeltaUsd: bigNumberify(rawAction.sizeDeltaUsd)!,\n            triggerPrice: rawAction.triggerPrice\n              ? parseContractPrice(bigNumberify(rawAction.triggerPrice)!, indexToken.decimals)\n              : undefined,\n            acceptablePrice: parseContractPrice(bigNumberify(rawAction.acceptablePrice)!, indexToken.decimals),\n            executionPrice: rawAction.executionPrice\n              ? parseContractPrice(bigNumberify(rawAction.executionPrice)!, indexToken.decimals)\n              : undefined,\n            minOutputAmount: bigNumberify(rawAction.minOutputAmount)!,\n\n            collateralTokenPriceMax: rawAction.collateralTokenPriceMax\n              ? parseContractPrice(bigNumberify(rawAction.collateralTokenPriceMax)!, initialCollateralToken.decimals)\n              : undefined,\n\n            collateralTokenPriceMin: rawAction.collateralTokenPriceMin\n              ? parseContractPrice(bigNumberify(rawAction.collateralTokenPriceMin)!, initialCollateralToken.decimals)\n              : undefined,\n\n            orderType,\n            isLong: rawAction.isLong!,\n\n            priceImpactDiffUsd: rawAction.priceImpactDiffUsd ? bigNumberify(rawAction.priceImpactDiffUsd) : undefined,\n            positionFeeAmount: rawAction.positionFeeAmount ? bigNumberify(rawAction.positionFeeAmount) : undefined,\n            borrowingFeeAmount: rawAction.borrowingFeeAmount ? bigNumberify(rawAction.borrowingFeeAmount) : undefined,\n            fundingFeeAmount: rawAction.fundingFeeAmount ? bigNumberify(rawAction.fundingFeeAmount) : undefined,\n\n            reason: rawAction.reason,\n            transaction: rawAction.transaction,\n          };\n\n          return tradeAction;\n        }\n      })\n      .filter(Boolean) as TradeAction[];\n  }, [chainId, data, fixedAddresses, marketsInfoData, tokensData]);\n\n  return {\n    tradeActions,\n    isLoading,\n  };\n}\n","import { Trans, t } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { getKeepLeverageKey } from \"config/localStorage\";\nimport { convertTokenAddress } from \"config/tokens\";\nimport { useSyntheticsEvents } from \"context/SyntheticsEvents\";\nimport {\n  estimateExecuteDecreaseOrderGasLimit,\n  getExecutionFee,\n  getIsHighPriceImpact,\n  useGasLimits,\n  useGasPrice,\n} from \"domain/synthetics/fees\";\nimport { useVirtualInventory } from \"domain/synthetics/fees/useVirtualInventory\";\nimport { OrderType, createDecreaseOrderTxn } from \"domain/synthetics/orders\";\nimport { PositionInfo, formatLeverage, usePositionsConstants } from \"domain/synthetics/positions\";\nimport { useAvailableTokensData } from \"domain/synthetics/tokens\";\nimport {\n  AvailableTokenOptions,\n  applySlippage,\n  getDecreasePositionAmounts,\n  getMarkPrice,\n  getNextPositionValuesForDecreaseTrade,\n  getSwapAmountsByFromValue,\n  getTradeFees,\n  useSwapRoutes,\n} from \"domain/synthetics/trade\";\nimport { getCommonError, getDecreaseError } from \"domain/synthetics/trade/utils/validation\";\nimport { getIsEquivalentTokens } from \"domain/tokens\";\nimport { BigNumber } from \"ethers\";\nimport { useChainId } from \"lib/chains\";\nimport { USD_DECIMALS } from \"lib/legacy\";\nimport { useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport {\n  formatAmount,\n  formatDeltaUsd,\n  formatPercentage,\n  formatTokenAmountWithUsd,\n  formatUsd,\n  parseValue,\n} from \"lib/numbers\";\nimport { getByKey } from \"lib/objects\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { OrderStatus } from \"../OrderStatus/OrderStatus\";\nimport Modal from \"components/Modal/Modal\";\nimport BuyInputSection from \"components/BuyInputSection/BuyInputSection\";\nimport Checkbox from \"components/Checkbox/Checkbox\";\nimport ExchangeInfoRow from \"components/Exchange/ExchangeInfoRow\";\nimport Tooltip from \"components/Tooltip/Tooltip\";\nimport { ValueTransition } from \"components/ValueTransition/ValueTransition\";\nimport { TradeFeesRow } from \"../TradeFeesRow/TradeFeesRow\";\nimport TokenSelector from \"components/TokenSelector/TokenSelector\";\nimport cx from \"classnames\";\nimport Button from \"components/Button/Button\";\nimport \"./PositionSeller.scss\";\n\nexport type Props = {\n  position: PositionInfo;\n  showPnlInLeverage: boolean;\n  allowedSlippage: number;\n  availableTokensOptions?: AvailableTokenOptions;\n  onClose: () => void;\n  setPendingTxns: (txns: any) => void;\n  isHigherSlippageAllowed: boolean;\n  setIsHigherSlippageAllowed: (isAllowed: boolean) => void;\n  onConnectWallet: () => void;\n};\n\nexport function PositionSeller(p: Props) {\n  const {\n    position,\n    showPnlInLeverage,\n    onClose,\n    setPendingTxns,\n    allowedSlippage,\n    availableTokensOptions,\n    isHigherSlippageAllowed,\n    setIsHigherSlippageAllowed,\n    onConnectWallet,\n  } = p;\n\n  const { chainId } = useChainId();\n  const { library, account } = useWeb3React();\n  const { tokensData } = useAvailableTokensData(chainId);\n  const { gasPrice } = useGasPrice(chainId);\n  const { virtualInventoryForPositions } = useVirtualInventory(chainId);\n  const { gasLimits } = useGasLimits(chainId);\n  const { minCollateralUsd } = usePositionsConstants(chainId);\n\n  const { setPendingPositionUpdate } = useSyntheticsEvents();\n  const [keepLeverage, setKeepLeverage] = useLocalStorageSerializeKey(getKeepLeverageKey(chainId), true);\n\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [isHighPriceImpactAccepted, setIsHighPriceImpactAccepted] = useState(false);\n\n  const [closeUsdInputValue, setCloseUsdInputValue] = useState(\"\");\n  const closeSizeUsd = parseValue(closeUsdInputValue || \"0\", USD_DECIMALS)!;\n  const maxCloseSize = position?.sizeInUsd || BigNumber.from(0);\n\n  const [receiveTokenAddress, setReceiveTokenAddress] = useState<string>();\n  const receiveToken = getByKey(tokensData, receiveTokenAddress);\n\n  const markPrice = getMarkPrice({ prices: position.indexToken.prices, isLong: position.isLong, isIncrease: false });\n\n  const { findSwapPath, maxSwapLiquidity } = useSwapRoutes({\n    fromTokenAddress: position.collateralTokenAddress,\n    toTokenAddress: receiveTokenAddress,\n  });\n\n  const decreaseAmounts = useMemo(() => {\n    if (!virtualInventoryForPositions) {\n      return undefined;\n    }\n\n    return getDecreasePositionAmounts({\n      marketInfo: position.marketInfo,\n      collateralToken: position.collateralToken,\n      virtualInventoryForPositions,\n      receiveToken: position.collateralToken,\n      isLong: position.isLong,\n      existingPosition: position,\n      closeSizeUsd: closeSizeUsd,\n      keepLeverage: keepLeverage!,\n      isTrigger: false,\n      triggerPrice: undefined,\n      savedAcceptablePriceImpactBps: undefined,\n    });\n  }, [closeSizeUsd, keepLeverage, position, virtualInventoryForPositions]);\n\n  const shouldSwap = receiveToken && !getIsEquivalentTokens(position.collateralToken, receiveToken);\n\n  const swapAmounts = useMemo(() => {\n    if (!shouldSwap || !receiveToken || !decreaseAmounts?.receiveTokenAmount) {\n      return undefined;\n    }\n\n    return getSwapAmountsByFromValue({\n      tokenIn: position.collateralToken,\n      tokenOut: receiveToken,\n      amountIn: decreaseAmounts.receiveTokenAmount,\n      isLimit: false,\n      findSwapPath,\n    });\n  }, [decreaseAmounts, findSwapPath, position.collateralToken, receiveToken, shouldSwap]);\n\n  const receiveUsd = swapAmounts?.usdOut || decreaseAmounts?.receiveUsd;\n  const receiveTokenAmount = swapAmounts?.amountOut || decreaseAmounts?.receiveTokenAmount;\n\n  const nextPositionValues = useMemo(() => {\n    if (!decreaseAmounts?.sizeDeltaUsd.gt(0) || !minCollateralUsd) {\n      return undefined;\n    }\n\n    return getNextPositionValuesForDecreaseTrade({\n      existingPosition: position,\n      marketInfo: position.marketInfo,\n      sizeDeltaUsd: decreaseAmounts.sizeDeltaUsd,\n      collateralDeltaUsd: decreaseAmounts.collateralDeltaUsd,\n      pnlDelta: decreaseAmounts.pnlDelta,\n      exitPnl: decreaseAmounts.exitPnl,\n      executionPrice: decreaseAmounts.exitPrice,\n      showPnlInLeverage,\n      isLong: position.isLong,\n      minCollateralUsd,\n    });\n  }, [decreaseAmounts, minCollateralUsd, position, showPnlInLeverage]);\n\n  const { fees, executionFee } = useMemo(() => {\n    if (!decreaseAmounts || !gasLimits || !tokensData || !gasPrice) {\n      return {};\n    }\n\n    const estimatedGas = estimateExecuteDecreaseOrderGasLimit(gasLimits, {\n      swapPath: swapAmounts?.swapPathStats?.swapPath || [],\n    });\n\n    return {\n      fees: getTradeFees({\n        initialCollateralUsd: decreaseAmounts?.collateralDeltaUsd,\n        sizeDeltaUsd: decreaseAmounts.sizeDeltaUsd,\n        swapSteps: swapAmounts?.swapPathStats?.swapSteps || [],\n        positionFeeUsd: decreaseAmounts.positionFeeUsd,\n        swapPriceImpactDeltaUsd: swapAmounts?.swapPathStats?.totalSwapPriceImpactDeltaUsd || BigNumber.from(0),\n        positionPriceImpactDeltaUsd: decreaseAmounts.positionPriceImpactDeltaUsd,\n        borrowingFeeUsd: position.pendingBorrowingFeesUsd,\n        fundingFeeDeltaUsd: position.pendingFundingFeesUsd,\n      }),\n      executionFee: getExecutionFee(chainId, gasLimits, tokensData, estimatedGas, gasPrice),\n    };\n  }, [chainId, decreaseAmounts, gasLimits, gasPrice, position, swapAmounts, tokensData]);\n\n  const isHighPriceImpact =\n    getIsHighPriceImpact(fees?.positionPriceImpact) || getIsHighPriceImpact(fees?.swapPriceImpact);\n\n  const isNotEnoughReceiveTokenLiquidity = shouldSwap ? maxSwapLiquidity?.lt(receiveUsd || 0) : false;\n\n  const error = useMemo(() => {\n    const commonError = getCommonError({\n      chainId,\n      isConnected: Boolean(account),\n      hasOutdatedUi: false,\n    });\n\n    const decreaseError = getDecreaseError({\n      marketInfo: position.marketInfo,\n      sizeDeltaUsd: decreaseAmounts?.sizeDeltaUsd,\n      receiveToken,\n      isTrigger: false,\n      triggerPrice: undefined,\n      existingPosition: position,\n      nextPositionValues,\n      isLong: position.isLong,\n      isContractAccount: false,\n      minCollateralUsd,\n      isNotEnoughReceiveTokenLiquidity,\n    });\n\n    if (commonError[0] || decreaseError[0]) {\n      return commonError[0] || decreaseError[0];\n    }\n\n    if (isHighPriceImpact && !isHighPriceImpactAccepted) {\n      return [t`Need to accept price impact`];\n    }\n  }, [\n    account,\n    chainId,\n    decreaseAmounts?.sizeDeltaUsd,\n    isHighPriceImpact,\n    isHighPriceImpactAccepted,\n    isNotEnoughReceiveTokenLiquidity,\n    minCollateralUsd,\n    nextPositionValues,\n    position,\n    receiveToken,\n  ]);\n\n  function onSubmit() {\n    if (!account) {\n      onConnectWallet();\n      return;\n    }\n\n    if (\n      !tokensData ||\n      !position ||\n      !executionFee?.feeTokenAmount ||\n      !receiveToken?.address ||\n      !receiveUsd ||\n      !decreaseAmounts?.acceptablePrice\n    ) {\n      return;\n    }\n\n    const acceptablePrice = applySlippage(allowedSlippage, decreaseAmounts.acceptablePrice, false, position.isLong);\n\n    createDecreaseOrderTxn(chainId, library, {\n      account,\n      marketAddress: position.marketAddress,\n      indexTokenAddress: position.indexToken.address,\n      swapPath: swapAmounts?.swapPathStats?.swapPath || [],\n      initialCollateralDeltaAmount: decreaseAmounts.collateralDeltaAmount || BigNumber.from(0),\n      initialCollateralAddress: position.collateralTokenAddress,\n      receiveTokenAddress: receiveToken.address,\n      sizeDeltaUsd: decreaseAmounts.sizeDeltaUsd,\n      orderType: OrderType.MarketDecrease,\n      isLong: position.isLong,\n      executionFee: executionFee.feeTokenAmount,\n      acceptablePrice,\n      decreasePositionSwapType: decreaseAmounts.decreaseSwapType,\n      minOutputUsd: receiveUsd,\n      tokensData,\n      setPendingTxns,\n    }).then(() => {\n      if (p.position) {\n        setPendingPositionUpdate({\n          isIncrease: false,\n          positionKey: position.key,\n          collateralDeltaAmount: decreaseAmounts.collateralDeltaAmount,\n          sizeDeltaUsd: decreaseAmounts.sizeDeltaUsd,\n          sizeDeltaInTokens: decreaseAmounts.sizeDeltaInTokens,\n        });\n      }\n\n      setIsProcessing(true);\n    });\n  }\n\n  useEffect(\n    function initReceiveToken() {\n      if (!receiveTokenAddress && position?.collateralToken?.address) {\n        const convertedAddress = convertTokenAddress(chainId, position?.collateralToken.address, \"native\");\n        setReceiveTokenAddress(convertedAddress);\n      }\n    },\n    [chainId, position?.collateralToken, receiveTokenAddress]\n  );\n\n  return (\n    <>\n      {!isProcessing && (\n        <div className=\"PositionEditor PositionSeller\">\n          <Modal\n            className=\"PositionSeller-modal\"\n            isVisible={true}\n            setIsVisible={onClose}\n            label={\n              <Trans>\n                Close {position?.isLong ? t`Long` : t`Short`} {position?.indexToken?.symbol}\n              </Trans>\n            }\n            allowContentTouchMove\n          >\n            {position && (\n              <>\n                <BuyInputSection\n                  topLeftLabel={t`Close`}\n                  topRightLabel={t`Max`}\n                  topRightValue={formatUsd(maxCloseSize)}\n                  inputValue={closeUsdInputValue}\n                  onInputValueChange={(e) => setCloseUsdInputValue(e.target.value)}\n                  showMaxButton={maxCloseSize.gt(0) && !closeSizeUsd?.eq(maxCloseSize)}\n                  onClickMax={() => setCloseUsdInputValue(formatAmount(maxCloseSize, USD_DECIMALS, 2))}\n                >\n                  USD\n                </BuyInputSection>\n                <div className=\"PositionEditor-info-box PositionSeller-info-box\">\n                  {executionFee?.warning && <div className=\"Confirmation-box-warning\">{executionFee.warning}</div>}\n                  <div className=\"PositionEditor-keep-leverage-settings\">\n                    <Checkbox isChecked={keepLeverage} setIsChecked={setKeepLeverage}>\n                      <span className=\"muted font-sm\">\n                        <Trans>Keep leverage at {position?.leverage ? formatLeverage(position.leverage) : \"...\"}</Trans>\n                      </span>\n                    </Checkbox>\n                  </div>\n\n                  <div className=\"PositionEditor-allow-higher-slippage\">\n                    <Checkbox isChecked={isHigherSlippageAllowed} setIsChecked={setIsHigherSlippageAllowed}>\n                      <span className=\"muted font-sm\">\n                        <Trans>Allow up to 1% slippage</Trans>\n                      </span>\n                    </Checkbox>\n                  </div>\n\n                  <div>\n                    <ExchangeInfoRow label={t`Allowed Slippage`}>\n                      <Tooltip\n                        handle={`${formatAmount(allowedSlippage, 2, 2)}%`}\n                        position=\"right-bottom\"\n                        renderContent={() => {\n                          return (\n                            <Trans>\n                              You can change this in the settings menu on the top right of the page.\n                              <br />\n                              <br />\n                              Note that a low allowed slippage, e.g. less than 0.5%, may result in failed orders if\n                              prices are volatile.\n                            </Trans>\n                          );\n                        }}\n                      />\n                    </ExchangeInfoRow>\n                  </div>\n\n                  <ExchangeInfoRow isTop label={t`Mark Price`} value={formatUsd(markPrice) || \"-\"} />\n                  <ExchangeInfoRow label={t`Entry Price`} value={formatUsd(position?.entryPrice) || \"-\"} />\n                  <ExchangeInfoRow\n                    label={t`Price impact`}\n                    value={formatPercentage(decreaseAmounts?.acceptablePriceImpactBps) || \"-\"}\n                  />\n                  <ExchangeInfoRow\n                    label={t`Acceptable Price`}\n                    value={formatUsd(decreaseAmounts?.acceptablePrice) || \"-\"}\n                  />\n                  <ExchangeInfoRow\n                    className=\"SwapBox-info-row\"\n                    label={t`Liq. Price`}\n                    value={\n                      decreaseAmounts?.sizeDeltaUsd.eq(position.sizeInUsd) ? (\n                        \"-\"\n                      ) : (\n                        <ValueTransition\n                          from={formatUsd(position.liquidationPrice)!}\n                          to={formatUsd(nextPositionValues?.nextLiqPrice)}\n                        />\n                      )\n                    }\n                  />\n\n                  <ExchangeInfoRow\n                    isTop\n                    label={t`Size`}\n                    value={\n                      <ValueTransition\n                        from={formatUsd(position?.sizeInUsd)!}\n                        to={formatUsd(nextPositionValues?.nextSizeUsd)}\n                      />\n                    }\n                  />\n\n                  <div className=\"Exchange-info-row\">\n                    <div>\n                      <Tooltip\n                        handle={\n                          <span className=\"Exchange-info-label\">\n                            <Trans>Collateral ({position.collateralToken?.symbol})</Trans>\n                          </span>\n                        }\n                        position=\"left-top\"\n                        renderContent={() => {\n                          return <Trans>Initial Collateral (Collateral excluding Borrow and Funding Fee).</Trans>;\n                        }}\n                      />\n                    </div>\n                    <div className=\"align-right\">\n                      <ValueTransition\n                        from={formatUsd(position?.initialCollateralUsd)!}\n                        to={formatUsd(nextPositionValues?.nextCollateralUsd)}\n                      />\n                    </div>\n                  </div>\n\n                  {!keepLeverage && (\n                    <ExchangeInfoRow\n                      label={t`Leverage`}\n                      value={\n                        decreaseAmounts?.sizeDeltaUsd.eq(position.sizeInUsd) ? (\n                          \"-\"\n                        ) : (\n                          <ValueTransition\n                            from={formatLeverage(position.leverage)}\n                            to={formatLeverage(nextPositionValues?.nextLeverage)}\n                          />\n                        )\n                      }\n                    />\n                  )}\n\n                  <ExchangeInfoRow\n                    label={t`PnL`}\n                    value={position?.pnl ? formatDeltaUsd(position.pnl, position.pnlPercentage) : \"...\"}\n                  />\n\n                  <TradeFeesRow\n                    isTop\n                    totalTradeFees={fees?.totalFees}\n                    positionFee={fees?.positionFee}\n                    positionPriceImpact={fees?.positionPriceImpact}\n                    swapFees={fees?.swapFees}\n                    swapPriceImpact={fees?.swapPriceImpact}\n                    executionFee={executionFee}\n                    borrowFee={fees?.borrowFee}\n                    fundingFee={fees?.fundingFee}\n                    feesType=\"decrease\"\n                  />\n\n                  <ExchangeInfoRow\n                    isTop\n                    label={t`Receive`}\n                    className=\"Exchange-info-row PositionSeller-receive-row \"\n                    value={\n                      receiveToken && (\n                        <TokenSelector\n                          label={t`Receive`}\n                          className={cx(\"PositionSeller-token-selector\", {\n                            warning: isNotEnoughReceiveTokenLiquidity,\n                          })}\n                          chainId={chainId}\n                          showBalances={false}\n                          disableBodyScrollLock={true}\n                          infoTokens={availableTokensOptions?.infoTokens}\n                          tokenAddress={receiveToken.address}\n                          onSelectToken={(token) => setReceiveTokenAddress(token.address)}\n                          tokens={availableTokensOptions?.swapTokens || []}\n                          showTokenImgInDropdown={true}\n                          selectedTokenLabel={\n                            <span className=\"PositionSelector-selected-receive-token\">\n                              {formatTokenAmountWithUsd(\n                                receiveTokenAmount,\n                                receiveUsd,\n                                receiveToken?.symbol,\n                                receiveToken?.decimals,\n                                {\n                                  fallbackToZero: true,\n                                }\n                              )}\n                            </span>\n                          }\n                        />\n                      )\n                    }\n                  />\n                </div>\n\n                {isHighPriceImpact && (\n                  <div className=\"PositionSeller-price-impact-warning\">\n                    <Checkbox asRow isChecked={isHighPriceImpactAccepted} setIsChecked={setIsHighPriceImpactAccepted}>\n                      <span className=\"muted font-sm\">\n                        <Trans>I am aware of the high price impact</Trans>\n                      </span>\n                    </Checkbox>\n                  </div>\n                )}\n\n                <div className=\"Exchange-swap-button-container\">\n                  <Button className=\"w-100\" variant=\"primary-action\" disabled={Boolean(error)} onClick={onSubmit}>\n                    {error || t`Close`}\n                  </Button>\n                </div>\n              </>\n            )}\n          </Modal>\n        </div>\n      )}\n\n      <OrderStatus\n        isVisible={isProcessing}\n        orderType={OrderType.MarketDecrease}\n        marketAddress={position?.marketAddress}\n        initialCollateralAddress={position?.collateralTokenAddress}\n        initialCollateralAmount={decreaseAmounts?.collateralDeltaAmount}\n        sizeDeltaUsd={decreaseAmounts?.sizeDeltaUsd}\n        isLong={position?.isLong}\n        onClose={() => {\n          setIsProcessing(false);\n          p.onClose();\n        }}\n      />\n    </>\n  );\n}\n","import { getWrappedToken } from \"config/tokens\";\nimport { getByKey } from \"lib/objects\";\nimport { useMemo } from \"react\";\nimport { useMarketsInfo } from \"../markets\";\nimport { parseContractPrice, useAvailableTokensData } from \"../tokens\";\nimport { getSwapPathOutputAddresses, getTriggerThresholdType } from \"../trade\";\nimport { OrdersInfoData, PositionOrderInfo, SwapOrderInfo } from \"./types\";\nimport { useOrders } from \"./useOrders\";\nimport { getPositionOrderTitle, getSwapOrderTitle, isSwapOrderType, isVisibleOrder } from \"./utils\";\n\ntype AggregatedOrdersDataResult = {\n  ordersInfoData?: OrdersInfoData;\n  isLoading: boolean;\n};\n\nexport function useOrdersInfo(chainId: number): AggregatedOrdersDataResult {\n  const { tokensData } = useAvailableTokensData(chainId);\n  const { marketsInfoData } = useMarketsInfo(chainId);\n  const { ordersData } = useOrders(chainId);\n\n  const wrappedToken = getWrappedToken(chainId);\n\n  return useMemo(() => {\n    if (!marketsInfoData || !ordersData || !tokensData) {\n      return {\n        isLoading: true,\n      };\n    }\n\n    const ordersInfoData = Object.keys(ordersData)\n      .filter((orderKey) => isVisibleOrder(ordersData[orderKey].orderType))\n      .reduce((acc: OrdersInfoData, orderKey: string) => {\n        const order = getByKey(ordersData, orderKey)!;\n\n        if (isSwapOrderType(order.orderType)) {\n          const initialCollateralToken = getByKey(tokensData, order.initialCollateralTokenAddress);\n          const { outTokenAddress } = getSwapPathOutputAddresses({\n            marketsInfoData,\n            swapPath: order.swapPath,\n            initialCollateralAddress: order.initialCollateralTokenAddress,\n            wrappedNativeTokenAddress: wrappedToken.address,\n            shouldUnwrapNativeToken: order.shouldUnwrapNativeToken,\n          });\n          const targetCollateralToken = getByKey(tokensData, outTokenAddress);\n\n          if (!initialCollateralToken || !targetCollateralToken) {\n            return acc;\n          }\n\n          const title = getSwapOrderTitle({\n            initialCollateralToken,\n            targetCollateralToken,\n            minOutputAmount: order.minOutputAmount,\n            initialCollateralAmount: order.initialCollateralDeltaAmount,\n          });\n\n          const orderInfo: SwapOrderInfo = {\n            ...order,\n            title,\n            initialCollateralToken,\n            targetCollateralToken,\n          };\n\n          acc[orderKey] = orderInfo;\n\n          return acc;\n        } else {\n          const marketInfo = getByKey(marketsInfoData, order.marketAddress);\n          const indexToken = marketInfo?.indexToken;\n          const initialCollateralToken = getByKey(tokensData, order.initialCollateralTokenAddress);\n          const { outTokenAddress } = getSwapPathOutputAddresses({\n            marketsInfoData,\n            swapPath: order.swapPath,\n            initialCollateralAddress: order.initialCollateralTokenAddress,\n            wrappedNativeTokenAddress: wrappedToken.address,\n            shouldUnwrapNativeToken: order.shouldUnwrapNativeToken,\n          });\n          const targetCollateralToken = getByKey(tokensData, outTokenAddress);\n\n          if (!marketInfo || !indexToken || !targetCollateralToken || !initialCollateralToken) {\n            return acc;\n          }\n\n          const title = getPositionOrderTitle({\n            orderType: order.orderType,\n            isLong: order.isLong,\n            indexToken,\n            sizeDeltaUsd: order.sizeDeltaUsd,\n          });\n\n          const triggerThresholdType = getTriggerThresholdType(order.orderType, order.isLong);\n\n          const orderInfo: PositionOrderInfo = {\n            ...order,\n            title,\n            marketInfo,\n            indexToken,\n            initialCollateralToken,\n            targetCollateralToken,\n            triggerThresholdType,\n            triggerPrice: parseContractPrice(order.contractTriggerPrice, indexToken.decimals),\n            acceptablePrice: parseContractPrice(order.contractAcceptablePrice, indexToken.decimals),\n          };\n\n          acc[orderKey] = orderInfo;\n\n          return acc;\n        }\n      }, {} as OrdersInfoData);\n\n    return {\n      ordersInfoData,\n      isLoading: false,\n    };\n  }, [marketsInfoData, ordersData, tokensData, wrappedToken.address]);\n}\n","import { useWeb3React } from \"@web3-react/core\";\nimport DataStore from \"abis/DataStore.json\";\nimport SyntheticsReader from \"abis/SyntheticsReader.json\";\nimport { getContract } from \"config/contracts\";\nimport { useMulticall } from \"lib/multicall\";\nimport { bigNumberify } from \"lib/numbers\";\nimport { useEffect, useState } from \"react\";\nimport { accountOrderListKey } from \"config/dataStore\";\nimport { OrdersData } from \"./types\";\n\ntype OrdersResult = {\n  ordersData?: OrdersData;\n};\n\nconst DEFAULT_COUNT = 100;\n\nexport function useOrders(chainId: number): OrdersResult {\n  const { account } = useWeb3React();\n\n  const [ordersData, setOrdersData] = useState<OrdersData>({});\n  const [startIndex, setStartIndex] = useState(0);\n  const [endIndex, setEndIndex] = useState(DEFAULT_COUNT);\n\n  const { data } = useMulticall(chainId, \"useOrdersData\", {\n    key: account ? [account, startIndex, endIndex] : null,\n    request: () => ({\n      orderStore: {\n        contractAddress: getContract(chainId, \"DataStore\"),\n        abi: DataStore.abi,\n        calls: {\n          count: {\n            methodName: \"getBytes32Count\",\n            params: [accountOrderListKey(account!)],\n          },\n          keys: {\n            methodName: \"getBytes32ValuesAt\",\n            params: [accountOrderListKey(account!), startIndex, endIndex],\n          },\n        },\n      },\n      reader: {\n        contractAddress: getContract(chainId, \"SyntheticsReader\"),\n        abi: SyntheticsReader.abi,\n        calls: {\n          orders: {\n            methodName: \"getAccountOrders\",\n            params: [getContract(chainId, \"DataStore\"), account, startIndex, endIndex],\n          },\n        },\n      },\n    }),\n    parseResponse: (res) => {\n      const count = Number(res.orderStore.count.returnValues[0]);\n      const orderKeys = res.orderStore.keys.returnValues;\n      const orders = res.reader.orders.returnValues;\n\n      return {\n        count,\n        ordersData: orders.reduce((acc: OrdersData, order, i) => {\n          const key = orderKeys[i];\n          const [addresses, numbers, flags, data] = order;\n          const [account, receiver, callbackContract, marketAddress, initialCollateralToken, swapPath] = addresses;\n          const [orderType, decreasePositionSwapType, ...restNumbers] = numbers;\n          const [\n            sizeDeltaUsd,\n            initialCollateralDeltaAmount,\n            triggerPrice,\n            acceptablePrice,\n            executionFee,\n            callbackGasLimit,\n            minOutputAmount,\n            updatedAtBlock,\n          ] = restNumbers.map(bigNumberify);\n\n          const [isLong, shouldUnwrapNativeToken, isFrozen] = flags;\n\n          acc[key] = {\n            key,\n            account,\n            decreasePositionSwapType,\n            receiver,\n            callbackContract,\n            marketAddress,\n            initialCollateralTokenAddress: initialCollateralToken,\n            swapPath,\n            sizeDeltaUsd,\n            initialCollateralDeltaAmount,\n            contractTriggerPrice: triggerPrice,\n            contractAcceptablePrice: acceptablePrice,\n            executionFee,\n            callbackGasLimit,\n            minOutputAmount,\n            updatedAtBlock,\n            isLong,\n            shouldUnwrapNativeToken,\n            isFrozen,\n            orderType,\n            data,\n          };\n\n          return acc;\n        }, {} as OrdersData),\n      };\n    },\n  });\n\n  useEffect(() => {\n    if (!account) {\n      setOrdersData({});\n      setStartIndex(0);\n      setEndIndex(DEFAULT_COUNT);\n      return;\n    }\n\n    if (data?.count && data.count > endIndex) {\n      setStartIndex(endIndex);\n      setEndIndex(data.count);\n    }\n\n    if (data?.ordersData) {\n      setOrdersData((old) => ({\n        ...old,\n        ...data.ordersData,\n      }));\n    }\n  }, [account, data?.count, data?.ordersData, endIndex]);\n\n  return {\n    ordersData,\n  };\n}\n","import { useWeb3React } from \"@web3-react/core\";\nimport { useSyntheticsEvents } from \"context/SyntheticsEvents\";\nimport {\n  FeeItem,\n  estimateExecuteDecreaseOrderGasLimit,\n  estimateExecuteIncreaseOrderGasLimit,\n  getExecutionFee,\n  getFeeItem,\n  getPositionFee,\n  getTotalFeeItem,\n  useGasLimits,\n  useGasPrice,\n} from \"domain/synthetics/fees\";\nimport Token from \"abis/Token.json\";\nimport {\n  PositionInfo,\n  formatLeverage,\n  getLeverage,\n  getLiquidationPrice,\n  usePositionsConstants,\n} from \"domain/synthetics/positions\";\nimport { useChainId } from \"lib/chains\";\nimport useSWR from \"swr\";\nimport { contractFetcher } from \"lib/contracts\";\nimport { BigNumber } from \"ethers\";\nimport { getContract } from \"config/contracts\";\nimport { useMemo, useState } from \"react\";\nimport { convertToTokenAmount, convertToUsd, useAvailableTokensData } from \"domain/synthetics/tokens\";\nimport { formatAmountFree, formatTokenAmount, formatTokenAmountWithUsd, formatUsd, parseValue } from \"lib/numbers\";\nimport {\n  TradeFees,\n  applySlippage,\n  getAcceptablePrice,\n  getDecreaseSwapType,\n  getMarkPrice,\n} from \"domain/synthetics/trade\";\nimport { getCommonError, getEditCollateralError } from \"domain/synthetics/trade/utils/validation\";\nimport { OrderType, createDecreaseOrderTxn, createIncreaseOrderTxn } from \"domain/synthetics/orders\";\nimport Modal from \"components/Modal/Modal\";\nimport { ApproveTokenButton } from \"components/ApproveTokenButton/ApproveTokenButton\";\nimport ExchangeInfoRow from \"components/Exchange/ExchangeInfoRow\";\nimport { TradeFeesRow } from \"../TradeFeesRow/TradeFeesRow\";\nimport { ValueTransition } from \"components/ValueTransition/ValueTransition\";\nimport { Trans, t } from \"@lingui/macro\";\nimport BuyInputSection from \"components/BuyInputSection/BuyInputSection\";\nimport Tab from \"components/Tab/Tab\";\nimport Button from \"components/Button/Button\";\nimport Tooltip from \"components/Tooltip/Tooltip\";\nimport \"./PositionEditor.scss\";\n\nexport type Props = {\n  position: PositionInfo;\n  showPnlInLeverage: boolean;\n  allowedSlippage: number;\n  setPendingTxns: (txns: any) => void;\n  onClose: () => void;\n  onConnectWallet: () => void;\n};\n\nenum Operation {\n  Deposit = \"Deposit\",\n  Withdraw = \"Withdraw\",\n}\n\nexport function PositionEditor(p: Props) {\n  const { position, showPnlInLeverage, setPendingTxns, onClose, onConnectWallet, allowedSlippage } = p;\n\n  const operationLabels = {\n    [Operation.Deposit]: t`Deposit`,\n    [Operation.Withdraw]: t`Withdraw`,\n  };\n\n  const { chainId } = useChainId();\n  const { account, library, active } = useWeb3React();\n  const { setPendingPositionUpdate } = useSyntheticsEvents();\n  const { tokensData } = useAvailableTokensData(chainId);\n  const { gasPrice } = useGasPrice(chainId);\n  const { gasLimits } = useGasLimits(chainId);\n  const { minCollateralUsd } = usePositionsConstants(chainId);\n  const routerAddress = getContract(chainId, \"SyntheticsRouter\");\n  const { data: tokenAllowance } = useSWR<BigNumber>(\n    [active, chainId, position.collateralTokenAddress, \"allowance\", account, routerAddress],\n    {\n      fetcher: contractFetcher(library, Token),\n    }\n  );\n\n  const [operation, setOperation] = useState(Operation.Deposit);\n  const isDeposit = operation === Operation.Deposit;\n\n  const { collateralToken } = position;\n  const collateralPrice = isDeposit ? collateralToken.prices.minPrice : collateralToken.prices.maxPrice;\n\n  const markPrice = getMarkPrice({\n    prices: position.indexToken.prices,\n    isLong: position.isLong,\n    isIncrease: isDeposit,\n  });\n\n  const maxWithdrawUsd = minCollateralUsd ? position.initialCollateralUsd.sub(minCollateralUsd) : BigNumber.from(0);\n  const maxWithdrawAmount = convertToTokenAmount(maxWithdrawUsd, collateralToken.decimals, collateralPrice)!;\n\n  const [collateralInputValue, setCollateralInputValue] = useState(\"\");\n  const collateralDeltaAmount = parseValue(collateralInputValue || \"0\", collateralToken?.decimals || 0)!;\n  const collateralDeltaUsd = convertToUsd(collateralDeltaAmount, collateralToken?.decimals, collateralPrice);\n\n  const needApproval = isDeposit && tokenAllowance && collateralDeltaAmount && collateralDeltaAmount.gt(tokenAllowance);\n\n  let receiveUsd =\n    !isDeposit && collateralDeltaUsd?.gt(0)\n      ? collateralDeltaUsd?.sub(position.pendingBorrowingFeesUsd).sub(position.pendingFundingFeesUsd)\n      : BigNumber.from(0);\n\n  if (receiveUsd?.lt(0)) {\n    receiveUsd = BigNumber.from(0);\n  }\n  const receiveAmount = convertToTokenAmount(receiveUsd, collateralToken.decimals, collateralPrice);\n\n  const { fees, executionFee } = useMemo(() => {\n    if (!gasLimits || !tokensData || !gasPrice) {\n      return {};\n    }\n\n    const fundingFee = getFeeItem(position.pendingFundingFeesUsd.mul(-1), collateralDeltaUsd);\n    const borrowFee = getFeeItem(position.pendingBorrowingFeesUsd.mul(-1), collateralDeltaUsd);\n    const totalFees = getTotalFeeItem([fundingFee, borrowFee].filter(Boolean) as FeeItem[]);\n\n    const fees: TradeFees = {\n      totalFees,\n      fundingFee,\n      borrowFee,\n    };\n\n    let estimatedGas: BigNumber;\n    if (isDeposit) {\n      estimatedGas = estimateExecuteIncreaseOrderGasLimit(gasLimits, {});\n    } else {\n      estimatedGas = estimateExecuteDecreaseOrderGasLimit(gasLimits, {});\n    }\n\n    const executionFee = getExecutionFee(chainId, gasLimits, tokensData, estimatedGas, gasPrice);\n\n    return {\n      fees,\n      executionFee,\n    };\n  }, [chainId, collateralDeltaUsd, gasLimits, gasPrice, isDeposit, position, tokensData]);\n\n  const { nextCollateralUsd, nextLeverage, nextLiqPrice, acceptablePrice } = useMemo(() => {\n    if (!collateralDeltaUsd?.gt(0) || !minCollateralUsd) {\n      return {};\n    }\n\n    let nextCollateralUsd = isDeposit\n      ? position.remainingCollateralUsd?.add(collateralDeltaUsd || BigNumber.from(0))\n      : position.initialCollateralUsd?.sub(collateralDeltaUsd || BigNumber.from(0));\n\n    if (nextCollateralUsd?.lt(0)) {\n      nextCollateralUsd = BigNumber.from(0);\n    }\n\n    const nextLeverage = getLeverage({\n      sizeInUsd: position.sizeInUsd,\n      collateralUsd: nextCollateralUsd,\n      pendingBorrowingFeesUsd: BigNumber.from(0),\n      pendingFundingFeesUsd: BigNumber.from(0),\n      pnl: showPnlInLeverage ? position.pnl : BigNumber.from(0),\n    });\n\n    const nextLiqPrice = getLiquidationPrice({\n      sizeInUsd: position.sizeInUsd,\n      collateralUsd: nextCollateralUsd,\n      pnl: position.pnl,\n      markPrice: position.markPrice,\n      closingFeeUsd: getPositionFee(position.marketInfo, position.sizeInUsd),\n      maxPriceImpactFactor: position.marketInfo.maxPositionImpactFactorForLiquidations,\n      pendingFundingFeesUsd: BigNumber.from(0),\n      pendingBorrowingFeesUsd: BigNumber.from(0),\n      minCollateralFactor: position.marketInfo.minCollateralFactor,\n      minCollateralUsd,\n      isLong: position.isLong,\n    });\n\n    const { acceptablePrice } = getAcceptablePrice({\n      isIncrease: isDeposit,\n      isLong: position.isLong,\n      sizeDeltaUsd: BigNumber.from(0),\n      priceImpactDeltaUsd: BigNumber.from(0),\n      indexPrice: markPrice,\n    });\n\n    return {\n      nextCollateralUsd,\n      nextLeverage,\n      nextLiqPrice,\n      acceptablePrice,\n    };\n  }, [\n    collateralDeltaUsd,\n    isDeposit,\n    markPrice,\n    minCollateralUsd,\n    position.initialCollateralUsd,\n    position.isLong,\n    position.markPrice,\n    position.marketInfo,\n    position.pnl,\n    position.remainingCollateralUsd,\n    position.sizeInUsd,\n    showPnlInLeverage,\n  ]);\n\n  const decreaseSwapType = getDecreaseSwapType({\n    market: position.marketInfo,\n    collateralTokenAddress: collateralToken.address,\n    isLong: position.isLong,\n  });\n\n  const error = useMemo(() => {\n    const commonError = getCommonError({\n      chainId,\n      isConnected: Boolean(account),\n      hasOutdatedUi: false,\n    });\n\n    const editCollateralError = getEditCollateralError({\n      collateralDeltaAmount,\n      collateralDeltaUsd,\n      nextCollateralUsd,\n      nextLeverage,\n      nextLiqPrice,\n      minCollateralUsd,\n      isDeposit,\n      position,\n    });\n\n    const error = commonError[0] || editCollateralError[0];\n\n    if (error) {\n      return error;\n    }\n\n    if (needApproval) {\n      return t`Pending ${collateralToken?.symbol} approval`;\n    }\n  }, [\n    account,\n    chainId,\n    collateralDeltaAmount,\n    collateralDeltaUsd,\n    collateralToken?.symbol,\n    isDeposit,\n    minCollateralUsd,\n    needApproval,\n    nextCollateralUsd,\n    nextLeverage,\n    nextLiqPrice,\n    position,\n  ]);\n\n  function onSubmit() {\n    if (!account) {\n      onConnectWallet();\n      return;\n    }\n\n    if (\n      !executionFee?.feeTokenAmount ||\n      !tokensData ||\n      !acceptablePrice ||\n      !position?.indexToken ||\n      !collateralDeltaAmount\n    ) {\n      return;\n    }\n\n    const acceptablePriceAfterSlippage = applySlippage(allowedSlippage, acceptablePrice, isDeposit, position.isLong);\n\n    if (isDeposit) {\n      createIncreaseOrderTxn(chainId, library, {\n        account,\n        marketAddress: position.marketAddress,\n        indexTokenAddress: position.indexToken.address,\n        swapPath: [],\n        initialCollateralAddress: position.collateralTokenAddress,\n        initialCollateralAmount: collateralDeltaAmount,\n        acceptablePrice: acceptablePriceAfterSlippage,\n        orderType: OrderType.MarketIncrease,\n        sizeDeltaUsd: BigNumber.from(0),\n        isLong: position.isLong,\n        executionFee: executionFee.feeTokenAmount,\n        tokensData,\n        setPendingTxns,\n      }).then(() => {\n        if (p.position) {\n          setPendingPositionUpdate({\n            isIncrease: true,\n            positionKey: p.position.key,\n            collateralDeltaAmount,\n          });\n        }\n\n        p.onClose();\n      });\n    } else {\n      if (!receiveUsd) {\n        return;\n      }\n\n      createDecreaseOrderTxn(chainId, library, {\n        account,\n        marketAddress: position.marketAddress,\n        indexTokenAddress: position.indexToken.address,\n        swapPath: [],\n        initialCollateralDeltaAmount: collateralDeltaAmount,\n        initialCollateralAddress: position.collateralTokenAddress,\n        receiveTokenAddress: position.collateralTokenAddress,\n        acceptablePrice: acceptablePriceAfterSlippage,\n        sizeDeltaUsd: BigNumber.from(0),\n        orderType: OrderType.MarketDecrease,\n        isLong: position.isLong,\n        executionFee: executionFee.feeTokenAmount,\n        decreasePositionSwapType: decreaseSwapType,\n        minOutputUsd: receiveUsd,\n        tokensData,\n        setPendingTxns,\n      }).then(() => {\n        if (p.position) {\n          setPendingPositionUpdate({\n            isIncrease: false,\n            positionKey: p.position.key,\n            collateralDeltaAmount: collateralDeltaAmount,\n          });\n        }\n\n        onClose();\n      });\n    }\n  }\n\n  return (\n    <div className=\"PositionEditor\">\n      <Modal\n        className=\"PositionEditor-modal\"\n        isVisible={Boolean(position)}\n        setIsVisible={p.onClose}\n        label={\n          <Trans>\n            Edit {position?.isLong ? t`Long` : t`Short`} {position?.indexToken?.symbol}\n          </Trans>\n        }\n        allowContentTouchMove\n      >\n        <Tab\n          onChange={setOperation}\n          option={operation}\n          options={Object.values(Operation)}\n          optionLabels={operationLabels}\n          className=\"PositionEditor-tabs SwapBox-option-tabs\"\n        />\n\n        <BuyInputSection\n          topLeftLabel={(isDeposit ? t`Deposit` : t`Withdraw`) + `:`}\n          topLeftValue={formatUsd(collateralDeltaUsd)}\n          topRightLabel={t`Max` + `:`}\n          topRightValue={\n            isDeposit\n              ? formatTokenAmount(collateralToken?.balance, collateralToken?.decimals)\n              : formatTokenAmount(maxWithdrawAmount, position?.collateralToken?.decimals)\n          }\n          inputValue={collateralInputValue}\n          onInputValueChange={(e) => setCollateralInputValue(e.target.value)}\n          showMaxButton={\n            isDeposit\n              ? collateralToken?.balance && !collateralDeltaAmount?.eq(collateralToken?.balance)\n              : maxWithdrawAmount && !collateralDeltaAmount?.eq(maxWithdrawAmount)\n          }\n          onClickMax={() =>\n            isDeposit\n              ? setCollateralInputValue(formatAmountFree(collateralToken!.balance!, collateralToken!.decimals, 4))\n              : setCollateralInputValue(\n                  formatAmountFree(maxWithdrawAmount!, position?.collateralToken?.decimals || 0, 6)\n                )\n          }\n        >\n          {collateralToken?.symbol}\n        </BuyInputSection>\n\n        <div className=\"PositionEditor-info-box\">\n          {executionFee?.warning && <div className=\"Confirmation-box-warning\">{executionFee.warning}</div>}\n\n          <ExchangeInfoRow\n            label={t`Leverage`}\n            value={<ValueTransition from={formatLeverage(position?.leverage)} to={formatLeverage(nextLeverage)} />}\n          />\n\n          <ExchangeInfoRow isTop label={t`Entry Price`} value={formatUsd(position.entryPrice)} />\n          <ExchangeInfoRow label={t`Mark Price`} value={formatUsd(position.markPrice)} />\n\n          <ExchangeInfoRow\n            label={t`Liq Price`}\n            value={<ValueTransition from={formatUsd(position.liquidationPrice)} to={formatUsd(nextLiqPrice)} />}\n          />\n\n          <ExchangeInfoRow isTop label={t`Size`} value={formatUsd(position.sizeInUsd)} />\n\n          <div className=\"Exchange-info-row\">\n            <div>\n              <Tooltip\n                handle={\n                  <span className=\"Exchange-info-label\">\n                    <Trans>Collateral ({position?.collateralToken?.symbol})</Trans>\n                  </span>\n                }\n                position=\"left-top\"\n                renderContent={() => {\n                  return <Trans>Initial Collateral (Collateral excluding Borrow and Funding Fee).</Trans>;\n                }}\n              />\n            </div>\n            <div className=\"align-right\">\n              <ValueTransition\n                from={formatUsd(position?.initialCollateralUsd)!}\n                to={collateralDeltaUsd?.gt(0) ? formatUsd(nextCollateralUsd) : undefined}\n              />\n            </div>\n          </div>\n\n          <TradeFeesRow\n            executionFee={executionFee}\n            totalTradeFees={fees?.totalFees}\n            fundingFee={fees?.fundingFee}\n            borrowFee={fees?.borrowFee}\n            feesType={\"edit\"}\n          />\n\n          {!isDeposit && (\n            <ExchangeInfoRow\n              label={t`Receive`}\n              value={formatTokenAmountWithUsd(\n                receiveAmount,\n                receiveUsd,\n                collateralToken?.symbol,\n                collateralToken?.decimals\n              )}\n            />\n          )}\n        </div>\n\n        {needApproval && collateralToken && (\n          <>\n            <div className=\"App-card-divider\" />\n\n            <div className=\"ConfirmationBox-approve-tokens\">\n              <div className=\"ConfirmationBox-approve-token\">\n                <ApproveTokenButton\n                  tokenAddress={collateralToken.address}\n                  tokenSymbol={collateralToken.symbol}\n                  spenderAddress={routerAddress}\n                />\n              </div>\n            </div>\n\n            <div className=\"App-card-divider\" />\n          </>\n        )}\n\n        <div className=\"Exchange-swap-button-container\">\n          <Button className=\"w-100\" variant=\"primary-action\" onClick={onSubmit} disabled={Boolean(error)}>\n            {error || operationLabels[operation]}\n          </Button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n","import { Plural, Trans, t } from \"@lingui/macro\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport cx from \"classnames\";\nimport Checkbox from \"components/Checkbox/Checkbox\";\nimport Footer from \"components/Footer/Footer\";\nimport { AcceptbablePriceImpactEditor } from \"components/Synthetics/AcceptablePriceImpactEditor/AcceptablePriceImpactEditor\";\nimport { ClaimHistory } from \"components/Synthetics/ClaimHistory/ClaimHistory\";\nimport { ClaimModal } from \"components/Synthetics/ClaimModal/ClaimModal\";\nimport { OrderList } from \"components/Synthetics/OrderList/OrderList\";\nimport { PositionList } from \"components/Synthetics/PositionList/PositionList\";\nimport { TVChart } from \"components/Synthetics/TVChart/TVChart\";\nimport { TradeBox } from \"components/Synthetics/TradeBox/TradeBox\";\nimport { TradeHistory } from \"components/Synthetics/TradeHistory/TradeHistory\";\nimport { PositionSeller } from \"components/Synthetics/PositionSeller/PositionSeller\";\nimport Tab from \"components/Tab/Tab\";\nimport { DEFAULT_ACCEPABLE_PRICE_IMPACT_BPS } from \"config/factors\";\nimport {\n  getAcceptablePriceImpactBpsKey,\n  getAllowedSlippageKey,\n  getSyntheticsCollateralAddressKey,\n  getSyntheticsFromTokenAddressKey,\n  getSyntheticsListSectionKey,\n  getSyntheticsMarketAddressKey,\n  getSyntheticsToTokenAddressKey,\n  getSyntheticsTradeModeKey,\n  getSyntheticsTradeTypeKey,\n} from \"config/localStorage\";\nimport { getToken } from \"config/tokens\";\nimport { useMarketsInfo } from \"domain/synthetics/markets\";\nimport { isSwapOrderType } from \"domain/synthetics/orders\";\nimport { cancelOrdersTxn } from \"domain/synthetics/orders/cancelOrdersTxn\";\nimport { useOrdersInfo } from \"domain/synthetics/orders/useOrdersInfo\";\nimport { getPositionKey } from \"domain/synthetics/positions\";\nimport { usePositionsInfo } from \"domain/synthetics/positions/usePositionsInfo\";\nimport { useAvailableTokensData } from \"domain/synthetics/tokens\";\nimport { TradeMode, TradeType, useAvailableTokenOptions } from \"domain/synthetics/trade\";\nimport { useTradeFlags } from \"domain/synthetics/trade/useTradeFlags\";\nimport { getIsUnwrap, getIsWrap } from \"domain/tokens\";\nimport { BigNumber } from \"ethers\";\nimport { useChainId } from \"lib/chains\";\nimport { DEFAULT_HIGHER_SLIPPAGE_AMOUNT, DEFAULT_SLIPPAGE_AMOUNT } from \"lib/legacy\";\nimport { useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport { bigNumberify } from \"lib/numbers\";\nimport { getByKey } from \"lib/objects\";\nimport { useCallback, useMemo, useState } from \"react\";\nimport { useVirtualInventory } from \"domain/synthetics/fees/useVirtualInventory\";\nimport { PositionEditor } from \"components/Synthetics/PositionEditor/PositionEditor\";\n\nimport \"./SyntheticsPage.scss\";\n\nexport type Props = {\n  savedIsPnlInLeverage: boolean;\n  shouldDisableValidation: boolean;\n  savedShouldShowPositionLines: boolean;\n  showPnlAfterFees: boolean;\n  onConnectWallet: () => void;\n  setSavedShouldShowPositionLines: (value: boolean) => void;\n  setPendingTxns: (txns: any) => void;\n};\n\nenum ListSection {\n  Positions = \"Positions\",\n  Orders = \"Orders\",\n  Trades = \"Trades\",\n  Claims = \"Claims\",\n}\n\nexport function SyntheticsPage(p: Props) {\n  const {\n    savedIsPnlInLeverage,\n    shouldDisableValidation,\n    savedShouldShowPositionLines,\n    showPnlAfterFees,\n    onConnectWallet,\n    setSavedShouldShowPositionLines,\n    setPendingTxns,\n  } = p;\n  const { chainId } = useChainId();\n  const { library, account } = useWeb3React();\n  const { tokensData } = useAvailableTokensData(chainId);\n  const { marketsInfoData } = useMarketsInfo(chainId);\n  const { virtualInventoryForPositions } = useVirtualInventory(chainId);\n  const { positionsInfoData, isLoading: isPositionsLoading } = usePositionsInfo(chainId, {\n    showPnlInLeverage: savedIsPnlInLeverage,\n  });\n\n  const { ordersInfoData, isLoading: isOrdersLoading } = useOrdersInfo(chainId);\n\n  const [listSection, setListSection] = useLocalStorageSerializeKey(\n    getSyntheticsListSectionKey(chainId),\n    ListSection.Positions\n  );\n\n  const [tradeType, setTradeType] = useLocalStorageSerializeKey(getSyntheticsTradeTypeKey(chainId), TradeType.Long);\n  const [tradeMode, setTradeMode] = useLocalStorageSerializeKey(getSyntheticsTradeModeKey(chainId), TradeMode.Market);\n  const tradeFlags = useTradeFlags(tradeType!, tradeMode!);\n  const { isSwap, isLong } = tradeFlags;\n\n  const availableTokensOptions = useAvailableTokenOptions(chainId);\n  const { indexTokens, tokensMap } = availableTokensOptions;\n\n  const [fromTokenAddress, setFromTokenAddress] = useLocalStorageSerializeKey<string | undefined>(\n    getSyntheticsFromTokenAddressKey(chainId, isSwap),\n    undefined\n  );\n  const fromToken = getByKey(tokensMap, fromTokenAddress);\n  const fromTokenData = getByKey(tokensData, fromTokenAddress);\n\n  const [toTokenAddress, setToTokenAddress] = useLocalStorageSerializeKey<string | undefined>(\n    getSyntheticsToTokenAddressKey(chainId, isSwap),\n    undefined\n  );\n  const toToken = getByKey(tokensMap, toTokenAddress);\n  const toTokenData = getByKey(tokensData, toTokenAddress);\n\n  const isWrapOrUnwrap = Boolean(\n    isSwap && fromToken && toToken && (getIsWrap(fromToken, toToken) || getIsUnwrap(fromToken, toToken))\n  );\n\n  const [marketAddress, setMarketAddress] = useLocalStorageSerializeKey<string | undefined>(\n    getSyntheticsMarketAddressKey(chainId, tradeType, toTokenAddress),\n    undefined\n  );\n  const marketInfo = getByKey(marketsInfoData, marketAddress);\n\n  const [collateralAddress, setCollateralAddress] = useLocalStorageSerializeKey<string | undefined>(\n    getSyntheticsCollateralAddressKey(chainId, tradeType, marketAddress),\n    undefined\n  );\n  const collateralTokenData = getByKey(tokensData, collateralAddress);\n\n  const chartTokenAddress = useMemo(() => {\n    if (isSwap && toToken?.isStable && !fromToken?.isStable) {\n      return fromTokenAddress;\n    } else {\n      return toTokenAddress;\n    }\n  }, [fromToken?.isStable, fromTokenAddress, isSwap, toToken?.isStable, toTokenAddress]);\n\n  const [closingPositionKey, setClosingPositionKey] = useState<string>();\n  const closingPosition = getByKey(positionsInfoData, closingPositionKey);\n\n  const [editingPositionKey, setEditingPositionKey] = useState<string>();\n  const editingPosition = getByKey(positionsInfoData, editingPositionKey);\n\n  const selectedPositionKey = useMemo(() => {\n    if (!account || !collateralAddress || !marketAddress || !tradeType) {\n      return undefined;\n    }\n\n    return getPositionKey(account, marketAddress, collateralAddress, isLong);\n  }, [account, collateralAddress, marketAddress, tradeType, isLong]);\n  const selectedPosition = getByKey(positionsInfoData, selectedPositionKey);\n\n  const [selectedOrdersKeys, setSelectedOrdersKeys] = useState<{ [key: string]: boolean }>({});\n  const selectedOrdersKeysArr = Object.keys(selectedOrdersKeys).filter((key) => selectedOrdersKeys[key]);\n  const [isCancelOrdersProcessig, setIsCancelOrdersProcessig] = useState(false);\n\n  const existingOrder = useMemo(() => {\n    if (!selectedPositionKey) {\n      return undefined;\n    }\n\n    return Object.values(ordersInfoData || {})\n      .filter((order) => !isSwapOrderType(order.orderType))\n      .find((order) => {\n        if (isSwapOrderType(order.orderType)) {\n          return false;\n        }\n\n        return (\n          getPositionKey(order.account, order.marketAddress, order.targetCollateralToken.address, order.isLong) ===\n          selectedPositionKey\n        );\n      });\n  }, [ordersInfoData, selectedPositionKey]);\n\n  const { positionsCount, ordersCount } = useMemo(() => {\n    return {\n      positionsCount: Object.keys(positionsInfoData || {}).length,\n      ordersCount: Object.keys(ordersInfoData || {}).length,\n    };\n  }, [ordersInfoData, positionsInfoData]);\n\n  const [isClaiming, setIsClaiming] = useState(false);\n  const [isAcceptablePriceImpactEditing, setIsAcceptablePriceImpactEditing] = useState(false);\n\n  const [savedAcceptablePriceImpactBps, saveAcceptablePriceImpactBps] = useLocalStorageSerializeKey(\n    getAcceptablePriceImpactBpsKey(chainId),\n    DEFAULT_ACCEPABLE_PRICE_IMPACT_BPS\n  );\n  const acceptablePriceImpactBps =\n    bigNumberify(savedAcceptablePriceImpactBps!) || BigNumber.from(DEFAULT_ACCEPABLE_PRICE_IMPACT_BPS);\n  const onEditAcceptablePriceImpact = useCallback(() => {\n    return setIsAcceptablePriceImpactEditing(true);\n  }, []);\n\n  const [savedSlippageAmount] = useLocalStorageSerializeKey(getAllowedSlippageKey(chainId), DEFAULT_SLIPPAGE_AMOUNT);\n  const [isHigherSlippageAllowed, setIsHigherSlippageAllowed] = useState(false);\n  let allowedSlippage = savedSlippageAmount!;\n  if (isHigherSlippageAllowed) {\n    allowedSlippage = DEFAULT_HIGHER_SLIPPAGE_AMOUNT;\n  }\n\n  const onPositionSellerClose = useCallback(() => {\n    setClosingPositionKey(undefined);\n  }, []);\n\n  const onPositionEditorClose = useCallback(() => {\n    setEditingPositionKey(undefined);\n  }, []);\n\n  function onSelectPosition(positionKey: string) {\n    const position = getByKey(positionsInfoData, positionKey);\n\n    if (!position) return;\n\n    // disable merge state updates to correctly save values to local storage\n    setTimeout(() => {\n      setTradeType(position.isLong ? TradeType.Long : TradeType.Short);\n      setToTokenAddress(position.indexToken.address);\n      setMarketAddress(position.marketAddress);\n      setCollateralAddress(position.collateralTokenAddress);\n    });\n  }\n\n  function onCancelOrdersClick() {\n    setIsCancelOrdersProcessig(true);\n    cancelOrdersTxn(chainId, library, {\n      orderKeys: selectedOrdersKeysArr,\n      setPendingTxns: setPendingTxns,\n    }).finally(() => setIsCancelOrdersProcessig(false));\n  }\n\n  return (\n    <div className=\"SyntheticsTrade page-layout\">\n      <div className=\"SyntheticsTrade-content\">\n        <div className=\"SyntheticsTrade-left\">\n          <TVChart\n            savedShouldShowPositionLines={savedShouldShowPositionLines}\n            ordersInfo={ordersInfoData}\n            positionsInfo={positionsInfoData}\n            chartTokenAddress={chartTokenAddress}\n            availableTokens={isSwap && chartTokenAddress ? [getToken(chainId, chartTokenAddress)] : indexTokens}\n            onSelectChartTokenAddress={setToTokenAddress}\n            disableSelectToken={isSwap}\n          />\n\n          <div className=\"SyntheticsTrade-lists large\">\n            <div className=\"SyntheticsTrade-list-tab-container\">\n              <Tab\n                options={Object.keys(ListSection)}\n                optionLabels={{\n                  [ListSection.Positions]: t`Positions${positionsCount ? ` (${positionsCount})` : \"\"}`,\n                  [ListSection.Orders]: t`Orders${ordersCount ? ` (${ordersCount})` : \"\"}`,\n                  [ListSection.Trades]: t`Trades`,\n                  [ListSection.Claims]: t`Claims`,\n                }}\n                option={listSection}\n                onChange={(section) => setListSection(section)}\n                type=\"inline\"\n                className=\"Exchange-list-tabs\"\n              />\n              <div className=\"align-right Exchange-should-show-position-lines\">\n                {selectedOrdersKeysArr.length > 0 && (\n                  <button\n                    className=\"muted font-base cancel-order-btn\"\n                    disabled={isCancelOrdersProcessig}\n                    type=\"button\"\n                    onClick={onCancelOrdersClick}\n                  >\n                    <Plural value={selectedOrdersKeysArr.length} one=\"Cancel order\" other=\"Cancel # orders\" />\n                  </button>\n                )}\n                <Checkbox\n                  isChecked={savedShouldShowPositionLines}\n                  setIsChecked={setSavedShouldShowPositionLines}\n                  className={cx(\"muted chart-positions\", { active: savedShouldShowPositionLines })}\n                >\n                  <span>\n                    <Trans>Chart positions</Trans>\n                  </span>\n                </Checkbox>\n              </div>\n            </div>\n\n            {listSection === ListSection.Positions && (\n              <PositionList\n                positionsData={positionsInfoData}\n                ordersData={ordersInfoData}\n                isLoading={isPositionsLoading}\n                savedIsPnlInLeverage={savedIsPnlInLeverage}\n                onOrdersClick={() => setListSection(ListSection.Orders)}\n                onSelectPositionClick={onSelectPosition}\n                onClosePositionClick={setClosingPositionKey}\n                onEditCollateralClick={setEditingPositionKey}\n                showPnlAfterFees={showPnlAfterFees}\n              />\n            )}\n            {listSection === ListSection.Orders && (\n              <OrderList\n                positionsData={positionsInfoData}\n                ordersData={ordersInfoData}\n                selectedOrdersKeys={selectedOrdersKeys}\n                setSelectedOrdersKeys={setSelectedOrdersKeys}\n                isLoading={isOrdersLoading}\n                setPendingTxns={setPendingTxns}\n              />\n            )}\n            {listSection === ListSection.Trades && <TradeHistory shouldShowPaginationButtons />}\n            {listSection === ListSection.Claims && <ClaimHistory shouldShowPaginationButtons />}\n          </div>\n        </div>\n\n        <div className=\"SyntheticsTrade-right\">\n          <div className=\"SyntheticsTrade-swap-box\">\n            <TradeBox\n              tradeMode={tradeMode!}\n              tradeType={tradeType!}\n              tradeFlags={tradeFlags}\n              isWrapOrUnwrap={isWrapOrUnwrap}\n              fromTokenAddress={fromTokenAddress}\n              fromToken={fromTokenData}\n              toTokenAddress={toTokenAddress}\n              toToken={toTokenData}\n              marketAddress={marketAddress}\n              marketInfo={marketInfo}\n              collateralAddress={collateralAddress}\n              collateralToken={collateralTokenData}\n              avaialbleTokenOptions={availableTokensOptions}\n              savedIsPnlInLeverage={savedIsPnlInLeverage}\n              existingPosition={selectedPosition}\n              existingOrder={existingOrder}\n              shouldDisableValidation={shouldDisableValidation}\n              acceptablePriceImpactBpsForLimitOrders={acceptablePriceImpactBps}\n              allowedSlippage={allowedSlippage!}\n              isHigherSlippageAllowed={isHigherSlippageAllowed}\n              tokensData={tokensData}\n              ordersInfo={ordersInfoData}\n              positionsInfo={positionsInfoData}\n              virtualInventoryForPositions={virtualInventoryForPositions}\n              setIsHigherSlippageAllowed={setIsHigherSlippageAllowed}\n              onSelectMarketAddress={setMarketAddress}\n              onSelectCollateralAddress={setCollateralAddress}\n              onSelectFromTokenAddress={setFromTokenAddress}\n              onSelectToTokenAddress={setToTokenAddress}\n              onSelectTradeMode={setTradeMode}\n              onSelectTradeType={setTradeType}\n              onConnectWallet={onConnectWallet}\n              setIsEditingAcceptablePriceImpact={onEditAcceptablePriceImpact}\n              setPendingTxns={setPendingTxns}\n              setIsClaiming={setIsClaiming}\n            />\n          </div>\n        </div>\n\n        <div className=\"SyntheticsTrade-lists small\">\n          <div className=\"SyntheticsTrade-list-tab-container\">\n            <Tab\n              options={Object.keys(ListSection)}\n              optionLabels={ListSection}\n              option={listSection}\n              onChange={(section) => setListSection(section)}\n              type=\"inline\"\n              className=\"Exchange-list-tabs\"\n            />\n          </div>\n          {listSection === ListSection.Positions && (\n            <PositionList\n              positionsData={positionsInfoData}\n              ordersData={ordersInfoData}\n              savedIsPnlInLeverage={savedIsPnlInLeverage}\n              isLoading={isPositionsLoading}\n              onOrdersClick={() => setListSection(ListSection.Orders)}\n              onSelectPositionClick={onSelectPosition}\n              onClosePositionClick={setClosingPositionKey}\n              onEditCollateralClick={setEditingPositionKey}\n              showPnlAfterFees={showPnlAfterFees}\n            />\n          )}\n          {listSection === ListSection.Orders && (\n            <OrderList\n              positionsData={positionsInfoData}\n              ordersData={ordersInfoData}\n              isLoading={isOrdersLoading}\n              selectedOrdersKeys={selectedOrdersKeys}\n              setSelectedOrdersKeys={setSelectedOrdersKeys}\n              setPendingTxns={setPendingTxns}\n            />\n          )}\n          {listSection === ListSection.Trades && <TradeHistory shouldShowPaginationButtons />}\n          {listSection === ListSection.Claims && <ClaimHistory shouldShowPaginationButtons />}\n        </div>\n      </div>\n\n      {closingPosition && (\n        <PositionSeller\n          position={closingPosition}\n          showPnlInLeverage={savedIsPnlInLeverage}\n          onClose={onPositionSellerClose}\n          setPendingTxns={setPendingTxns}\n          allowedSlippage={allowedSlippage}\n          availableTokensOptions={availableTokensOptions}\n          isHigherSlippageAllowed={isHigherSlippageAllowed}\n          setIsHigherSlippageAllowed={setIsHigherSlippageAllowed}\n          onConnectWallet={onConnectWallet}\n        />\n      )}\n\n      {editingPosition && (\n        <PositionEditor\n          showPnlInLeverage={savedIsPnlInLeverage}\n          position={editingPosition}\n          allowedSlippage={allowedSlippage}\n          onClose={onPositionEditorClose}\n          setPendingTxns={setPendingTxns}\n          onConnectWallet={onConnectWallet}\n        />\n      )}\n\n      {isAcceptablePriceImpactEditing && (\n        <AcceptbablePriceImpactEditor\n          savedAcceptablePriceImpactBps={savedAcceptablePriceImpactBps!}\n          saveAcceptablePriceImpactBps={saveAcceptablePriceImpactBps}\n          onClose={() => setIsAcceptablePriceImpactEditing(false)}\n        />\n      )}\n\n      {isClaiming && <ClaimModal onClose={() => setIsClaiming(false)} setPendingTxns={setPendingTxns} />}\n\n      {/* {sharingPosition && (\n        <PositionShare\n          isPositionShareModalOpen={true}\n          setIsPositionShareModalOpen={() => setSharingPositionKey(undefined)}\n          positionToShare={sharingPosition}\n          chainId={chainId}\n          account={account}\n        />\n      )} */}\n      <Footer />\n    </div>\n  );\n}\n","import { TradeMode, TradeType } from \"./types\";\nimport { useMemo } from \"react\";\n\nexport type TradeFlags = {\n  isLong: boolean;\n  isShort: boolean;\n  isSwap: boolean;\n  isPosition: boolean;\n  isIncrease: boolean;\n  isTrigger: boolean;\n  isMarket: boolean;\n  isLimit: boolean;\n};\n\nexport function useTradeFlags(tradeType: TradeType, tradeMode: TradeMode): TradeFlags {\n  return useMemo(() => {\n    const isLong = tradeType === TradeType.Long;\n    const isShort = tradeType === TradeType.Short;\n    const isSwap = tradeType === TradeType.Swap;\n\n    const isPosition = isLong || isShort;\n\n    const isMarket = tradeMode === TradeMode.Market;\n    const isLimit = tradeMode === TradeMode.Limit;\n    const isTrigger = tradeMode === TradeMode.Trigger;\n\n    const isIncrease = isPosition && (isMarket || isLimit);\n\n    return {\n      isLong,\n      isShort,\n      isSwap,\n      isPosition,\n      isIncrease,\n      isMarket,\n      isLimit,\n      isTrigger,\n    };\n  }, [tradeMode, tradeType]);\n}\n","import { getNativeToken, getTokensMap } from \"config/tokens\";\nimport { useMarkets } from \"domain/synthetics/markets\";\nimport { InfoTokens, Token } from \"domain/tokens\";\nimport { useMemo } from \"react\";\nimport { adaptToV1InfoTokens, useAvailableTokensData } from \"../tokens\";\n\nexport type AvailableTokenOptions = {\n  tokensMap: { [address: string]: Token };\n  infoTokens: InfoTokens;\n  swapTokens: Token[];\n  indexTokens: Token[];\n};\n\nexport function useAvailableTokenOptions(chainId: number): AvailableTokenOptions {\n  const { marketsData } = useMarkets(chainId);\n  const { tokensData } = useAvailableTokensData(chainId);\n\n  return useMemo(() => {\n    const markets = Object.values(marketsData || {});\n    const tokensMap = getTokensMap(chainId);\n\n    const collaterals = new Set<Token>();\n    const indexTokens = new Set<Token>();\n    const nativeToken = getNativeToken(chainId);\n\n    for (const market of markets) {\n      const longToken = tokensMap[market.longTokenAddress];\n      const shortToken = tokensMap[market.shortTokenAddress];\n\n      const indexToken = tokensMap[market.indexTokenAddress]?.isWrapped\n        ? nativeToken\n        : tokensMap[market.indexTokenAddress];\n\n      if (!longToken || !shortToken || !indexToken) {\n        continue;\n      }\n\n      if (longToken.isWrapped || shortToken.isWrapped) {\n        collaterals.add(nativeToken);\n      }\n\n      collaterals.add(longToken);\n      collaterals.add(shortToken);\n\n      if (!market.isSpotOnly) {\n        indexTokens.add(indexToken);\n      }\n    }\n\n    return {\n      tokensMap,\n      swapTokens: Array.from(collaterals),\n      indexTokens: Array.from(indexTokens),\n      infoTokens: adaptToV1InfoTokens(tokensData || {}),\n    };\n  }, [chainId, marketsData, tokensData]);\n}\n","import { useChainId } from \"lib/chains\";\nimport { PRECISION } from \"lib/legacy\";\n\nimport { BigNumber, BigNumberish } from \"ethers\";\nimport { formatAmount, formatUsd } from \"lib/numbers\";\n\nimport { ShareBar } from \"components/ShareBar/ShareBar\";\nimport StatsTooltipRow from \"components/StatsTooltip/StatsTooltipRow\";\nimport Tooltip from \"components/Tooltip/Tooltip\";\nimport { getBorrowingFeeFactor, getFundingApr } from \"domain/synthetics/fees\";\nimport { useVirtualInventory } from \"domain/synthetics/fees/useVirtualInventory\";\nimport {\n  MarketInfo,\n  getMarketIndexName,\n  getMarketPoolName,\n  getMaxReservedUsd,\n  getReservedUsd,\n  useMarketsInfo,\n} from \"domain/synthetics/markets\";\nimport { convertToUsd, getMidPrice } from \"domain/synthetics/tokens\";\nimport cx from \"classnames\";\nimport \"./SyntheticsStats.scss\";\n\nfunction formatAmountHuman(amount: BigNumberish | undefined, tokenDecimals: number) {\n  const n = Number(formatAmount(amount, tokenDecimals));\n\n  if (n > 1000000) {\n    return `${(n / 1000000).toFixed(1)}M`;\n  }\n  if (n > 1000) {\n    return `${(n / 1000).toFixed(1)}K`;\n  }\n  return n.toFixed(1);\n}\n\nfunction formatFactor(factor: BigNumber) {\n  if (factor.gt(PRECISION)) {\n    return factor.div(PRECISION).toString();\n  } else if (factor.gt(0)) {\n    let factorDecimals = PRECISION.div(factor).toString().length;\n\n    return (Number(factor) / 10 ** 30).toFixed(factorDecimals);\n  }\n\n  return factor.toString();\n}\n\nexport function SyntheticsStats() {\n  const { chainId } = useChainId();\n\n  const { marketsInfoData } = useMarketsInfo(chainId);\n  const { virtualInventoryForPositions, virtualInventoryForSwaps } = useVirtualInventory(chainId);\n  // const { swapTokens, infoTokens } = useAvailableTokenOptions(chainId);\n\n  // const [fromTokenAddress, setFromTokenAddress] = useState(NATIVE_TOKEN_ADDRESS);\n\n  const markets = Object.values(marketsInfoData || {});\n\n  return (\n    <div className=\"SyntheticsStats\">\n      <table>\n        <thead>\n          <tr>\n            <th>Market</th>\n            <th>Pool Value</th>\n            <th>PnL</th>\n            <th>Borrowing Fees</th>\n            <th>\n              <Tooltip handle=\"Funding APR\" renderContent={() => \"Per 1h\"} />\n            </th>\n            <th>Liquidity Long</th>\n            <th>Liquidity Short</th>\n            <th>OI Balance</th>\n            <th>\n              <Tooltip handle=\"VI Positions\" renderContent={() => \"Virtual inventory for positons\"} />\n            </th>\n            <th>\n              <Tooltip handle=\"VI Swaps\" renderContent={() => \"Virtual inventory for swaps (Long / Short)\"} />\n            </th>\n            <th>Config</th>\n          </tr>\n        </thead>\n        <tbody>\n          {markets.map((market) => {\n            const totalInterestUsd = market.longInterestUsd.add(market.shortInterestUsd);\n\n            const midLongPrice = getMidPrice(market.longToken.prices);\n            const midShortPrice = getMidPrice(market.shortToken.prices);\n\n            const longPoolUsd = convertToUsd(market.longPoolAmount, market.longToken.decimals, midLongPrice);\n            const shortPoolUsd = convertToUsd(market.shortPoolAmount, market.shortToken.decimals, midShortPrice);\n\n            const swapImpactUsdLong = convertToUsd(\n              market.swapImpactPoolAmountLong,\n              market.longToken.decimals,\n              midLongPrice\n            );\n            const swapImpactUsdShort = convertToUsd(\n              market.swapImpactPoolAmountShort,\n              market.shortToken.decimals,\n              midShortPrice\n            );\n            const positionImpactUsd = convertToUsd(\n              market.positionImpactPoolAmount,\n              market.indexToken.decimals,\n              market.indexToken.prices.minPrice\n            );\n\n            const virtualInventoryPositions = virtualInventoryForPositions?.[market.indexToken.address];\n            const virtualInventorySwapsLong =\n              virtualInventoryForSwaps?.[market.marketTokenAddress]?.[market.longTokenAddress];\n            const virtualInventorySwapsShort =\n              virtualInventoryForSwaps?.[market.marketTokenAddress]?.[market.shortTokenAddress];\n\n            const reservedUsdLong = getReservedUsd(market, true);\n            const maxReservedUsdLong = getMaxReservedUsd(market, true);\n\n            const reservedUsdShort = getReservedUsd(market, false);\n            const maxReservedUsdShort = getMaxReservedUsd(market, false);\n\n            const borrowingRateLong = getBorrowingFeeFactor(market, true, 60 * 60);\n            const borrowingRateShort = getBorrowingFeeFactor(market, false, 60 * 60);\n\n            const fundingAprLong = getFundingApr(market, true, 60 * 60);\n            const fundingAprShort = getFundingApr(market, false, 60 * 60);\n\n            return (\n              <tr key={market.marketTokenAddress}>\n                <td>\n                  <div className=\"cell\">\n                    <div>{getMarketIndexName(market)}</div>\n                    <div className=\"muted\">{getMarketPoolName(market)}</div>\n                  </div>\n                </td>\n                <td>\n                  <div className=\"cell\">\n                    <Tooltip\n                      handle={`$${formatAmountHuman(market.poolValueMax, 30)}`}\n                      renderContent={() => (\n                        <>\n                          <StatsTooltipRow label=\"Pool USD Long\" value={formatAmountHuman(longPoolUsd, 30)} />\n                          <StatsTooltipRow label=\"Pool USD Short\" value={formatAmountHuman(shortPoolUsd, 30)} />\n                          <StatsTooltipRow\n                            label={`Swap Imapct Amount ${market.longToken.symbol}`}\n                            value={formatAmountHuman(swapImpactUsdLong, 30)}\n                          />\n                          <StatsTooltipRow\n                            label={`Swap Imapct Amount ${market.shortToken.symbol}`}\n                            value={formatAmountHuman(swapImpactUsdShort, 30)}\n                          />\n                          <StatsTooltipRow\n                            label={`Position Imapct Amount`}\n                            value={formatAmountHuman(positionImpactUsd, 30)}\n                          />\n                        </>\n                      )}\n                    />\n                  </div>\n                </td>\n                <td>\n                  <div className=\"cell\">\n                    <Tooltip\n                      handle={\n                        <span className={cx({ positive: market.netPnlMax.gt(0), negative: market.netPnlMax.lt(0) })}>\n                          {market.netPnlMax.gt(0) ? \"+\" : \"-\"}${formatAmountHuman(market.netPnlMax.abs(), 30)}\n                        </span>\n                      }\n                      renderContent={() => (\n                        <>\n                          <StatsTooltipRow label=\"PnL Long\" value={formatAmountHuman(market.pnlLongMax, 30)} />\n                          <StatsTooltipRow label=\"PnL Short\" value={formatAmountHuman(market.pnlShortMax, 30)} />\n                        </>\n                      )}\n                    />\n                  </div>\n                </td>\n                <td>\n                  <div className=\"cell\">\n                    <Tooltip\n                      handle={`$${formatAmountHuman(market.totalBorrowingFees, 30)}`}\n                      renderContent={() => (\n                        <>\n                          <StatsTooltipRow\n                            label=\"Rate Long\"\n                            value={`-${formatAmount(borrowingRateLong, 30, 4)}% / 1h`}\n                            showDollar={false}\n                          />\n                          <StatsTooltipRow\n                            label=\"Rate Short\"\n                            value={`-${formatAmount(borrowingRateShort, 30, 4)}% / 1h`}\n                            showDollar={false}\n                          />\n                        </>\n                      )}\n                    />\n                  </div>\n                </td>\n                <td>\n                  <div className=\"cell\">\n                    <div>\n                      <span>\n                        {market.longsPayShorts ? \"-\" : \"+\"}\n                        {formatAmount(fundingAprLong.abs(), 30, 4)}%\n                      </span>{\" \"}\n                      /{\" \"}\n                      <span>\n                        {market.longsPayShorts ? \"+\" : \"-\"}\n                        {formatAmount(fundingAprShort.abs(), 30, 4)}%\n                      </span>\n                    </div>\n                  </div>\n                </td>\n                <td>\n                  <div className=\"cell\">\n                    <div style={{ marginBottom: \"4px\" }}>\n                      ${formatAmountHuman(reservedUsdLong, 30)} / ${formatAmountHuman(maxReservedUsdLong, 30)}\n                    </div>\n                    <ShareBar share={reservedUsdLong} total={maxReservedUsdLong} />\n                  </div>\n                </td>\n                <td>\n                  <div className=\"cell\">\n                    <div style={{ marginBottom: \"4px\" }}>\n                      ${formatAmountHuman(reservedUsdShort, 30)} / ${formatAmountHuman(maxReservedUsdShort, 30)}\n                    </div>\n                    <ShareBar share={reservedUsdShort} total={maxReservedUsdShort} />\n                  </div>\n                </td>\n                <td>\n                  <div className=\"cell\">\n                    <div style={{ marginBottom: \"4px\" }}>\n                      ${formatAmountHuman(market.longInterestUsd, 30)} / $\n                      {formatAmountHuman(market.shortInterestUsd, 30)}\n                    </div>\n                    <ShareBar\n                      className=\"MarketCard-pool-balance-bar\"\n                      share={market.longInterestUsd}\n                      total={totalInterestUsd}\n                    />\n                  </div>\n                </td>\n                <td>\n                  <div className=\"cell\">\n                    <div>\n                      {virtualInventoryPositions?.gt(0) ? \"Short\" : \"Long\"}{\" \"}\n                      {formatUsd(virtualInventoryPositions?.abs()) || \"$0.00\"}\n                    </div>\n                  </div>\n                </td>\n                <td>\n                  <div className=\"cell\">\n                    <div>\n                      {formatUsd(convertToUsd(virtualInventorySwapsLong, market.longToken.decimals, midLongPrice)) ||\n                        \"$0.00\"}{\" \"}\n                      /{\" \"}\n                      {formatUsd(convertToUsd(virtualInventorySwapsShort, market.shortToken.decimals, midShortPrice)) ||\n                        \"$0.00\"}{\" \"}\n                    </div>\n                  </div>\n                </td>\n                <td>\n                  <div className=\"cell\">\n                    <Tooltip\n                      position=\"right-bottom\"\n                      handle=\"...\"\n                      renderContent={() => (\n                        <>\n                          <div>Position Impact</div>\n                          <br />\n                          <StatsTooltipRow\n                            label=\"Exponent\"\n                            value={formatFactor(market.positionImpactExponentFactor)}\n                            showDollar={false}\n                          />\n                          <StatsTooltipRow\n                            label=\"Positive factor\"\n                            value={formatFactor(market.positionImpactFactorPositive)}\n                            showDollar={false}\n                          />\n                          <StatsTooltipRow\n                            label=\"Negative factor\"\n                            value={formatFactor(market.positionImpactFactorNegative)}\n                            showDollar={false}\n                          />\n                          <br />\n                          <div className=\"Tooltip-divider\" />\n                          <br />\n                          <div>Swap Impact</div>\n                          <br />\n                          <StatsTooltipRow\n                            label=\"Exponent\"\n                            value={formatFactor(market.swapImpactExponentFactor)}\n                            showDollar={false}\n                          />\n                          <StatsTooltipRow\n                            label=\"Positive factor\"\n                            value={formatFactor(market.swapImpactFactorPositive)}\n                            showDollar={false}\n                          />\n                          <StatsTooltipRow\n                            label=\"Negative factor\"\n                            value={formatFactor(market.swapImpactFactorNegative)}\n                            showDollar={false}\n                          />\n                          <br />\n                          <div className=\"Tooltip-divider\" />\n                          <br />\n                          <div>Fees factors</div>\n                          <br />\n                          <StatsTooltipRow\n                            label=\"Swap Fee factor\"\n                            value={formatFactor(market.swapFeeFactor)}\n                            showDollar={false}\n                          />\n                          <StatsTooltipRow\n                            label=\"Position Fee factor\"\n                            value={formatFactor(market.positionFeeFactor)}\n                            showDollar={false}\n                          />\n                          <br />\n                        </>\n                      )}\n                    />\n                  </div>\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n\n      {/* <div className=\"SyntheticsStats-swap-section\">\n        <div className=\"SyntheticsStats-token-selector-container\">\n          <div>Swap From</div>\n          <TokenSelector\n            label={`Swap From`}\n            chainId={chainId}\n            tokenAddress={fromTokenAddress}\n            onSelectToken={(token) => setFromTokenAddress(token.address)}\n            tokens={swapTokens}\n            infoTokens={infoTokens}\n            className=\"SyntheticsStats-token-selector\"\n            showSymbolImage={false}\n            showTokenImgInDropdown={true}\n          />\n        </div>\n      </div>\n\n      <table>\n        <thead>\n          <tr>\n            <th>To Token</th>\n            <th>Max Liquidity</th>\n            <th>Most liquid Route</th>\n          </tr>\n        </thead>\n        <tbody>\n          {swapTokens\n            .filter((token) => !getIsEquivalentTokens(getToken(chainId, fromTokenAddress), token) && !token.isNative)\n            .map((token) => (\n              <SwapStatsRow key={token.address} fromTokenAddress={fromTokenAddress} toTokenAddress={token.address} />\n            ))}\n        </tbody>\n      </table> */}\n    </div>\n  );\n}\n\n// function SwapStatsRow({ fromTokenAddress, toTokenAddress }: { fromTokenAddress: string; toTokenAddress: string }) {\n//   const { chainId } = useChainId();\n\n//   const { marketsInfoData } = useMarketsInfo(chainId);\n\n//   const { maxSwapLiquidity, maxLiquiditySwapPath } = useSwapRoutes({\n//     fromTokenAddress,\n//     toTokenAddress,\n//   });\n\n//   return (\n//     <tr>\n//       <td>{getToken(chainId, toTokenAddress).symbol}</td>\n//       <td>${formatAmountHuman(maxSwapLiquidity, 30)}</td>\n//       <td>\n//         {maxLiquiditySwapPath?.map((marketAddress) => getByKey(marketsInfoData, marketAddress)?.name).join(\" -> \")}\n//       </td>\n//     </tr>\n//   );\n// }\n","import Footer from \"components/Footer/Footer\";\nimport { Trans } from \"@lingui/macro\";\nimport { useEffect, useState } from \"react\";\nimport { sleep } from \"lib/sleep\";\nimport { AVALANCHE_FUJI, getChainName } from \"config/chains\";\nimport { switchNetwork } from \"lib/wallets\";\nimport { useWeb3React } from \"@web3-react/core\";\n\nexport function SyntheticsFallbackPage() {\n  const { active } = useWeb3React();\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  useEffect(() => {\n    // Wait for chainId to be loaded before rendering\n    sleep(100).then(() => setIsLoaded(true));\n  }, []);\n\n  if (!isLoaded) return null;\n\n  return (\n    <div className=\"page-layout\">\n      <div className=\"page-not-found-container\">\n        <div className=\"page-not-found\">\n          <h2>\n            <Trans>V2 doesn't currently support this network</Trans>\n          </h2>\n\n          <p className=\"go-back\">\n            <div>\n              <Trans>\n                <span>Switch to:</span>\n              </Trans>\n            </div>\n\n            <br />\n            <div className=\"clickable underline\" onClick={() => switchNetwork(AVALANCHE_FUJI, active)}>\n              {getChainName(AVALANCHE_FUJI)}\n            </div>\n          </p>\n        </div>\n      </div>\n      <Footer />\n    </div>\n  );\n}\n","import { Web3Provider } from \"@ethersproject/providers\";\nimport { useWeb3React, Web3ReactProvider } from \"@web3-react/core\";\nimport { ethers } from \"ethers\";\nimport useScrollToTop from \"lib/useScrollToTop\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { SWRConfig } from \"swr\";\n\nimport { Redirect, Route, HashRouter as Router, Switch, useHistory, useLocation } from \"react-router-dom\";\n\nimport {\n  BASIS_POINTS_DIVISOR,\n  DEFAULT_SLIPPAGE_AMOUNT,\n  getAppBaseUrl,\n  isHomeSite,\n  isMobileDevice,\n  REFERRAL_CODE_QUERY_PARAM,\n} from \"lib/legacy\";\n\nimport Actions from \"pages/Actions/Actions\";\nimport BeginAccountTransfer from \"pages/BeginAccountTransfer/BeginAccountTransfer\";\nimport Buy from \"pages/Buy/Buy\";\nimport BuyGlp from \"pages/BuyGlp/BuyGlp\";\nimport BuyGMX from \"pages/BuyGMX/BuyGMX\";\nimport ClaimEsGmx from \"pages/ClaimEsGmx/ClaimEsGmx\";\nimport CompleteAccountTransfer from \"pages/CompleteAccountTransfer/CompleteAccountTransfer\";\nimport Dashboard from \"pages/Dashboard/Dashboard\";\nimport Stats from \"pages/Stats/Stats\";\nimport Ecosystem from \"pages/Ecosystem/Ecosystem\";\nimport { Exchange } from \"pages/Exchange/Exchange\";\nimport Home from \"pages/Home/Home\";\nimport NftWallet from \"pages/NftWallet/NftWallet\";\nimport OrdersOverview from \"pages/OrdersOverview/OrdersOverview\";\nimport PositionsOverview from \"pages/PositionsOverview/PositionsOverview\";\nimport Referrals from \"pages/Referrals/Referrals\";\nimport Stake from \"pages/Stake/Stake\";\n\nimport Checkbox from \"components/Checkbox/Checkbox\";\nimport Modal from \"components/Modal/Modal\";\nimport { cssTransition, ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nimport \"styles/Font.css\";\nimport \"styles/Input.css\";\nimport \"styles/Shared.css\";\nimport \"./App.scss\";\n\nimport SEO from \"components/Common/SEO\";\nimport EventToastContainer from \"components/EventToast/EventToastContainer\";\nimport useEventToast from \"components/EventToast/useEventToast\";\nimport { decodeReferralCode, encodeReferralCode } from \"domain/referrals\";\nimport coinbaseImg from \"img/coinbaseWallet.png\";\nimport metamaskImg from \"img/metamask.png\";\nimport walletConnectImg from \"img/walletconnect-circle-blue.svg\";\nimport useRouteQuery from \"lib/useRouteQuery\";\n\nimport PositionRouter from \"abis/PositionRouter.json\";\nimport VaultV2 from \"abis/VaultV2.json\";\nimport VaultV2b from \"abis/VaultV2b.json\";\nimport { RedirectPopupModal } from \"components/ModalViews/RedirectModal\";\nimport { getContract } from \"config/contracts\";\nimport { REDIRECT_POPUP_TIMESTAMP_KEY } from \"config/localStorage\";\nimport Jobs from \"pages/Jobs/Jobs\";\nimport PageNotFound from \"pages/PageNotFound/PageNotFound\";\nimport ReferralTerms from \"pages/ReferralTerms/ReferralTerms\";\nimport TermsAndConditions from \"pages/TermsAndConditions/TermsAndConditions\";\nimport { useLocalStorage } from \"react-use\";\n\nimport { i18n } from \"@lingui/core\";\nimport { t, Trans } from \"@lingui/macro\";\nimport { I18nProvider } from \"@lingui/react\";\nimport ExternalLink from \"components/ExternalLink/ExternalLink\";\nimport { Header } from \"components/Header/Header\";\nimport { ARBITRUM, getExplorerUrl } from \"config/chains\";\nimport { isDevelopment } from \"config/env\";\nimport { getIsSyntheticsSupported } from \"config/features\";\nimport {\n  CURRENT_PROVIDER_LOCALSTORAGE_KEY,\n  DISABLE_ORDER_VALIDATION_KEY,\n  IS_PNL_IN_LEVERAGE_KEY,\n  LANGUAGE_LOCALSTORAGE_KEY,\n  REFERRAL_CODE_KEY,\n  SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY,\n  SHOULD_SHOW_POSITION_LINES_KEY,\n  SHOW_PNL_AFTER_FEES_KEY,\n  SLIPPAGE_BPS_KEY,\n} from \"config/localStorage\";\nimport { SyntheticsEventsProvider } from \"context/SyntheticsEvents\";\nimport { useChainId } from \"lib/chains\";\nimport { helperToast } from \"lib/helperToast\";\nimport { defaultLocale, dynamicActivate } from \"lib/i18n\";\nimport { useLocalStorageSerializeKey } from \"lib/localStorage\";\nimport { getWsProvider } from \"lib/rpc\";\nimport {\n  activateInjectedProvider,\n  clearWalletConnectData,\n  clearWalletLinkData,\n  getInjectedHandler,\n  getWalletConnectHandler,\n  hasCoinBaseWalletExtension,\n  hasMetaMaskWalletExtension,\n  useEagerConnect,\n  useHandleUnsupportedNetwork,\n  useInactiveListener,\n} from \"lib/wallets\";\nimport { MarketPoolsPage } from \"pages/MarketPoolsPage/MarketPoolsPage\";\nimport { SyntheticsPage } from \"pages/SyntheticsPage/SyntheticsPage\";\nimport { SyntheticsStats } from \"pages/SyntheticsStats/SyntheticsStats\";\nimport { SyntheticsFallbackPage } from \"pages/SyntheticsFallbackPage/SyntheticsFallbackPage\";\nimport Button from \"components/Button/Button\";\n\nif (window?.ethereum?.autoRefreshOnNetworkChange) {\n  window.ethereum.autoRefreshOnNetworkChange = false;\n}\n\nfunction getLibrary(provider) {\n  const library = new Web3Provider(provider);\n  return library;\n}\n\nconst Zoom = cssTransition({\n  enter: \"zoomIn\",\n  exit: \"zoomOut\",\n  appendPosition: false,\n  collapse: true,\n  collapseDuration: 200,\n  duration: 200,\n});\n\nconst SyntheticsEventsProviderWrapper = ({ children }) => {\n  const { chainId } = useChainId();\n\n  if (getIsSyntheticsSupported(chainId)) {\n    return <SyntheticsEventsProvider>{children}</SyntheticsEventsProvider>;\n  }\n\n  return <>{children}</>;\n};\n\nfunction FullApp() {\n  const isHome = isHomeSite();\n  const exchangeRef = useRef();\n  const { connector, library, deactivate, activate, active } = useWeb3React();\n  const { chainId } = useChainId();\n  const location = useLocation();\n  const history = useHistory();\n  useEventToast();\n  const [activatingConnector, setActivatingConnector] = useState();\n  useEffect(() => {\n    if (activatingConnector && activatingConnector === connector) {\n      setActivatingConnector(undefined);\n    }\n  }, [activatingConnector, connector, chainId]);\n  const triedEager = useEagerConnect(setActivatingConnector);\n  useInactiveListener(!triedEager || !!activatingConnector);\n\n  useHandleUnsupportedNetwork();\n\n  const query = useRouteQuery();\n\n  useEffect(() => {\n    let referralCode = query.get(REFERRAL_CODE_QUERY_PARAM);\n    if (!referralCode || referralCode.length === 0) {\n      const params = new URLSearchParams(window.location.search);\n      referralCode = params.get(REFERRAL_CODE_QUERY_PARAM);\n    }\n\n    if (referralCode && referralCode.length <= 20) {\n      const encodedReferralCode = encodeReferralCode(referralCode);\n      if (encodeReferralCode !== ethers.constants.HashZero) {\n        localStorage.setItem(REFERRAL_CODE_KEY, encodedReferralCode);\n        const queryParams = new URLSearchParams(location.search);\n        if (queryParams.has(REFERRAL_CODE_QUERY_PARAM)) {\n          queryParams.delete(REFERRAL_CODE_QUERY_PARAM);\n          history.replace({\n            search: queryParams.toString(),\n          });\n        }\n      }\n    }\n  }, [query, history, location]);\n\n  const disconnectAccount = useCallback(() => {\n    // only works with WalletConnect\n    clearWalletConnectData();\n    // force clear localStorage connection for MM/CB Wallet (Brave legacy)\n    clearWalletLinkData();\n    deactivate();\n  }, [deactivate]);\n\n  const disconnectAccountAndCloseSettings = () => {\n    disconnectAccount();\n    localStorage.removeItem(SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY);\n    localStorage.removeItem(CURRENT_PROVIDER_LOCALSTORAGE_KEY);\n    setIsSettingsVisible(false);\n  };\n\n  const connectInjectedWallet = getInjectedHandler(activate, deactivate);\n  const activateWalletConnect = () => {\n    getWalletConnectHandler(activate, deactivate, setActivatingConnector)();\n  };\n\n  const userOnMobileDevice = \"navigator\" in window && isMobileDevice(window.navigator);\n\n  const activateMetaMask = () => {\n    if (!hasMetaMaskWalletExtension()) {\n      helperToast.error(\n        <div>\n          <Trans>MetaMask not detected.</Trans>\n          <br />\n          <br />\n          {userOnMobileDevice ? (\n            <Trans>\n              <ExternalLink href=\"https://metamask.io\">Install MetaMask</ExternalLink>, and use GMX with its built-in\n              browser.\n            </Trans>\n          ) : (\n            <Trans>\n              <ExternalLink href=\"https://metamask.io\">Install MetaMask</ExternalLink> to start using GMX.\n            </Trans>\n          )}\n        </div>\n      );\n      return false;\n    }\n    attemptActivateWallet(\"MetaMask\");\n  };\n  const activateCoinBase = () => {\n    if (!hasCoinBaseWalletExtension()) {\n      helperToast.error(\n        <div>\n          <Trans>Coinbase Wallet not detected.</Trans>\n          <br />\n          <br />\n          {userOnMobileDevice ? (\n            <Trans>\n              <ExternalLink href=\"https://www.coinbase.com/wallet\">Install Coinbase Wallet</ExternalLink>, and use GMX\n              with its built-in browser.\n            </Trans>\n          ) : (\n            <Trans>\n              <ExternalLink href=\"https://www.coinbase.com/wallet\">Install Coinbase Wallet</ExternalLink> to start using\n              GMX.\n            </Trans>\n          )}\n        </div>\n      );\n      return false;\n    }\n    attemptActivateWallet(\"CoinBase\");\n  };\n\n  const attemptActivateWallet = (providerName) => {\n    localStorage.setItem(SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY, true);\n    localStorage.setItem(CURRENT_PROVIDER_LOCALSTORAGE_KEY, providerName);\n    activateInjectedProvider(providerName);\n    connectInjectedWallet();\n  };\n\n  const [walletModalVisible, setWalletModalVisible] = useState(false);\n  const [redirectModalVisible, setRedirectModalVisible] = useState(false);\n  const [shouldHideRedirectModal, setShouldHideRedirectModal] = useState(false);\n  const [redirectPopupTimestamp, setRedirectPopupTimestamp] = useLocalStorage(REDIRECT_POPUP_TIMESTAMP_KEY);\n  const [selectedToPage, setSelectedToPage] = useState(\"\");\n  const connectWallet = () => setWalletModalVisible(true);\n\n  const [isSettingsVisible, setIsSettingsVisible] = useState(false);\n  const [savedSlippageAmount, setSavedSlippageAmount] = useLocalStorageSerializeKey(\n    [chainId, SLIPPAGE_BPS_KEY],\n    DEFAULT_SLIPPAGE_AMOUNT\n  );\n  const [slippageAmount, setSlippageAmount] = useState(0);\n  const [isPnlInLeverage, setIsPnlInLeverage] = useState(false);\n  const [shouldDisableValidationForTesting, setShouldDisableValidationForTesting] = useState(false);\n  const [showPnlAfterFees, setShowPnlAfterFees] = useState(true);\n\n  const [savedIsPnlInLeverage, setSavedIsPnlInLeverage] = useLocalStorageSerializeKey(\n    [chainId, IS_PNL_IN_LEVERAGE_KEY],\n    false\n  );\n\n  const [savedShowPnlAfterFees, setSavedShowPnlAfterFees] = useLocalStorageSerializeKey(\n    [chainId, SHOW_PNL_AFTER_FEES_KEY],\n    true\n  );\n  const [savedShouldDisableValidationForTesting, setSavedShouldDisableValidationForTesting] =\n    useLocalStorageSerializeKey([chainId, DISABLE_ORDER_VALIDATION_KEY], false);\n\n  const [savedShouldShowPositionLines, setSavedShouldShowPositionLines] = useLocalStorageSerializeKey(\n    [chainId, SHOULD_SHOW_POSITION_LINES_KEY],\n    false\n  );\n\n  const openSettings = () => {\n    const slippage = parseInt(savedSlippageAmount);\n    setSlippageAmount((slippage / BASIS_POINTS_DIVISOR) * 100);\n    setIsPnlInLeverage(savedIsPnlInLeverage);\n    setShowPnlAfterFees(savedShowPnlAfterFees);\n    setShouldDisableValidationForTesting(savedShouldDisableValidationForTesting);\n    setIsSettingsVisible(true);\n  };\n\n  const saveAndCloseSettings = () => {\n    const slippage = parseFloat(slippageAmount);\n    if (isNaN(slippage)) {\n      helperToast.error(t`Invalid slippage value`);\n      return;\n    }\n    if (slippage > 5) {\n      helperToast.error(t`Slippage should be less than 5%`);\n      return;\n    }\n\n    const basisPoints = (slippage * BASIS_POINTS_DIVISOR) / 100;\n    if (parseInt(basisPoints) !== parseFloat(basisPoints)) {\n      helperToast.error(t`Max slippage precision is 0.01%`);\n      return;\n    }\n\n    setSavedIsPnlInLeverage(isPnlInLeverage);\n    setSavedShowPnlAfterFees(showPnlAfterFees);\n    setSavedShouldDisableValidationForTesting(shouldDisableValidationForTesting);\n    setSavedSlippageAmount(basisPoints);\n    setIsSettingsVisible(false);\n  };\n\n  const localStorageCode = window.localStorage.getItem(REFERRAL_CODE_KEY);\n  const baseUrl = getAppBaseUrl();\n  let appRedirectUrl = baseUrl + selectedToPage;\n  if (localStorageCode && localStorageCode.length > 0 && localStorageCode !== ethers.constants.HashZero) {\n    const decodedRefCode = decodeReferralCode(localStorageCode);\n    if (decodedRefCode) {\n      appRedirectUrl = `${appRedirectUrl}?ref=${decodedRefCode}`;\n    }\n  }\n\n  const [pendingTxns, setPendingTxns] = useState([]);\n\n  const showRedirectModal = (to) => {\n    setRedirectModalVisible(true);\n    setSelectedToPage(to);\n  };\n\n  useEffect(() => {\n    const checkPendingTxns = async () => {\n      const updatedPendingTxns = [];\n      for (let i = 0; i < pendingTxns.length; i++) {\n        const pendingTxn = pendingTxns[i];\n        const receipt = await library.getTransactionReceipt(pendingTxn.hash);\n        if (receipt) {\n          if (receipt.status === 0) {\n            const txUrl = getExplorerUrl(chainId) + \"tx/\" + pendingTxn.hash;\n            helperToast.error(\n              <div>\n                <Trans>\n                  Txn failed. <ExternalLink href={txUrl}>View</ExternalLink>\n                </Trans>\n                <br />\n              </div>\n            );\n          }\n          if (receipt.status === 1 && pendingTxn.message) {\n            const txUrl = getExplorerUrl(chainId) + \"tx/\" + pendingTxn.hash;\n            helperToast.success(\n              <div>\n                {pendingTxn.message}{\" \"}\n                <ExternalLink href={txUrl}>\n                  <Trans>View</Trans>\n                </ExternalLink>\n                <br />\n              </div>\n            );\n          }\n          continue;\n        }\n        updatedPendingTxns.push(pendingTxn);\n      }\n\n      if (updatedPendingTxns.length !== pendingTxns.length) {\n        setPendingTxns(updatedPendingTxns);\n      }\n    };\n\n    const interval = setInterval(() => {\n      checkPendingTxns();\n    }, 2 * 1000);\n    return () => clearInterval(interval);\n  }, [library, pendingTxns, chainId]);\n\n  const vaultAddress = getContract(chainId, \"Vault\");\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\n\n  useEffect(() => {\n    const wsVaultAbi = chainId === ARBITRUM ? VaultV2.abi : VaultV2b.abi;\n    const wsProvider = getWsProvider(active, chainId);\n    if (!wsProvider) {\n      return;\n    }\n\n    const wsVault = new ethers.Contract(vaultAddress, wsVaultAbi, wsProvider);\n    const wsPositionRouter = new ethers.Contract(positionRouterAddress, PositionRouter.abi, wsProvider);\n\n    const callExchangeRef = (method, ...args) => {\n      if (!exchangeRef || !exchangeRef.current) {\n        return;\n      }\n\n      exchangeRef.current[method](...args);\n    };\n\n    // handle the subscriptions here instead of within the Exchange component to avoid unsubscribing and re-subscribing\n    // each time the Exchange components re-renders, which happens on every data update\n    const onUpdatePosition = (...args) => callExchangeRef(\"onUpdatePosition\", ...args);\n    const onClosePosition = (...args) => callExchangeRef(\"onClosePosition\", ...args);\n    const onIncreasePosition = (...args) => callExchangeRef(\"onIncreasePosition\", ...args);\n    const onDecreasePosition = (...args) => callExchangeRef(\"onDecreasePosition\", ...args);\n    const onCancelIncreasePosition = (...args) => callExchangeRef(\"onCancelIncreasePosition\", ...args);\n    const onCancelDecreasePosition = (...args) => callExchangeRef(\"onCancelDecreasePosition\", ...args);\n\n    wsVault.on(\"UpdatePosition\", onUpdatePosition);\n    wsVault.on(\"ClosePosition\", onClosePosition);\n    wsVault.on(\"IncreasePosition\", onIncreasePosition);\n    wsVault.on(\"DecreasePosition\", onDecreasePosition);\n    wsPositionRouter.on(\"CancelIncreasePosition\", onCancelIncreasePosition);\n    wsPositionRouter.on(\"CancelDecreasePosition\", onCancelDecreasePosition);\n\n    return function cleanup() {\n      wsVault.off(\"UpdatePosition\", onUpdatePosition);\n      wsVault.off(\"ClosePosition\", onClosePosition);\n      wsVault.off(\"IncreasePosition\", onIncreasePosition);\n      wsVault.off(\"DecreasePosition\", onDecreasePosition);\n      wsPositionRouter.off(\"CancelIncreasePosition\", onCancelIncreasePosition);\n      wsPositionRouter.off(\"CancelDecreasePosition\", onCancelDecreasePosition);\n    };\n  }, [active, chainId, vaultAddress, positionRouterAddress]);\n\n  return (\n    <>\n      <div className=\"App\">\n        <div className=\"App-content\">\n          <Header\n            disconnectAccountAndCloseSettings={disconnectAccountAndCloseSettings}\n            openSettings={openSettings}\n            setWalletModalVisible={setWalletModalVisible}\n            redirectPopupTimestamp={redirectPopupTimestamp}\n            showRedirectModal={showRedirectModal}\n          />\n          {isHome && (\n            <Switch>\n              <Route exact path=\"/\">\n                <Home showRedirectModal={showRedirectModal} redirectPopupTimestamp={redirectPopupTimestamp} />\n              </Route>\n              <Route exact path=\"/referral-terms\">\n                <ReferralTerms />\n              </Route>\n              <Route exact path=\"/terms-and-conditions\">\n                <TermsAndConditions />\n              </Route>\n              <Route path=\"*\">\n                <PageNotFound />\n              </Route>\n            </Switch>\n          )}\n          {!isHome && (\n            <Switch>\n              <Route exact path=\"/\">\n                <Redirect to=\"/dashboard\" />\n              </Route>\n              <Route exact path=\"/trade\">\n                <Exchange\n                  ref={exchangeRef}\n                  savedShowPnlAfterFees={savedShowPnlAfterFees}\n                  savedIsPnlInLeverage={savedIsPnlInLeverage}\n                  setSavedIsPnlInLeverage={setSavedIsPnlInLeverage}\n                  savedSlippageAmount={savedSlippageAmount}\n                  setPendingTxns={setPendingTxns}\n                  pendingTxns={pendingTxns}\n                  savedShouldShowPositionLines={savedShouldShowPositionLines}\n                  setSavedShouldShowPositionLines={setSavedShouldShowPositionLines}\n                  connectWallet={connectWallet}\n                  savedShouldDisableValidationForTesting={savedShouldDisableValidationForTesting}\n                />\n              </Route>\n              <Route exact path=\"/dashboard\">\n                <Dashboard />\n              </Route>\n              <Route exact path=\"/stats\">\n                <Stats />\n              </Route>\n              <Route exact path=\"/stats/v2\">\n                {getIsSyntheticsSupported(chainId) ? <SyntheticsStats /> : <SyntheticsFallbackPage />}\n              </Route>\n              <Route exact path=\"/earn\">\n                <Stake setPendingTxns={setPendingTxns} connectWallet={connectWallet} />\n              </Route>\n              <Route exact path=\"/buy\">\n                <Buy\n                  savedSlippageAmount={savedSlippageAmount}\n                  setPendingTxns={setPendingTxns}\n                  connectWallet={connectWallet}\n                />\n              </Route>\n              <Route exact path=\"/pools\">\n                {getIsSyntheticsSupported(chainId) ? (\n                  <MarketPoolsPage connectWallet={connectWallet} setPendingTxns={setPendingTxns} />\n                ) : (\n                  <SyntheticsFallbackPage />\n                )}\n              </Route>\n\n              <Route exact path=\"/v2\">\n                {getIsSyntheticsSupported(chainId) ? (\n                  <SyntheticsPage\n                    onConnectWallet={connectWallet}\n                    savedIsPnlInLeverage={savedIsPnlInLeverage}\n                    shouldDisableValidation={shouldDisableValidationForTesting}\n                    savedShouldShowPositionLines={savedShouldShowPositionLines}\n                    setSavedShouldShowPositionLines={setSavedShouldShowPositionLines}\n                    setPendingTxns={setPendingTxns}\n                    showPnlAfterFees={showPnlAfterFees}\n                  />\n                ) : (\n                  <SyntheticsFallbackPage />\n                )}\n              </Route>\n              <Route exact path=\"/buy_glp\">\n                <BuyGlp\n                  savedSlippageAmount={savedSlippageAmount}\n                  setPendingTxns={setPendingTxns}\n                  connectWallet={connectWallet}\n                  savedShouldDisableValidationForTesting={savedShouldDisableValidationForTesting}\n                />\n              </Route>\n              <Route exact path=\"/jobs\">\n                <Jobs />\n              </Route>\n              <Route exact path=\"/buy_gmx\">\n                <BuyGMX />\n              </Route>\n              <Route exact path=\"/ecosystem\">\n                <Ecosystem />\n              </Route>\n              <Route exact path=\"/referrals\">\n                <Referrals pendingTxns={pendingTxns} connectWallet={connectWallet} setPendingTxns={setPendingTxns} />\n              </Route>\n              <Route exact path=\"/referrals/:account\">\n                <Referrals pendingTxns={pendingTxns} connectWallet={connectWallet} setPendingTxns={setPendingTxns} />\n              </Route>\n              <Route exact path=\"/nft_wallet\">\n                <NftWallet />\n              </Route>\n              <Route exact path=\"/claim_es_gmx\">\n                <ClaimEsGmx setPendingTxns={setPendingTxns} />\n              </Route>\n              <Route exact path=\"/actions\">\n                <Actions />\n              </Route>\n              <Route exact path=\"/actions/:account\">\n                <Actions savedIsPnlInLeverage={savedIsPnlInLeverage} savedShowPnlAfterFees={savedShowPnlAfterFees} />\n              </Route>\n              <Route exact path=\"/orders_overview\">\n                <OrdersOverview />\n              </Route>\n              <Route exact path=\"/positions_overview\">\n                <PositionsOverview />\n              </Route>\n              <Route exact path=\"/begin_account_transfer\">\n                <BeginAccountTransfer setPendingTxns={setPendingTxns} />\n              </Route>\n              <Route exact path=\"/complete_account_transfer/:sender/:receiver\">\n                <CompleteAccountTransfer setPendingTxns={setPendingTxns} />\n              </Route>\n              <Route path=\"*\">\n                <PageNotFound />\n              </Route>\n            </Switch>\n          )}\n        </div>\n      </div>\n      <ToastContainer\n        limit={1}\n        transition={Zoom}\n        position=\"bottom-right\"\n        autoClose={7000}\n        hideProgressBar={true}\n        newestOnTop={false}\n        closeOnClick={false}\n        draggable={false}\n        pauseOnHover\n      />\n      <EventToastContainer />\n      <RedirectPopupModal\n        redirectModalVisible={redirectModalVisible}\n        setRedirectModalVisible={setRedirectModalVisible}\n        appRedirectUrl={appRedirectUrl}\n        setRedirectPopupTimestamp={setRedirectPopupTimestamp}\n        setShouldHideRedirectModal={setShouldHideRedirectModal}\n        shouldHideRedirectModal={shouldHideRedirectModal}\n      />\n      <Modal\n        className=\"Connect-wallet-modal\"\n        isVisible={walletModalVisible}\n        setIsVisible={setWalletModalVisible}\n        label={t`Connect Wallet`}\n      >\n        <button className=\"Wallet-btn MetaMask-btn\" onClick={activateMetaMask}>\n          <img src={metamaskImg} alt=\"MetaMask\" />\n          <div>\n            <Trans>MetaMask</Trans>\n          </div>\n        </button>\n        <button className=\"Wallet-btn CoinbaseWallet-btn\" onClick={activateCoinBase}>\n          <img src={coinbaseImg} alt=\"Coinbase Wallet\" />\n          <div>\n            <Trans>Coinbase Wallet</Trans>\n          </div>\n        </button>\n        <button className=\"Wallet-btn WalletConnect-btn\" onClick={activateWalletConnect}>\n          <img src={walletConnectImg} alt=\"WalletConnect\" />\n          <div>\n            <Trans>WalletConnect</Trans>\n          </div>\n        </button>\n      </Modal>\n      <Modal\n        className=\"App-settings\"\n        isVisible={isSettingsVisible}\n        setIsVisible={setIsSettingsVisible}\n        label={t`Settings`}\n      >\n        <div className=\"App-settings-row\">\n          <div>\n            <Trans>Allowed Slippage</Trans>\n          </div>\n          <div className=\"App-slippage-tolerance-input-container\">\n            <input\n              type=\"number\"\n              className=\"App-slippage-tolerance-input\"\n              min=\"0\"\n              value={slippageAmount}\n              onChange={(e) => setSlippageAmount(e.target.value)}\n            />\n            <div className=\"App-slippage-tolerance-input-percent\">%</div>\n          </div>\n        </div>\n        <div className=\"Exchange-settings-row\">\n          <Checkbox isChecked={showPnlAfterFees} setIsChecked={setShowPnlAfterFees}>\n            <Trans>Display PnL after fees</Trans>\n          </Checkbox>\n        </div>\n        <div className=\"Exchange-settings-row\">\n          <Checkbox isChecked={isPnlInLeverage} setIsChecked={setIsPnlInLeverage}>\n            <Trans>Include PnL in leverage display</Trans>\n          </Checkbox>\n        </div>\n        <div className=\"Exchange-settings-row chart-positions-settings\">\n          <Checkbox isChecked={savedShouldShowPositionLines} setIsChecked={setSavedShouldShowPositionLines}>\n            <span>\n              <Trans>Chart positions</Trans>\n            </span>\n          </Checkbox>\n        </div>\n        {isDevelopment() && (\n          <div className=\"Exchange-settings-row\">\n            <Checkbox isChecked={shouldDisableValidationForTesting} setIsChecked={setShouldDisableValidationForTesting}>\n              <Trans>Disable order validations</Trans>\n            </Checkbox>\n          </div>\n        )}\n\n        <Button variant=\"primary-action\" className=\"w-100 mt-md\" onClick={saveAndCloseSettings}>\n          <Trans>Save</Trans>\n        </Button>\n      </Modal>\n    </>\n  );\n}\n\nfunction App() {\n  useScrollToTop();\n  useEffect(() => {\n    const defaultLanguage = localStorage.getItem(LANGUAGE_LOCALSTORAGE_KEY) || defaultLocale;\n    dynamicActivate(defaultLanguage);\n  }, []);\n  return (\n    <SWRConfig value={{ refreshInterval: 5000 }}>\n      <Web3ReactProvider getLibrary={getLibrary}>\n        <SyntheticsEventsProviderWrapper>\n          <SEO>\n            <Router>\n              <I18nProvider i18n={i18n}>\n                <FullApp />\n              </I18nProvider>\n            </Router>\n          </SEO>\n        </SyntheticsEventsProviderWrapper>\n      </Web3ReactProvider>\n    </SWRConfig>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function useRouteQuery() {\n  const { search } = useLocation();\n  return React.useMemo(() => new URLSearchParams(search), [search]);\n}\n","import { useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nexport default function useScrollToTop() {\n  const history = useHistory();\n  useEffect(() => {\n    const unlisten = history.listen(() => {\n      window.scrollTo(0, 0);\n    });\n    return () => {\n      unlisten();\n    };\n  }, [history]);\n}\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"regenerator-runtime/runtime\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport App from \"./App/App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.info))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\nexport { formatUsd } from \"./lib/numbers\";\nexport { formatTokenAmountWithUsd } from \"./lib/numbers\";\nexport { formatTokenAmount } from \"./lib/numbers\";\n"],"sourceRoot":""}